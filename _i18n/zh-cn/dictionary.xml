<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="319c1a7b5479ffa2a028b658ad5b7033" category="inline-link-macro">tridentctl 命令和选项</block>
  <block id="8b3c7aa88e751573c842f17535525f19" category="paragraph">API 的工作原理如下：</block>
  <block id="5b2f45c3d098b61927afda859c9144f8" category="list-text">如果对象已存在，则行为会有所不同：后端更新现有对象，而所有其他对象类型将使操作失败。</block>
  <block id="a1582c89f8e85f372306a05848eafb68" category="summary">NetApp 存储产品组合可与 Kubernetes 集群的许多不同方面相集成，从而提供高级数据管理功能，从而增强 Kubernetes 部署的功能，功能，性能和可用性。</block>
  <block id="253b40ae359ba25b56231803430c4873" category="section-title">ONTAP</block>
  <block id="cbb7697b4f6f189240d043ff70ca133c" category="admonition">Trident 支持上述所有 ONTAP 部署模式。</block>
  <block id="117bdbda976fe8b3212bc3b6327a0a1b" category="section-title">Cloud Volumes ONTAP</block>
  <block id="5c04ffbd0c110bf7b37d6b95eb756b75" category="paragraph"><block ref="700b45b9fca207b66f675c8d5dfb073b" category="inline-link-rx"></block> 是一款纯软件存储设备，可在云中运行 ONTAP 数据管理软件。您可以将 Cloud Volumes ONTAP 用于生产工作负载、灾难恢复、 DevOps 、文件共享和数据库管理。它通过提供存储效率，高可用性，数据复制，数据分层和应用程序一致性，将企业级存储扩展到云。</block>
  <block id="4d82a1ec1af02725042c8c785564ee7a" category="section-title">适用于 NetApp ONTAP 的 Amazon FSX</block>
  <block id="27bb76bfb1e4f9966c31f5042348cd1e" category="section-title">Element 软件</block>
  <block id="231afe47f3f37d3808096b36c28b4ded" category="inline-link">Element</block>
  <block id="1fdf61a8f946268990d8e15dd9069a6d" category="paragraph"><block ref="eca39b018af81e7b5c8e71b5b4aa3790" category="inline-link-rx"></block> 通过保证性能并简化存储占用空间，使存储管理员能够整合工作负载。Element 与 API 相结合，可实现存储管理各个方面的自动化，可帮助存储管理员事半功倍。</block>
  <block id="08edd2123939d5309dced149763a50ee" category="section-title">NetApp HCI</block>
  <block id="25f221cc63a7e1fa55b05c29420a72a2" category="paragraph"><block ref="2841e7defe3939e68d83d007d1ad666b" category="inline-link-rx"></block> 通过自动化执行日常任务并使基础架构管理员能够专注于更重要的功能，简化数据中心的管理和扩展。</block>
  <block id="be17f8b9c728a6cb61cad5a2609b3888" category="paragraph">Trident 完全支持 NetApp HCI 。Trident 可以直接在底层 NetApp HCI 存储平台上为容器化应用程序配置和管理存储设备。</block>
  <block id="7450cfde7058dc5e1f7909d0280fd7ae" category="section-title">Azure NetApp Files</block>
  <block id="29e7ab00082418141d470583a19c28d3" category="paragraph"><block ref="2384314bcd106c8062815b2ed789c4ad" category="inline-link-rx"></block> 是一种企业级 Azure 文件共享服务，由 NetApp 提供支持。您可以在 Azure 中以本机方式运行要求最苛刻的基于文件的工作负载，同时享受 NetApp 应有的性能和丰富的数据管理功能。</block>
  <block id="b0cee72642f5457a71ddd0b49efb6d93" category="section-title">适用于 Google Cloud 的 Cloud Volumes Service</block>
  <block id="5ee08ab883e000ce6b739dbb0b6ff376" category="summary">详细了解 Kubernetes 系统的各个部分。</block>
  <block id="607ae6360b32f1bd6e559e915d414fab" category="doc">Kubernetes 概念</block>
  <block id="d60f0fff1c23a02458849862f593357e" category="inline-link">Kubernetes 系统</block>
  <block id="a7018a5fd7b610274c7786aa5402e64d" category="paragraph">详细了解的各个部分<block ref="f01a74527fa0343e793eb393c9d4809a" category="inline-link-rx"></block>。</block>
  <block id="7d4fab76513c90b603a722620cde60fe" category="doc">命令行选项</block>
  <block id="8db7df66ab1d7ab5f1dc947acdb5fae4" category="section-title">日志记录</block>
  <block id="30136395f01879792198317c11831ea4" category="section-title">Kubernetes</block>
  <block id="c5fd214cdd0d2b3b4272e73b022ba5c2" category="section-title">Docker</block>
  <block id="50780f47f6839d47d60bc4555ee00c3f" category="section-title">REST</block>
  <block id="afe272beb780ad53d441c342bf1c8c77" category="summary">了解有关 tridentctl 的更多信息， tridentctl 是一个命令行实用程序，可用于轻松访问 Trident 。</block>
  <block id="7358b1fd077fa65f88fff87888fd2547" category="inline-link">Trident 安装程序包</block>
  <block id="1c90ba5cf3791b6148c7887a696911ec" category="paragraph">flags</block>
  <block id="2af72f100c356273d46284f6fd1dfc08" category="section-title">version</block>
  <block id="04333ff788951193122a833ecd614950" category="summary">Kubernetes 与 Trident ， Trident 与存储以及 Kubernetes 与存储之间的关系由多个资源对象决定。其中一些对象通过 Kubernetes 进行管理，而另一些对象则通过 Trident 进行管理。</block>
  <block id="da1e63dd673a1932cebb48b6a81bbbb1" category="doc">Kubernetes 和 Trident 对象</block>
  <block id="d107eefb0ce66911b186b03b9e9c337e" category="paragraph">您可以通过读取和写入资源对象来使用 REST API 与 Kubernetes 和 Trident 进行交互。Kubernetes 与 Trident ， Trident 与存储以及 Kubernetes 与存储之间的关系由多个资源对象决定。其中一些对象通过 Kubernetes 进行管理，而另一些对象则通过 Trident 进行管理。</block>
  <block id="62499e0de79c4d07c7915a36f9faa0d8" category="section-title">对象如何相互交互？</block>
  <block id="b9ea565816618011ca591fc191fe5e63" category="paragraph">了解对象，对象的用途以及对象交互方式的最简单方法可能是，遵循 Kubernetes 用户的单个存储请求：</block>
  <block id="ec7d6500a82a56ee8f5fff02eafa7af7" category="list-text">用户创建一个 `PersistentVolumeClaim` ，请求管理员先前配置的 Kubernetes `StorageClass` 中具有特定大小的新 `PersistentVolume` 。</block>
  <block id="6b25cc026b6f29464d3fce0f6ec67805" category="list-text">Kubernetes `StorageClass` 将 Trident 标识为其配置程序，并包含一些参数，用于指示 Trident 如何为请求的类配置卷。</block>
  <block id="5b078d6b19593ee6c55f428e2c85faa7" category="list-text">Trident 会查看自己的 `StorageClass` 并使用相同的名称来标识匹配的 `Backend` 和 `StoragePools` ，它可以使用这些卷为该类配置卷。</block>
  <block id="ff099186f912c7abb21bcf68690c98d7" category="list-text">Trident 会在匹配的后端配置存储并创建两个对象： Kubernetes 中的 A `PersistentVolume` 用于告知 Kubernetes 如何查找，挂载和处理卷； Trident 中的一个卷用于保留 `PersistentVolume` 与实际存储之间的关系。</block>
  <block id="6d2ae40bc02e88464563ae42ae22d54c" category="list-text">Kubernetes 会将 `PersistentVolumeClaim` 绑定到新的 `PersistentVolume` 。包含 `PersistentVolumeClaim` 的 Pod 会将此 PersistentVolume 挂载到其运行所在的任何主机上。</block>
  <block id="490c1b0e3a604c81abb3db1b778ec07b" category="list-text">用户使用指向 Trident 的 `VolumeSnapshotClass` 创建现有 PVC 的 `VolumeSnapshot` 。</block>
  <block id="9f4e11d34d158ebd365226367c8b15d9" category="list-text">Trident 标识与 PVC 关联的卷，并在其后端创建卷的快照。此外，它还会创建一个 `VolumeSnapshotContent` ，指示 Kubernetes 如何识别快照。</block>
  <block id="c6a606bdd6882cd42de13f2ba3614285" category="list-text">用户可以使用 `VolumeSnapshot` 作为源创建 `PersistentVolumeClaim` 。</block>
  <block id="8ecb92f33c033b00fcf3c18e59c4b177" category="list-text">Trident 可识别所需的快照，并执行与创建 `PersistentVolume` 和 `Volume` 相同的一组步骤。</block>
  <block id="428895404a5e57e01a138a5df672d0fc" category="inline-link">永久性卷</block>
  <block id="173423532ed9a565a05f32db2c8f8172" category="admonition">要进一步了解 Kubernetes 对象，强烈建议您阅读<block ref="92dc8ed82beb7484ab6097a3e91b0deb" category="inline-link-rx"></block> Kubernetes 文档的一节。</block>
  <block id="794a32773794ee6c545794c065d1a88b" category="paragraph">Kubernetes `PersistentVolumeClaim` 对象是 Kubernetes 集群用户发出的存储请求。</block>
  <block id="43cf8e1465c61efc8b1b9bf71aa9931c" category="paragraph">除了标准规范之外，如果用户要覆盖在后端配置中设置的默认值， Trident 还允许用户指定以下特定于卷的标注：</block>
  <block id="55f6611cb342565cf0f5002400f53a95" category="cell">标注</block>
  <block id="1527fede1d561a899313c8cb3eb1e7bf" category="cell">卷选项</block>
  <block id="db8a0bbeae97b94338c1b7a61e2a1ec3" category="cell">支持的驱动程序</block>
  <block id="f3780100617165ed98557e3a6d2be72d" category="cell">trident.netapp.io/fileSystem</block>
  <block id="44d4d4eb1f08d8eb29766160086f61dd" category="cell">文件系统</block>
  <block id="979f70bf9da982ee97ac075df4f048c3" category="cell">trident.netapp.io/cloneFromPVC</block>
  <block id="b4ead50a5ca4f307f7d61da7763ad204" category="cell">cloneSourceVolume</block>
  <block id="46ec89aa5290ead7b514dd5182caa0a7" category="cell">trident.netapp.io/splitOnClone</block>
  <block id="58c1c86186ef8de4f6e12d8f3aed8b64" category="cell">splitOnClone</block>
  <block id="80f05e749a4f524e8c8a05fa19d5df0e" category="cell">ontap-NAS ， ontap-san</block>
  <block id="d6f010e4b4bf9748dcaa34feb70188ce" category="cell">trident.netapp.io/protocol</block>
  <block id="81788ba0d7d02d81c063dbca621ba11b" category="cell">协议</block>
  <block id="100b8cad7cf2a56f6df78f171f97a1ec" category="cell">任意</block>
  <block id="e9898504ff0569325d48acaee7e9ced9" category="cell">trident.netapp.io/exportPolicy</block>
  <block id="647ce4e5394e2e595e46b4fc50a628e9" category="cell">导出策略</block>
  <block id="61396290e72fa7d707996351c8815bd6" category="cell">ontap-nas ， ontap-nas-economy-、 ontap-nas-flexgroup</block>
  <block id="2902d12b1fe6d9ef5bd1a3474f2356e9" category="cell">trident.netapp.io/snapshotPolicy</block>
  <block id="0a236e7685e50a59df980d0a30929d6c" category="cell">snapshotPolicy</block>
  <block id="7f3bf2672240703dc69740ce11443cf2" category="cell">ontap-nas ， ontap-nas-economy. ontap-nas-flexgroup ， ontap-san</block>
  <block id="6224177007fc13e9e0d3789985ed165a" category="cell">trident.netapp.io/snapshotReserve</block>
  <block id="bb0d75280f9b683f2f1f0767fd0aff9b" category="cell">SnapshotReserve</block>
  <block id="1cb43054bed661d8c8457ddbb43e1b1b" category="cell">trident.netapp.io/snapshotDirectory</block>
  <block id="1ae33c448502ac3d326593aee304c21f" category="cell">snapshotDirectory</block>
  <block id="ec1739ebad429a70f25efc292c347f8e" category="cell">trident.netapp.io/unixPermissions</block>
  <block id="c005e78d4bd808038335c32dd84cf7da" category="cell">unixPermissions</block>
  <block id="69d900d222446aab8591b45a7363c9e7" category="cell">trident.netapp.io/blockSize</block>
  <block id="480d1b61a0432d1319f7504a3d7318dd" category="cell">块大小</block>
  <block id="c0d2a793e71b152662b3e8cd2da00620" category="cell">solidfire-san</block>
  <block id="fc5f8320f80474f09bdd1e3c3849123e" category="paragraph">如果创建的 PV 具有 `Delete` reclaime 策略，则在释放 PV 时（即用户删除 PVC 时）， Trident 会同时删除 PV 和后备卷。如果删除操作失败， Trident 会将 PV 标记为相应的 PV ，并定期重试此操作，直到操作成功或 PV 手动删除为止。如果 PV 使用 ` +retain+` 策略， Trident 会忽略该策略，并假定管理员将从 Kubernetes 和后端清理该策略，以便在删除卷之前对其进行备份或检查。请注意，删除 PV 不会通过发生原因 Trident 删除后备卷。您应使用 REST API （`tridentctl` ）将其删除。</block>
  <block id="5dad99bb31feaed11fecbe29cf682e51" category="paragraph">Trident 支持使用 CSI 规范创建卷快照：您可以创建卷快照并将其用作数据源来克隆现有 PVC 。这样， PV 的时间点副本就可以以快照的形式公开给 Kubernetes 。然后，可以使用快照创建新的 PV 。请查看 ` + 按需卷快照 +` 了解其工作原理。</block>
  <block id="96e0288ecc3c91f97de46420e70a4f8f" category="paragraph">例如：如果用户已经有一个名为 `mysql` 的 PVC ，则用户可以使用标注创建一个名为 `mysqlclone` 的新 PVC ，例如 `trident.netapp.io/cloneFromPVC: mysql` 。设置了此标注后， Trident 将克隆与 mysql PVC 对应的卷，而不是从头开始配置卷。</block>
  <block id="ff0fa770e22db25a156c5e2d7f017283" category="paragraph">请考虑以下几点：</block>
  <block id="f89d76e06e88814705882a1faad838fb" category="list-text">一个 PVC 及其克隆应位于同一个 Kubernetes 命名空间中，并具有相同的存储类。</block>
  <block id="f769a6b54b1d1476b6628ebd1c4b98c4" category="list-text">使用 `ontap-nas` 和 `ontap-san` 驱动程序时，可能需要将 PVC 标注 `trident.netapp.io/splitOnClone` 与 `trident.netapp.io/cloneFromPVC` 结合使用。当 `trident.netapp.io/splitOnClone` 设置为 `true` 时， Trident 会将克隆的卷与父卷拆分，从而将克隆的卷与其父卷的生命周期完全分离，从而降低存储效率。如果不设置 `trident.netapp.io/splitOnClone` 或将其设置为 `false` ，则会减少后端的空间占用，而会在父卷和克隆卷之间创建依赖关系，因此除非先删除克隆，否则无法删除父卷。拆分克隆是有意义的一种情形，即克隆空数据库卷时，该卷及其克隆会发生很大的差异，无法从 ONTAP 提供的存储效率中受益。</block>
  <block id="6cb5412cc2fe8210c4d14d6d6b08ab79" category="paragraph">Kubernetes `PersistentVolume` 对象表示可供 Kubernetes 集群使用的一段存储。它的生命周期与使用它的 POD 无关。</block>
  <block id="292289b7334983e53d9fb9bd00d30820" category="admonition">Trident 会创建 `PersistentVolume` 对象，并根据其配置的卷自动将其注册到 Kubernetes 集群中。您不应自行管理它们。</block>
  <block id="443f09ca4d0d1cc13b5baa064b90c0b7" category="paragraph">创建引用基于 Trident 的 `S存储类` 的 PVC 时， Trident 会使用相应的存储类配置新卷并为该卷注册新的 PV 。在配置已配置的卷和相应的 PV 时， Trident 会遵循以下规则：</block>
  <block id="b27c91fe87605abbb0d5240430518a1c" category="list-text">Trident 会为 Kubernetes 生成 PV 名称及其用于配置存储的内部名称。在这两种情况下，它都可以确保名称在其范围内是唯一的。</block>
  <block id="9c2f88a5c4297bd88ead0cd6314fe886" category="list-text">卷的大小与 PVC 中请求的大小尽可能匹配，但可能会根据平台将其取整为最接近的可分配数量。</block>
  <block id="0d35625a483152791f4e2d0b751a09cc" category="paragraph">Kubernetes `StorageClass` 对象在 `PersistentVolumeClass` 中按名称指定，用于使用一组属性配置存储。存储类本身可标识要使用的配置程序，并按配置程序所了解的术语定义该属性集。</block>
  <block id="f7738d717849274e5992d460fd2c0a75" category="paragraph">它是需要由管理员创建和管理的两个基本对象之一。另一个是 Trident 后端对象。</block>
  <block id="e51377a773f4713e536b061eaa2d4b04" category="paragraph">使用 Trident 的 Kubernetes `StorageClass` 对象如下所示：</block>
  <block id="39edc8618b50008d4cb2050414d6921f" category="paragraph">这些参数是 Trident 专用的，可告诉 Trident 如何为类配置卷。</block>
  <block id="b16da8ed7f6c8cce3011dc2b6c7bd1a4" category="paragraph">存储类参数包括：</block>
  <block id="f2bbdf9f72c085adc4d0404e370f0f4c" category="cell">属性</block>
  <block id="a1fa27779242b4902f7ae3bdd5c6d508" category="cell">Type</block>
  <block id="b651efdb98a5d6bd2b3935d0c3f4a5e2" category="cell">Required</block>
  <block id="b5a7adde1af5c87d7fd797b6245c2a39" category="cell">Description</block>
  <block id="736b91750e516139acc13c5eb6564f92" category="cell">属性</block>
  <block id="59a1e7292a0114529fb1b3401b37bc28" category="cell">map[string]string</block>
  <block id="7fa3b767c460b54a2be4d49030b349c7" category="cell">否</block>
  <block id="1b40216e6fe613bd013bf8710182e650" category="cell">请参见下面的属性部分</block>
  <block id="c614017642b6cfd9e6a25c7df122d917" category="cell">存储池</block>
  <block id="b8f32852327d2ffce86ae3ead4fdfb52" category="cell">map[string]StringList</block>
  <block id="bdd0ddb870ed9de6f6e7d3a75200e9f7" category="cell">后端名称映射到中的存储池列表</block>
  <block id="145d1b89a9f9ed8bdc16d1f7a814cace" category="cell">附加 StoragePools</block>
  <block id="6907a73ad9068ddf5f99d022102220bb" category="cell">后端名称映射到中的存储池列表</block>
  <block id="7df974d787ead594df017a11672f2f0e" category="cell">排除 StoragePools</block>
  <block id="99ba77776c83983f5ecbd2b51f2b43ef" category="cell">后端名称映射到中的存储池列表</block>
  <block id="f74d4b2b456fb453c0980710290f66eb" category="paragraph">存储属性及其可能值可以分类为存储池选择属性和 Kubernetes 属性。</block>
  <block id="2fdf10f3f64b631cd3a137740de02f8b" category="section-title">存储池选择属性</block>
  <block id="1f5912cd581dba393d5eecc43059adf4" category="paragraph">这些参数决定了应使用哪些 Trident 管理的存储池来配置给定类型的卷。</block>
  <block id="c82a6100dace2b41087ba6cf99a5976a" category="cell">值</block>
  <block id="6bb24468956384c482a8b5a901fb6383" category="cell">优惠</block>
  <block id="15c2d85f1fae22a3c3a0594510a1f611" category="cell">请求</block>
  <block id="7aa57840938d59b415c1e10dcd1f7173" category="cell">支持</block>
  <block id="0e72be2e13bf8a2ff8078d3435e5aa7c" category="cell">介质^1^</block>
  <block id="b45cffe084dd3d20d928bee85e7b0f21" category="cell">string</block>
  <block id="9ccd7f94313a98beb95801927907a0ab" category="cell">HDD ，混合， SSD</block>
  <block id="9bf3032f6854fb376cd8e3e92e11b077" category="cell">Pool 包含此类型的介质；混合表示两者</block>
  <block id="5c79c761bae4c27e96c04e54d1da1e91" category="cell">指定的介质类型</block>
  <block id="c9cb5e737e2746339fd0b462332c8740" category="cell">ontap-nas ， ontap-nas-economy. ontap-nas-flexgroup ， ontap-san ， solidfire-san</block>
  <block id="b713baf75bcf13859037b5274d27d4b8" category="cell">配置类型</block>
  <block id="6026fbd9abd05590949de220154e3262" category="cell">精简，厚</block>
  <block id="3064025fe3541bec9942e14fcaedfab7" category="cell">Pool 支持此配置方法</block>
  <block id="cf65591e3da90317fc132ea7464105d8" category="cell">指定的配置方法</block>
  <block id="55b56fb238360663afa6230ad82e74a0" category="cell">后端类型</block>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="doc"></block>
  <block id="0e1201d4d96df2d9d03c9c66b90874a1" category="cell">池属于此类型的后端</block>
  <block id="c4efe19137f43450149d48fddbab6c28" category="cell">指定后端</block>
  <block id="a04622349b3ede0d4176ca2c2e161763" category="cell">所有驱动程序</block>
  <block id="695633290d050f31cec0c9d4bd4a57fe" category="cell">snapshots</block>
  <block id="c506ff134babdd6e68ab3e6350e95305" category="cell">池</block>
  <block id="ac1ffb15effdc77a86029972670d022f" category="cell">true false</block>
  <block id="4ac43bef181074fbd4a1f3620b46f77f" category="cell">Pool 支持具有快照的卷</block>
  <block id="13410bff9f7871113a6af273e2a1b97f" category="cell">启用了快照的卷</block>
  <block id="bc3832c405ec6cb9c831849328240f3b" category="cell">克隆</block>
  <block id="609d32aa243917905f282544b543752a" category="cell">Pool 支持克隆卷</block>
  <block id="bcb81802de31cf9c717de3c1d6c2f610" category="cell">启用了克隆的卷</block>
  <block id="5bdf74912a51c34815f11e9a3d20b609" category="cell">加密</block>
  <block id="5f2f2cc138a8bc7067c7f61ab4db0f4d" category="cell">池支持加密卷</block>
  <block id="0bda31a93b84fd2b45a90df39c4c8049" category="cell">已启用加密的卷</block>
  <block id="dcc09b4a72e31323b652676ce4677771" category="cell">ontap-nas ， ontap-nas-economy-、 ontap-nas-flexgroups ， ontap-san</block>
  <block id="79073619fba8242703524f16870ff858" category="cell">IOPS</block>
  <block id="fa7153f7ed1cb6c0fcf2ffb2fac21748" category="cell">内部</block>
  <block id="86e5d65893929e5d38b4bdcb9fb48ecd" category="cell">正整数</block>
  <block id="bf57d1db8292b2855fa998a86562cfa7" category="cell">Pool 能够保证此范围内的 IOPS</block>
  <block id="342a7ce5bb7debc6ba84dc2a3bced587" category="cell">卷保证这些 IOPS</block>
  <block id="895f3d78c77292d9761bdabdc3cf0c99" category="paragraph">^1^ ： ONTAP Select 系统不支持</block>
  <block id="5b3c68bde0b3658758a8ebf47ec6abf1" category="paragraph">在大多数情况下，请求的值直接影响配置；例如，请求厚配置会导致卷配置较厚。但是， Element 存储池会使用其提供的 IOPS 最小值和最大值来设置 QoS 值，而不是请求的值。在这种情况下，请求的值仅用于选择存储池。</block>
  <block id="311fa7e17587a62a6fdcb110253feed7" category="paragraph">理想情况下，您可以单独使用 `attributes` 来为满足特定类需求所需的存储质量建模。Trident 会自动发现并选择与您指定的 `属性` 的 _all_ 匹配的存储池。</block>
  <block id="d0c865b74e0c4b4b387506e9e95d22b2" category="paragraph">如果您发现自己无法使用 `attributes` 自动为某个类选择合适的池，则可以使用 `storagePools` 和 `addtionalStoragePools` 参数进一步细化池，甚至可以选择一组特定的池。</block>
  <block id="06a87a25fa98442cf561762851213f7e" category="paragraph">您可以使用 `storagePools` 参数进一步限制与任何指定的 `attributes` 匹配的池集。换言之， Trident 会使用 `attributes` 和 `storagePools` 参数标识的池的交叉点进行配置。您可以单独使用参数，也可以同时使用这两者。</block>
  <block id="0c66a737e57eb6ac0885d2ba6d87cc12" category="paragraph">您可以使用 `addtionalStoragePools` 参数扩展 Trident 用于配置的池集，而不管 `attributes` 和 `storagePools` 参数选择的任何池如何。</block>
  <block id="2ed95c63c6e58641d710e098e7e23154" category="paragraph">您可以使用 `excludeStoragePools` 参数筛选 Trident 用于配置的池集。使用此参数将删除任何匹配的池。</block>
  <block id="9f8bfd75f7eb5b95503bb0abedf83b40" category="paragraph">在 `storagePools` 和 `addtionalStoragePools` 参数中，每个条目的格式为 ` &lt;backend&gt;： &lt;storagePoolList&gt;` ，其中 ` &lt;storagePoolList&gt;` 是指定后端的存储池列表，以逗号分隔。例如， `addtionalStoragePools` 的值可能类似于 `ontapnas_192.168.1.100 ： aggr1 ， aggr2 ； solidfire_192.168.1.101 ： bronze` 。这些列表接受后端值和列表值的正则表达式值。您可以使用 `tridentctl get backend` 来获取后端及其池的列表。</block>
  <block id="c087dddd46fcf0fbbf390abeff2216c3" category="section-title">Kubernetes 属性</block>
  <block id="d05956159ee82aafaaacfe08d33d3be6" category="paragraph">这些属性不会影响 Trident 在动态配置期间选择的存储池 / 后端。相反，这些属性仅提供 Kubernetes 永久性卷支持的参数。工作节点负责文件系统创建操作，并且可能需要文件系统实用程序，例如 xfsprogs 。</block>
  <block id="0e6ac0d7fca9c59e6545312a071555b6" category="cell">相关驱动程序</block>
  <block id="ae6b2a160dd2fafdee385c348edee0c1" category="cell">Kubernetes 版本</block>
  <block id="7cfbb6f07899c8071ff38e69dca190e2" category="cell">FSType</block>
  <block id="7928a56d4874d982a06a59e3f30f6935" category="cell">块卷的文件系统类型</block>
  <block id="b1c94ca2fbc3e78fc30069c8d0f01680" category="cell">全部</block>
  <block id="2435c5eb0d842c13f635d4b1d6667a52" category="paragraph">Trident 安装程序包提供了几个示例存储类定义，可用于 ``sample-input/storage-class-* 。 yaml`` 中的 Trident 。删除 Kubernetes 存储类也会删除相应的 Trident 存储类。</block>
  <block id="65d18b5db5d5f35e4ddc5c696687d1bd" category="paragraph">Kubernetes `VolumeSnapshotClass` 对象类似于 `StorageClasses` 。它们有助于定义多个存储类，并由卷快照引用以将快照与所需的快照类关联。每个卷快照都与一个卷快照类相关联。</block>
  <block id="031e09713b698739db52cb150ef97605" category="paragraph">要创建快照，管理员应定义 `VolumeSnapshotClass` 。此时将使用以下定义创建卷快照类：</block>
  <block id="879cd061c6bf448cd6fc39dd56947611" category="paragraph">`driver` 指定给 Kubernetes ，由 Trident 处理对 `csI-snapclass` 类的卷快照请求。`deeltionPolicy` 指定必须删除快照时要执行的操作。如果将 `deletionPolicy` 设置为 `Delete` ，则在删除快照时，卷快照对象以及存储集群上的底层快照将被删除。或者，如果将其设置为 `Retain` ，则表示保留 `VolumeSnapshotContent` 和物理快照。</block>
  <block id="7ba558df52a052235cf288011e5d667c" category="paragraph">Kubernetes `VolumeSnapshot` 对象是创建卷快照的请求。就像 PVC 代表用户对卷发出的请求一样，卷快照也是用户为现有 PVC 创建快照的请求。</block>
  <block id="f67af493d1fd83b472d5f27307b2f3d9" category="paragraph">收到卷快照请求后， Trident 会自动管理在后端为卷创建快照的操作，并通过创建唯一的 `VolumeSnapshotContent` 对象公开快照。您可以从现有 PVC 创建快照，并在创建新 PVC 时将这些快照用作 DataSource 。</block>
  <block id="e562bdcf97dce6973a736651f45eb054" category="paragraph">Kubernetes `VolumeSnapshotContent` 对象表示从已配置的卷创建的快照。它类似于 `PersistentVolume` ，表示存储集群上配置的快照。与 `PersistentVolumeClaim` 和 `PersistentVolume` 对象类似，创建快照时， `VolumeSnapshotContent` 对象会与请求创建快照的 `VolumeSnapshot` 对象保持一对一映射。</block>
  <block id="af741aec1c66e51c00d35a38f92471de" category="paragraph">`VolumeSnapshotContent` 对象包含用于唯一标识快照的详细信息，例如 `snapshotHandle` 。此 `snapshotHandle` 是 PV 名称和 `VolumeSnapshotContent` 对象名称的唯一组合。</block>
  <block id="b22c73e808eef321ee9941ec2e58b64f" category="paragraph">收到快照请求后， Trident 会在后端创建快照。创建快照后， Trident 会配置一个 `VolumeSnapshotContent` 对象，从而将快照公开到 Kubernetes API 。</block>
  <block id="7c43d52062b795d2d8e7f33b9dbbf671" category="paragraph">Kubernetes 自定义资源是 Kubernetes API 中的端点，由管理员定义并用于对类似对象进行分组。Kubernetes 支持创建自定义资源以存储对象集合。您可以通过运行 `kubectl get crds` 来获取这些资源定义。</block>
  <block id="09d4c17e4e0e002375326eee41d0f77f" category="paragraph">自定义资源定义（ CRD ）及其关联的对象元数据由 Kubernetes 存储在其元数据存储中。这样就无需为 Trident 创建单独的存储。</block>
  <block id="9f59afd5e4687b9960361128f049dae4" category="paragraph">CRD 是一种 Kubernetes 构造。上述资源的对象由 Trident 创建。例如，使用 `tridentctl` 创建后端时，会创建一个对应的 `tridentbackend` CRD 对象，供 Kubernetes 使用。</block>
  <block id="7cdfd680fe492e028cde251c38475469" category="paragraph">有关 Trident 的 CRD ，请注意以下几点：</block>
  <block id="adecfe476427253e9c680a7c5150a9cc" category="list-text">安装 Trident 时，系统会创建一组 CRD ，并可像使用任何其他资源类型一样使用。</block>
  <block id="c4b35352cbf7a52a9444a610687067f8" category="inline-link-macro">卸载 Trident</block>
  <block id="64cf33bfeab6c6bd8aa626b86fda9cbd" category="admonition">使用 Kubernetes 时，如果注册了使用 Trident 作为配置程序的 Kubernetes `StorageClass` ，则会自动创建这些对象。</block>
  <block id="51fa0a833f47d8f00ee2677c6fa7b075" category="paragraph">存储类包含一组卷要求。Trident 会将这些要求与每个存储池中的属性进行匹配；如果匹配，则该存储池是使用该存储类配置卷的有效目标。</block>
  <block id="04d84bba5a5e103ae9c192c03a7ad2f3" category="paragraph">您可以使用 REST API 创建存储类配置以直接定义存储类。但是，对于 Kubernetes 部署，我们希望在注册新的 Kubernetes `StorageClass` 对象时创建这些部署。</block>
  <block id="3c244b984a2188556c1115a5a27dbe1b" category="paragraph">后端表示存储提供程序，其中 Trident 配置卷；单个 Trident 实例可以管理任意数量的后端。</block>
  <block id="d71c5fad4769c19422c07158e24510ba" category="admonition">这是您自己创建和管理的两种对象类型之一。另一个是 Kubernetes `StorageClass` 对象。</block>
  <block id="54fd1dc39c3eecd913b4c9140522996c" category="paragraph">存储池表示可在每个后端配置的不同位置。对于 ONTAP ，这些聚合对应于 SVM 中的聚合。对于 NetApp HCI/SolidFire ，这些 QoS 分段对应于管理员指定的 QoS 分段。对于 Cloud Volumes Service ，这些区域对应于云提供商区域。每个存储池都有一组不同的存储属性，用于定义其性能特征和数据保护特征。</block>
  <block id="4ab1440e71a70a97c4966bcc0095f02b" category="paragraph">与此处的其他对象不同，存储池候选对象始终会自动发现和管理。</block>
  <block id="2e53db54827c8c05b7bfe9cb31f299d9" category="admonition">在 Kubernetes 中，这些对象会自动进行管理。您可以查看它们以查看 Trident 配置的内容。</block>
  <block id="22fcc98910d0241e9835f502b7cb2398" category="admonition">删除具有关联快照的 PV 时，相应的 Trident 卷将更新为 * 正在删除 * 状态。要删除 Trident 卷，您应删除该卷的快照。</block>
  <block id="05353bc86910df31b2da9c8d3d26aad1" category="paragraph">卷配置定义了配置的卷应具有的属性。</block>
  <block id="ce9af1e3f0493eb7d5ffdf584ed763ba" category="cell">Trident API 版本（ "1" ）</block>
  <block id="b068931cc450442b63f5b3d276ea4297" category="cell">name</block>
  <block id="a6105c0a611b41b08f1209506350279e" category="cell">是的。</block>
  <block id="017dbd2b0a2195c3e8052cdff67bad39" category="cell">要创建的卷的名称</block>
  <block id="78ec9b60245b46a4f05158076962ace9" category="cell">存储类</block>
  <block id="fa00f346deccdbebef2b3cc0702d41de" category="cell">配置卷时要使用的存储类</block>
  <block id="f7bd60b75b29d79b660a2859395c1a24" category="cell">size</block>
  <block id="264c52ca068dfed30f5826bb054839f4" category="cell">要配置的卷大小（以字节为单位）</block>
  <block id="4f18882934f0472b4bfa32928bf92f14" category="cell">要使用的协议类型； "file" 或 "block"</block>
  <block id="252c6d364cc1a0437939a4f01b0717ae" category="cell">内部名称</block>
  <block id="2857a43e58983276d059c0e6e2fcb0e9" category="cell">存储系统上的对象名称；由 Trident 生成</block>
  <block id="e94d46d7c89bcb7e6ac2e2df4d21bafb" category="cell">ONTAP （ NAS ， SAN ）：将克隆从其父级拆分</block>
  <block id="819549a86d14e849e1d0042c9156d781" category="cell">Snapshot-* ：要使用的 ONTAP 策略</block>
  <block id="e38882545bfedafc7e8ec5973b2e6dd8" category="cell">Snapshot-* ：为快照预留的卷百分比 ONTAP</block>
  <block id="fc86db1233bfa77d5143dcaae9842cb1" category="cell">ontap-nas* ：要使用的导出策略</block>
  <block id="48e1d8180a61943f438c259b2b6715f8" category="cell">ontap-nas* ：是否显示快照目录</block>
  <block id="3f7c94eec4bbf43962e1667f5a334469" category="cell">ontap-nas* ：初始 UNIX 权限</block>
  <block id="4b2d5d83aef608a3fb59ec6eda8bea26" category="cell">SolidFire — * ：块 / 扇区大小</block>
  <block id="62fe71ae4f6a04a6937feb48ba5dc4f4" category="cell">文件系统类型</block>
  <block id="49539689cebb34166a417b3b666818e5" category="paragraph">您可以使用卷配置使用 REST API 直接配置卷，但在 Kubernetes 部署中，我们希望大多数用户使用标准的 Kubernetes `PersistentVolumeClaim` 方法。Trident 会在配置过程中自动创建此卷对象。</block>
  <block id="a1b3787bbd275b7ed5812d022dd36932" category="paragraph">快照是卷的时间点副本，可用于配置新卷或还原状态。在 Kubernetes 中，这些对象直接对应于 `VolumeSnapshotContent` 对象。每个快照都与一个卷相关联，该卷是快照的数据源。</block>
  <block id="cdf5c8d3dd31e49b82a5b3e2c4a65280" category="paragraph">每个 `Snapshot` 对象包括以下属性：</block>
  <block id="27118326006d3829667a400ad23d5d98" category="cell">string</block>
  <block id="93cba07454f06a4a960172bbd6e2a435" category="paragraph">是的。</block>
  <block id="de73fbae2864dd61c921cf0648a9717a" category="cell">Trident Snapshot 对象的名称</block>
  <block id="8e744456fb3d02d69442038d3e771460" category="cell">存储系统上 Trident Snapshot 对象的名称</block>
  <block id="617a43eb0446f84414df73cce2997fa1" category="cell">volumeName</block>
  <block id="b58c8ff1e837af6dafa971bf3d320646" category="cell">为其创建快照的永久性卷的名称</block>
  <block id="2c2aed4b417a0f9c189d7ad6414ae28c" category="cell">volumeInternalName</block>
  <block id="db1a117103c348ebaec41f9e249554c3" category="cell">存储系统上关联的 Trident 卷对象的名称</block>
  <block id="73f3d5934fdd36989f24cbae94ab423b" category="paragraph">创建 Kubernetes `VolumeSnapshot` 对象请求时， Trident 会在备用存储系统上创建 Snapshot 对象。此快照对象的 `internalName` 是通过将前缀 `snapshot-` 与 `VolumeSnapshot` 对象的 `UID` （例如， `snapshot-e8d8a0ca-9826-11e9-9807-525400f3f660` ）组合而生成的。`VolumeName` 和 `volumeInternalName` 可通过获取后备卷的详细信息来填充。</block>
  <block id="60aaf44d4b562252c04db7f98497e9aa" category="cell">Port</block>
  <block id="261addf78c7b2c961032b3dd08ba0b1f" category="cell">目的</block>
  <block id="7e6b20d014d1c659e4eaf20dc2dcd7eb" category="cell">8443</block>
  <block id="69bbf3571db03f0487c04a8254d15c75" category="cell">后通道 HTTPS</block>
  <block id="bc3c4a6331a8a9950945a1aa8c95ab8a" category="cell">8001</block>
  <block id="e5a4c481cc6f5935efb2c9d381f2e342" category="cell">Prometheus 指标端点</block>
  <block id="67ff32d40fb51f1a2fd2c4f1b1019785" category="cell">8000</block>
  <block id="10f5b805a46ea829cc3b9d8560a224ae" category="cell">Trident REST 服务器</block>
  <block id="35cf0f704286108deb76366a16415140" category="cell">17546</block>
  <block id="fb1396f82d0096741ea1b06f8cee2340" category="cell">Trident demonset Pod 使用的活动性 / 就绪性探测端口</block>
  <block id="2fae32629d4ef4fc6341f1751b405e45" category="doc">安全性</block>
  <block id="f40aef657c875e42158050f63dcfbb6f" category="section-title">对 ONTAP SAN 后端使用 CHAP 身份验证</block>
  <block id="6c92285fa6d3e827b198d120ea3ac674" category="inline-link-macro">此处</block>
  <block id="d4e0ad8fd8e11d87eb431051692db344" category="section-title">对 NetApp HCI 和 SolidFire 后端使用 CHAP 身份验证</block>
  <block id="ea355214fd4bc7c57f471bd92918879b" category="doc">部署</block>
  <block id="d89d3b3161292ef0c65342cbe80e883f" category="section-title">部署到专用命名空间</block>
  <block id="13d28e8dfc702e3456e0767dff9a128a" category="inline-link">命名空间</block>
  <block id="853cf568613b7eec1486421468e18b9b" category="paragraph">此外，访问 Trident POD 可能会使用户能够访问存储系统凭据和其他敏感信息。请务必确保应用程序用户和管理应用程序无法访问 Trident 对象定义或 Pod 本身。</block>
  <block id="2c8e89de5c6bf68b180cff5fea545167" category="section-title">使用配额和范围限制来控制存储消耗</block>
  <block id="74444eaf90c31d151645e59dcab0468d" category="inline-link">存储配额机制</block>
  <block id="1d81c150d54eae0c49d9cfeb8d493b0f" category="inline-link">范围限制</block>
  <block id="94104e476fe547cf6237480cacae5ed5" category="paragraph">Kubernetes 具有两项功能，这些功能结合使用后，可提供一种功能强大的机制来限制应用程序的资源消耗。。<block ref="bff513af91e6751aca3d34ef714e3b91" category="inline-link-rx"></block> 使管理员能够在每个命名空间基础上实施全局容量和对象计数消耗限制以及特定于存储类的限制。此外，使用<block ref="dbe9770513b0f7245f1fe016d20ebb70" category="inline-link-rx"></block> 确保在将 PVC 请求转发给配置程序之前，该请求同时处于最小值和最大值范围内。</block>
  <block id="4f9253eda0573e387f86d7777aafff03" category="inline-link">如何利用配额</block>
  <block id="923169151e05d28a3474b2a033666297" category="paragraph">这些值是按命名空间定义的，这意味着每个命名空间都应定义符合其资源要求的值。有关信息，请参见此处<block ref="5b289b2ffde01314d8b0d038aabd709b" category="inline-link-rx"></block>。</block>
  <block id="698aa9df4c2c5470599821c3d10620dd" category="summary">Kubernetes 集群通常由两种类型的节点组成，每种节点负责不同的功能方面。</block>
  <block id="6e8775bd755a8835ce86806d669677ea" category="doc">存储配置</block>
  <block id="ac5112696fd64ee051846c666ebebebe" category="paragraph">您应遵循使用所使用协议的主机操作系统的基线最佳实践。或者，您也可以考虑将应用程序最佳实践（如果有）与后端，存储类和 PVC 设置结合使用，以便为特定应用程序优化存储。</block>
  <block id="efc9d085ca2f3a152c786357e9359c03" category="section-title">ONTAP 和 Cloud Volumes ONTAP 最佳实践</block>
  <block id="a3f99d5d44515cf922e6b525de736173" category="paragraph">了解为 Trident 配置 ONTAP 和 Cloud Volumes ONTAP 的最佳实践。</block>
  <block id="76d50c7d0f100e6264e0d57727d099f1" category="paragraph">以下建议是为容器化工作负载配置 ONTAP 的准则，容器化工作负载会占用 Trident 动态配置的卷。应考虑并评估每个问题在您的环境中的适用性。</block>
  <block id="3fb21976d2729216782dd61ffed84a54" category="section-title">使用专用于 Trident 的 SVM</block>
  <block id="fa4e21d3612a3f737c7a4ac7ebf24950" category="paragraph">Storage Virtual Machine （ SVM ）可在 ONTAP 系统上的租户之间实现隔离和管理隔离。通过将 SVM 专用于应用程序，可以委派特权并应用最佳实践来限制资源消耗。</block>
  <block id="3dc5510a67688b81f0d6d0db440da909" category="paragraph">可通过多种方法管理 SVM ：</block>
  <block id="fe425a9419fa4d05d42131c26306e4f1" category="list-text">在后端配置中提供集群管理接口以及相应的凭据，并指定 SVM 名称。</block>
  <block id="e2160df70bcda0ee43cb3c66dc22c719" category="list-text">使用 ONTAP 系统管理器或命令行界面为 SVM 创建专用管理接口。</block>
  <block id="2bf2fa2c1c3a6e10095db72759cc9983" category="list-text">与 NFS 数据接口共享管理角色。</block>
  <block id="5cf4c2e89b362842d77f4e4209c4ef99" category="paragraph">在每种情况下，接口都应位于 DNS 中，配置 Trident 时应使用 DNS 名称。这有助于在不使用网络身份保留的情况下实施某些灾难恢复方案，例如 SVM-DR 。</block>
  <block id="6a392b5e005fffe32231c94dc96a1605" category="inline-link">SVM-DR</block>
  <block id="2b4a6ee2db063653d6076884295a3854" category="paragraph">在为 SVM 配置专用管理 LIF 或共享管理 LIF 之间没有任何偏好，但是，您应确保网络安全策略与您选择的方法一致。无论如何，管理 LIF 应可通过 DNS 访问，以实现最大的灵活性<block ref="f5e9502989ce78934689806ebb69606a" category="inline-link-rx"></block> 与 Trident 结合使用。</block>
  <block id="4a0ee008d3379206a925ade3a9e707dd" category="section-title">限制最大卷数</block>
  <block id="e5e09031843479ef9ef8cbbd4c2f404c" category="inline-link">NetApp Hardware Universe</block>
  <block id="39da19b7dd55941b6cdabf34befc0b4c" category="paragraph">Trident 的 `ontap-nas` 和 `ontap-san` 驱动程序为创建的每个 Kubernetes 永久性卷（ PV ）配置一个 FlexVolume 。`ontap-nas-economy` 驱动程序会为每 200 个 PV 创建大约一个 FlexVolume （可在 50 到 300 之间配置）。`ontap-san-economy-经济` 驱动程序会为每 100 个 PV 创建大约一个 FlexVolume （可配置为 50 到 200 ）。要防止 Trident 占用存储系统上的所有可用卷，您应对 SVM 设置限制。您可以从命令行执行此操作：</block>
  <block id="f36680e3d3cb96c74d2f1a54c3c4a0fa" category="paragraph">`max-volumes` 的值因环境的特定条件而异：</block>
  <block id="5f6d1abb6889904ee0375b2fc6c8f078" category="list-text">ONTAP 集群中现有卷的数量</block>
  <block id="029383c13d9ad2c5ba18a16f8fbe2002" category="list-text">希望在 Trident 之外为其他应用程序配置的卷数</block>
  <block id="02f4ac473b944a63551d51d727b5bb49" category="list-text">Kubernetes 应用程序预期占用的永久性卷数</block>
  <block id="1d3555f20ac0a2897a1596631b5fb27a" category="paragraph">`max-volumes` 值是在 ONTAP 集群中的所有节点上配置的总卷数，而不是在单个 ONTAP 节点上配置的总卷数。因此，在某些情况下， ONTAP 集群节点所配置的 Trident 卷可能远远多于或少于其他节点。</block>
  <block id="46710fe77f663864a23e02a880a9ae53" category="inline-link">聚合</block>
  <block id="7ef3217c984ef7f973d389e434be312c" category="section-title">限制 Trident 创建的卷的最大大小</block>
  <block id="031b203330c3abb94f6fa406ff721de4" category="paragraph">要为 Trident 可以创建的卷配置最大大小，请在 `backend.json` 定义中使用 `limitVolumeSize` 参数。</block>
  <block id="1c19414de17c9992b25b0a1b02a52715" category="paragraph">除了控制存储阵列上的卷大小之外，您还应利用 Kubernetes 功能。</block>
  <block id="85c0f9773e01224a56713ea4e6d83b86" category="section-title">配置 Trident 以使用双向 CHAP</block>
  <block id="2596e59ce5cd0d1b0066656f191365d0" category="section-title">创建并使用 SVM QoS 策略</block>
  <block id="560417d4f795b7e1176a40db8e4ccca8" category="inline-link">防止抢占资源</block>
  <block id="4870168b0713fe3089cf587858fc3b40" category="paragraph">利用应用于 SVM 的 ONTAP QoS 策略，限制 Trident 配置的卷可使用的 IOPS 数量。这有助于实现<block ref="1b59d76842e8b78d6111d3e73e9cd404" category="inline-link-rx"></block> 或控制不足的容器，以使其不会影响 Trident SVM 以外的工作负载。</block>
  <block id="d6ab867679686745d96bea839929a6de" category="paragraph">您可以通过几个步骤为 SVM 创建 QoS 策略。有关最准确的信息，请参见适用于您的 ONTAP 版本的文档。以下示例将创建一个 QoS 策略，将 SVM 可用的总 IOPS 限制为 5000 。</block>
  <block id="c790de304b7ca0097f2133cf9da4e657" category="paragraph">此外，如果您的 ONTAP 版本支持此功能，则可以考虑使用最低 QoS 来保证容器化工作负载的吞吐量。自适应 QoS 与 SVM 级别策略不兼容。</block>
  <block id="38c0b69f6b2ee691e1ba568134513414" category="paragraph">专用于容器化工作负载的 IOPS 数量取决于许多方面。其中包括：</block>
  <block id="ddbd18591c9b7378c6187dbd9179e1f0" category="list-text">使用存储阵列的其他工作负载。如果存在与 Kubernetes 部署无关的其他工作负载，则应注意利用存储资源，以确保这些工作负载不会意外受到不利影响。</block>
  <block id="5da5727b396cee5b024364d989fe253b" category="list-text">容器中运行的预期工作负载。如果 IOPS 要求较高的工作负载将在容器中运行，则 QoS 策略较低会导致出现不良体验。</block>
  <block id="e6f229b5d5d2421c4306920759828212" category="paragraph">请务必记住，在 SVM 级别分配的 QoS 策略会导致配置到 SVM 的所有卷共享同一个 IOPS 池。如果一个或少量容器化应用程序的 IOPS 要求较高，则可能会成为其他容器化工作负载的抢占资源的应用程序。如果是这种情况，您可能需要考虑使用外部自动化来分配每个卷的 QoS 策略。</block>
  <block id="ac2167b1e02d575eb6ddfe4e58f5cdcf" category="admonition">如果 ONTAP 版本早于 9.8 ，则应将此 QoS 策略组分配给 SVM * 仅 * 。</block>
  <block id="9992cae6c17055c750a849c5f6135eb2" category="section-title">为 Trident 创建 QoS 策略组</block>
  <block id="76a3e54f72b3a7224429f111e58f836c" category="inline-link">通过 QoS 保证吞吐量</block>
  <block id="0394fb1288eac4cd3d40bcd991e079e9" category="paragraph">ONTAP 有两种类型的 QoS 策略组：传统和自适应。传统策略组以 IOPS 为单位提供固定的最大（或最小）吞吐量。自适应 QoS 会根据工作负载大小自动扩展吞吐量，并在工作负载大小发生变化时保持 IOPS 与 TBSGB 的比率。如果您要在大型部署中管理数百或数千个工作负载，则这将带来显著优势。</block>
  <block id="f5acc65a21daed9bb8e91cb5cdd0ae52" category="paragraph">创建 QoS 策略组时，请考虑以下事项：</block>
  <block id="6d5fcf300cd9e9239c26ce37b0919fca" category="list-text">您应在后端配置的 `defaults` 块中设置 `qosPolicy` 密钥。请参见以下后端配置示例：</block>
  <block id="32160c2368452bf7d86bcffae7f142be" category="list-text">您应该对每个卷应用策略组，以便每个卷都获得策略组指定的整个吞吐量。不支持共享策略组。</block>
  <block id="d5d2a5bc92eea85a4dd11a642ed8a170" category="section-title">将存储资源访问限制为 Kubernetes 集群成员</block>
  <block id="9602ec8691c1a564016f9fd8086139f1" category="paragraph">请务必了解命名空间是 Kubernetes 中资源的逻辑边界。假设同一命名空间中的资源可以共享，但重要的是，没有跨命名空间功能。这意味着，即使 PV 是全局对象，但在绑定到 PVC 时，它们只能由同一命名空间中的 Pod 访问。* 请务必确保使用命名空间在适当时提供分隔。 *</block>
  <block id="1162be0546226cff2cbd973cd2140d33" category="paragraph">大多数组织在 Kubernetes 环境中的数据安全方面的主要顾虑是，容器中的进程可以访问挂载到主机但不适用于容器的存储。 <block ref="962cfea7b49ca7b2d398d891b4313cb5" category="inline-link-rx"></block> 旨在防止这种类型的损害。但是，存在一个例外：特权容器。</block>
  <block id="7b10e929cc2e0061dfb50042a0203c79" category="inline-link">POD 安全策略</block>
  <block id="76db1afb772160283f7f86cdd67c35f8" category="paragraph">有权限的容器是指运行时拥有比正常情况更多主机级别权限的容器。默认情况下，这些选项不会被拒绝，因此请确保使用禁用此功能<block ref="e5ab4ede40a4a6a5f5684247585b5fb0" category="inline-link-rx"></block>。</block>
  <block id="5fabba1d91abcfb09b6049897727e91c" category="paragraph">对于需要从 Kubernetes 和外部主机访问的卷，应采用传统方式管理存储，并由管理员引入 PV ，而不是由 Trident 管理。这样可以确保只有在 Kubernetes 和外部主机断开连接且不再使用此卷时，才会销毁此存储卷。此外，还可以应用自定义导出策略，以便从 Kubernetes 集群节点和 Kubernetes 集群以外的目标服务器进行访问。</block>
  <block id="e38f5be5ff6a8a362870a032acdf5d2f" category="section-title">使用专用导出策略</block>
  <block id="28af9e32119f59018dd5d887ad93ccd4" category="paragraph">或者，您也可以手动创建导出策略，并使用一个或多个导出规则来填充此策略，这些导出规则用于处理每个节点访问请求：</block>
  <block id="4ae1e64986504dce6897746ebc9d2786" category="list-text">使用 `vserver export-policy create` ONTAP 命令行界面命令创建导出策略。</block>
  <block id="cd0a9fca1fb3ba0fcdd98d0e87cb78a9" category="list-text">使用 `vserver export-policy rule create` ONTAP 命令行界面命令向导出策略添加规则。</block>
  <block id="bc3a2f6421da1e870583cfb0b9cf4a91" category="paragraph">通过运行这些命令，您可以限制哪些 Kubernetes 节点可以访问数据。</block>
  <block id="08f1d9a2f49f56965b640bc15796cd61" category="paragraph">您应使用 SVM 级别的 ONTAP 命令行界面命令禁用 `showmount` ：</block>
  <block id="648e0e1a6a98e76bdfe9780c42dacb6b" category="section-title">SolidFire 最佳实践</block>
  <block id="89f93e411a40f5c6365a4703e004f15b" category="paragraph">了解为 Trident 配置 SolidFire 存储的最佳实践。</block>
  <block id="52f311b56fcd9d4fb074918af9b7c7f9" category="section-title">创建 SolidFire 帐户</block>
  <block id="b0dd2707e9f12b5e1fda314748ffa386" category="paragraph">每个 SolidFire 帐户都代表一个唯一的卷所有者，并接收自己的一组质询握手身份验证协议（ Challenge-Handshake Authentication Protocol ， CHAP ）凭据。您可以使用帐户名称和相对 CHAP 凭据或通过卷访问组访问分配给帐户的卷。一个帐户最多可以分配 2 ， 000 个卷，但一个卷只能属于一个帐户。</block>
  <block id="eaf4b71058f7db58997dfe694c62a96a" category="section-title">创建 QoS 策略</block>
  <block id="fd640dfd679c3a7e40aa99c3e08c8294" category="paragraph">如果要创建并保存可应用于多个卷的标准化服务质量设置，请使用 SolidFire 服务质量（ QoS ）策略。</block>
  <block id="41be5238fc563c2aac0a0e6ee4cf6e96" category="paragraph">您可以按卷设置 QoS 参数。通过设置三个可配置的参数来定义 QoS ，可以确保每个卷的性能：最小 IOPS ，最大 IOPS 和突发 IOPS 。</block>
  <block id="48e4bd34fd7a9e1233ea82bc818a3161" category="paragraph">以下是 4 KB 块大小的可能最小，最大和突发 IOPS 值。</block>
  <block id="8e4988a1e5f387efce6f20e4f25a8e40" category="cell">IOPS 参数</block>
  <block id="0b890b1926b90387673882e6ccae7fdc" category="cell">定义</block>
  <block id="96a22bf638896c990d26e043087fb6b0" category="cell">最小value</block>
  <block id="31ce3cdcd67850870b616f75b555bbc5" category="cell">默认值</block>
  <block id="c9fb55be94277b8390352c215f32d44c" category="cell">最大值（ 4 KB ）</block>
  <block id="b05f9ccd772b396ac1f5a05345a9d4f8" category="paragraph">最小 IOPS</block>
  <block id="2b30c179facf62f8a2bdbd1b09b37b96" category="paragraph">卷的性能保障级别。</block>
  <block id="c0c7c76d30bd3dcaefc96f40275bdc0a" category="cell">50</block>
  <block id="3f74a886c7f841699690962c497d4f30" category="paragraph">15000</block>
  <block id="4f5a6f8b41826526724ba294b8e056bd" category="paragraph">最大 IOPS</block>
  <block id="4e41c5ccaf1affa697729ea4d1e88554" category="paragraph">性能不会超过此限制。</block>
  <block id="e05695d29cb4a9339534e5a9c273fa14" category="paragraph">200,000</block>
  <block id="affd4aba1c5f696e972368c9eb698c65" category="paragraph">突发 IOPS</block>
  <block id="2734923c054f38d8ca66133414af4469" category="paragraph">在短时突发情形下允许的最大 IOPS 。</block>
  <block id="e2eb05f1ef7720127ac371ceddc6f433" category="admonition">虽然最大 IOPS 和突发 IOPS 可设置为高达 200 ， 000 ，但卷的实际最大性能受集群使用情况和每节点性能的限制。</block>
  <block id="fa9b1a3006e0ba9ad904c059c0b9add6" category="inline-link">SolidFire 服务质量</block>
  <block id="b4657825f74ed622384dddf3a1d7d3b7" category="section-title">SolidFire 身份验证</block>
  <block id="9d3b5ff1cde828a63203f0465a34a967" category="paragraph">Element 支持两种身份验证方法： CHAP 和卷访问组（ VAG ）。CHAP 使用 CHAP 协议向后端对主机进行身份验证。卷访问组控制对其配置的卷的访问。NetApp 建议使用 CHAP 进行身份验证，因为它更简单，并且没有扩展限制。</block>
  <block id="fc9e812321a3f9b0eab1b702a08bab4e" category="admonition">具有增强型 CSI 配置程序的 Trident 支持使用 CHAP 身份验证。VAG 只能在传统的非 CSI 操作模式下使用。</block>
  <block id="d23eaa75b7bd1405526da0e18b7290ac" category="paragraph">只有基于帐户的访问控制才支持 CHAP 身份验证（验证启动程序是否为目标卷用户）。如果使用 CHAP 进行身份验证，则可以使用两个选项：单向 CHAP 和双向 CHAP 。单向 CHAP 使用 SolidFire 帐户名称和启动程序密钥对卷访问进行身份验证。双向 CHAP 选项可提供最安全的卷身份验证方法，因为卷会通过帐户名称和启动程序密钥对主机进行身份验证，然后主机通过帐户名称和目标密钥对卷进行身份验证。</block>
  <block id="42d135bea104c1079cebd1543c89e970" category="paragraph">但是，如果无法启用 CHAP 且需要使用 VAG ，请创建访问组并将主机启动程序和卷添加到此访问组。添加到访问组的每个 IQN 都可以使用或不使用 CHAP 身份验证访问组中的每个卷。如果将 iSCSI 启动程序配置为使用 CHAP 身份验证，则会使用基于帐户的访问控制。如果 iSCSI 启动程序未配置为使用 CHAP 身份验证，则会使用卷访问组访问控制。</block>
  <block id="b4931a42b69dbf4e721e7b97873b1ebb" category="section-title">如何查找更多信息</block>
  <block id="2c3a4d5c923121574c10ea22c0474a01" category="inline-link">NetApp 库</block>
  <block id="65840df7365892d2abe1280cb6cdb1d2" category="paragraph">下面列出了一些最佳实践文档。搜索<block ref="4caccef7312f2c398bfbb419629c1a78" category="inline-link-rx"></block> 对于最新版本。</block>
  <block id="d911b17f4f4cdcca62a04ad77aa9403d" category="paragraph">* ONTAP *</block>
  <block id="f9dd52d280693dc59e53b6e1fb7bd801" category="inline-link">NFS 最佳实践和实施指南</block>
  <block id="5ca34d6ffc2a555b689542e3fbeeb7af" category="inline-link">适用于 RHEL 的 iSCSI 快速配置</block>
  <block id="36588ac65dcdb9b93916fb0ab708edb3" category="list-text"><block ref="36588ac65dcdb9b93916fb0ab708edb3" category="inline-link-rx"></block></block>
  <block id="ca7ab5ec4cba84fbef55956bb38759ce" category="paragraph">* Element 软件 *</block>
  <block id="e809d9f88c2933195c4d2ab379c1b5dc" category="inline-link">配置适用于 Linux 的 SolidFire</block>
  <block id="ce0470e08aa854a8f93fa119434e8422" category="list-text"><block ref="ce0470e08aa854a8f93fa119434e8422" category="inline-link-rx"></block></block>
  <block id="d64280eb12d42bb67976ffba6d268e7b" category="paragraph">* NetApp HCI *</block>
  <block id="3bc72bedcc42d144356d4f933c48485d" category="inline-link">NetApp HCI 部署前提条件</block>
  <block id="85bfffc1a1f7aaabd6cf58841640c308" category="list-text"><block ref="85bfffc1a1f7aaabd6cf58841640c308" category="inline-link-rx"></block></block>
  <block id="b52e411998b7d3a95ad5bd8a320bf271" category="inline-link">访问 NetApp 部署引擎</block>
  <block id="9d0da73b02655dd7861121905db229e2" category="list-text"><block ref="9d0da73b02655dd7861121905db229e2" category="inline-link-rx"></block></block>
  <block id="9aaca8cfd79770bc4944ccc477e37141" category="paragraph">* 应用程序最佳实践信息 *</block>
  <block id="27a5e02bc2fadee43ace94805739a0c8" category="inline-link">基于 ONTAP 的 MySQL 最佳实践</block>
  <block id="17efdd7d210511985714be299d595292" category="inline-link">基于 SolidFire 的 MySQL 最佳实践</block>
  <block id="d03b53d8ec563c37e16ee8c900a75b96" category="list-text"><block ref="d03b53d8ec563c37e16ee8c900a75b96" category="inline-link-rx"></block></block>
  <block id="3aefe1a041af945f1fe8673bf775057b" category="inline-link">NetApp SolidFire 和 Cassandra</block>
  <block id="6e580111d3a8c12cdcd9522a4d3484c6" category="inline-link">SolidFire 上的 Oracle 最佳实践</block>
  <block id="6448cf37496207be126495e5b05851de" category="inline-link">SolidFire 上的 PostgreSQL 最佳实践</block>
  <block id="b062996d6ca590abe798d3db75561f79" category="paragraph">并非所有应用程序都有特定的准则，与您的 NetApp 团队合作并使用非常重要<block ref="4caccef7312f2c398bfbb419629c1a78" category="inline-link-rx"></block> 以查找最新文档。</block>
  <block id="1fdc23c8579638d050b7b219da011f2b" category="section-title">驱动程序选择和部署</block>
  <block id="815a377da65ae5b66c84438c43416d82" category="paragraph">更高级别的是，如果您的应用程序中的组件需要共享存储（多个 Pod 访问同一个 PVC ），则基于 NAS 的驱动程序将成为默认选项，而基于块的 iSCSI 驱动程序则可满足非共享存储的需求。根据应用程序要求以及存储和基础架构团队的舒适程度选择协议。一般来说，对于大多数应用程序来说，它们之间没有什么区别，因此通常是根据是否需要共享存储（多个 POD 需要同时访问）来决定的。</block>
  <block id="c2c889ded63fbe94cf7f1d5fe4747b2d" category="list-text">`ontap-NAS` ：配置的每个 PV 都是一个完整的 ONTAP FlexVolume 。</block>
  <block id="9418583a1b7e700d24bcc735aa4682b5" category="list-text">`ontap-nas-economy.` ：配置的每个 PV 都是一个 qtree ，每个 FlexVolume 的 qtree 数量是可配置的（默认值为 200 ）。</block>
  <block id="bc8f11db54909209ba09d55ee0b46990" category="list-text">`ontap-nas-flexgroup` ：使用配置为完整 ONTAP FlexGroup 的每个 PV ，以及分配给 SVM 的所有聚合。</block>
  <block id="5e587346b7a212ee6429303276a1578b" category="list-text">`ontap-san` ：配置的每个 PV 都是其自身 FlexVolume 中的一个 LUN 。</block>
  <block id="85f6f5093b037b5bde3201d8136ee585" category="list-text">`ontap-san-economi` ：配置的每个 PV 都是一个 LUN ，每个 FlexVolume 具有可配置的 LUN 数量（默认值为 100 ）。</block>
  <block id="f1d8371af632688748db007c98766ded" category="paragraph">在三个 NAS 驱动程序之间进行选择会对应用程序可用的功能产生一些影响。</block>
  <block id="6252699c8e049f40eaf187092727a531" category="cell">ONTAP NAS 驱动程序</block>
  <block id="9147e5e61a7b9260dec09f3a6eb3e5be" category="cell">快照</block>
  <block id="999cc42b236c7aee1157ff02d6f1bcd5" category="cell">克隆</block>
  <block id="13bc190bfed9f972b3e33e3656737cdd" category="cell">动态导出策略</block>
  <block id="ab0c646b4c5e36d9bcf8239d97fd1843" category="cell">多连接</block>
  <block id="8f2db90dd4a6fbd95ba8f0bc54fd6b27" category="cell">QoS</block>
  <block id="9d723d04c40bfd81835c0766a698cf63" category="cell">调整大小</block>
  <block id="8c340dc334134096f68b880b42a8692c" category="cell">Replication</block>
  <block id="00055dac2ba112b87a95a368075b9561" category="cell">`ontap-NAS`</block>
  <block id="6bfc395e3d384b30d9f43ca45b1eeff7" category="cell">是脚注： 5[]</block>
  <block id="7c078cb746c3dd22969c07747fd7f3fc" category="cell">是脚注： 1[]</block>
  <block id="cecdaed309330a9e7dea16b2076957ee" category="cell">`ontap-nas-economy.`</block>
  <block id="2b8ac774302bd45e0ad531e434d8cd6d" category="cell">`ontap-nas-flexgroup`</block>
  <block id="bafd7322c6e97d25b6299b5d6fe8920b" category="cell">否</block>
  <block id="f916141465c67326e5d7d980bff2880b" category="cell">ONTAP SAN 驱动程序</block>
  <block id="4f546cdc5f90f7d264cde89d14c6e015" category="cell">双向 CHAP</block>
  <block id="cd17e7ed84c40a0ff5ecb8b625b1f186" category="cell">`ontap-san`</block>
  <block id="e78e01b4457814be0584f80618e4659a" category="cell">是脚注： 4[]</block>
  <block id="73b781a615cea2647a87ff2035e296b1" category="cell">`ontap-san-economy.`</block>
  <block id="74b4b41be17ac9897921032dfd4e94a8" category="paragraph">非 PV 粒度功能将应用于整个 FlexVolume ，而所有 PV （即共享 FlexVol 中的 qtree 或 LUN ）将共享一个通用计划。</block>
  <block id="b483d59c54aea739f0806cf2f30c057e" category="paragraph">如上表所示， `ontap-nas` 与 `ontap-nas-economy` 之间的大部分功能是相同的。但是，由于 `ontap-nas-economy` 驱动程序限制了按 PV 粒度控制计划的能力，因此这可能会特别影响灾难恢复和备份规划。对于希望在 ONTAP 存储上利用 PVC 克隆功能的开发团队，只有在使用 `ontap-NAS` ， `ontap-san` 或 `ontap-san-economy-经济` 驱动程序时，才可能实现这一点。</block>
  <block id="45f7f2e55c0930a28d1a9e481e602a09" category="admonition">`solidfire-san` 驱动程序还能够克隆 PVC 。</block>
  <block id="e040ac9827d856d3ad8ae9ac0da92295" category="paragraph">与 NetApp HCI/SolidFire 平台结合使用的 `solidfire-san` 驱动程序可帮助管理员根据 QoS 限制为 Trident 配置 Element 后端。如果您希望设计后端，以便为 Trident 配置的卷设置特定的 QoS 限制，请在后端文件中使用 `type` 参数。管理员还可以使用 `limitVolumeSize` 参数限制可在存储上创建的卷大小。目前， `solidfire-san` 驱动程序不支持卷大小调整和卷复制等 Element 存储功能。这些操作应通过 Element Software Web UI 手动完成。</block>
  <block id="77e9d6f249e4626d5b5c3aec863459d3" category="cell">SolidFire 驱动程序</block>
  <block id="9ef2bbb12ff72558472202561a25058d" category="cell">CHAP</block>
  <block id="57ee8ed0b2796ea5f35b10f9ae5d68cd" category="cell">`solidfire-san`</block>
  <block id="0929973a1c9993903f6193add75b3fcf" category="cell">是脚注： 2[]</block>
  <block id="4da613089cbda3d7c19cb4b3f67c1f5d" category="cell">Azure NetApp Files 驱动程序</block>
  <block id="8098b34f582537833b36b58273c3545b" category="cell">展开</block>
  <block id="e228843381960c06d1035c4219901307" category="cell">`azure-netapp-files`</block>
  <block id="1d326a2a7f267c800fe3eafb89e5c7cd" category="inline-link-macro">服务类型</block>
  <block id="949a374fc5a78d436e3067ee2de19cbe" category="cell">`GCP-CVS`</block>
  <block id="3af6198d49c40c18f13c73c5ce15cf34" category="section-title">存储类设计</block>
  <block id="388bdf78cbb5b6bf4248ddf5613f7cc3" category="paragraph">要创建 Kubernetes 存储类对象，需要配置并应用各个存储类。本节讨论如何为您的应用程序设计存储类。</block>
  <block id="a09acd5f665bdf96b6dce47f8d4265e3" category="paragraph">可以在特定存储类对象中使用筛选功能来确定要将哪个存储池或一组池与该特定存储类结合使用。可以在存储类中设置三组筛选器： `storagePools` ， `addtionalStoragePools` 和 / 或 `excludeStoragePools` 。</block>
  <block id="74476e892d2681775eb41ec00a11e8da" category="paragraph">`excludeStoragePools` 参数用于明确排除列出的一组与属性匹配的池。</block>
  <block id="ab807e6bd2f9cb9872eed98161bdd4e1" category="paragraph">如果要设计存储类以模拟服务质量策略，请创建一个存储类，其中 `mmedia` attribute 为 `HDD` 或 `sSD` 。根据存储类中提及的 `mmedia` 属性， Trident 将选择提供 `HDD` 或 `sSD` 聚合的相应后端，以便与介质属性匹配，然后将卷配置定向到特定聚合。因此，我们可以创建一个存储类高级版，该高级版会将 `mmedia` attribute 设置为 `sSD` ，该高级版可归类为高级 QoS 策略。我们可以创建另一个存储类标准，该标准会将介质属性设置为 `HDD' ，并可归类为标准 QoS 策略。我们还可以使用存储类中的 ``IOPS' 属性将配置重定向到可定义为 QoS 策略的 Element 设备。</block>
  <block id="0bc0e72aefbf8f8ec0b28cc0486f98a2" category="paragraph">存储类可设计为在启用了精简和厚配置，快照，克隆和加密等功能的特定后端直接配置卷。要指定要使用的存储，请创建存储类，以指定启用了所需功能的相应后端。</block>
  <block id="421f7dd5bb37a6401aa6326ad33dae20" category="section-title">影响存储配置的 PVC 特征</block>
  <block id="5ab83f35784f154d55ea7ab58c8e503b" category="section-title">访问模式</block>
  <block id="f3882c83b41b76a9fac2c57407f3ac2b" category="paragraph">通过 PVC 请求存储时，访问模式为必填字段之一。所需的模式可能会影响所选的托管存储请求的后端。</block>
  <block id="cac415feda213697b27d3b6fce10d33a" category="cell">ReadWriteOnce</block>
  <block id="c24ad3d99a666c95edd149419c958ee0" category="cell">ReadOnlyMany</block>
  <block id="caa8dc1f4bb28d2d11226494cd05a123" category="cell">读取写入任何</block>
  <block id="e4e1c13bb0b14f6cb7608cbecea948ef" category="cell">iSCSI</block>
  <block id="cefb8ccdebef1940174b22e9d0ab530b" category="cell">是（原始块）</block>
  <block id="1d1a594959ec615f56516f5d0f5e8ddb" category="cell">NFS</block>
  <block id="823f2153adc2211a0777560eafdcbad6" category="paragraph">如果在未配置 NFS 后端的情况下向 Trident 部署提交了 ReadWriteMany PVC 请求，则不会配置任何卷。因此，请求者应使用适合其应用程序的访问模式。</block>
  <block id="5a51acb2538e54805c54d37ebb49c75d" category="section-title">卷操作</block>
  <block id="26fad327e23b6b08dcc94300bfe1ed04" category="section-title">修改永久性卷</block>
  <block id="b1d1874782626fe3f391628ea493e6ef" category="paragraph">创建 PV 后，无法修改其连接详细信息。</block>
  <block id="e68591655c8031177206e1e75728853f" category="section-title">创建按需卷快照</block>
  <block id="f007c56a8eb121e8a696105e69aefa68" category="section-title">从快照创建卷</block>
  <block id="55a3309b0b6646e0ea6b47195bd3d4bd" category="section-title">移动集群中的卷</block>
  <block id="2243e252be826d6ec5e767668d9f961d" category="section-title">展开卷</block>
  <block id="40a28a40c11a193f8911cf4143a6ae6a" category="section-title">将现有卷导入到 Kubernetes 中</block>
  <block id="3a8b25f50e2dcc298175abc8f6a71f82" category="paragraph">如果部署的容器需要特定的导入 PVC ，则容器将保持待定状态，直到通过卷导入过程绑定 PVC/PV 对为止。在绑定 PVC/PV 对后，如果没有其他问题，应启动容器。</block>
  <block id="6dd8f6c286b8e1a8c96c6309099f0003" category="section-title">注册表服务</block>
  <block id="68ee1c4c0da20bfd1e946df20351d4b9" category="inline-link-macro">netapp.io</block>
  <block id="126ac9f6149081eb0e97c2e939eaad52" category="inline-link-macro">博客</block>
  <block id="34d357a7f8cc47e860d5fb0a317cf22d" category="paragraph">有关为注册表部署和管理存储的文档，请参见 <block ref="d5e1883ebd095c0eda96c44469e8197d" category="inline-link-macro-rx"></block> 在中 <block ref="ceb73d0582d40281d79011a1e5343e89" category="inline-link-macro-rx"></block>。</block>
  <block id="62ac236856a5a6aefd15133e967514c6" category="section-title">日志记录服务</block>
  <block id="2f3052b6a2858bec8355ec56150f6a38" category="paragraph">与其他 OpenShift 服务一样，日志记录服务也是使用清单文件（也称为）提供的配置参数 Ansible 部署的主机，提供给攻略手册。其中包括两种安装方法：在初始 OpenShift 安装期间部署日志记录以及在安装 OpenShift 之后部署日志记录。</block>
  <block id="57cad4852c9c2e439f61728e0391fe7b" category="paragraph">如果您选择将 NFS 与日志记录服务结合使用，则需要将 Ansible 变量 `OpenShift_enable_unsupported _configurations` 设置为 `true` ，以防止安装程序失败。</block>
  <block id="be11c74c1dd7f307bb80183a90dc2067" category="section-title">入门</block>
  <block id="16e90b2336fdfec64b19194247422194" category="paragraph">可以选择为这两个应用程序以及 OpenShift 集群本身的核心操作部署日志记录服务。如果选择部署操作日志记录，则通过将变量 `OpenShift_logging_use_ops` 指定为 `true` ，将创建两个服务实例。控制操作日志记录实例的变量包含 "ops" ，而应用程序实例则不包含 "ops" 。</block>
  <block id="02098b11f876fe10c40b6106bd9864da" category="paragraph">下表中的变量将导致 Ansible 攻略手册使用提供的详细信息为日志记录服务创建 PV 和 PVC 。与在 OpenShift 安装后使用组件安装攻略手册相比，此方法的灵活性明显降低，但是，如果您有可用的现有卷，则可以选择此方法。</block>
  <block id="47c14840d8e15331fa420b9b2f757cd9" category="cell">变量</block>
  <block id="3ec365dd533ddb7ef3d1c111186ce872" category="cell">详细信息</block>
  <block id="9aa2fd43742cd5ed36b406b3f4b0fd8c" category="cell">`OpenShift_logging_storage_kind`</block>
  <block id="3260b06ea72e4931f5fb5106001fcc28" category="cell">设置为 `NFS` ，以使安装程序为日志记录服务创建 NFS PV 。</block>
  <block id="e95f43173c69a9ca544d4aaef28a4d90" category="cell">`OpenShift_logging_storage_host`</block>
  <block id="41aae586bb7044d7741fe9412aa81e03" category="cell">`OpenShift_logging_storage_nfs_directory`</block>
  <block id="bf2d137d8c669b07aae26040c7e5c0e0" category="cell">NFS 导出的挂载路径。例如，如果卷接合为 ` /OpenShift_logging` ，则应使用该路径作为此变量。</block>
  <block id="88a9f7d18fabb82d63ac43c64ae6e735" category="cell">`OpenShift_logging_storage_volume_name`</block>
  <block id="6f8782c23f3cb958d0de4fad76dabaed" category="cell">要创建的 PV 的名称，例如 `PV_ose_logs` 。</block>
  <block id="789e0dc4bfc00f5c885a698d6ab34dff" category="cell">`OpenShift_logging_storage_volume_size`</block>
  <block id="b68f05ea52c8c80c07e6a4c0671c75bf" category="cell">NFS 导出的大小，例如 `100Gi` 。</block>
  <block id="2ab80b6965298dc6a178995bbedebe88" category="paragraph">如果 OpenShift 集群已在运行，因此已部署和配置 Trident ，则安装程序可以使用动态配置来创建卷。需要配置以下变量。</block>
  <block id="c2aecf833d743cbc47969cd85c67101e" category="cell">`OpenShift_logging_es_vc_dynamic`</block>
  <block id="540ad9a52084720ddb7f364fa8b304c6" category="cell">设置为 true 可使用动态配置的卷。</block>
  <block id="45a481a75749c5331e7e9fd7d89e473d" category="cell">`OpenShift_logging_es_vc_storage_class_name`</block>
  <block id="837ffa1e281409660ed25582c5b1963f" category="cell">要在 PVC 中使用的存储类的名称。</block>
  <block id="cd3daa927272b5624e96d283365d5500" category="cell">`OpenShift_logging_es_vc_size`</block>
  <block id="8f80d278a79cbc84b80a091713006022" category="cell">在 PVC 中请求的卷大小。</block>
  <block id="1bb0c7eeef4bbbefae080a294fd554b0" category="cell">`OpenShift_logging_es_vc_prefix`</block>
  <block id="f870ec92e294a018a17afe7a614fb5bb" category="cell">日志记录服务使用的 PVC 的前缀。</block>
  <block id="e8c62e1f0f0773ae5ba6a7acad696b2d" category="cell">`OpenShift_logging_es_ops_vc_dynamic`</block>
  <block id="46e65a11ac398c02b8fce45a7cd5cf36" category="cell">设置为 `true` 可对操作日志记录实例使用动态配置的卷。</block>
  <block id="8792c7234e14325cb68c493d20ab5154" category="cell">`OpenShift_logging_es_ops_vc_storage_class_name`</block>
  <block id="d016f79f0ee104f3805d61e6a379fb9b" category="cell">操作日志记录实例的存储类的名称。</block>
  <block id="048e768365962d7d520567f92aea8355" category="cell">`OpenShift_logging_es_ops_vc_size`</block>
  <block id="bc367f89ac597585e52d0eb58a5929ae" category="cell">操作实例的卷请求大小。</block>
  <block id="155871626071d69cb283985a9f36bad2" category="cell">`OpenShift_logging_es_ops_vc_prefix`</block>
  <block id="2a8f254749a466654f556c6466051133" category="cell">操作实例 PVC 的前缀。</block>
  <block id="e1b2d0d3228c29c069bcd139de306709" category="section-title">部署日志记录堆栈</block>
  <block id="0409a0cfdfa4f3b3033503b8309442ff" category="paragraph">如果要在初始 OpenShift 安装过程中部署日志记录，则只需遵循标准部署过程即可。Ansible 将配置和部署所需的服务和 OpenShift 对象，以便在 Ansible 完成后立即提供此服务。</block>
  <block id="3dbf527ac3caf41ab150ec99a1737217" category="section-title">指标服务</block>
  <block id="69aa4440020e49c654aeb910f38c6bb9" category="admonition">下表仅包含与存储配置相关的变量，因为这些变量与指标服务相关。文档中还有许多其他选项，应根据您的部署情况进行查看，配置和使用。</block>
  <block id="4f692d78f978a73b157571022c1d1ba7" category="cell">`OpenShift_metrics_storage_kind`</block>
  <block id="30da7e263c0cffc34933d24a07fb097a" category="cell">`OpenShift_metrics_storage_host`</block>
  <block id="3bafc264ad2a901d3be052a7f1cf2e44" category="cell">`OpenShift_metrics_storage_nfs_directory`</block>
  <block id="459859e54ba90bc4145c54d1f1deecff" category="cell">NFS 导出的挂载路径。例如，如果卷接合为 ` /OpenShift_metrics` ，则您将使用该路径作为此变量。</block>
  <block id="ca0f0d82f9c7cbc36df652cddd4b2f35" category="cell">`OpenShift_metrics_storage_volume_name`</block>
  <block id="eb10d02b22b02d7f543f867b8d31e7b0" category="cell">要创建的 PV 的名称，例如 `PV_ose_metrics` 。</block>
  <block id="a3eeeafe923ac73e75b3bf33cdadb603" category="cell">`OpenShift_metrics_storage_volume_size`</block>
  <block id="a56c731cfe96d228c7c0bcc57bc80d3d" category="cell">`OpenShift_metrics_Cassandra_vc_prefix`</block>
  <block id="0da919d4045e4f38d294aaec73f5d57f" category="cell">用于衡量指标 PVC 的前缀。</block>
  <block id="15bb3eef0b42a93e324977c289f2fd85" category="cell">`OpenShift_metrics_Cassandra_vc_size`</block>
  <block id="75929c9d67f1407282b5618fca4589e7" category="cell">要请求的卷的大小。</block>
  <block id="8ebb493e0ffdf7c1e850c67bc22f15c7" category="cell">`OpenShift_metrics_Cassandra_storage_type`</block>
  <block id="aab0ec84a4da1dfd2b63896453f1e05d" category="cell">要用于度量指标的存储类型，必须将此类型设置为动态， Ansible 才能创建具有相应存储类的 PVC 。</block>
  <block id="460aaf3805271ec2e5dc35755fe317b1" category="cell">`OpenShift_metrics_cassanda_vc_storage_class_name`</block>
  <block id="0c55ca33e89539cd67eb0be3796547c5" category="cell">要使用的存储类的名称。</block>
  <block id="6c13e62eb53f29e7794d3807369299d2" category="section-title">部署指标服务</block>
  <block id="f3a29486bed19a90f2da6d007818b427" category="list-title">步骤</block>
  <block id="db5eb84117d06047c97c9a0191b5fffe" category="doc">支持</block>
  <block id="5ff3faebb0ff710340bdbee89a4667ad" category="doc">使用操作员升级</block>
  <block id="199ed8c975e8bb544d18428ba17adbc3" category="inline-link">GitHub 上的问题描述详细信息</block>
  <block id="4ab464bddccdcbc36fab4cea802025f9" category="list-text">从清单中创建 `tridentorchator` CRD 。</block>
  <block id="558ab0bef1894a7a726109d36632d09d" category="inline-link-macro">已知问题</block>
  <block id="9c83e144e5481ac6766f4055e566594d" category="section-title">了解更多信息</block>
  <block id="48cf24486d9a8e65a142b25682f19949" category="cell">驱动程序</block>
  <block id="888a77f5ac0748b6c8001822417df8b6" category="cell">协议</block>
  <block id="1b5e109e8afd1f9b7f5bbf951eea3442" category="cell">卷模式</block>
  <block id="d5e2d9f8d8f10044e38b71b49e675d2e" category="cell">支持的访问模式</block>
  <block id="15971126972a002fcddb2c507534e371" category="cell">支持的文件系统</block>
  <block id="ac52cf637478f3656a1fdee5c02324fd" category="paragraph">文件系统</block>
  <block id="e1e4c8c9ccd9fc39c391da4bcd093fb2" category="paragraph">块</block>
  <block id="a029cca698cbf05f07897f86c43cf9e8" category="paragraph">`xfs` ， `ext3` ， `ext4`</block>
  <block id="4bd05efa612e48dd723de2bdd29f88e2" category="section-title">支持的 Kubernetes 集群架构</block>
  <block id="c91cda04d3ac5ae2da327d347d4bbefe" category="cell">Kubernetes 集群架构</block>
  <block id="eaa4dc5078017a5c5bebf383ab6f5124" category="cell">supported</block>
  <block id="c0057eecd4b1a67d11dc801b8992a574" category="cell">默认安装</block>
  <block id="0c69c79a8788e0e4572d0c4838e69401" category="cell">单个主节点，计算节点</block>
  <block id="1fc3441370ae575a64d605fcd15a05fd" category="cell">多主机，计算</block>
  <block id="7cb2eb9488f3532834f7ef233ae894dd" category="cell">主， `etcd` ，计算</block>
  <block id="5e5f49db20e29f6377e57e98932dae57" category="cell">主机，基础架构，计算</block>
  <block id="2a778cf7220cdde142651975e1bcd90f" category="paragraph">在虚拟池列表之外指定的任何方面对于后端都是全局的，并将应用于所有虚拟池，而每个虚拟池可能会分别指定一个或多个方面（覆盖任何后端 - 全局方面）。</block>
  <block id="e1b3ec89ead7f83a9245ed5c9cacfdbf" category="cell">运算符</block>
  <block id="0a52730597fb4ffa01fc117d9e71e3a9" category="cell">示例</block>
  <block id="499badcb6f450c7f46c51d873eb84286" category="cell">` =`</block>
  <block id="354653142ec321459dfd6d71444e992e" category="cell">性能 = 高级</block>
  <block id="5a5292b0a0d0379f0f1b12801b09b266" category="cell">` ！ =`</block>
  <block id="eccde6822783bd75209c9b6a2d357f6c" category="cell">性能！ = 至高</block>
  <block id="ae2bef277194f73d24a36a78009aac1e" category="cell">`在` 中</block>
  <block id="f8cf8c23afb5459dbf7c24b685caf85b" category="cell">位置（东部，西部）</block>
  <block id="1a031eecbce49366e550273b9321b909" category="cell">`注释`</block>
  <block id="b5585f3f9b45f391fee5dd15e6516450" category="cell">性能注释（银牌，铜牌）</block>
  <block id="b4621305109716b02eed0cf25fabab13" category="doc">卷访问组</block>
  <block id="33911b1eec54b4b5a7fbc504e6569989" category="inline-link">卷访问组</block>
  <block id="e9c3828cd06711f9036bb4ce862a32c5" category="doc">卷快照</block>
  <block id="9dbabbadda024bb7b1d0db43ab31b45f" category="list-text">对于 `solidfire-san` 驱动程序，每个 PV 都会映射到在 NetApp Element 软件 /NetApp HCI 集群上创建的 LUN 。VolumeSnapshot 由底层 LUN 的 Element Snapshot 表示。这些快照是时间点副本，只占用少量系统资源和空间。</block>
  <block id="89c3bcf0ecc1114f8d19734d9156cb40" category="doc">配置</block>
  <block id="af2a4d2810d86aa0169c117f82682f9a" category="doc">常见问题解答</block>
  <block id="96ab491ef73d5db0cd15f55e1552cc22" category="section-title">一般问题</block>
  <block id="92d1656d06303733c5e1398fb273a17e" category="section-title">故障排除和支持</block>
  <block id="a3d907947129a58ee6f9e23074840c8f" category="section-title">如何提出支持案例？</block>
  <block id="0265687df6c09d532b03477776c6d075" category="paragraph">要提交支持案例，请执行以下操作之一：</block>
  <block id="5dab8cca21a0ff4e72d4e2a1ee5156ea" category="list-text">请联系您的支持客户经理并获得帮助以提交服务单。</block>
  <block id="09ea0908fbfc4cde85bf416e35dc55c8" category="inline-link">NetApp 支持</block>
  <block id="a13956d424374973d31e5883b8bf8b6a" category="list-text">联系以提出支持案例<block ref="116f7ad90a3c7441981f82d8f8fba4d5" category="inline-link-rx"></block>。</block>
  <block id="3e77e87e5ee8fb4f6f910f4cf0594fc2" category="section-title">如何生成支持日志包？</block>
  <block id="7938aed248d09a5120eaf414e6c1d574" category="paragraph">您可以运行 `tridentctl logs -a` 来创建支持包。除了在捆绑包中捕获的日志之外，还可以捕获 kubelet 日志以诊断 Kubernetes 端的挂载问题。获取 kubelet 日志的说明因 Kubernetes 的安装方式而异。</block>
  <block id="2c3543f339dc749a508ed5e5e5aaae23" category="section-title">如果需要提出新功能请求，我该怎么办？</block>
  <block id="0aa1d7a95d75c0faa8302a803356b7b7" category="section-title">我应在何处提出缺陷？</block>
  <block id="bcd549c9f0199c5b8d0b55f782bff9e8" category="section-title">如果 Trident POD 被销毁，是否会丢失数据？</block>
  <block id="3de05f78e401869f4630ec8cabf339df" category="section-title">是否可以直接从旧版本升级到新版本（跳过几个版本）？</block>
  <block id="0399b9e6348e554937a4d65efc97a1b8" category="section-title">是否可以将 Trident 降级到先前版本？</block>
  <block id="ba9c59aa9d07b25e124dcf6ca88d689a" category="section-title">管理后端和卷</block>
  <block id="4c0e813a0bfed033d75bbfd8b18f556c" category="section-title">是否可以在后端更新管理 LIF ？</block>
  <block id="66d8fee83a94421ca416a2bdb33703b4" category="paragraph">可以，可以使用 `tridentctl update backend` 命令更新后端管理 LIF 。</block>
  <block id="c6e9fbb586ad55ddf4bbda9814c6adc9" category="paragraph">如果无法使用后端属性自动为某个类选择合适的池，则会使用 `storagePools` 和 `addtionalStoragePools` 参数来选择一组特定的池。</block>
  <block id="b127099c71415d532da3a26ed73eb041" category="paragraph">是的。</block>
  <block id="abbdd4298bb3e525fd172b2bbe5a451c" category="section-title">如何为在 ONTAP NAS 上配置的卷设置 Unix 权限？</block>
  <block id="094ef47e6456d60b656401b0f2bbfcbd" category="section-title">如何在配置卷时配置一组显式 ONTAP NFS 挂载选项？</block>
  <block id="ae6bc3659bb0be0a7d9f98a63775b7c2" category="section-title">如何将配置的卷设置为特定导出策略？</block>
  <block id="700a2008fea63d02c24b85f2f75d357e" category="paragraph">要允许相应的主机访问卷，请使用后端定义文件中配置的 `exportPolicy` 参数。</block>
  <block id="f412d672b51ea3c57812ebf3be0ddccb" category="paragraph">使用 `StorageClasses` 为 ONTAP 实施 QoS 。</block>
  <block id="0d97afe7a571dc39db1c810013844332" category="paragraph">ONTAP 驱动程序支持精简或厚配置。ONTAP 驱动程序默认为精简配置。如果需要厚配置，则应配置后端定义文件或 `StorageClass` 。如果同时配置了这两者，则 `StorageClass` 优先。为 ONTAP 配置以下内容：</block>
  <block id="2d0384de8b72e53c3476a478a5d4ec53" category="list-text">在 `StorageClass` 上，将 `provisioningType` 属性设置为 thick 。</block>
  <block id="3764067c4b14276efb241c511c8b0cc2" category="list-text">在后端定义文件中，通过将 `backend spaceReserve 参数` 设置为 volume 来启用厚卷。</block>
  <block id="d4391b26a81fead46afc74243c4029aa" category="section-title">如何确保即使意外删除了 PVC 也不会删除所使用的卷？</block>
  <block id="e58a684cd1a44d4879defbb2ec06b9a4" category="paragraph">从版本 1.10 开始， Kubernetes 会自动启用 PVC 保护。</block>
  <block id="3319194e0ba07a6aa327aefa1ab1e41f" category="section-title">是否可以在卷处于 SnapMirror 数据保护（ DP ）或脱机模式时导入它？</block>
  <block id="0b10afe39923054016a71caf423fdec6" category="paragraph">如果外部卷处于 DP 模式或脱机，则卷导入将失败。您会收到以下错误消息：</block>
  <block id="eed67b2d196c61d9c6cf4a50878ba446" category="section-title">如何将资源配额转换为 NetApp 集群？</block>
  <block id="0bdcd128fab544a7df404bc496a4126e" category="paragraph">此功能可从 `ontap-nas` ， `ontap-san` 和 `ontap-nas-flexgroup` 驱动程序获得。您也可以在 FlexVol 级别为 `ontap-san-economy` 驱动程序指定 `snapshotPolicy` 。</block>
  <block id="6b0d34d8a0749198a6b80eec69479c86" category="section-title">是否可以直接访问卷快照目录和复制文件？</block>
  <block id="eb3a2d1eb3c4022269f4c6837332311a" category="paragraph">可以，您可以通过在后端定义文件中设置 `snapshotDir` 参数来访问 Trident 配置的卷上的 Snapshot 目录。</block>
  <block id="64dd4ea74b402889a9c341da491f4933" category="paragraph">目前，必须使用 ONTAP 命令行界面或 OnCommand 系统管理器在外部设置 SnapMirror 。</block>
  <block id="e321bf6d54ded18df56a41ea51223a2a" category="section-title">如何将永久性卷还原到特定 ONTAP 快照？</block>
  <block id="5325f5d2cf63aaaa6610f09e8aa4dc35" category="paragraph">要将卷还原到 ONTAP 快照，请执行以下步骤：</block>
  <block id="4e789db936072df2058e9f271a9b8db8" category="list-text">暂停正在使用永久性卷的应用程序 POD 。</block>
  <block id="b34baa75f4f799a23b19de9b94e86868" category="list-text">通过 ONTAP 命令行界面或 OnCommand 系统管理器还原到所需的快照。</block>
  <block id="08754f2800804f1fe3673c858b4b56e0" category="list-text">重新启动应用程序 POD 。</block>
  <block id="0d3ef54a4cc337b5d907b6639e51c6d4" category="section-title">如何区分每个客户 / 租户的存储类使用情况？</block>
  <block id="fda1b35892cb6f61447f0e49415937d9" category="paragraph">Kubernetes 不允许在命名空间中使用存储类。但是，您可以使用 Kubernetes 通过使用每个命名空间的存储资源配额来限制每个命名空间的特定存储类的使用。要拒绝特定命名空间对特定存储的访问，请将该存储类的资源配额设置为 0 。</block>
  <block id="30d965eef5ba25c6b9998ae38270b43e" category="doc">法律声明</block>
  <block id="8355509d170c8a61d236e927a5fcc6e2" category="paragraph">如果您使用的是 Kubernetes 的分发版本，其中 `kubelet` 将其数据保存在通常的 ` /var/lib/kubelet` 以外的路径上，则可以使用 ` -kubelet-dir` 指定备用路径。</block>
  <block id="47cd697cf3c9dcf916f70a0007956c1d" category="paragraph">如果您需要自定义安装，使其超出安装程序参数的允许范围，则还可以自定义部署文件。使用 ` -generate-custom-yaml` 参数可在安装程序的 `setup` 目录中创建以下 YAML 文件：</block>
  <block id="0858f0ee003d52951161848adffe1b31" category="list-text">`trident — clusterrolebinding 。 yaml`</block>
  <block id="af73689aedfa47bd2a7cf144917b0642" category="list-text">`trident 部署。 yaml`</block>
  <block id="1d53fd876245951bb003eb47849ff39d" category="list-text">`trident — crds.yaml`</block>
  <block id="b17dbe8acaeca82c72d25948de03eefc" category="list-text">`trident 集群角色。 yaml`</block>
  <block id="ecb2b56a094cc1cbd3ac263b23d91f8b" category="list-text">`trident — demonset.yaml`</block>
  <block id="c5e462ae653234d0ea0e98a000e62a97" category="list-text">`trident service.yaml`</block>
  <block id="f1347677de6873f8ddce6d736cba9a63" category="list-text">`trident 命名空间 .yaml`</block>
  <block id="2539c7e25ada2a2cdae0eb4c4633b893" category="list-text">`trident 服务帐户。 yaml`</block>
  <block id="385d099ed91e83dbe20ea05fbed68e22" category="paragraph">生成这些文件后，您可以根据需要对其进行修改，然后使用 ` -use-custom-yaml` 安装自定义部署。</block>
  <block id="4a052772dca278b7be31d54ca9f21831" category="inline-link-macro">基本概念</block>
  <block id="dd3de2609b612d76ef4c71b97b8d6100" category="inline-link">按照其步骤启用 CLI 访问</block>
  <block id="c585967fa32d82c5e3c24bd63926c6a0" category="list-text">如果您将 Kubernetes 与 Docker Enterprise 结合使用，<block ref="57562caf1c76e1a261b7e2f8c3d113f9" category="inline-link-rx"></block>。</block>
  <block id="2e1b3f44683eee188be985693c4af5e1" category="list-text">Helm 版本 3</block>
  <block id="e366a20246a41520da551be510c1d658" category="paragraph">在安装期间，可以通过两种方式传递配置数据：</block>
  <block id="ea8cda06a0e70ad34c1b9ab1b7135105" category="inline-link-macro">支持的 Kubernetes 集群</block>
  <block id="e420b75ec3bc014e3f69c43b2383768b" category="admonition">使用 OpenShift 时，在以下所有示例中使用 `oc` 而不是 `kubectl` ，并首先以 * 系统： admin* 的身份运行 `oc login -u system ： admin` 或 `oc login -u Kube-admin` 进行登录。</block>
  <block id="337d79852891a37d41285c9101c3fff4" category="paragraph">运行以下命令：</block>
  <block id="dbbf8c6ec95775d28c3c6da1878bf8c3" category="list-text">运算符本身</block>
  <block id="a770ca95121cc795b602f9af6af024fb" category="admonition">在 Kubernetes 集群中只能有 * 一个操作符实例 * 。请勿创建 Trident 操作员的多个部署。</block>
  <block id="ec53a8c4f07baed5d8825072c89799be" category="cell">Status</block>
  <block id="2763f33c904a183bd0ef06f9c4fb4403" category="cell">安装</block>
  <block id="98dd43dfae05b11befe1f140e0ec787a" category="cell">已安装</block>
  <block id="c2aaea4dacecce78b34302e41fcef75e" category="cell">正在卸载</block>
  <block id="b78846123fdd78d5ab62451b855194e3" category="cell">已卸载</block>
  <block id="d7c8c85bf79bbe1b7188497c32c3b0ca" category="cell">失败</block>
  <block id="6909beea5b50605780e3411f879fe916" category="cell">正在更新</block>
  <block id="3201d58137fab497dea740d761a9733b" category="cell">操作员正在更新现有安装。</block>
  <block id="902b0d55fddef6f8d651fe1035b7d4bd" category="cell">error</block>
  <block id="efaeca66375c8663b6d1d64f4886f267" category="cell">不使用 `TridentOrchestrator` 。另一个已存在。</block>
  <block id="02ed10abbc71334918b1acb54df6e3f3" category="list-text">从 Kubernetes 集群复制配置文件，并在远程计算机上设置 `KUBECONFIG` 环境变量。</block>
  <block id="da693b77cde91654c6296abe8f901988" category="list-text">启动 `kubectl get nodes` 命令，验证您是否可以连接到所需的 Kubernetes 集群。</block>
  <block id="df65ec31c6f96e95301e3c6ff8863335" category="list-text">使用标准安装步骤从远程计算机完成部署。</block>
  <block id="83f499a540b1323009c200d6f8cc9396" category="cell">参数</block>
  <block id="7a1920d61156abc05a60135aefe8bc67" category="cell">Default</block>
  <block id="a67cf6b087ff88dbfacec8375928995c" category="cell">`debug`</block>
  <block id="68934a3e9455fa72420237eb05902327" category="cell">false</block>
  <block id="2bccac20e55391730a985f9819e1cc41" category="cell">`autosupport 映像`</block>
  <block id="84448c234dfdfd2a7367341fd4b56a80" category="cell">AutoSupport 遥测的容器映像</block>
  <block id="f4a6821b04b9ce6b90148068341347b6" category="cell">`autosupport 代理`</block>
  <block id="e9f06180af644cfa6e5d20bd67c03bc5" category="cell">`卸载`</block>
  <block id="7610c5cc7910022402c4fbd450d889ce" category="cell">`TridentImage`</block>
  <block id="8088435dc0e1c8b85217d850d3e7a602" category="cell">`imageRegistry`</block>
  <block id="e6b96cbb467923e86672bb25db5ecebb" category="cell">`kubeletDir`</block>
  <block id="2d30d1348c4d2533a165827a22516caa" category="cell">`imagePullSecs`</block>
  <block id="5a2ebfb8baa378cfcfcba58bbb1380c2" category="doc">要求</block>
  <block id="c777be7f669397b0a376fe32ca5cd9c3" category="section-title">支持的前端（编排程序）</block>
  <block id="201eb37826a33e35adff9119f25946bd" category="paragraph">以下版本支持 Trident 操作符：</block>
  <block id="f787cd4b6963b13f12fa53131f58ef6c" category="section-title">支持的后端（存储）</block>
  <block id="a3c559e0541e9bb860178ce6fe414224" category="list-text">适用于 GCP 的 Cloud Volumes Service</block>
  <block id="1d3d126b8a5bad69c46ed03734beed47" category="list-text">NetApp 全 SAN 阵列（ ASA ）</block>
  <block id="c7c7a6a5641f33e348244f9c43010e16" category="section-title">功能要求</block>
  <block id="21021ea0e52be8e9c599f4dff41e5be0" category="cell">功能</block>
  <block id="80afba45eb055fc9bdc48c90d1debd06" category="cell">Kubernetes 版本</block>
  <block id="10f295a61d2a793ac8936a69cf458654" category="cell">是否需要功能安全门？</block>
  <block id="e830b7e4d1fb7f84600876af87cb4381" category="cell">卷快照</block>
  <block id="ea8ed249117e76cb53766e218fe2b7c7" category="cell">卷快照中的 PVC</block>
  <block id="28dcded20f550dcad1bd9bb03a5bbe73" category="cell">iSCSI PV 调整大小</block>
  <block id="1673543ed032e46f3572ba65bc070693" category="cell">ONTAP 双向 CHAP</block>
  <block id="176e16df4faab1a1e06e9585c813d5fe" category="cell">动态导出策略</block>
  <block id="1f7219b07d5bce7feec002a9f4dc2201" category="cell">Trident 运算符</block>
  <block id="443432948b68bb63d707ce7ecc4a021a" category="cell">CSI 拓扑</block>
  <block id="11ea58814ce429c3e3254a63f8cde7a4" category="paragraph">`tridentctl` 实用程序也可在 Linux 的任何这些分发版上运行。</block>
  <block id="13d80777c8fd43e555c1f5b1b72d7ef0" category="section-title">主机配置</block>
  <block id="2139fe384d5ae165545994dff01961d9" category="section-title">存储系统配置：</block>
  <block id="923680056b0f0258907f498670b4ead1" category="section-title">容器映像以及相应的 Kubernetes 版本</block>
  <block id="aa92c4c233bc01609d957e469736b699" category="cell">容器映像</block>
  <block id="a60c2f57df655a9ac5fcaa0750886195" category="summary">如果您刚刚开始使用 Kubernetes ，请按照说明安装 Kubernetes 以进行尝试。这些说明提供了一个裸机单节点集群， Trident 可以与此集群集成以供演示。</block>
  <block id="231cf4c70d866b616c21baddaeed0696" category="doc">故障排除</block>
  <block id="40e41fb2db11266b8f751c0d5c67cba0" category="inline-link">NetApp 知识库（需要登录）</block>
  <block id="163fb9eb00818e2c7109900db1a3cc82" category="section-title">常规故障排除</block>
  <block id="f504c27d1ad305a988958b64f34468cb" category="list-text">如果 Trident Pod 无法正常启动（例如，当 Trident Pod 停留在 `ContainerCreating` 阶段且已准备好的容器少于两个时），则运行 `kubectl -n trident describe deployment trident` and `kubectl -n trident describe pod trident -%%.%.%.* -***` 可以提供更多见解。获取 kubelet 日志（例如，通过 `jlogalctl -xeu kubelet` ）也会很有帮助。</block>
  <block id="7f0ecdfa510b31b01d331c2760643b83" category="list-text">如果在将 PV 挂载到容器时出现问题，请确保 `rpcbind` 已安装并正在运行。对主机操作系统使用所需的软件包管理器，并检查 `rpcbind` 是否正在运行。您可以通过运行 `systemctl status rpcbind` 或其等效项来检查 `rpcbind` 服务的状态。</block>
  <block id="78aeadc89feb4cf244398a7d35a0d656" category="list-text">如果 Trident 后端报告其处于 `Failed` 状态，尽管之前已正常工作，但这可能是由于更改了与后端关联的 SVM/ 管理员凭据所致。使用 `tridentctl update backend` 更新后端信息或放弃 Trident Pod 将修复此问题描述。</block>
  <block id="b851cfc28cd6e5cb9aaf87bdb59a68aa" category="list-text">如果在容器运行时安装 Trident 时遇到权限问题，请使用 ` -in cluster=false` 标志尝试安装 Trident 。这不会使用安装程序 POD ，并可避免因 `trident 安装程序` 用户而出现权限问题。</block>
  <block id="6f7d49547ff47cfaf1fd93d134b603be" category="list-text">使用 `uninstall 参数 &lt;Uninstalling Trident &gt;` 在运行失败后进行清理。默认情况下，该脚本不会删除 Trident 创建的 CRD ，因此即使在正在运行的部署中，也可以安全地卸载并重新安装。</block>
  <block id="f1112223b41fddc71fd6a626582dfb78" category="inline-link">Trident 版本</block>
  <block id="51748ba3d16ecfd8c45c7ebf2043b738" category="list-text">成功安装后，如果 PVC 停留在 `Pending` 阶段，则运行 `kubectl describe PVC` 可以提供追加信息，说明 Trident 为何无法为此 PVC 配置 PV 。</block>
  <block id="0e89989064bf4afdc37fd5a7be4f607d" category="paragraph">如果使用操作员部署 Trident ，则 `TridentOrchestrator` 的状态将从 `Installing` 更改为 `Installed` 。如果您观察到 `failed` 状态，并且操作员无法自行恢复，则应运行以下命令来检查操作员的日志：</block>
  <block id="df9771dbb13da45493e576499910c0b4" category="paragraph">跟踪 trident 操作器容器的日志可能会指向问题所在。例如，其中一个问题描述可能是无法从运行良好的环境中的上游注册表中提取所需的容器映像。</block>
  <block id="0fd4c6187c561958bc76052df7774593" category="paragraph">要了解 Trident 安装失败的原因，您应查看 `TridentOrchestrator` 的状态。</block>
  <block id="1e054f4c292a5388d6318461fe73d749" category="paragraph">此错误表示已存在用于安装 Trident 的 `TridentOrchestrator` 。由于每个 Kubernetes 集群只能有一个 Trident 实例，因此操作员可确保在任意给定时间只存在一个可创建的活动 `TridentOrchestrator` 。</block>
  <block id="568fcf9beb0dbd37c57dff251a3164ed" category="paragraph">此外，观察 Trident Pod 的状态通常可以指示情况是否不正确。</block>
  <block id="f89c17ddb9f8bdaf5c95a466d5f6a500" category="paragraph">您可以清楚地看到，由于未提取一个或多个容器映像， Pod 无法完全初始化。</block>
  <block id="d57d1a6de03b2ddf3ee54f680152e2b6" category="paragraph">要解决此问题，您应编辑 `TridentOrchestrator` CR 。或者，您也可以删除 `TridentOrchestrator` ，并使用修改后的准确定义创建一个新的。</block>
  <block id="021e9ae5361eb14975bf9a30f99770f5" category="paragraph">为了帮助您找出出现问题的原因，您可以使用 `` -d`` 参数再次运行安装程序，该参数将打开调试模式并帮助您了解问题所在：</block>
  <block id="01539f4f1fd20792cbbae6bb0506cc20" category="paragraph">解决此问题后，您可以按如下所示清理安装，然后再次运行 `tridentctl install` 命令：</block>
  <block id="f2733a323df72dea4b230205225bdc13" category="doc">配置 NetApp HCI 或 SolidFire 后端</block>
  <block id="d1d184cecc23825cff20fabf3cdfb862" category="list-text">运行 Element 软件的受支持存储系统。</block>
  <block id="4055116469942da7f6ed83abcf57d0a4" category="list-text">NetApp HCI/SolidFire 集群管理员或租户用户的凭据，可用于管理卷。</block>
  <block id="d5fa5f22855b065d96647dfb0c06d685" category="inline-link-macro">工作节点准备信息</block>
  <block id="02017e70674a0c740b2b95fbb0cc2aa1" category="paragraph">无文件系统。原始块设备。</block>
  <block id="15b7c7ffe264d7b8c61915ff2a6ef96c" category="section-title">后端配置选项</block>
  <block id="9d370350f8d0178b5dfbec9def10d13a" category="paragraph">有关后端配置选项，请参见下表：</block>
  <block id="7877022c956918624cc0373ff564cad4" category="cell">`ve版本`</block>
  <block id="40e27006e7b709772172391a3d17b331" category="cell">始终为 1</block>
  <block id="868dff7060d78b6417dc8e065eca8374" category="cell">`storageDriverName`</block>
  <block id="5aae2c40b50d296edbd4ba9cfb462b49" category="cell">存储驱动程序的名称</block>
  <block id="f5b55596d3f53b1857a4980dac9db979" category="cell">`backendName`</block>
  <block id="5afd6479855e8d63f324b6ec2fa787b4" category="cell">自定义名称或存储后端</block>
  <block id="06981b2729b4b522b21d903c7738a2ca" category="cell">`端点`</block>
  <block id="41eba2d95ecaf35c8bd3a972c263ffe4" category="cell">使用租户凭据的 SolidFire 集群的 MVIP</block>
  <block id="955f5caa2495689258902533d1a6cd44" category="cell">`sVIP`</block>
  <block id="b07ca7de83de58a699966c9bc9003020" category="cell">存储（ iSCSI ） IP 地址和端口</block>
  <block id="eea443d4fcc24d4cd2cab08c2a6c062f" category="cell">`标签`</block>
  <block id="749df53d02481e75dd919dddf42fbbef" category="cell">要应用于卷的一组任意 JSON 格式的标签。</block>
  <block id="4e25fe4a614b527d9b3d89ee6abe5d35" category="cell">`租户名称`</block>
  <block id="251f1fc42c38ca55f30e5e9d11dac168" category="cell">要使用的租户名称（如果未找到，则创建）</block>
  <block id="f016e2c01f2bafa45e6b537d49f0f9da" category="cell">`InitiatorIFace`</block>
  <block id="4381b3c378885de93e2166f240096338" category="cell">将 iSCSI 流量限制为特定主机接口</block>
  <block id="5ff567e0863a47346f44f87ed793f508" category="cell">`UseCHAP`</block>
  <block id="2d1474e8b52ef42851337fb3fef4e1a1" category="cell">"nfsvers=3"</block>
  <block id="32738663b16444872e4e5721c7c37660" category="cell">`访问组`</block>
  <block id="c4ca01925aae0c37398f0b30a4ce1273" category="cell">要使用的访问组 ID 列表</block>
  <block id="26194deaf50c44db6eb5983237bdaf25" category="cell">`类型`</block>
  <block id="ee1aea1de97320ad8e98436f68b01b4a" category="cell">QoS 规范</block>
  <block id="91590ee78f1b4751284f4f9ea80cfe86" category="cell">`limitVolumeSize`</block>
  <block id="18320b2a705a7bed37a6bc0af4aee093" category="cell">如果请求的卷大小超过此值，则配置失败</block>
  <block id="f2f2c7c3c767da610bd95934104674f6" category="cell">`debugTraceFlags`</block>
  <block id="37a6259cc0c1dae299a7866489dff0bd" category="cell">空</block>
  <block id="88dce60232453383ab0d1c3c59cc931d" category="admonition">请勿使用 `debugTraceFlags` ，除非您正在进行故障排除并需要详细的日志转储。</block>
  <block id="3185240fb49cba19667fbdf639f3271e" category="paragraph">此示例显示了一个后端文件，该文件使用 CHAP 身份验证并使用特定 QoS 保证对三种卷类型进行建模。然后，您很可能会使用 `IOPS` storage class 参数定义存储类以使用其中的每种类型。</block>
  <block id="4d0d37d727675761e4c0e324eb57ca2f" category="list-text"><block ref="4d0d37d727675761e4c0e324eb57ca2f" category="inline-link-macro-rx"></block></block>
  <block id="da195e41c537042ae77405110c4512ff" category="paragraph">以配置和使用<block ref="5129d3f1116e9c5221bfcf965a1ede35" category="inline-link-rx"></block> 后端，您需要满足以下要求：</block>
  <block id="2c00ff9c7700dc3529c57f0a5281bbe2" category="list-text">Google Cloud 帐户的项目编号</block>
  <block id="43752d169c5729fffa3a6557a0978cb8" category="list-text">具有 `netappcloudvolumes.admin` 角色的 Google Cloud 服务帐户</block>
  <block id="07cc9934740ba3dd46a0d7d2c9502d39" category="cell">"GCP-CVS"</block>
  <block id="f476273c71e20fc5a845a5345a620117" category="cell">驱动程序名称 + "_" + API 密钥的一部分</block>
  <block id="6eb82a822b962404b9694b93f2967679" category="cell">`s存储类`</block>
  <block id="c96383270cbab23de47b4f0961f64929" category="cell">`projectNumber`</block>
  <block id="2086191016950a784040f7d22ab27f60" category="cell">`区域`</block>
  <block id="a34d72a685d5e27eb6bc18f54a7bab1d" category="cell">`apiKey`</block>
  <block id="af18429250667f805769a7755a008c1f" category="cell">`代理 URL`</block>
  <block id="2b45af5c768d7b2495ef631c991ecd78" category="cell">`nfsMountOptions`</block>
  <block id="b9cc8276829a756e7a22476617204267" category="cell">精细控制 NFS 挂载选项。</block>
  <block id="2288620b3dc019c6359bcc7f50b72ab3" category="cell">如果请求的卷大小超过此值，则配置失败</block>
  <block id="567c7f0eca746ed7513764be5ecf6d03" category="cell">"" （默认情况下不强制实施）</block>
  <block id="0322003a3502f221fdb74b059dfff46e" category="cell">`s服务级别`</block>
  <block id="4dd7128ceae058946c44bbbb0985ec6f" category="paragraph">每个后端都会在一个 Google Cloud 区域中配置卷。要在其他区域创建卷，您可以定义其他后端。</block>
  <block id="9c64942fe493cb70c474ff447429d8a4" category="cell">`exportRule`</block>
  <block id="1274e36c193ec0ce8b5c49d5e78ffd7b" category="cell">"0.0.0.0/0</block>
  <block id="ce8f82152151ae2aadaec166eca744a9" category="cell">`snapshotDir`</block>
  <block id="51b2015e6da8653f4041b71312ad43fe" category="cell">访问 ` .snapshot` 目录</block>
  <block id="c07fbc0b2a1a865fe9e3a55c05b4f690" category="cell">false</block>
  <block id="7556d5a1b0c5f68b7cb5aedaa3156008" category="cell">`sSnapshot 预留`</block>
  <block id="31ed61cc3c85d0bb697cd12b77f37fd1" category="cell">为快照预留的卷百分比</block>
  <block id="e76dcf1d6497658a2994b5f1f65b7a83" category="cell">"" （接受 CVS 默认值为 0 ）</block>
  <block id="a48a8458539e489328f4d6d3fc0ee288" category="cell">`s大小`</block>
  <block id="25f4894ddaab3c1182f12732d3bcf889" category="section-title">示例 1 ：最低配置</block>
  <block id="3ad256eea0abb551eaab63c84aa3d1f9" category="paragraph">创建后端配置文件后，运行以下命令：</block>
  <block id="a61ed3c1ecae587dbee1f2c0ace81e3b" category="paragraph">如果后端创建失败，则后端配置出现问题。您可以运行以下命令来查看日志以确定发生原因：</block>
  <block id="8427b84145b88f048d5caa532324cd11" category="paragraph">确定并更正配置文件中的问题后，您可以再次运行 create 命令。</block>
  <block id="8f828c7344e7fe65d66237a25193068b" category="summary">了解如何准备使用 ONTAP SAN 驱动程序配置 ONTAP 后端。</block>
  <block id="5475028f502d04bc17cdfdf613d28cbf" category="paragraph">请记住，您还可以运行多个驱动程序，并创建指向其中一个驱动程序的存储类。例如，您可以配置使用 `ontap-san` 驱动程序的 `san-dev` 类和使用 `ontap-san-economy-one` 的 `san-default` 类。</block>
  <block id="c75f7811d70d17dbcd88e9d03752cbed" category="section-title">身份验证</block>
  <block id="00cbc0e7ed0014813b07fc8452f60df1" category="list-text">Credential Based ：具有所需权限的 ONTAP 用户的用户名和密码。建议使用 `admin` 或 `vsadmin` 等预定义的安全登录角色，以确保与 ONTAP 版本的最大兼容性。</block>
  <block id="a2f8f419bf420960ef8cca73e1999e09" category="section-title">启用基于凭据的身份验证</block>
  <block id="2312b8f77f99c346269b67308afc3649" category="paragraph">后端定义示例如下所示：</block>
  <block id="2a2ef6dcf08a8789a55301af5f71304c" category="paragraph">请注意，后端定义是凭据以纯文本格式存储的唯一位置。创建后端后，用户名 / 密码将使用 Base64 进行编码并存储为 Kubernetes 密钥。创建 / 更新后端是唯一需要了解凭据的步骤。因此，这是一项仅由管理员执行的操作，由 Kubernetes 或存储管理员执行。</block>
  <block id="052f76b486189a7b01340d5134eb7985" category="section-title">启用基于证书的身份验证</block>
  <block id="0778b06c5ea9fded4fd7b586b248dd86" category="paragraph">新的和现有的后端可以使用证书并与 ONTAP 后端进行通信。后端定义需要三个参数。</block>
  <block id="d5b9c9db262b1927d7914504f3587adb" category="list-text">clientCertificate ：客户端证书的 Base64 编码值。</block>
  <block id="8f2b750dd6a57864f0e36828c248ddfc" category="list-text">clientPrivateKey ：关联私钥的 Base64 编码值。</block>
  <block id="200c2d2a44dec6455fa1c947f9c1f534" category="list-text">trustedCACertifate ：受信任 CA 证书的 Base64 编码值。如果使用可信 CA ，则必须提供此参数。如果不使用可信 CA ，则可以忽略此设置。</block>
  <block id="6b634823c19ebc37c9e4fdbf08de1fff" category="paragraph">典型的工作流包括以下步骤。</block>
  <block id="c92e58d7dd251e6e6cdb16291a6dec90" category="list-text">生成客户端证书和密钥。生成时，将公用名（ Common Name ， CN ）设置为要作为身份验证的 ONTAP 用户。</block>
  <block id="69b521cddbc52a2d14539e349e2930f0" category="list-text">将可信 CA 证书添加到 ONTAP 集群。此问题可能已由存储管理员处理。如果未使用可信 CA ，则忽略。</block>
  <block id="2f3945695e5ca88abb46af80d87c6972" category="list-text">在 ONTAP 集群上安装客户端证书和密钥（从步骤 1 开始）。</block>
  <block id="e81810c4035ad015ad3f0d8c4f2c6454" category="list-text">确认 ONTAP 安全登录角色支持 `cert` 身份验证方法。</block>
  <block id="ea3bf76b270384627e7bcfb197ddb17b" category="list-text">使用生成的证书测试身份验证。将 &lt;SVM 管理 LIF&gt; 和 &lt;SVM 名称 &gt; 替换为管理 LIF IP 和 ONTAP 名称。</block>
  <block id="83f2adf143dc8f5fbbb9d924f840c1ce" category="list-text">使用 Base64 对证书，密钥和可信 CA 证书进行编码。</block>
  <block id="8d36e570f1edac5ae19e6733e3fbb4d5" category="list-text">使用从上一步获得的值创建后端。</block>
  <block id="2ab8ad0fce083cd02635b9126cf4353c" category="section-title">更新身份验证方法或轮换凭据</block>
  <block id="5e36c3d66bd47ae551071244dc48df17" category="admonition">轮换密码时，存储管理员必须先在 ONTAP 上更新用户的密码。然后进行后端更新。轮换证书时，可以向用户添加多个证书。之后，后端将更新以使用新证书，然后可以从 ONTAP 集群中删除旧证书。</block>
  <block id="12dd7bfa072b5a1eecf975f6a5a6eaa7" category="admonition">`useCHAP` 参数是一个布尔选项，只能配置一次。默认情况下，此参数设置为 false 。将其设置为 true 后，无法将其设置为 false 。</block>
  <block id="bc601528678aeeb582101ed205a054bc" category="paragraph">除了 `useCHAP=true` 之外，后端定义还必须包括 `chapInitiatorSecret` ， `chapTargetInitiatorSecret` ， `chapTargetUsername` 和 `chapUsername` 字段。通过运行 `tridentctl update` 创建后端，可以更改这些密钥。</block>
  <block id="29b4db879e4cc96a6b71bc763367624b" category="list-text">在 SVM 上设置 CHAP ：</block>
  <block id="13e0c564d5e1fbd33279fb276166653d" category="list-text">配置 CHAP 启动程序以及目标用户名和密码；必须在后端配置中指定这些选项（如上所示）。</block>
  <block id="a7fe005c9f49619f4438aac8932fb361" category="paragraph">您可以通过更新 `backend.json` 文件中的 CHAP 参数来更新 CHAP 凭据。这需要更新 CHAP 密码并使用 `tridentctl update` 命令反映这些更改。</block>
  <block id="ef81b740be2293b7e3c41047afe98764" category="cell">"100 克 "</block>
  <block id="15d79b565b148caa23e6f2b53813413d" category="section-title">展开 iSCSI 卷</block>
  <block id="0b981ab19df55a28a02578aa5f326db8" category="paragraph">您可以使用 CSI 配置程序扩展 iSCSI 永久性卷（ PV ）。</block>
  <block id="f8f338469c62eb8604f5304af08466ba" category="admonition">iSCSI 卷扩展受 `ontap-san` ， `ontap-san-economy` ， `solidfire-san` 驱动程序支持，需要 Kubernetes 1.16 及更高版本。</block>
  <block id="fe9ee1935ea7894fe4fd2f600993cd7d" category="section-title">第 1 步：配置 StorageClass 以支持卷扩展</block>
  <block id="c83b8171dcc233263cf7eeaef8da6a4d" category="paragraph">对于已存在的 StorageClass ，请对其进行编辑，使其包含 `allowVolumeExpansion` 参数。</block>
  <block id="59973fd7be015512b53fe121a13d5580" category="section-title">第 2 步：使用您创建的 StorageClass 创建 PVC</block>
  <block id="8dacc1d7fdb5bfd3f8a4daedf3ccdd88" category="section-title">第 3 步：定义连接 PVC 的 POD</block>
  <block id="85f5dec267aa48cff82ccaf993019e6d" category="paragraph">在此示例中，创建了一个使用 `san-PVC` 的 Pod 。</block>
  <block id="ebae1958b6002fb43077a474d845284c" category="section-title">第 4 步：展开 PV</block>
  <block id="63188b171689bcd93b1ca818b3a2ab9c" category="paragraph">要将已创建的 PV 从 1Gi 调整为 2Gi ，请编辑 PVC 定义并将 `sPec.resources.requests.storage` 更新为 2Gi 。</block>
  <block id="eabf614ed44fe1c3e78cb2300949eb63" category="section-title">第 5 步：验证扩展</block>
  <block id="75b8249751a8ea5869a0b5a8e465efc1" category="section-title">展开 NFS 卷</block>
  <block id="578f10bb7cad2abad1cbbcb9a9a732f9" category="paragraph">要调整 NFS PV 的大小，管理员首先需要将 `allowVolumeExpansion` 字段设置为 `true` 来配置存储类以允许卷扩展：</block>
  <block id="27b4a9ed8609e35526601aa8d8be1ab9" category="paragraph">如果您已创建没有此选项的存储类，则只需使用 `kubectl edit storageclass` 编辑现有存储类即可进行卷扩展。</block>
  <block id="3b16cea25bd4a9aaf5a9c3dcc13ea7eb" category="section-title">第 3 步：展开 PV</block>
  <block id="4a59ce1bc63fd7e6333968fb4bbd9d45" category="section-title">第 4 步：验证扩展</block>
  <block id="cf13ba16f33b5f6772614929649be6c2" category="summary">您可以使用 `tridentctl import` 将现有存储卷作为 Kubernetes PV 导入。</block>
  <block id="5f48c343984786005c9830d96c6fca87" category="doc">导入卷</block>
  <block id="76057e180d7b3edcebaa935c7ccab687" category="paragraph">PVC 和 PV 中会添加一个标注，用于指示卷已导入以及 PVC 和 PV 是否已管理。不应修改或删除此标注。</block>
  <block id="07b434b23f63ca6490df33b213599320" category="section-title">管理 NFS 导出策略</block>
  <block id="4603f08ad837f4108ff2fe7665b0b1e3" category="section-title">动态管理导出策略</block>
  <block id="4975fc485ff51ca8f82c6ea96f927287" category="paragraph">以下是使用上述示例对此功能的工作原理进行的说明：</block>
  <block id="4646f167a1fb9819f41f28d5ab11c1fa" category="paragraph">创建后，您可以为后端更新 `autosExportPolicy` 和 `autosExportCIDR` 。您可以为自动管理的后端附加新的 CIDR ，也可以删除现有的 CIDR 。删除 CIDR 时请务必小心，以确保现有连接不会断开。您也可以选择对后端禁用 `autosExportPolicy` ，并回退到手动创建的导出策略。这需要在后端配置中设置 `exportPolicy` 参数。</block>
  <block id="de1d1f6b64a5c5b6890c313888b290b7" category="admonition">删除具有自动管理导出策略的后端将删除动态创建的导出策略。如果重新创建后端，则会将其视为新的后端，并会创建新的导出策略。</block>
  <block id="19ce3b2e7823907e5153f00fe04f64f7" category="doc">配置选项和示例</block>
  <block id="07c54fe26be1e43601e99cd9d4fbe262" category="cell">`m年` 月 日</block>
  <block id="bd81db53971fda3e688447b28c747d1a" category="cell">`dataLIF`</block>
  <block id="ab4ce1634362493e6de248d103136787" category="cell">`使用 CHAP`</block>
  <block id="7c6b65d42434282f1555f13b40e9fd25" category="cell">`chapInitiatorSecret`</block>
  <block id="c8a7a6136447a56280ecf99e3ed87d65" category="cell">CHAP 启动程序密钥。如果为 `useCHAP=true` ，则为必需项</block>
  <block id="b5cbbe3dadaab4a036fdb38af67ee936" category="cell">要应用于卷的一组任意 JSON 格式的标签</block>
  <block id="948938ec6491061ccf17c7ae8eafbd26" category="cell">`chapTargetInitiatorSecret`</block>
  <block id="48db71efc42dda989b98744160575f4f" category="cell">CHAP 目标启动程序密钥。如果为 `useCHAP=true` ，则为必需项</block>
  <block id="28687fafefb2992ff7856dcfd2c29e1f" category="cell">`chapUsername`</block>
  <block id="e3f84c141fd3f4682dfb31e0d71c7f5f" category="cell">入站用户名。如果为 `useCHAP=true` ，则为必需项</block>
  <block id="62fbbf4cfd0cc0a82f953199d14a61e3" category="cell">`chapTargetUsername`</block>
  <block id="a379a576b788ab047d5e6405ff4f3511" category="cell">目标用户名。如果为 `useCHAP=true` ，则为必需项</block>
  <block id="cbdaf784161be9806a24fe78a8046c01" category="cell">`客户端证书`</block>
  <block id="a84cbedc106b973917ae925d04533f97" category="cell">客户端证书的 Base64 编码值。用于基于证书的身份验证</block>
  <block id="8545e54eea74cf2579fbe1cb56b11862" category="cell">`clientPrivateKey`</block>
  <block id="4a54228eb2be79492f8f76bb814ddf63" category="cell">客户端专用密钥的 Base64 编码值。用于基于证书的身份验证</block>
  <block id="b071cd8105f8f59b777098388b7a3322" category="cell">`trustedCACertifate`</block>
  <block id="ffe4ce29fe1a6176d496c40332e9cb98" category="cell">受信任 CA 证书的 Base64 编码值。可选。用于基于证书的身份验证</block>
  <block id="6d77646a2fd9ab65f8e3344d7dce661a" category="cell">`用户名`</block>
  <block id="83425e975af1b2d60355aa4162300198" category="cell">用于连接到集群 /SVM 的用户名。用于基于凭据的身份验证</block>
  <block id="6aa91a7fbb8c9edcf4aa5f9411aec19c" category="cell">`密码`</block>
  <block id="63d06d6cc41e485615f99a3aad0002b3" category="cell">连接到集群 /SVM 的密码。用于基于凭据的身份验证</block>
  <block id="afc423de2be5ca5ab3a6ae9548bbfcf3" category="cell">`sVM`</block>
  <block id="972abf48cbbadbcd573754140d35e19a" category="cell">要使用的 Storage Virtual Machine</block>
  <block id="ef65dd3301d78701f7cfcf8a01834f2f" category="cell">如果指定了 SVM `managementLIF` ，则派生</block>
  <block id="3b890f58db76bb3003ada171cd18c4db" category="cell">`igroupName`</block>
  <block id="c08068da3c5d19547544c4bd424a6b76" category="cell">`s存储前缀`</block>
  <block id="e3f688f3aa653574b3253640aa98f47c" category="cell">在 SVM 中配置新卷时使用的前缀。设置后无法更新</block>
  <block id="12d2394af47293b12d6b5f411f99a6d1" category="cell">`limitAggregateUsage`</block>
  <block id="c9a303edbc714d051896c3a678e59a8a" category="cell">`lunsPerFlexvol`</block>
  <block id="79892588cbecd0b88729ea1a55b2a3a4" category="cell">每个 FlexVol 的最大 LUN 数，必须在 50 ， 200 范围内</block>
  <block id="f703d18584e163e18762e4dc13ad96a0" category="cell">`useREST`</block>
  <block id="193a49bcfb561fea878daa5efe72cad9" category="section-title">用于配置卷的后端配置选项</block>
  <block id="a0ee23c5b4cbd6a28a4143933891f927" category="cell">`spaceAllocation`</block>
  <block id="26161d08a960162cd8633d0e23058aed" category="cell">LUN 的空间分配</block>
  <block id="a6bddf19eed00dbe2199864dee8454ce" category="cell">`s页面预留`</block>
  <block id="0ec3875cf79264e4689a646be2f704b6" category="cell">`sSnapshot 策略`</block>
  <block id="77f69e470b8766d2dc5df4b7f469ed72" category="cell">要使用的 Snapshot 策略</block>
  <block id="84d2c2c768bd1900489bad5fb46b4aac" category="cell">`qosPolicy`</block>
  <block id="54b94bba5d336f4e3d5fd7e88544fad1" category="cell">要为创建的卷分配的 QoS 策略组。选择每个存储池 / 后端的 qosPolicy 或 adaptiveQosPolicy 之一</block>
  <block id="952e3a12d35e717bf86a6000b0c08976" category="cell">`adaptiveQosPolicy`</block>
  <block id="036c0eabd455d8a92d350429f2f5747e" category="cell">要为创建的卷分配的自适应 QoS 策略组。选择每个存储池 / 后端的 qosPolicy 或 adaptiveQosPolicy 之一</block>
  <block id="4be01095ce6e500084fc427e5dec61ac" category="cell">`splitOnClone`</block>
  <block id="6f5c0c94b1a17baffd2c33facaa10db6" category="cell">创建克隆时，从其父级拆分该克隆</block>
  <block id="b091cbafedf94db98f17823d044434bd" category="cell">`加密`</block>
  <block id="a463baaf6666da7178b6fc6a3c8a3fee" category="cell">`securityStyle`</block>
  <block id="31aa018945eb62580d68d360cba8ba54" category="cell">`分层策略`</block>
  <block id="2f1534ee8d0c6ec998511ed37cfe0da9" category="image-alt">显示了 volume show 命令的输出。</block>
  <block id="e6e049b4753c744e95db32b0eeed8d5c" category="paragraph">目前，调整大小是对现有卷使用新计算的唯一方法。</block>
  <block id="2aae2b6accd04335b3eeceb2193b34d6" category="section-title">最低配置示例</block>
  <block id="bca36ce39f61ce2d375cbdb66eab5162" category="paragraph">以下示例显示了将大多数参数保留为默认值的基本配置。这是定义后端的最简单方法。</block>
  <block id="f00b69018be0961b32ee24ec54fb56d1" category="section-title">将后端映射到 StorageClasses</block>
  <block id="ef1161058705470bb877fbce688eea9e" category="summary">了解如何使用 ONTAP SAN 驱动程序配置 ONTAP 后端。</block>
  <block id="ce8828fc10a926c196951c9bdd0d534d" category="section-title">用户权限</block>
  <block id="821b0ad941ad2559ef18eb8de56a470e" category="summary">Kubernetes 集群中的所有工作节点都需要能够挂载为 Pod 配置的卷。如果您在其中一个后端使用的是 ontap-nas ， ontap-nas-economy. ontap-nas-flexgroup 驱动程序，则您的工作节点需要 NFS 工具。否则，它们需要使用 iSCSI 工具。</block>
  <block id="89d83ec6e8ec0c087fbc4aedc555b362" category="doc">准备工作节点</block>
  <block id="b7a66d04a41292979004906785008ca9" category="section-title">NFS volumes</block>
  <block id="c441ee50c88f6e5e3a7c69fc69dad8b8" category="cell">命令</block>
  <block id="29ba980a9e9adedc9414ea868c74ebd5" category="section-title">iSCSI 卷</block>
  <block id="12fe03bf2457cc4e4e90af10a2f7092f" category="list-text">Kubernetes 集群中的每个节点都必须具有唯一的 IQN 。* 这是必要的前提条件 * 。</block>
  <block id="8cd5b262d8d9950185128d052d55f7c8" category="list-text">安装以下系统软件包：</block>
  <block id="1a5157a00ea5806f553766d5b3b114fd" category="list-text">检查 iscsi-initiator-utils 版本是否为 6.2.0.877-2.el7 或更高版本：</block>
  <block id="19955b3c2d2c1cfc1c82c2fe0347a065" category="list-text">将扫描设置为手动：</block>
  <block id="d0b02d407fd5c75d0e7eac549a852191" category="list-text">启用多路径：</block>
  <block id="8bec0eea71974a9138ccfa96983ddcfc" category="list-text">确保 `iscsid` 和 `multipathd` 正在运行：</block>
  <block id="8018f5d6ddc4e67678d1659757828deb" category="list-text">启用并启动 `iSCSI` ：</block>
  <block id="a53508e75911225e5de8b5febc82cf12" category="list-text">检查 open-iscsi 版本是否为 2.0.877-5ubuntu2.10 或更高版本（对于双子系统）或 2.0.877-7.1ubuntu6.1 或更高版本（对于 Focal ）：</block>
  <block id="b163c84ad8a4e55a17b51aad8074093e" category="list-text">确保已启用并运行 `open-iscsi` 和 `multipath-tools` ：</block>
  <block id="1b757fe9c8a149de349a32b8d21feb54" category="admonition">对于 Ubuntu 18.04 ，您必须先使用 `iscsiadm` 发现目标端口，然后再启动 `open-iscsi` ， iSCSI 守护进程才能启动。您也可以将 `iscsi` 服务修改为自动启动 `iscsid` 。</block>
  <block id="b44c2fd5cefc815abed7e31c0fa8c8ac" category="paragraph">创建 `TridentBackendConfig` 对象时，将发生以下情况：</block>
  <block id="1efc3a14ca6dc7c90db79e02f3abe7d5" category="paragraph">每个 `TridentBackendConfig` 都与 `TridentBackend` 保持一对一映射。前者是为用户提供的用于设计和配置后端的接口；后者是 Trident 表示实际后端对象的方式。</block>
  <block id="9c3385530cf6e460576e5f6e7cc1b912" category="paragraph">有关 `TridentBackendConfig` CR 的格式，请参见以下示例：</block>
  <block id="c84ef67352bb6783ff2881f9f2821c2a" category="inline-link">Trident 安装程序</block>
  <block id="f13a06ff6eab87969a9f96765f31ed9c" category="paragraph">您还可以查看中的示例<block ref="6511e50af21389f9e77db56e03f6dd72" category="inline-link-rx"></block> 所需存储平台 / 服务的示例配置目录。</block>
  <block id="06df669f3ef6f929e9b58c9f47b65310" category="inline-link-macro">存储驱动程序的后端配置信息</block>
  <block id="92051c832f01d9070a7ed71d1ce523c5" category="paragraph">`sPec` 部分还包括 `credentials` 和 `deletionPolicy` 字段，这些字段在 `TridentBackendConfig` CR 中新增：</block>
  <block id="5ab961de690e071f0dc1c0dabac7fd89" category="list-text">`credentials` ：此参数为必填字段，包含用于向存储系统 / 服务进行身份验证的凭据。此密码设置为用户创建的 Kubernetes Secret 。凭据不能以纯文本形式传递，因此会导致错误。</block>
  <block id="9f11e03722a7b912083c63fc68f4dd7b" category="list-text">`deeltionPolicy` ：此字段定义删除 `TridentBackendConfig` 时应发生的情况。它可以采用以下两种可能值之一：</block>
  <block id="d09d50d3f84f9c585492818f491a2497" category="list-text">`delete` ：这将同时删除 `TridentBackendConfig` CR 和关联后端。这是默认值。</block>
  <block id="f0c89ce27bf4c43949ad8f26a4f586bb" category="list-text">`retain` ：删除 `TrdentBackendConfig` CR 后，后端定义仍存在，可使用 `tridentctl` 进行管理。将删除策略设置为 `retain` 允许用户降级到早期版本（ 21.04 之前）并保留创建的后端。创建 `TridentBackendConfig` 后，可以更新此字段的值。</block>
  <block id="7f2208582df334d090d35357eb5d6901" category="admonition">后端名称使用 `sPec.backendName` 设置。如果未指定，则后端的名称将设置为 `TridentBackendConfig` 对象的名称（ metadata.name ）。建议使用 `sPec.backendName` 显式设置后端名称。</block>
  <block id="625cc9b8ccc34496dc2b3fcffb7e384a" category="section-title">步骤概述</block>
  <block id="a867c4bbc8d632a517f22b7377b9b8ed" category="paragraph">要使用 `kubectl` 创建新后端，应执行以下操作：</block>
  <block id="4db4699aa0126dfb06878d7e07c0abdf" category="inline-link">Kubernetes 机密</block>
  <block id="c39d193a9cc4084cc6c7964e1bb5efd8" category="list-text">创建 `TridentBackendConfig` 对象。其中包含有关存储集群 / 服务的详细信息，并引用了上一步中创建的密钥。</block>
  <block id="286b0035cf59742ffe54696b798f2368" category="paragraph">创建后端后，您可以使用 `kubectl get tbc &lt;tbc-name&gt; -n &lt;trident 命名空间 &gt;` 来观察其状态，并收集其他详细信息。</block>
  <block id="494cb787cd1c1f78123323c1006f2081" category="section-title">第 1 步：创建 Kubernetes 机密</block>
  <block id="04402bf69acac56c72a55c0e4ac2165c" category="paragraph">下表汇总了每个存储平台的机密中必须包含的字段：</block>
  <block id="94cec86c6eef229009007e6d00d54ef1" category="cell">存储平台机密字段问题描述</block>
  <block id="1e6947ac7fb3a9529a9726eb692c8cc5" category="cell">机密</block>
  <block id="c11257eff6563de2c05e353770c514ca" category="cell">字段问题描述</block>
  <block id="93c5bebdea9c94a0740fe6fd9bb250f0" category="paragraph">clientId</block>
  <block id="012e85295e2f1f744cfb8757f8dd4830" category="paragraph">应用程序注册中的客户端 ID</block>
  <block id="ee64ef6c307cfcfe5c0f085471cd61fa" category="paragraph">private_key_id</block>
  <block id="1e31c22f827d25c5973eee697baace79" category="paragraph">专用密钥的 ID 。具有 CVS 管理员角色的 GCP 服务帐户的 API 密钥的一部分</block>
  <block id="156a17333e77a3c504018cae5ada8c3b" category="paragraph">private_key</block>
  <block id="8e0708b67ba6ce0f70a948152e7e7895" category="paragraph">专用密钥。具有 CVS 管理员角色的 GCP 服务帐户的 API 密钥的一部分</block>
  <block id="25de05ab7f10e99b499db62e0b89ad33" category="cell">Element （ NetApp HCI/SolidFire ）</block>
  <block id="2a6ba72e93aa7fa676d07973ed2716bb" category="paragraph">端点</block>
  <block id="14c4b06b824ec593239362517f538b29" category="paragraph">username</block>
  <block id="6e1b40351708d93ce8c387f6f8ca7533" category="paragraph">用于连接到集群 /SVM 的用户名。用于基于凭据的身份验证</block>
  <block id="5f4dcc3b5aa765d61d8327deb882cf99" category="paragraph">password</block>
  <block id="4d3fd9a7ab4c84b857fc26b2633237d0" category="paragraph">连接到集群 /SVM 的密码。用于基于凭据的身份验证</block>
  <block id="19dce7ac7f5290fc8fa218ad0c858df5" category="paragraph">客户端权限密钥</block>
  <block id="8c5e8d4f9acf9295e1a96feef0c0b516" category="paragraph">客户端专用密钥的 Base64 编码值。用于基于证书的身份验证</block>
  <block id="039e9d80fa53ba861c06b590ba3f9d34" category="paragraph">用户名</block>
  <block id="a7128cd45d4a277fe5c6ed6f6c4238f7" category="paragraph">入站用户名。如果 useCHAP=true ，则为必需项。适用于 `ontap-san` 和 `ontap-san-economy.`</block>
  <block id="f9d0dc78b203f2c1106dc0c7d58a5397" category="paragraph">chapInitiatorSecret</block>
  <block id="2f573af61fb37b4f1c5e2def2341b7c4" category="paragraph">CHAP 启动程序密钥。如果 useCHAP=true ，则为必需项。适用于 `ontap-san` 和 `ontap-san-economy.`</block>
  <block id="2ebe107bb3bc9551fbb0e5033046931c" category="paragraph">chapTargetUsername</block>
  <block id="e945f079b3e50bd5722f056b72282608" category="paragraph">目标用户名。如果 useCHAP=true ，则为必需项。适用于 `ontap-san` 和 `ontap-san-economy.`</block>
  <block id="4ab84a55744951d967033db9b64f6b27" category="paragraph">chapTargetInitiatorSecret</block>
  <block id="61b50fba255c10a4a2b5f7cf8276849a" category="paragraph">CHAP 目标启动程序密钥。如果 useCHAP=true ，则为必需项。适用于 `ontap-san` 和 `ontap-san-economy.`</block>
  <block id="73d583a1445e1497ec3adaa011e2724c" category="paragraph">在下一步中创建的 `TrdentBackendConfig` 对象的 `sPec.credentials` 字段将引用此步骤中创建的机密。</block>
  <block id="3394622f88ed2c82c85e92e908879095" category="paragraph">现在，您可以创建 `TridentBackendConfig` CR 了。在此示例中，使用 `TriventBackendConfig` 对象创建使用` ontap-san `驱动程序的后端，如下所示：</block>
  <block id="967688089cfc07a6c8e893bce5186445" category="paragraph">现在，您已创建 `TridentBackendConfig` CR ，可以验证状态。请参见以下示例：</block>
  <block id="edc9d2e179d9bd8effd5277699967aff" category="paragraph">已成功创建后端并将其绑定到 `TridentBackendConfig` CR 。</block>
  <block id="ecb5320e6f020f2c2dcad7a6268111ed" category="paragraph">阶段可以采用以下值之一：</block>
  <block id="f2edf590deb30828e48e7290aa78e788" category="list-text">`Unbound` ：使用 ` ""` 表示。`TridentBackendConfig` 对象未绑定到后端。默认情况下，所有新创建的 `TridentBackendConfig` CRS 均处于此阶段。此阶段发生更改后，它将无法再次还原为 "Unbound （已取消绑定） " 。</block>
  <block id="ffd02eb489e62222a00391567d0bad81" category="list-text">如果后端存在一个或多个 PVC ，则会进入删除状态。`TridentBackendConfig` CR 随后也会进入删除阶段。只有在删除所有 PVC 后，才会删除后端和 `TridentBackendConfig` 。</block>
  <block id="39d978e14d4d8c9f19589af0d4e72661" category="list-text">`Lost` ：与 `TridentBackendConfig` CR 关联的后端被意外或故意删除， `TridentBackendConfig` CR 仍引用已删除的后端。无论 `detionPolicy` 值如何，仍可删除 `TridentBackendConfig` CR 。</block>
  <block id="fdf3d4560a801cb64c255cc2790fe9cc" category="inline-link-macro">后端更新和后端删除</block>
  <block id="57867491a75119ccf33f6ed8a434ff8e" category="paragraph">在此阶段，已成功创建后端！此外，还可以处理多个操作，例如 <block ref="9f5a7b55f1a44b55d5336cefd3bf688e" category="inline-link-macro-rx"></block>。</block>
  <block id="4dca0b80562cc590644c1acfada17219" category="section-title">（可选）第 4 步：获取更多详细信息</block>
  <block id="22f66c61dd35abb0ae1840a7e38ae1b9" category="paragraph">您可以运行以下命令来获取有关后端的详细信息：</block>
  <block id="aab3a73056ee2962dff0130da0538454" category="paragraph">此外，您还可以获取 YAML/JSON 转储 `TridentBackendConfig` 。</block>
  <block id="7b7587593fc7d381339d450faa35dfa9" category="paragraph">您可以运行 `kubectl -n trident describe tbc &lt;tbc-cr-name&gt;` 命令来获取事件日志的详细信息。</block>
  <block id="6dc07da7e54d697726bb349fb693fa8b" category="inline-link-macro">请参见此处</block>
  <block id="c732962a4a01ea5f406ec66e50e98903" category="admonition">您不能使用 `tridentctl` 更新或删除包含关联的 `TridentBackendConfig` 对象的后端。要了解在 `tridentctl` 和 `TridentBackendConfig` 之间切换所涉及的步骤， <block ref="8d6bc70a41f48e3f72c3f5ea8752090b" category="inline-link-macro-rx"></block>。</block>
  <block id="483a5da192f46e3cfe8391d3ef234fc4" category="inline-link-macro">常见问题解答</block>
  <block id="b8f98ceeb9b158e8af3527fce91e9e57" category="list-text">`ontap-san-economi` ：为 NetApp ONTAP 卷配置的每个 PV 都是一个 LUN ，每个 Amazon FSX 具有可配置的 LUN 数量。</block>
  <block id="94a834f420b7c21f3a1053e6dc705a31" category="list-text">`ontap-nas-economy.` ：配置的每个 PV 都是一个 qtree ，对于 NetApp ONTAP 卷，每个 Amazon FSx 的 qtree 数量是可配置的。</block>
  <block id="e42b07a9f050ef51ea1211004a50f223" category="list-text">`ontap-nas-flexgroup` ：配置的每个 PV 都是适用于 NetApp ONTAP FlexGroup 卷的完整 Amazon FSX 。</block>
  <block id="80d13d3dbe137e8fb646193f275eceeb" category="list-text">已安装 `kubectl` 的现有 Amazon EKS 集群或自管理 Kubernetes 集群。</block>
  <block id="fe914214000491758957f04647f8da36" category="inline-link">Amazon Machine 映像</block>
  <block id="cc788b7e72b2a734dd0985bd1e0e9fe3" category="inline-link">Amazon FSX for NetApp ONTAP 文档</block>
  <block id="fd570b75466e2daca21a032e6fd5981c" category="list-text"><block ref="fd570b75466e2daca21a032e6fd5981c" category="inline-link-rx"></block></block>
  <block id="0ef79cb4bb284d3ca9c3e95489919301" category="inline-link">有关适用于 NetApp ONTAP 的 Amazon FSX 的博客文章</block>
  <block id="3b94214fe5975bca8da92b72f8926be2" category="list-text"><block ref="3b94214fe5975bca8da92b72f8926be2" category="inline-link-rx"></block></block>
  <block id="b42cbc6e68075c106b9faa27e4931091" category="doc">执行卷操作</block>
  <block id="3d4635d3cf4f27b0e87f3fe86a84744d" category="inline-link-macro">使用 CSI 拓扑</block>
  <block id="9e325272e7aed7c7bd6c28ff6fa4a90f" category="list-text"><block ref="9e325272e7aed7c7bd6c28ff6fa4a90f" category="inline-link-macro-rx"></block></block>
  <block id="e5879288a130fbd8d0b8682cfc375c4f" category="inline-link-macro">使用快照</block>
  <block id="c499fa59a1c9a0f6da195782a581f2e3" category="list-text"><block ref="c499fa59a1c9a0f6da195782a581f2e3" category="inline-link-macro-rx"></block></block>
  <block id="56661e701892ff873e44b62ffeec85e5" category="list-text"><block ref="56661e701892ff873e44b62ffeec85e5" category="inline-link-macro-rx"></block></block>
  <block id="c0417f5bbd54c5dc1c3704d6b566fcf3" category="list-text"><block ref="c0417f5bbd54c5dc1c3704d6b566fcf3" category="inline-link-macro-rx"></block></block>
  <block id="4342473e01edd2e1440b8b76076f4c9e" category="doc">在后端管理选项之间移动</block>
  <block id="a7b407f571446f9f4a30f63e8160784a" category="list-text">使用 `tridentctl` 创建的后端是否可以使用 `TridentBackendConfig` 进行管理？</block>
  <block id="3e1fc11d05c13404995af2b9fda64675" category="list-text">使用 `TridentBackendConfig` 创建的后端是否可以使用 `tridentctl` 进行管理？</block>
  <block id="d6da18e16f248df47ee8e5139ef0156a" category="paragraph">本节介绍通过创建 `TridentBackendConfig` 对象直接通过 Kubernetes 界面管理使用 `tridentctl` 创建的后端所需的步骤。</block>
  <block id="bee2ae6068ad50344ddb325737434004" category="paragraph">这适用于以下情形：</block>
  <block id="8eed1f3ae09f008e2dbfb4280a0c137c" category="list-text">使用 `tridentctl` 创建的新后端，而存在其他 `TridentBackendConfig` 对象。</block>
  <block id="95328f21e7a6deb7bb94acb3866753a6" category="list-text">继续使用 `tridentctl` 管理使用它创建的后端。</block>
  <block id="82c1dd66573aab904c86b63e2d5486ad" category="list-text">使用 `tridentctl` 创建的后端绑定到新的 `TridentBackendConfig` 对象。这样做意味着将使用 `kubectl` 而不是 `tridentctl` 来管理后端。</block>
  <block id="d12d5022b29f44c340ee55411970fe10" category="paragraph">要使用 `kubectl` 管理已有后端，您需要创建一个绑定到现有后端的 `TridentBackendConfig` 。下面简要介绍了它的工作原理：</block>
  <block id="b863de09ccfaf2861ead350dd78a9933" category="list-text">创建 `TridentBackendConfig` 对象。其中包含有关存储集群 / 服务的详细信息，并引用了上一步中创建的密钥。必须注意指定相同的配置参数（例如 `sPec.backendName` ， `sPec.storagePrefix` ， `sPec.storageDriverName` 等）。`sPec.backendName` 必须设置为现有后端的名称。</block>
  <block id="44411eb1f3a70196b442f0ed4bb62820" category="section-title">第 0 步：确定后端</block>
  <block id="2181a22b3daf7866094f9f0d79da87d0" category="paragraph">创建一个包含后端凭据的机密，如以下示例所示：</block>
  <block id="276e25c1cf06c603ba2d133ae2e39dde" category="paragraph">下一步是创建一个 `TridentBackendConfig` CR ，该 CR 将自动绑定到已有的 `ontap-nas-backend` （如本示例所示）。确保满足以下要求：</block>
  <block id="0cbfd18f16db9afdef577eeddd6a8bee" category="list-text">在 `sPec.backendName` 中定义了相同的后端名称。</block>
  <block id="f261e4f2fe82344f35f04f9b3813e425" category="list-text">配置参数与原始后端相同。</block>
  <block id="8f50f98a5b56105263e2f7ab18dc0686" category="list-text">凭据通过 Kubernetes Secret 提供，而不是以纯文本形式提供。</block>
  <block id="05c8cd2e49ae2ecaee101c9bc5619d49" category="paragraph">在这种情况下， `TridentBackendConfig` 将如下所示：</block>
  <block id="63d6f3ce15066b6232a788bb692bf721" category="paragraph">创建 `TridentBackendConfig` 后，其阶段必须为 `bound` 。它还应反映与现有后端相同的后端名称和 UUID 。</block>
  <block id="d1a75f7c76623350486029378ab164c3" category="paragraph">现在，可以使用 `tbc-ontap-nas-backend` `TridentBackendConfig` 对象对后端进行全面管理。</block>
  <block id="fcea92f3e948217919ca8b4051c2c61e" category="paragraph">`tridentctl` 可用于列出使用 `TridentBackendConfig` 创建的后端。此外，管理员还可以选择通过 `tridentctl` 来完全管理此类后端，方法是删除 `TridentBackendConfig` 并确保将 `spec.deletionPolicy` 设置为 `retain` 。</block>
  <block id="ab0c73d8e0377b2df5b783d3a76f2249" category="paragraph">例如，假设使用 `TridentBackendConfig` 创建了以下后端：</block>
  <block id="1ad97e0f65ef91102831baaa31630c76" category="admonition">请勿继续执行下一步，除非将 `deletionPolicy` 设置为 `retain` 。</block>
  <block id="8313f77478cb0df464604ae4435acce2" category="paragraph">最后一步是删除 `TridentBackendConfig` CR 。确认 `deeltionPolicy` 设置为 `retain` 后，您可以继续执行删除：</block>
  <block id="72a5926b7fb086fe87e93771f6620556" category="summary">了解如何使用 `tridentctl` 执行后端管理操作。</block>
  <block id="aeeb03235358f0f4bf3be628bed08721" category="section-title">创建后端</block>
  <block id="34746f7a1d24170eeebf5510a045d43d" category="inline-link-macro">后端配置文件</block>
  <block id="99b7232073a67a8c82304f979e3dc83f" category="paragraph">创建后 <block ref="03c0b6ed8698193668e92f56e9be3efa" category="inline-link-macro-rx"></block>下，运行以下命令：</block>
  <block id="1cabe44c722167581b1e219de6c58341" category="paragraph">如果后端创建失败，则后端配置出现问题。您可以运行以下命令来查看日志以确定发生原因：</block>
  <block id="b5f9999463782f0c36ecc89573a90a49" category="paragraph">确定并更正配置文件中的问题后，您只需再次运行 `create` 命令即可。</block>
  <block id="634b471e6af84767e06324552492b533" category="section-title">删除后端</block>
  <block id="f6816a6570e6b6097177f9adc1f4805b" category="list-text">检索后端名称：</block>
  <block id="11f4ccb46eb9afc4b1187c376b53123f" category="list-text">删除后端：</block>
  <block id="d694c8966214ec6d0068c0ab2951b65c" category="section-title">查看现有后端</block>
  <block id="a6345aca446812b9124c47b385b33f43" category="paragraph">要查看 Trident 了解的后端，请执行以下操作：</block>
  <block id="cb325bc4dded2aa4744b594966262a99" category="list-text">要获取摘要，请运行以下命令：</block>
  <block id="9f073deeee70a1418443c3b8379c5c02" category="list-text">要获取所有详细信息，请运行以下命令：</block>
  <block id="93dbcf0189ff94d39230d2e3726969ab" category="section-title">更新后端</block>
  <block id="27709162cf6b8ffced7bb1da6dd49df3" category="paragraph">创建新的后端配置文件后，运行以下命令：</block>
  <block id="4ca005817e9c882d0ef15d451a97dbf0" category="paragraph">如果后端更新失败，则后端配置出现问题或您尝试的更新无效。您可以运行以下命令来查看日志以确定发生原因：</block>
  <block id="20b5ebaa2558437206eb6d1d47577805" category="paragraph">确定并更正配置文件中的问题后，您只需再次运行 `update` 命令即可。</block>
  <block id="d47f84a3cda326babf841866ad2326ab" category="section-title">确定使用后端的存储类</block>
  <block id="02fe9d429af25b46c16a1172d735124f" category="paragraph">以下是您可以使用问题解答与 JSON 回答的问题的示例，这些问题会 `tridentctl` 后端对象的输出。此操作将使用 `JQ` 实用程序，您需要安装该实用程序。</block>
  <block id="e00013adda7b5901ea3e44ae300fd73d" category="paragraph">这也适用于使用 `TridentBackendConfig` 创建的后端。</block>
  <block id="e8b9c3a9859a62e9a58431c3b61f75d5" category="doc">管理存储类</block>
  <block id="14f4c7abe09c4481722f1fa6563f2604" category="section-title">创建存储类。</block>
  <block id="0fe0aa7b9b7529f66030afb1629507bb" category="section-title">删除存储类</block>
  <block id="4bf50148821c75f616a96daca9255e6f" category="paragraph">要从 Kubernetes 中删除存储类，请运行以下命令：</block>
  <block id="65494a0b3404ce637afd88bcb7c82998" category="paragraph">` &lt; 存储类 &gt;` 应替换为您的存储类。</block>
  <block id="e606165355271961ba07945766fbf83a" category="section-title">查看现有存储类</block>
  <block id="7c237bc6c124137d25df2dec1cb3e528" category="list-text">要查看现有 Kubernetes 存储类，请运行以下命令：</block>
  <block id="4aae22fbb9c0d354d0a9c15c6c126d89" category="list-text">要查看 Kubernetes 存储类详细信息，请运行以下命令：</block>
  <block id="ce32eb748bd7452bd6ee6d1d7ad6d3a7" category="section-title">设置默认存储类</block>
  <block id="f30a1542c01c3c493f3c01c88dfe5fcd" category="paragraph">Kubernetes 1.6 增加了设置默认存储类的功能。如果用户未在永久性卷声明（ PVC ）中指定永久性卷，则此存储类将用于配置永久性卷。</block>
  <block id="7c435ae4763642458286cb691812ea55" category="list-text">通过在存储类定义中将标注 `storageclass.Kubernetes 。 io/is-default-class` 设置为 true 来定义默认存储类。根据规范，任何其他值或标注不存在均视为 false 。</block>
  <block id="61fd76f55d29aaceb4a6ee09a318dc45" category="list-text">您可以使用以下命令将现有存储类配置为默认存储类：</block>
  <block id="800477137444bec636483de85335cbb5" category="list-text">同样，您也可以使用以下命令删除默认存储类标注：</block>
  <block id="2d2f31c3012657fd7b38b41312d1a0b8" category="paragraph">Trident 安装程序包中也有包含此标注的示例。</block>
  <block id="6c36cb9c072dc4cb9e163c44568f6a91" category="section-title">确定存储类的后端</block>
  <block id="4abea6bac3b0b48d11dd8dcd02a11bf9" category="inline-link">CSI 拓扑功能</block>
  <block id="592af423a2f6a51f57c639ec7f7b245e" category="admonition">了解有关 CSI 拓扑功能的更多信息<block ref="ff042e7f24bd2adcec09d78466034177" category="inline-link-rx"></block>。</block>
  <block id="bbdcaf9b704dc7a7cf73e6000101b65a" category="paragraph">Kubernetes 提供了两种唯一的卷绑定模式：</block>
  <block id="5fca24470d51aa51b0fb2d0f27c25c68" category="list-text">如果将 `VolumeBindingMode` 设置为 `WaitForFirstConsuming` ，则为 PVC 创建和绑定永久性卷的操作将延迟，直到计划并创建使用 PVC 的 Pod 为止。这样，卷就会根据拓扑要求强制实施的计划限制来创建。</block>
  <block id="3bbc2da928dcf77a048cdd745fe7d208" category="admonition">`WaitForFirstConsumer"` 绑定模式不需要拓扑标签。此功能可独立于 CSI 拓扑功能使用。</block>
  <block id="edff21c44983aaa85506a3dfe467c494" category="paragraph">要使用 CSI 拓扑，您需要满足以下条件：</block>
  <block id="0bd58c9826639ac2db106c3b277a7e0f" category="section-title">第 1 步：创建可感知拓扑的后端</block>
  <block id="217d95247b26701da7fd823884d84723" category="paragraph">您也可以为每个存储池定义 `supportedTopologies` 。请参见以下示例：</block>
  <block id="c6c80256ac468b3d88d7b62d8753f192" category="paragraph">在此示例中， `reGion` 和 `zone` 标签表示存储池的位置。`topology.Kubernees.io/zone` 和 `topology.Kubernees.io/zone` 指定存储池的使用位置。</block>
  <block id="54e204e8e05b6eb24d965741eb977e69" category="section-title">第 2 步：定义可识别拓扑的 StorageClasses</block>
  <block id="090f70d385b4a21aa6c8f2a0ca558616" category="paragraph">根据为集群中的节点提供的拓扑标签，可以将 StorageClasses 定义为包含拓扑信息。这将确定用作 PVC 请求候选对象的存储池，以及可使用 Trident 配置的卷的节点子集。</block>
  <block id="ecb383148a1bc974cba3ac735a79f4c6" category="paragraph">请参见以下示例：</block>
  <block id="df340fb31051c975afb3518dfd32e07c" category="section-title">第 3 步：创建和使用 PVC</block>
  <block id="f98be29d352e7c38a6502e76bbfaf34c" category="paragraph">创建 StorageClass 并将其映射到后端后，您现在可以创建 PVC 。</block>
  <block id="c4b17c8733f9f36fdc682242d2b64ab2" category="paragraph">请参见以下示例 `sPec` ：</block>
  <block id="427e01a8fca484c85a1e8e3a672b999a" category="paragraph">使用此清单创建 PVC 将导致以下结果：</block>
  <block id="e65f170821e3417d48579a28989a9260" category="paragraph">要使 Trident 创建卷并将其绑定到 PVC ，请在 Pod 中使用 PVC 。请参见以下示例：</block>
  <block id="9b8ff27bceb4601d1f866c4cf39fe449" category="paragraph">此 podSpec 指示 Kubernetes 在 `us-East1` 区域中的节点上计划 Pod ，并从 `us-East1-a` 或 `us-East1-b` 区域中的任何节点中进行选择。</block>
  <block id="c93345596f9f82deea04d17ef8c6ca89" category="paragraph">请参见以下输出：</block>
  <block id="476950aea923438779c9544953093cb9" category="paragraph">可以使用 `tridentctl backend update` 更新原有后端，以包含 `supportedTopologies` 列表。这不会影响已配置的卷，并且仅用于后续的 PVC 。</block>
  <block id="ded10f93b9e4453980b7009035c63418" category="inline-link">管理容器的资源</block>
  <block id="47ea3356a13b3f6644e6c05450e9d5e1" category="list-text"><block ref="47ea3356a13b3f6644e6c05450e9d5e1" category="inline-link-rx"></block></block>
  <block id="6370f866cf64618c026027da41bd248e" category="inline-link">节点选择器</block>
  <block id="2a4ad9fc807789134426a1b2babc5733" category="list-text"><block ref="2a4ad9fc807789134426a1b2babc5733" category="inline-link-rx"></block></block>
  <block id="873bf2b9b61a741ce5b7326a3a053489" category="inline-link">关联性和反关联性</block>
  <block id="ec5df0a2adb621359563958138462e34" category="list-text"><block ref="ec5df0a2adb621359563958138462e34" category="inline-link-rx"></block></block>
  <block id="e1e08e40036f927a0e660c22aa837f88" category="inline-link">损害和公差</block>
  <block id="66b1e0aa9cd6e46c0b85fdf56a15154a" category="list-text"><block ref="66b1e0aa9cd6e46c0b85fdf56a15154a" category="inline-link-rx"></block></block>
  <block id="2941c38dbb7c39c325787067c0540247" category="summary">了解如何使用 `kubectl` 执行后端管理操作。</block>
  <block id="265ab4809f08d248e5045a8638ac7afa" category="paragraph">您也可以运行 `tridentctl get backend -n trident` 或 `tridentctl get backend -o YAML -n trident` 来获取存在的所有后端的列表。此列表还将包括使用 `tridentctl` 创建的后端。</block>
  <block id="93700a3ea9dc6d858638cd66cd2f2bfa" category="paragraph">更新后端可能有多种原因：</block>
  <block id="d38f034e9aa082af3ec19c23caff4b0f" category="paragraph">如果后端更新失败，则后端仍会保持在其上次已知配置中。您可以通过运行 `kubectl get tbc &lt;tbc-name&gt; -o yaml -n trident` 或 `kubectl describe tbc &lt;tbc-name&gt; -n trident` 来查看日志以确定发生原因。</block>
  <block id="5878b59fb3a8430928026b63b5ca336f" category="paragraph">确定并更正配置文件中的问题后，您可以重新运行 update 命令。</block>
  <block id="64dbac0ca36d9b1f6a8cf1e8a0123261" category="list-text">检查后端使用情况信息，并了解在后端配置的卷数量以及占用的空间量等。</block>
  <block id="7f6516030964b624d9c71fd9ec7f83dd" category="list-text">维护可用后端配置的卷数量的映射关系。</block>
  <block id="efe0d75090a22534acabc936f8669994" category="admonition">默认情况下， Trident 的指标会显示在 `/metrics` 端点的目标端口` 8001 ` 上。安装 Trident 时，这些指标默认为 * 已启用 * 。</block>
  <block id="eb8bfd69bb88378a6f4d987811890ce6" category="inline-link">容器化 Prometheus 部署</block>
  <block id="42ae2e91a939ffa9bbda53c10bf5f89f" category="inline-link">原生应用程序</block>
  <block id="050899631250104f17d24b27cc8a12e5" category="list-text">一个 Prometheus 实例。可以是<block ref="bd5b9e4bd7b88b90afb221fb760a777c" category="inline-link-rx"></block> 或者，您也可以选择将 Prometheus 作为运行<block ref="3f1d5beaea78c0fd8cb397fbeb1c88bd" category="inline-link-rx"></block>。</block>
  <block id="68276ca40dfbfd36de911402152fa452" category="section-title">第 1 步：定义 Prometheus 目标</block>
  <block id="c33638e0de87536b08eeb94264671d0f" category="section-title">第 2 步：创建 Prometheus ServiceMonitor</block>
  <block id="81a21a88b42cd5c83d149a080a627bad" category="paragraph">要使用 Trident 指标，您应创建一个 Prometheus ServiceMonitor ，该监控器可监控 `trident CSI` 服务并侦听 `mtrigics` 端口。示例 ServiceMonitor 如下所示：</block>
  <block id="1db2022a8a8de5d612eda8e3be0e1065" category="section-title">第 3 步：使用 PromQL 查询 Trident 指标</block>
  <block id="f5142e19a3b1edf809fce9d3b6aefc05" category="paragraph">PromQL 非常适合创建返回时间序列或表格数据的表达式。</block>
  <block id="8c6fb1be2521fd16337c11c626672678" category="paragraph">您可以使用以下 PromQL 查询：</block>
  <block id="b214fd0009b3929347f097bd843f0bfd" category="section-title">获取 Trident 运行状况信息</block>
  <block id="f160a52d617adf6e6c5d379a9b8bca89" category="list-text">卷大小 * 平均值 *</block>
  <block id="eb978bfe01ec0c72ad231f3953e304a2" category="list-text">* 每个后端配置的卷总空间 *</block>
  <block id="5f735ae12eafbe476178928f4645475b" category="section-title">获取单个卷的使用情况</block>
  <block id="ee0898e9f0caa503f3eaa39c919f4c53" category="admonition">只有在同时收集 kubelet 指标时，才会启用此功能。</block>
  <block id="0bc301d2423b2ffaa38a5e275e4ec6f9" category="list-text">* 每个卷的已用空间百分比 *</block>
  <block id="ca0f9a86ca33f1d6baa9051bd7f4ed21" category="inline-link">隐私政策</block>
  <block id="5224919a4ae5ccf610fb0ee74e4e7a94" category="inline-link">Trident AutoSupport</block>
  <block id="53084cad3d11df800502598c11e2d10b" category="inline-link">EULA</block>
  <block id="d2ec86f126f845e79aff07e70bf89472" category="list-text">AutoSupport 消息将发送到 NetApp 的 AutoSupport 端点。如果使用私有注册表存储容器映像，则可以使用 ` -image-regRegistry` 标志。</block>
  <block id="86c5a11fba83815412aec79f67f2d276" category="list-text">您也可以通过生成安装 YAML 文件来配置代理 URL 。为此，可以使用 `tridentctl install -generate-custom-yaml` 创建 YAML 文件，并在 `trident dedeployment.yaml` 中为 `trident autosupport` 容器添加 ` -proxy-url` 参数。</block>
  <block id="8ec47dab227d183e0d3ad0cd529d289b" category="paragraph">要 ` 报告指标，您应生成自定义 YAML （使用` -generate-custom-yaml ` 标志）并对其进行编辑，以删除为 `trident 主` 容器调用的` -metrics 标志。</block>
  <block id="28b0abcecaf7a63edb46e4e137337018" category="doc">配置 Azure NetApp Files 后端</block>
  <block id="07e7004c50a67a3e4e366b4ca1c28e3d" category="paragraph">配置和使用<block ref="24a785881ff1cdf191a2239811dc9597" category="inline-link-rx"></block> 后端，您需要满足以下要求：</block>
  <block id="66d640a9a050b05e6a914cbcd88a1e2e" category="list-text">`ssubscriptionID` 来自启用了 Azure NetApp Files 的 Azure 订阅。</block>
  <block id="b12fb354025b3dfa01277964eb72c060" category="inline-link">应用程序注册</block>
  <block id="f494e4df0fff53e809d6563f8ec1782f" category="inline-link">委派子网</block>
  <block id="3e566c45584d66d2ab94c2108f7c3488" category="cell">"Azure-netapp-files"</block>
  <block id="9dd18f393b35bf22098cf53e9c1c7fa6" category="cell">驱动程序名称 + "_" + 随机字符</block>
  <block id="665120e71659a6a32f990a3181688d1b" category="cell">`ssubscriptionID` 。</block>
  <block id="e07778d10cef90430253876cba7157e4" category="cell">`租户 ID` 。</block>
  <block id="949ba1045db0d48bd189044e672d8097" category="cell">`客户端 ID` 。</block>
  <block id="56ef18e84ab36c2bdc4546e6a2756673" category="cell">`clientSecret` 。</block>
  <block id="1c65f12b4d30114593cc01384938cb5f" category="cell">`S标准` ， `高级` 或 `超级` 之一</block>
  <block id="b21b08bb55acd409e40e9b45edd3bb34" category="cell">"" （随机）</block>
  <block id="fc7dd5b65d21ee7272a067c9404a8498" category="cell">`位置`</block>
  <block id="32ef1af5ccda7c2f6d85e55f5034f105" category="cell">`virtualNetwork`</block>
  <block id="10afd0959cfa4a53bce9c8d395c40c48" category="cell">具有委派子网的虚拟网络的名称</block>
  <block id="ec045173f4df65e5e8951c3ca9579945" category="cell">`ssubnet`</block>
  <block id="0b8deda0ecc5080e8c0ed0b475e983ba" category="cell">委派给 `Microsoft.Netapp/volumes` 的子网的名称</block>
  <block id="e5ac299cc3b14e1fac29518569ca9bb1" category="cell">新卷的默认大小</block>
  <block id="a83f4a534ccef7ac1d209fb0015cd907" category="paragraph">此后端配置进一步将卷放置范围缩小为一个子网，并修改了某些卷配置默认值。</block>
  <block id="a0f3a965c12688befda99da850903dcb" category="cell">`autosExportPolicy`</block>
  <block id="b4ad0dff08149092bc3e4b16572af575" category="cell">`autosExportCIDR`</block>
  <block id="07f6b23cad3d6da54012935ff972affe" category="cell">`qtreesPerFlexvol`</block>
  <block id="a13306f726fdf72d2d992a7ebdc63b1b" category="cell">每个 FlexVol 的最大 qtree 数，必须在 50 ， 300 范围内</block>
  <block id="3e9a232d025270ed6767c385b8291871" category="cell">新卷的模式</block>
  <block id="c1a0e97f953c948568aed6c134fc9711" category="cell">要使用的导出策略</block>
  <block id="86ec808b80973d24eadfc617926f534e" category="paragraph">计算方法如下：</block>
  <block id="f35c0fe4b6581c16866c964cef229bfa" category="admonition">如果在采用 Trident 的 NetApp ONTAP 上使用 Amazon FSx ，建议为 LIF 指定 DNS 名称，而不是 IP 地址。</block>
  <block id="87dc0337d3ded2211d9b01c32e22d90d" category="doc">配置后端</block>
  <block id="2acbb5dd492d792d00383b0c76ade4ad" category="list-text"><block ref="2acbb5dd492d792d00383b0c76ade4ad" category="inline-link-macro-rx"></block></block>
  <block id="252e63ff646a0204671ca04a26b88e06" category="inline-link-macro">配置适用于 Google 云平台的 Cloud Volumes Service 后端</block>
  <block id="c00b6e370d4496e06d2135275a992af5" category="list-text"><block ref="c00b6e370d4496e06d2135275a992af5" category="inline-link-macro-rx"></block></block>
  <block id="b1064b6f7a5906eac23601dc24ba95a8" category="list-text"><block ref="b1064b6f7a5906eac23601dc24ba95a8" category="inline-link-macro-rx"></block></block>
  <block id="24ca391029d6df294c5d5b8f1fe5b4eb" category="summary">了解如何使用 ONTAP NAS 驱动程序配置 ONTAP 后端。</block>
  <block id="e4c4d344a524d21b898e4d04b6539aa7" category="admonition">安装程序 zip 文件中提供的 `tridentctl` 二进制文件是经过测试且受支持的版本。请注意， zip 文件的 ` 或 Extras` 部分中提供的 `macos` 二进制文件未经过测试或不受支持。</block>
  <block id="41cf959adc98386b54829d71a6ed5d37" category="section-title">修复</block>
  <block id="a6e7aa999ba654c6844672ae59f5137a" category="list-text">修复了问题描述，其中无法将 XFS 卷的克隆挂载到与源卷相同的节点上（ GitHub 问题描述 514 ）。</block>
  <block id="852acc81ea6fa7363b73c5313002de83" category="list-text">与 Kubernetes 相关的修复程序：</block>
  <block id="f94cc5159119c43751041256941deb2c" category="list-text">使用 `ontap-NAS` 和 `ontap-nas-flexgroup` 驱动程序创建快照时，将卷的已用空间返回为最小还原大小（ GitHub 问题描述 645 ）。</block>
  <block id="742ce2e3c9c8496323bd1176af2838a4" category="list-text">修复了问题描述，其中 `无法扩展文件系统` 在调整卷大小后记录了错误（ GitHub 问题描述 560 ）。</block>
  <block id="9a445ecbad9af70a94bd7558ba95e059" category="list-text">修复了 POD 可能停留在 `正在终止` 状态的问题描述（ GitHub 问题描述 572 ）。</block>
  <block id="4f81c320a621b8c9d81c7334f2cffc71" category="list-text">修复了 `ontap-san-economy-lun` FlexVol 可能已满快照 LUN 的情况（ GitHub 问题描述 533 ）。</block>
  <block id="169c3be63dd22b315ed7884e246338de" category="list-text">使用不同映像修复了自定义 YAML 安装程序问题描述（ GitHub 问题描述 613" ）。</block>
  <block id="1077a1a91a96498c2f56bc630e632eee" category="list-text">固定快照大小计算（ GitHub 问题描述 611 ）。</block>
  <block id="27b76ffa775f907a1fd51f21a669551b" category="list-text">修复了 Trident 操作员在无法访问 Kubernetes API 服务器时停止协调的问题（ GitHub 问题描述 599 ）。</block>
  <block id="c1748037d10cffabb8e95e4ccf77c613" category="section-title">增强功能</block>
  <block id="1f9e922b6eff6cb06fca1ed9137eed38" category="list-text">为 GCP-CVS 性能卷增加了对 `unixPermissions` 选项的支持。</block>
  <block id="294b850a76a040c20913e76c2fe6589a" category="list-text">增加了对 GCP 中 600 GiB 到 1 TiB 范围内的扩展优化 CVS 卷的支持。</block>
  <block id="0333eb54465646b87754facff75fdb5f" category="list-text">Kubernetes 相关增强功能：</block>
  <block id="c32aa411caa1ffd0e30a271f5be834d9" category="list-text">增加了对 Kubernetes 1.22 的支持。</block>
  <block id="fa1fd8841173fa7ccde5059fb7c2f903" category="list-text">已启用 Trident 操作员和 Helm 图表以使用 Kubernetes 1.22 （ GitHub 问题描述 628 ）。</block>
  <block id="dbaa551f190105e514f7816811f4b397" category="list-text">已将操作员映像添加到 `tridentctl` images 命令（ GitHub 问题描述 570 ）中。</block>
  <block id="be575f1ff204f2800114965a5c0d8575" category="section-title">实验增强功能</block>
  <block id="29ddf941d9825cc9283521ee90468595" category="list-text">在 `ontap-san` 驱动程序中增加了对卷复制的支持。</block>
  <block id="e2f2b85987da5e2397c1e342a6fd9e28" category="list-text">增加了对 `ontap-nas-flexgroup` ， `ontap-san` 和 `ontap-nas-economy` 驱动程序的 * 技术预览 * REST 支持。</block>
  <block id="95dc0391ce7b396d7dd5622284e8fc3e" category="section-title">已知问题</block>
  <block id="64a8f71bee95a6635e88bce00f1a2d3c" category="paragraph">已知问题用于确定可能会阻止您成功使用本产品的问题。</block>
  <block id="6d791d3b45515fd8619e489b938f39e8" category="inline-link">挂载选项</block>
  <block id="0821431aba133adbfa7fa0ca1781eedd" category="list-text">ONTAP 不能同时配置多个 FlexGroup ，除非聚合集对于每个配置请求是唯一的。</block>
  <block id="ba09ee47d11962c1ccd13d7e1f10e6c5" category="doc">文档的早期版本</block>
  <block id="89bcbd8e4ba49b7310e9fa748e878c4b" category="inline-link-macro">部署的前提条件</block>
  <block id="88f0ab229fa9d759d74fcf6ab7cc17b1" category="section-title">Docker 托管插件方法（ 1.13/17.03 及更高版本）</block>
  <block id="135b308ed83c53f1516b7c754566d1c4" category="admonition-title">开始之前</block>
  <block id="7bf1ee8f4e093050c1cdf1842931af7d" category="list-text">停止所有正在运行的实例：</block>
  <block id="47b9ec5c8c4439980c63f4188bad5324" category="list-text">重新启动 Docker 。</block>
  <block id="5311ac4d72d5c91dcaa39b896d3b8027" category="list-text">确保已安装 Docker 引擎 17.03 （新版本 1.13 ）或更高版本。</block>
  <block id="07d6db5e99a0aa19fe76f15efed30ecf" category="inline-link">安装或更新安装</block>
  <block id="2c3bc9d0632e0cccc05fdd3c42467df9" category="paragraph">如果您的版本已过期，<block ref="ddebe10ca17c0276898872fa2632e8fb" category="inline-link-rx"></block>。</block>
  <block id="48afbcf494fc19ee409f5aff48ae32c3" category="list-text">创建配置文件并按如下所示指定选项：</block>
  <block id="9314e9bcd24c80b255fc3e9e697a2ada" category="list-text">`config` ：默认文件名为 `config.json` ，但您可以使用所选的任何名称，方法是使用文件名指定 `config` 选项。此配置文件必须位于主机系统上的 ` /etc/netappdvp` 目录中。</block>
  <block id="8798dc2a3b5e61873054923c9f170ac7" category="list-text">`log-level` ：指定日志记录级别（ `debug` ， `info` ， `warn` ， `error` ， `fal` ）。默认值为 `info` 。</block>
  <block id="45ed67026a1141006588fcc698646141" category="list-text">`debug` ：指定是否启用调试日志记录。默认值为 false 。如果为 true ，则覆盖日志级别。</block>
  <block id="3bed6f89999b483af7f55024d9e7c02a" category="list-text">为配置文件创建一个位置：</block>
  <block id="28156615c51d4bad2ee47d0a9f43f404" category="list-text">创建配置文件：</block>
  <block id="a9c521f25a3bacb94ad1dd4705b3585f" category="list-text">创建名为 "firstVolume" 的卷：</block>
  <block id="4fbca4f67cbe96bc7d7a16691d2912c2" category="list-text">在容器启动时创建默认卷：</block>
  <block id="b8e88709dbc4f2f80a96f53f83862704" category="list-text">删除卷 "firstVolume" ：</block>
  <block id="0e68ac1d84bfedf203365a9fb37db9ed" category="section-title">传统方法（ 1.12 或更早版本）</block>
  <block id="2c1107bda4c1ae7904ab1835c35973b7" category="list-text">确保您已安装 Docker 版本 1.10 或更高版本。</block>
  <block id="b6fdfa2eab3e357687eba5ddec2bea0c" category="paragraph">如果您的版本已过期，请更新您的安装。</block>
  <block id="45c61654258cfd16ceec15df7df02138" category="inline-link">按照适用于您的分发版本的说明进行操作</block>
  <block id="07dff22faeb910f375341cfcbd4899fd" category="paragraph">或<block ref="9ce989a7f7f995616a47f5dd291ed229" category="inline-link-rx"></block>。</block>
  <block id="588d2fe1c60271cde75dbeba32e0b25b" category="list-text">确保已为您的系统配置 NFS 和 / 或 iSCSI 。</block>
  <block id="03fe5b0d58270efa87041677cac72ad7" category="list-text">安装和配置 NetApp Docker 卷插件：</block>
  <block id="f45f5a64dae951d3e37c9bd382201b06" category="list-text">下载并解压缩应用程序：</block>
  <block id="b255d9e06a4ca8e9f5bc31c9198426ad" category="list-text">移动到托箱路径中的某个位置：</block>
  <block id="e3dec3f86b9a3b1be209ab63855ce432" category="list-text">创建卷</block>
  <block id="5ff2e3e853922fdb84ef21b85ffdac2e" category="list-text">启动容器时配置 Docker 卷：</block>
  <block id="8f6a91f5f21d0478e3fd89095fc28ab9" category="list-text">删除 Docker 卷：</block>
  <block id="5b51496da86e5a2073e0c618390c3d2a" category="list-text">将文件复制到正确的位置。</block>
  <block id="44103de0a164f687d305ad91e919d8ee" category="paragraph">如果正在运行多个实例，则单元文件应使用唯一名称。</block>
  <block id="3223aadc84a3ccb4a3473ba01c895184" category="list-text">编辑文件，更改问题描述（第 2 行）以匹配驱动程序名称和配置文件路径（第 9 行）以反映您的环境。</block>
  <block id="1edae3931401a32d7dd7dd6e0a2ad563" category="list-text">重新加载 systemd 以载入更改：</block>
  <block id="db38a93e27eba57d507611d002ad612f" category="list-text">启用服务。</block>
  <block id="c7e0a4deeebe264aa7d5f7f3ca3ef77f" category="paragraph">根据您在 ` /usr/lib/systemd/system` 目录中为文件命名的内容，此名称会有所不同。</block>
  <block id="baa04490a79e9e8de7fa4cd44e2c6fbb" category="list-text">启动服务。</block>
  <block id="93c7574cf83c1f01b04891cf2d826cea" category="list-text">查看状态。</block>
  <block id="f4f15418284ae7a01b27fccc1af0463a" category="admonition">每当您修改单元文件时，请运行 `systemctl daemon-reload` 命令，使其了解所做的更改。</block>
  <block id="782bd8949cb40c80fd3f3126eccab35a" category="doc">部署的前提条件</block>
  <block id="b4851e92b19af0c5c82447fc0937709d" category="inline-link-macro">要求</block>
  <block id="d46ecc35447a8c17ef014ff6daf07bba" category="inline-link">安装或更新它</block>
  <block id="1035fa0ac2c3ed19f6ba56cafe7e121f" category="list-text">验证您是否安装了受支持的 Docker 版本。如果您的 Docker 版本已过时，<block ref="0b011811ae105895ca4da9769d7e6f99" category="inline-link-rx"></block>。</block>
  <block id="0e9e734e557a02db30a20e5ac259cfb9" category="summary">每个存储驱动程序都有一组不同的选项，您可以在创建卷时指定这些选项来自定义结果。有关适用于您配置的存储系统的选项，请参见以下内容。</block>
  <block id="11e1b165c1d718d825f4bb9aaf0b884e" category="doc">驱动程序专用的卷选项</block>
  <block id="bca0712c590c8d3c228bf1044aed730b" category="paragraph">在卷创建操作期间使用这些选项非常简单。在命令行界面操作期间，使用 ` -o` 运算符提供选项和值。这些参数将覆盖 JSON 配置文件中的任何等效值。</block>
  <block id="6021d91bdededf94b8ae37c30e820118" category="section-title">ONTAP 卷选项</block>
  <block id="054b4f3ea543c990f6b125f41af6ebf7" category="cell">选项</block>
  <block id="d3a07c97b6050b305c7dda0aea1657be" category="paragraph">卷的大小默认为 1 GiB 。</block>
  <block id="69e8c7b4f73d39cea9948875813f7ddd" category="paragraph">精简或厚配置卷，默认为精简。有效值为 `none` （精简配置）和 `volume` （厚配置）。</block>
  <block id="b8a0fde33bd7662b7b9cb4158f04ef52" category="paragraph">此操作会将快照预留设置为所需百分比。默认值为 no 值，这意味着如果您选择了 snapshotPolicy ， ONTAP 将选择 snapshotReserve （通常为 5% ）；如果 snapshotPolicy 为 none ，则选择 0% 。您可以在配置文件中为所有 ONTAP 后端设置默认 snapshotReserve 值，并可将其用作除 ontap-nas-economy. 以外的所有 ONTAP 后端的卷创建选项。</block>
  <block id="cdaf246fba737b75127faa65456baa30" category="paragraph">设置要用于卷的分层策略。这将决定数据在变为非活动状态（冷）时是否移至云层。</block>
  <block id="1c46d85ab16f6b373409ad15260b1b0a" category="paragraph">以下附加选项适用于 NFS * 仅 * ：</block>
  <block id="ce46e8f3fc6eaddbe03115e0d62090ac" category="cell">`unixPermissions`</block>
  <block id="b145a4acc7a577d843f538580013776b" category="paragraph">此选项用于控制为卷本身设置的权限。默认情况下，权限将设置为 `` -rwrxr-xr-x` ，或以数字表示法 0755 表示，并且 `root` 将为所有者。文本或数字格式均可使用。</block>
  <block id="e59001176f4360988f5d774a8405b4b9" category="cell">`exportPolicy`</block>
  <block id="700d608597316c75fc869190f51cff49" category="paragraph">设置要用于卷的导出策略。默认值为 `default` 。</block>
  <block id="6b068a846d408b1d9ccd2c7220326b9d" category="paragraph">设置用于访问卷的安全模式。默认值为 `UNIX` 。有效值为 `UNIX` 和 `mi 已加传真` 。</block>
  <block id="842aac52866a44b40a5733ce352cf6df" category="paragraph">以下附加选项适用于 iSCSI * 仅 * ：</block>
  <block id="3184b1a9846944fabb00496c4b6b613a" category="cell">`fileSystemType`</block>
  <block id="56efcdcb9168adcb146b4d86bf55e99d" category="cell">设置用于格式化 iSCSI 卷的文件系统。默认值为 `ext4` 。有效值为 `ext3` ， `ext4` 和 `xfs` 。</block>
  <block id="ff7c0fcd6a31e735a61c001f75426961" category="section-title">示例</block>
  <block id="9e6d454a094b92b0132e48d2369debf5" category="paragraph">请参见以下示例：</block>
  <block id="be1e1c94a5fc3bb66c2ae9425eeefbdb" category="list-text">创建 10 GiB 卷：</block>
  <block id="a6490f19f59ecd8e4ed8634990ea366c" category="list-text">创建具有快照的 100GiB 卷：</block>
  <block id="297d0d2fcc555e5037c8d251daf5a620" category="list-text">创建启用了 setuid 位的卷：</block>
  <block id="6e31a0481f4f7e423abcde0bf31025c8" category="paragraph">最小卷大小为 20MiB 。</block>
  <block id="8c05fd71822bf85c290cef86db959f68" category="list-text">创建无快照策略且无快照预留的卷：</block>
  <block id="d15d662af6e4417b0b7c134a84ed577c" category="list-text">创建一个无快照策略且自定义快照预留为 10% 的卷：</block>
  <block id="52a56a468f11c3298931c8e32c938e15" category="list-text">创建具有快照策略和 10% 自定义快照预留的卷：</block>
  <block id="f6f813eaaff2b296a27b6bf051485d2b" category="section-title">Element 软件卷选项</block>
  <block id="a514753df071ac540af065b659d1c65c" category="paragraph">Element 软件选项会显示与卷关联的大小和服务质量（ QoS ）策略。创建卷时，将使用 ` -o type=service_level` 命名空间指定与其关联的 QoS 策略。</block>
  <block id="f201e088f13d93e3d12b3c0ef78dece3" category="paragraph">使用 Element 驱动程序定义 QoS 服务级别的第一步是至少创建一种类型，并指定与配置文件中的名称关联的最小，最大和突发 IOPS 。</block>
  <block id="5cb7e4a4b6a51af0b5b09cb230b83422" category="paragraph">其他 Element 软件卷创建选项包括：</block>
  <block id="8730c4572b866ffc01a4aefebc896555" category="paragraph">卷的大小，默认为 1GiB 或配置条目 ... " 默认值 " ： ｛ "size" ： "5c" ｝ 。</block>
  <block id="d52146098b8ecd83b888289a86e26d19" category="cell">`块大小`</block>
  <block id="348ef18ccca06aa29547bd9ad87beebe" category="paragraph">使用 512 或 4096 ，默认为 512 或配置条目 DefaultBlockSize 。</block>
  <block id="1daf1c12549d6d3ae75c4d8d5f59d532" category="paragraph">请参见以下包含 QoS 定义的示例配置文件：</block>
  <block id="7afe0c73e341cee7c90b4d4dda4600d9" category="paragraph">在上述配置中，我们有三个策略定义：铜牌，银牌和金牌。这些名称是任意的。</block>
  <block id="cb5b68dacb07bd02a5152bf4ad1de8c6" category="list-text">创建 10 GiB 黄金卷：</block>
  <block id="89014c611c13195dc852587ef9d2bb16" category="list-text">创建 100GiB 铜牌卷：</block>
  <block id="feabbbf9b5afb31194daf0d8e3ff75dc" category="doc">使用卷</block>
  <block id="dc88dce8ec264777b2f90ec0af744f43" category="section-title">创建卷</block>
  <block id="a32b09b1335e0afbb640a9412690680d" category="list-text">使用默认名称创建包含驱动程序的卷：</block>
  <block id="93da65a9fd0004d9477aeac024e08e15" category="inline-link-macro">选项</block>
  <block id="593e5c95e1adc19e8d81719c16b57bc1" category="admonition">如果未指定任何 <block ref="3a0a40f90bfa29e0eb23418c553e5ef5" category="inline-link-macro-rx"></block>，将使用驱动程序的默认值。</block>
  <block id="1e1e2461d5dfd51f1ebd0eadcba142f4" category="list-text">覆盖默认卷大小。要使用驱动程序创建 20GiB 卷，请参见以下示例：</block>
  <block id="5149eec9d959a54cf392efaa710541d1" category="admonition">卷大小以字符串表示，该字符串包含一个包含可选单元的整数值（例如： 10 G ， 20 GB ， 3 TiB ）。如果未指定单位，则默认值为 G大小单位可以表示为 2 的幂（ B ， KiB ， MIB ， GiB ， TiB ）或 10 的幂（ B ， KB ， MB ， GB ， TB ）。速率单位使用 2 的电流（ G = GiB ， T = TiB ，…）。</block>
  <block id="9bc129eac7adf7ea5d8ed1c021fab2dc" category="section-title">删除卷</block>
  <block id="281a0f40363a276c6ec125244c784112" category="list-text">像删除任何其他 Docker 卷一样删除此卷：</block>
  <block id="7959e3701f7a7fba7713c7530d496324" category="admonition">使用 `solidfire-san` 驱动程序时，上述示例将删除并清除卷。</block>
  <block id="d50044469c0bf9ab38eff9cf7243fb25" category="section-title">克隆卷</block>
  <block id="9374b766b9dd78063440afd69afabf38" category="list-text">检查卷以枚举快照：</block>
  <block id="2747096689037792fa87de7a0e8440e2" category="list-text">从现有卷创建新卷。这将导致创建新快照：</block>
  <block id="31d9b5ed201aa44dbeae6d17d38c0c6f" category="list-text">从卷上的现有快照创建新卷。此操作不会创建新快照：</block>
  <block id="516b30a46da41c6969cb7249d6567905" category="section-title">访问外部创建的卷</block>
  <block id="4cfa22b281cbd36e1a275d61ec23a9b4" category="summary">您可以收集日志以帮助进行故障排除。收集日志的方法因运行 Docker 插件的方式而异。</block>
  <block id="fe1786b49549e8e06a89b9c57d7fc514" category="doc">收集日志</block>
  <block id="c28722abec5c1daefa02916119bbff91" category="list-text">要启用调试日志记录，请安装启用了调试日志记录的插件：</block>
  <block id="b142025dd533fb27bf7df1a93c55e311" category="paragraph">或者，在已安装插件的情况下启用调试日志记录：</block>
  <block id="2aa0797ce5da04d1c6f027c9b3276483" category="section-title">一般故障排除提示</block>
  <block id="94d799ff06bdb0aedb7b64151dac73d7" category="list-text">新用户遇到的最常见问题是配置不当，导致插件无法初始化。如果发生这种情况，在尝试安装或启用插件时，您可能会看到如下消息：</block>
  <block id="fe6b4529e706ebc0f7e3668d3230d029" category="paragraph">`守护进程的错误响应：拨打 unix /run/docker/plugins/&lt;id&gt;/netapp.sock ： connect ： no such file or directory`</block>
  <block id="3d924bd43304301ed127cbbd303a4fa6" category="paragraph">这意味着插件无法启动。幸运的是，该插件已构建了全面的日志记录功能，可以帮助您诊断可能遇到的大多数问题。</block>
  <block id="79c820c2d64495c47651e58e73f97294" category="list-text">如果在将 PV 挂载到容器时出现问题，请确保 `rpcbind` 已安装并正在运行。对主机操作系统使用所需的软件包管理器，并检查 `rpcbind` 是否正在运行。您可以通过运行 `systemctl status rpcbind` 或其等效项来检查 rpcbind 服务的状态。</block>
  <block id="34e1f7eb303c0a150cd440611b3b5e24" category="doc">存储配置选项</block>
  <block id="51f834b47bcd78a0f4f40fd8ca40446f" category="section-title">全局配置选项</block>
  <block id="63b276a6c28274ed5e553d4ce3fe7eb1" category="paragraph">配置文件版本号</block>
  <block id="ac5eb8fcbd1ed9c85a98d91e10e26a38" category="paragraph">存储驱动程序的名称</block>
  <block id="0863f9e97e159e3ea1ce46bdb49b1254" category="paragraph">您可以使用默认选项来避免在创建的每个卷上指定这些选项。`s` 选项适用于所有控制器类型。有关如何设置默认卷大小的示例，请参见 ONTAP 配置一节。</block>
  <block id="0353522b39b87d54d40d3f09ec668851" category="section-title">ONTAP 配置</block>
  <block id="cd536bce1bed61366e8d17a85fe6678a" category="paragraph">除了上述全局配置值之外，在使用 ONTAP 时，还可以使用以下顶级选项。</block>
  <block id="464779f3491153dd1e79ddbd8a81e3f0" category="paragraph">ONTAP 管理 LIF 的 IP 地址。您可以指定完全限定域名（ FQDN ）。</block>
  <block id="11053eb2b6ac6e8802c67c054cf55ad9" category="paragraph">要使用的 Storage Virtual Machine （如果管理 LIF 为集群 LIF ，则为必填项）</block>
  <block id="723a179bbb9fc3c4f12cf296a8841b27" category="paragraph">用于连接到存储设备的用户名</block>
  <block id="8cf10281cf3b9290d5988c57a7d19693" category="paragraph">用于连接到存储设备的密码</block>
  <block id="7e6d207f2b120c6cc9caa98510aa51c6" category="cell">`聚合`</block>
  <block id="925060a0c0a15f99ef1bee43f1660ea4" category="paragraph">可选，如果使用量超过此百分比，则配置失败</block>
  <block id="876885770cf58d20ef5672cc5594e85d" category="inline-link">请参见此处的 NFS 主机配置信息</block>
  <block id="3890063556e337d458019437f027030b" category="paragraph">您可以使用默认选项来避免在创建的每个卷上指定这些选项：</block>
  <block id="b326b5062b2f0e69046810717534cb09" category="paragraph">true</block>
  <block id="90adf331b7868c7af46ad6e035e93844" category="section-title">扩展选项</block>
  <block id="b8f30e4086b754ccaf7bd5d01d8df137" category="paragraph">如果所需的 Docker 卷数超出 FlexVol 限制所能容纳的范围，请选择 `ontap-nas-economy"` 或 `ontap-san-economy"` 驱动程序。</block>
  <block id="9d83b6d2e2b099e63bf8e2fc8c870893" category="list-text">需要 ONTAP 9.2 或更高版本。</block>
  <block id="e7c74973b26ad51b9db42a9c347a8cd4" category="list-text">截至本文撰写时， FlexGroup 仅支持 NFS v3 。</block>
  <block id="02a100b04add3b90fddef64499e825a2" category="list-text">建议为 SVM 启用 64 位 NFSv3 标识符。</block>
  <block id="0c0f6724044ed44fb85d2ce3193cb7c3" category="section-title">ONTAP 配置文件示例</block>
  <block id="ffe54c343031d16e77db73e2d950e277" category="section-title">Element 软件配置</block>
  <block id="3afcd136a7bffa20fc39ba6581412cd2" category="paragraph">除了全局配置值之外，在使用 Element 软件（ NetApp HCI/SolidFire ）时，还可以使用这些选项。</block>
  <block id="c61f15977fe4efa0866eea87fb740cda" category="paragraph">iSCSI IP 地址和端口</block>
  <block id="6a6b63874c664c103982f6d422c6384e" category="paragraph">10.0.0.7 ： 3260</block>
  <block id="72deb2676231ab8e068ef60dd89edd4c" category="paragraph">要使用的 SolidFireF 租户（如果未找到，则创建）</block>
  <block id="d2672389886b173aef703433f7e4b89b" category="paragraph">将 iSCSI 流量限制为非默认接口时，请指定接口</block>
  <block id="5935dcd024929bc7086bb230802bf576" category="paragraph">请参见以下示例</block>
  <block id="5e9bf55f849ccc5a31a50d1fa784d28c" category="cell">`LegendPrefix`</block>
  <block id="36f9c7b615268efec7f4c56c387a55bb" category="paragraph">`solidfire-san` 驱动程序不支持 Docker Swarm 。</block>
  <block id="1059bb8540c48e6b455e802384bad65d" category="section-title">Element 软件配置文件示例</block>
  <block id="1a269fb3ec0496720ca75e984d8de40e" category="cell">`hostProjectNumber`</block>
  <block id="1631dca111b8c1a922c7f29d48eb7121" category="cell">`网络`</block>
  <block id="f683581d3e75f05f9d9215f9b4696cef" category="section-title">升级</block>
  <block id="ed279061e829314cb0dc7a1708ca5e5b" category="list-text">列出现有卷：</block>
  <block id="7c256ad076320e18e087b238e9063f3f" category="list-text">禁用插件：</block>
  <block id="f4ea3e4191f5bda0b91e08059bf9842a" category="list-text">升级插件：</block>
  <block id="824ba648551a27da6c43705bcd663830" category="list-text">启用插件：</block>
  <block id="e4c48899ce42f4eb019f54a1a8e66560" category="list-text">验证是否已启用此插件：</block>
  <block id="c4d884c606b57bb6cb43864e3499d5a2" category="list-text">验证卷是否可见：</block>
  <block id="a27dfe771799a09fd55fea73286eb6ab" category="section-title">卸载</block>
  <block id="867d93c3d1de0e8e75fa408cfadcbba5" category="list-text">删除插件创建的所有卷。</block>
  <block id="4a28a108f39c07ac09218644ca6e9bb0" category="list-text">删除插件：</block>
  <block id="8f327f2ceda84404290184a7454160ed" category="paragraph">如果希望同时提供多个存储配置，则需要多个 Trident 实例。多个实例的关键在于，在主机上实例化 Trident 时，使用容器化插件的 ` -alias` 选项或 ` -volume-driver` 选项为其提供不同的名称。</block>
  <block id="52ef1c6ffefaba3249f208369424635d" category="section-title">Docker 托管插件（ 1.13/17.03 或更高版本）的步骤</block>
  <block id="547c4a5f7c863aad85f5265c03ed72ea" category="list-text">启动指定别名和配置文件的第一个实例。</block>
  <block id="991ac134f22efa2bb955362d95827ae5" category="list-text">启动第二个实例，指定其他别名和配置文件。</block>
  <block id="aa0dc0ac69e69c434317798e1aa9842b" category="list-text">创建将别名指定为驱动程序名称的卷。</block>
  <block id="5ae25a45ab76de161f87fc41a84f746d" category="paragraph">例如，对于黄金卷：</block>
  <block id="6dab7c53f6e3de2eae52e928dfe5b861" category="paragraph">例如，对于银牌卷：</block>
  <block id="67754cb209925946943e297b3a8be344" category="section-title">传统（ 1.12 或更早版本）的步骤</block>
  <block id="cbd128765e82966ed5e454a99b22e688" category="list-text">使用自定义驱动程序 ID 启动具有 NFS 配置的插件：</block>
  <block id="51c923daa4caf6aea6d24201b73871b6" category="list-text">使用自定义驱动程序 ID 启动具有 iSCSI 配置的插件：</block>
  <block id="dd72ade865d731ba8f6a6fc4c8ccd86f" category="list-text">为每个驱动程序实例配置 Docker 卷：</block>
  <block id="8e2044cc9d4e8f515ad4809a68d75465" category="paragraph">例如，对于 NFS ：</block>
  <block id="d39eb6e4299503c5d451d19b9645be42" category="paragraph">例如，对于 iSCSI ：</block>
  <block id="3a3b7ac2e39541ea05707ccd6eb054d4" category="doc">已知问题和限制</block>
  <block id="8bb35988eac5a841d2af092365f1aa42" category="section-title">将 Trident Docker 卷插件从旧版本升级到 20.10 及更高版本会导致升级失败，并且不会显示此类文件或目录错误。</block>
  <block id="7aebfa1e2291377e040de92d7f7f335f" category="list-title">临时解决策</block>
  <block id="f49f11bc5398ac13e500d16eac424e77" category="list-text">禁用插件。</block>
  <block id="cc3dae6dd6670606c41c62b10273605e" category="list-text">删除此插件。</block>
  <block id="6010901b5c4bb6ad671e6f07fcc038d8" category="list-text">通过提供额外的 `config` 参数来重新安装插件。</block>
  <block id="e527ab8c1c51767e38a3603d51d2d6e5" category="section-title">卷名称的长度必须至少为 2 个字符。</block>
  <block id="45c9df594d13c8a5e5472503d5f14b01" category="inline-link">请参见错误 25773</block>
  <block id="c167efd138e06a8ee59885983c5ddf69" category="admonition">这是 Docker 客户端的限制。客户端会将单个字符名称解释为 Windows 路径。<block ref="f082f49b923960d888c1d98a1e9f4fcb" category="inline-link-rx"></block>。</block>
  <block id="a7c3ff464b1ef4364de4df03d66bee5e" category="list-text">Docker Swarm 目前使用卷名称而非卷 ID 作为其唯一卷标识符。</block>
  <block id="61ab6f5cff8de89cba95d9e3bbc4ff71" category="list-text">卷请求会同时发送到 Swarm 集群中的每个节点。</block>
  <block id="48cbf13b390ff021b130d5f372147af5" category="paragraph">NetApp 已向 Docker 团队提供反馈，但没有任何迹象表明将来可以采用。</block>
  <block id="29cff148f43bc689eb14447b333f6f83" category="section-title">如果要配置 FlexGroup ，则在第二个 FlexGroup 具有一个或多个与要配置的 FlexGroup 相同的聚合时， ONTAP 不会配置第二个 FlexGroup 。</block>
  <block id="7d0ee6fed10d3d4e5c9ee496729ab519" category="sidebar">发行说明</block>
  <block id="93168a8084b3e838d2932c4734bd234e" category="sidebar">早期版本</block>
  <block id="312b0dc38b01ff32c1b2f5f81ee1ab2d" category="sidebar">使用 Trident 操作员进行部署</block>
  <block id="e0e3d7f1aacdf4a8196132549709430c" category="sidebar">使用 tridentctl 进行部署</block>
  <block id="386307d41b3f4169a1e6e046a727cdd2" category="sidebar">使用 Trident 操作员进行升级</block>
  <block id="2a21586f7990f8cb0f8951cd2ef7bc3b" category="sidebar">使用 tridentctl 进行升级</block>
  <block id="a8e174c63ac21920b8405ffddc39214a" category="sidebar">使用 kubectl 创建后端</block>
  <block id="81a123ccab93cd947289b672b0e50348" category="sidebar">演示教程</block>
  <block id="813011e2103649bb71f124adedcc10ea" category="sidebar">博客社区</block>
  <block id="874d8a5301794a9ca2aba132ac2460f3" category="sidebar">Kubernetes Hub</block>
  <block id="d59c00abbeaf33a9a094b3a69c563405" category="sidebar">netapp.io</block>
  <block id="63d5049791d9d79d86e9a108b0a999ca" category="sidebar">参考</block>
  <block id="a20f982d79c3dd66d244ffe0f7d940ee" category="sidebar">最佳实践和建议</block>
  <block id="0460583622f03a52d7693094d6fa2452" category="sidebar">概念</block>
  <block id="bbe2bfefd5797bb567e3da92f68ce8d1" category="sidebar">自定义 tridentctl 部署</block>
  <block id="58eaebf972358f1cf03d386a4ade1a0f" category="sidebar">下一步是什么？</block>
  <block id="bffb766af67c15f14cae35f03dd6f4a9" category="sidebar">使用 kubectl 执行后端管理</block>
  <block id="748a22b5f1312291ad55429ba4b809a0" category="sidebar">使用 tridentctl 执行后端管理</block>
  <block id="e08bfc79c5202517b3814efd6e82fb2c" category="sidebar">升级或卸载 Trident</block>
  <block id="05d68d1b7214c73141ed12aaed0c2ab5" category="list-text">如果 Trident 日志中的信息不足，您可以根据安装选项将 ` -d` 标志传递到 install 参数，尝试为 Trident 启用调试模式。</block>
  <block id="bc6de9cad530a57dba08ff711f4a6b5f" category="paragraph">然后，使用 ` ./tridentctl logs -n trident` 并在日志中搜索 `level=debug msg` 来确认是否设置了调试。</block>
  <block id="8e95ae46f32b05cf983c93e608530e36" category="list-text">随操作员一起安装</block>
  <block id="79b91d0489c081de6794796638793787" category="list-text">随 Helm 一起安装</block>
  <block id="d356d628089d439d75e3f85564372658" category="list-text">使用 tridentctl 安装</block>
  <block id="433f174b6e54b889696b2efd4ef40dc6" category="admonition">可以将 Trident REST 接口配置为仅以 127.0.0.1 （对于 IPv4 ）或（：： 1 ）（对于 IPv6 ）侦听和提供服务。</block>
  <block id="b89df534de66f446ec6482f9d7898bb2" category="cell">`控制器插件节点选择器`</block>
  <block id="8d414af35aeb82413205fa45551a5545" category="cell">无默认值；可选</block>
  <block id="df1f367efe879ec0030f43610e29c5af" category="cell">`控制器插件公差`</block>
  <block id="47a441037628a3c0f0edb0daccb33f99" category="cell">`nodePluginNodeSelector`</block>
  <block id="f297db5a937924105908a365d9d4c4ff" category="cell">`nodePluginTholeations`</block>
  <block id="4352a1b4e004cf57ac04661a18de43aa" category="inline-link-macro">将 Pod 分配给节点</block>
  <block id="d13de4a83d7b44c2e65495def8ef1c7b" category="section-title">有关详细信息 ...</block>
  <block id="af7c8216a3289efe1a298a19c00b8b8c" category="section-title">已测试主机操作系统</block>
  <block id="c0227cef6f07a8cd2ac72f2945b031aa" category="section-title">开放源代码</block>
  <block id="29db8b676d0a02f8179869506102c8ce" category="doc">使用 ONTAP 或 Cloud Volumes ONTAP SAN 驱动程序配置后端</block>
  <block id="133184f8c608809bdc057abf1397d10d" category="paragraph">了解如何使用 ONTAP 和 Cloud Volumes ONTAP SAN 驱动程序配置 ONTAP 后端。</block>
  <block id="60c268e00db3206011b54b01705d7211" category="admonition">确保 `detc/multipath.conf` contains `find_multipaths no` under` efaults `.</block>
  <block id="a3610578ce54198653d7e0b2cc53c05d" category="inline-link-macro">使用 ONTAP 或 Cloud Volumes ONTAP NAS 驱动程序配置后端</block>
  <block id="f4f833852bac4217eff92d53c1bd24dc" category="list-text"><block ref="f4f833852bac4217eff92d53c1bd24dc" category="inline-link-macro-rx"></block></block>
  <block id="df7d9b009cdb0a2623872cb3f905e161" category="list-text"><block ref="df7d9b009cdb0a2623872cb3f905e161" category="inline-link-macro-rx"></block></block>
  <block id="4d80e2460d711b841338dfbeea2ca8c1" category="paragraph">了解如何使用 ONTAP 和 Cloud Volumes ONTAP NAS 驱动程序配置 ONTAP 后端。</block>
  <block id="9d4568c009d203ab10e33ea9953a0264" category="cell">""</block>
  <block id="7072ec708b0ea7e3243747d8b79c0d20" category="admonition">如果要从先前的任何 Trident 版本升级并使用 Azure NetApp Files ，则 ``location`` config 参数现在是一个必填字段。</block>
  <block id="851679bec9b3e6c8e6284128fb750b1e" category="list-text">Kubernetes 增强功能：</block>
  <block id="2767b461b2b49786f390c9e0509d2d12" category="list-text">增加了对 Kubernetes 1.23 的支持。</block>
  <block id="7f10502f6f15537f180f07f0c89d2642" category="inline-link-macro">GitHub 问题描述 #651</block>
  <block id="2ff7a365e7c341f8f381cd7c2a4e15f6" category="list-text">通过 Trident 操作员或 Helm 安装 Trident Pod 时，为其添加计划选项。（<block ref="15fbe6dcd60762941b28bc5990803bde" category="inline-link-macro-rx"></block>）</block>
  <block id="90fdd892e78b26eb18a250c9c1bc19ff" category="inline-link-macro">GitHub 问题描述 #633</block>
  <block id="3ff8e54aa1f3735deb64771c4c65c420" category="list-text">在 GCP 驱动程序中允许跨区域卷。（<block ref="efd445659801b6abfdba2997e23e5f4f" category="inline-link-macro-rx"></block>）</block>
  <block id="fef8c75d6cd00955b0f1c84d40af01aa" category="inline-link-macro">GitHub 问题描述 #666</block>
  <block id="a4233200da50a08b295311036bb03ac1" category="section-title">已弃用</block>
  <block id="de6284c149d2e011da3909f1ef2af627" category="paragraph">Trident REST 接口只能在 127.0.0.1 或 [ ：：： 1 ）地址处侦听和提供服务</block>
  <block id="cdb544a92bee555749f43046d53ef34e" category="admonition">v21.10.0 版本具有一个问题描述，在删除节点并将其重新添加回 Kubernetes 集群时， Trident 控制器可以将其置于 CrashLoopBackOff 状态。此问题描述在 v21.10.1 中得到了修复（ GitHub 问题描述 669 ）。</block>
  <block id="cd1bf2431d703fd3c62a278b9c812d56" category="list-text">修复了在 GCP CVS 后端导入卷导致导入失败的潜在争用情况。</block>
  <block id="8e1e1dad95de3dc781f25f58483acdf3" category="list-text">修复了一个问题描述，在删除节点并将其重新添加回 Kubernetes 集群时，可能会将 Trident 控制器置于 CrashLoopBackOff 状态（ GitHub 问题描述 669 ）。</block>
  <block id="d7c32cb5ff2be4aaff3a8eaea9d18e0d" category="list-text">修复了在未指定 SVM 名称的情况下不再发现 SVM 的问题描述（ GitHub 问题描述 612 ）。</block>
  <block id="94912f7fb206038e8527957b44dfbf25" category="paragraph">此操作将重新启动所有 Trident Pod ，这可能需要几秒钟的时间。您可以通过观察 `kubectl get pod -n trident` 输出中的 "age" 列来检查此问题。</block>
  <block id="08ee53e1d5cefb7967a295e98036598e" category="cell">控制 .snapshot 目录的可见性</block>
  <block id="016a4b469916e37291cfe2f7fab49aaf" category="cell">`resourceGroups`</block>
  <block id="66d09fbe1165f3d10b368cbe0cc029f4" category="cell">用于筛选已发现资源的资源组列表</block>
  <block id="36cbcb8a57112362b05d06b9fe037a6e" category="cell">"[]" （无筛选器）</block>
  <block id="d4b4343f054233d7d339bb1501425fd4" category="cell">`netappAccounts`</block>
  <block id="61476ef20a8015760b9cb3c1bd0ea435" category="cell">用于筛选已发现资源的 NetApp 帐户列表</block>
  <block id="722c7b4409fa4d1fe6aaa2902ae66473" category="cell">`容量池`</block>
  <block id="225abbb59bc0bbaa2a5852ada333b31b" category="cell">用于筛选已发现资源的容量池列表</block>
  <block id="f2a5b99a63a463017b3e5f5848444d9a" category="cell">"[]" （无筛选器，随机）</block>
  <block id="91b3c29beb3641dce2fcf3d2382fac4f" category="cell">故障排除时要使用的调试标志。示例， ` \ ｛ "api" ： false ， "method ： true ， "discovery" ： true ｝` 。除非您正在进行故障排除并需要详细的日志转储，否则请勿使用此功能。</block>
  <block id="520d0db389f362bf79ef56ca0af3dcab" category="cell">格式。</block>
  <block id="dde92bca1b59f0db813ef42a2688752e" category="cell">Resource group</block>
  <block id="671e72ca3ef632233f4c27dfef1ec109" category="cell">&lt; 资源组 &gt;</block>
  <block id="ac252743de820aac9183d9f76d4bed67" category="cell">NetApp 帐户</block>
  <block id="2bf2783c6d0d867a9fe629138b38bd84" category="cell">&lt; 资源组 &gt;/&lt; NetApp 帐户 &gt;</block>
  <block id="9eea1c08013c37f1499f428378764a08" category="cell">容量池</block>
  <block id="01c656d6b97f45a90022ee307283ae01" category="cell">&lt; 资源组 &gt;/&lt; NetApp 帐户 &gt;/&lt; 容量池 &gt;</block>
  <block id="bf76cafc47141522dca89c4d6e25b822" category="cell">虚拟网络</block>
  <block id="8c9309282517a29ad09b10443d825c7c" category="cell">&lt; 资源组 &gt;/&lt; 虚拟网络 &gt;</block>
  <block id="9770c6469e9d27585d6c0c389ede7bc3" category="cell">Subnet</block>
  <block id="7addf9faaab78a084548d05b695cd2e2" category="cell">&lt; 资源组 &gt;/&lt; 虚拟网络 &gt;/&lt; 子网 &gt;</block>
  <block id="976a6dc52dbcabb541efa0a91e922604" category="cell">"" （预览功能，需要在订阅中列入白名单）</block>
  <block id="6add71a247c8f4513060920be14857bc" category="cell">允许卷扩展</block>
  <block id="84e2c64f38f78ba3ea5c905ab5a2da27" category="cell">boolean</block>
  <block id="675e3f37a9adfd7ab6433906c490fa06" category="cell">启用或禁用对增加 PVC 大小的支持</block>
  <block id="c791531450eeeb073b30215d9c306a00" category="cell">1.11 及更高版本</block>
  <block id="086b513e7d83c4cf32a8bd3550679276" category="cell">卷绑定模式</block>
  <block id="fd656a4f359aa12808a6d0ceb5792342" category="cell">即时， WaitForFirstConsumer"</block>
  <block id="5e7777e1f9cfa3a93159ee44cf3f1f5a" category="cell">选择何时进行卷绑定和动态配置</block>
  <block id="8264769021597389583b0a7d1fa7e076" category="inline-link-macro">Kubernetes ：为 Pod 或容器配置安全上下文</block>
  <block id="6dd29ca7439e52dcf2fbc569066b3d67" category="list-text">在存储类中设置 `FSType` 。</block>
  <block id="45d2174daba36b76955e69d2eddf26ca" category="list-text">PVC 访问模式为 RW 。</block>
  <block id="ba5b62efad4f90a8f4bb806cba4a3ea4" category="paragraph">对于 NFS 存储驱动程序， NFS 导出中已存在文件系统。要使用 `fsGroup` ，存储类仍需要指定 `FSType` 。您可以将其设置为 `NFS` 或任何非空值。</block>
  <block id="a98b2ebbcbb381d3abc81e2ecfb2054c" category="inline-link-macro">GitHub 问题描述 第 691 号</block>
  <block id="61465c1d4383dd4afdf168925e15e767" category="list-text">修复了已删除节点上的卷已取消发布的问题描述 。（<block ref="5fee6ab43e8008edba54375694a29266" category="inline-link-macro-rx"></block>）</block>
  <block id="e50f1057ba4b67b255c98fa09c5ba6f8" category="list-text">修复了访问 ONTAP API 响应中聚合空间的 " 无 " 字段时的崩溃问题。</block>
  <block id="3c72f47eeb46270dd13a77b32ec10dd3" category="list-text">* Kubernetes ： * 增加大型集群的节点注册回退重试时间。</block>
  <block id="0ef48234390855900384d0bc8a0a8a24" category="list-text">修复了问题描述 ，其中 azure-netapp-files 驱动程序可能会被同名的多个资源混淆。</block>
  <block id="404cef2e43cb97ccef52692419ad6f6b" category="inline-link-macro">GitHub 问题描述 489</block>
  <block id="7213ed07f5b718aa66cfac350f023a77" category="list-text">修复的问题描述 ，尝试导入已导入的卷时，返回的 EOF 将使 PVC 处于待定状态。（<block ref="b9a2290d6389b9a605883cda4e717749" category="inline-link-macro-rx"></block>）</block>
  <block id="d0aaca968285d0d47ea0c5a0f7b9bab5" category="list-text">在创建 SSL 证书时将 SHA-1 替换为 SHA-256 。</block>
  <block id="997cff957213b9212a22d7cac2b4275d" category="list-text">使用生成的证书测试身份验证。将 &lt;SVM 管理 LIF&gt; 和 &lt;SVM 名称 &gt; 替换为管理 LIF IP 和 ONTAP 名称。您必须确保 LIF 的服务策略设置为 `default-data-management` 。</block>
  <block id="e9c44bbfd795a5d63d74c6a77afee70d" category="paragraph">法律声明提供对版权声明、商标、专利等的访问。</block>
  <block id="6016a2b341113bf496b719905398ecd2" category="section-title">版权</block>
  <block id="126a02652da6de02962cf1b654fd6376" category="section-title">商标</block>
  <block id="c4ce4761e466527d26b3e3d5ed1006fd" category="paragraph">NetApp 、 NetApp 徽标和 NetApp 商标页面上列出的标记是 NetApp 、 Inc. 的商标。其他公司和产品名称可能是其各自所有者的商标。</block>
  <block id="be89498d2f8a22ce47c02ba9795fe2af" category="section-title">专利</block>
  <block id="d0b19d36be2c5f16e9aef46c8a452d3d" category="paragraph">有关 NetApp 拥有的专利的最新列表，请访问：</block>
  <block id="56c34c6410dd45c5cec44149ad0ce037" category="section-title">隐私政策</block>
  <block id="25c11af81bf0b01ce7b0f24ddc9f7136" category="section-title">其他已知配置选项</block>
  <block id="8ded34c5caad3971bb6d0a2b202d7b32" category="list-text">集群必须支持有权限的工作负载。</block>
  <block id="dbe38f4f0d856b41827e6e4531720a5e" category="list-text">` -kubelet-dir` 标志应设置为 kubelet 目录的位置。默认情况下，此值为 ` /var/vcap/data/kubelet` 。</block>
  <block id="4dc3529fbf05312075f0aa52f9c0908e" category="paragraph">已知使用 ` -kubelet-dir` 指定 kubelet 位置适用于 Trident Operator ， Helm 和 `tridentctl` 部署。</block>
  <block id="986d46700a93c1b67573285912b2a857" category="paragraph">Cloud Volumes ONTAP 可为各种使用情形提供数据控制以及企业级存储功能，包括文件共享和为 NAS 和 SAN 协议（ NFS ， SMB/CIFS 和 iSCSI ）提供服务的块级存储。Cloud Volume ONTAP 的兼容驱动程序包括 `ontap-nas` ， `ontap-nas-economy.` `ontap-san` 和 `ontap-san-economy.`它们适用于适用于 Azure 的 Cloud Volume ONTAP ，适用于 GCP 的 Cloud Volume ONTAP 。</block>
  <block id="62e0abd2d56d565a2b31e85b446fa800" category="paragraph">通过卷导入，可以将现有存储卷导入到 Kubernetes 环境中。目前， `ontap-nas` ， `ontap-nas-flexgroup` ， `solidfire-san` ， `azure-netapp-files` 和 `GCP-CVS` 驱动程序均支持此功能。在将现有应用程序移植到 Kubernetes 或在灾难恢复场景中，此功能非常有用。</block>
  <block id="cca7544fa2044ea81b43c1e0896bf58e" category="cell">ontap-nas ， ontap-san ， solidfire-san ， azure-netapp-files ， gcp-cvs ， ontap-san-economy.</block>
  <block id="870594bba77423ccae9ad70861e02951" category="cell">ontap-nas ， ontap-nas-flexgroup ， ontap-san ， GCP-CVS</block>
  <block id="33dece0bdda0f88a645c739f3714c038" category="cell">ontap-nas ， ontap-san ， solidfire-san ， gcp-cvs</block>
  <block id="2e647c10640a301eccdc45d7ad72507d" category="cell">ontap-nas ， ontap-nas-economy. ontap-nas-flexgroup ， ontap-san ， ontap-san-economy. solidfire-san ， gcp-cvs ， azure-netapp-files</block>
  <block id="051fb2c3f62667c87a197ae412a4dbeb" category="cell">ONTAP （ NAS ， SAN ）和 SolidFire — * ：要从中克隆的卷的名称</block>
  <block id="c12963ed77d398c8f97e09be58a20fed" category="paragraph">创建卷时， Trident 会生成 `internalName` 。这包括两个步骤。首先，它会将存储前缀（默认值 `trident` 或后端配置中的前缀）预先添加到卷名称中，从而使名称格式为 ` &lt;prefix&gt;-&lt;volume-name&gt;` 。然后，它将继续清理名称，替换后端不允许使用的字符。对于 ONTAP 后端，它会将连字符替换为下划线（因此，内部名称将变为 ` &lt;prefix&gt;_&lt;volume-name&gt;` ）。对于 Element 后端，它会将下划线替换为连字符。</block>
  <block id="804a6c22698fe4782c44f1e8d446964e" category="paragraph">从目前开始，我们为 `ontap-nas` ， `ontap-nas-flexgroup` ， `ontap-san` ， `ontap-san-economics` ， `solidfire-san` ， `GCP-CVS` 和 `azure-netapp-files` 后端驱动程序。</block>
  <block id="723b30bcece2d0d47914a6eaf0c550cc" category="list-text">现在， Trident 会将 HSTS 标头添加到其安全端点的响应中。</block>
  <block id="621b9733ee07089711b96dd6b0b7861a" category="list-text">Trident 现在会尝试自动启用 Azure NetApp Files UNIX 权限功能。</block>
  <block id="3f39a3207529d5f8129199a33e60ef87" category="section-title">删除</block>
  <block id="3d0d8392962843a02a6fa979f76b5a91" category="paragraph">已删除 E 系列驱动程序（自 2007 年 20 月 20 日起禁用）。</block>
  <block id="72387bfdb0acfd8a27877f000a3abeac" category="section-title">22.01.1 中的更改</block>
  <block id="135c438d01a49275c458e22005e39c6e" category="section-title">22.01.0 中的更改</block>
  <block id="58a2e8c17107cc1ca9cb1317cd0c1ee9" category="section-title">21.10.1 中的更改</block>
  <block id="43e92857220d1a7ea1da88250ea5e2e3" category="section-title">21.10.0 中的更改</block>
  <block id="9c87569b835a8f66b7490390d350d9a4" category="paragraph">如果您的Kubernetes分发版不包含快照控制器和CRD、则可以按如下所示进行部署。</block>
  <block id="469f7ca16938508b5dcb777767828b70" category="list-text">创建卷快照CRD。</block>
  <block id="5a333b18a215ecfd4457ba0e1732654b" category="section-title">Trident是否可以在配置了负载共享镜像的SVM上配置卷？</block>
  <block id="0e7629426b9d7596800cd5d72f558a7f" category="paragraph">可以为通过NFS提供数据的SVM的根卷创建负载共享镜像。ONTAP 会自动为Trident创建的卷更新负载共享镜像。这可能会导致卷挂载延迟。使用Trident创建多个卷时、配置卷取决于ONTAP 更新负载共享镜像。</block>
  <block id="7d3f46589c43a64fd040e4f0e0691a86" category="inline-link-macro">Helm图表</block>
  <block id="1ea1b160621872df5909653ebde1bf7f" category="paragraph">您可以更新现有后端、以便在基于凭据的方法和基于证书的方法之间移动。但是、一次仅支持一种身份验证方法。要切换到其他身份验证方法、必须从后端配置中删除现有方法。</block>
  <block id="7335992f174c029a990442aca68aacbd" category="admonition">如果您尝试同时提供*凭据和证书*、则后端创建将失败、并显示一条错误、指出配置文件中提供了多种身份验证方法。</block>
  <block id="d1914bc190cdc3bc9eee6db0c81021bc" category="section-title">节点服务发现</block>
  <block id="2b6ab5193160f5eaca51526b15f27e3a" category="admonition">节点服务发现可识别已发现的服务、但无法保证服务已正确配置。相反、如果没有发现的服务、则无法保证卷挂载将失败。</block>
  <block id="412427d9207c4cc4b01539aff3c50e7c" category="cell">`网络功能`</block>
  <block id="6adbf3424e5de1b4e2baad3b4d632c4a" category="paragraph">您可以更新现有后端以使用其他身份验证方法或轮换其凭据。这两种方式都适用：使用用户名 / 密码的后端可以更新为使用证书；使用证书的后端可以更新为基于用户名 / 密码的后端。为此、您必须删除现有身份验证方法并添加新的身份验证方法。然后、使用包含所需参数的更新后端.json文件执行`tridentctl backend update`。</block>
  <block id="bc3c69459955aa51e6720ee4098db2c2" category="doc">POD安全标准(PSS)和安全上下文限制(SCC)</block>
  <block id="80af9ab2cf8f28973d329b09a2aa3bf3" category="inline-link-macro">Kubernetes：安全性</block>
  <block id="92699490afddc06ebad285ff002fc80d" category="section-title">所需的Kubernetes安全上下文和相关字段</block>
  <block id="ed5dea09095f671b801bee34ea28a319" category="cell">权限</block>
  <block id="b315e1c68490baab38c1a28e00fe0f5a" category="cell">特权</block>
  <block id="62868c5d24fd89e2fd8046454e18b6c4" category="inline-link-macro">Kubernetes：挂载传播</block>
  <block id="92a5c8ffa6bee2a9377f18499950da23" category="cell">主机网络连接</block>
  <block id="154cdce0e5451a5578085caa8a7e7a3e" category="cell">iSCSI守护进程所需的。`iscsiadm`可管理iSCSI挂载、并使用主机网络与iSCSI守护进程进行通信。</block>
  <block id="2ff982b19c53a275ae05f015dafe166d" category="cell">主机IPC</block>
  <block id="eac6730a7bdbb0156f167d1a073b4a7c" category="cell">NFS使用进程间通信(Interprocess Communication、IPC)与NFSD进行通信。</block>
  <block id="b25a60a6190808e0d6e849ca6325b91c" category="cell">主机PID</block>
  <block id="82ec2cd6fda87713f588da75c3b1d0ed" category="cell">功能</block>
  <block id="4aeb7a1484240b8d479aee0a012de3a4" category="cell">`SYS_ADMIN`功能是特权容器的默认功能的一部分。例如、Docker会为有权限的容器设置这些功能：`CapPrm：00003fffffffff``CapEff：00003fffffffff`</block>
  <block id="b2dbe899d8bf9b4c25f337efe8b1ce7c" category="cell">Seccomp</block>
  <block id="1a3d8802d280d4ec910f54042cd62998" category="cell">SELinux</block>
  <block id="52a8b954485e8bf8ebe32865d17563a6" category="cell">DAC</block>
  <block id="6ddc0f1aebd745677bb51e725f080883" category="cell">有权限的容器必须以root用户身份运行。非特权容器以root用户身份运行、以访问CSI所需的UNIX套接字。</block>
  <block id="479f0a2e760ff0014bb53fcbe4b5dfbf" category="section-title">POD安全标准(PSS)</block>
  <block id="b021df6aac4654c454f46c77646e745f" category="cell">Label</block>
  <block id="ede4d9142f78c8313ce1ea912023214a" category="cell">`po-security.Kubernetes IO/enforce``po-security.Kubernetes IO/enforce版本`</block>
  <block id="0ccd226f7ad098ef19857dcf15eed611" category="cell">允许将Trident控制器和节点收入安装命名空间。请勿更改命名空间标签。</block>
  <block id="0634b3cd8d233df0b38fe73154f03a86" category="cell">`enforce：privileged``enice-version：&lt;当前集群的版本或测试的最高PSS版本。&gt;`</block>
  <block id="830d087702172a8173337c2f014f24b3" category="admonition">更改命名空间标签可能会导致Pod未计划、出现"创建时出错：..."或"警告：Trident CSI -..."。如果发生这种情况、请检查`privileged`的命名空间标签是否已更改。如果是、请重新安装Trident。</block>
  <block id="a2e4b41e2525b6345ec43bbfe91c66fb" category="section-title">POD安全策略(PSP)</block>
  <block id="6f16a5f8ff5d75ab84c018adacdfcbb7" category="cell">字段</block>
  <block id="0c3c80a8b192c50af55549addaec04e9" category="cell">`allowPrivilegeEscalation`</block>
  <block id="13d1281eff2b6a57e6fe877e0379a8f0" category="cell">有权限的容器必须允许权限升级。</block>
  <block id="22cfef4d87bd251ba39dd92d08a6b0bb" category="cell">`true`</block>
  <block id="f3acfbe4d2b93ab163024b31a31b1a6e" category="cell">`允许CSIDrivers`</block>
  <block id="e4938c724a08c7ba91677f8cb5e069f0" category="cell">Trident不使用实时CSI临时卷。</block>
  <block id="ce2c8aed9c2fa0cfbed56cbda4d8bf07" category="cell">空</block>
  <block id="2eb7a988516ab2e49fd1dd1d0f505ba4" category="cell">`allowedCapabilities`</block>
  <block id="7f18f0f8e3ec21ef031ae007e78292f1" category="cell">非特权Trident容器所需的功能不会超过默认设置、而特权容器会获得所有可能的功能。</block>
  <block id="577f713a1a3fd5fe6851754c1e780b62" category="cell">`支持FlexVolumes`</block>
  <block id="5a40ff04e0748fc5c56343bfccb1bf43" category="inline-link-macro">FlexVolume驱动程序</block>
  <block id="117394bda9c12e1ab1e0ddefda7340f6" category="cell">Trident不使用 <block ref="5cf2fb2d9c4de828b06e030ea5b9ff75" category="inline-link-macro-rx"></block>、因此它们不会包含在允许的卷列表中。</block>
  <block id="e26fd3e84b999df4093d0b9f1cf8bbdb" category="cell">`allowedHostPaths`</block>
  <block id="87c065485525cde8c75f60bd233a546b" category="cell">Trident节点POD挂载节点的根文件系统、因此设置此列表没有好处。</block>
  <block id="88e5e12dbdeac08e751e562ed902d6af" category="cell">`allowedProcessMountTypes`</block>
  <block id="b989e7796e7fe01d9a48795f499ee3e8" category="cell">Trident不使用任何`ProcMountTypes`。</block>
  <block id="6784c364453355e4499a625166f9d76e" category="cell">Trident不需要任何不安全的`sysctls`。</block>
  <block id="43dbe35647dc1ec91f9ab70bb9c67eb7" category="cell">`defaultAddCapabilities`</block>
  <block id="21b6f9c280cf0efb8619e386208ee181" category="cell">无需向有权限的容器添加任何功能。</block>
  <block id="782434a33bb3747f8aa86293dc2ae86c" category="cell">`defaultAllowPrivilegeEscalation`</block>
  <block id="4e1db4d4f52542bf76625bb1724050ca" category="cell">允许权限升级在每个Trident POD中进行处理。</block>
  <block id="249091efa412cf5e332461c484b979d0" category="cell">`false`</block>
  <block id="7b18008579516cbef313996f0c7a3f5e" category="cell">`forbiddenSysctls`</block>
  <block id="1507e7ba036aa98fd30589e618a7a4eb" category="cell">不允许使用`sysctls`。</block>
  <block id="042337cb48219589a279b3bf0ba9107a" category="cell">`fsGroup`</block>
  <block id="07556f620d0b827238e3ef0142c49b78" category="cell">Trident容器以root身份运行。</block>
  <block id="ac0f2e366ea63da20af91efebbac6563" category="cell">`RunAsAny`</block>
  <block id="0041ceee5434032966a8b03eae8738ac" category="cell">`hostIPC`</block>
  <block id="41c30833eb5d5997e9b7a31ee0c66616" category="cell">挂载NFS卷需要主机IPC才能与`nfsd`进行通信</block>
  <block id="9bffb5bb38918d1a1d3ae47e97dfc0c4" category="cell">`hostNetwork`</block>
  <block id="42a138ad382896646a09fac2eb0167c6" category="cell">iscsiadm要求主机网络与iSCSI守护进程进行通信。</block>
  <block id="13135fc0519a6dd0521fa0c0e2445184" category="cell">`hostPID`</block>
  <block id="608c4a2fdcf8e14356058df9005ae8ad" category="cell">需要使用主机PID来检查节点上是否正在运行`rpc-statd`。</block>
  <block id="7d820b24ee2bfd41495fba608bfe1fb0" category="cell">`hostPorts`</block>
  <block id="7afcaaf2763ecc0e6dee9f0b63026a58" category="cell">Trident不使用任何主机端口。</block>
  <block id="cb8c6f5ff29df99724d3704d1af54bbd" category="cell">`特权`</block>
  <block id="aadb34687d099e9a40c9ad3bbaca9b52" category="cell">Trident节点Pod必须运行特权容器才能挂载卷。</block>
  <block id="cd8e4b4bb856b53433b1d0369136d7c3" category="cell">`readOnlyRootFilesystem`</block>
  <block id="7621dbe4e923ccb1331f44e5fc326954" category="cell">Trident节点Pod必须写入节点文件系统。</block>
  <block id="7214fd778499c002452dfa1de7a63694" category="cell">`requiredDropCapabilities`</block>
  <block id="0a687403dd751d7bcf9d36eb39b73187" category="cell">Trident节点Pod运行有权限的容器、无法删除功能。</block>
  <block id="56d058c51fcd79545706c62569ba5a19" category="cell">`无`</block>
  <block id="e0cfa7f1a22bfc61e3c23d9b472cb229" category="cell">`runAsGroup`</block>
  <block id="72a9e1b9b252e5cf0980f359420147d4" category="cell">`runAsUser`</block>
  <block id="0be043db3067cfba9e355c71f0d47963" category="cell">`runAsAny`</block>
  <block id="2b13c797fbca116e0445fe9ed04aa753" category="cell">`runtimeClass`</block>
  <block id="90eaf8074aef1d40fdd4ebb096ba3445" category="cell">Trident不使用`RuntimeClasses`。</block>
  <block id="af697e6f277a737b01025e1b3ac8fd44" category="cell">`seLinux`</block>
  <block id="b2fe00f20eadde0a1ed6fcbd7f899a41" category="cell">Trident未设置`seLinuxOptions`、因为容器运行时间和Kubernetes分发程序处理SELinux的方式目前存在差异。</block>
  <block id="07b8b968ede124e1134951b502139223" category="cell">`supplementalGroups`</block>
  <block id="707325d27093188691659cc218115f02" category="cell">`卷`</block>
  <block id="fd284b15eb12231bdce65744e6704677" category="cell">Trident Pod需要这些卷插件。</block>
  <block id="c28fb07c7c2463112f74e84cdea6df77" category="cell">`hostPath、projected、emptyDir`</block>
  <block id="12ed56c889a6b18b5fce1be5bd30b1c8" category="section-title">安全上下文限制(SCC)</block>
  <block id="3ad6cb6100190c8f81e99fd52debf7ef" category="cell">标签</block>
  <block id="244a3eb95cc1438e96d275b17eaa5bca" category="cell">`allowHostDirVolumePlugin`</block>
  <block id="bdf1cf802b14a9ec8b930e1603663b2a" category="cell">Trident节点Pod挂载节点的根文件系统。</block>
  <block id="bb46f3196a53f2e3664f53addee28df1" category="cell">`allowHostIPC`</block>
  <block id="040a3e4977d39efd21138ca276545e91" category="cell">挂载NFS卷需要主机IPC才能与`nfsd`进行通信。</block>
  <block id="75a4305006cbe99edf6e6ec43424a3f9" category="cell">`allowHostNetwork`</block>
  <block id="3dc9b606cf3a7a8fc44c8489687131d1" category="cell">`allowHostPID`</block>
  <block id="31773567f0268170ecfa4c74f91c5b74" category="cell">`allowHostPorts`</block>
  <block id="606a5f1c705c363af0a1f97e60feaddc" category="cell">`allowPrivilegedContainer`</block>
  <block id="2cc90cbcd409b90ed2d4270b587b4611" category="cell">`允许UnsafeSysctls`</block>
  <block id="5be47a456f397efee757d8dd4e0c8726" category="cell">`组`</block>
  <block id="c2ca437ef2abb914a8fc2ebb1b926ef6" category="cell">此SCC专用于Trident并绑定到其用户。</block>
  <block id="fae56626a2743154c04411ee3d701833" category="cell">`seLinuxContext`</block>
  <block id="5987c8a1437c5254a436c29c94220b55" category="cell">`seccompProfile`</block>
  <block id="2c8f9f1b9abdfa728b8f5d50686e4da0" category="cell">有权限的容器始终运行"无限制"。</block>
  <block id="f94a437fb7858e092079378f93ef2c71" category="cell">`用户`</block>
  <block id="402b7d2d5aea5e79576f9a964df89a32" category="cell">提供了一个条目、用于将此SCC绑定到Trident命名空间中的Trident用户。</block>
  <block id="274b68192b056e268f128ff63bfcd4a4" category="cell">不适用</block>
  <block id="50af2a553c2117ddd78da33865c6e35b" category="cell">`hostPath、downwardAPI、projected、emptyDir`</block>
  <block id="6386b0f17b85463db72887bca8ae2bb7" category="inline-link-macro">正在配置后端</block>
  <block id="253c5669d0ddb02485528df359bfb37d" category="paragraph">如果您需要对默认资源配额和优先级类进行更多控制、可以使用Helm图表生成`custom.yaml`或配置`ResourceQuota`对象。</block>
  <block id="b6ba871f235b09a3d76844b7b5901586" category="paragraph">以下是一个`ResourceQuota`对象的示例、该对象会优先处理Trident子集。</block>
  <block id="4f4b1cca8d1c78f8ba309694d46d80f2" category="inline-link-macro">Kubernetes：资源配额</block>
  <block id="222924a66611c61f2a2192a2bab92ecf" category="inline-link-macro">正在卸载</block>
  <block id="dbcf7f603282c175a634104f7dbd55f2" category="paragraph">在极少数情况下、如果在创建`ResourceQuota`对象后安装失败、请先尝试 <block ref="3bd802fb95da78515b3c3d98916ee73c" category="inline-link-macro-rx"></block> 然后重新安装。</block>
  <block id="c4af59b1638f70f51816423f72df4dba" category="paragraph">如果不起作用、请手动删除`ResourceQuota`对象。</block>
  <block id="702fa57eedc6ee8490a7294016f8b14f" category="list-text">`trident资源库ota.yaml`</block>
  <block id="6b51834314ece904405eb0ce1a6e6bd8" category="list-text">NetApp HCI/ Element软件11或更高版本</block>
  <block id="05759468b045fc55d22e8e6881dca01f" category="paragraph">*</block>
  <block id="a885c202ff7951e3ed11491edbe869b2" category="inline-link-macro">GitHub问题描述 700</block>
  <block id="b649490c5687c23484f5e4043e17b9c5" category="list-text">修复了使用Helm或Trident运算符配置Trident时用于处理节点选择器的布尔值和数字值的问题描述。（<block ref="4be853b49b0a07556a73959d38037d90" category="inline-link-macro-rx"></block>）</block>
  <block id="0ae28ee1c5edfd4bee3e296a8261ed8b" category="inline-link-macro">GitHub问题描述 #736</block>
  <block id="69ce5488c3078e15fc6e51116d1d17ba" category="list-text">修复了问题描述 处理非CHAP路径错误的问题、以便kubelet在失败时重试。 <block ref="a21b5d75e3a2341288a5ed769d7d4ca2" category="inline-link-macro-rx"></block>）</block>
  <block id="701ba87ab75dde70f4604769defc7d00" category="list-text">从K8s.gcr.io过渡到registry.k8s.io作为CSI映像的默认注册表</block>
  <block id="90e3cd7cff1c9f6f4b8d2a509b127d44" category="list-text">包含一个包含Trident安装的ResourceQuota、以确保在默认情况下限制使用PriorityClass时计划Trident DemonSet。</block>
  <block id="838a6d7e89b7c366cfc25d3b2115b901" category="inline-link-macro">GitHub问题描述 #717</block>
  <block id="cab6f6f91105d87aa3f65650df43c553" category="inline-link-macro">GitHub问题描述 #228</block>
  <block id="00ea108f36897d9ed3523b970b09e6ea" category="list-text">为ONTAP 驱动程序添加了技术预览自动MetroCluster 切换检测功能。（<block ref="0c9c84232975bfb33d3481050e5ef924" category="inline-link-macro-rx"></block>）</block>
  <block id="0b4fe975279063a2d1790cd061a8b8d1" category="list-text">*。*。*。*。</block>
  <block id="108e9d089b04380952a04c1021cdad80" category="list-text">后端配置不再允许在一个配置中使用多种身份验证类型。</block>
  <block id="de278730ee66ed696db3f71d20aa30a5" category="list-text">已删除AWS CVS驱动程序(自22.04起已弃用)。</block>
  <block id="16cbbf51150ac75556b3850ff4a5a013" category="list-text">从节点Pod中删除了不必要的SYS_ADMIN功能。</block>
  <block id="9f0be62f4bbebd42af8782e0151af649" category="list-text">将nodeprep减少为简单的主机信息和主动服务发现、以便尽力确认工作节点上是否提供NFS/iSCSI服务。</block>
  <block id="5b6cf869265c13af8566f192b4ab3d2a" category="section-title">文档。</block>
  <block id="d3889fc650fa47326b5f1d0c56f50970" category="inline-link-macro">POD安全标准</block>
  <block id="278dc4a29aa2b881b9dc4b45a82929c5" category="section-title">22.04中的更改</block>
  <block id="cb60f101c87f3def78d0fef168389244" category="inline-link-macro">GitHub问题描述 #681</block>
  <block id="2901fba3b85d37ea6000d90e72366ba6" category="list-text">改进了 iSCSI 启动程序名称的解析。（<block ref="3947f141b94c1867221790f45a6ee173" category="inline-link-macro-rx"></block>）</block>
  <block id="8804e61e26be921d78a1632ad8607a4c" category="inline-link-macro">GitHub问题描述 598</block>
  <block id="d0aad022e470a22fe71fa5616ce002f8" category="list-text">修复了不允许使用 CSI 存储类参数的问题描述 。（<block ref="032ea6b8f2fceffcd025bdcae99652ae" category="inline-link-macro-rx"></block>）</block>
  <block id="34fb36c5e51f4530848bc5114cf29aa7" category="inline-link-macro">GitHub问题描述 #6771</block>
  <block id="951995417edc5c2968955384b925b27e" category="list-text">修复了 Trident CRD 中的重复密钥声明。（<block ref="6e73ffca3c5d1dc68cd639612845812c" category="inline-link-macro-rx"></block>）</block>
  <block id="55cd7443e4a1278a57f612df28b8eee3" category="inline-link-macro">GitHub问题描述 #629</block>
  <block id="ec74c645b7b5f9d3051f68de156927d9" category="list-text">修复了不准确的 CSI Snapshot 日志。（<block ref="9b20149e8d36c115b9349e728abebd54" category="inline-link-macro-rx"></block>)</block>
  <block id="28341d7630f486a1b72b5b97d39ce589" category="list-text">修复了已删除节点上的卷已取消发布的问题描述 。（<block ref="439c8b5253b3b0fa8d2ddb79f44cd784" category="inline-link-macro-rx"></block>）</block>
  <block id="fbb82269f3871bc5751dda6ade9cd9ea" category="inline-link-macro">GitHub问题描述 #656</block>
  <block id="e02171b3da303c0d6b9bd3102650bb07" category="list-text">增加了对块设备上文件系统不一致问题的处理。（<block ref="b6c419ed0f79d6957e3796ca0e0742cb" category="inline-link-macro-rx"></block>）</block>
  <block id="1bae87f1c9d9a094dce218672331de02" category="inline-link-macro">GitHub问题描述 #715</block>
  <block id="4aeb6a7748e689a0ce92c16344bb6285" category="list-text">修复了在安装期间设置 `imageRegistry` 标志时问题描述 提取自动支持映像的问题。（<block ref="5f789d3f3d58c42cfbeb0b6394bac993" category="inline-link-macro-rx"></block>）</block>
  <block id="70703300e76c51632e4ea22ce53c74af" category="inline-link-macro">GitHub问题描述 #698</block>
  <block id="99df1eeec5b67fac5a47fb610c720712" category="list-text">现在，与 Trident 安全端点的入站连接至少需要 TLS 1.3 。（<block ref="5ab4d3faf45db0d93ac1a5f7438f1c62" category="inline-link-macro-rx"></block>）</block>
  <block id="3786cba0bc294f586b13783c69b08371" category="inline-link-macro">GitHub问题描述 #694</block>
  <block id="c0f60be70f5b8a5bc6c7c8071f4481fb" category="list-text">* Kubernetes * ： Trident demonset 现在以 system-node-critical 优先级类运行。（<block ref="b04869f92878b510e393bc41361c825d" category="inline-link-macro-rx"></block>）</block>
  <block id="a7cfd917113a9ee9c1e789887d1d809f" category="inline-link-macro">渠道不和</block>
  <block id="c217b0ac2dd5504f79ba78b220a9c358" category="summary">NetApp 以多种方式为 Trident 提供支持。全天候提供广泛的免费自助支持选项、例如不和的渠道。</block>
  <block id="8f5cc6430613f1c12f36965050bb7197" category="sidebar">不和</block>
  <block id="a1142049a82a11e90102d655bb7e234d" category="inline-link-macro">GitHub上的_assets_部分</block>
  <block id="756909f99bc1a720d318a5f5b94eb094" category="section-title">收集日志以进行故障排除</block>
  <block id="3d945423f8e9496c429a5d8c65b4604f" category="paragraph">Ubuntu</block>
  <block id="134bf17c90c90b5aeed99dde262bf14d" category="admonition">如果已为Trident创建命名空间、则`-create-namespace`参数不会创建额外的命名空间。</block>
  <block id="c638f77e97a62d0d11f775816222d62a" category="inline-link-macro">配置 NetApp 卷加密概述</block>
  <block id="b65b10bf779c45e4940c255ecf83bdc3" category="paragraph">NetApp ONTAP 提供空闲数据加密、可在磁盘被盗、退回或重新利用时保护敏感数据。有关详细信息，请参见 <block ref="e0b51490e5d435c82abc702d0a4ca15c" category="inline-link-macro-rx"></block>。</block>
  <block id="1bb1c0791a9e9cff8de216ed44b1de31" category="list-text">您可以在Trident后端配置中将NVE加密标志设置为`true`、以覆盖NAE加密并按卷使用特定的加密密钥。</block>
  <block id="b6c7fef7b7bcf035a4f4ad02ff8808c2" category="paragraph">有关后端配置选项的详细信息、请参见：</block>
  <block id="06c4db929b729ddf158ceb5cc15b122b" category="inline-link-macro">ONTAP SAN配置选项</block>
  <block id="911675212835161abe9bce3f33c70af0" category="paragraph">在新卷上启用NetApp卷加密(NVE)；默认为`false`。要使用此选项，必须在集群上获得 NVE 的许可并启用 NVE 。</block>
  <block id="2bc97a247278d92f5552529c55ab7f0d" category="paragraph">在新卷上启用NetApp卷加密(NVE)；默认为`false`。要使用此选项，必须在集群上获得 NVE 的许可并启用 NVE 。</block>
  <block id="ee3d8ea22d8bf88f2f7fcd6d6dbf26d2" category="paragraph">指标服务可为管理员提供有关 OpenShift 集群的状态，资源利用率和可用性的宝贵信息。此外、POD自动扩展功能也需要使用此功能、许多组织会将来自指标服务的数据用于其成本分摊和/或成本分摊应用程序。</block>
  <block id="676ad90ce2543d29917d8a5a6fc02e01" category="inline-link-macro">ONTAP NAS配置选项</block>
  <block id="a44b6b00e5eebd7494e1fd00658685e2" category="inline-link-macro">NIST</block>
  <block id="83188252104d97bbc732f23aa3b26ae2" category="inline-link-macro">Gitlab：密码设置</block>
  <block id="0520b57116af979714f913239aa512a5" category="inline-link-macro">Intel：高级加密标准说明(AES-NI)</block>
  <block id="64e4c9865ee7451edfc34d72da12ee7d" category="paragraph">如果未返回任何内容、则您的处理器不支持AES-NI。有关AES-NI的详细信息、请访问： <block ref="e77f47a78a9c4677daf14d5366b503b4" category="inline-link-macro-rx"></block>。</block>
  <block id="227eef96675ec0e7595951c060437608" category="list-text">使用 ...<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block> 使用LUKS加密定义存储池。例如：</block>
  <block id="e646e16bee8b32e6ea29e30d01970a6c" category="section-title">限制</block>
  <block id="7b9eed191ce5e7cc8c8d1cb8cfe2d8c8" category="paragraph">使用非多路径配置或<block ref="a3a1d5b95e345a3db24a5a30e349f699" prefix=" " category="inline-code"></block> 或<block ref="e82e6d155396541f07f7347c984444ea" prefix=" " category="inline-code"></block> multipath.conf文件中的值将导致挂载失败。Trident已建议使用<block ref="db729c5c8df447087e5a84b961df14f6" prefix=" " category="inline-code"></block> 自21.07版起。</block>
  <block id="84ec6afbbe3e33afb3eba2b0375718b1" category="inline-link-macro">问题描述 #759</block>
  <block id="e07bc583b0f70b05fdbb1008303e8f85" category="list-text">已修复使用创建的ONTAP 后端专用的问题描述<block ref="d3ed68f7315b7e72b8d886b2278fcac3" prefix=" " category="inline-code"></block> 字段在22.07.0升级期间无法联机(<block ref="294e408500bc8358b70c680986c23bdb" category="inline-link-macro-rx"></block>）。</block>
  <block id="958424a347179b6856de7610a2b99b8d" category="inline-link-macro">问题描述 #548</block>
  <block id="9663034bca37c0603d813726d885503d" category="inline-link-macro">问题描述 760</block>
  <block id="26d08c0516dec92a4420f06d4da4fcf1" category="list-text">"** Docker："*修复了导致Docker卷插件在某些环境中无法启动的问题描述 (<block ref="78b7b57a86c570439562f2c638103de5" category="inline-link-macro-rx"></block> 和 <block ref="968dd574470c019c42c32878b5799fe9" category="inline-link-macro-rx"></block>）。</block>
  <block id="8f9d66f5cbbd4fc027dbd00d46032c8e" category="list-text">修复了连接卷时发生不必要的iSCSI LUN扫描的性能问题描述。</block>
  <block id="08e9e62a917aaf944b6ff85929a9f1dd" category="list-text">修复了问题描述 、在刷新iSCSI设备时、如果已刷新相应的多路径设备、则会返回错误。</block>
  <block id="bc5611c731b034c5f323419d0258aa44" category="list-text">Kubernetes：</block>
  <block id="98f7f8fbd26f9272ad6a29f2fb6c930b" category="list-text">为Trident部署和DemonSet添加了单独的ServiceAccount、ClusterRole和ClusterRoleBinding-以增强未来的权限。</block>
  <block id="609df46dff884c3eec4386eb8db4e358" category="inline-link-macro">跨命名空间卷共享</block>
  <block id="09065204259df86d4fe38c35ea23f5af" category="list-text">所有Trident<block ref="aa44e980d222d5134b5e0d8a062e1543" prefix=" " category="inline-code"></block> 现在、存储驱动程序可与ONTAP REST API配合使用。</block>
  <block id="8485ea08789af7b6b7b44e024b526f9b" category="list-text">添加了新的运算符YAML <block ref="5a02ebff4889c2de0379a0fb10bed282" prefix="(" category="inline-code"></block>)、而不使用<block ref="316707d12484dd3afede08839dee49bc" prefix=" " category="inline-code"></block> 以支持Kubernetes 1.25。</block>
  <block id="26e871bef43095263845143b043aee4f" category="inline-link-macro">支持LUKS加密卷</block>
  <block id="30b044636a9c63ab4b202192eec30c1c" category="list-text">增加了对Windows Server 2019节点的支持。</block>
  <block id="38b9dc57f44121e6d970b34eede9ad0d" category="inline-link-macro">支持Windows节点上的SMB卷</block>
  <block id="af8a9d07c7391207db96957ab59cb459" category="list-text">** Kubernetes：*已将支持的最低Kubernetes更新为1.20。</block>
  <block id="d667cfc8e8d6ec0c2352fe97b0f09e40" category="list-text">已删除Astra数据存储(ADS)驱动程序。</block>
  <block id="9b363ea2db99fe0dc5e9b43f47a37f20" category="list-text">删除了对的支持<block ref="a6105c0a611b41b08f1209506350279e" prefix=" " category="inline-code"></block> 和<block ref="8c319f28d81d1527a9428e9a5c2195f5" prefix=" " category="inline-code"></block> 选项<block ref="19b30dc119e514235b739e076be9b3cc" prefix=" " category="inline-code"></block> 为iSCSI配置工作节点多路径时。</block>
  <block id="1407cfeeb5e3916e1435ddea0f1c0a28" category="section-title">22.07中的更改</block>
  <block id="071d9becf308917b53d70c09e7da51b6" category="list-text">访问受支持的NetApp存储系统。</block>
  <block id="19eb712f406fc64109f96d9cf4055cb9" category="list-text">能够从所有Kubernetes工作节点挂载卷。</block>
  <block id="5f35b91e200cda68bf700d65b89c2c73" category="list-text">具有的Linux主机<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block> (或<block ref="fb024832e51eb5f6da9113a745f1eb59" prefix=" " category="inline-code"></block>(如果您使用的是OpenShift)已安装并配置为管理要使用的Kubernetes集群。</block>
  <block id="50f33d14f129e4548c1c270fd6725a78" category="section-title">配置选项</block>
  <block id="05f901da7fdacb9ca59e3d7e2d40f98d" category="cell"><block ref="0f4137ed1502b5045d6083aa258b5c42" prefix="" category="inline-code"></block></block>
  <block id="a3ff66cf5848a34d56915c8e879a5d52" category="section-title">配置示例</block>
  <block id="5f82f4ab2783617b6e62bdd43d4a4e49" category="doc">准备使用ONTAP SAN驱动程序配置后端</block>
  <block id="19eb1a22d8687def5fb4904d3402728a" category="doc">在命名空间之间共享NFS卷</block>
  <block id="6b456f0abe4c4d2f0beb62e5985136cf" category="list-text">可通过多个级别的访问控制来确保安全性</block>
  <block id="6e5d93bf8e8aaaa4795a50f012bc8fea" category="list-text">适用于所有Trident NFS卷驱动程序</block>
  <block id="0ece56dd58b5aabac15e0d0a30553bc0" category="list-text">不依赖于tridentctl或任何其他非本机Kubernetes功能</block>
  <block id="b6fcfcfd30bda2a77ebc74f23270f581" category="paragraph">此图显示了两个Kubernetes命名空间之间的NFS卷共享。</block>
  <block id="45208a2cac11f33c3e6af84d444ac7c5" category="image-alt">跨命名空间共享的概念图。</block>
  <block id="06ad314b340900d226b1196e1fe289e9" category="section-title">快速入门</block>
  <block id="f5b36cc36c8381e7577788dd4db2019d" category="paragraph">只需几个步骤即可设置NFS卷共享。</block>
  <block id="88b05b42d60719619c24f6101bcd381a" category="paragraph">源命名空间所有者授予访问源PVC中数据的权限。</block>
  <block id="7037976663710169f00563675ffd3f91" category="paragraph">集群管理员向目标命名空间的所有者授予创建TridentVolumeReference CR的权限。</block>
  <block id="46374486db0641fa4a3fc8e9c73766ed" category="paragraph">目标命名空间的所有者将创建TridentVolumeReference CR以引用源PVC。</block>
  <block id="33fefc8d535df49d886c4bc78a08e3e5" category="paragraph">目标命名空间的所有者创建从属PVC以使用源PVC中的数据源。</block>
  <block id="7238deab481379c03df561ea7c9b0e2e" category="section-title">配置源和目标命名空间</block>
  <block id="b23d212300860aa39d44f8fad02636a1" category="paragraph">为了确保安全性、跨命名空间共享需要源命名空间所有者、集群管理员和目标命名空间所有者的协作和操作。每个步骤都会指定用户角色。</block>
  <block id="aae019fccb9b3ffee1ee77e9e5f2377a" category="list-text">*源命名空间所有者：*创建PVC <block ref="30520f4f96804df83914260b79f55962" prefix="(" category="inline-code"></block>)、以授予与目标命名空间共享的权限 <block ref="6fde1ba4470caca933058264dbfdea2e" prefix="(" category="inline-code"></block>)<block ref="287f26e3328f9ac0f3f4da2cdaddd3e2" prefix=" " category="inline-code"></block> 标注。</block>
  <block id="365b452a5b5d2d01e1f193fc8bd9bf2c" category="list-text">您可以使用逗号分隔列表将PVC共享给多个命名空间。例如：<block ref="6b31015528f67fe4ce10b7c81957f601" prefix=" " category="inline-code"></block>。</block>
  <block id="fefd0d1f7e80bb8a4657265696b66694" category="list-text">您可以使用共享到所有命名空间<block ref="3389dae361af79b04c9c8e7057f60cc6" prefix=" " category="inline-code"></block>。例如：<block ref="e06421e15aa316addc52dd6c697027b7" prefix=" " category="inline-code"></block></block>
  <block id="bac5e1b9773b73b6702dfe25c8a61a05" category="list-text">您可以更新PVC以包括<block ref="287f26e3328f9ac0f3f4da2cdaddd3e2" prefix=" " category="inline-code"></block> 随时添加标注。</block>
  <block id="512fce88fc641bb15b14b72474159acd" category="list-text">*集群管理员：*创建自定义角色并执行kubeconfig、以授予目标命名空间所有者在目标命名空间中创建TridentVolumeReference CR的权限。</block>
  <block id="5f560764a361bf1159f8a6c8cbd15dad" category="list-text">*目标命名空间所有者：*在目标命名空间中创建引用源命名空间的TridentVolumeReference CR<block ref="30520f4f96804df83914260b79f55962" prefix=" " category="inline-code"></block>。</block>
  <block id="d9bb6497cda089fc4a386c685a97cffa" category="list-text">*目标命名空间所有者：*创建PVC <block ref="3f6857fc20ae2372499a71869ac3fe7e" prefix="(" category="inline-code"></block>) <block ref="6fde1ba4470caca933058264dbfdea2e" prefix="(" category="inline-code"></block>)<block ref="57c54cbee1c6ed3d5902aa1d8cd1e55a" prefix=" " category="inline-code"></block> 用于指定源PVC的标注。</block>
  <block id="e22f320aefbf1cdb3ccd68c26b050060" category="admonition">目标PVC的大小必须小于或等于源PVC。</block>
  <block id="a5ddf1dcee266e65795efb120a45d2cb" category="section-title">删除共享卷</block>
  <block id="9f2f83b0c97d84774c1d61107283bb68" category="paragraph">使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 实用程序中、您可以运行<block ref="b5eda0a74558a342cf659187f06f746f" prefix=" " category="inline-code"></block> 用于获取从属卷的命令。有关详细信息、请参见链接：./trident referation/tridentctl.html<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix="[" category="inline-code"></block> 命令和选项]。</block>
  <block id="b1cc54ad6906d5f41516543bae01e46f" category="list-text"><block ref="490aa9b616d8535386ddf1c7037f79a0" prefix="" category="inline-code"></block>：卷帮助。</block>
  <block id="20668f390d13376c8d13ab4b20a53b5d" category="list-text"><block ref="e3bbbed29599d3e6e29ae22829ad7f13" prefix="" category="inline-code"></block>：将查询限制为从源卷。</block>
  <block id="92c22bb3853554f94f513a2d2f36e8ef" category="list-text"><block ref="aed2a4a749284f757648f1057abf44cd" prefix="" category="inline-code"></block>：将查询限制为卷的下属。</block>
  <block id="3908892c437778f8b161a2ca006782cd" category="list-text">无法在从属卷上执行快照、克隆和镜像。</block>
  <block id="aec47cf6a0cb83824b504b756eb4b71c" category="doc">准备配置Azure NetApp Files 后端</block>
  <block id="97d64245613ba751b698ce77fd51779a" category="inline-link">Azure：设置Azure NetApp Files 并创建NFS卷</block>
  <block id="caa7dc98c21b44b17c214508b9b0fa3c" category="list-text"><block ref="bc54592d6183695b841c6d1880ec0bf8" prefix="" category="inline-code"></block>，<block ref="93c5bebdea9c94a0740fe6fd9bb250f0" prefix=" " category="inline-code"></block>，和<block ref="2b53761249254ce6b502f521e5cc0683" prefix=" " category="inline-code"></block> 从 <block ref="63405c89f422580946169fa59c41e7ae" category="inline-link-macro-rx"></block> 在 Azure Active Directory 中，具有足够的 Azure NetApp Files 服务权限。应用程序注册应使用以下任一项：</block>
  <block id="ee495045d2c4c5131217a0248a404b4d" category="inline-link-macro">由Azure预定义</block>
  <block id="2fbc632d5939633cc9c3b254d116080f" category="inline-link-macro">自定义贡献者角色</block>
  <block id="b0ee19cc46a4fb3df97c1c676c0a5d57" category="inline-link-macro">使用Azure门户分配角色</block>
  <block id="77a4a369d552f7d3be163bda86f9113f" category="section-title">SMB卷的其他要求</block>
  <block id="7595de66780a622cdd37b4823afebc07" category="inline-link-macro">GitHub：CSI代理</block>
  <block id="c680a0c023a6d45186b9752a07e9938c" category="inline-link-macro">GitHub：适用于Windows的CSI代理</block>
  <block id="2d6b406e65ac91f2af09f4228e3efe4f" category="list-text">配置为Windows服务的CSI代理。配置<block ref="0f8126c17871ed45f2a848f15d96a1bb" prefix=" " category="inline-code"></block>、请参见 <block ref="3ca23c6eadaac7aa23a492aef5e5d012" category="inline-link-macro-rx"></block> 或 <block ref="0b56a9ad79a8fef177779e7d3d856994" category="inline-link-macro-rx"></block> 适用于在Windows上运行的Kubernetes节点。</block>
  <block id="eb89f16d07a93fa10a31ec6309045fe9" category="doc">ONTAP SAN配置选项和示例</block>
  <block id="b8ae61dc50cf8e8b79e68bc4a8d36393" category="cell"><block ref="0f179ba2bc32ab5d8f60692f5b800c86" prefix="" category="inline-code"></block></block>
  <block id="a56dcba8eacdac67fb510e1434d560d8" category="inline-link-macro">使用Linux统一密钥设置(LUKS)</block>
  <block id="fd05c90de484dbc1cb963df796886af4" category="doc">准备使用ONTAP NAS驱动程序配置后端</block>
  <block id="17a48ec106d5505e674ccdf56fce1058" category="doc">Azure NetApp Files 后端配置选项和示例</block>
  <block id="55eaeeb515ba1b8a42eb736b0e58f41f" category="cell">一个卷的一组vNet功能可能是<block ref="972e73b7a882d0802a4e3a16946a2f94" prefix=" " category="inline-code"></block> 或<block ref="eb6d8ae6f20283755b339c0dc273988b" prefix=" " category="inline-code"></block>。网络功能并非在所有地区都可用、可能需要在订阅中启用。指定 <block ref="b0fdc9c7b96e4249152c61b506703142" prefix=" " category="inline-code"></block> 如果未启用此功能、则会导致卷配置失败。</block>
  <block id="cc3d42de123c784e8d8e3c8404b943be" category="cell">精细控制 NFS 挂载选项。SMB卷已忽略。要使用NFS 4.1挂载卷、请包括 <block ref="c72da907ddca73ee114d92e5e098ce0e" prefix=" " category="inline-code"></block> 在逗号分隔的挂载选项列表中选择NFS v4.1。存储类定义中设置的挂载选项会覆盖后端配置中设置的挂载选项。</block>
  <block id="f0873081464f48da27a1068215270c60" category="cell"><block ref="296026821ada2ab8aebcf13547a63df5" prefix="" category="inline-code"></block></block>
  <block id="c0a4a0396978d1ad8816d2e358a2f05e" category="cell">配置NFS或SMB卷创建。选项包括<block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix=" " category="inline-code"></block>，<block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix=" " category="inline-code"></block> 或为空。默认情况下、将设置为空会将NFS卷设置为空。</block>
  <block id="71e598dd105d32592243532b55392c55" category="cell"><block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix="" category="inline-code"></block></block>
  <block id="8cacf42dcc11f9e7779267100d4fd305" category="inline-link-macro">配置Azure NetApp Files 卷的网络功能</block>
  <block id="4ace77649689419cf09eed38ddf4e74c" category="admonition">有关网络功能的详细信息、请参见 <block ref="d4c16e3034c39d54544a2d5f2b2953d9" category="inline-link-macro-rx"></block>。</block>
  <block id="d37198994935307f0e4a95505678642e" category="section-title">所需权限和资源</block>
  <block id="1860dce26ad531b08f4b17950bbda6a7" category="paragraph">的值<block ref="6a3560738716ddd805d769d4460ca7aa" prefix=" " category="inline-code"></block>，<block ref="87d26f327b9deeb6141721bda7f8ca65" prefix=" " category="inline-code"></block>，<block ref="338b00a62e6d8d3234c056bf48b711d0" prefix=" " category="inline-code"></block>，<block ref="a88edbe6cce8d8f180d87bef83408312" prefix=" " category="inline-code"></block>，和<block ref="4f556606ab1f7cb51dd23811407facbd" prefix=" " category="inline-code"></block> 可以使用短名称或完全限定名称来指定。在大多数情况下、建议使用完全限定名称、因为短名称可以与多个同名资源匹配。</block>
  <block id="8771cfaef1f991e1642d0a1ece8dcfa3" category="paragraph">。<block ref="6a3560738716ddd805d769d4460ca7aa" prefix=" " category="inline-code"></block>，<block ref="87d26f327b9deeb6141721bda7f8ca65" prefix=" " category="inline-code"></block>，和<block ref="338b00a62e6d8d3234c056bf48b711d0" prefix=" " category="inline-code"></block> 值是指筛选器、用于将发现的一组资源限制为此存储后端可用的资源、并且可以以任意组合方式指定。完全限定名称采用以下格式：</block>
  <block id="be1b9ef68f31ecee991e2282c1f24f0f" category="section-title">卷配置</block>
  <block id="6154de53659ccfe0ba0733effdb2da13" category="paragraph">您可以通过在配置文件的特殊部分中指定以下选项来控制默认卷配置。请参见 <block ref="c850cc933797a5d4472ae11f15a5ef5e" category="inline-xref-macro-rx"></block> 了解详细信息。</block>
  <block id="ea221277b2f168f5e17d112765f4a1c0" category="cell">新卷的导出规则。<block ref="c72971f17465d2a32345bc872af62a34" prefix=" " category="inline-code"></block> 必须是以CIDR表示法表示的任意IPv4地址或IPv4子网组合的逗号分隔列表。SMB卷已忽略。</block>
  <block id="21590b83460bd480131384ef53bdccc4" category="cell">新卷的UNIX权限(4个八进制数字)。SMB卷已忽略。</block>
  <block id="10c0eb6973453da95b4ef937f19ddb6c" category="section-title">示例配置</block>
  <block id="cad675ae3fb846705512fe460e615ac3" category="paragraph">以下内容<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block> 定义是指上述存储池。</block>
  <block id="1abbfd87ab307af55b755fd27ce60191" category="paragraph">使用<block ref="4d859186a09b1da3597e5901157d9400" prefix=" " category="inline-code"></block> 您可以为每个指定<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block> 用于托管卷的虚拟池。卷将在选定池中定义各个方面。</block>
  <block id="4b7db799aa8307d15835ff36beb1b97c" category="section-title">SMB卷的示例定义</block>
  <block id="82b60bb483328d8efe9240dc8aa4a600" category="paragraph">使用<block ref="296026821ada2ab8aebcf13547a63df5" prefix=" " category="inline-code"></block>，<block ref="e12fdd044232e643620eed06bf33c7af" prefix=" " category="inline-code"></block>，和 <block ref="1ad68a6a046942b7c1666aed825df70a" prefix=" " category="inline-code"></block>、您可以指定SMB卷并提供所需的Active Directory凭据。</block>
  <block id="c51cc3b801a879870aea846bdde1c7a3" category="section-title">创建后端</block>
  <block id="7d8058d93ec1d95c673d83bf303326ff" category="doc">ONTAP NAS配置选项和示例</block>
  <block id="ea61e2c2ff507048203824add1eb7c21" category="section-title">注意事项</block>
  <block id="d041a310ba7cc2599250e64801594107" category="list-text">增加了对的支持 <block ref="ca184a2eda203b6d98158bdf24e5cf7d" category="inline-link-macro-rx"></block>。</block>
  <block id="adbfe36f6399f2846983b2901604a962" category="list-text">已添加 <block ref="40be42d37bc6014716dcd0a1d368ffb5" category="inline-link-macro-rx"></block> 通过<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block> 存储驱动程序。</block>
  <block id="f18a50f02f48551895d57b81dd288142" category="sidebar">在命名空间之间共享NFS卷</block>
  <block id="66f2c42a4ca561f5472459301bc7d096" category="list-text">ONTAP 驱动程序的自动MetroCluster 切换检测现已全面推出。</block>
  <block id="e87ded5ef8bc8adbc3c135528636f4f2" category="list-text"><block ref="e87ded5ef8bc8adbc3c135528636f4f2" category="inline-link-macro-rx"></block></block>
  <block id="fce586d9f649fb529d0a1846495ba259" category="list-text"><block ref="fce586d9f649fb529d0a1846495ba259" category="inline-link-macro-rx"></block></block>
  <block id="ecd7650a65b79124ad23fb7eed8faa7e" category="paragraph">NetApp产品组合中的每个存储平台都具有独特的功能、无论应用程序是容器化还是非容器化、都能从中受益。</block>
  <block id="e6dc22cf3c59dda6e09524b2b133f336" category="section-title">平台概述</block>
  <block id="050fb8b0306d7532dbf8c15b8cba9745" category="paragraph">Trident 可与 ONTAP 和 Element 结合使用。没有一个平台比另一个平台更适合所有应用程序和场景，但是，在选择平台时，应考虑应用程序和设备管理团队的需求。</block>
  <block id="31b1d21fc5180ec9a5b3d9d7d5ce3295" category="paragraph">https://&lt;login&gt;:&lt;password&gt;@&lt;mvip&gt;/json-rpc/&lt;element-version&gt;</block>
  <block id="8eadd25d5b4b5d0637cc13cd7349ce5d" category="paragraph">https://admin:admin@192.168.160.3/json-rpc/8.0</block>
  <block id="88825f48aa3e053d7df66897e8b63e38" category="section-title">验证要求</block>
  <block id="6bee7851f8606d588c9122b234c202e3" category="list-text">验证您的部署是否满足所有要求 <block ref="6fc1811f5f9a8ae54793544600e2dff7" category="inline-link-macro-rx"></block>。</block>
  <block id="0dabff490bbf6c7e308950959cc5a024" category="section-title">了解安装程序</block>
  <block id="99c850b82f45e568828f2a8c5ab8f94d" category="section-title">了解卷访问组</block>
  <block id="7c14ddfe8f627e4786f4da7cd4cea9ba" category="section-title">存储类关联</block>
  <block id="ab4589eca69db942d79a0dbbd9ec8399" category="section-title">卷创建</block>
  <block id="3b878279a04dc47d60932cb294d96259" category="section-title">概述</block>
  <block id="a6fbed601c3d014f6d8342990aeee0b5" category="section-title">了解如何创建卷快照</block>
  <block id="7a72a102c2990b674624e8b6ec834e4d" category="section-title">何时使用REST API</block>
  <block id="eee97547fb40d9c4df018377ac6478bb" category="section-title">使用REST API</block>
  <block id="ee656aff7dc78e280efdea39a682afbb" category="section-title">升级前的注意事项</block>
  <block id="4e9ac50b8f51023570ef0b0a0a827912" category="inline-link-macro">支持的Kubernetes版本</block>
  <block id="c27e444dab3a08bf8ec59794897c1a27" category="inline-link-macro">支持的Kubernetes版本</block>
  <block id="4f0e7dc30ffb3e25e75331c9afb2243a" category="cell">卷模式</block>
  <block id="28c142639a9bbdd526b8eb986c13907d" category="paragraph">无文件系统；原始块设备</block>
  <block id="98f770b0af18ca763421bac22b4b6805" category="section-title">功能</block>
  <block id="8ff961668c6784e84b25c265cbb629d7" category="paragraph">要了解有关跨命名空间卷访问的详细信息、请执行以下操作：</block>
  <block id="f1cfea5f1444de607dfa549b3aa57010" category="inline-link-macro">在命名空间之间共享卷：对跨命名空间卷访问说Hello</block>
  <block id="2780f690b7670efc296ac19ef3029d0c" category="list-text">请访问 <block ref="b0d29f1b2abb2cc552e4cc47177582ef" category="inline-link-macro-rx"></block>。</block>
  <block id="96e1384807331548bf745acde0fe1b73" category="inline-link-macro">NetAppTV</block>
  <block id="bd2cc8575fe69c7f775292759380c838" category="inline-link-macro">bundle_pre_1_25.yaml</block>
  <block id="5a02ebff4889c2de0379a0fb10bed282" category="inline-link-macro">bundle_post_1_25.yaml</block>
  <block id="d59db7846bd10b6d60d21543df9faa9e" category="paragraph-title">您需要的内容</block>
  <block id="6c6e605e09d47da14693d106977b6eb0" category="section-title">管理<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 后端使用<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block></block>
  <block id="78fb4311dea625690d7fb6274025625a" category="section-title">第2步：创建<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR</block>
  <block id="d6f4b4bedc693acd49ad08c1cf0cdad5" category="section-title">第3步：验证的状态<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR</block>
  <block id="a035fed1dd97545349b5fffbd9e3e88f" category="section-title">管理<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> 后端使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block></block>
  <block id="0901a332c26ed210204bad23d45c8b6d" category="section-title">第1步：确认<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block> 设置为<block ref="16d79ff80feadcf2f52096f073f2b94a" prefix=" " category="inline-code"></block></block>
  <block id="2f1beb23541bc11eb53ca6b33485d4f8" category="section-title">第2步：删除<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR</block>
  <block id="06c2cea18679d64399783748fa367bdd" category="inline-image-macro">一个</block>
  <block id="32ec9b4824220f8ae03a723da009cd54" category="paragraph-title"><block ref="58f667aaf05f87159670e12bd9bc076b" category="inline-image-macro-rx" type="image"></block> 配置源PVC以共享卷</block>
  <block id="aada29daee1d64ed0fe907043855cb7e" category="inline-image-macro">两个</block>
  <block id="82a9b6c32a91a1f4a714d648f5d3260f" category="paragraph-title"><block ref="54f425ce8d89f4ed6b8a546561af5d60" category="inline-image-macro-rx" type="image"></block> 授予在目标命名空间中创建CR的权限</block>
  <block id="ca8a2087e5557e317599344687a57391" category="inline-image-macro">三个</block>
  <block id="311a877e773f97b1e237db665a868dd9" category="paragraph-title"><block ref="05b2444faffd66d76e88602ea7dd353f" category="inline-image-macro-rx" type="image"></block> 在目标命名空间中创建TridentVolumeReference</block>
  <block id="981b8fcee42e1e726a67a2b9a98ea6e9" category="inline-image-macro">四个</block>
  <block id="fb16fc9d34d26a8e74ba1a7180766513" category="paragraph-title"><block ref="beadfa85a2fdca06b91edc1131c603e6" category="inline-image-macro-rx" type="image"></block> 在目标命名空间中创建从属PVC</block>
  <block id="fd69c5cf902969e6fb71d043085ddee6" category="paragraph-title">结果</block>
  <block id="3f8e335666124e3b7f5db07f03fef0b1" category="section-title">使用 ...<block ref="fed7609223e8cae53e079facb24f3426" prefix=" " category="inline-code"></block> 查询从属卷</block>
  <block id="260817022a7340fc89eae3e7dbed8f6a" category="section-title">使用的示例定义<block ref="4d859186a09b1da3597e5901157d9400" prefix=" " category="inline-code"></block> 字段</block>
  <block id="19ef07597f79648211dbed100709836b" category="section-title">更新后端以包括<block ref="1f2a94e142bf020b1f7c6297ec12413f" prefix=" " category="inline-code"></block></block>
  <block id="891d26d5e7410db6c0a971245c6025c0" category="section-title">示例1：的后端配置<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> 具有三种卷类型的驱动程序</block>
  <block id="454631312fab234fc91bb2f85a751fac" category="section-title"><block ref="913a4b06671d1e04e6582a85afe3abbe" prefix="" category="inline-code"></block></block>
  <block id="e892fda55ead7e15eed753e850d35f12" category="section-title">第2步：创建<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR</block>
  <block id="74257eabdceb63f8522f7c68b103da3a" category="section-title">禁用<block ref="d51321f13693d09d4a9cbb2758b42d12" prefix=" " category="inline-code"></block> 用于应用程序SVM</block>
  <block id="e49cf31f5ed35f0eb694c7714e8c3234" category="section-title"><block ref="76ea0bebb3c22822b4f0dd9c9fd021c5" prefix="" category="inline-code"></block></block>
  <block id="3649b15e31d22a1e2210f014d843b9fa" category="section-title"><block ref="099af53f601532dbd31e0ea99ffdeb64" prefix="" category="inline-code"></block></block>
  <block id="a4027ed0f56ae6ac2cbb7605a519932b" category="section-title"><block ref="b5eda0a74558a342cf659187f06f746f" prefix="" category="inline-code"></block></block>
  <block id="7920cf9e1a990d156e390321c1d5efeb" category="section-title"><block ref="59b514174bffe4ae402b3d63aad79fe0" prefix="" category="inline-code"></block></block>
  <block id="cc27cfd3259c2299d8dece590d5f6985" category="section-title"><block ref="19ad89bc3e3c9d7ef68b89523eff1987" prefix="" category="inline-code"></block></block>
  <block id="2acfb4ba14a6f33d7e82e8d1dda6542f" category="section-title"><block ref="2165e4fa5bddb65a31f6a0c495c2fa37" prefix="" category="inline-code"></block></block>
  <block id="9ce837bc2492d4ed390bc5d1ea9d1437" category="section-title"><block ref="2541d938b0a58946090d7abdde0d3890" prefix="" category="inline-code"></block></block>
  <block id="30cf71e674825d319eb0406032c1a80b" category="section-title"><block ref="3ac340832f29c11538fbe2d6f75e8bcc" prefix="" category="inline-code"></block></block>
  <block id="c4e2f712f33e39883cdadc27311ff798" category="section-title">Kubernetes<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block> 对象</block>
  <block id="40f23ed795a1a88d4da7ac2ef847ff7f" category="section-title">Kubernetes<block ref="858e55ea2e6429120a862313c50a9f5f" prefix=" " category="inline-code"></block> 对象</block>
  <block id="7df5b64daec466033329296995f05735" category="section-title">Kubernetes<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block> 对象</block>
  <block id="db36743614e87531d560fe8ae0bc6c7d" category="section-title">Kubernetes<block ref="19476662cd814e0aa085eca121de89b8" prefix=" " category="inline-code"></block> 对象</block>
  <block id="63f2f0978770be469911c5f1722d82ca" category="section-title">Kubernetes<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block> 对象</block>
  <block id="1ca312948dba5b1321da24bc362f4148" category="section-title">Kubernetes<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block> 对象</block>
  <block id="4171707fb2a131f0fae96196310c5e3b" category="section-title">Kubernetes<block ref="99bc4b850e05bafd67cf5f5f49344c1e" prefix=" " category="inline-code"></block> 对象</block>
  <block id="4f89992961c018acecad7b373dcce336" category="section-title">清理<block ref="0b79951d94d2a7fc1f7ba55091959bda" prefix=" " category="inline-code"></block> 如果安装失败</block>
  <block id="b9984d1eca39b86eb39cedf7db8f8c62" category="section-title">删除<block ref="0b79951d94d2a7fc1f7ba55091959bda" prefix=" " category="inline-code"></block></block>
  <block id="a3edb76d25dfeb8d67e4711eafd2b5ca" category="paragraph">为存储系统选择并部署后端驱动程序。</block>
  <block id="a57628924f909d4edd5cb81ee4f10896" category="section-title">ONTAP 后端驱动程序</block>
  <block id="4ea57c8a88545a4fc2039131bc6fd74d" category="paragraph">ONTAP 后端驱动程序可通过所使用的协议以及在存储系统上配置卷的方式来区分。因此、在确定要部署的驱动程序时、请仔细考虑。</block>
  <block id="642b59503457da90c85cbb7a35e02089" category="paragraph">可用的ONTAP 后端驱动程序包括：</block>
  <block id="e44e590e4645ab9ef08fb84f61cede17" category="section-title">Cloud Volumes ONTAP 后端驱动程序</block>
  <block id="fdde450e1a16aa1461e62c6fa5ac621f" category="section-title">适用于ONTAP 的Amazon FSX后端驱动程序</block>
  <block id="d079959bb7c738f4e1704de5ff69b897" category="section-title">NetApp HCI/SolidFire后端驱动程序</block>
  <block id="64648abd6d020446c9c8d556a1584d71" category="section-title">Azure NetApp Files 后端驱动程序</block>
  <block id="0dceb918cb4a4d7dcbe5af26d08e7657" category="section-title">特定后端利用率</block>
  <block id="ebaf90f7386ae95e7960a2fc0084116e" category="section-title">模拟QoS策略</block>
  <block id="125ad0610423d53866d257eb097320e4" category="section-title">根据特定功能使用后端</block>
  <block id="b6e026d8066036cf2628237905a58384" category="section-title">模拟不同的服务级别/QoS</block>
  <block id="628fd4af2a4e2fce014efbf03b84bb71" category="section-title">分配特定的方面</block>
  <block id="a599393b295f7ad56a8c7f1d327290de" category="paragraph">此示例将创建现有PVC的快照。</block>
  <block id="f6bd0d7447ff66cc6b859603a88fbde9" category="section-title">相关链接</block>
  <block id="35aa4a2a819e526c2e930e487df8d423" category="list-text"><block ref="35aa4a2a819e526c2e930e487df8d423" category="inline-link-macro-rx"></block></block>
  <block id="19476662cd814e0aa085eca121de89b8" category="inline-link-macro">VolumeSnapshotClass</block>
  <block id="d63cadc96caf4b05f8fa532b08e889da" category="list-text"><block ref="d63cadc96caf4b05f8fa532b08e889da" category="inline-link-macro-rx"></block></block>
  <block id="3b64653c97a388d828849314b6a1b383" category="cell">池的标签值必须：</block>
  <block id="6da89265a9a8b0b28eb4946bb2ec0c6d" category="cell">匹配</block>
  <block id="ecf92052d55345fee4602d9eb8c22063" category="cell">不匹配</block>
  <block id="c6c1caf73b0f83d807abe5a717014ab7" category="cell">位于一组值中</block>
  <block id="8daf6b016f4033d59900c23f162c0f73" category="cell">不在值集内</block>
  <block id="c6bfba38b789fec8271d1d1496a9ee59" category="cell"><block ref="42538adbdb6240b2b083a000a615d5bd" prefix="" category="inline-code"></block></block>
  <block id="152f5dc0f7ac734f8e8ee17d4a482462" category="cell">protection</block>
  <block id="7b532e697a35209f3df3956577cc3d9c" category="cell">存在任何值</block>
  <block id="eb0254f1d0a82e646c239d4d2e2f83ac" category="cell"><block ref="f65e5ff2a1bb1af969dccabe7dcd5cdd" prefix="" category="inline-code"></block></block>
  <block id="67a3b723b2d9024808eb2c6e686d00a0" category="cell">！保护</block>
  <block id="1fde97909b90bb329db2062f7744bd45" category="cell">不存在</block>
  <block id="5eb07a7cb7d445ef6bbb17270c65cf52" category="list-text">如果使用RHCOS 4.5或更高版本或其他与RHEL兼容的Linux分发版、请与结合使用<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> 驱动程序和Element OS 12：5或更早版本、请确保中的CHAP身份验证算法设置为MD5<block ref="104f48adc29dc1e1d7c9bbe7b5dd3f8d" prefix=" " category="inline-code"></block>。Element 12.7提供了符合FIPS的安全CHAP算法SHA1、SHA-256和SHA3-256。</block>
  <block id="18c20e5d2e368f36f420dd39019d460f" category="list-text">如果使用<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> 驱动程序对于OpenShift 4.5、请确保底层工作节点使用MD5作为CHAP身份验证算法。Element 12.7提供了符合FIPS的安全CHAP算法SHA1、SHA-256和SHA3-256。</block>
  <block id="5896cc977dd7b9854957e18a2a5bf072" category="cell">要为创建的卷分配的自适应 QoS 策略组。选择每个存储池 / 后端的 qosPolicy 或 adaptiveQosPolicy 之一。不受 ontap-nas-economy.</block>
  <block id="19ab49765cdd2c8ab592eb40eeff08cf" category="cell">ontap-san、solidfire-san、ontap-san-economy.</block>
  <block id="054b5072368dea4f8748909c16c7de98" category="cell">Thick：All ONTAP ；Thin：All ONTAP &amp; solidfire-san</block>
  <block id="dbdc06f8742b98dcacdf7fdb1af111ea" category="paragraph">ontap-nas、ontap-nas-economy. ontap-nas-flexgroup、ontap-san、solidfire-san、GCP-CVS、azure-netapp-files、ontap-san-economy.</block>
  <block id="f888aa18c19e41f8c1263fa99ca8b94c" category="cell">solidfire-san、ontap-nas、ontap-nas-economy. ontap-nas-flexgroup、ontap-san、ontap-san-economy.</block>
  <block id="05a2712653dfbf7d695c18242d9848e6" category="paragraph">RHEL 8+</block>
  <block id="bba4e1b8d8614fe9da2d67e2dcef4b52" category="paragraph"><block ref="8321592ce24c8a122ecf26a63cfca407" prefix="" category="inline-code"></block>，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>，<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>，<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>，<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block></block>
  <block id="c95cada2a569592345ebc18e5ef4c7aa" category="paragraph">协议 LIF 的 IP 地址。</block>
  <block id="25edde63e4922bb316018c25888e64a6" category="inline-link-macro">ONTAP 选择性LUN映射</block>
  <block id="0350980c728940d67af063bb5d711f0f" category="paragraph">有关基于系统d的系统的示例单元文件、请参见<block ref="50a97f9b0dec64cc53ca48406c60fe4d" prefix=" " category="inline-code"></block> 在Git repo.要对RHEL使用此文件、请执行以下操作：</block>
  <block id="2f6c694f9d016c7193ece4853c402d96" category="doc">自定义Trident操作员安装</block>
  <block id="79445b5dba623a55ad4d974712853c2f" category="cell"><block ref="2b8b5018006a800ae06485c3aacfa08d" prefix="" category="inline-code"></block></block>
  <block id="cbea7dc9eb2c3c926a86130b0be6368f" category="cell">设置Trident运算符的映像提取策略。有效值为：<block ref="68eec46437c384d8dad18d5464ebc35c" prefix=" " category="inline-code"></block> 以始终提取映像。<block ref="7803982c6b845094275e8e83f0fad3a6" prefix=" " category="inline-code"></block> 仅当节点上尚不存在映像时才提取该映像。<block ref="6e7b34fa59e1bd229b207892956dc41c" prefix=" " category="inline-code"></block> 从不提取映像。</block>
  <block id="ac7c98af4f51cc4b20acafb785a53284" category="cell"><block ref="7803982c6b845094275e8e83f0fad3a6" prefix="" category="inline-code"></block></block>
  <block id="2f74d18d1c9959832fc00b898fa2417e" category="doc">使用Helm部署Trident操作员(标准模式)</block>
  <block id="6852076d7b753ee3ea825ae4af1375ac" category="inline-link-macro">脱机部署过程</block>
  <block id="2f5480efe7a0a4b0cffbf110abec11c2" category="paragraph">使用Trident <block ref="cdacb2b0d49176a3c0d8cc9d693de833" category="inline-link-macro-rx"></block> 您可以一步部署Trident操作员并安装Trident。</block>
  <block id="3342f1a2f74c6062a39d3076c35c5a5b" category="inline-link-macro">安装概述</block>
  <block id="6657de3ab3deaeef939684c50d5310e3" category="paragraph">请查看 <block ref="17128a3e349370ba21c9ca13ca0bc297" category="inline-link-macro-rx"></block> 以确保满足安装前提条件并为您的环境选择正确的安装选项。</block>
  <block id="8f3958d59b8da100a4663b1cace112b7" category="inline-link-macro">部署前提条件</block>
  <block id="64d2af40480a5cebf7e64939f6253bf3" category="paragraph">除了 <block ref="c7282b7e52e27c635b613335e59bf436" category="inline-link-macro-rx"></block> 您需要 <block ref="fc0cdbd8defe0c7175199dd05a0f8e76" category="inline-link-macro-rx"></block>。</block>
  <block id="d75fdc8e85ddcd7e9dc9f367168dec11" category="paragraph">您可以使用<block ref="cd4140d3de30b520500459331d08d2bf" prefix=" " category="inline-code"></block> 查看安装详细信息、例如名称、命名空间、图表、状态、应用程序版本、和修订版号。</block>
  <block id="4c5ab57df808d08e9978671e7e81bb2a" category="section-title">在安装期间传递配置数据</block>
  <block id="c2bae6a1b11b371647052979113c2b7c" category="cell"><block ref="2c1d18b300e96c797f390483b0c6acdb" prefix="" category="inline-code"></block> (或<block ref="5338b151154663bac9980b0f044518f2" prefix=" " category="inline-code"></block>）</block>
  <block id="0bfab21a3b7a34a60173df3f165eda9c" category="paragraph">指定包含覆盖的YAML文件。可以多次指定此值，最右侧的文件将优先。</block>
  <block id="ef136231fb37749162723573d36b19c9" category="cell"><block ref="8b5806248570dbb13e7d3bc5e6c0ee37" prefix="" category="inline-code"></block></block>
  <block id="7595b6387dfaf9307f563edc4d951a0d" category="paragraph">在命令行上指定覆盖。</block>
  <block id="ef911ad0da9f5477ca7ec7af0ba4181a" category="paragraph">无论您的安装路径如何、您都必须：</block>
  <block id="3f2851ece89063ca1615062ac2117a4e" category="list-text">对运行受支持的Kubernetes版本并启用了功能要求的受支持Kubernetes集群的完全权限。查看 <block ref="3675fd04b78685cacd6e23511ab11d10" category="inline-link-macro-rx"></block> 了解详细信息。</block>
  <block id="f6f19569d16b2b36f137e3df3e315626" category="list-text">。<block ref="39e7fa5a13dbc25a4aa8c4b323cd657c" prefix=" " category="inline-code"></block> 环境变量设置为指向您的Kubernetes集群配置。</block>
  <block id="a24b4ef46f44c1b54b99e62f49bef9af" category="section-title">选择安装方法</block>
  <block id="dcb987a2d08ee1a9198d1183b1a63a96" category="inline-link-macro">在方法之间移动</block>
  <block id="e11c9248bc5d43c6663f67955adbc53b" category="paragraph">选择适合您的安装方法。您还应查看的注意事项 <block ref="e6ce874bf5f421a383109cc222a74763" category="inline-link-macro-rx"></block> 在做出决定之前。</block>
  <block id="bd1cc9ebdb33ed22a54815219f97af08" category="section-title">使用Trident运算符</block>
  <block id="b2ad529645b5bea51c4bcd516a5c5c8f" category="inline-link-macro">自定义Trident操作员部署</block>
  <block id="9d2c1d92b0ecb606394b40e3553d07d2" category="paragraph">使用Trident运算符的优势包括：</block>
  <block id="9bb09894435f05fa667865ab4c45ace7" category="paragraph">Trident操作符会自动为您的Kubernetes版本创建以下对象。</block>
  <block id="839be275cd4b0f32a2c3e0278ce6d568" category="list-text">操作员的ServiceAccount</block>
  <block id="f330ead337ce41659c5526de118cdac3" category="list-text">ClusterRole和ClusterRoleBindingto the ServiceAccount</block>
  <block id="02c7e9dd319d7284e2200c673387dfdc" category="list-text">专用PodSecurityPolicy (适用于Kubernetes 1.25及更早版本)</block>
  <block id="504dabdcc3051fc4c1b7a92eb22fad82" category="example-title">&lt;strong&gt; —修复功能—&lt;/strong&gt;</block>
  <block id="0bfe7abd2878a67d5ff26746df309f8c" category="example-title">&lt;strong&gt; 更新了现有安装的&lt;/strong&gt;</block>
  <block id="cbbeebc91e4ea4f1960f7a74b5b14c23" category="paragraph">您可以使用操作员轻松更新现有部署。您只需编辑<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> cr以更新安装。</block>
  <block id="f72ba1a3a498489a96fd8774bfa9ea9d" category="example-title">&lt;strong&gt; Kubernetes升级&lt;/strong&gt;</block>
  <block id="4c24a3b9facf2ea9fc7ed2ca52dab45d" category="inline-link-macro">自定义&lt;block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category='inline-code'/&gt; 软件安装</block>
  <block id="84721e18f913ae71c91ded91f5eb0ccc" category="section-title">选择安装模式</block>
  <block id="ecafb217c7f4e740b9f654a4f2d90d83" category="paragraph">根据您的组织所需的_installation mode"(标准)、"Offline"(脱机)或"Remote"(远程)来确定部署过程。</block>
  <block id="e0090e5eeb1da23a2924e8a8913a9bf8" category="open-title">标准安装</block>
  <block id="ca02732ace7c24d10b82abb835861fa8" category="list-text">通过Internet提取容器映像</block>
  <block id="6c09f957f6dd5f1b3287dacfabe8711a" category="open-title">脱机安装</block>
  <block id="559e73031b36e6693dcd5724b5ec9488" category="paragraph">在带风口或安全位置可能需要脱机安装模式。在这种情况下、您可以创建一个专用的镜像注册表或两个镜像注册表来存储所需的Trident和CSI映像。</block>
  <block id="37f28a5a50507d5cf12665008632572f" category="admonition">无论注册表配置如何、CSI映像都必须驻留在一个注册表中。</block>
  <block id="8e9a94c9655a1b4aac478f836ff8dde6" category="open-title">远程安装</block>
  <block id="3937570b6000a2f24b3066af230f4546" category="paragraph">下面简要概述了远程安装过程：</block>
  <block id="8be61d7ba452354892142828445281d0" category="section-title">根据您的方法和模式选择过程</block>
  <block id="667af34faf4c2e74b377bbe7608ca481" category="paragraph">做出决定后、请选择相应的流程。</block>
  <block id="4c3880bb027f159e801041b1021e88e8" category="cell">方法</block>
  <block id="f8a17e31b9d98082aa01aa0b41f63a01" category="cell">安装模式</block>
  <block id="e633d636fff46ea0b0998da525b2fba2" category="cell">Trident运算符(手动)</block>
  <block id="8f923c676fa6a52b7729476fc0d5f245" category="paragraph"><block ref="8f923c676fa6a52b7729476fc0d5f245" category="inline-link-macro-rx"></block></block>
  <block id="d295bad40364c9511c0d7b6a18e9557b" category="paragraph"><block ref="d295bad40364c9511c0d7b6a18e9557b" category="inline-link-macro-rx"></block></block>
  <block id="b9267203f04d91a5fcda0041ad2b3b64" category="cell">Trident运算符(Helm)</block>
  <block id="c197c2a4864a9d7a8190b1988d1e5885" category="paragraph"><block ref="c197c2a4864a9d7a8190b1988d1e5885" category="inline-link-macro-rx"></block></block>
  <block id="8dc52e4e0ca84a69e954b9b7a21c2bfc" category="paragraph"><block ref="8dc52e4e0ca84a69e954b9b7a21c2bfc" category="inline-link-macro-rx"></block></block>
  <block id="0b9d702360fb60f9b8b477339ca03a7b" category="cell"><block ref="c67fd1b99934afa248dfeb285a9a4191" prefix="" category="inline-code"></block></block>
  <block id="be686de0390e44f3981b994e059dfcb7" category="inline-link-macro">标准或脱机安装</block>
  <block id="9e244fc5020d1137289c0c34c2944ac4" category="paragraph"><block ref="9e244fc5020d1137289c0c34c2944ac4" category="inline-link-macro-rx"></block></block>
  <block id="dd341f866eaefb939dc86608773c909d" category="section-title">在安装方法之间移动</block>
  <block id="84dfae02381a00cf11d01c571e3e3e0f" category="paragraph">您可以决定更改安装方法。在执行此操作之前、请考虑以下事项：</block>
  <block id="e77325ac6e155cf5d14c756f1d64333f" category="list-text">如果您使用的是基于操作员的手动部署、并且要使用基于Helm的Trident操作员部署、则应先手动卸载此操作员、然后再执行Helm安装。这样， Helm 就可以使用所需的标签和标注来部署 Trident 操作员。如果不执行此操作，则基于 Helm 的 Trident 操作员部署将失败，并显示标签验证错误和标注验证错误。如果您有<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>基于部署、您可以使用基于Helm的部署、而不会遇到问题。</block>
  <block id="f36d25716a4b2c466ddcb8065bef3ae6" category="paragraph"><block ref="f36d25716a4b2c466ddcb8065bef3ae6" category="inline-link-macro-rx"></block></block>
  <block id="50823ee9226376c44bfb71c334ee2f3f" category="paragraph"><block ref="50823ee9226376c44bfb71c334ee2f3f" category="inline-link-macro-rx"></block></block>
  <block id="44e21d73aa8bd7200fceac6671723524" category="doc">手动部署Trident操作员(脱机模式)</block>
  <block id="11ad6eeb0e6095efdbf4599d71303b0e" category="inline-link-macro">标准部署流程</block>
  <block id="8ff1bc8a7ac69f081f871e9e2a8c0d0f" category="section-title">手动部署Trident操作员并安装Trident</block>
  <block id="bcc71769dd00af93bb067088094d9b0b" category="paragraph">登录到Linux主机并验证它是否正在管理正常工作的和 <block ref="ac355729d1ddc95a290738ca862fed08" category="inline-link-macro-rx"></block> 并且您拥有必要的特权。</block>
  <block id="92e83bca2bb40324de35154f8c95083d" category="list-text">验证Kubernetes版本：</block>
  <block id="b17eef151a74252395aad7db4b148b57" category="list-text">验证集群管理员权限：</block>
  <block id="987c560d773c81bc59f0fa11370626f5" category="list-text">验证您是否可以从Docker Hub启动使用映像的POD并通过POD网络访问存储系统：</block>
  <block id="d868f4f0026c532dcfdb417dde3174c2" category="section-title">第1步：下载Trident安装程序包</block>
  <block id="e0755e6cf0a80c2d8535ac3b7eae0b4b" category="section-title">第2步：创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> CRD</block>
  <block id="ad9aaefb573cd08d43c2b039449b1f0e" category="section-title">第3步：更新操作符中的注册表位置</block>
  <block id="7e1c8354fb2b2ecb65abfa6a63e08970" category="section-title">第3步：部署Trident操作员</block>
  <block id="05cb480f9344b60f5eeaed25c5e230d1" category="list-text">创建资源并部署操作员：</block>
  <block id="78f538d1739cfd8c70698ec72269da17" category="inline-link-macro">自定义Trident安装</block>
  <block id="9c0f95d6de9186b24cce94c1c19ad0bb" category="section-title">验证安装。</block>
  <block id="f33407040f00668c9fe98aa95119654b" category="paragraph">可以通过多种方法验证您的安装。</block>
  <block id="1ee1b78e8a634a10be54657432d990c0" category="section-title">使用<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> status</block>
  <block id="59331c774767b9695025c001ca75a1f6" category="inline-link-macro">检查日志</block>
  <block id="4b3e10870e70ff689f8c7d5c4470bb56" category="paragraph">的状态<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 指示安装是否成功、并显示已安装的Trident版本。在安装期间、的状态<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 更改自<block ref="2763f33c904a183bd0ef06f9c4fb4403" prefix=" " category="inline-code"></block> to<block ref="98dd43dfae05b11befe1f140e0ec787a" prefix=" " category="inline-code"></block>。如果您观察到<block ref="d7c8c85bf79bbe1b7188497c32c3b0ca" prefix=" " category="inline-code"></block> 状态、并且操作员无法自行恢复、 <block ref="b02c5b645df4a829ba2f9c98296d4b15" category="inline-link-macro-rx"></block>。</block>
  <block id="474d9cf1b4e7f826154b0e1f35c59f5a" category="section-title">正在使用POD创建状态</block>
  <block id="8492a795a07bc459d58808ef0ab73c36" category="section-title">使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block></block>
  <block id="3c70f31b6cfd2fccfef3e715c4c4cabb" category="doc">自定义tridentctl安装</block>
  <block id="3e8935de45b1559e2ec2b01c1bbb06c2" category="doc">使用Helm部署Trident操作员(脱机模式)</block>
  <block id="3d289dfc040026f9fd5fd0d307821b6c" category="doc">使用tridentctl进行安装</block>
  <block id="953aeeea088f5f969f2eba121ae81f15" category="paragraph">开始安装之前、请登录到Linux主机并验证它是否正在管理一个正常运行的、 <block ref="ac355729d1ddc95a290738ca862fed08" category="inline-link-macro-rx"></block> 并且您拥有必要的特权。</block>
  <block id="53c512e9599c71e1a585d636a5229820" category="open-title">标准模式</block>
  <block id="ca5380881d4e3b38f359d5d05acd6163" category="paragraph">您的安装状态应如下所示。</block>
  <block id="c5e8fc3926c956e64487a70aa036ec8c" category="paragraph">您可以使用POD创建状态或验证安装<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="5ba19178fb1b2111306714e923b35945" category="inline-link-macro">打开调试模式</block>
  <block id="43e7d51a6323aabe7af3d192e157f5ed" category="admonition">如果安装程序未成功完成或<block ref="ce3abad3e11d6a43c5178e20a0c7d64b" prefix=" " category="inline-code"></block> <block ref="2903817a25b5de1e17a06122d71c5cf9" prefix="(" category="inline-code"></block> 在23.01之前的版本中)不具有*正在运行*状态、表示未安装此平台。使用 ...<block ref="9b017020b9d48d433ec90c548e6b5c70" prefix=" " category="inline-code"></block> to <block ref="82f062b46969132d4baf9d002395a676" category="inline-link-macro-rx"></block> 并对问题描述 进行故障排除。</block>
  <block id="5d8f25140dde9344f1318b1319929306" category="doc">手动部署Trident操作员(标准模式)</block>
  <block id="c35c65e4cd4cef23559781ed63709eb0" category="section-title">第4步：创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 并安装Trident</block>
  <block id="a24e915be64ce870d285c6e28a6df3f5" category="list-text"><block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix="" category="inline-code"></block> 和<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block> 适用于ONTAP NAS后端。</block>
  <block id="fb250da700173f245f4c10d2970cfba8" category="list-text"><block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix="" category="inline-code"></block> 适用于ONTAP SAN后端。您无法指定<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block> 在ONTAP SAN后端。</block>
  <block id="741970ef3d523752ab543427956bb1b8" category="cell">1.19 - 1.26</block>
  <block id="2a531c1a1d290bb0e5f5a511bb48ad45" category="admonition">在安装期间、可以使用更改活跃度/就绪性探测端口<block ref="d2090696319f15a4c659a414db8cd2cd" prefix=" " category="inline-code"></block> 标志。请务必确保此端口未被工作节点上的其他进程使用。</block>
  <block id="1a87abd79c966e67f73bbe738ffa4e59" category="inline-link-macro">问题783、794</block>
  <block id="3e45ffbc961fc6c429b6e91f16331ee5" category="list-text">Kubernetes：添加了一些选项、用于排除通过Helm (<block ref="f91cf268a0811064670bc9d51a6e2016" category="inline-link-macro-rx"></block>）。</block>
  <block id="a47f012619aa18f9e2c0fbb53d5878d9" category="list-text">增加了对Kubernetes 1.26的支持。</block>
  <block id="d87b63603588c1795f58658ee14e505f" category="inline-link-macro">问题描述 #757</block>
  <block id="8e3bb4ae68afca021f39502f7954a450" category="list-text">提高了Trident RBAC资源的整体利用率(<block ref="92a5fe29b2be509e7db5f2091f236ee0" category="inline-link-macro-rx"></block>）。</block>
  <block id="2508a7d2b2da760ab909b40a284aff9f" category="list-text">增加了自动化功能、可检测和修复主机节点上中断或陈旧的iSCSI会话。</block>
  <block id="80a9d5ab26eec41d6d6967415e991c91" category="list-text">增加了对扩展LUKS加密卷的支持。</block>
  <block id="1e209dc1ac5964d0a9b1f9c2e9f2fc83" category="list-text">Kubernetes：增加了对LUKS加密卷的凭据轮换支持。</block>
  <block id="8ce5e316405255bac435287fc5b61f0e" category="list-text">增加了对使用SMB卷时的NTFS权限的支持。</block>
  <block id="e67f9f12d1f7c510d94da478c87b7d19" category="list-text">增加了对具有CVS服务级别的GCP卷的存储池的支持。</block>
  <block id="493569102442ea9186ac1061bb527388" category="list-text">增加了在使用ontap-nas-flexgroup存储驱动程序创建FlexGroup时可选使用FlexgroupAggregateList的支持。</block>
  <block id="c26c6c796afe3b5c10e0c830715daf3a" category="list-text">已为所有ONTAP NAS存储驱动程序启用数据LIF更新。</block>
  <block id="56f71deb4744b8ffc7a92bde36d3f4d4" category="list-text">更新了Trident部署和DemonSet命名约定、以反映主机节点操作系统。</block>
  <block id="6ea33f83a7d973b1fa7de807364662d4" category="list-text">Kubernetes：已将支持的最低Kubernetes更新为1.21。</block>
  <block id="562840ed450b90bfe87c70479237a8da" category="section-title">22.10中的更改</block>
  <block id="816cf1fb2aa5f808ab09b4740f8ec199" category="list-text">已添加 <block ref="d387032e9d71b36f3d6219f60f33a659" category="inline-link-macro-rx"></block> 适用于<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 存储驱动程序。</block>
  <block id="74652b96889938fdef1037f82abf39b0" category="inline-link-macro">在安装方法之间切换</block>
  <block id="441b9a0ce7113f17c0021f9922b1c865" category="inline-link-macro">使用Trident操作符进行升级</block>
  <block id="bdae3121e140e5325fd05919c86dd97f" category="list-text">如果您使用自定义了初始安装<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 属性、您可以编辑<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 用于修改安装参数的对象。其中可能包括为脱机模式指定镜像Trident和CSI映像注册表、启用调试日志或指定映像提取密钥所做的更改。</block>
  <block id="3d0107bfa0874592e9dc04f9869b604b" category="list-text">运行<block ref="cd4140d3de30b520500459331d08d2bf" prefix=" " category="inline-code"></block> 验证图表和应用程序版本均已升级。运行<block ref="3e725291d4b17065fdcd321172fcfae3" prefix=" " category="inline-code"></block> 查看任何调试消息。</block>
  <block id="d7f3ab8ebe0633127c883b84d0b2bc4a" category="section-title">Google Cloud上的Cloud Volumes Service 后端驱动程序</block>
  <block id="b8777f333c4d18731d4e5746513dc8eb" category="cell">适用于Google Cloud的Cloud Volumes Service 驱动程序</block>
  <block id="e8257e01d592104a99a17c192f84e86a" category="cell">仅适用于CVS-Performance服务类型。</block>
  <block id="e6f7c10d8c16eee55f72ce71c4b10a2f" category="list-title">复制注释</block>
  <block id="706c8ebf7645c5a984d080882f157905" category="list-text">克隆将在与源卷相同的存储池中创建。</block>
  <block id="aa3a2f2908114304b0a2fa7847f52c52" category="section-title">虚拟池</block>
  <block id="46eefe0a9f18e4edef4d602d3868ad26" category="section-title">虚拟池设计</block>
  <block id="e531eef4bc68547759b647c917ac2567" category="admonition">定义虚拟池时、建议不要尝试在后端定义中重新排列现有虚拟池的顺序。此外，建议不要编辑 / 修改现有虚拟池的属性，而是定义新的虚拟池。</block>
  <block id="f274bdd304a8c3825a2766a1f8ff8fa7" category="paragraph">可以从一个存储后端设计具有一组特定方面的多个虚拟池。为此，请为后端配置多个标签，并在每个标签下设置所需的方面。现在、使用创建不同的Kubernetes存储类<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block> 要映射到不同虚拟池的字段。在后端配置的卷将在选定虚拟池中定义相关方面。</block>
  <block id="b6969fa89b54a37ee3628194aebbbea3" category="doc">Linux统一密钥设置(LUKS)</block>
  <block id="525588be7f6bc2cf7b3b257ced2b19c7" category="list-text">工作节点必须安装加密设置2.1或更高版本(但低于3.0)。有关详细信息，请访问 <block ref="39c06d5570d5dfd5c63abe15a0d8d2fb" category="inline-link-macro-rx"></block>。</block>
  <block id="83f59a8c99f92feae93c90d4f7bd0d68" category="section-title">启用LUKS加密</block>
  <block id="b9a97083b1f9ee5d9d6fd1ec4025a836" category="paragraph">您可以对ONTAP SAN和ONTAP SAN经济卷使用Linux统一密钥设置(Unified Key Setup、LUKS)启用每个卷的主机端加密。</block>
  <block id="d197aff07a41df5dbefcace33058435c" category="list-text">在后端配置中定义LUKS加密属性。有关ONTAP SAN的后端配置选项的详细信息、请参见 <block ref="e87ded5ef8bc8adbc3c135528636f4f2" category="inline-link-macro-rx"></block>。</block>
  <block id="a99f022d7515cf14d9d2e49a72198c5c" category="list-text">创建一个包含LUKS密码短语的密钥。例如：</block>
  <block id="6d8e596656bc0dc6684415f94bee7e6a" category="paragraph">LUKS加密的卷无法利用ONTAP 重复数据删除和数据压缩功能。</block>
  <block id="f9d3cd939395358ac0f0bd3a1043656c" category="section-title">轮换LUKS密码短语</block>
  <block id="5173c14a913aecabc2aa4a398abfd3a1" category="paragraph">您可以轮换LUKS密码短语并确认轮换。</block>
  <block id="870809044094847738d2e3b2d3490240" category="admonition">请勿忘记密码短语、除非您确认任何卷、快照或密钥不再引用它。如果引用的密码短语丢失、您可能无法挂载此卷、并且数据将保持加密状态且无法访问。</block>
  <block id="bbe48fb854ea022537208eeeff822f91" category="paragraph-title">关于此任务</block>
  <block id="a09edd6ec72e24ea93fe0643001ce09b" category="list-text">如果卷上的密码短语与密钥中的活动密码短语不匹配、则会发生轮换。</block>
  <block id="85341a765feac19c14ddb5733a16bb0f" category="list-text">如果卷上的密码短语与密钥中的活动密码短语匹配、则会显示<block ref="4146f2b31b5baccc1599d6209e20b87f" prefix=" " category="inline-code"></block> 参数将被忽略。</block>
  <block id="e11fe3d05d72f7812c946ac80ae339ed" category="list-text">添加<block ref="c774c2255b7e3b1f75cd200c366d4148" prefix=" " category="inline-code"></block> 和<block ref="59ab79bfd6177f0b40d74d58d4a94d89" prefix=" " category="inline-code"></block> StorageClass参数。例如：</block>
  <block id="7fe288bcd08368971a3839f1de636c7c" category="list-text">确定卷或快照上的现有密码短语。</block>
  <block id="bd7a9717d29c5ddcab1bc175eda1e298" category="listing-title">Volume</block>
  <block id="d4e2713d1b1725a1592f9268589f990d" category="listing-title">Snapshot</block>
  <block id="c0526adc9b28d758d8fab9d4a5b998ef" category="list-text">更新卷的LUKS密钥以指定新密码短语和上一密码短语。确保 <block ref="119d124de86f53dbdf015ff1809c10e1" prefix=" " category="inline-code"></block> 和<block ref="4146f2b31b5baccc1599d6209e20b87f" prefix=" " category="inline-code"></block> 匹配上一个密码短语。</block>
  <block id="4f8a79fea6c3cc09f49769b8473808f7" category="list-text">创建一个新的装载卷的POD。这是启动轮换所必需的。</block>
  <block id="bcf837455c951c49bd9138ead166c489" category="list-text">验证密码短语是否已轮换。</block>
  <block id="0c7eac961f50eef2d0c82d382fdd18b3" category="paragraph">仅在卷和快照上返回新密码短语时、才会轮换密码短语。</block>
  <block id="6ff457ceee4568584dc3fd66c1ae658a" category="admonition">如果返回两个密码短语、例如<block ref="b5b0f81d5dbb45d3dd031f1b02af8bf3" prefix=" " category="inline-code"></block>、转出不完整。您可以触发新POD以尝试完成轮换。</block>
  <block id="b3f9d5f1e12f2ba5ecd2ece1e9084f3f" category="section-title">启用卷扩展</block>
  <block id="e5307495a3aec6528b42d3f3e835a761" category="paragraph">您可以在LUKS加密的卷上启用卷扩展。</block>
  <block id="aeec1a5a7dc7624995570096ce8156ef" category="inline-link-macro">Kubernetes 1.25：使用机密进行节点驱动型CSI卷扩展</block>
  <block id="1282398415278cc77bc47970640d4188" category="list-text">启用<block ref="b0e105de2a2f0820528649fee8d2e331" prefix=" " category="inline-code"></block> 功能门(测试版1.25以上)。请参见 <block ref="35e3bd84b2522e04fd4ead86130c9227" category="inline-link-macro-rx"></block> 了解详细信息。</block>
  <block id="e4de718025be845e2dec22064bb4eece" category="list-text">添加<block ref="91985ce21cd787a6ab2a13cc97f58968" prefix=" " category="inline-code"></block> 和<block ref="641c8d6753dd78e60ebb61a20e6a2742" prefix=" " category="inline-code"></block> StorageClass参数。例如：</block>
  <block id="e718558948d1441cf3873df6fb7b10c3" category="paragraph">启动联机存储扩展时、kubelet会将相应的凭据传递给驱动程序。</block>
  <block id="8a6112da5167fe6f44136715f1d86c36" category="paragraph">对于具有专用基础架构节点(例如OpenShift)或其他无法计划用户应用程序的节点的部署、应使用单独的导出策略进一步限制对存储资源的访问。其中包括为部署到这些基础架构节点的服务（例如 OpenShift 指标和日志记录服务）以及部署到非基础架构节点的标准应用程序创建导出策略。</block>
  <block id="c395d1a6e14d73fb73663b1198b0b134" category="section-title">了解虚拟池</block>
  <block id="6293784c303cb134632b85dc06f372df" category="image-alt">显示了虚拟池的概念图。</block>
  <block id="e26346b2afab61526141ea7275a77ba3" category="list-text">定义虚拟池时、请勿尝试在后端定义中重新排列现有虚拟池的顺序。</block>
  <block id="92aa2031bb642a0c5c916142f725400d" category="list-text">建议不要修改现有虚拟池的属性。您应定义一个新的虚拟池以进行更改。</block>
  <block id="43d41b472d09879b85f78a3b8e487fd1" category="paragraph">大多数方面都以后端特定术语来指定。重要的是、宽高值不会公开在后端驱动程序之外、也不能在中进行匹配<block ref="f652904c3bfb48fb25a0a75f485f0ff6" prefix=" " category="inline-code"></block>。而是管理员为每个虚拟池定义一个或多个标签。每个标签都是一个键：值对，标签可能在唯一的后端通用。与其他方面一样，可以为每个池指定标签，也可以为后端指定全局标签。与具有预定义名称和值的方面不同，管理员可以根据需要全权定义标签键和值。为了方便起见、存储管理员可以按标签为每个虚拟池和组卷定义标签。</block>
  <block id="e084f7ea866c7ad616e67a911925c850" category="paragraph">答<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block> 通过引用选择器参数中的标签来标识要使用的虚拟池。虚拟池选择器支持以下运算符：</block>
  <block id="0b62778604e11f72525f5a82bbd26c6a" category="paragraph"><block ref="6a2736fcbb5755dd03d114a5153506eb" category="inline-link-rx"></block> 是一种完全托管的AWS服务、可使客户启动和运行由NetApp ONTAP 存储操作系统提供支持的文件系统。借助适用于ONTAP 的FSx、您可以利用您熟悉的NetApp功能、性能和管理功能、同时利用在AWS上存储数据的简便性、灵活性、安全性和可扩展性。FSX for ONTAP 支持ONTAP 文件系统功能和管理API。</block>
  <block id="9b85b10750f4b0e98b7853ee468d8bd5" category="list-text">SMB卷：</block>
  <block id="cf201a9e802aa6e35997590206919b1a" category="list-text">SMB卷支持使用<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 仅限驱动程序。</block>
  <block id="994eaa47aad78cae857818e1655e2800" category="paragraph">有关启用身份验证的详细信息、请参阅适用于您的驱动程序类型的身份验证：</block>
  <block id="57e00ef3eabad47fc79d0ef1319f989c" category="inline-link-macro">ONTAP NAS身份验证</block>
  <block id="840db27e4fe9967e908b8b101ca72198" category="list-text"><block ref="840db27e4fe9967e908b8b101ca72198" category="inline-link-macro-rx"></block></block>
  <block id="562276ffa617658595d5e6df35ef971c" category="inline-link-macro">ONTAP SAN身份验证</block>
  <block id="4a5e4254b1862ddbff7f81ed84e87125" category="list-text"><block ref="4a5e4254b1862ddbff7f81ed84e87125" category="inline-link-macro-rx"></block></block>
  <block id="d2aae26c4b1e25027872b1df4cee2081" category="paragraph">在配置Azure NetApp Files 后端之前、您需要确保满足以下要求。</block>
  <block id="53ba532dfa04fe29152221a3efb3e98f" category="doc">为Google Cloud后端配置Cloud Volumes Service</block>
  <block id="3671a5060127094ad405aad9295e6609" category="inline-link-macro">三个服务级别</block>
  <block id="1b3b34a1280074ca8311ff50bbacac6c" category="list-text"><block ref="c00f0c4675b91fb8b918e4079a0b1bac" prefix="" category="inline-code"></block></block>
  <block id="3f27980baf5bae9c9c40df09c54f6f23" category="list-text"><block ref="a288195832f8717bca4671416014a464" prefix="" category="inline-code"></block></block>
  <block id="091d891c1f040cef1072e2593b7f1f3b" category="list-text"><block ref="287e9593819b2fcdf9945e7ccacd637d" prefix="" category="inline-code"></block></block>
  <block id="1048ee58172376b84dda9c7505d858ea" category="inline-link-macro">两个服务级别</block>
  <block id="6c62a8c68facf167a61fbd54e9cceb5f" category="list-text">* CVS*：CVS服务类型提供高区域可用性、性能级别限制为中等。CVS服务类型是一个软件选项、可使用存储池支持小至1 GiB的卷。存储池最多可包含50个卷、其中所有卷都共享池的容量和性能。您可以选择一个 <block ref="21d52e1e64b94d45bea308be30f5a76a" category="inline-link-macro-rx"></block>：</block>
  <block id="277d5dd64fbcc2dbcd79252b41d6113e" category="list-text"><block ref="317ec56a799e879712bbd2d0fcbd3b93" prefix="" category="inline-code"></block></block>
  <block id="4bfd77bf3278584b71bc8c9deef39ca9" category="list-text"><block ref="75b65576cc4a19f0836b73610ad5957a" prefix="" category="inline-code"></block></block>
  <block id="66d7ad821e261a4b5099f37ced19ebb1" category="list-text">配置了NetApp Cloud Volumes Service 的Google Cloud帐户</block>
  <block id="f56a3add505b7e123b55b814f7acc26b" category="list-text">Cloud Volumes Service 帐户的API密钥文件</block>
  <block id="5782f9a9357b5678058d6d3ceed21988" category="cell"><block ref="c614017642b6cfd9e6a25c7df122d917" prefix="" category="inline-code"></block></block>
  <block id="4efa10ec47c98c5ed67e1a72f7515240" category="cell">仅限CVS服务类型。用于指定用于创建卷的存储池的可选参数。</block>
  <block id="4149383e1cf45a36b373c5bded2ff6ba" category="cell">Google Cloud 帐户项目编号。此值可在Google Cloud门户主页上找到。</block>
  <block id="f0559497c76611a262c1a6fa93592cd7" category="cell">如果使用共享VPC网络、则为必需项。在此情景中、<block ref="80ef6899136dfcff295c16caa93c2138" prefix=" " category="inline-code"></block> 是服务项目、和<block ref="b5caf2c58446baec75b83bf637a98d1b" prefix=" " category="inline-code"></block> 是主机项目。</block>
  <block id="665f1a07bc016a07fdc13ef823fcdb03" category="cell">Google Cloud服务帐户的API密钥<block ref="4a5395c87dd91b3242056f83b7cedb9b" prefix=" " category="inline-code"></block> 角色。它包括 Google Cloud 服务帐户专用密钥文件的 JSON 格式的内容（逐字复制到后端配置文件）。</block>
  <block id="3430995d97c2d987bf88dfb93ddb34f7" category="cell">代理服务器需要连接到CVS帐户时的代理URL。代理服务器可以是 HTTP 代理，也可以是 HTTPS 代理。对于 HTTPS 代理，将跳过证书验证，以允许在代理服务器中使用自签名证书。不支持启用了身份验证的代理服务器。</block>
  <block id="4d9239a7fce916964ba8529021ab535f" category="cell">如果请求的卷大小超过此值、则配置失败。</block>
  <block id="c4105759a421b56f4e5aa47752aa6812" category="cell">新卷的CVS-Performance或CVS服务级别。CVS-Performance值为<block ref="c00f0c4675b91fb8b918e4079a0b1bac" prefix=" " category="inline-code"></block>，<block ref="a288195832f8717bca4671416014a464" prefix=" " category="inline-code"></block>或<block ref="287e9593819b2fcdf9945e7ccacd637d" prefix=" " category="inline-code"></block>。CVS值为<block ref="317ec56a799e879712bbd2d0fcbd3b93" prefix=" " category="inline-code"></block> 或<block ref="75b65576cc4a19f0836b73610ad5957a" prefix=" " category="inline-code"></block>。</block>
  <block id="5c3d9364df4807427e3297a90edf2831" category="cell">CVS-Performance默认值为"standard"。CVS默认值为"standardsw"。</block>
  <block id="5715e76155b75e9062107ef13c0576ed" category="cell">用于Cloud Volumes Service 卷的Google云网络。</block>
  <block id="ad438db80cb3bcd5f6fccdb1010b02f1" category="cell">故障排除时要使用的调试标志。示例、<block ref="9b8710f6da218ae915e4ba2ae63f23d0" prefix=" " category="inline-code"></block>。除非您正在进行故障排除并需要详细的日志转储，否则请勿使用此功能。</block>
  <block id="a5f4597012dd7af2b717fd4cc2f687fe" category="cell"><block ref="df6ccab784b5892507a7d11443254dc8" prefix="" category="inline-code"></block></block>
  <block id="d2e98deb07632de971600ae032776fe8" category="cell">要启用跨区域访问、请定义StorageClass<block ref="df6ccab784b5892507a7d11443254dc8" prefix=" " category="inline-code"></block> 必须包括所有地区。例如：<block ref="3e7c75911911d149520dd40104fd92d7" prefix=" " category="inline-code"></block></block>
  <block id="eb60cd2c0cff094ad0ecbe9d6fededcf" category="section-title">卷配置选项</block>
  <block id="afe8445a326424c54dfec7cc20994e8f" category="paragraph">您可以在中控制默认卷配置<block ref="a4a918a45181164207929d52aec36aec" prefix=" " category="inline-code"></block> 部分。</block>
  <block id="fdcd5d79603b7f7c0f9b4525dd19b6ab" category="cell">新卷的导出规则。必须是以 CIDR 表示法表示的任意 IPv4 地址或 IPv4 子网组合的逗号分隔列表。</block>
  <block id="d5c8102144978e060556ba194e006d1e" category="cell">新卷的大小。CVS性能最小值为100 GiB。CVS最小值为1 GiB。</block>
  <block id="400f2f53e7d26564783ac50a601d32cb" category="cell">CVS-Performance服务类型默认为"100GiB"。CVS服务类型未设置默认值、但至少需要1 GiB。</block>
  <block id="94e5c486f56b72f4237fe801615b4406" category="section-title">CVS-Performance服务类型示例</block>
  <block id="dea6ff4202a54251e04f7b84647690b6" category="paragraph">以下示例提供了CVS-Performance服务类型的示例配置。</block>
  <block id="ae174742813090d1ddbc3ed75d27f7f2" category="paragraph">这是使用默认CVS-Performance服务类型以及默认"标准"服务级别的最小后端配置。</block>
  <block id="8228a8de88271b4a6a07d5021ae4ff7c" category="example-title">示例2：服务级别配置</block>
  <block id="38a24bdf59c77f7705c407c60f3ea81e" category="paragraph">此示例说明了后端配置选项、包括服务级别和卷默认值。</block>
  <block id="4565a2282ee3312eddd091b3a3f6a263" category="example-title">示例3：虚拟池配置</block>
  <block id="ed7c2c2093c7c8deca88a6580c82633a" category="paragraph">此示例使用<block ref="ddecebdea58b5f264d27f1f7909bab74" prefix=" " category="inline-code"></block> 配置虚拟池和<block ref="f652904c3bfb48fb25a0a75f485f0ff6" prefix=" " category="inline-code"></block> 这是指它们。请参见 <block ref="f986c11e10e5f3c768f256080a1f3f99" category="inline-xref-macro-rx"></block> 以查看存储类的定义方式。</block>
  <block id="935927e4b464388790a08251e1c2254d" category="paragraph">此处为设置的所有虚拟池设置了特定的默认值<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block> 5%和<block ref="c72971f17465d2a32345bc872af62a34" prefix=" " category="inline-code"></block> 到0.0.0.0/0。虚拟池在中进行定义<block ref="ddecebdea58b5f264d27f1f7909bab74" prefix=" " category="inline-code"></block> 部分。每个虚拟池都定义了自己的虚拟池<block ref="f1d0ae63f2e948a9e43dcc60303d595d" prefix=" " category="inline-code"></block>、并且某些池会覆盖默认值。虚拟池标签用于根据区分池<block ref="c05f6c233521207f6fe311afef550c3c" prefix=" " category="inline-code"></block> 和<block ref="152f5dc0f7ac734f8e8ee17d4a482462" prefix=" " category="inline-code"></block>。</block>
  <block id="857fa84eb2e850753da87c8599addab3" category="section-title">存储类定义</block>
  <block id="5b797cdb3913e416eaea99109620eb0d" category="paragraph">以下StorageClass定义适用于虚拟池配置示例。使用<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block>、您可以为每个StorageClass指定用于托管卷的虚拟池。卷将在选定池中定义各个方面。</block>
  <block id="ea7cdbae94b0329e6731e1f3ae9fc4fc" category="example-title">存储类示例</block>
  <block id="48bbf2b27d410d92674b0f8f5d3447a0" category="list-text">第一个StorageClass <block ref="d3b08f69c5bb5aadd45b7ba9391c7447" prefix="(" category="inline-code"></block>)映射到第一个虚拟池。这是唯一一个可提供极高性能且 Snapshot 预留为 10% 的池。</block>
  <block id="d371b8466ee11b2a14782e343e3ed344" category="section-title">CVS服务类型示例</block>
  <block id="f7a4e685ebf6839fc43b3bbaeff96c33" category="paragraph">以下示例提供了CVS服务类型的示例配置。</block>
  <block id="96899a80429985fe87db6dedf997357e" category="example-title">示例1：最低配置</block>
  <block id="2bab01748045e624b36f643d0a50b1c2" category="paragraph">这是使用的最低后端配置<block ref="78ec9b60245b46a4f05158076962ace9" prefix=" " category="inline-code"></block> 指定CVS服务类型和默认值<block ref="317ec56a799e879712bbd2d0fcbd3b93" prefix=" " category="inline-code"></block> 服务级别。</block>
  <block id="d1f5fcc31a1c5bb592600c9f986af71c" category="example-title">示例2：存储池配置</block>
  <block id="879b7d1da5135e7d94358584a7245e33" category="paragraph">此示例后端配置使用<block ref="c614017642b6cfd9e6a25c7df122d917" prefix=" " category="inline-code"></block> 配置存储池。</block>
  <block id="288b1cbb87d08c32abf3084c28636e5c" category="inline-link-macro">NFS或iSCSI</block>
  <block id="d7481875afa061fb651628b2597d52ec" category="list-text">为准备工作的工作节点 <block ref="966ed3bab2d39ae1014ad2eb34527e0f" category="inline-link-macro-rx"></block>。</block>
  <block id="d0341760d873a30f82a310a6eab0ba9c" category="admonition">确保按照Amazon Linux和Ubuntu所需的节点准备步骤进行操作<block ref="70013ee128d5437b3d9579d66ece4066" category="inline-link-rx"></block> （ AMIS ），具体取决于您的 EKS AMI 类型。</block>
  <block id="9303b8f40cf82f5e37702c7a6387e725" category="section-title">ONTAP SAN和NAS驱动程序集成</block>
  <block id="fc4e16be02eac62a40d8ba5714cbeda1" category="section-title">准备配置SMB卷</block>
  <block id="fbf3304d2358758ea71475804b2cbeae" category="paragraph">您可以使用配置SMB卷<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 驱动程序。完成前 <block ref="24f26185e00986318dc562523d4edbf6" category="inline-xref-macro-rx"></block> 完成以下步骤。</block>
  <block id="d98f239eeb5789a80cb4b247e5be144d" category="inline-link-macro">Microsoft管理控制台</block>
  <block id="8e6249724e4eef8026e47829f03f9e67" category="list-text">创建SMB共享。您可以使用以下两种方式之一创建SMB管理共享 <block ref="364bc251e9c8cfbf6ce258767d17d682" category="inline-link-macro-rx"></block> 共享文件夹管理单元或使用ONTAP 命令行界面。要使用ONTAP 命令行界面创建SMB共享、请执行以下操作：</block>
  <block id="c9e9c2bb32e43693c4687ec082488811" category="list-text">如有必要，为共享创建目录路径结构。</block>
  <block id="8a19300a396203718795b4620552b59c" category="paragraph">。<block ref="293a1aaca0a542f4f1b1dc1a3ad95728" prefix=" " category="inline-code"></block> 命令会在创建共享期间检查-path选项中指定的路径。如果指定路径不存在，则命令将失败。</block>
  <block id="a968d0620b250ca44da661cadac02e42" category="list-text">创建与指定SVM关联的SMB共享：</block>
  <block id="e172e0c83051eb537305571585af294a" category="list-text">验证是否已创建共享：</block>
  <block id="a6e62ff657f01a7df2d91d1ea0d3e76c" category="inline-link-macro">创建 SMB 共享</block>
  <block id="39026ea2687a8de2a318f8245aceb992" category="admonition">请参见 <block ref="2b8c6fb4597e9bb000d4d88db3769c9a" category="inline-link-macro-rx"></block> 了解完整详细信息。</block>
  <block id="e4f84f59067aa8e22119bf499379385a" category="inline-link-macro">适用于ONTAP 的FSX配置选项和示例</block>
  <block id="ca088cbb36bbab4b23e57d63d95a628c" category="list-text">创建后端时、必须配置以下内容以指定SMB卷。有关适用于ONTAP 后端的所有FSX配置选项、请参见 <block ref="dd05fa371cf4b2c8377b8b4b261a8edd" category="inline-link-macro-rx"></block>。</block>
  <block id="7bb910e3cf11d0b34ca215aa399d3f23" category="cell"><block ref="5910159ef86741f119f7574a9064b5b0" prefix="" category="inline-code"></block></block>
  <block id="3b84c7b88317953423192c633a83db9f" category="cell">*必须设置为<block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix=" " category="inline-code"></block>如果为空、则默认为<block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix=" " category="inline-code"></block>。</block>
  <block id="1928bae58ae496b53ef1a163c3dbeeb4" category="cell">新卷的模式。对于SMB卷、*必须留空。*</block>
  <block id="3418e818bbbe397a49b7096a5ed87929" category="cell">由SVM派生</block>
  <block id="2da9f60cc5b99a5987580c38e6db0842" category="cell">受信任 CA 证书的 Base64 编码值。可选。用于基于证书的身份验证。</block>
  <block id="394d848f17683e31e21f6cde5fd9e3e4" category="cell">与ONTAP 集群通信所需的用户名。用于基于凭据的身份验证。</block>
  <block id="6f0acf4836d44b03512e1caa0d774777" category="cell">与ONTAP 集群通信所需的密码。用于基于凭据的身份验证。</block>
  <block id="a0de2cc0c77c388210e1f48423eea29c" category="cell">在 SVM 中配置新卷时使用的前缀。无法稍后修改。要更新此参数、您需要创建一个新的后端。</block>
  <block id="c59183b2f668b355e81e7bb1256f92b3" category="paragraph">您可以在中使用这些选项控制默认配置<block ref="a4a918a45181164207929d52aec36aec" prefix=" " category="inline-code"></block> 配置部分。有关示例，请参见以下配置示例。</block>
  <block id="e62f5d0a5a95571e25197caafe78cd98" category="section-title">卷配置示例</block>
  <block id="1b9ef354b22d8a8b125247fd538da4b2" category="section-title">虚拟池后端示例</block>
  <block id="615c9f89b360c50cfba2b2de02584387" category="paragraph">以下StorageClass定义引用了上述虚拟池。使用<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block> 字段中、每个StorageClass都会调用可用于托管卷的虚拟池。卷将在选定虚拟池中定义各个方面。</block>
  <block id="c632eed28bf53466df8b8a33aedab3af" category="list-text">虚拟池(如果存在)必须与原始后端的顺序相同。</block>
  <block id="87a522ecb9df14bf978f6f1da8a654a8" category="list-text">您不能通过删除来撤消对源PVC的访问<block ref="287f26e3328f9ac0f3f4da2cdaddd3e2" prefix=" " category="inline-code"></block> 或<block ref="11650d25d20af47978d85fd6e19c89aa" prefix=" " category="inline-code"></block> 标注或删除<block ref="d6995f631b22fb3f8e94aad1b40d1280" prefix=" " category="inline-code"></block> CR.要撤消访问、必须删除从属PVC。</block>
  <block id="ae8df8316f5c485b7db4e7141e899701" category="cell">指定的地址或派生自SVM (如果未指定)(不建议)</block>
  <block id="0275de02c3bba722f4540469d23cc535" category="paragraph">此示例显示了<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block> 使用IPv6地址。</block>
  <block id="0bd54df5242a2a2e9eca045fc695b41f" category="section-title">更新<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block> 初始配置后</block>
  <block id="76b4586b7207f884c66397194b773e14" category="summary">了解适用于ONTAP 的Amazon FSX的后端配置选项。本节提供了后端配置示例。</block>
  <block id="b8c7e19ba614c29878588409008e29c6" category="cell">用于连接到集群或SVM的用户名。用于基于凭据的身份验证。例如、vsadmin。</block>
  <block id="9a2486a943ad2a4c99f2797d6984f3d0" category="cell">用于连接到集群或SVM的密码。用于基于凭据的身份验证。</block>
  <block id="6018b4c39d938c6589decae81b54c6f0" category="cell">如果指定SVM管理LIF则派生。</block>
  <block id="4cba35e041b22828be7c835295ee9102" category="cell">在 SVM 中配置新卷时使用的前缀。创建后无法修改。要更新此参数、您需要创建一个新的后端。</block>
  <block id="86f4c9647fe8f4c500055c772753cc6f" category="cell">请勿使用。</block>
  <block id="bd4c4a75acd87c86694e9aca1e4050e2" category="cell">每个FlexVol 的最大LUN数必须在50、200范围内。仅限SAN。</block>
  <block id="e939be085c2babe4ff0f08e09d0cdfd2" category="cell">配置NFS或SMB卷创建。选项包括<block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix=" " category="inline-code"></block>，<block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix=" " category="inline-code"></block>或为空。*必须设置为<block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix=" " category="inline-code"></block> 对于SMB卷。*如果设置为空、则默认为NFS卷。</block>
  <block id="a8fe789c9febc6b76736fb83c90df2b7" category="cell">要为创建的卷分配的自适应 QoS 策略组。选择每个存储池或后端的qosPolicy或adaptiveQosPolicy之一。不受 ontap-nas-economy.</block>
  <block id="8336fb38c3b943161d5d6e73af8f4a12" category="cell">启用LUKS加密。请参见 <block ref="3646c7a69a11bdd94c010bf856bda313" category="inline-link-macro-rx"></block>。仅限SAN。</block>
  <block id="8ba802b52dc84f4e82bfbbf2e2d4a807" category="cell">新卷的模式。*对于SMB卷保留为空。*</block>
  <block id="88b0b88c998957f004af42563d5e5b40" category="paragraph">使用<block ref="296026821ada2ab8aebcf13547a63df5" prefix=" " category="inline-code"></block>，<block ref="e12fdd044232e643620eed06bf33c7af" prefix=" " category="inline-code"></block>，和<block ref="1ad68a6a046942b7c1666aed825df70a" prefix=" " category="inline-code"></block>、您可以指定SMB卷并提供所需的Active Directory凭据。SMB卷支持使用<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 仅限驱动程序。</block>
  <block id="262309361fe5b6dcda3a2eae08a48c2d" category="section-title">选择合适的工具</block>
  <block id="2cb4ed05fbad97efb755e294c572862d" category="paragraph-title">NFS工具</block>
  <block id="0172151d0fbf6ae973feaaaf8a2c1b3a" category="paragraph-title">iSCSI工具</block>
  <block id="6a9c3f120f628091afbdc5343cbbe0e1" category="paragraph-title">查看事件</block>
  <block id="70db3e5b82bc8c7ce4389fe8a025df28" category="paragraph-title">查看发现的服务</block>
  <block id="eeacf148d8ecc80cfae337218dd81f43" category="paragraph">使用适用于您的操作系统的命令安装NFS工具。确保NFS服务已在启动期间启动。</block>
  <block id="7b05c6f5db7b1690970d79c209e667fc" category="admonition">安装NFS工具后重新启动工作节点、以防止在将卷连接到容器时失败。</block>
  <block id="e81b5ef34c686914f0cc58204241cace" category="section-title">iSCSI自我修复功能</block>
  <block id="432fa9215202553559f7b2d4d10ef5ee" category="list-text">*确定*所需的iSCSI会话状态和当前的iSCSI会话状态。</block>
  <block id="587fcf25ecbc5ff7cf19f7b1a159b5e9" category="list-text">需要执行*修复*才能将当前iSCSI会话状态恢复为所需的iSCSI会话状态。</block>
  <block id="39460cb84da78b4a87c2014972b2f901" category="admonition">例如、如果在存储控制器上轮换了CHAP密钥、而网络断开了连接、则旧的(_stal_) CHAP密钥可能会持续存在。自修复功能可以识别此问题、并自动重新建立会话以应用更新后的CHAP密码。</block>
  <block id="9e9d382760025434fdf113f91e894cf4" category="list-text">缺少iSCSI会话</block>
  <block id="3f7bf0ef305a15c68efdc95a50750bd0" category="list-text">缺少LUN</block>
  <block id="15ffa30c3d1ab6322e5ff52935a86a50" category="section-title">安装iSCSI工具</block>
  <block id="10ff9e1b33974d06317ff739498154ce" category="paragraph">使用适用于您的操作系统的命令安装iSCSI工具。</block>
  <block id="baca3a42ff523348689308c7bd411b38" category="paragraph">此后端配置可在一个文件中定义多个存储池。如果您有多个容量池支持不同的服务级别，并且您希望在 Kubernetes 中创建表示这些服务级别的存储类，则此功能非常有用。虚拟池标签用于根据区分池<block ref="c05f6c233521207f6fe311afef550c3c" prefix=" " category="inline-code"></block>。</block>
  <block id="bfd7bf04b3d28a42267e8d1b30a05f01" category="section-title">示例2：的后端和存储类配置<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> 具有虚拟池的驱动程序</block>
  <block id="418ff75ccabac38370cc8570721746a3" category="paragraph">此示例显示了使用虚拟池配置的后端定义文件以及引用这些池的StorageClasses。</block>
  <block id="7ac6994e44af62a9075fd956e72ee6fb" category="paragraph">请注意，后端定义是凭据以纯文本格式存储的唯一位置。创建后端后，用户名 / 密码将使用 Base64 进行编码并存储为 Kubernetes 密钥。创建或更新后端是唯一需要了解凭据的步骤。因此，这是一项仅由管理员执行的操作，由 Kubernetes 或存储管理员执行。</block>
  <block id="46921a75e8534ad7d1c379a9e3aec033" category="sidebar">安装概述</block>
  <block id="3183dc3907c0b67930b221a316c94cb2" category="sidebar">使用Trident操作员安装</block>
  <block id="ca19905e19a036badc8a33897130382d" category="sidebar">手动部署Trident操作员(标准)</block>
  <block id="ef39c7f15f2671234f3264999cce5679" category="sidebar">手动部署Trident操作员(脱机)</block>
  <block id="0f441bb0252fa34f85fc82a08f2db0c7" category="sidebar">使用Trident Helm图表(标准)</block>
  <block id="70eb578fbddf25c465d8f4886be750b7" category="sidebar">使用Trident Helm图表(脱机)</block>
  <block id="71f5771dab663d80ba4dad1627e3386a" category="sidebar">升级概述</block>
  <block id="301ebdf8067a213d5a55c65fbb488290" category="sidebar">安全建议</block>
  <block id="58834b137fd6fa7a9ca23468a5c91fd6" category="sidebar">准备配置</block>
  <block id="6fc0b7515ecca271c88eae4a685da613" category="sidebar">NetApp HCI 或SolidFire</block>
  <block id="df7dec428425115b59101028bbebe58c" category="list-text">请勿使用<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> 预测数据保护、灾难恢复或移动性的需求。</block>
  <block id="f5d176b3de4662ca3603a69ab08bc166" category="paragraph">用于访问已配置NFS卷的NAS选项。</block>
  <block id="053b422d907cb55ac105c173adde1080" category="paragraph">NFS支持<block ref="1d770934d44de09b0d24f04fd01708ba" prefix=" " category="inline-code"></block> 和<block ref="4913a9178621eadcdf191db17915fbcb" prefix=" " category="inline-code"></block> 安全模式。默认值为<block ref="4913a9178621eadcdf191db17915fbcb" prefix=" " category="inline-code"></block>。</block>
  <block id="69f25314e2d927ebcaa0f19c9f2a57da" category="paragraph"><block ref="4913a9178621eadcdf191db17915fbcb" prefix="" category="inline-code"></block></block>
  <block id="2bd69c3354973375e1abed3c9beb1eff" category="cell"><block ref="f777ab485270937cd9b9efc63021484f" prefix="" category="inline-code"></block></block>
  <block id="767b06b78582b463da02281e05c82e45" category="cell"><block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix="" category="inline-code"></block></block>
  <block id="11d7f0efe30199fc66cbc43c427e147d" category="cell">新卷的安全模式。*必须设置为<block ref="68e98b83f5bd746f1468dff89f529d1b" prefix=" " category="inline-code"></block> 或<block ref="1d770934d44de09b0d24f04fd01708ba" prefix=" " category="inline-code"></block> 用于SMB卷。*</block>
  <block id="e76ea7f2be658dc914f9c95fe8d14fcf" category="cell"><block ref="68e98b83f5bd746f1468dff89f529d1b" prefix="" category="inline-code"></block> 或<block ref="1d770934d44de09b0d24f04fd01708ba" prefix=" " category="inline-code"></block> 对于SMB卷</block>
  <block id="375aa0b790f300787cdecf0f896b97f5" category="cell">新卷的安全模式。NFS支持<block ref="1d770934d44de09b0d24f04fd01708ba" prefix=" " category="inline-code"></block> 和<block ref="4913a9178621eadcdf191db17915fbcb" prefix=" " category="inline-code"></block> 安全模式。SMB支持<block ref="1d770934d44de09b0d24f04fd01708ba" prefix=" " category="inline-code"></block> 和<block ref="68e98b83f5bd746f1468dff89f529d1b" prefix=" " category="inline-code"></block> 安全模式。</block>
  <block id="4a359bdcdb3ce547581bdea3ce6c5bd7" category="cell">NFS默认值为<block ref="4913a9178621eadcdf191db17915fbcb" prefix=" " category="inline-code"></block>。SMB默认值为<block ref="68e98b83f5bd746f1468dff89f529d1b" prefix=" " category="inline-code"></block>。</block>
  <block id="b3735f022036728c24121c449da97183" category="inline-link-macro">Trident和CSI映像</block>
  <block id="c4ffea098f78924a9b9331b8f5e9c8b4" category="open-title">一个注册表中的映像</block>
  <block id="4847c552b2ff9251806e41c8fa907e19" category="open-title">不同注册表中的映像</block>
  <block id="7a79f435dcaa0ca2322cde1d80c13868" category="section-title">第4步：部署Trident操作员</block>
  <block id="579b44412770c0d6b65bc3fd9bf7c61c" category="section-title">第5步：更新中的映像注册表位置<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block></block>
  <block id="d0ebde94f92d8c1bae0c6660a5847bba" category="paragraph">Your <block ref="57de9a35aeedde82408b1e047030d221" category="inline-link-macro-rx"></block> 可以位于一个注册表或不同的注册表中、但所有CSI映像都必须位于同一注册表中。更新<block ref="7b4b81fb05ca7f2a09fe73526ac95482" prefix=" " category="inline-code"></block> 根据注册表配置添加其他位置规格。</block>
  <block id="5295ac8fb520b71deb8a1b57857b2562" category="section-title">第6步：创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 并安装Trident</block>
  <block id="43e6c0a141c1737a96917c56c7e22a73" category="inline-link-macro">安装&lt;block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category='inline-code'/&gt;</block>
  <block id="19466ff921af5aa01da62b42cdaaf617" category="list-text">修复了在规范中指定的情况下使用IPv6 localhost进行安装的Trident操作员。</block>
  <block id="5b313836498a7a26e99e4f084ee1baec" category="inline-link-macro">问题描述 #799</block>
  <block id="b2fc842cefdc715af09b8d184e09db56" category="list-text">修复了Trident操作员集群角色权限与捆绑包权限同步的问题 <block ref="25d51e363866fb30c759c73e05114b0d" category="inline-link-macro-rx"></block>。</block>
  <block id="97848233b9fe6ae43be1728a4e603020" category="list-text">添加了一个修复程序、允许外部进程运行到完成状态。</block>
  <block id="3a35c66b59df0fa02e2490983b964261" category="list-text">采用rwx模式在多个节点上附加原始块卷的固定问题描述。</block>
  <block id="21b2b5bca26be7b23af4468b85c68b34" category="list-text">修复了SMB卷的FlexGroup 克隆支持和卷导入。</block>
  <block id="190a9f9a8311c8a23bff1fd7a5693342" category="section-title">2001年23月的变更</block>
  <block id="a5199cf0d9f113491f9efa18f3bee2e1" category="section-title">了解控制器Pod和节点Pod</block>
  <block id="30735a308956ec6de6caa328d0d5b43b" category="inline-link-macro">节点选择器</block>
  <block id="1db653cf6745dd1e6aa8d6e843ea5e96" category="inline-link-macro">容忍和损害</block>
  <block id="0897b2b75e3d0217c2f6994605a2cae7" category="paragraph">Kubernetes <block ref="219288b06ade6fd51c16efe605941441" category="inline-link-macro-rx"></block> 和 <block ref="9466cd429d8630101055a8fd14904bd9" category="inline-link-macro-rx"></block> 用于限制Pod在特定节点或首选节点上运行。使用`ControllerPlugin`和<block ref="96687552cc4dff10038a1b07a8bf3bd3" prefix=" " category="inline-code"></block>、您可以指定约束和覆盖。</block>
  <block id="e3826c3aea0bf8502f2ba8ff27eeef19" category="list-text">控制器插件负责卷配置和管理、例如快照和调整大小。</block>
  <block id="361d997e700d422835e56b644784bb7e" category="list-text">节点插件负责将存储连接到节点。</block>
  <block id="a739aa7f082abebdf65f4b114dd3ad7d" category="paragraph">此表详细介绍了相关信息<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 属性。</block>
  <block id="d90582d42d65d5af05c3d40ad0eb4987" category="admonition">如果您是首次使用Azure NetApp Files 或在新位置使用、则需要进行一些初始配置来设置Azure NetApp Files 并创建NFS卷。请参见<block ref="b6e93c3bfc36cf835c63e42e55586d97" category="inline-link-rx"></block>。</block>
  <block id="84444089b52eed627a838de74ae8d652" category="section-title">NFS和SMB卷的前提条件</block>
  <block id="99c7065ab76131a7b7763287bb5b6735" category="inline-link-macro">Microsoft：为Azure NetApp Files 创建容量池</block>
  <block id="ee59ecaa79882c8dc8f7f897c113094a" category="list-text">一个容量池。请参见 <block ref="96caced282b604468ab13f86483cd9f6" category="inline-link-macro-rx"></block>。</block>
  <block id="7ed0731ff411d37210b51a78b95c1fc3" category="inline-link-macro">Microsoft：将子网委派给Azure NetApp Files</block>
  <block id="c896cfae248dc2b000cc04c39d8a8de6" category="list-text">委派给Azure NetApp Files 的子网。请参见 <block ref="795b5e8f62d2267a0996a3b260968048" category="inline-link-macro-rx"></block>。</block>
  <block id="856955b6cbc3fe2168b2dcd43fb0a5dd" category="list-text">所有者或贡献者角色 <block ref="76b3209c91e1786a477c35a6e91cf55f" category="inline-link-macro-rx"></block>。</block>
  <block id="227e516e7258b6dcab3e7bcb4148f7f1" category="paragraph">要创建SMB卷、您必须具有：</block>
  <block id="d8c74c31c4550aed073521ba0fb8984a" category="inline-link-macro">Microsoft：创建和管理Azure NetApp Files 的Active Directory连接</block>
  <block id="6bb7e9dc5268dcbdde1a91b151d9a94b" category="list-text">已配置Active Directory并连接到Azure NetApp Files。请参见 <block ref="2f3bcda54aaf4e8e45316bb04708293f" category="inline-link-macro-rx"></block>。</block>
  <block id="d924b4945b9cee37e07a2c601d1081be" category="paragraph">此表和<block ref="ba05023d0f1b5d4b64b6cad4cf9a7ecd" prefix=" " category="inline-code"></block> 文件(属于Helm图表的一部分)提供了键列表及其默认值。</block>
  <block id="e0e228e32d97e1461cf4492bd5366550" category="cell"><block ref="6370f866cf64618c026027da41bd248e" prefix="" category="inline-code"></block></block>
  <block id="f54139bbd014c510ee9fa277241d4666" category="cell">用于POD分配的节点标签</block>
  <block id="b7f663c63859fec6f7d2f1ecd891de73" category="cell"><block ref="6e0bd2b3fba01f3f74634cfc6fcc31d6" prefix="" category="inline-code"></block></block>
  <block id="6b164b6efa957c912428e089b86ecd45" category="cell">POD标注</block>
  <block id="4e3c35024b2d124aa9ab33a254e2545c" category="cell"><block ref="7c73e8c8cba054b3164d0b641ef36a41" prefix="" category="inline-code"></block></block>
  <block id="1a6308fa062d92acbff3b1304615d1db" category="cell">部署标注</block>
  <block id="716c09bbd59aa99d3932f73b7f517b2c" category="cell"><block ref="d6c26478ca41a23cc9741a4e92576269" prefix="" category="inline-code"></block></block>
  <block id="1147c70db6b1e5ac87df9b1ef26ea59a" category="cell">POD分配的差值</block>
  <block id="ed550d998ef1de0c69744fb5f7f7173c" category="cell"><block ref="1474047fb00b2d8d95646f7436837ed0" prefix="" category="inline-code"></block></block>
  <block id="064fd06fa9edd7a1e29b4da6fd9a1688" category="cell">用于Pod分配的相关性</block>
  <block id="b81e781314c37667d0eae6eeba5f0468" category="cell"><block ref="d525dcbea000b0429493d47a891b5ad9" prefix="" category="inline-code"></block></block>
  <block id="85e06bb6e03e71b7708d9d4b6f4967ea" category="cell">Pod的其他节点选择器。请参见 <block ref="662636849823c896b8f86e3f7d6afa9b" category="inline-xref-macro-rx"></block> 了解详细信息。</block>
  <block id="0ccd4d74122ec81d149bc2bb132524d6" category="cell"><block ref="e8c1183eadfdb38078a7bd66bfa038ac" prefix="" category="inline-code"></block></block>
  <block id="74f3be1a07b1f65cef69ac77defaff4b" category="cell">覆盖Kubernetes对Pod的容错。请参见 <block ref="662636849823c896b8f86e3f7d6afa9b" category="inline-xref-macro-rx"></block> 了解详细信息。</block>
  <block id="c5387f0fc94f27d79519bb1299916e0f" category="cell"><block ref="bc0951b6e57a04c942fe6054649bb323" prefix="" category="inline-code"></block></block>
  <block id="7923027736f9cc9bbc6f6914e020e8a2" category="cell"><block ref="85dec10eb608a93a9febb24b39f5dae5" prefix="" category="inline-code"></block></block>
  <block id="7211a1f37ce0f92a2727e11de77a5256" category="cell">设置的映像提取策略<block ref="c39d2745402b5d2987cfdd8df3bda0e1" prefix=" " category="inline-code"></block>。</block>
  <block id="f19aec010e48d5133114e8de96e071cd" category="cell">设置的映像提取密钥<block ref="c39d2745402b5d2987cfdd8df3bda0e1" prefix=" " category="inline-code"></block>，<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block>和其他图像。</block>
  <block id="b8ef31ad215c14ea7ac3aa4744f3b42f" category="cell">允许覆盖kubelet内部状态的主机位置。</block>
  <block id="5e2907912eaee9094910d428b8f01073" category="cell"><block ref="2d9583aa0b2422324be870c86f92540f" prefix="" category="inline-code"></block></block>
  <block id="a580f5edb0407fe7fc07e03adb88d2be" category="cell">允许将Trident操作符的日志级别设置为：<block ref="04a75036e9d520bb983c5ed03b8d0182" prefix=" " category="inline-code"></block>，<block ref="ad42f6697b035b7580e4fef93be20b4d" prefix=" " category="inline-code"></block>，<block ref="caf9b6b99962bf5c2264824231d7a40c" prefix=" " category="inline-code"></block>，<block ref="1ea4c3ab05ee0c6d4de30740443769cb" prefix=" " category="inline-code"></block>，<block ref="cb5e100e5a9a3e7f6d1fd97512215282" prefix=" " category="inline-code"></block>或<block ref="df6402fd9ecc60f5a2159fdf45711cd4" prefix=" " category="inline-code"></block>。</block>
  <block id="17b455f4f77262089207347508d91156" category="cell"><block ref="94b4515f09a2cc099780cd762366bc78" prefix="" category="inline-code"></block></block>
  <block id="0b401c459e3ff134b1e0ef7924967db5" category="cell"><block ref="844aa3cc935c46477e308955f84504e9" prefix="" category="inline-code"></block></block>
  <block id="0d1fd401e197635acbe814b44cbbe0f0" category="cell">允许将Trident操作符的日志级别设置为DEBUG。</block>
  <block id="e6e859881d25cceaf35be98ff2b495e5" category="cell"><block ref="225eb420f27fc1614025e3e94f1dbcd4" prefix="" category="inline-code"></block></block>
  <block id="3e23960e7162cfc391ab62ee009d09b5" category="cell">允许完全覆盖的映像<block ref="c39d2745402b5d2987cfdd8df3bda0e1" prefix=" " category="inline-code"></block>。</block>
  <block id="586d412183efcbc76c2b206c73911009" category="cell"><block ref="5a50bd404d515b199254e69f83732c55" prefix="" category="inline-code"></block></block>
  <block id="87a9d5d1548b0e39b7cfe5115c686d2d" category="cell">允许覆盖的标记<block ref="c39d2745402b5d2987cfdd8df3bda0e1" prefix=" " category="inline-code"></block> 图像。</block>
  <block id="ba6229139ac12ca183160040964cdaae" category="cell"><block ref="c185b55e62d1fe703eb97b2a31b6c2a3" prefix="" category="inline-code"></block></block>
  <block id="aacf685d031cae06a5c158144296d071" category="cell"><block ref="b958a6de9ca123713491252f2ab02f59" prefix="" category="inline-code"></block></block>
  <block id="f8d2c273db74b394820e68a59b18bfff" category="cell">覆盖大多数Kubernetes API操作的默认30秒超时(如果不为零、则以秒为单位)。</block>
  <block id="2911e600bbad981e24b3e2a2b3a03f82" category="cell"><block ref="cfcd208495d565ef66e7dff9f98764da" prefix="" category="inline-code"></block></block>
  <block id="fbf0a4141bdac5821d271a6c1de1f483" category="cell"><block ref="70b0324e2a65a29bea1b014606caba39" prefix="" category="inline-code"></block></block>
  <block id="d74c6fe1792f46d6c929a448fd8b99cd" category="cell">使用覆盖HTTP请求的默认90秒超时<block ref="bb61fa2850d04f4e5e34449de13febe4" prefix=" " category="inline-code"></block> 为超时的无限持续时间。不允许使用负值。</block>
  <block id="ab7c61393023df91a4271d09e26bda15" category="cell"><block ref="558c8a41e3e5c9a0f109be6e60efce8d" prefix="" category="inline-code"></block></block>
  <block id="b2ffdfaa5c81870c0fb113956a7244aa" category="cell"><block ref="141d9fad9dd7e4fec852d6e55f414373" prefix="" category="inline-code"></block></block>
  <block id="22ca6470a16bcd1b3a0fd7b7dc456b4c" category="cell"><block ref="9626ee86c83efe1de7c3f5e2669b4a04" prefix="" category="inline-code"></block></block>
  <block id="dfdc01cf8fa557986d9b3e8702b6ff1b" category="cell"><block ref="3d689bd3819ead35ed794427bd12f459" prefix="" category="inline-code"></block></block>
  <block id="8639f9efa7d4198eba06690d4a1f0d16" category="cell"><block ref="c370bb44f26914bb0c965f35a89a42f7" prefix="" category="inline-code"></block></block>
  <block id="b081a6c6ed5931a2b55e31e706aae502" category="cell"><block ref="5836094432fed0c547c18869122bbf9a" prefix="" category="inline-code"></block></block>
  <block id="db8e1facb8efde48ce50388e2dc9cfcc" category="cell"><block ref="20cd815523e5806aec29a57282b0d49f" prefix="" category="inline-code"></block></block>
  <block id="4d165b964c1ea4708882da42c3ef5194" category="cell"><block ref="0be533d5261bfa202a27dd6f4a2ff4da" prefix="" category="inline-code"></block></block>
  <block id="c7bc9c0edf4b3f771388feb15b8ad592" category="cell"><block ref="cd4906de65bd0389fcc62105f05b77d6" prefix="" category="inline-code"></block></block>
  <block id="c97f5436c3ba56768a7996ac0a152830" category="cell"><block ref="efc1e9e3a120c20b12e892ce2f230ff8" prefix="" category="inline-code"></block></block>
  <block id="3e52a0855ea502bd31c48eb02424ee67" category="cell"><block ref="aaeab2a659f3d6ac5063b6d8a4e7c24a" prefix="" category="inline-code"></block></block>
  <block id="66468bda18a84578afccd8255efa1845" category="cell"><block ref="d5c1386f335f8df3cd920142f8ee23b7" prefix="" category="inline-code"></block></block>
  <block id="a74941f6c96a1995cbfb438419467c32" category="cell"><block ref="fdd0820bbfc488d6a2ccba8ba0f74e73" prefix="" category="inline-code"></block></block>
  <block id="50c1c44df91bb9f35aaa04b0157d6136" category="cell"><block ref="60c65b849dbb837618645b7860aa608e" prefix="" category="inline-code"></block></block>
  <block id="74b30241e61b88d42e066d77a638a568" category="cell">允许覆盖用于Kubernetes活动/就绪性探测的默认端口。</block>
  <block id="b4f36de9fda080c1fd1d9edb1e60e36b" category="cell"><block ref="badc795d88a7db6cc65d56bc758b3ea4" prefix="" category="inline-code"></block></block>
  <block id="0a08ed3de9d17e8644d3e57dc374c3ea" category="cell">允许启用强制分离功能。</block>
  <block id="632a46acdaa26f30f25b11d5c83eaa58" category="cell"><block ref="94ef2a130a825358ab3002442d6e5145" prefix="" category="inline-code"></block></block>
  <block id="ad77b466842808c8dce5116073a3e52b" category="cell">从创建过程中排除操作员POD安全策略。</block>
  <block id="31aae55e68bb5034f8f948ec526b9ff3" category="paragraph">您可以更新现有后端以使用其他身份验证方法或轮换其凭据。这两种方式都适用：使用用户名 / 密码的后端可以更新为使用证书；使用证书的后端可以更新为基于用户名 / 密码的后端。为此、您必须删除现有身份验证方法并添加新的身份验证方法。然后、使用更新后的backend.json文件、该文件包含要执行的所需参数<block ref="defd1e55f93269ac9278afc086951ba8" prefix=" " category="inline-code"></block>。</block>
  <block id="bd4b2f0d545a83fd434f5ba1f17dd087" category="paragraph">下面是一个后端定义示例：</block>
  <block id="9463f87bbed1fcdacfb8d40e185ca2bc" category="open-title">YAML</block>
  <block id="0ecd11c1d7a287401d148a23bbd7a2f8" category="open-title">JSON</block>
  <block id="4bf283d1d1c781fbb7e90b237dc80ac4" category="paragraph">以创建<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> 如果绑定到现有后端、则需要获取后端配置。在此示例中，假设已使用以下 JSON 定义创建了后端：</block>
  <block id="2043559d67ba802541907de326b5ecdd" category="paragraph">下面是一个定义了默认值的示例：</block>
  <block id="2fc042d3545f5ad7df1999c9e5486176" category="paragraph"><block ref="c4ca4238a0b923820dcc509a6f75849b" prefix="" category="inline-code"></block></block>
  <block id="7ff5348ddee6132fe7c166b8b7917cc0" category="paragraph">卷名称的可选前缀。默认值：<block ref="689ee6510c7f9ef9df1c263a08823d96" prefix=" " category="inline-code"></block>。</block>
  <block id="81998bdb6c3f52ba69dbecf0ec513180" category="paragraph"><block ref="46fa46eed970046d03e2dedc95cdc83b" prefix="" category="inline-code"></block></block>
  <block id="5d8040f7ca409e3993359a877f675e59" category="paragraph"><block ref="75da9d6de91e782eca4fa00341367135" prefix="" category="inline-code"></block></block>
  <block id="9548d4d33e26f6bbe564b4eb47a52e4b" category="paragraph">新卷的可选默认大小。默认值：<block ref="7d0f45b4b1cf6603762c74ca39c833dd" prefix=" " category="inline-code"></block></block>
  <block id="dfda6aac7ee732ec79153da76a0e963a" category="paragraph"><block ref="08aa1584c9a5791fb64b0f7f1453f9eb" prefix="" category="inline-code"></block></block>
  <block id="b6d628512c1127da9adb6c459c9f7c95" category="paragraph"><block ref="190dafab69706a67221c1226360de7dc" prefix="" category="inline-code"></block></block>
  <block id="251296d0166ace97771b155156985b38" category="paragraph"><block ref="98a2cd7efa1ba950d42e42af495c4248" prefix="" category="inline-code"></block></block>
  <block id="9fcbfb18564773bb1604cf400912944c" category="paragraph"><block ref="b26399fddd6473c150b4e7528fb04fdc" prefix="" category="inline-code"></block></block>
  <block id="8131d179a4284fbb0ed410bbbbcf1eb6" category="paragraph"><block ref="6173aa5206484b5224450952747c7148" prefix="" category="inline-code"></block></block>
  <block id="c4dc9cb5606cc8c0597a5c8f1f77b005" category="paragraph"><block ref="5ebe2294ecd0e0f08eab7690d2a6ee69" prefix="" category="inline-code"></block></block>
  <block id="fc3424ba1777889d0d49ea7f5a675c9e" category="paragraph"><block ref="70d2c7701d2837552c0a38c02a326592" prefix="" category="inline-code"></block></block>
  <block id="e84b7103384d0a3393c0847330716669" category="paragraph"><block ref="f819de81247be4a5428dc0e169de28b8" prefix="" category="inline-code"></block></block>
  <block id="7dd39afeb1c0b05aac5f4bf6fbd94990" category="paragraph"><block ref="301c869c551e12d862ab0291837102a0" prefix="" category="inline-code"></block></block>
  <block id="98ce75f2128e52057c9dbf00a9eb2736" category="paragraph"><block ref="f07e606cfe25ac6fb07d9c4af941d9a2" prefix="" category="inline-code"></block></block>
  <block id="1ae6e291c93a6d5962af8004aecd9c4c" category="paragraph"><block ref="94f6d7e04a4d452035300f18b984988c" prefix="" category="inline-code"></block></block>
  <block id="af2bffb136dd0c22342ad9cb06187197" category="paragraph">空间预留模式；<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block> (精简配置)或<block ref="210ab9e731c9c36c2c38db15c28a8d1c" prefix=" " category="inline-code"></block> (厚)</block>
  <block id="7f0d015762fc8e2b44f0ad1cd5429af5" category="paragraph">要使用的Snapshot策略、默认为<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block></block>
  <block id="11663b17d5bcea48dbfb36b13965663b" category="paragraph"><block ref="d3d9446802a44259755d38e6d163e820" prefix="" category="inline-code"></block></block>
  <block id="871c12a80dbc519da4b71b3ea166cdc4" category="paragraph">创建克隆时将其从父级拆分、默认为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block></block>
  <block id="290cc6c07ae2ba0a638720a38f1356ed" category="paragraph">对于已配置的NFS卷、NAS选项默认为<block ref="f1c1592588411002af340cbaedd6fc33" prefix=" " category="inline-code"></block></block>
  <block id="8dfb6d491cffb51a17396f993c195d8b" category="paragraph"><block ref="f1c1592588411002af340cbaedd6fc33" prefix="" category="inline-code"></block></block>
  <block id="1667ea9b715250d5f295353e97cde10e" category="paragraph">要使用的NFS导出策略的NAS选项、默认为<block ref="c21f969b5f03d33d43e04f8f136e7682" prefix=" " category="inline-code"></block></block>
  <block id="980ef1c1aa7d1456ee087df02119341e" category="paragraph"><block ref="c21f969b5f03d33d43e04f8f136e7682" prefix="" category="inline-code"></block></block>
  <block id="19d28ffef37322622a55f9d7f1f9fa59" category="paragraph">SAN选项要选择文件系统类型、默认为<block ref="40d1d2ce03569076bd0dc1e0ff90aa4c" prefix=" " category="inline-code"></block></block>
  <block id="c90caaafbe0da0287b6a84f0894fa40b" category="paragraph"><block ref="310201b6353c5f38bc039e0e51b079d3" prefix="" category="inline-code"></block></block>
  <block id="c1fd85851a162222ab0690383666bd47" category="paragraph"><block ref="05b6053c41a2130afd6fc3b158bda4e6" prefix="" category="inline-code"></block></block>
  <block id="bf0a8b77dbb95465376fb2cfec90b422" category="paragraph"><block ref="76bb7251da6a3c88e629c03a402b9d15" prefix="" category="inline-code"></block></block>
  <block id="1dedbfd605df8b562acc8f759a8e9acc" category="list-text">运行的Kubernetes集群 <block ref="229e1052bb9ecd8cf2680d6f44691174" category="inline-link-macro-rx"></block></block>
  <block id="17c5eeb01739643b5aef94fe18b6c849" category="paragraph">您可以使用版本选择器在最新版本和以前的四个版本之间导航、也可以使用以下链接。</block>
  <block id="2122a8acb599837078e6b76436e892c4" category="list-text">现在、在Trident中支持Kubnetes 1.27。在升级Kubernetes之前升级Trident。</block>
  <block id="a3460163c4a2854c79a419dda57ac917" category="list-text">RHEL 8+(AMD64和ARM64)</block>
  <block id="f51a58a0cffb9f9953edce6411578b53" category="list-text">Ubuntu 22.04或更高版本(AMD64和ARM64)</block>
  <block id="c5b5b00ff1b3a892c8694ab932cbf9ca" category="paragraph">有关强制断开的详细信息、请参见 <block ref="63cac71755fb6ef1f1fea34cf4037121" category="inline-link-macro-rx"></block>。</block>
  <block id="38a0b9f59e6fe23e1617dc0e78498afe" category="section-title">有关强制断开的详细信息</block>
  <block id="20c0c9efee2da2645ec0eefaf3c75d8c" category="inline-link-macro">Kubnetes：节点非正常关闭</block>
  <block id="5a46bcb638ad3abfd754aecfb450a781" category="list-text">停止挂载到该节点的卷的后端I/O访问。</block>
  <block id="8f57f52b7233aecf56728bcd48d3a51c" category="list-text">确定并清除节点上陈旧的已发布路径。</block>
  <block id="beee3e754bb36e7321f32ad13d4ac60a" category="paragraph">所有Kubernetes工作节点都必须安装适当的iSCSI工具。请参见 <block ref="9e8cf70fcb465bf1907b585f74e9e1a6" category="inline-link-macro-rx"></block> 了解详细信息。</block>
  <block id="37225474f75e9da42c0f924ba87b113a" category="cell"><block ref="8321592ce24c8a122ecf26a63cfca407" prefix="" category="inline-code"></block>，<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>，<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>，<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block></block>
  <block id="56d1e7863190cbf5e7689e2821d0959e" category="cell"><block ref="47cb44be55a0dffa15dfc900a4c687be" prefix="" category="inline-code"></block></block>
  <block id="3bc2d9079510db6d0570883494bc5984" category="cell"><block ref="f899139df5e1059396431415e770c6dd" prefix="" category="inline-code"></block></block>
  <block id="06daeb0fdb584c4694891d290310e1ed" category="cell"><block ref="3644a684f98ea8fe223c713b77189a77" prefix="" category="inline-code"></block></block>
  <block id="58c09f2c9581bc7c58c32116266b6d8f" category="cell">要使用的层策略<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block></block>
  <block id="6792aad2d8c086a9d25f5ad8ec090f35" category="paragraph">在创建Element后端之前、您需要满足以下要求。</block>
  <block id="690b3c7311638da5eef87f5e07aa1258" category="section-title">管理卷</block>
  <block id="51e6d748c5af856ade589011dc2c7e85" category="cell"><block ref="37a6259cc0c1dae299a7866489dff0bd" prefix="" category="inline-code"></block></block>
  <block id="ddbd2735bfb88c5da807f77f6fe5f6c8" category="doc">ONTAP NAS驱动程序概述</block>
  <block id="5cc1e28c0d7b6c40ca94aacb554b31ca" category="doc">ONTAP SAN驱动程序概述</block>
  <block id="4ba6a75e6aacbc3737630ba55916cd27" category="section-title">用于管理后端的选项</block>
  <block id="798f4548a52b3c91b25609a82ff6a12e" category="paragraph">随附<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>现在、管理员可以通过两种独特的方式管理后端。这会提出以下问题：</block>
  <block id="0ee19d4be17e297cfb39c398cb268b5e" category="paragraph">此值不能更改或省略。</block>
  <block id="07d41595da50d0c332f22902db2f76d8" category="paragraph">*仅适用于<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 驱动程序*。</block>
  <block id="684a16b15a51568bcdd546607176bd57" category="paragraph"><block ref="e77a1bd34ff5793aca292b38d23bc2c9" prefix="" category="inline-code"></block></block>
  <block id="ab946346d7b6ebd4a84d96bb78dcd833" category="section-title">用于导入LUKS卷的后端配置</block>
  <block id="490414e0366b091220802d406e52c076" category="doc">新增功能</block>
  <block id="3317f97754f7308b6a0e2a12c0241d39" category="admonition">只有启用了非正常节点关闭功能门的Kubernetes版本才支持对ONP-SANON-*卷强制执行卷断开。必须在安装时使用启用强制断开<block ref="d75e90115a6343745df96039920422fc" prefix=" " category="inline-code"></block> 三元安装程序标志。</block>
  <block id="8743cc1328bba53ea356fd3e593a3f9c" category="list-text">修复了要与捆绑包权限(<block ref="25d51e363866fb30c759c73e05114b0d" category="inline-link-macro-rx"></block>）。</block>
  <block id="c16e7ed05955f3a772cc5e37988626a6" category="inline-link-macro">问题描述 #811</block>
  <block id="c8b742414af3be73bd16e0c1ed978ae5" category="list-text">修复了在问题描述 中、三端存储控制器无法立即关闭的问题(<block ref="6916c682464f601a812aa726b7255568" category="inline-link-macro-rx"></block>）。</block>
  <block id="e82b00f6dda8d75f6267522d6e8e21b3" category="list-text">添加了一个修复程序，用于列出与使用ONTAP SAN-*驱动程序配置的指定LUN关联的所有igrop名称。</block>
  <block id="3f32e3199847516d3773942171a3320e" category="inline-link-macro">问题描述 #537</block>
  <block id="8ac5248178b612abfaaec81ca7b06c94" category="list-text">修复了s390架构的编译错误(<block ref="a2e3737cce03fa6e94f8357a427b1da2" category="inline-link-macro-rx"></block>）。</block>
  <block id="70d039054d2873e8b0f28587cb19086a" category="inline-link-macro">问题描述 #781.</block>
  <block id="48b91d8b8b87d6d8c95cbc34bbae12e7" category="list-text">修复了卷挂载操作期间日志记录级别不正确的问题(<block ref="8bb65f034421623db4038f879681c20b" category="inline-link-macro-rx"></block>）。</block>
  <block id="6c85ef6d99d7dc6999989d8228ad56d9" category="inline-link-macro">问题描述 #802.</block>
  <block id="6edadfcf2d991f369cdf934677bb161a" category="list-text">修复了潜在类型断言错误(<block ref="e6bc1d779eb6c87e7246c3841e50b482" category="inline-link-macro-rx"></block>）。</block>
  <block id="afcf8fa41398f15ad38c5874372e9b4c" category="list-text">增加了对Kubnetes 1.27的支持。</block>
  <block id="67db0e94c8905c93eda71f86cb532e07" category="list-text">增加了对导入LUKS卷的支持。</block>
  <block id="6de845032edacfacdf7599428fce6ce3" category="list-text">增加了对ReadWriteOncePod PVC访问模式的支持。</block>
  <block id="9297bb6ec4e523b7875643c53cc9f528" category="list-text">增加了对在非正常节点关闭情况下对ONTAP－SAN－*卷强制断开的支持。</block>
  <block id="bf75c88234d165d6aa37891adda4465a" category="inline-link-macro">问题描述 #758</block>
  <block id="8ba74f6fd31160a630f1dc4eeb7d2e20" category="list-text">现在、所有ONTAP SAN-*卷都将使用每个节点的igroup。只有在将LUN主动发布到这些节点时、这些LUN才会映射到igroup、以改善我们的安全防护。当Trigent确定可以安全地切换到新的igrop方案而不会影响活动工作负载时、现有卷将适时切换到新的igrop方案(<block ref="9c63b965233843690f19867523ba780c" category="inline-link-macro-rx"></block>）。</block>
  <block id="79e79d7d8fe825308bd0e601daaa1131" category="list-text">通过从ONTAP SAN-*后端清除未使用的通过三叉点管理的igroup、提高了三叉点的安全性。</block>
  <block id="18596399dedf47a387f514e9c9862876" category="list-text">通过Amazon FSx向ONGP-NAS经济型和ONGP-NAS Flexgroup存储驱动程序增加了对SMB卷的支持。</block>
  <block id="42bbebea36c49138518f54240583f571" category="list-text">通过ONTAP -NAS、ONTAP -NAS经济模式和ONTAP -NAS Flexgroup存储驱动程序增加了对SMB共享的支持。</block>
  <block id="4332590e7a6bcbdc2a06dc0e18c0731b" category="inline-link-macro">问题描述 #732</block>
  <block id="5a8fc8277a0f6ed003c225aa1e7c48b6" category="list-text">增加了对ARM64节点的支持(<block ref="c2778c70230759cdeecc0357ca334a05" category="inline-link-macro-rx"></block>）。</block>
  <block id="69ef45b431e1a60332ee3ce7e1a67645" category="list-text">通过先停用API服务器改进了通过使用操作步骤 的三项功能(<block ref="6916c682464f601a812aa726b7255568" category="inline-link-macro-rx"></block>）。</block>
  <block id="be70537c794b0fc1d909e1bf6ffbbc59" category="list-text">为Makefile添加了对Windows和ARM64主机的跨平台构建支持；请参见Build .md。</block>
  <block id="6f03549bdf867b6dbabec83da444ffcf" category="paragraph">** Kubenetes:**配置ONTAP－SAN和ONTAP－SAN－Economy驱动程序时，将不再创建后端范围的igrou(<block ref="9c63b965233843690f19867523ba780c" category="inline-link-macro-rx"></block>）。</block>
  <block id="7558c614baceb6010756b848dd26325e" category="section-title">23.01.1中的变更</block>
  <block id="33871b6190a8d5adbe8b15282054766c" category="sidebar">新增功能</block>
  <block id="ffd4000c9e43a23d97e231d47f99dcd4" category="list-text">您可以运行多个驱动程序，并创建指向其中一个驱动程序的存储类。例如、您可以配置一个使用的黄金类<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 驱动程序和使用的铜牌类<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> 一个。</block>
  <block id="a571dbb3887a364b4b4dcb82a5fa6ec9" category="list-text">创建快照控制器。</block>
  <block id="ae3ba2e438847d5fb2abc16b3c73ccab" category="admonition">如有必要、打开<block ref="31a2c725707ce238c3eb4dd82c7e3af9" prefix=" " category="inline-code"></block> 并更新<block ref="89801e9e98979062e84647433a8ed3e9" prefix=" " category="inline-code"></block> 命名空间。</block>
  <block id="c48edc45b9266a1f0d1869ac35615605" category="section-title">使用快照恢复卷数据</block>
  <block id="4714f3cf4c41291cc2dae88a7150cbe5" category="paragraph">默认情况下、快照目录处于隐藏状态、以便最大程度地提高使用配置的卷的兼容性<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 和<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> 驱动程序。启用<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block> 目录以直接从快照恢复数据。</block>
  <block id="8f580d002ee0bbc67930846839d50dbe" category="paragraph">使用volume Snapshot restore ONTAP命令行界面将卷还原到先前快照中记录的状态。</block>
  <block id="f84dc17e0595ca9097097e70b9b927e1" category="admonition">还原Snapshot副本时、现有卷配置将被覆盖。创建Snapshot副本后对卷数据所做的更改将丢失。</block>
  <block id="03c39d763ca15978d9ef16c2ba5fe98a" category="doc">数据保护和灾难恢复</block>
  <block id="082510018437a15b6d42065dfe5a5384" category="inline-link-macro">Kubenetes：备份etcd集群</block>
  <block id="ec3558916e2679d1a4b592e0ade35471" category="list-text">使用备份Kubenetes集群etcd  <block ref="901b02918d705c0966dae4033c132965" category="inline-link-macro-rx"></block>。</block>
  <block id="b30057689f3e745e5feeb142585ff30b" category="list-text">从目标SVM中、将包含Kubnetes etcd数据文件和证书的卷挂载到将设置为主节点的主机上。</block>
  <block id="5fefcae3a4602913a273a904829295ce" category="list-text">在下复制与Kubirnetes集群相关的所有必需证书<block ref="890b0e4d98741eac800c616b757217cb" prefix=" " category="inline-code"></block> 和下的etcd成员文件<block ref="3fa01691da932f6c45bf424027ffabb8" prefix=" " category="inline-code"></block>。</block>
  <block id="51fa31507539ecf10c55d8cc513269d0" category="inline-link-macro">Kubornetes：还原etcd集群</block>
  <block id="3167e8459c0d46545dc7978a60ef4978" category="list-text">使用从etcd备份还原Kubenetes集群 <block ref="c87a91d2cf6358248ae560cfa802edf4" category="inline-link-macro-rx"></block>。</block>
  <block id="54d0429fea223af0d32d9f061ed733c9" category="list-text">运行<block ref="1ec8e1992e296a9bdb691f1931d391fe" prefix=" " category="inline-code"></block> 验证所有的三端测试自定义资源是否已启动、并检索三端测试对象以验证所有数据是否可用。</block>
  <block id="c87c1a25aa5e2ef1af216bc50d1fd391" category="section-title">SVM复制和恢复</block>
  <block id="0d3b37ff5855bf299f3c4a154373c1e2" category="inline-link">ONTAP SnapMirror</block>
  <block id="9299ebdcbaefed4a9ea27b355bb0f75e" category="paragraph">发生灾难时，您可以激活 SnapMirror 目标 SVM 以开始提供数据。系统还原后、您可以切换回主系统。</block>
  <block id="1de93d4bf941bc79aec631023559b9e7" category="paragraph">使用SnapMirror SVM复制功能时、请考虑以下事项：</block>
  <block id="1868906f3a3fbcf756260737545805d6" category="list-text">您应为启用了SVM-DR的每个SVM创建一个不同的后端。</block>
  <block id="f9f808f1692cabf1bf803e07da9adbe7" category="list-text">将存储类配置为仅在需要时选择复制的后端、以避免将不需要复制的卷配置到支持SVM-DR的后端。</block>
  <block id="6fa2f5991a9e2ee7d4668899f94e78e4" category="list-text">应用程序管理员应了解与复制相关的额外成本和复杂性、并在开始此过程之前仔细考虑其恢复计划。</block>
  <block id="2b5ffe73affd6d09b3b5e160e117e5c9" category="section-title">SVM复制</block>
  <block id="9f4b9999b69320b559438c600d724ff9" category="inline-link-macro">ONTAP：SnapMirror SVM复制</block>
  <block id="d628a099db3505c9d0435e12076d8a61" category="paragraph">您可以使用 <block ref="89150b9d328c8330200fceb39b37760e" category="inline-link-macro-rx"></block> 以创建SVM复制关系。</block>
  <block id="524218dc9ff1ef52c9a0404971525b21" category="inline-link-macro">-Identity保留true</block>
  <block id="8dc4e22513bbb97acc41295bfe46d5fe" category="list-text"><block ref="c758ffe020dc40d00c9a9c46ecbdd824" category="inline-link-macro-rx"></block> 复制整个SVM配置。</block>
  <block id="d18f05a5c35a5a7d999263600f0356bf" category="inline-link-macro">-discard-configs network</block>
  <block id="97c20c3eb8c7569982dc9f84e7f31ba3" category="list-text"><block ref="afa9da8af32f091c8328b13559d456b1" category="inline-link-macro-rx"></block> 不包括LIP和相关网络设置。</block>
  <block id="224ea277d21a44b59b0fa43747b4f6a6" category="inline-link-macro">-Identity保留false</block>
  <block id="471621652d0597dca59f266effb8f90f" category="list-text"><block ref="1faf7e0b3f51b53ae01a4f860a9ed344" category="inline-link-macro-rx"></block> 仅复制卷和安全配置。</block>
  <block id="da29de46c3a7d3e66fc701b2781fcbce" category="list-text">取消计划的和正在进行的SnapMirror传输、中断复制关系、停止源SVM、然后激活SnapMirror目标SVM。</block>
  <block id="98bdea55e26fba2494cc5f163b6f8076" category="list-text">如果指定了<block ref="224ea277d21a44b59b0fa43747b4f6a6" prefix=" " category="inline-code"></block> 或<block ref="e932330dd004e680ebd1a75db84b73ce" prefix=" " category="inline-code"></block> 配置SVM复制时、请更新<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block> 和<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block> 在三端定义文件中。</block>
  <block id="6141984e8f91176bd3a76175b02c1a09" category="list-text">确认<block ref="ed66bef2b107983b6e4066fddf8c45c3" prefix=" " category="inline-code"></block> 位于三端定义文件中。无法更改此参数。正在放弃<block ref="ed66bef2b107983b6e4066fddf8c45c3" prefix=" " category="inline-code"></block> 发生原因后端更新是否会失败。</block>
  <block id="51589b18e320f20306c944a08241dac1" category="list-text">使用以下命令更新所有必需的后端、以反映新的目标SVM名称：</block>
  <block id="d980e1fdfa951088567e6d057ba7dc9c" category="list-text">如果指定了<block ref="224ea277d21a44b59b0fa43747b4f6a6" prefix=" " category="inline-code"></block> 或<block ref="89680afd09991bc3d4db985c40c861c1" prefix=" " category="inline-code"></block>，则必须退回所有应用程序Pod。</block>
  <block id="cceb49886fed38f241928d51abab95a2" category="section-title">卷复制和恢复</block>
  <block id="815f28e53ebfb423dfe835a845095bf6" category="inline-link-macro">ONTAP SnapMirror复制和恢复</block>
  <block id="c3c343b5a84229bd5095fd09f2afc5f5" category="inline-link-macro">tridentctrd卷导入</block>
  <block id="d8d9dfeae772da34290b750d0f848a26" category="admonition">不支持导入<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>， <block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>或<block ref="70d5dbddc55e3700ddbc8d21f0de22a3" prefix=" " category="inline-code"></block> 驱动程序。</block>
  <block id="b489b293d6cbe8b86835d3cac8c315fb" category="section-title">Snapshot数据保护</block>
  <block id="f332d72a4b78e34e31131f3a98c98053" category="paragraph">您可以使用以下方式保护和还原数据：</block>
  <block id="97fb495fd3b6672c40bb0092ca102eca" category="list-text">外部快照控制器和CRD、用于为永久性卷(PVs)创建Kubbernetes卷快照。</block>
  <block id="83cd672b9742ba621e93a8b69c4ab2d4" category="list-text">ONTAP快照、用于还原卷的全部内容或恢复单个文件或LUN。</block>
  <block id="ad336d1fccea3e918d07055edac855a3" category="inline-link-macro">ONTAP快照</block>
  <block id="0cb949d1baa06577db93328185a8f24d" category="paragraph"><block ref="0cb949d1baa06577db93328185a8f24d" category="inline-link-macro-rx"></block></block>
  <block id="2e77d5277311f3a9232a73cdbbcd754b" category="section-title">概述和注意事项</block>
  <block id="88541191ec5fe50ba0d21b4300401b85" category="list-text">将应用程序容器化并重复使用其现有数据集</block>
  <block id="77d782125cafbbf0fe1c5c95755d143f" category="list-text">对一个应用程序使用数据集的克隆</block>
  <block id="d265b515faaf05e2c32727d8b9742a78" category="list-text">重建发生故障的Kubrenetes集群</block>
  <block id="6766ef9d5b11abf03ee72b55c5745f4b" category="list-text">在灾难恢复期间迁移应用程序数据</block>
  <block id="4c321a56c9c030449cd3315863de525b" category="paragraph">导入卷之前、请查看以下注意事项。</block>
  <block id="e47be4dcc849b534107f57afd92f801f" category="list-text">我们建议导入没有活动连接的卷。要导入当前使用的卷、请克隆此卷、然后执行导入。</block>
  <block id="e4618ea9b1ae23e5ed30f6f19e6a77e8" category="admonition">这对于块卷尤其重要、因为Kubnetes不会意识到先前的连接、并且可以轻松地将活动卷连接到Pod。这可能会导致数据损坏。</block>
  <block id="a31db9efd829f01dd21fdc97db2d29e4" category="list-text">现有卷大小在PVC中确定和设置。存储驱动程序导入卷后，系统将创建 PV ，并为其创建一个 Claims Ref 。</block>
  <block id="604eea1f3df98285b6887ff059258827" category="list-text">回收策略最初设置为<block ref="16d79ff80feadcf2f52096f073f2b94a" prefix=" " category="inline-code"></block> 在PV中。Kubernetes 成功绑定 PVC 和 PV 后，将更新回收策略以匹配存储类的回收策略。</block>
  <block id="5d24684cf5054f53b1e945be75b37f69" category="list-text">存储类的回收策略为时<block ref="099af53f601532dbd31e0ea99ffdeb64" prefix=" " category="inline-code"></block>、删除PV时、存储卷将被删除。</block>
  <block id="be303acf01bc566d5d211f228131bee4" category="admonition">如果要对容器化工作负载使用 Kubernetes ，但希望在 Kubernetes 外部管理存储卷的生命周期，则此选项非常有用。</block>
  <block id="db31dcd83fd57b294fb0340ea975015f" category="section-title">导入卷</block>
  <block id="61a1adebea5e6a017b4bd4b405ae4f52" category="paragraph">您可以使用<block ref="a768f5449e3a83ac56f2fb8ab4562339" prefix=" " category="inline-code"></block> 以导入卷。</block>
  <block id="8feb5f647cb423db7fa8a957ae4ef075" category="list-text">创建永久性卷请求(PVC)文件(例如、<block ref="88bf8ee4d993e535425148da6a64c1c2" prefix=" " category="inline-code"></block>)。PVC文件应包括<block ref="b068931cc450442b63f5b3d276ea4297" prefix=" " category="inline-code"></block>，<block ref="89801e9e98979062e84647433a8ed3e9" prefix=" " category="inline-code"></block>，<block ref="1963d17f24888bdf1f22d7ea7f72f607" prefix=" " category="inline-code"></block>，和<block ref="ee822781a3bd0ae0f8f6331dc4865d9c" prefix=" " category="inline-code"></block>。您也可以指定<block ref="c005e78d4bd808038335c32dd84cf7da" prefix=" " category="inline-code"></block> 在PVC定义中。</block>
  <block id="7f745c89a2e8fd59353bab523e12eb77" category="paragraph">以下是最低规格示例：</block>
  <block id="a9e31569460a0b133fdd97c5f482c04e" category="admonition">请勿包含PV名称或卷大小等其他参数。这可能发生原因会使导入命令失败。</block>
  <block id="37c0e0081d2fa3ebdf688df7e37ecd7a" category="paragraph">查看以下卷导入示例、了解受支持的驱动程序。</block>
  <block id="b8cd11aae04b2508e6cf401f43cdb4f9" category="section-title">ONTAP NAS和ONTAP NAS FlexGroup</block>
  <block id="6551d29114ca8e4ced094b1f68242124" category="list-text">。<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> 驱动程序无法导入和管理qtree。</block>
  <block id="15f21f5d1f84f4b986a4db037c57333d" category="list-text">。<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 和<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> 驱动程序不允许使用重复的卷名称。</block>
  <block id="3fa3bc64b029b88f42b842bb7dc4e52d" category="paragraph-title">ONTAP NAS示例</block>
  <block id="77fe25c67ee05760d58e91a98e3ff055" category="paragraph">以下是受管卷和非受管卷导入的示例。</block>
  <block id="865c1a701e3847de9fbff4a375ac7177" category="open-title">受管卷</block>
  <block id="9baac1fff2f93c6aa6f2205921fe6b32" category="paragraph">以下示例将导入名为的卷<block ref="b61fdc0d7fc5d08e674f3891a91d3116" prefix=" " category="inline-code"></block> 位于名为的后端<block ref="b0253ee501e433d48faea12f8e40ef28" prefix=" " category="inline-code"></block>：</block>
  <block id="ed12f17a6dc2e65dfdf289eb64d258ae" category="open-title">非受管卷</block>
  <block id="30690ec57cb4844d007f7d2e2c9393a2" category="paragraph">以下示例导入<block ref="60d9e6d88af815fe67aed90572f53184" prefix=" " category="inline-code"></block> 在上<block ref="b0253ee501e433d48faea12f8e40ef28" prefix=" " category="inline-code"></block> 后端：</block>
  <block id="548fedaf4074fe2826e3c53dfd92a19e" category="section-title">ONTAP SAN</block>
  <block id="854d516b7e1eddbead5cbea0b17dac88" category="paragraph-title">ONTAP SAN示例</block>
  <block id="d172829ee06c1c52828b60f0544b2f06" category="paragraph">以下示例导入<block ref="a5c0fa75ec8cf92d22eadab558660dda" prefix=" " category="inline-code"></block> 在上<block ref="2dec4fe0d108047546d031f48f4073f7" prefix=" " category="inline-code"></block> 后端：</block>
  <block id="58f7692a8b6ce5b3fa31b6daec3259fe" category="paragraph">如果您将LUN映射到与Kubornetes节点IQN共享IQN的igroux、如以下示例所示、您将收到错误：<block ref="4524d417d10c9cf90c4a674da76c4964" prefix=" " category="inline-code"></block>。您需要删除启动程序或取消映射LUN才能导入卷。</block>
  <block id="5ccef908ed30c9dac1afd0a7f3dc5e7f" category="inline-image-macro">映射到iqn和集群iqn的LUN的图像。</block>
  <block id="81238a539b4fc11fb20c6d27db1e5d33" category="paragraph"><block ref="81238a539b4fc11fb20c6d27db1e5d33" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d12ef9e4a047861afd11513bde147f35" category="paragraph-title">元素示例</block>
  <block id="e91134286ebcca5f894ca859ce6e6527" category="paragraph">以下示例将导入<block ref="ce9d6be888db333d9f15ad3ca22aab5c" prefix=" " category="inline-code"></block> 后端上的卷<block ref="54034d50b7e92e0dd9d45b9be754d7bd" prefix=" " category="inline-code"></block>。</block>
  <block id="5c9ef0d871938dccceb29ee63fad8ddb" category="section-title">Google 云平台</block>
  <block id="b83141d187ef372685e66e6dfe4cabd9" category="admonition">要在Google云平台中导入NetApp Cloud Volumes Service支持的卷、请按卷路径确定该卷。卷路径是卷的导出路径的一部分、位于之后<block ref="fb256b96ee496724e4579987e5a6e4da" prefix=" " category="inline-code"></block>。例如、如果导出路径为<block ref="3bbe8dafc880d124219c1e4f73d41cf9" prefix=" " category="inline-code"></block>、卷路径为<block ref="8886a1ac9f5b94f2fb54d752c304777f" prefix=" " category="inline-code"></block>。</block>
  <block id="9dfa04a9ad04eba811811f2fbd0f5f0e" category="paragraph-title">Google Cloud Platform示例</block>
  <block id="dd8d0b5581c0eb32a23d802032124024" category="paragraph">以下示例将导入<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block> 后端上的卷<block ref="b242744397b7d8bc9391b3e836628c5e" prefix=" " category="inline-code"></block> 卷路径<block ref="8886a1ac9f5b94f2fb54d752c304777f" prefix=" " category="inline-code"></block>。</block>
  <block id="7501988e9549daa8c2fcd13e55b9fc78" category="admonition">要导入Azure NetApp Files卷、请按卷路径确定该卷。卷路径是卷的导出路径的一部分、位于之后<block ref="fb256b96ee496724e4579987e5a6e4da" prefix=" " category="inline-code"></block>。例如、如果挂载路径为<block ref="a88065dde27cea3a008a18172c5a9c9e" prefix=" " category="inline-code"></block>、卷路径为<block ref="062b749476713f7b5bbc675159e90bad" prefix=" " category="inline-code"></block>。</block>
  <block id="1cfd9b4e20d41cdca62f758d3b0cb58b" category="paragraph-title">Azure NetApp Files示例</block>
  <block id="bd46b0a8c2c4c89a60ee85052ad2dd0e" category="paragraph">以下示例将导入<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block> 后端上的卷<block ref="d8dd89ab9d39f5487714722f9becb468" prefix=" " category="inline-code"></block> 卷路径<block ref="062b749476713f7b5bbc675159e90bad" prefix=" " category="inline-code"></block>。</block>
  <block id="0b8ca2be5f4fe564fb8e843cbc53703d" category="admonition">如果在GKE环境中创建按需卷快照、请勿创建快照控制器。GKE-使用内置的隐藏快照控制器。</block>
  <block id="ad90b7d29d0d8a9c746868fe1f38ca90" category="paragraph">Rwo、ROX、rwx、RWOP</block>
  <block id="33966eba1ed0cde6afda5a97ffaffb09" category="inline-link">安全上下文</block>
  <block id="326aae224b3bbcf4b9eb8fc0a262fc24" category="list-text">这是执行的一项 * 要求 *<block ref="cafe4c6014d8c45aaac70e49318f1a2a" category="inline-link-rx"></block> SAN 卷。</block>
  <block id="87459c33b1692755deb4b22c7eaa864c" category="section-title">第1步：选择版本</block>
  <block id="6d2d3a9fb621ba23b0f8ec56dc8b0a24" category="section-title">第2步：确定原始安装方法</block>
  <block id="dccfb2ce978b2c73d6a7308a124d0043" category="section-title">第3步：选择升级方法</block>
  <block id="d6b7a42c6c41b071d2c80b3e4c2a7edf" category="inline-link-macro">选择升级方法</block>
  <block id="ab639a35db468f671d4a76735e801015" category="paragraph">请查看 <block ref="5cffa5fbe758cc3901f0e33c78b29d1b" category="inline-link-macro-rx"></block> 升级之前<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="1d2d1200e759d67b259f843be2270f71" category="admonition">请勿中断升级过程。确保安装程序运行完毕。</block>
  <block id="053bfc722ec4b4805e32c307458f8ea5" category="paragraph">确保您使用的是正在运行的Kubbernetes集群 <block ref="d502dc64864e79085bee32826e6fe213" category="inline-link-macro-rx"></block>。</block>
  <block id="71530aef1814290453dc7add3bdae349" category="list-text">将集群范围的运算符部署在同一命名空间中。</block>
  <block id="8d23be098d49e797284393a4c1479c53" category="list-text">确认已将三项功能升级到预期版本。</block>
  <block id="e4941fda44f66f353885d1a37ca63e2b" category="list-text">对于运行Kubernetes 1.25或更高版本的集群、请使用<block ref="5a02ebff4889c2de0379a0fb10bed282" prefix=" " category="inline-code"></block>。</block>
  <block id="dacbfb309aa16cb942510c02c224fdbc" category="example-title">基于证书的身份验证示例</block>
  <block id="60eac39d4383fedcc1df436a2d0e856d" category="paragraph">在本基本配置示例中<block ref="79fffaff4013c1e8c508e76646eca77b" prefix=" " category="inline-code"></block>，<block ref="19dce7ac7f5290fc8fa218ad0c858df5" prefix=" " category="inline-code"></block>，和<block ref="8468461bca00a47ab5ddba2afc45f52c" prefix=" " category="inline-code"></block> (如果使用可信CA、则可选)将填充<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block> 和分别采用客户端证书、专用密钥和可信CA证书的base64编码值。</block>
  <block id="71b79981e733eabd769324fa40c8fa6d" category="paragraph">在下面显示的示例后端定义文件中、为所有存储池设置了特定默认值、例如<block ref="cae77b049bf504af7afc43b99b6c5213" prefix=" " category="inline-code"></block> 无、<block ref="45922ba6ba8428764f22ed06f814c762" prefix=" " category="inline-code"></block> 为false、和<block ref="5bdf74912a51c34815f11e9a3d20b609" prefix=" " category="inline-code"></block> 为false。虚拟池在存储部分中进行定义。</block>
  <block id="71fcdf20b31ca43f6ef64c06530f313d" category="paragraph">在这些示例中、某些存储池会自行设置<block ref="cae77b049bf504af7afc43b99b6c5213" prefix=" " category="inline-code"></block>，<block ref="45922ba6ba8428764f22ed06f814c762" prefix=" " category="inline-code"></block>，和<block ref="5bdf74912a51c34815f11e9a3d20b609" prefix=" " category="inline-code"></block> 值、而某些池会覆盖默认值。</block>
  <block id="574e53d92fdeaac37ba2d879a9b88f12" category="example-title">ONTAP NAS示例</block>
  <block id="bdb252122df8a6e68a54782628d1944f" category="example-title">ONTAP NAS FlexGroup示例</block>
  <block id="9561077d9ef091b88a253b8593eb8bfb" category="example-title">ONTAP NAS经济性示例</block>
  <block id="eb2e955f1a984e2be0e3fa8cdbe6667c" category="paragraph">以下StorageClass定义请参见 <block ref="d690aebda44a37b8ae9c2c6f1918cb30" category="inline-xref-macro-rx"></block>。使用<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block> 字段中、每个StorageClass都会指出可用于托管卷的虚拟池。卷将在选定虚拟池中定义各个方面。</block>
  <block id="01eacb47d802acac83a7e60311768055" category="list-text">。<block ref="63f9100803e1f67a5e33cbd5da9dbb33" prefix=" " category="inline-code"></block> StorageClass将映射到中的第一个和第二个虚拟池<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> 后端。这些池是唯一提供金牌保护的池。</block>
  <block id="6b35cdd98b7f7e55e698a6d0628e18e0" category="list-text">。<block ref="afbfe298fa275e5fff1aca9b2f213d9a" prefix=" " category="inline-code"></block> StorageClass将映射到中的第三个和第四个虚拟池<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> 后端。这些池是唯一提供黄金级以外保护级别的池。</block>
  <block id="535efa214445261dfda5d5edc613e56b" category="list-text">。<block ref="65846755494383158592c748f74421ec" prefix=" " category="inline-code"></block> StorageClass将映射到中的第四个虚拟池<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 后端。这是为mysqldb类型的应用程序提供存储池配置的唯一池。</block>
  <block id="d0c5a28c77fc4e37f7271d37f7372724" category="list-text">。<block ref="2e63b2ff91d4aeb88b54db5c90b71443" prefix=" " category="inline-code"></block> StorageClass将映射到中的第三个虚拟池<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> 后端。这是唯一提供银牌保护和20000个信用点的池。</block>
  <block id="0191eea3640b05213a7522d6581a2fd5" category="list-text">。<block ref="a96bee9dd30f3ea0af93b4c64ca1e4a4" prefix=" " category="inline-code"></block> StorageClass将映射到中的第三个虚拟池<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 中的后端和第二个虚拟池<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> 后端。这是唯一一款信用点数为5000的池产品。</block>
  <block id="cd5dd52b9f0bba70b1336e13afe05818" category="paragraph">这是使用的基本配置<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 驱动程序。</block>
  <block id="31089bb4131b18ca65c3d384cdd49644" category="example-title">双向CHAP示例</block>
  <block id="17baa03e9287aee400bc2e606d247156" category="paragraph">这些示例使用创建后端<block ref="099cb468880f266cba40b49391fa46bc" prefix=" " category="inline-code"></block> 设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>。</block>
  <block id="7a4c6868ec70d1fbee3cb3a7483e21d0" category="listing-title">ONTAP SAN CHAP示例</block>
  <block id="a0c1c7f21916f2a4fb0f0d56732adc90" category="listing-title">ONTAP SAN经济性CHAP示例</block>
  <block id="6b743d9085f7f94d7a334c4386fbe239" category="paragraph">在这些示例后端定义文件中、为所有存储池设置了特定默认值、例如<block ref="cae77b049bf504af7afc43b99b6c5213" prefix=" " category="inline-code"></block> 无、<block ref="45922ba6ba8428764f22ed06f814c762" prefix=" " category="inline-code"></block> 为false、和<block ref="5bdf74912a51c34815f11e9a3d20b609" prefix=" " category="inline-code"></block> 为false。虚拟池在存储部分中进行定义。</block>
  <block id="4930386ddaad825d64732ee9ec5e65b8" category="example-title">ONTAP SAN示例</block>
  <block id="8a10ba8eb41944c10648f18ba7e16239" category="example-title">ONTAP SAN经济性示例</block>
  <block id="50543d5d423c4c1a0b4fdd41383189e5" category="paragraph">以下StorageClass定义涉及 <block ref="d690aebda44a37b8ae9c2c6f1918cb30" category="inline-xref-macro-rx"></block>。使用<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block> 字段中、每个StorageClass都会指出可用于托管卷的虚拟池。卷将在选定虚拟池中定义各个方面。</block>
  <block id="514e71168790374132badc1258ee5136" category="list-text">。<block ref="63f9100803e1f67a5e33cbd5da9dbb33" prefix=" " category="inline-code"></block> StorageClass将映射到中的第一个虚拟池<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 后端。这是唯一提供金牌保护的池。</block>
  <block id="a9c41ef671a6da4ed0f439f86683b714" category="list-text">。<block ref="afbfe298fa275e5fff1aca9b2f213d9a" prefix=" " category="inline-code"></block> StorageClass将映射到中的第二个和第三个虚拟池<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 后端。只有这些池提供的保护级别不是gold。</block>
  <block id="910ed65246d7ee240ec166f94b1fd5c9" category="list-text">。<block ref="65846755494383158592c748f74421ec" prefix=" " category="inline-code"></block> StorageClass将映射到中的第三个虚拟池<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 后端。这是为mysqldb类型的应用程序提供存储池配置的唯一池。</block>
  <block id="fa03c7de8b1b7b7061bb536c211f3aaf" category="list-text">。<block ref="2e63b2ff91d4aeb88b54db5c90b71443" prefix=" " category="inline-code"></block> StorageClass将映射到中的第二个虚拟池<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 后端。这是唯一提供银牌保护和20000个信用点的池。</block>
  <block id="ac996ac8e4442d8a2791ba8b1e301a02" category="list-text">。<block ref="a96bee9dd30f3ea0af93b4c64ca1e4a4" prefix=" " category="inline-code"></block> StorageClass将映射到中的第三个虚拟池<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 中的后端和第四个虚拟池<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 后端。这是唯一一款信用点数为5000的池产品。</block>
  <block id="b003731e1d339366ed065ffe5a0f50ca" category="paragraph">在下面所示的示例后端定义文件中、为所有存储池设置了特定的默认值、这些存储池设置了<block ref="599dcce2998a6b40b1e38e8c6006cb0a" prefix=" " category="inline-code"></block> 在Silver。虚拟池在中进行定义<block ref="ddecebdea58b5f264d27f1f7909bab74" prefix=" " category="inline-code"></block> 部分。在此示例中、某些存储池会设置自己的类型、而某些存储池会覆盖上面设置的默认值。</block>
  <block id="622bbef04f6f2121d92777cd7c59cc83" category="list-text">默认情况下、通过使用三端安装程序、可以在中部署操作员<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block> 命名空间。如果<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block> 命名空间不存在、请使用以下命令创建命名空间：</block>
  <block id="5bb66df6f3cd1e022e0cb84d5ef9e8e6" category="list-text">在非命名空间中部署操作员<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block> 命名空间、更新<block ref="8610cac3beb01fb0b43bc94c587a807d" prefix=" " category="inline-code"></block>，<block ref="a3df76a4fb69b2a5e9ec42d242e90ea3" prefix=" " category="inline-code"></block> 和<block ref="9fa80de5781893b057ff1d535201893b" prefix=" " category="inline-code"></block> 并使用生成捆绑包文件<block ref="67b2cc1cd5b1570014463995fb2ada61" prefix=" " category="inline-code"></block>。</block>
  <block id="806742cccf8380250ffb871d582a0a03" category="list-text">验证是否已创建操作员、部署和副本集。</block>
  <block id="9b800ce65251b771d0eb86610e11f6b0" category="list-text">可从集群的工作节点访问的现有Amazon FSx for NetApp ONTAP文件系统和Storage Virtual Machine (SVM)。</block>
  <block id="f55c34459cf261d1102750bcbde548d8" category="paragraph">才能使用配置SMB卷<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 驱动程序、则必须满足以下条件。</block>
  <block id="78e5b29e139db71ceb7ca6bc99b5e228" category="paragraph">这是一个最低后端配置示例。<block ref="79fffaff4013c1e8c508e76646eca77b" prefix=" " category="inline-code"></block>，<block ref="19dce7ac7f5290fc8fa218ad0c858df5" prefix=" " category="inline-code"></block>，和<block ref="8468461bca00a47ab5ddba2afc45f52c" prefix=" " category="inline-code"></block> (如果使用可信CA、则可选)将填充<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block> 和分别采用客户端证书、专用密钥和可信CA证书的base64编码值。</block>
  <block id="33ef55e82416e2c1c4beb9cba9560b02" category="paragraph">。<block ref="5910159ef86741f119f7574a9064b5b0" prefix=" " category="inline-code"></block> 使用SMB卷的FSx for ONTAP需要参数。</block>
  <block id="ef0e40b987d8b9ad523bdde2bba5157a" category="summary">了解使用ONTAP NAS驱动程序配置ONTAP后端的要求、身份验证选项和导出策略。</block>
  <block id="c63609aba869239be30364b58d99b1a3" category="section-title">对ONTAP后端进行身份验证</block>
  <block id="e5fdb627c170dc14e3873b3da32f3aa5" category="paragraph">只需稍作准备、您就可以使用配置SMB卷<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 驱动程序。</block>
  <block id="8de0a7910b914d44521684fe2a3a28c6" category="paragraph">在配置SMB卷之前、您必须满足以下条件。</block>
  <block id="6a402202521e2168a911181e81c72faf" category="admonition">Amazon FSx for ONTAP需要SMB共享。</block>
  <block id="7f7041fc0ca0e00f3d3e39e4ce4a5149" category="paragraph">您可以使用以下两种方式之一创建SMB管理共享 <block ref="364bc251e9c8cfbf6ce258767d17d682" category="inline-link-macro-rx"></block> 共享文件夹管理单元或使用ONTAP 命令行界面。要使用ONTAP 命令行界面创建SMB共享、请执行以下操作：</block>
  <block id="7d159230ccaa721872f31bf9be31afeb" category="paragraph">虽然可以在ONTAP中创建一个可以由三端驱动程序使用的限制性更强的角色、但我们不建议这样做。大多数新版本的 Trident 都会调用需要考虑的其他 API ，从而使升级变得困难且容易出错。</block>
  <block id="37a679c38162162811d93d22ba8f5b4a" category="paragraph">了解使用ONTAP SAN驱动程序配置ONTAP后端的要求和身份验证选项。</block>
  <block id="3262251091b863054cfabf046c0e3493" category="paragraph">NFS
SMB</block>
  <block id="e8a058c8c47f6e4976a9fc5b5c00ec92" category="summary">创建一个使用已配置的Kubernetes StorageClass来请求对PV的访问的永久性卷(PV)和永久性卷克莱姆(PVC)。然后、您可以将PV挂载到POD。</block>
  <block id="a3b7bd8edd528214a68ac3ceb5c9935c" category="doc">配置卷</block>
  <block id="2d63b64b84c821bc810927f7ca7fa993" category="inline-link">_PersigentVolumeClaim_</block>
  <block id="d948cda211eadd3a86a406b43ee0d5fa" category="paragraph">可以将PVC配置为请求特定大小的存储或访问模式。通过使用关联的StorageClass，集群管理员可以控制不限于持续卷大小和访问模式(例如性能或服务级别)。</block>
  <block id="35e98ba80f6254a33de7a37ab113316e" category="section-title">示例清单</block>
  <block id="3c5f9191f489dbdd8d950bafc3dea6e0" category="example-title">PerfsentVolume示例清单</block>
  <block id="a992ed82e7964281386cdd46c0c21da6" category="paragraph">此示例清单显示了与StorageClass关联的10gi的基本PV<block ref="1c62ceba602064183a6346b85fe26c96" prefix=" " category="inline-code"></block>。</block>
  <block id="cdeec5159e0548de993d76d7d1dcc992" category="paragraph">此示例显示了一个具有读取权限的基本PVC、该PVC与名为的StorageClass关联<block ref="1c62ceba602064183a6346b85fe26c96" prefix=" " category="inline-code"></block>。</block>
  <block id="bb970cb0639998faceb4ab3a67e3f1e3" category="section-title">创建PV和PVC</block>
  <block id="e1f83bd8f580cc9a48311142d551b3cf" category="list-text">创建 PVC 。</block>
  <block id="150f6f248f009f461b84862124e2b499" category="list-text">验证PVC状态。</block>
  <block id="6a308a8072d1cf8c73629852d7f0b1af" category="list-text">将卷挂载到Pod中。</block>
  <block id="b5450caedb9c7aa352b9fb0427aee784" category="admonition">您可以使用监控进度<block ref="6abdceb61753f298491e021c4da24ddd" prefix=" " category="inline-code"></block>。</block>
  <block id="8118780a1733b73d43c1042889af94bd" category="list-text">验证卷是否已挂载到上<block ref="9f5298598b1aa26f257834220853cb05" prefix=" " category="inline-code"></block>。</block>
  <block id="6604c85c599768bb970b37e590ef79fe" category="list-text">现在、您可以删除Pod。Pod应用程序将不再存在、但卷将保留。</block>
  <block id="95d4f411b57eb8201e27fa4636c30816" category="section-title">配置Kubnetes StorageClass对象</block>
  <block id="b8d89cc8455fbb137550c0819b7813c8" category="inline-link">Kubnetes StorageClass对象</block>
  <block id="d955a256e02907c43d2afd5bfdb671ea" category="paragraph">创建StorageClass对象后、您可以创建存储类。 <block ref="1310ad9d78b8b659f76828400b5d8126" category="inline-xref-macro-rx"></block> 提供了一些可供您使用或修改的基本示例。</block>
  <block id="a221a060125881c2027807248f8302a2" category="list-text">这是一个Kubbernetes对象、因此请使用<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block> 以在Kubernetes中创建。</block>
  <block id="f31a577daf927c7edc5555c9ceabc983" category="section-title">存储类示例</block>
  <block id="64c314ed1bd24115a72a8a4284115a5c" category="inline-link">适用于特定后端的简单存储类定义</block>
  <block id="d9ab9b10b2101546e16eeab0b981d10c" category="paragraph">或者、您也可以进行编辑<block ref="9a35c6080acd99f860d0c669b1a980f9" prefix=" " category="inline-code"></block> 安装程序随附的文件、然后进行替换<block ref="9c9a0798e59f3f4d7b08e45faef1e131" prefix=" " category="inline-code"></block> 和存储驱动程序名称。</block>
  <block id="ff87ac5778183437377f5f963a3dccac" category="paragraph">编辑StorageClass定义以设置<block ref="6add71a247c8f4513060920be14857bc" prefix=" " category="inline-code"></block> 字段设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>。</block>
  <block id="efe0663b3e4eed08a4a1b30c3f3a2aac" category="paragraph">编辑PVC定义并更新<block ref="02b011e6fe36e26e5f7365ba08bf5a48" prefix=" " category="inline-code"></block> 以反映新需要的大小、该大小必须大于原始大小。</block>
  <block id="9d384cd22f1c9bc6a23136fe35d2a51c" category="paragraph">将PV连接到POD以调整大小。调整 iSCSI PV 大小时，有两种情况：</block>
  <block id="a22a8450047f7b7aea2c76b348f6ba43" category="summary">您可以查看现有存储类、设置默认存储类、确定存储类后端以及删除存储类。</block>
  <block id="e372af4ebeb99af557aa13609f47f47c" category="admonition">集群中一次只能有一个默认存储类。Kubernetes 在技术上不会阻止您拥有多个存储类，但其行为就像根本没有默认存储类一样。</block>
  <block id="c1ec7161e63fe862aeb30466f8f3f3b8" category="paragraph">要使用快照、您必须具有外部快照控制器和自定义资源定义(CRD)。这是Kubernetes流程编排程序(例如：Kubeadm、GKE、OpenShift)的职责。</block>
  <block id="d0838c5cbd45cca11f4f53eb773d017d" category="paragraph">如果您的Kubernetes分发版不包含快照控制器和CRD、请参见 <block ref="048c22f74eff12037af96b48becdf135" category="inline-xref-macro-rx"></block>。</block>
  <block id="c4f5303a406f47eb87bf815d986165ee" category="section-title">创建卷快照</block>
  <block id="86690b5147c7d6867042b834d17ef28b" category="list-text">创建<block ref="19476662cd814e0aa085eca121de89b8" prefix=" " category="inline-code"></block>。有关详细信息，请参见 <block ref="0ad6a602adca2b32136ef84f7518b131" category="inline-link-macro-rx"></block>。</block>
  <block id="eea37fbd5872936b77e1e2e8a4af0cea" category="list-text"><block ref="98e7d6463271d7848db255ae6467817a" prefix="" category="inline-code"></block> 可以是<block ref="f2a6c498fb90ee345d997f888fce3b18" prefix=" " category="inline-code"></block> 或<block ref="afece4245269582cb2f1009d4fb52047" prefix=" " category="inline-code"></block>。设置为时<block ref="afece4245269582cb2f1009d4fb52047" prefix=" " category="inline-code"></block>、存储集群上的底层物理快照会保留、即使在使用时也是如此<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block> 对象已删除。</block>
  <block id="0c9cf2ac15a6b5c5324b08e91b840fa4" category="list-text">创建现有PVC的快照。</block>
  <block id="8f72fd9aa081cd83550f8e13086b8967" category="list-text">此示例将为名为的PVC创建卷快照对象<block ref="30520f4f96804df83914260b79f55962" prefix=" " category="inline-code"></block> 快照的名称设置为<block ref="2599ab7993e15386327b6345bc1cc4e1" prefix=" " category="inline-code"></block>。VolumeSnapshot类似于PVC、并与关联<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block> 表示实际快照的对象。</block>
  <block id="4a2834678b378c24001efcc2f1ca5238" category="list-text">您可以确定<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block> 的对象<block ref="2599ab7993e15386327b6345bc1cc4e1" prefix=" " category="inline-code"></block> VolumeSnapshot的说明。。<block ref="25fb031d6a134e0fb5a240d6d4c12b01" prefix=" " category="inline-code"></block> 标识提供此快照的VolumeSnapshotContent对象。。<block ref="a701d928aada0f89c8ad0abc16ccdfcc" prefix=" " category="inline-code"></block> 参数表示快照可用于创建新PVC。</block>
  <block id="a7fab4013a8993c3310ee07c7e101fc1" category="section-title">从卷快照创建PVC</block>
  <block id="698ebb07855a850e7bcbd189f9322e21" category="paragraph">您可以使用<block ref="d9d448f70687a1aa1f12b2f5ddaa4977" prefix=" " category="inline-code"></block> 使用名为的卷快照创建PVC<block ref="38741d2dca753415660b08a54f8ad3a9" prefix=" " category="inline-code"></block> 作为数据源。创建 PVC 后，可以将其附加到 Pod 上，并像使用任何其他 PVC 一样使用。</block>
  <block id="8d9f716dc04d23bb9af0a64fef3bbbd9" category="paragraph">以下示例将使用创建PVC<block ref="2599ab7993e15386327b6345bc1cc4e1" prefix=" " category="inline-code"></block> 作为数据源。</block>
  <block id="c2d480d58505386b1609d69c842aaf44" category="section-title">导入卷快照</block>
  <block id="868f2cc6f424bbd531c3ac4f053a8125" category="inline-link-macro">Kubbernetes预配置快照过程</block>
  <block id="f6e6b6f8bbabf2b4d61efaa16f96f7c7" category="list-text">TRIdent返回<block ref="0253f5e864e2646df8eab03ca4f066ee" prefix=" " category="inline-code"></block>。</block>
  <block id="2fae3f8997b56adf73a63fcf9e10a75d" category="list-text">*任何用户:*创建一个<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block> 以引用新的<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block>、其中<block ref="be455c19a1930c91806853db05c277d9" prefix=" " category="inline-code"></block> (或<block ref="43cbd4bd62b601d2f5e0b618220b0f44" prefix=" " category="inline-code"></block>)名称为<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block> 名称。</block>
  <block id="35d57da577b5f55299f7644e8b2de091" category="section-title">删除具有关联快照的PV</block>
  <block id="b1bc7c11251b98a19ba1fc0ad08275ed" category="section-title">部署卷快照控制器</block>
  <block id="66cbadc48d2dbe3accb93937a8d42d1e" category="paragraph">必须使用两个配置选项。下面是一个后端定义示例：</block>
  <block id="a03c5f2c1a3d118d44bc3e92d52663bb" category="paragraph">Trident还提供<block ref="77167d63af133b47bca3bbacd580fa44" prefix=" " category="inline-code"></block> 和<block ref="58c1c86186ef8de4f6e12d8f3aed8b64" prefix=" " category="inline-code"></block> 用于创建克隆的标注。您可以使用这些标注克隆PVC、而无需使用CSI实施。</block>
  <block id="5f117d85f5b23527c781bb26a4b15109" category="paragraph">。<block ref="75e4a0ceb294a9d74374c938e4e8ddc8" prefix=" " category="inline-code"></block> 目录包含用于Trident的PVC定义示例。请参见 <block ref="62155edb2842dfbdb69802620baa3865" category="inline-xref-macro-rx"></block> 有关与三项技术的卷关联的参数和设置的完整问题描述。</block>
  <block id="a5fd2691a6a5df653970895b1c5045ed" category="inline-link-macro">升级Helm安装</block>
  <block id="26ad893be275d6f4dd0e2992250c147f" category="inline-link-macro">Kubernetes CSI Sidecar Containers</block>
  <block id="7457022455b6a26d17766b38200639d9" category="section-title">三项控制器Pod</block>
  <block id="8268d8b8723783972c959e76371dd7df" category="paragraph">三端控制器Pod是一个运行CSI控制器插件的Pod。</block>
  <block id="4d52310e56906c6b51b5691f5aca1a86" category="list-text">负责配置和管理NetApp存储中的卷</block>
  <block id="64ebc3b44b9bf9706d440310d6edc2a9" category="list-text">由Kubbernetes部署管理</block>
  <block id="77dde6100b9c974d6b8f13a2c5a5d91f" category="list-text">可以在控制面板或工作节点上运行、具体取决于安装参数。</block>
  <block id="c8d85d76462b8224e3b823eec9636faa" category="image-title">TRIdent控制器Pod示意图</block>
  <block id="bea45d305fedae15441ab438c3abf9a6" category="image-alt">运行CSI控制器插件并具有适用CSI二进化标准的三进位控制器Pod示意图。</block>
  <block id="7ac36fe121832c95b5cc692aac2d42e9" category="section-title">三级节点块</block>
  <block id="cb5b3335d8639110c33aa74ae67f7ec2" category="paragraph">三端节点块是运行CSI节点插件的有权限的节点。</block>
  <block id="23b09b316e4e6d2ab77e24ae85097f4f" category="list-text">负责挂载和卸载主机上运行的Pos的存储</block>
  <block id="5d6469c46b1f411571e059e13a5fe826" category="list-text">由Kubbernetes DemonSet管理</block>
  <block id="723997cd24cc1452bfa6efd9349f4262" category="list-text">必须在要挂载NetApp存储的任何节点上运行</block>
  <block id="ffc3cbdd80c8b7dee840511d7c7b2cce" category="image-title">TRIdent节点Pod图</block>
  <block id="8f29ef239c0926132689374fc142a732" category="image-alt">运行CSI节点插件并具有适用CSI二进化标准的三进位节点Pod示意图。</block>
  <block id="58095fffdb6c13585af5e47e876f7afe" category="inline-link-macro">Kubbernetes概念和工具</block>
  <block id="1bc6462cd59612636c72620a6a67410b" category="admonition">如果这是您首次使用Kubarnetes、您应熟悉 <block ref="41eecc10f74d492dbf2a2c207d5acb1b" category="inline-link-macro-rx"></block>。</block>
  <block id="aba4bc9d3bde7d18b07c23d5c7d0f495" category="paragraph">Kubernetes集群中的所有工作节点都必须能够挂载为Pod配置的卷。</block>
  <block id="f3b066024fd8e2699d194d41d5e46a5d" category="paragraph-title"><block ref="05b2444faffd66d76e88602ea7dd353f" category="inline-image-macro-rx" type="image"></block> 创建后端</block>
  <block id="2865195658f1488af43d46690ad5826e" category="inline-link-macro">配置后端</block>
  <block id="079428cf070b5e0039780f2cb4a5a962" category="paragraph"><block ref="8be76aeedec602130bcedf5acbf56030" category="inline-link-macro-rx"></block> 存储系统</block>
  <block id="eda4708b025e26e5f9759856f4f88876" category="paragraph-title"><block ref="beadfa85a2fdca06b91edc1131c603e6" category="inline-image-macro-rx" type="image"></block> 创建Kubbernetes存储类</block>
  <block id="abf99adee0d47955ab8c148a0937ce6e" category="paragraph"><block ref="abf99adee0d47955ab8c148a0937ce6e" category="inline-link-macro-rx"></block></block>
  <block id="e5d9de39f7ca1ba2637e5640af3ae8aa" category="inline-image-macro">五个</block>
  <block id="b625988ee18e5f1370f9b328cfa197b7" category="paragraph-title"><block ref="99e8b2f00e172bfcff96afdce69907bc" category="inline-image-macro-rx" type="image"></block> 配置卷</block>
  <block id="185cde3c1e3ef64c59eaee8662d4048a" category="paragraph">永久性卷(PV)是由集群管理员在Kubernetes集群上配置的物理存储资源。_PersentVolumeClaim_(PVC)是对集群上的PersentVolume的访问请求。</block>
  <block id="7646000ea978570e919e657f5ec9aa57" category="paragraph"><block ref="7646000ea978570e919e657f5ec9aa57" category="inline-link-macro-rx"></block></block>
  <block id="abefc87b0c4c459aa6fdb12d98caf984" category="paragraph">现在、您可以添加其他后端、管理存储类、管理后端以及执行卷操作。</block>
  <block id="ca3c25915a30bef4ec583f6082477acf" category="paragraph">如果要从使用默认值的配置修改配置<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block> 访问组到也使用其他的访问组、并包括的ID<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block> 列表中的访问组。</block>
  <block id="b2edeceecc054572188ee3b08cd58c64" category="list-text">放置二进制文件并创建配置文件后、使用所需的配置文件启动三叉进制守护进程。</block>
  <block id="b4f83b03956523a39e8bbbd0895f0f29" category="inline-link-macro">Cloud Insights</block>
  <block id="63bfc0691d397470e5b0b05f2a9bcbe4" category="inline-link-macro">问题描述740</block>
  <block id="c8af8b49eb3be9ce411280db66de8a12" category="list-text">修复了通过升级三项功能忽略处于终止状态的旧Pod的问题(<block ref="6f993c83118cc4a1dd5351c8501e26c9" category="inline-link-macro-rx"></block>）。</block>
  <block id="cf182305f6f941fa317842399de1ca4a" category="inline-link-macro">问题描述#C了</block>
  <block id="4f2f189f428da83c5c5d7e21123fb37a" category="list-text">为"瞬 时-三端版本-POD "定义添加了容差(<block ref="cc0c8d3c31e9e289114ade0ef394e90b" category="inline-link-macro-rx"></block>）。</block>
  <block id="d5d58a85f5f4a2ac889804742dd7cbb0" category="inline-link-macro">问题描述#816</block>
  <block id="057a4c7c1e2ca8cd3deafe12ee9f2083" category="list-text">修复了存储驱动程序代码(<block ref="9862a2577d865ba18fdd2c972f46545b" category="inline-link-macro-rx"></block>）。</block>
  <block id="97327b29ec21422eaecf8ba479782331" category="list-text">固定了使用ONTAP驱动程序和use-rest=true时的配额大小调整。</block>
  <block id="4e6566ec95776d26fcd04a8b88c3e2bc" category="list-text">修复了在ONTAP SAN经济模式下创建LUN克隆的问题。</block>
  <block id="dcfc8521cd4d3b29941e756366e00988" category="list-text">从还原发布信息字段<block ref="380d41b2be72ecdeb109d9d8bf377a97" prefix=" " category="inline-code"></block> to<block ref="cad41ea6c72f7b62b784d199bdd6ec73" prefix=" " category="inline-code"></block>；添加了用于填充和恢复的逻辑(在某些情况下)<block ref="cad41ea6c72f7b62b784d199bdd6ec73" prefix=" " category="inline-code"></block> 字段。</block>
  <block id="4f2d668b01cf06eca683c287dd7e5082" category="list-text">增加了对导入预配置快照的支持。</block>
  <block id="c47a181e80e553128675166326adecf7" category="inline-link-macro">问题描述#十十一号</block>
  <block id="5f595b574bc00c971991f9f665431b60" category="list-text">最小化部署和守护进程Linux权限(<block ref="aef28cf398bf45d3657483afbc3d3240" category="inline-link-macro-rx"></block>）。</block>
  <block id="62dcabbe3f6dc07f213482f5acada256" category="list-text">不再报告"联机"卷和快照的状态字段。</block>
  <block id="4ff2bb4ecc0b6d51be0477f9d63d5273" category="inline-link-macro">问题801</block>
  <block id="9fde208cd399f14480a57fc99b20d291" category="inline-link-macro">#543.</block>
  <block id="0696447eb82cdf62dcb8b6c916f35746" category="list-text">如果ONTAP后端处于脱机状态(<block ref="961e04dd6eabff35abb325a6607994ca" category="inline-link-macro-rx"></block>， <block ref="fc57c79b0b6691b508ed06011d9f5581" category="inline-link-macro-rx"></block>）。</block>
  <block id="277ca88d500a9627118781ff85088e70" category="list-text">LUN序列号始终在ControllerVolumePubl出版 工作流期间进行检索和发布。</block>
  <block id="810ba7b767989fc4c733ae7e9e3460cd" category="list-text">添加了其他逻辑来验证iSCSI多路径设备序列号和大小。</block>
  <block id="76ba5d25ded4cc29f1dbfeb16ad652f4" category="list-text">对iSCSI卷进行额外验证、以确保取消暂存正确的多路径设备。</block>
  <block id="3f46c22d346dcb4ef51b664a9e105030" category="section-title">试验性增强</block>
  <block id="866a2a7036f4701ef7fe25f161516e81" category="paragraph">为ONTAP SAN驱动程序添加了基于TCP的NVMe技术预览支持。</block>
  <block id="8e2ae59abc43c08fd49c55abd4da0925" category="paragraph">在组织和格式方面进行了许多改进。</block>
  <block id="fbfae4e9fcac672dd7f5304651cd7713" category="list-text">不再支持v1beta1快照。</block>
  <block id="662d0c4b0dab9a3aa7e86162000ad383" category="list-text">不再支持CSI之前的卷和存储类。</block>
  <block id="8c20e8f4703bb12917ce6ae87f5c65a1" category="list-text">已将支持的最小Kubbernetes更新为1.22。</block>
  <block id="30e50aa1d9f8718f34cb0ecbef4ec9ea" category="section-title">23.04年度的变动</block>
  <block id="2ae7281d275fb0db889e8ad073e94629" category="paragraph">您可以在后端定义中指定 CHAP 启动程序以及目标用户名和密码，并在 SVM 上启用 Trident CHAP 。使用<block ref="099cb468880f266cba40b49391fa46bc" prefix=" " category="inline-code"></block> 参数在后端配置中、Trident使用CHAP对ONTAP 后端的iSCSI连接进行身份验证。</block>
  <block id="8f971d8f40dd91f1f3041a0d7faf5f85" category="paragraph">您应确保每个后端都有一个导出策略，该策略仅允许访问 Kubernetes 集群中的节点。｛\f270可以自动创建和管理导出策略｝｛\f151。｝通过这种方式， Trident 会限制对其配置给 Kubernetes 集群中节点的卷的访问，并简化节点的添加 / 删除。</block>
  <block id="52009bb7ee17227f566cd26a02caee56" category="inline-link-macro"><block ref="52009bb7ee17227f566cd26a02caee56" category="inline-link-rx"></block></block>
  <block id="a1a9afcf552a769c282769271829889a" category="paragraph"><block ref="a1a9afcf552a769c282769271829889a" category="inline-link-macro-rx"></block></block>
  <block id="f99aa604031e5049799e73b5c3748a98" category="inline-link-macro"><block ref="f99aa604031e5049799e73b5c3748a98" category="inline-link-rx"></block></block>
  <block id="5d545fe5152641e2ebe654e336e520e5" category="paragraph"><block ref="5d545fe5152641e2ebe654e336e520e5" category="inline-link-macro-rx"></block></block>
  <block id="88e5eabd3917048b6927c42496b98f86" category="inline-link-macro"><block ref="88e5eabd3917048b6927c42496b98f86" category="inline-link-rx"></block></block>
  <block id="dd38f906b37d412de7d1c1dcf4cbf31c" category="paragraph"><block ref="dd38f906b37d412de7d1c1dcf4cbf31c" category="inline-link-macro-rx"></block></block>
  <block id="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-macro"><block ref="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-rx"></block></block>
  <block id="2352c4e1f4d0024ade0869e00e6243f4" category="paragraph"><block ref="2352c4e1f4d0024ade0869e00e6243f4" category="inline-link-macro-rx"></block></block>
  <block id="7b0d9f7412b27b7678fe3c1e9ecd655d" category="example-title">&lt;strong&gt;帐户&lt;/strong&gt;</block>
  <block id="33ab2c3f94452baf7f17dab03982edfb" category="paragraph">之后<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 更新后、操作员将处理更新并修补现有安装。这可能会触发创建新Pod以相应地修改安装。</block>
  <block id="ac0482b416d6b2d907db760f79e018a7" category="example-title">&lt;strong&gt; Clean重新安装&lt;/strong&gt;</block>
  <block id="34c1edfb4ac8581528c3791be680aeb3" category="inline-link-macro">CVS 服务类型</block>
  <block id="5797c3891863b81173e1bb10d6488a72" category="inline-link-macro">CVS服务类型示例</block>
  <block id="6429305365094c29848a93a6d17a7f53" category="list-text">https://github.com/NetApp/trident/tree/master/trident-installer/sample-input[sample输入^]目录包含https://github.com/NetApp/trident/blob/master/trident-installer/sample-input/storage-class-samples/storage-class-basic.yaml.templ等示例<block ref="9abb8c7777ddb413820ee07d5d93aa4a" prefix="[" category="inline-code"></block>^)和链接：https://github.com/NetApp/trident/blob/master/trident-installer/sample-input/storage-class-samples/storage-class-bronze-default.yaml<block ref="69ae2d9a6d831af7488e53fec053b77e" prefix="[" category="inline-code"></block>^。</block>
  <block id="2251733916a92fc0c61d943165128928" category="inline-link-macro">早期版本</block>
  <block id="7bd3bf704987c7c25848acd94f0e499d" category="list-text">使用 ...<block ref="8dd3e3fab389d3d56b4dbea697d52e91" prefix=" " category="inline-code"></block> 检查Pod。</block>
  <block id="672218727121432fb7209f42c6a00514" category="list-text"><block ref="672218727121432fb7209f42c6a00514" category="inline-link-macro-rx"></block></block>
  <block id="a81c3a8630da0b8548245caae368a3c2" category="inline-link-macro">了解操作员升级工作流</block>
  <block id="14d76a1fc05dcace5308e48b3d9bad49" category="admonition">我们建议您查看 <block ref="4185c20447fb5f0bb4f33698bfd20d27" category="inline-link-macro-rx"></block> 在使用操作员进行升级之前。</block>
  <block id="a18aa1b83c1605570c9c2911c5180a7b" category="inline-link-macro">升级&lt;block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category='inline-code'/&gt;</block>
  <block id="3b2fa532fe7cebc94d245316f8af8ab4" category="list-text"><block ref="fd3f4a100d968c915adb11c8797ef5d2" category="inline-link-macro-rx"></block></block>
  <block id="3d40f2a5a694e68fd88105fc4f5ee0d4" category="section-title">TRIdent操作员升级处理</block>
  <block id="74e51c48d68796e06830c062f5c955c1" category="inline-link-macro">使用啮合式操作员的优势</block>
  <block id="1a1508da73374db3dd227799f48fdf63" category="list-text">删除并重新创建三级控制器部署和节点DemonSet。</block>
  <block id="88b9e59609789e4bf00d72c8be9dd376" category="list-text">使用新版本更换TRIDent控制器Pod和TRIDent节点Pod。</block>
  <block id="6d3156de6583a452ead75c70c186fcb8" category="list-text">如果节点未更新、则不会阻止更新其余节点。</block>
  <block id="e232b75d1eb891caededece68ccba4bd" category="list-text">只有运行了三项节点Pod的节点才能挂载卷。</block>
  <block id="672bc0defc3e808ff4066a5bb35984ff" category="section-title">操作员升级工作流</block>
  <block id="09fca30aacc5af8d0afe600848776412" category="paragraph">使用三端修复操作符启动升级时：</block>
  <block id="de1c3bc7b6551ded8e26b3c59f25fd6a" category="list-text">三端运算符*：</block>
  <block id="95c09f4a69ddcda8ea23efaa0892e31f" category="list-text">更新所有Kubnetes对象、包括CRD、RBAC和三项服务。</block>
  <block id="fa5496466c33ad47156dabe9b4b7a83d" category="list-text">删除版本为_n_的TRIdent控制器部署。</block>
  <block id="de4c5e6acc990d98e3ed3412db367a33" category="list-text">创建版本为_n+1_的三项控制器部署。</block>
  <block id="55a86ba64e45e0262aa7012299b6e1a5" category="list-text">*Kubernetes*为_n+1_创建了三项控制器Pod。</block>
  <block id="9fcab903d35527e73aa8c9b8d55e4f02" category="list-text">删除_n_的三项目标节点演示集。操作员不会等待节点Pod终止。</block>
  <block id="a532235f4c82e61844620f45083fb82c" category="list-text">为_n+1_创建三项目标节点演示。</block>
  <block id="5075af00f3f40cf13822f5863cc71c39" category="list-text">*Kubernetes*会在未运行三端节点Pod _n_的节点上创建三端节点Pod。这样可以确保一个节点上的任何版本的三端存储节点Pod不会超过一个。</block>
  <block id="298619534d23da6e9389fd113bb13495" category="section-title">确定原始安装方法</block>
  <block id="426346b94737adca6c2d979d911464ef" category="section-title">卸载TRIdent操作员安装</block>
  <block id="253ead25988bfe2dee06d2227693e39d" category="paragraph">您可以手动卸载或使用Helm卸载TRYDent操作员安装。</block>
  <block id="2985edaba812b8b31d08cc8513fee0a3" category="section-title">卸载手动安装</block>
  <block id="55f6e2744208ccefe34f3e05ced2c988" category="section-title">卸载Helm安装</block>
  <block id="99dec4df69ba043a5eb3118e1e0b364e" category="section-title">卸载<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 安装</block>
  <block id="3ef75911ec16a9d0ba70cfd4e68dcb71" category="section-title">升级手动安装</block>
  <block id="b0e74afe1fdeb605b5c47b501c43b71b" category="inline-link-macro">您安装的版本</block>
  <block id="eb7a4fa3d9aff7ec5b23abb8b82d516b" category="paragraph">｛\f270通过｝｛\f270｛\f151、｝｛\f270｝｛\f270｝｛\f151、｝｛\f270｝｛\f270｝｛\f151、｝｛\f270通过｝｛\f151、｝｛\f270｝｛\f270｝｛\f151、｝｛\f270｝</block>
  <block id="613909529798c8a2543da8e954e5d742" category="section-title">从升级<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 安装到TRIdent操作员</block>
  <block id="9142b40107d9c5a0b86ef0ce8c25a88b" category="paragraph">您可以从升级到最新版本的Trident操作员<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 安装。现有后端和PVC将自动可用。</block>
  <block id="8327052a054aaa112ecf4f19369899c9" category="inline-link-macro">NetApp软件版本支持定义</block>
  <block id="34678ee868eeabce720fc4a0fd60c17a" category="list-text">完全支持</block>
  <block id="d397c85f7e5c9820b73839b4255bab4e" category="list-text">支持有限</block>
  <block id="57b81b24dfc6e0b0f8ce342d0f7250d3" category="list-text">自助支持</block>
  <block id="34b6cd75171affba6957e308dcbd92be" category="cell">version</block>
  <block id="217af7d1776d22530d98be04d104fd49" category="inline-link-macro">23.07</block>
  <block id="928f12ce7e1197fe962e09f979b98d0d" category="cell">2025年7月</block>
  <block id="a257f7f4b2f6e07845ce567df142ad00" category="cell">2026年7月</block>
  <block id="1a3a2b5e6c52142797bb5c00594e2a3c" category="inline-link-macro">23.04.</block>
  <block id="4f00a05b361ef580687832a6a48984db" category="paragraph"><block ref="4f00a05b361ef580687832a6a48984db" category="inline-link-macro-rx"></block></block>
  <block id="42ce83dc3f5ef22d986311b267a5ac20" category="cell">2025年4月</block>
  <block id="fc7d05f9009e90b92a15aad926bca249" category="cell">2026年4月</block>
  <block id="8dfda84fc7f59655e20a770603bf9231" category="inline-link-macro">23.01.</block>
  <block id="e0ed61e44672f0b6193055dd0719d240" category="paragraph"><block ref="e0ed61e44672f0b6193055dd0719d240" category="inline-link-macro-rx"></block></block>
  <block id="7022ed6df71cc12fbd0576cef4df23fd" category="cell">2026年1月</block>
  <block id="775d4bb28d257a6aa23992563a82c458" category="inline-link-macro">22.10.</block>
  <block id="1d064e71d708bc66779c604db1339850" category="paragraph"><block ref="1d064e71d708bc66779c604db1339850" category="inline-link-macro-rx"></block></block>
  <block id="99dfa28920a40a7be0858c50f989a3e5" category="cell">2025年10月</block>
  <block id="b321f6c1ada34a3fa850996d673e01ca" category="inline-link-macro">22.07.</block>
  <block id="295e1f077ca9f1e68f56c558741bad74" category="paragraph"><block ref="295e1f077ca9f1e68f56c558741bad74" category="inline-link-macro-rx"></block></block>
  <block id="cfab1ba8c67c7c838db98d666f02a132" category="cell">--</block>
  <block id="1cf7168782187634fbc408c66b895dbc" category="section-title">社区支持</block>
  <block id="965b11d07d6acceebc9efec23e5e74a9" category="section-title">NetApp技术支持</block>
  <block id="8f4c1b75985ff2903107b7115115ea58" category="list-text"><block ref="8f4c1b75985ff2903107b7115115ea58" category="inline-link-macro-rx"></block></block>
  <block id="0adc03eac86772ad2c75c8f140be417e" category="sidebar">知识和支持</block>
  <block id="fabfc25ef8996fd90836e58a4c0b26b6" category="sidebar">获取帮助</block>
  <block id="5248a0897439d95866d14416e307c927" category="sidebar">配置和管理后端</block>
  <block id="af5d3eba040f5bcf3d3f037b574766c8" category="sidebar">管理后端</block>
  <block id="bcca457a84376733a80b2dfad749e939" category="sidebar">使用kubec联系 管理后端</block>
  <block id="e9e5f94eb04c1889f891ad75fd929b4b" category="sidebar">使用trdentctrd管理后端</block>
  <block id="95408f23568d6e604d1f49a1bf3ff238" category="sidebar">创建和管理存储类</block>
  <block id="76114b40ddbaf2bf18e9aee694563b40" category="sidebar">配置和管理卷</block>
  <block id="62486fa65fc31c383ace8989549632ad" category="sidebar">使用快照</block>
  <block id="475fb21c20bb54ea8ac6cb1756aba565" category="inline-link-macro">知识库文章：无法在备用后端创建从三端PVC Snapshot创建PVC</block>
  <block id="18051638f30f342b517379b11f0442f9" category="admonition">PVC将与源卷在同一后端创建。请参见 <block ref="0d4d7e7a69b413699039bc9b916a37d5" category="inline-link-macro-rx"></block>。</block>
  <block id="7ba8d326bd3ffe1308f04d8ab5bf3d1a" category="paragraph">创建一个机密，其中包含后端的访问凭据。这是每个存储服务 / 平台所特有的。以下是一个示例：</block>
  <block id="afad9414d1bc420e58e3a72442b8f495" category="list-text"><block ref="685d1f2146dd079015e81918414e8971" prefix="" category="inline-code"></block>：<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR与后端关联、后端包含<block ref="217026e5af08bfde5815657113dbfc82" prefix=" " category="inline-code"></block> 设置为<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR的uid。</block>
  <block id="5008913e7135c645ebbfbd67112d3184" category="list-text"><block ref="ffbb410a55bb31f801dea6387e2745ac" prefix="" category="inline-code"></block>：<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block> 已设置为delete。当<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR将被删除、它将过渡到Deleting状态。</block>
  <block id="88512325ffcc13fbee60f3ca0669f67e" category="list-text">已有后端、但没有<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> 因为它们是使用创建的<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="4cfeb5a9099082a66a720c90a50036af" category="paragraph">从输出中可以看出这一点<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> 已成功创建并绑定到后端[观察后端的UUID]。</block>
  <block id="54ad97548183fc7d802b6db88573701f" category="paragraph">ONTAP是NetApp多协议统一存储操作系统、可为任何应用程序提供高级数据管理功能。ONTAP 系统采用全闪存，混合或全 HDD 配置，并提供多种不同的部署模式，包括专门设计的硬件（ FAS 和 AFF ），白盒（ ONTAP Select ）和纯云（ Cloud Volumes ONTAP ）。</block>
  <block id="f8869dc9dbb397ea76e820ae99f70217" category="paragraph"><block ref="6a2736fcbb5755dd03d114a5153506eb" category="inline-link-rx"></block> 是一项完全托管的AWS服务、可用于启动和运行由NetApp ONTAP存储操作系统提供支持的文件系统。FSx for ONTAP支持您利用熟悉的NetApp功能、性能和管理功能、同时利用在AWS上存储数据的精简性、灵活性、安全性和可扩展性。FSx for ONTAP支持许多ONTAP文件系统功能和管理API。</block>
  <block id="5d4b9bc562ebe88c39d0e521b90fc54b" category="list-text">。<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> 驱动程序、每个永久性卷(PV)都会映射到一个FlexGroup。因此，卷快照会创建为 NetApp FlexGroup 快照。与竞争对手的快照技术相比、NetApp快照技术可提供更高的稳定性、可扩展性、可恢复性和性能。无论是在创建 Snapshot 副本所需的时间还是在存储空间中，这些 Snapshot 副本都极为高效。</block>
  <block id="14b63ea5b97502ca2d75e85bee96b8b4" category="paragraph">克隆卷时，此操作将使发生原因 ONTAP 立即从其父卷拆分克隆。默认值为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>。在克隆卷的某些使用情形中，最好在创建后立即将克隆从其父卷中拆分，因为不太可能有任何提高存储效率的机会。例如、克隆空数据库可以节省大量时间、但只能节省很少的存储空间、因此最好立即拆分克隆。</block>
  <block id="6d70e81198809f9c160f10b05a430ab1" category="paragraph">将其设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block> 将创建<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block> 访问卷的客户端可以看到的目录。默认值为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>、表示的可见性<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block> 默认情况下、目录处于禁用状态。某些映像(例如官方MySQL映像)在出现时无法按预期运行<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block> 目录可见。</block>
  <block id="284899fef89b0b2e358229a40cbaa53e" category="cell">将其设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block> 将关闭LUN的空间分配功能。默认值为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>、表示当卷空间用尽且卷中的LUN无法接受写入时、ONTAP 会向主机发出通知。此选项还允许 ONTAP 在主机删除数据时自动回收空间。</block>
  <block id="40c7465c2468fd6e890691f6cb612731" category="paragraph">升级后的 Trident 安装的前缀。如果您使用的是1.3.2之前的版本的Trident并对现有卷执行升级、则需要设置此值才能访问通过volume-name方法映射的旧卷。</block>
  <block id="7f86daacf34c67c042470fa9d926ba49" category="paragraph">标准日志记录级别应允许您诊断大多数问题。如果您发现这还不够、则可以启用调试日志记录。</block>
  <block id="6bdfdbfc466bb6d93222dbf7b3a374fe" category="list-text">如果您在主机上运行二进制文件本身、则主机的中会显示日志<block ref="849fc2421f236e9c9b49a9d3fed2c404" prefix=" " category="inline-code"></block> 目录。要启用调试日志记录、请指定<block ref="9b945915b0cddbee22047fd529d642f6" prefix=" " category="inline-code"></block> 运行插件时。</block>
  <block id="a988578d4c176cf950a2211099db7d92" category="paragraph">使用更新后端的密码<block ref="00a81aa9b1d406861879017de885e0fb" prefix=" " category="inline-code"></block>。替换<block ref="3d9fd17a5232cc24eeeaec2b07af5417" prefix=" " category="inline-code"></block> 在示例中、使用后端名称、和<block ref="27ab7e8dbd45daf638f3144d4891ef3b" prefix=" " category="inline-code"></block> 路径正确<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block> 文件</block>
  <block id="8cb93d7a514e5569b46cba45dedc7daf" category="paragraph">如果 Trident POD 被销毁，数据不会丢失。三元数据存储在CRD对象中。已由 Trident 配置的所有 PV 都将正常运行。</block>
  <block id="7844c41fb05be5427418dbab3d0bdc49" category="paragraph">借助Amazon FSx for NetApp ONTAP、您可以利用您熟悉的NetApp功能、性能和管理功能、同时还可以利用在AWS上存储数据的精简性、灵活性、安全性和可扩展性。FSx for ONTAP支持许多ONTAP文件系统功能和管理API。Cloud Volume ONTAP 的兼容驱动程序包括<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>，<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>，<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>。</block>
  <block id="7439c9a99660382e94c16c5272b9bfb0" category="paragraph">除了两个例外，永久性卷是 Kubernetes 中不可变的对象。创建后，可以修改回收策略和大小。但是、这并不会阻止在Kubnetes之外修改卷的某些方面。为了针对特定应用程序自定义卷，确保容量不会意外占用，或者出于任何原因将卷移动到其他存储控制器，这一点可能是理想的。</block>
  <block id="3e01fdf7f18117c92347492814d988ee" category="admonition">自 Red Hat OpenShift 3.9 版开始，官方文档出于对数据损坏的担忧，建议不要对日志记录服务使用 NFS 。这是基于 Red Hat 对其产品的测试得出的。ONTAP NFS服务器不存在这些问题、可以轻松地备份日志记录部署。最终，您可以选择日志记录服务的协议，只需了解这两种协议在使用 NetApp 平台时都能很好地发挥作用，如果您愿意，也没有理由避免使用 NFS 。</block>
  <block id="643f15e2581a728cb2a6d66953a357d7" category="paragraph">要确保底层服务使用正确的存储、请务必根据部署方法配置Ansensant变量。让我们来看看每种部署方法的选项。</block>
  <block id="b8e4ea2ed30f2f3a9f05ef8e1cc243db" category="paragraph">与日志记录服务和 OpenShift 作为一个整体一样， Ansible 用于部署指标服务。此外、与日志记录服务一样、指标服务也可以在集群初始设置期间或集群运行后使用组件安装方法进行部署。下表包含在为指标服务配置永久性存储时非常重要的变量。</block>
  <block id="8198f2a0f41303e214bcb5ab7d9e9ef4" category="section-title">ONTAP NAS驱动程序详细信息</block>
  <block id="2b5fc47d5a68b6070472f3a239fc77f3" category="paragraph">""、<block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix=" " category="inline-code"></block>，<block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix=" " category="inline-code"></block></block>
  <block id="f353c2f2ba62c120d68a9fde333ef59f" category="summary">了解适用于Azure NetApp Files的NFS和SMB后端配置选项并查看配置示例。</block>
  <block id="b9acebca540d60eef74f6ffc3e4aa2e7" category="paragraph">Azure NetApp Files后端提供了这些配置选项。</block>
  <block id="639aa44ce5a6709a5719b427993c9657" category="paragraph">当您刚刚开始使用Azure NetApp Files并尝试某些操作时、此配置是理想的选择、但实际上、您需要为所配置的卷提供额外的范围界定。</block>
  <block id="a493eb50acc1b5a276034b914c4ce10d" category="section-title">ONTAP SAN驱动程序详细信息</block>
  <block id="fcd147679464b9eda6367f4e90e16ff8" category="paragraph">Rwo、RWO1.</block>
  <block id="94188b3f68e7baf5ef4a1f721857e77c" category="paragraph">Rox和rwx在文件系统卷模式下不可用。</block>
  <block id="2f73efb41160e66d2e4f5b500c984de8" category="section-title">Azure NetApp Files驱动程序详细信息</block>
  <block id="7e7d2470a40e817070cd42bd81713c7b" category="paragraph"><block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix="" category="inline-code"></block>，<block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix=" " category="inline-code"></block></block>
  <block id="4e7d6286f837d54a4e4154d4b21b0659" category="section-title">Element驱动程序详细信息</block>
  <block id="f5aa1832e32f2b8d7a7f22d8e36a4617" category="inline-link-macro">NAS驱动程序</block>
  <block id="de9e7e8f2c463ef15bebdbf8d2d1aa6d" category="inline-link-macro">SAN驱动程序</block>
  <block id="8126e96f64b1a5de24d4cf6e4b09b986" category="section-title">Google Cloud驱动程序详细信息</block>
  <block id="9aa82da0cffe247b84587c1cc8e32746" category="cell">default</block>
  <block id="dfb6135042da6e8fbf367d9cf13431ef" category="paragraph">卷大小的可选限制。默认值：""(未强制实施)</block>
  <block id="4846d107d8ddb5051591d14dcbddba8c" category="admonition">除非指定、否则卷驱动程序的默认名称为NetApp。</block>
  <block id="5ab207578468b7bbc201024492654253" category="list-text">在Azure NetApp Files驱动程序中增加了对网络功能的支持。（<block ref="e0e89f8bd936a5eb3adce74cac88eab0" category="inline-link-macro-rx"></block>）</block>
  <block id="302e5f91d375f03821f8fd6340563539" category="list-text">修复了Azure NetApp Files驱动程序无法克隆具有多个导出规则的卷的问题描述问题。</block>
  <block id="1d61f4e1411b6940bc918fb56346f64d" category="list-text">修复了Azure NetApp Files驱动程序、允许重复的资源名称并将操作限制在一个位置。</block>
  <block id="409ee85d2342bf416b29a45a7b9c4e59" category="list-text">增加了对Azure NetApp Files卷"unixPermissions (unixPermissions)"选项的支持。（<block ref="b2ee1a79cce917ad1d60b3bec442914a" category="inline-link-macro-rx"></block>）</block>
  <block id="9f65455ce006fe56e7588e4e14f1edb8" category="paragraph">可以为模拟服务类设计虚拟池。使用适用于 Azure NetApp Files 的云卷服务的虚拟池实施，让我们来了解一下如何设置不同的服务类。使用多个标签配置Azure NetApp Files后端、以表示不同的性能级别。设置<block ref="28277e44c5db61612accdf326d137e96" prefix=" " category="inline-code"></block> 添加适当的性能级别、并在每个标签下添加其他所需的方面。现在、创建可映射到不同虚拟池的不同Kubernetes存储类。使用<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block> 字段中、每个StorageClass都会调用可用于托管卷的虚拟池。</block>
  <block id="42f3b65b98b18c792b7b5534e40d2646" category="section-title">FSx for ONTAP驱动程序详细信息</block>
  <block id="629ac35dda697ad18f8fef7094213871" category="list-text">如果要降级到早期版本的三端到功能、请先运行<block ref="ac8650577d1b744589a6a11b60ac38c7" prefix=" " category="inline-code"></block> 用于删除Trident的命令。下载所需的<block ref="f3d78353f8dac3e49bbefeb5f6a2383b" category="inline-link-rx"></block> 并使用安装<block ref="430bf77bee6c59d385d4194f84c21b16" prefix=" " category="inline-code"></block> 命令：</block>
  <block id="4f5dbc74e3448e08fe0e7bfd62876fc8" category="open-title">Trident 运算符</block>
  <block id="152090ff5e9a05ea7e1cf0c248449638" category="open-title">掌舵</block>
  <block id="fed6290ac938ca603cf5f4f680802954" category="open-title">&lt;code&gt;tridentctl&lt;/code&gt;</block>
  <block id="19611c32e434019e356af9e0da999936" category="cell">要使用的 Storage Virtual Machine

*对于MetroCluster省略。*请参见 <block ref="41195e18a4a81a05f5c5a6be365a5602" category="inline-xref-macro-rx"></block>。</block>
  <block id="16d35233bf6aa04a2ff7b9ec19d64661" category="example-title">MetroCluster示例</block>
  <block id="fd9313829353096dad83775c55ce66f8" category="paragraph">您可以对后端进行配置、以避免在切换和切回后手动更新后端定义 <block ref="6ffda35fd03109cc0d7cf7a1f79d2c30" category="inline-link-macro-rx"></block>。</block>
  <block id="abc765e949697f25e96670a5cab132f3" category="paragraph">要进行无缝切换和切回、请使用指定SVM<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block> 并省略<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block> 和<block ref="924ff83ff1e671bacfb07ff12b845703" prefix=" " category="inline-code"></block> parameters例如：</block>
  <block id="d1cc287cede970a7472833938f39b940" category="list-text">需要更新参数（例如所使用的 ONTAP SVM 的名称）。</block>
  <block id="bb5c9e20ecc2d96bd9d91107161bf89b" category="list-text">您可以更新<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> 使用以下命令直接通过KubeNet访问对象：</block>
  <block id="ccec41e7609b17a7fe58691b5cbf68ea" category="list-text">或者、您也可以对现有进行更改<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> 使用以下命令执行CR：</block>
  <block id="d24ddd1da817847ede47979e6e68c60e" category="example-title">ONTAP NAS FlexGroup示例</block>
  <block id="8788fe54575b03d9b62dbb1a38a7a277" category="example-title">SMB卷示例</block>
  <block id="1ce00ab507a065e4febc57b244e25d18" category="example-title">自动导出策略示例</block>
  <block id="5ef13a507a243e20eb0469a9d7670527" category="example-title">IPv6地址示例</block>
  <block id="ee8af8063e9ea3725931d232730b8a8e" category="example-title">Amazon FSx for ONTAP使用SMB卷示例</block>
  <block id="99c73e527698ab76b32674b7e9dd4708" category="inline-link-macro">_滚动更新_</block>
  <block id="06918a8f55f386d79e64a70ca217b501" category="paragraph">*Kubernetes:*修复了删除守护程序集的问题，以支持零停机升级(<block ref="6f993c83118cc4a1dd5351c8501e26c9" category="inline-link-macro-rx"></block>）。</block>
  <block id="ca6a658f1db1af30f178530c90cbe8fc" category="section-title">23.07中的变更</block>
  <block id="57154d2dcf591aaa3d4dcbfbba196075" category="inline-link-macro">支持的ONTAP卷限制</block>
  <block id="7fe76f1189ac93d41118f7ba3e36e3ab" category="list-text">使用 ...<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 只有当永久性卷使用量计数预期高于时、才会显示此值 <block ref="e5997a58d747f862af8a862cd1b54e31" category="inline-link-macro-rx"></block>。</block>
  <block id="a6b18abf4de4d534121b0cca3b164d74" category="list-text">使用 ...<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> 只有当永久性卷使用量计数预期高于时、才会显示此值 <block ref="e5997a58d747f862af8a862cd1b54e31" category="inline-link-macro-rx"></block> 和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 无法使用驱动程序。</block>
  <block id="44ce6c838becb17913e38bbe2b0096fe" category="list-text">在中指定后端快照的名称<block ref="4ab6864fc58ecd8b598ee10dfe2ac311" prefix=" " category="inline-code"></block> 作为<block ref="d42b3f1355513faa92e8e6b438dffc73" prefix=" " category="inline-code"></block>。</block>
  <block id="e0668acdd6b1e131a130998184f4f7fc" category="admonition">。<block ref="8773ea16ee304585aa1da2afd8f25434" prefix=" " category="inline-code"></block> 由于CR命名限制、不能始终与后端快照名称匹配。</block>
  <block id="90a9b62f2d9107ff002b3ffcff75c334" category="paragraph">以下示例将创建<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block> 引用后端快照的对象<block ref="82645407d5a235bd775551b0a8455cd1" prefix=" " category="inline-code"></block>。</block>
  <block id="b385a638aafc60dc851702d7207b1460" category="list-text">*集群管理员：*创建<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block> 引用的CR<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block> 对象。此操作将请求访问以使用<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block> 在给定命名空间中。</block>
  <block id="4fd027fecd2883c25a41ecd68536b1d6" category="paragraph">以下示例将创建<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block> CR已命名<block ref="117b36cc8905f43e1ffd580e8b17723b" prefix=" " category="inline-code"></block> 引用的<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block> 已命名<block ref="ae79a6ea6405531b451963557819c96a" prefix=" " category="inline-code"></block>。</block>
  <block id="92aa04a2cf75f40187ef422ef48baa9f" category="list-text">外部快照程序用于设置<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block> to<block ref="bdc3aa73b1bbfc0b0212a8f6a8bb2077" prefix=" " category="inline-code"></block> 和<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block> to<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>。</block>
  <block id="5581736d9cc57d1f1193e52f799c03b2" category="paragraph">以下示例将创建一个引用的PVC<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block> 已命名<block ref="117b36cc8905f43e1ffd580e8b17723b" prefix=" " category="inline-code"></block>。</block>
  <block id="a288b0971f8f6c63f5e6510bcebf421b" category="cell">驱动程序名称+"_"+ dataLIF</block>
  <block id="280a6a6866847c57b1a98bbcdc929268" category="cell">""(默认情况下不强制实施)</block>
  <block id="3eeb940d8060411516e1578a9fd70a15" category="cell">故障排除时要使用的调试标志。例如、｛"api"：false、"METHO"：true｝

除非正在进行故障排除并需要详细的日志转储、否则请勿使用。</block>
  <block id="ebc576222020c2a2ae2fc769169f1d2a" category="cell">"正确"</block>
  <block id="c41b872c22969c2098a0056121589349" category="cell">空间预留模式；"无"(精简)或"卷"(厚)</block>
  <block id="f6d62a8e69201d3806ac1ef24ec64c4d" category="cell">"无"</block>
  <block id="6b3e1a8dae111668b3e4e13c5949a7c0" category="cell">如果为"0"、则为"0"<block ref="0a236e7685e50a59df980d0a30929d6c" prefix=" " category="inline-code"></block> 为"none"、否则为""</block>
  <block id="7639141e9ab9cd89ef8bc0b16fd34e6a" category="cell">使用"无"的层策略</block>
  <block id="e50e8adc0d4818a8ed496eb95b3aea51" category="cell">["0.0.0.0/0、"：：：/0"]`</block>
  <block id="86780ad6247dfbcd90ca1455ee592852" category="cell">"三级联"</block>
  <block id="7e6a32bd8074b1aa2c8c0d2529140ae4" category="cell">故障排除时要使用的调试标志。例如、｛"api"：false、"METHO"：true｝

请勿使用<block ref="effa2d809c72dcb6cce15a1e0b040e63" prefix=" " category="inline-code"></block> 除非您正在进行故障排除并需要详细的日志转储。</block>
  <block id="89ffa293e05655bd6be9d422345be38a" category="cell">"200"</block>
  <block id="3eda001907760c018e29ddf4cb7aa3c8" category="cell">"777"表示NFS卷；空(不适用)表示SMB卷</block>
  <block id="7e8aabb1dc00b7d4aac6d0876f6507f4" category="cell">控制对的访问<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block> 目录</block>
  <block id="aea10b5a282698ad4477a7113234ae65" category="inline-link-macro">导入卷快照</block>
  <block id="6418f8ccde0bb975a1ad82cf1d5250c6" category="list-text">*编辑<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> CR并设置卸载标志**：</block>
  <block id="30abd17d4913fab8af9d1efd63c15f9c" category="paragraph">当<block ref="fe98497efedbe156ecc4b953aea77e07" prefix=" " category="inline-code"></block> 标志设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>、Trident操作符将卸载Trident、但不会删除Trident Orchestrator本身。如果要重新安装 Trident ，应清理 Trident Orchestrator 并创建新的 Trident 。</block>
  <block id="f3f30d479f6e3b393d917a3b2f88c770" category="cell"><block ref="89801e9e98979062e84647433a8ed3e9" prefix="" category="inline-code"></block></block>
  <block id="fbbd7b4b14060c4fdb02f92c4c08e702" category="cell">设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block> 启用在Windows工作节点上的安装。</block>
  <block id="077e99fe42ced522b462656cffffe09c" category="cell"><block ref="d5276bb17ae062102e883a18454c2f1b" prefix="" category="inline-code"></block></block>
  <block id="4448b73eac083e33b7142f0e5790fac5" category="cell">Kubernetes 操作超时</block>
  <block id="42cf123e93ecc5c0297652edbc547fc0" category="cell"><block ref="2fac1659431903a30e063d49b3effb9d" prefix="" category="inline-code"></block></block>
  <block id="4a213b7c3b997ffb0794b25909381d16" category="cell">不要向NetApp发送AutoSupport捆绑包
自动</block>
  <block id="7f54ca385f028308d19e228ce0534a47" category="cell">用于发送AutoSupport的代理的地址/端口
遥测</block>
  <block id="cad060d2f14dbf08315c20014ed31daa" category="cell"><block ref="0b19d236934f609fe765b504a36b637e" prefix="" category="inline-code"></block></block>
  <block id="4f25f4cca5c1939f4a728d2678e719f7" category="cell">内部注册表的路径、格式<block ref="d2ce1f53a5f0e84f4f1b5e28836eb05b" prefix=" " category="inline-code"></block></block>
  <block id="31aad37dce0c28e12908582a0d63736a" category="cell">主机上的 kubelet 目录的路径</block>
  <block id="b6e0e2c4168573f0ed61c842470342ba" category="cell"><block ref="c13a52521693f799a16fd56a35c77a04" prefix="" category="inline-code"></block></block>
  <block id="f73bb4a0bc9913e7fc6db5f9e5f2afeb" category="cell">从内部注册表中提取映像的机密信息</block>
  <block id="d64d0e5bb5a552ae4986a713f41c8fc3" category="cell">Pod的其他节点选择器。	遵循与相同的格式<block ref="6ae8be3433bfc36ced79a1271e6ebf11" prefix=" " category="inline-code"></block>。</block>
  <block id="875ce721843c20d7f9aae240673ed68b" category="cell">覆盖Kubernetes对Pod的容错。遵循与相同的格式<block ref="f1fa64fcf5077601cb803e995a51fa4f" prefix=" " category="inline-code"></block>。</block>
  <block id="00e8e1706119ce5300bdc9141ececc37" category="cell">Pod的其他节点选择器。遵循与相同的格式<block ref="6ae8be3433bfc36ced79a1271e6ebf11" prefix=" " category="inline-code"></block>。</block>
  <block id="4227c1b28cc9c04bf3552b7aae57fc3c" category="paragraph"><block ref="4227c1b28cc9c04bf3552b7aae57fc3c" category="inline-link-macro-rx"></block></block>
  <block id="d293f031e5664526b25f3a65012401b7" category="cell"><block ref="fdb7cb8f657426e7c409bfd6d1a36ce4" prefix="" category="inline-code"></block></block>
  <block id="0b9fb37ad5573b24cf369ec73caffe42" category="list-text">创建<block ref="67b2cc1cd5b1570014463995fb2ada61" prefix=" " category="inline-code"></block> 使用以下命令、其中_&lt;bundle.yaml&gt;_为<block ref="bd2cc8575fe69c7f775292759380c838" prefix=" " category="inline-code"></block> 或<block ref="5a02ebff4889c2de0379a0fb10bed282" prefix=" " category="inline-code"></block> 根据您的Kubbernetes版本。</block>
  <block id="3d886aa354247002acbb6642625843d1" category="list-text">使用以下命令编译分发包、其中_Data &lt;bundle.yaml&gt;是<block ref="bd2cc8575fe69c7f775292759380c838" prefix=" " category="inline-code"></block> 或<block ref="5a02ebff4889c2de0379a0fb10bed282" prefix=" " category="inline-code"></block> 根据您的Kubbernetes版本。</block>
  <block id="fdb5bcd69c8617adc24a528d074b060b" category="list-text">验证是否已在主机上安装和配置协议前提条件。</block>
  <block id="dc3c80fe7e62048ec7f179f78dd1d918" category="paragraph">使用适用于您的操作系统的命令安装NFS工具。</block>
  <block id="b00fd28ef92c5c525d66d12aa0d5e4dd" category="section-title">NVMe工具</block>
  <block id="cfd4e84c111973cbf00e30acfd3af3b1" category="paragraph">使用适用于您的操作系统的命令安装NVMe工具。</block>
  <block id="c5c04ab13d0b9dcc3187f7e5cdfb7a00" category="list-text">NVMe需要RHEL 9或更高版本。</block>
  <block id="f961ae7e5a407c3c3df6f5facf3c1ef3" category="list-text">如果Kubelnetes节点的内核版本太旧、或者NVMe软件包不适用于您的内核版本、您可能需要将节点的内核版本更新为具有NVMe软件包的版本。</block>
  <block id="38aef0bc7cf230dfcf5476915774aa95" category="open-title">RHEL 9</block>
  <block id="99d7b353753f3b80388b5ab7e69a4a28" category="paragraph">每个 FlexVol 的最大 qtree 数必须在 50 ， 300 范围内，默认值为 200 。</block>
  <block id="3e00ac0f228180d0a5a3756df9a5bca3" category="paragraph">*用于<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> 驱动程序、此选项允许自定义每个qtree*的最大FlexVol 数。</block>
  <block id="89149296a9e0c36d8eb5e9c82e71155b" category="cell"><block ref="5b08b7c4c720db1d75c8c76a920fd99a" prefix="" category="inline-code"></block></block>
  <block id="053b2e680c58724dc4bdd83223136c48" category="cell"><block ref="39eea648dab96b0ee6022dabb38bc420" prefix="" category="inline-code"></block> 如果为空</block>
  <block id="9dbc2be9eae595ee555b36e2d5464473" category="example-title">&lt;code&gt;ontap-nas&lt;/code&gt; 驱动程序的NFS示例</block>
  <block id="e5fdbcee018644d221f382b1d5b8f41a" category="example-title">&lt;code&gt;ontap-nas-flexgroup&lt;/code&gt; 驱动程序的NFS示例</block>
  <block id="80640d18e28e0ebe180f21ae5d3a563f" category="example-title">&lt;code&gt;ontap-nas-economy&lt;/code&gt; 驱动程序的NFS示例</block>
  <block id="cf156eb50f8332673b89dc95a2cbbd82" category="example-title">&lt;code&gt;ontap-san&lt;/code&gt; 驱动程序的iSCSI示例</block>
  <block id="d5a757f0fabce17fc0eb2e1d3d308b05" category="example-title">&lt;code&gt;ontap-san-economy&lt;/code&gt; 驱动程序的NFS示例</block>
  <block id="fc3afabf3465382a1844a56a3fd55417" category="example-title">NVMe/TCP &lt;code&gt;ontap-san&lt;/code&gt; 驱动程序示例</block>
  <block id="c966bdf80a661ce3909786b6f622340b" category="section-title">使用操作员无法成功部署TRIdent</block>
  <block id="ccfca578972ee86c982797bc2898fe5b" category="section-title">使用无法成功部署TRIYent<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block></block>
  <block id="35f748582b65670a3f27a7f93c685560" category="section-title">使用Kubnetes 1.26上的rwx原始块命名区卸载NVMe节点失败</block>
  <block id="02c0c037ba3f051d21fbf3a2f370eb72" category="paragraph">如果您运行的是Kubnetes 1.26、则在对rwx原始块命名区使用NVMe/TCP时、节点取消暂存可能会失败。以下场景提供了故障的临时解决策。或者、您也可以将Kubbernetes升级到1.27。</block>
  <block id="14b443235c9f911289e8e2d0bad3eaf2" category="section-title">已删除命名空间和POD</block>
  <block id="31accf88e60e15e200ac055e6344c912" category="paragraph">从相应节点卸载永久性卷(与该命名空间对应)并将其删除。</block>
  <block id="5d84bf099896e3a304a067d7c5f71db1" category="section-title">已阻止数据LIF</block>
  <block id="e80aabfb35c98e66a71baf6a3c90a7df" category="paragraph">启动dataLIF以恢复完整功能。</block>
  <block id="5afe86ac983ac04ac6d9268beb2bc024" category="section-title">已删除命名空间映射</block>
  <block id="9b0dbff182f270b33423b281f92bddc2" category="paragraph">添加<block ref="a564a902c12941efa27c1d2ea4a19f8e" prefix=" " category="inline-code"></block> 返回到子系统。</block>
  <block id="4771a9c521a7d39c2dcf6ee71d0ef032" category="section-title">NVMe/TCP卷</block>
  <block id="b15a013c4977a2a96afedafe316664b2" category="section-title">验证安装</block>
  <block id="d777ba5e4b1ff43d3668b14ef7200bad" category="paragraph">安装后、使用命令验证Kubenetes集群中的每个节点是否都具有唯一的NQN：</block>
  <block id="eea342529fcf22d8fbdaf58545a9c617" category="section-title">AKS的受管身份</block>
  <block id="a57ed56fc7ee91a9263e1c2ae851ac11" category="inline-link-macro">受管身份</block>
  <block id="9586e9fc5ee74b6ceeab5ab5484c95b6" category="list-text">使用AKS部署的Kubbernetes集群</block>
  <block id="4dca0f5a5f78322a0f3bfa9c6b8f54ad" category="list-text">在AKS Kubbernetes集群上配置的受管身份</block>
  <block id="213e4b0f68f673550c1154cabddf4142" category="cell">Azure 订阅中的订阅 ID

如果在AKS集群上启用了受管标识、则为可选。</block>
  <block id="938c7b48cad00c77e1900399388741e8" category="cell">要创建新卷的 Azure 位置的名称

如果在AKS集群上启用了受管标识、则为可选。</block>
  <block id="91644df8bfaf55210374666164ee92c9" category="example-title">最低配置</block>
  <block id="943aa8ce869cfeaf7f72cc41df7f891c" category="paragraph">此后端配置会出现异常<block ref="8c443e170595ba0feac007ffb92cb49a" prefix=" " category="inline-code"></block>，<block ref="bc54592d6183695b841c6d1880ec0bf8" prefix=" " category="inline-code"></block>，<block ref="93c5bebdea9c94a0740fe6fd9bb250f0" prefix=" " category="inline-code"></block>，和<block ref="2b53761249254ce6b502f521e5cc0683" prefix=" " category="inline-code"></block>，在使用受管身份时是可选的。</block>
  <block id="f961873909dcbbea92f3791e505cd3cf" category="example-title">使用容量池筛选器的特定服务级别配置</block>
  <block id="119dd5a342e981b13bf0024d5c6a6933" category="example-title">高级配置</block>
  <block id="d61a62faa23948cd42b53cf6de97e445" category="example-title">虚拟池配置</block>
  <block id="67c909cf936115be1012171c5c38b8cf" category="example-title">默认命名空间上的基本配置</block>
  <block id="17903b7c199529a65f8f0b36aa084d2e" category="example-title">每个命名空间使用不同的密钥</block>
  <block id="6cb4c0cee2d8e6992a3a10d346015761" category="example-title">每个卷使用不同的密钥</block>
  <block id="5c766f1444b8b25e9f55f0dc6400b77e" category="admonition"><block ref="1023eff0970e3a4277fcde214fad86ef" prefix="" category="inline-code"></block> 支持SMB卷的池的筛选器。<block ref="d71f62a5b903ebd8681263d310db1d6d" prefix=" " category="inline-code"></block> 或<block ref="9c8ff3d34f58e4965d72fb9c8a993707" prefix=" " category="inline-code"></block> NFS池的筛选器。</block>
  <block id="8b7c42123642e2e4ea7dd426aeb2de58" category="paragraph">NVMe/TCP</block>
  <block id="2ee381348973cd50c3668eadbccdc328" category="paragraph">请参见 <block ref="2d7d4515af7fd5f414df696a804f30f7" category="inline-xref-macro-rx"></block>。</block>
  <block id="15486153db4ff26b2d984b22c9eb7ace" category="section-title">NVMe/TCP的其他注意事项</block>
  <block id="fdb7cb8f657426e7c409bfd6d1a36ce4" category="list-text">IPv6</block>
  <block id="a2a1cb8bb035902e151c429dda457eb0" category="list-text">NVMe卷的快照和克隆</block>
  <block id="b007331c632038b88752b849045335eb" category="list-text">调整NVMe卷大小</block>
  <block id="86f6f50234041fd09b320314dc781273" category="list-text">NVMe本机多路径</block>
  <block id="2af37920b0783c2d261877f935f16bd8" category="list-text">DH-HMAC-CHAP、由NVMe本机提供支持</block>
  <block id="6c1177e2fd33f2482514b2156d1e62b6" category="list-text">设备映射程序(Device maper、DM)多路径</block>
  <block id="fa633dab256a2884e7cd048147d7171c" category="list-text">进行了加密</block>
  <block id="4e92a2addd95bd2076226bce70449f6d" category="admonition"><block ref="8c443e170595ba0feac007ffb92cb49a" prefix="" category="inline-code"></block>，<block ref="bc54592d6183695b841c6d1880ec0bf8" prefix=" " category="inline-code"></block>，<block ref="93c5bebdea9c94a0740fe6fd9bb250f0" prefix=" " category="inline-code"></block>，<block ref="d5189de027922f81005951e6efe0efd5" prefix=" " category="inline-code"></block>，和<block ref="2b53761249254ce6b502f521e5cc0683" prefix=" " category="inline-code"></block> 在AKS集群上使用受管身份时为可选。</block>
  <block id="28389c00d52ebc3b9610c591613894a1" category="example-title">自定义贡献者角色</block>
  <block id="569dfd7a9483b050d1e076a318f0fccc" category="example-title">PersentVolumeClaim示例清单</block>
  <block id="526596809db1b7644a7637cfa05fcf8a" category="paragraph">这些示例显示了基本的PVC配置选项。</block>
  <block id="992728eeb1163799bd688cfe5e57035b" category="paragraph-title">PVC、带读取器</block>
  <block id="75c7c68d9eb17c22ec8df28a1e23f275" category="paragraph-title">采用NVMe/TCP的PVC</block>
  <block id="ed463de3671571836f800949d75f3af8" category="paragraph">此示例显示了一个与名为的StorageClass关联的具有读取权限的NVMe/TCP的基本PVC<block ref="63f9100803e1f67a5e33cbd5da9dbb33" prefix=" " category="inline-code"></block>。</block>
  <block id="973fab696ba8e345f617c87c4de97607" category="example-title">POD清单示例</block>
  <block id="15f15289009d52be4af3e9951853eee5" category="paragraph">这些示例显示了将PVC连接到POD的基本配置。</block>
  <block id="416206518e27ed2ec8b8e0876078af35" category="listing-title">基本配置</block>
  <block id="b9fa7c201e2dc76fe12c8bb436c212ee" category="listing-title">基本NVMe/TCP配置</block>
  <block id="a242dbcec09373d25c5fb582f9f2cfc6" category="example-title">NVMe/TCP示例</block>
  <block id="3a3347de03ef37c1eb5eb525619ff905" category="paragraph">您必须在ONTAP后端为SVM配置NVMe。这是NVMe/TCP的基本后端配置。</block>
  <block id="1b931baab9ca74be94af72763666c941" category="list-text">。<block ref="33aacad9b122abfdfadc06e3e7fa5f59" prefix=" " category="inline-code"></block> StorageClass将映射到<block ref="11e89beb13d19bf6e3ab7ed65673b27d" prefix=" " category="inline-code"></block> 中的虚拟池<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 驱动程序<block ref="6fa083b88d05083e680071073d06c3af" prefix=" " category="inline-code"></block>。这是唯一的池产品<block ref="5ca85ebb1d881fde490deaa5817c4ca5" prefix=" " category="inline-code"></block>。</block>
  <block id="497769c5c03818fffe81b6190ec47c82" category="section-title">命令和全局标志</block>
  <block id="66fa8a46aff90f5c8507c33a1cdc3e3f" category="paragraph">您可以运行<block ref="d7948c15bebd1e81a58fa7c99888c9c6" prefix=" " category="inline-code"></block> 以获取可用命令的列表<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 或附加<block ref="0c113ca6d57519b559ba5a426be3c6b6" prefix=" " category="inline-code"></block> 用于任何命令的标志、以获取该特定命令的选项和标志列表。</block>
  <block id="c6a354ad100a80a11b5358549fa08956" category="list-text"><block ref="657f8b8da628ef83cf69101b6817150a" prefix="" category="inline-code"></block></block>
  <block id="b6886cb9d8320f0522485af2d7b5e732" category="list-text">有关任何命令的帮助。</block>
  <block id="99ff05be0d0e797b4814ab264d1555b7" category="list-text"><block ref="93473a7344419b15c4219cc2b6c64c6f" prefix="" category="inline-code"></block></block>
  <block id="1f46b6519384cf9cc5d7893457ab6e9c" category="list-text"><block ref="2424c0d4857ddcc30f1aabda7294d84f" prefix="" category="inline-code"></block></block>
  <block id="92cde4054a93fe29af6357539b327494" category="list-text">暂时暂停后端操作。</block>
  <block id="238000b5c5df1cc446f5ba823c01807c" category="list-text"><block ref="ae26b3d8e556703291282149e3ae894f" prefix="" category="inline-code"></block></block>
  <block id="12d9bb0959755423ba2fc4a4d349ee90" category="example-title">全局标志</block>
  <block id="a54f86a6d882e5b4c1560087bb3d23fe" category="list-text"><block ref="9b017020b9d48d433ec90c548e6b5c70" prefix="" category="inline-code"></block>，<block ref="b47e5fb843a641159b90a001a614119c" prefix=" " category="inline-code"></block></block>
  <block id="f984c283566ffcc330d2055e568c2bc4" category="list-text">调试输出。</block>
  <block id="aa8575d70709b06761f70e7aa773dccd" category="list-text"><block ref="914071b8934b1d6035495f1ed02aa5fd" prefix="" category="inline-code"></block>，<block ref="0c113ca6d57519b559ba5a426be3c6b6" prefix=" " category="inline-code"></block></block>
  <block id="cbaa0d88e3069707dc20abca170c009e" category="list-text">帮助<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="6e25615e543a74d4a5ea9c21cda4b604" category="list-text"><block ref="9cefd96d40d0ee1256c8eff1def0312d" prefix="" category="inline-code"></block>，<block ref="3be3a69890f8609a06ed69c980bdf3ed" prefix=" " category="inline-code"></block></block>
  <block id="e9fe902fae54aee02c0226a1cd4ef93e" category="list-text"><block ref="b2ed43620b7fff2689035f1e99c24ded" prefix="" category="inline-code"></block>，<block ref="fde021f6d95feede78ab3d390365d552" prefix=" " category="inline-code"></block></block>
  <block id="fc070ca332d823236f678c78abc58ee2" category="list-text">输出格式。json_yaml_name_wide|ps 之一（默认）。</block>
  <block id="51b3c65bb68baeb2ef94eb128afdc270" category="list-text"><block ref="406381251d2d4637ebfac7f24cc49c6f" prefix="" category="inline-code"></block>，<block ref="b59778b847581570efb244355a6aa704" prefix=" " category="inline-code"></block></block>
  <block id="1c36a7e67198ff73665408726652a4c3" category="section-title">命令选项和标志</block>
  <block id="dae8ace18bdcbcc6ae5aece263e14fe8" category="list-text">选项</block>
  <block id="4ea7801f17a4e5485e8b050c052fb443" category="list-text">标志</block>
  <block id="26cdb30fb70d63515b796135d1481235" category="paragraph">使用<block ref="2424c0d4857ddcc30f1aabda7294d84f" prefix=" " category="inline-code"></block> 用于暂停或恢复后端操作的命令。</block>
  <block id="ff5f39bc4c620c3b1ca6b0811177f14c" category="paragraph">使用 ...<block ref="2af72f100c356273d46284f6fd1dfc08" prefix=" " category="inline-code"></block> 用于打印版本的标志<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 以及正在运行的Trident服务。</block>
  <block id="cfc01756266d8d0e43eb3a9f2753f472" category="paragraph">Trident会为Kubernetes创建匹配的存储类<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block> 指定的对象<block ref="08044207e9f63bb0fd474dab347a776c" prefix=" " category="inline-code"></block> 在其配置程序字段中。存储类名称与Kubernetes的名称匹配<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block> 它所代表的对象。</block>
  <block id="8554748be67b956e550de942edae807d" category="admonition">NVMe/TCP需要RHEL 9或更高版本。</block>
  <block id="e379ebca8f2245b4a0c32803c6d7f845" category="paragraph">Kubernetes集群中的所有工作节点都必须能够挂载为Pod配置的卷。要准备工作节点、必须根据您选择的驱动程序安装NFS、iSCSI或NVMe工具。</block>
  <block id="2564a762d021b4beae21f01627773c0f" category="inline-link-macro">问题描述#834</block>
  <block id="e53ddb8a6947ad5b93f8c82a86836f16" category="list-text">修复了在新请求的大小小于ONTAP－NAS和ONTAP－NAS－Flexgroup存储驱动程序的卷总大小时进行卷扩展的问题(<block ref="6140c2bc2ecfc555b47da5841f5fd8ae" category="inline-link-macro-rx"></block>）。</block>
  <block id="d52fe9ebb96cf9ce91bf00e0caa773de" category="inline-link-macro">问题描述#的 第请选择</block>
  <block id="676394929bfe922b6aff300499cef5a9" category="list-text">固定卷大小、以便在导入ONP-NAS和ONP-NAS Flexgroup存储驱动程序期间仅显示卷的可用大小(<block ref="1ec6a9e212fa13524af3f3c296d6bb72" category="inline-link-macro-rx"></block>）。</block>
  <block id="c2b105e6592336c26afd4f39319a222e" category="list-text">针对ONTAP -NAS经济的固定FlexVol名称转换。</block>
  <block id="b680f5ddc32b78c78329f3f15a836381" category="paragraph">增加了对Kubnetes 1.28的支持。</block>
  <block id="be1e775eed9a7023c7facbd3f3cd32cd" category="list-text">增加了对ONTAP SAN驱动程序基于TCP的NVMe的支持。</block>
  <block id="24a3b687404991a8b5d83740bfde9f9c" category="inline-link-macro">问题描述#558.</block>
  <block id="86826a04ec735c436222d55949b27e52" category="list-text">新增了在用户将后端设置为暂停状态时暂停卷配置的功能(<block ref="4ad3a18b49b4979346d26b5940c21a0f" category="inline-link-macro-rx"></block>）。</block>
  <block id="d4eb6933e70b3c49a70e1d8427489044" category="section-title">23.07.1中的变更</block>
  <block id="2f6b7b0c1002ad67f4e455a17d784c94" category="cell"><block ref="9d4568c009d203ab10e33ea9953a0264" prefix="" category="inline-code"></block></block>
  <block id="a55d315d1b8f8342158866cd0f4acf4f" category="cell"><block ref="df8f3af91e96fe841267201ed450cd6b" prefix="" category="inline-code"></block></block>
  <block id="3f5dc9ae5f538d3ce4d0cc20e7762671" category="cell"><block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix="" category="inline-code"></block></block>
  <block id="d5999fd61d148b96e54f154a54ffead5" category="example-title">Windows节点</block>
  <block id="ecb7d1d46da3859c69f45b619ace746a" category="example-title">强制断开</block>
  <block id="f393555b01f0bafc5bd6a63db97bac1d" category="example-title">AKS集群上的受管身份</block>
  <block id="90a731f9a8a983f7cf3905960d8146ec" category="cell"><block ref="9aa82da0cffe247b84587c1cc8e32746" prefix="" category="inline-code"></block></block>
  <block id="ff1e5aff28fa6b984ca73f22322bbe5f" category="cell"><block ref="e4d71bf2abad047425f4463e27bb83b0" prefix="" category="inline-code"></block></block>
  <block id="fca9ec6d50035c840a58bdecab9e25b1" category="cell"><block ref="256acfe307251e7444859851d87d5735" prefix="" category="inline-code"></block></block>
  <block id="cb970ba92f64074cb0c13138a539851d" category="paragraph">您可以使用中的属性 <block ref="289efe9665b12a9f791f1897f30c1a0b" category="inline-xref-macro-rx"></block> 定义时<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 自定义安装。</block>
  <block id="0f63a7a4873a5bae5060bde9fd1009af" category="example-title">基本自定义配置</block>
  <block id="a144d1a554ec741f701e87c26360c28e" category="example-title">节点选择器</block>
  <block id="de5aefa11fe3836b4b8d0769b09b21eb" category="example-title">Windows工作节点</block>
  <block id="766995a062c6503acd7ac4752fbb865d" category="inline-link-macro">23.10.</block>
  <block id="78c875172f37f031a2632dc008815ee1" category="cell">2026年10月</block>
  <block id="0cd8d0588cd2b20face3a0379d38f777" category="admonition">使用动态导出策略时、请勿使用网络地址转换(Network Address Translation、NAT)。使用NAT时、存储控制器会看到前端NAT地址、而不是实际IP主机地址、因此、如果在导出规则中找不到匹配项、则会拒绝访问。</block>
  <block id="7528035a93ee69cedb1dbddb2f0bfcc8" category="section-title">获取</block>
  <block id="943c9b081b44587d874271006286d321" category="list-text"><block ref="22b708d2eccf39e1774f3e179bc6aee0" prefix="" category="inline-code"></block></block>
  <block id="0211fd9d40454137caed274c8b3d6054" category="list-text">列出该类型的所有对象。</block>
  <block id="a1ed61bb0432fb6b25e4789166744818" category="list-text"><block ref="57e9ee33b6310b193ba789f5dada20cc" prefix="" category="inline-code"></block></block>
  <block id="aa5aa416edde45fdd91bf4eff5a47d7f" category="list-text">获得命名对象的详细信息。</block>
  <block id="a02439ec229d8be0e74b0c1602392310" category="section-title">发布</block>
  <block id="fe25634ce7a9cad53e5d4b1d7a3039a6" category="list-text"><block ref="bb2b5a5fa2bc8d2525063f1afa7571a5" prefix="" category="inline-code"></block></block>
  <block id="777bb10b09d21c1e8001a8a8aa5767d8" category="list-text">创建指定类型的对象。</block>
  <block id="32f68a60cef40faedbc6af20298c1a1e" category="section-title">删除</block>
  <block id="7f43e795c3bf1beb79462cd9164057e4" category="list-text"><block ref="051be5ede889caf3958ca683df6f8d5f" prefix="" category="inline-code"></block></block>
  <block id="99e18f16be02084849198b503c3e3c29" category="list-text">删除命名资源。</block>
  <block id="9b9ef5337f7c7fbad5389e8b34d3fb1f" category="list-text"><block ref="9b945915b0cddbee22047fd529d642f6" prefix="" category="inline-code"></block></block>
  <block id="f4078e4654ff3cac1121079492b0c3f4" category="list-text">启用调试输出。</block>
  <block id="ca4acdfba197b4053e99386e85bf4cc4" category="list-text"><block ref="818bc08a4822af612b7904cc24a4d3bf" prefix="" category="inline-code"></block></block>
  <block id="5c8767809eb386e1ab0473de8292544f" category="list-text">设置日志记录级别(调试、信息、警告、错误、致命)。默认为 INFO 。</block>
  <block id="4da29764ff4997096420f0ae6861b27c" category="list-text"><block ref="4012723fd7948507761ae4f00f8a6ce5" prefix="" category="inline-code"></block></block>
  <block id="7db7db05fbaa2896d81a59e8f38fc27a" category="list-text">使用此选项或<block ref="b88c1426ddf914ab0ed819649aed75fc" prefix=" " category="inline-code"></block> 以启用Kubernetes支持。如果设置此值，则 Trident 将使用其所属 POD 的 Kubernetes 服务帐户凭据来联系 API 服务器。只有当 Trident 在启用了服务帐户的 Kubernetes 集群中作为 POD 运行时，此功能才有效。</block>
  <block id="1d0a1baeeb99a2ab2b62995cd2ca3fc7" category="list-text"><block ref="b9d0a374603a1c8cc2464bf870d134f0" prefix="" category="inline-code"></block></block>
  <block id="4248fc4f101e2b3fe6bdb19065701fa5" category="list-text"><block ref="5cc3c48cd4a7b7c28609e7cad16a63c6" prefix="" category="inline-code"></block></block>
  <block id="fc3445d927bff3ae43a549a8e6534c5c" category="list-text">注册Docker插件时使用的驱动程序名称。默认为<block ref="16dfba14481ba8b67fd1c1d9e0f32d2a" prefix=" " category="inline-code"></block>。</block>
  <block id="fc9918a81547fe43ace70de85a7bebac" category="list-text"><block ref="3c296b703ef0b6971051fafa0adeec00" prefix="" category="inline-code"></block></block>
  <block id="65ec7391e16f9bd6e659149b86819a17" category="list-text">侦听此端口、而不侦听UNIX域套接字。</block>
  <block id="9489e1104464d83e0ce20703b6791e94" category="list-text"><block ref="5fe5cde67e990859d4973ee6fedbf6f0" prefix="" category="inline-code"></block></block>
  <block id="edd29d0afafb06480d68d40a7a22ffa5" category="list-text">必需；您必须指定后端配置文件的此路径。</block>
  <block id="668ae2bb5fbfb42f8d89e94482a4de47" category="list-text"><block ref="786783eafb02594c9668a3cbbc65d473" prefix="" category="inline-code"></block></block>
  <block id="46fedf27957de15ad13ad14b25adb901" category="list-text">指定要侦听的三端存储服务器的地址。默认为 localhost 。在本地主机上侦听并在 Kubernetes Pod 中运行时，无法从 Pod 外部直接访问 REST 接口。使用 ...<block ref="dfbd0635d992733a865e819be2cf08be" prefix=" " category="inline-code"></block> 可从Pod IP地址访问REST接口。</block>
  <block id="99f1d9ee8daaf03f69217b44950e3442" category="list-text"><block ref="ca77c8464c642146b691455db7a16df6" prefix="" category="inline-code"></block></block>
  <block id="33be5112b1ca3c0147264576f7d2e571" category="list-text">指定应侦听的三端存储服务器的端口。默认为 8000 。</block>
  <block id="a2714fafd1caea03119590a34bc711c6" category="list-text"><block ref="79d400f844e73cb6e88dabddc36edc38" prefix="" category="inline-code"></block></block>
  <block id="14d37f351bc2789fc70a93a3114308f0" category="list-text">启用REST接口。默认为 true 。</block>
  <block id="ad989553d20159458528f9cbeec280ac" category="section-title">Kubnetes与NetApp产品的集成</block>
  <block id="c15968f29ef9905b44c7b9f373e75568" category="paragraph">NetApp存储产品组合可与Kubbernetes集群的许多方面集成、从而提供高级数据管理功能、从而增强Kubbernetes部署的功能、性能和可用性。</block>
  <block id="5051760a43d66d77d01c7a8eb030e7e1" category="paragraph"><block ref="c3736e0f766925817ef4f34af9c72365" category="inline-link-macro-rx"></block> 是一项完全托管的AWS服务、可用于启动和运行由NetApp ONTAP存储操作系统提供支持的文件系统。</block>
  <block id="29ec7bd31b1a1379b78d9898d947d73d" category="paragraph"><block ref="c5e53d3a8d8d3c363071213b1e4da969" category="inline-link-rx"></block> 是一种企业级 Azure 文件共享服务，由 NetApp 提供支持。您可以在 Azure 中以本机方式运行要求最苛刻的基于文件的工作负载，同时享受 NetApp 应有的性能和丰富的数据管理功能。</block>
  <block id="047d03a544a1cc3e86aff90177fbd63a" category="paragraph"><block ref="003ebe68b90d9dc2aab9b61b702f9f9b" category="inline-link-macro-rx"></block> 是一款纯软件存储设备，可在云中运行 ONTAP 数据管理软件。</block>
  <block id="7630fd61eebe4d79cfa82d81963940d7" category="paragraph"><block ref="eca39b018af81e7b5c8e71b5b4aa3790" category="inline-link-rx"></block> 通过保证性能并简化存储占用空间，使存储管理员能够整合工作负载。</block>
  <block id="d2a67136c7c7e990d18b8e71635d0395" category="paragraph"><block ref="59c437b3f3e5b14b78b208acb3b663e2" category="inline-link-macro-rx"></block> 通过自动化执行日常任务并使基础架构管理员能够专注于更重要的功能，简化数据中心的管理和扩展。</block>
  <block id="7b02ea300aef2e0bff0d7f6111053284" category="example-title">NetApp ONTAP</block>
  <block id="c034280f677ad8e09361e26a1f0d8b2e" category="paragraph"><block ref="8c73590b5c61238f85244f0e29214d94" category="inline-link-macro-rx"></block> 是NetApp多协议统一存储操作系统、可为任何应用程序提供高级数据管理功能。</block>
  <block id="ee4805b45f3a791791c675c82c73c1b6" category="paragraph"><block ref="081bcd7924bd528b9799fd1b1389158c" prefix="" category="inline-code"></block></block>
  <block id="301f920ee13f1cef29f1c14dacf94c4b" category="list-text"><block ref="ff2bddd61609f26dc3255408781890ad" prefix="" category="inline-code"></block>，<block ref="a4b374188b5bbba3f37deccc51421bd4" prefix=" " category="inline-code"></block></block>
  <block id="4927d7c110c03787d6a128bc5245a451" category="list-text">指定<block ref="39e7fa5a13dbc25a4aa8c4b323cd657c" prefix=" " category="inline-code"></block> 在本地或从一个Kubornetes集群到另一个集群运行命令的路径。</block>
  <block id="9858b15df593f3960e8b74b5eb680bf0" category="admonition">或者、您也可以导出<block ref="39e7fa5a13dbc25a4aa8c4b323cd657c" prefix=" " category="inline-code"></block> 变量、用于指向特定的Kubbernetes集群和问题描述<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 命令。</block>
  <block id="76ea0bebb3c22822b4f0dd9c9fd021c5" category="section-title">创建</block>
  <block id="1183069eacde609c309c6652f2abbc57" category="paragraph"><block ref="4bf60056ad290949d881334e46fe9fc1" prefix="" category="inline-code"></block></block>
  <block id="099af53f601532dbd31e0ea99ffdeb64" category="section-title">删除</block>
  <block id="28b6c04534d74299209efef5ba8ed0e0" category="paragraph"><block ref="f8e353bd7af0b2adee08bd2cfca86ee4" prefix="" category="inline-code"></block></block>
  <block id="b5eda0a74558a342cf659187f06f746f" category="section-title">获取</block>
  <block id="3880097e6e3ace364060bd1a3502034a" category="paragraph"><block ref="5af35d698576fbd6e910714628ae9a91" prefix="" category="inline-code"></block></block>
  <block id="fbb9ff314555260bd6ce75e7fefe007a" category="list-text"><block ref="914071b8934b1d6035495f1ed02aa5fd" prefix="" category="inline-code"></block>，<block ref="0c113ca6d57519b559ba5a426be3c6b6" prefix=" " category="inline-code"></block>：卷帮助。<block ref="e3bbbed29599d3e6e29ae22829ad7f13" prefix=" " category="inline-code"></block>：将查询限制为从源卷。<block ref="aed2a4a749284f757648f1057abf44cd" prefix=" " category="inline-code"></block>：将查询限制为卷的下属。</block>
  <block id="59b514174bffe4ae402b3d63aad79fe0" category="section-title">映像</block>
  <block id="15e57263073fbab8a5c17df2199514fa" category="paragraph"><block ref="1a4565f84c3ef7acc3e88c3af0bf4b12" prefix="" category="inline-code"></block></block>
  <block id="8373216d773ee6fe75393fa84e1e92c6" category="list-text"><block ref="914071b8934b1d6035495f1ed02aa5fd" prefix="" category="inline-code"></block>，<block ref="0c113ca6d57519b559ba5a426be3c6b6" prefix=" " category="inline-code"></block>：图像帮助。<block ref="47fa03ef5536c5573b137cec5adc2d39" prefix=" " category="inline-code"></block>，<block ref="afb81ccdb6e6d78674d516ee32b89981" prefix=" " category="inline-code"></block>：Kubornetes集群的语义版本。</block>
  <block id="f6c534966bc7687e0c87134d025f8837" category="section-title">导入卷</block>
  <block id="7627836f99f91110fe4d92a0cf45f490" category="paragraph"><block ref="9fe05f98df27b42476862d09511bd0d7" prefix="" category="inline-code"></block></block>
  <block id="9ab81f57823f6aeb02362291f23883e6" category="list-text">别名</block>
  <block id="501eadc7c3c034b710e1a4d2a417bbce" category="list-text"><block ref="210ab9e731c9c36c2c38db15c28a8d1c" prefix="" category="inline-code"></block>，<block ref="9e3669d19b675bd57058fd4664205d2a" prefix=" " category="inline-code"></block></block>
  <block id="346218c412dda8bcf2f8fc06030abee5" category="list-text"><block ref="5338b151154663bac9980b0f044518f2" prefix="" category="inline-code"></block>，<block ref="33781a1644c3eb60bb229660536cb79b" prefix=" " category="inline-code"></block>：YAML或JSON PVC文件的路径。<block ref="914071b8934b1d6035495f1ed02aa5fd" prefix=" " category="inline-code"></block>，<block ref="0c113ca6d57519b559ba5a426be3c6b6" prefix=" " category="inline-code"></block>：卷的帮助。<block ref="e2b9359adf7cdd62fc784b5090c3c452" prefix=" " category="inline-code"></block>：仅创建PV/PVC。不要假定卷生命周期管理。</block>
  <block id="19ad89bc3e3c9d7ef68b89523eff1987" category="section-title">安装</block>
  <block id="1adc393db1e6b77c875ecd4c669772ec" category="paragraph"><block ref="190ae106b0b18c5bb8b5f3bdc39dacb9" prefix="" category="inline-code"></block></block>
  <block id="2165e4fa5bddb65a31f6a0c495c2fa37" category="section-title">日志</block>
  <block id="0fc4d21e21006115d42b2d6aa4451ffa" category="paragraph"><block ref="8815a52aa2be7be3d51559b2366dc8e1" prefix="" category="inline-code"></block></block>
  <block id="2541d938b0a58946090d7abdde0d3890" category="section-title">发送</block>
  <block id="6faa54b930cd3447550e2f6a2be621bb" category="paragraph"><block ref="c68774a474a551b5788d1c1e26d3dcd0" prefix="" category="inline-code"></block></block>
  <block id="48df24d35784c5df52ab82ba6f257549" category="list-text"><block ref="ee64de1ad50d8209e64ee58b23e27986" prefix="" category="inline-code"></block>：将AutoSupport 归档发送给NetApp。</block>
  <block id="fe98497efedbe156ecc4b953aea77e07" category="section-title">卸载</block>
  <block id="bab5bdd673e8007bb1451ff83f2d7fbf" category="paragraph"><block ref="f74e9b644f442240b768be80cfac9840" prefix="" category="inline-code"></block></block>
  <block id="ba491d35780f4d2becc7847117f59c9d" category="list-text"><block ref="60072fc2fad0d30fc656850e04c7433f" prefix="" category="inline-code"></block>：卸载帮助。<block ref="61bce13717a9d6da0266dbc3e2b1e642" prefix=" " category="inline-code"></block>：卸载期间禁用大多数输出。</block>
  <block id="3ac340832f29c11538fbe2d6f75e8bcc" category="section-title">更新</block>
  <block id="8020758b80cef903a0b06e0083b2a43b" category="paragraph"><block ref="8894c4db9cf5d5ac9d439434e0994407" prefix="" category="inline-code"></block></block>
  <block id="2424c0d4857ddcc30f1aabda7294d84f" category="section-title">更新后端状态</block>
  <block id="a8692aa823f016402f6459f92e2c343c" category="paragraph"><block ref="1327c48297ec159839f95302f8885592" prefix="" category="inline-code"></block></block>
  <block id="0e43bd2bbbbfb114e0df26c0544f5608" category="list-text"><block ref="914071b8934b1d6035495f1ed02aa5fd" prefix="" category="inline-code"></block>，<block ref="0c113ca6d57519b559ba5a426be3c6b6" prefix=" " category="inline-code"></block>：后端状态帮助。<block ref="2be951e4c83b3373b0b76554fd93bb4a" prefix=" " category="inline-code"></block>：设置为<block ref="735fda5d72b5c650f3f0435195a211bd" prefix=" " category="inline-code"></block> 暂停后端操作。设置为<block ref="fea087517c26fadd409bd4b9dc642555" prefix=" " category="inline-code"></block> 恢复后端操作。设置为时<block ref="735fda5d72b5c650f3f0435195a211bd" prefix=" " category="inline-code"></block>：</block>
  <block id="4301e504ec5591a4c51fe93e446a7a35" category="paragraph"><block ref="dca46ba7b3ffeb9b51e10f54acbd826d" prefix="" category="inline-code"></block></block>
  <block id="e6e32acf4d56921ac92540101fe00fc9" category="list-text"><block ref="db0e9588c0d46e16e0aea5c50287a54f" prefix="" category="inline-code"></block>：仅限客户端版本(不需要服务器)。<block ref="60072fc2fad0d30fc656850e04c7433f" prefix=" " category="inline-code"></block>：版本帮助。</block>
  <block id="34c5f2f84f16f23213713a6adc11c319" category="admonition">如果您在初始安装期间设置了自定义选项(例如、为三端映像和CSI映像指定专用、镜像注册表)、请附加<block ref="cd01e1bae83933b9c59c914bc71332ac" prefix=" " category="inline-code"></block> 命令<block ref="8b5806248570dbb13e7d3bc5e6c0ee37" prefix=" " category="inline-code"></block> 为了确保这些选项包含在upgrade命令中、否则这些值将重置为默认值。</block>
  <block id="20a385c1dc7ef65425669840055b5330" category="list-text">建议的最小FlexGroup成员/卷大小为100 GiB。</block>
  <block id="ee68e5b99222bbc29a480fcb0d1d6ee2" category="section-title">前提条件</block>
  <block id="56ae1c25c84da104d5678975802dd9b7" category="list-text">具有附加订阅的Amazon EKS集群帐户</block>
  <block id="3f597c2b0d86deed94c99ef3d5fa4932" category="list-text">AWS对AWS Marketplace的权限：<block ref="8047af5c1ca81290342558a545113f6e" prefix=" " category="inline-code"></block></block>
  <block id="8ac2d15830983d69c7c62c4d8a69266c" category="list-text">AMI类型：Amazon Linux 2 (AL2_x86_64)或Amazon Linux 2 ARM (AL2_ARM_64)</block>
  <block id="68437d1104a05b71c1c25548a95ad946" category="list-text">节点类型：AMD或ARM</block>
  <block id="63ac2242cb63194d25dd17c30c89f80d" category="list-text">现有Amazon FSx for NetApp ONTAP文件系统</block>
  <block id="46fd403fb7788c53f0de4aa06ccc89d9" category="image-alt">AWS EKS 01</block>
  <block id="153bbcd55aded817c5a331d5acae54eb" category="list-text">转到*AWS Marketplace附加项*并选择_storage_类别。</block>
  <block id="2b1131719d4d8198515b53a0132411fb" category="image-alt">AWS EKS 02</block>
  <block id="5bab8196b750f3260d005a4548bc5de0" category="list-text">选择所需的附加软件版本。</block>
  <block id="92f63954b2feb520d9a85c6ac6087ad8" category="image-alt">AWS EKS 03</block>
  <block id="165c328c69599353c4797fde7429e5b5" category="list-text">选择要从节点继承的IAM角色选项。</block>
  <block id="b64079b8570f34f88bca59be352b20e2" category="image-alt">AWS EKS 04</block>
  <block id="bf18811faac9b8e4fcaebab51afd1113" category="list-text">选择 * 创建 * 。</block>
  <block id="fa883f8fcd252ea2995457cd82515d03" category="list-text">验证此加载项的状态是否为_Active_.</block>
  <block id="2af6474930eac7fe47a45b3658bef5bf" category="image-alt">AWS EKS 05</block>
  <block id="f825c914a8659f5b0de8a9219ab365b6" category="paragraph">要将新创建的20MiB PV调整为1GiB、请编辑PVC并进行设置<block ref="02b011e6fe36e26e5f7365ba08bf5a48" prefix=" " category="inline-code"></block> 到1 GiB：</block>
  <block id="f3554362e5b550c58586036685aca0f6" category="list-text">基于凭据：此模式需要对ONTAP后端具有足够的权限。建议使用与预定义安全登录角色关联的帐户、例如<block ref="21232f297a57a5a743894a0e4a801fc3" prefix=" " category="inline-code"></block> 或<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block> 以确保与ONTAP 版本的最大兼容性。</block>
  <block id="ad8deb3ead6fe765f774fdb1b4d51494" category="list-text">增加了对云身份的支持。</block>
  <block id="1ed2e28ed5e329359ed11fa6b3213f12" category="list-text">带有ANF的AK—Azure工作负载标识将用作云标识。</block>
  <block id="685239028773625de0a3fdc18c584dcc" category="list-text">具有FSxN - AWS IAM角色的EKS将用作云身份。</block>
  <block id="a78644e58f124252a596fb7bd5a3f0e3" category="inline-link-macro">问题描述#864</block>
  <block id="45691f8c8852e7e9f8cf8e2ca1fd1a31" category="list-text">增加了配置和禁用iSCSI自我修复(<block ref="eebe101dfd60623e764ed89e9c35e13c" category="inline-link-macro-rx"></block>）。</block>
  <block id="77a876e8901fcb15dc01c057f3102ab6" category="inline-link-macro">问题描述#453.</block>
  <block id="210645e9f461c75a53d611ad7ca29990" category="list-text">增加了对Kubnetes 1.29的支持。</block>
  <block id="40c23d891efbf79122ffcbfdd4e1fc28" category="inline-link-macro">问题描述#866</block>
  <block id="b39a2f3ca5558cdf70a39aaa44921e02" category="list-text">修复了未启用ACP时出现的ACP警告消息(<block ref="8b8bf8931a263b3cadfea0d794486463" category="inline-link-macro-rx"></block>）。</block>
  <block id="694637a910367ab017767d1135910517" category="list-text">增加了在删除ONTAP驱动程序的快照期间、如果克隆与快照关联、则在执行克隆拆分之前的10秒延迟。</block>
  <block id="52a6fa0a11a7afe868a3a84e42cff7a1" category="list-text">从多平台映像清单中删除了内置证明框架。</block>
  <block id="1fc7da31107247b07ab3abf335b217de" category="section-title">23.10中的变化</block>
  <block id="154244be43a4ba50080a256f5657b29a" category="list-text">使用 Trident 时可能会遇到的一个常见问题<block ref="4568986ef6397d7c901269fc0e190ede" category="inline-link-rx"></block> 租户和客户端密码来自权限不足的应用程序注册。有关完整的三项要求列表、请参见 <block ref="afedf4ee56554ea6e6b54e6aa206680c" category="inline-link-macro-rx"></block> Configuration</block>
  <block id="35140a26b22dd9ba254fba38858d8b10" category="cell">应用程序注册中的租户 ID

如果在AKS集群上使用托管身份或云身份、则可选。</block>
  <block id="68aab7c1f293b3f340c21d4598bbf943" category="cell">应用程序注册中的客户端 ID

如果在AKS集群上使用托管身份或云身份、则可选。</block>
  <block id="6224cbf7bf787bd81b6e12ade1b5069a" category="cell">应用程序注册中的客户端密钥

如果在AKS集群上使用托管身份或云身份、则可选。</block>
  <block id="cdc0ef7f865a8837e4fd99ce3898f1d8" category="example-title">适用于AKS的云身份</block>
  <block id="1b6104dea07d224d6a76ba8bd88c586a" category="paragraph">此后端配置会出现异常<block ref="bc54592d6183695b841c6d1880ec0bf8" prefix=" " category="inline-code"></block>，<block ref="93c5bebdea9c94a0740fe6fd9bb250f0" prefix=" " category="inline-code"></block>，和<block ref="2b53761249254ce6b502f521e5cc0683" prefix=" " category="inline-code"></block>，在使用云标识时是可选的。</block>
  <block id="5d8ab765262318f7f87e5cd620d93290" category="cell"><block ref="ac68bbf921d953d1cfab916cb6120864" prefix="" category="inline-code"></block></block>
  <block id="294c3bfe0dc32c17126646089c93a92b" category="cell">您可以在AWS FSx for ONTAP的配置文件中指定以下内容：
-<block ref="d731d2fecb66f9c4a30253bd316a220f" prefix=" " category="inline-code"></block>：指定AWS FSx文件系统的ID。
-<block ref="1e9c0fd1beef5ff8ed3bef2ae3b7e560" prefix=" " category="inline-code"></block>：AWS API区域名称。
-<block ref="9af4d8381781baccb0f915e554f8798d" prefix=" " category="inline-code"></block>：AWS API密钥。
-<block ref="ce656850400574e9f9cffb285ee8abc0" prefix=" " category="inline-code"></block>：AWS机密密钥。</block>
  <block id="5e68d0f0226c4c9d8020f95ced71ffab" category="cell"><block ref="68b329da9893e34099c7d8ad5cb9c940" prefix="" category="inline-code"></block>

<block ref="9d4568c009d203ab10e33ea9953a0264" prefix=" " category="inline-code"></block><block ref="9d4568c009d203ab10e33ea9953a0264" prefix=" " category="inline-code"></block><block ref="9d4568c009d203ab10e33ea9953a0264" prefix=" " category="inline-code"></block></block>
  <block id="81b346d529f22abdfcb669de82986dfd" category="cell"><block ref="d3ed68f7315b7e72b8d886b2278fcac3" prefix="" category="inline-code"></block></block>
  <block id="c5a638166e3b5bb902803f0060f0d2dd" category="inline-link-macro">创建AWS机密管理器密钥</block>
  <block id="484067c59b1fa950e362a90fd416c89e" category="example-title">配置SMB卷的存储类</block>
  <block id="fa4eb54eedf6fea69ec183c4e2199a4d" category="paragraph">有关驱动程序详细信息、请参见 <block ref="4093b6d0ce8cf414637a02002d2b0376" category="inline-link-macro-rx"></block> 和 <block ref="276422a40a581e9842304216329765d5" category="inline-link-macro-rx"></block>。</block>
  <block id="506c2c0c7f5b70af3df68c45c46f45a7" category="paragraph">例如：</block>
  <block id="400e51795e42b1bfc94a14aeeeacc04a" category="paragraph">使用以下环境变量设置*云提供程序*和*云身份*标志的值：</block>
  <block id="c5ac38b2b362dbfd1b55bdb2b7e9375b" category="list-text">在AKS Kubelnetes集群上配置的工作负载身份和oidc-Issuer</block>
  <block id="919b714a25b423ceadcf231ff05b607b" category="paragraph">使用以下环境变量设置*云提供程序(CP)*和*云身份(CI)*标志的值：</block>
  <block id="91a7e225ea23690e36a162b9c8a45058" category="paragraph"><block ref="256d12880dee7515c7ed6253fd0a228a" prefix="" category="inline-code"></block><block ref="a5f4eea4d47cf2db58f43a66329ecf1e" prefix=" " category="inline-code"></block></block>
  <block id="d7e54271baba05c2253c5c79a6155965" category="list-text">所有Kubernetes工作节点都必须安装适当的NFS工具。请参见 <block ref="f1f954e59a21e3ffe189e77dd2ee9f86" category="inline-link-macro-rx"></block> 有关详细信息：</block>
  <block id="d1b5b194ace83d9f896d8f8b6765def5" category="list-text">所有 Kubernetes 工作节点都应安装适当的 iSCSI 工具。请参见 <block ref="073953144b84efd85603bb3d49521e06" category="inline-link-macro-rx"></block>。</block>
  <block id="5c0a5e9c97099065874a650cf8c67a66" category="list-text"><block ref="bc54592d6183695b841c6d1880ec0bf8" prefix="" category="inline-code"></block>，<block ref="93c5bebdea9c94a0740fe6fd9bb250f0" prefix=" " category="inline-code"></block>，和<block ref="2b53761249254ce6b502f521e5cc0683" prefix=" " category="inline-code"></block> 在AKS集群上使用云标识时可选。</block>
  <block id="9837781971083d3fe119b0217014d301" category="list-text">Azure<block ref="d5189de027922f81005951e6efe0efd5" prefix=" " category="inline-code"></block> 至少包含一个<block ref="c5f14b2142014dc234282a513132bad4" category="inline-link-rx"></block>。自Trident 22.01日开始<block ref="d5189de027922f81005951e6efe0efd5" prefix=" " category="inline-code"></block> 参数是后端配置文件顶层的必填字段。在虚拟池中指定的位置值将被忽略。</block>
  <block id="30cce5213fe0e4b50d664920d7075cdf" category="inline-link">用户分配的托管身份</block>
  <block id="345615c7e1785c38b1b2d2aadeef42bb" category="list-text">以使用<block ref="12e3f82975710931e07ec1b3138bd8bf" prefix=" " category="inline-code"></block>请获取<block ref="032e8204d9a4acfa22151783caa18894" prefix=" " category="inline-code"></block> 从A<block ref="f857b557e72afd63cd1e3ca2faab2a5b" category="inline-link-rx"></block> 并在中指定此ID<block ref="ab6b275be02c02a9982cb7a0c234629e" prefix=" " category="inline-code"></block>。</block>
  <block id="75d6668e40a552149b5d5868b03080c8" category="paragraph">。<block ref="b979c2934ac0b4ba3f08dabfdd1b2299" prefix=" " category="inline-code"></block> 获取后端特定的配置参数。在此示例中、后端使用<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 存储驱动程序、并使用此处所示的配置参数。有关所需存储驱动程序的配置选项列表、请参阅 <block ref="5f2d139eefa7c36061f4d97161be02ea" category="inline-link-macro-rx"></block>。</block>
  <block id="733aa7fe5deef27d1cb0828cff0f17bd" category="admonition">在切换安装方法之前、请查看 <block ref="d7d87809bc6e1001ccd94c7433d28fd5" category="inline-link-macro-rx"></block>。</block>
  <block id="948c2cbef9ba6f931735e6eef2d86eba" category="list-text">有关详细信息，请参见 <block ref="04cf7258a315ca08f4b436c194fef69d" category="inline-link-macro-rx"></block>。</block>
  <block id="1eb921add61b9e1c5fcaf8272bb52ec6" category="admonition">在OpenShift容器平台上使用TRIDent操作程序进行升级时、应升级到TRIDent 21.01.1或更高版本。21.01.0 版发布的 Trident 运算符包含一个已知的问题描述，该 已在 21.01.1 中修复。有关详细信息、请参见<block ref="bcebcdd21adcbb3d7c640d63a711c6fb" category="inline-link-rx"></block>。</block>
  <block id="99c0f28c38ebd0826265cfd120e75cce" category="cell">设置为<block ref="71d36c46e340ad9137b2691e267f5ecd" prefix=" " category="inline-code"></block> 在AKS集群上使用托管身份或云身份时。如果在EKS集群上使用云标识、请设置为"Aws"。</block>
  <block id="0b79806f5a5d5ddd87cd1bd2a28f965c" category="cell"><block ref="89abe9fddbe3cf0f9bcd7779fe4aed69" prefix="" category="inline-code"></block></block>
  <block id="746996e3c70ac1447e486f6c9fc0fac2" category="admonition">有关格式化POD参数的详细信息、请参阅 <block ref="7b3a69fdac08c769183925679da4c365" category="inline-link-macro-rx"></block>。</block>
  <block id="87405c3bcad617fc620ddcd9d59cee14" category="example-title">AKS集群上的云身份</block>
  <block id="26f5586d25dc46e2526fe898341970ac" category="example-title">EKS集群上的云身份</block>
  <block id="2a2c6cbf201e7fa0935ec1e8b243cca1" category="cell">Pod的其他节点选择器。请参见 <block ref="4b8785cedf610e3d8df57f69213f93a8" category="inline-link-macro-rx"></block> 了解详细信息。</block>
  <block id="8a00a4799d11edabcb628da338d295ce" category="cell">覆盖Kubernetes对Pod的容错。请参见 <block ref="4b8785cedf610e3d8df57f69213f93a8" category="inline-link-macro-rx"></block> 了解详细信息。</block>
  <block id="bf490af1c404d2415dfe93c23b646bfb" category="admonition">PSS将取代Pod安全策略(PSP)。PSP已在Kubernetes v1.21中弃用、并将在v1.25中删除。有关详细信息、请参见 <block ref="18a97095ea40d42decd22f31a2040afe" category="inline-link-macro-rx"></block>。</block>
  <block id="8711d10d95f02e2915623a51693eaaac" category="cell">CSI要求挂载点为双向挂载点、这意味着Trident节点POD必须运行特权容器。有关详细信息，请参见 <block ref="36e6e997c8e1e33355ee35fb5cf65f2b" category="inline-link-macro-rx"></block>。</block>
  <block id="9ec97307849e95766ab72c5a34828c08" category="list-text">。<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block> 参数用于控制SAN LUN所需的文件系统类型。此外、Kubernetes还会使用<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block> 在存储类中以指示文件系统已存在。可以使用控制卷所有权<block ref="c7a6c0ee60c6f68dfe700feaacf15703" prefix=" " category="inline-code"></block> 仅当出现此情况时、Pod的安全上下文才会显示<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block> 已设置。请参见 <block ref="7940a62969e5aeae7f6e32b04e7a11e3" category="inline-link-macro-rx"></block> 有关使用设置卷所有权的概述<block ref="c7a6c0ee60c6f68dfe700feaacf15703" prefix=" " category="inline-code"></block> 环境。Kubernetes将应用<block ref="c7a6c0ee60c6f68dfe700feaacf15703" prefix=" " category="inline-code"></block> 只有在以下情况下才为值：</block>
  <block id="c2b0df577877e25491f6e1ed397c87df" category="list-text">请参见 <block ref="7c28a1514d14039d3824999236c4890d" category="inline-link-macro-rx"></block> 有关卷扩展的更多详细信息。</block>
  <block id="d7b7b183151bdcc8d68efef8a53c02cb" category="list-text">使用卸载Trident时<block ref="ac8650577d1b744589a6a11b60ac38c7" prefix=" " category="inline-code"></block> 命令中、Trident Pod会被删除、但创建的CRD不会被清理。请参见 <block ref="3e5b286354565ddfee44ed92d763b424" category="inline-link-macro-rx"></block> 了解如何从头开始完全删除和重新配置 Trident 。</block>
  <block id="7a82af4e68a9aca0b21f107f4c0836ee" category="paragraph">有关如何构建这些对象的详细信息、请参见 <block ref="2e76dfee6bc1b5ee4173b3c5bbcd99e5" category="inline-link-macro-rx"></block>。</block>
  <block id="1894d1b67a8b86d7f876f515c238d5a6" category="paragraph">有关资源配额的详细信息、请参见 <block ref="1fb556021be57083646a3e3c0079c64c" category="inline-link-macro-rx"></block>。</block>
  <block id="7cc1edf2116d94e97b8f4a69079de132" category="list-text">Anthos On－Prem (VMware)和Anthos on Bare metal 1.16</block>
  <block id="eca0dda5d40cf62b4a73c50deab2520c" category="inline-link-macro">KubeVirt</block>
  <block id="cd41030284d3ee7b99fc16831ed79650" category="paragraph">ONTAP 存储系统具有最大卷数，具体取决于软件版本和硬件平台。请参见<block ref="bb9c67b5a4c15a85b5e6aa6c9afd0285" category="inline-link-rx"></block> 以 ONTAP 确定确切限制。当卷计数用尽时，配置操作不仅会对 Trident 失败，而且会对所有存储请求失败。</block>
  <block id="ed108e0380671c3131e1a4795b982a45" category="paragraph">服务质量（ QoS ）可确保关键工作负载的性能不会因争用工作负载而降级。ONTAP QoS 策略组为卷提供 QoS 选项，并使用户能够为一个或多个工作负载定义吞吐量上限。有关QoS的详细信息、请参见<block ref="721a1778a2025ec5868484b3888c0186" category="inline-link-rx"></block>。
您可以在后端或存储池中指定 QoS 策略组，这些策略组将应用于该池或后端创建的每个卷。</block>
  <block id="acd73d692aa90cacfe480ba8ba39cd5d" category="paragraph">块大小和带宽会直接影响 IOPS 数量。随着块大小的增加，系统会将带宽增加到处理较大块大小所需的级别。随着带宽的增加，系统能够达到的 IOPS 数量也会减少。请参见<block ref="c8976c50ed9f016849fdce232777cd31" category="inline-link-rx"></block> 有关 QoS 和性能的详细信息。</block>
  <block id="4e9b156e7e2788c8cd4b0877fd922657" category="inline-link-macro">24.02.</block>
  <block id="6cc5c9e930ea3d3b8bff4367c60ceea4" category="cell">2025年2月</block>
  <block id="be90349da04be71a620e68314d810f7f" category="cell">2026年2月</block>
  <block id="4b7cb6c36399bdd4e8724de18a1c079b" category="cell">2027年2月</block>
  <block id="bcb8f00239af2cecd5a6b534dabea922" category="paragraph"><block ref="bcb8f00239af2cecd5a6b534dabea922" category="inline-link-macro-rx"></block></block>
  <block id="62bc04158f931e9b0a26f5676c8ab043" category="paragraph"><block ref="62bc04158f931e9b0a26f5676c8ab043" category="inline-link-macro-rx"></block></block>
  <block id="3a766ef0e7ab8dbf17dc86487efd5fbf" category="paragraph">通过使用三端技术支持安装程序、可以创建一个Kubernetes ClusterRole、此类ClusterRole可以对Kubernetes集群中的集群的PersentVolume、PersentVolumeClaim、StorageClass和机密资源具有特定访问权限。请参见 <block ref="118dd7a3d307a499ad0f9c547981393b" category="inline-link-macro-rx"></block>。</block>
  <block id="054e161b9c33938d4cac2bab4e4d46b8" category="paragraph">对于节点数超过 64 个的 Kubernetes 集群，您应使用多个访问组。每个访问组最多可以包含 64 个 IQN ，每个卷可以属于四个访问组。在最多配置四个访问组的情况下，集群中大小最多为 256 个节点的任何节点都可以访问任何卷。有关卷访问组的最新限制、请参见<block ref="ac4000c3a85e5909daa6593f9f0617fd" category="inline-link-rx"></block>。</block>
  <block id="2284dc5d4add6f82e5bc0121aa82a816" category="list-text">增加了对Azure托管身份(AMI)与azure-NetApp-files存储驱动程序的使用支持。</block>
  <block id="f77d4be42f8ef9e2474d677786cf6d7a" category="paragraph">通过云身份、Kubnetes Pod可以通过作为工作负载身份进行身份验证来访问Azure资源、而不是提供明确的Azure凭据。</block>
  <block id="088be2b53cfa8710d751578d273c4af0" category="paragraph">要在Azure中利用云身份、您必须：</block>
  <block id="33176aeb27c41088051f460946356423" category="inline-link-macro">安装NFS工具</block>
  <block id="a0b90bbc60c78003c8f066892446e127" category="paragraph"><block ref="5dac8bb8705e3a30615e678be90a7f1d" category="inline-link-macro-rx"></block> 如果您使用的是：<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>，<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>，<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>，<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block>，<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block>。</block>
  <block id="dd1774ab705fcc0738f7d5cfa8176115" category="paragraph"><block ref="918981963bb555a1b3a006c12fd13637" category="inline-link-macro-rx"></block> 如果您使用的是：<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>，<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>，<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>。</block>
  <block id="e007fb329975dfac9458f3defd0f7fc1" category="inline-link-macro">安装NVMe工具</block>
  <block id="fd7af40a7e3f81bfb0a51eac257dc730" category="paragraph"><block ref="8ac92b41418caf5b4c74c2a77a0c349a" category="inline-link-macro-rx"></block> 如果您使用的是<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 适用于基于TCP (NVMe/TCP)协议的非易失性内存标准(NVMe)。</block>
  <block id="50f9796c3e95f29464ed077bb59ca6a5" category="cell"><block ref="a1edaea62dbed344534369e9668223b1" prefix="" category="inline-code"></block></block>
  <block id="d3ee0f95ea35db45a8c5d2deb96b4eb9" category="cell">调用iSCSI自我修复的间隔。</block>
  <block id="d2393ee8411e83742fc73a79660d81ba" category="cell"><block ref="48899b1fc217fef67f8c9c11d2af0800" prefix="" category="inline-code"></block></block>
  <block id="5368476cef8604c12ee3f8a741319473" category="cell"><block ref="85fc372a514da766ce84a222668f8e62" prefix="" category="inline-code"></block></block>
  <block id="a5c601ef1c412054e22a761067edb9da" category="cell">iSCSI自我修复通过执行注销和后续登录来尝试解决陈旧会话之前经过的持续时间。</block>
  <block id="e1bd8a641f8c3114c2698aa76942b621" category="cell"><block ref="4fe853d0c57c2a118a755c207068b052" prefix="" category="inline-code"></block></block>
  <block id="d03a790fb20fccc8b27cff74c7a10709" category="section-title">配置或禁用iSCSI自我修复</block>
  <block id="160cc91d68e6399b864fe236e7a6d11e" category="list-text">*iSCSI自我修复间隔*：确定调用iSCSI自我修复的频率(默认值：5分钟)。您可以将其配置为通过设置较小的数字来提高运行频率、也可以通过设置较大的数字来降低运行频率。</block>
  <block id="af6999fe88eb0d5f3cf5f3c7570bf014" category="paragraph">将iSCSI自我修复间隔设置为0可完全停止iSCSI自我修复。建议不要禁用iSCSI自我修复；只有在iSCSI自我修复功能无法正常工作或出于调试目的时、才应禁用它。</block>
  <block id="fe240a869a7a9e3bdc68d460aa116db2" category="list-text">*iSCSI自我修复等待时间*：确定在注销运行状况不正常的会话并尝试重新登录之前iSCSI自我修复等待的时间(默认值：7分钟)。您可以将其配置为较大的数字、以便确定为运行状况不正常的会话必须等待较长的时间才能注销、然后再尝试重新登录、或者配置为较小的数字以较早地注销和登录。</block>
  <block id="7c3dfaf40c8f6c1208932661e70ca6b2" category="paragraph">要配置或更改iSCSI自我修复设置、请传递<block ref="a1edaea62dbed344534369e9668223b1" prefix=" " category="inline-code"></block> 和<block ref="85fc372a514da766ce84a222668f8e62" prefix=" " category="inline-code"></block> 舵安装或舵更新期间的参数。</block>
  <block id="ba53a946a5e7dedfdc75a569107f3a66" category="paragraph">以下示例将iSCSI自我修复间隔设置为3分钟、并将自我修复等待时间设置为6分钟：</block>
  <block id="c67fd1b99934afa248dfeb285a9a4191" category="open-title">Tridentctl</block>
  <block id="03c688458c87383f238f17223a52f7bd" category="paragraph">要配置或更改iSCSI自我修复设置、请传递<block ref="95df96489cc6481c74d24c1397e3edd9" prefix=" " category="inline-code"></block> 和<block ref="4ad3b66813348b71002bd232a403581c" prefix=" " category="inline-code"></block> 在安装或更新TRDentcdr期间的参数。</block>
  <block id="38999be4c01ec9d8c11d4405b7dc50e0" category="inline-link-macro">24.06</block>
  <block id="94d267f658e04734eb2e098127293a89" category="cell">2025年6月</block>
  <block id="c21446b3ecfb30ed6c2760d686bd4578" category="cell">2026年6月</block>
  <block id="2f57a6988da045d1c26e2c5016ad0900" category="cell">2027年6月</block>
  <block id="7b5dfababf92391b5761944c63b0d3bb" category="cell">Kubernetes版本</block>
  <block id="5e2619e85dc9af38c2b7180c37168571" category="list-text">对于运行Kubbernetes 1.24的集群，请使用<block ref="bd2cc8575fe69c7f775292759380c838" prefix=" " category="inline-code"></block>。</block>
  <block id="60e3300406400d9ca307bbe9538cb66f" category="list-title">需要考虑的要点</block>
  <block id="ce48e23c21c781fc1bd260f1c6bbd0e9" category="list-text">如果使用TridentBackendConfig (tbc)创建后端、则无法使用文件更新后端<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block> 。</block>
  <block id="965425a47916235e6c935104c9e64bca" category="list-text">如果<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block> 已在tbc中设置、则无法使用命令修改<block ref="ce232749b55d6999ffb5cc1feb6c69fe" prefix=" " category="inline-code"></block> 。</block>
  <block id="6969443eb58685fd2ba47dd82c688dfb" category="list-text">使用<block ref="30ef4d8d0d0cb9218c8f70ca2b7ee7bc" prefix=" " category="inline-code"></block> 更改<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block>。您还可以使用或文件更新<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block><block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block><block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block> ；这会触发后端的完全重新初始化、并且可能会非常耗时。</block>
  <block id="b2b04010a7e4a8486d987f6e074cde45" category="list-text"><block ref="befb9ef08cd8fda4bc507ccd6a523a43" prefix="" category="inline-code"></block> 和<block ref="301cd7c7419443b2c9c5d87f6865f0cb" prefix=" " category="inline-code"></block> 已暂停。</block>
  <block id="15ba7f861a25848aeb7a04303194c22a" category="list-text"><block ref="c76dd551d0df4615489f4840c234db4e" prefix="" category="inline-code"></block>、<block ref="4956c0b34c154301cbe111d75fb939f9" prefix=" " category="inline-code"></block><block ref="37ca7faad054353aadc61e64e55b4dac" prefix=" " category="inline-code"></block>、、<block ref="9a288381ee12262ef127ccbaeb520730" prefix=" " category="inline-code"></block>、<block ref="db66912e8bdff8f12b8b75883aeb66ef" prefix=" " category="inline-code"></block><block ref="752d336f53e6d74a5e509dd00eb2a627" prefix=" " category="inline-code"></block><block ref="871b40b0d12fe47d3ce4d2bbfa30ccc5" prefix=" " category="inline-code"></block>、<block ref="4c7dd4b0f1074705d27d812563c98768" prefix=" " category="inline-code"></block>、、<block ref="70850d0d4fbd8b67815a4598d5655a4d" prefix=" " category="inline-code"></block>、<block ref="c4e5752b58b7f7b1c92a5302a0940801" prefix=" " category="inline-code"></block><block ref="7c976338db43771fa6048705880496ea" prefix=" " category="inline-code"></block> 保持可用。</block>
  <block id="6ca35db8eab6c30e03e715e99d3c1d11" category="paragraph">您也可以使用后端配置文件或中的字段更新后端状态<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block><block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block><block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block>。有关详细信息，请参阅 <block ref="991ae6fba57a2359d4e338d48b85301c" category="inline-link-macro-rx"></block> 和 <block ref="d39ea29671737dc4c6f8b362e0ace309" category="inline-link-macro-rx"></block>。</block>
  <block id="c26fe677a830587ef1c141567a86c86a" category="paragraph">* 示例： *</block>
  <block id="4c8c9b9d93d68dc932195b1aa0583910" category="paragraph">按照以下步骤使用文件更新<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block><block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block> ：</block>
  <block id="13cf048f75b63ff6bd6513e6ceb81fe0" category="list-text">编辑<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block> 文件以包含<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block> 字段、并将其值设置为"已附加"。</block>
  <block id="90457d836d77c63b0e475cddbb6f1d4c" category="list-text">使用命令和更新后的文件的路径更新后端<block ref="ad782b779edfd8199198bed41b3e3b6b" prefix=" " category="inline-code"></block><block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block> 。</block>
  <block id="a7c9f5fb8c3dd89cd4acee279df59630" category="paragraph">*示例*：<block ref="cc34ac0a771977b41f88a8dac4a25a01" prefix=" " category="inline-code"></block></block>
  <block id="a0c475f6592b0a660cc2db104d607b3f" category="paragraph">您可以在使用命令应用tbc后对其进行编辑<block ref="cdf774783c0eec7f2639a3c0d70d29ff" prefix=" " category="inline-code"></block> 。以下示例使用选项将后端状态更新为暂停<block ref="c7d1d8826ecea15bd2786371bbe65f70" prefix=" " category="inline-code"></block> ：</block>
  <block id="68fed7a5dad5dbe38e73f242591f9cdc" category="inline-link-macro">问题描述#341</block>
  <block id="79695bf027de5b53252ad567db19afc0" category="list-text">**重要**：<block ref="e083f2ed1275af0ce4336a068ebee72a" prefix=" " category="inline-code"></block> 现在，参数限制ONTAP经济型驱动程序中的qtree/LUN大小。使用新 <block ref="c8f83e727d4a4255a6485c24776e86bb" prefix=" " category="inline-code"></block> 参数控制这些驱动程序中的FlexVol大小。<block ref="43e193e4ec566def2b1890b13e291e7f" category="inline-link-macro-rx"></block>()。</block>
  <block id="f8a74109e040a7d2fe11f386046e7f0f" category="inline-link-macro">问题描述#883</block>
  <block id="d9b039cc0482c40024b1c3e5b5bfab48" category="list-text">增加了iSCSI自我修复功能，以便在使用弃用的igroup时按确切的LUN ID启动SCSI扫描<block ref="1db457cca48a821c9957caae88cdf1d0" category="inline-link-macro-rx"></block>()。</block>
  <block id="624c548303efc06e3245885cb046ce02" category="list-text">增加了对卷克隆操作和调整大小操作的支持、即使后端处于暂停模式也是如此。</block>
  <block id="53e2f13be42e180fc96be9feca214cc0" category="list-text">增加了对新永久性卷在ONTAP存储后端的自定义卷名称和元数据的支持。</block>
  <block id="f22dddc969b204ba1f08fd5b6dccf9e5" category="list-text">增强了<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block> (ANF)驱动程序功能、可在NFS挂载选项设置为使用NFS 4.x时默认自动启用Snapshot目录</block>
  <block id="b480f0e15ab56f178942ac571ef3d0b4" category="list-text">增加了对NFS卷的Bottleroclet支持。</block>
  <block id="2b1f345aa37d468275a96267dbf3cc86" category="list-text">增加了对Google Cloud NetApp卷的技术预览支持。</block>
  <block id="d329ee31cea82ba7b18282e9874fd6fb" category="inline-link-macro">问题描述#849</block>
  <block id="7bdef3d1e5eba62c2c49345689cb034e" category="list-text">添加了用于动态导入LVM卷的PVC标注<block ref="36720d50814e4335401b2047257bfedf" prefix=" " category="inline-code"></block><block ref="8164e77c784c82617684b3113cbe7b39" category="inline-link-macro-rx"></block>()。</block>
  <block id="88cc43db200dd9a0ba8b9f3d2b3494c5" category="list-text">为ANF驱动程序添加了拓扑感知功能。</block>
  <block id="5f9e29078ffd406f09be67dadfa65c81" category="inline-link-macro">问题描述#892</block>
  <block id="d2e65e05e52ae58b1bc83b9f92667bc4" category="list-text">修复了忽略来自Kubbernetes ()的警告消息的trdentcdc<block ref="74b3b54ef301f7904eaa2691276657ad" category="inline-link-macro-rx"></block>。</block>
  <block id="6d20ebb6924fd1c28927afadfd523477" category="inline-link-macro">问题描述#887</block>
  <block id="e0d3d678b5ec46031ee8c6afb7413c9e" category="inline-link-macro">问题[#883.</block>
  <block id="2d7e2b9397eede29137512c835ab6774" category="list-text">ONTAP驱动程序现在接受低于20MiB的卷大小<block ref="91ddf20e925712134071a4cc83fc66a3" category="inline-link-macro-rx"></block>()。</block>
  <block id="62a3f40ae48e77863d3e5bdef59c1adb" category="list-text">修复了NFS v4.1中ANF卷导入失败的问题。</block>
  <block id="6a89b6f002954f791e28c8dd2f2afcc8" category="section-title">24.02中的变化</block>
  <block id="4487bf4a5d2565e471a4ac1e0bba9af6" category="cell"><block ref="1f2a94e142bf020b1f7c6297ec12413f" prefix="" category="inline-code"></block></block>
  <block id="d9ecfcade7b244fc0100c0ff4359f5ea" category="cell">表示此后端支持的区域和区域的列表。有关详细信息，请参阅 <block ref="a735758eec435cad1c5672b75bd657c0" category="inline-link-macro-rx"></block>。</block>
  <block id="65a6416f3ed9552fcc006c830dbeac72" category="example-title">支持的拓扑配置</block>
  <block id="a8d3b70256520cece459d618f0b69d22" category="cell"><block ref="b326b5062b2f0e69046810717534cb09" prefix="" category="inline-code"></block> 对于ONTAP 9.151或更高版本，否则<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>。</block>
  <block id="1a917db78e9060d4bb44a3e3d9a60cb3" category="cell"><block ref="feeb5473f4afb4f667dfc9d369c3b454" prefix="" category="inline-code"></block></block>
  <block id="ae7206c28f1d0ee5f9f116f1cfe22c54" category="cell">用于创建自定义卷名称的模板。</block>
  <block id="b797b4560e6c4ae4e13d035bbce23b4d" category="example-title">使用nameTemplate的后端配置示例</block>
  <block id="f1b9eac8c1d92956d7734db32c5e55d9" category="list-text">正常或非正常关闭K8s节点(24.06)</block>
  <block id="3c49604e542827bab74a3fdc9c521379" category="doc">自定义卷名称和标签</block>
  <block id="52929ef06c83a3071dc677c6076f8eb3" category="paragraph">可自定义的卷名称和标签支持：</block>
  <block id="ba7ad86bd3d0a50a4a04306d941e6c28" category="list-text">卷创建、导入和克隆操作。</block>
  <block id="174a7026faf4af3e1ec0eeec9d35af81" category="list-text">如果使用的是ONTA-NAS经济型驱动程序、则只有qtree卷的名称符合此名称模板。</block>
  <block id="12df52676a1d1f4040501d3a804b1a4b" category="list-text">如果使用的是ONONTAP SAN经济版驱动程序、则只有LUN名称符合此名称模板。</block>
  <block id="0ee903e586aac760f5cdfb2c770f936b" category="list-text">可自定义的卷名称仅与ONTAP内部部署驱动程序兼容。</block>
  <block id="b3c7ca4cfca79f517812064c1b9b0ef3" category="list-text">可自定义的卷名称不适用于现有卷。</block>
  <block id="4c71628145ace597229ccf6ca6fdc8bf" category="section-title">可自定义卷名称的关键行为</block>
  <block id="a5a284fe1356005dc517f157bef35adc" category="list-text">如果因名称模板中的语法无效而导致失败、则后端创建将失败。但是、如果模板应用程序失败、则会根据现有命名约定对卷进行命名。</block>
  <block id="d654edd1d54bb9458ddce1a8e82a2733" category="list-text">如果使用后端配置中的名称模板来命名卷、则存储前缀不适用。任何所需的前缀值都可以直接添加到模板中。</block>
  <block id="7a4b723467d577190f5e83269d9c620a" category="section-title">具有名称模板和标签的后端配置示例</block>
  <block id="c08c19c0fe3a67a5a218b1aa469e05ad" category="paragraph">可以在根和/或池级别定义自定义名称模板。</block>
  <block id="12f281b150c6774b77a875b26e355bfc" category="listing-title">根级别示例</block>
  <block id="93a53c76d697da9fb40dcf5571309b51" category="listing-title">池级别示例</block>
  <block id="c9181e8d9effc5e3fff6e681bc43f9bb" category="section-title">命名模板示例</block>
  <block id="6834f2805b2a45680a7ae789728955a4" category="paragraph">*示例1*：</block>
  <block id="c0fa2da2f469c0dff06ceac7e749b20d" category="paragraph">*示例2*：</block>
  <block id="e1a1ba8a7f91a9affe2c95b795610ca0" category="list-text">对于卷导入、只有当现有卷具有特定格式的标签时、才会更新标签。例如：<block ref="ac1133297b5ec16017c28f04387bb5c9" prefix=" " category="inline-code"></block>。</block>
  <block id="feddffabbdd5254f9975a1a26a73d651" category="list-text">对于受管卷导入、卷名称遵循后端定义中根级别定义的名称模板。</block>
  <block id="e8ce47501426b8525633fc30daf17d7a" category="sidebar">自定义卷名称</block>
  <block id="bd97885496639b0f4498d4131198ac36" category="list-text">增加了对Windows Server 2022节点的支持。</block>
  <block id="de547bcab0e20f54ec4d5e95ba44b0b1" category="list-text">Windows Server 2022</block>
  <block id="010e61d0b40eeb84b96a1321e8f0bab7" category="cell">ext4、ext3、xfs</block>
  <block id="e422e290c66eca7f882976f830b781b4" category="list-text">增加了对Kubnetes 1.30的支持。</block>
  <block id="190dbae19c88b1e68bf03f7783c5d5d1" category="list-text"><block ref="190dbae19c88b1e68bf03f7783c5d5d1" category="inline-link-rx"></block></block>
  <block id="430c6bcb8516befc45fb8173b0ca4e1f" category="list-text"><block ref="430c6bcb8516befc45fb8173b0ca4e1f" category="inline-link-rx"></block></block>
  <block id="d7d36869f2f4aa1eb99a10008e153f20" category="list-text"><block ref="d7d36869f2f4aa1eb99a10008e153f20" category="inline-link-rx"></block></block>
  <block id="f8b52d963f246a75dc6c8b78c954a4fd" category="list-text"><block ref="f8b52d963f246a75dc6c8b78c954a4fd" category="inline-link-rx"></block></block>
  <block id="b6780b7b2561935ff862fe7126cde751" category="list-text"><block ref="b6780b7b2561935ff862fe7126cde751" category="inline-link-rx"></block></block>
  <block id="b9a641d903e611a87a5e68ac7fdb0b84" category="list-text">Trident AutoSupport 不会收集或传输个人身份信息（ PiII ）或个人信息。它附带的<block ref="173a360b412944768c2ab13e6c8fd1c7" category="inline-link-rx"></block> 不适用于三端存储容器映像本身。您可以详细了解NetApp对数据安全和信任的承诺<block ref="d3cc55401bc8303e01c6b0c43ba0733f" category="inline-link-rx"></block>。</block>
  <block id="5ff83dbc70e496ea22b38ea61bb69f05" category="list-text">观看上的演示 <block ref="c27441bbbe62adf51ae6ecec41fde8bd" category="inline-link-macro-rx"></block>。</block>
  <block id="533a7baf9026dddae6baef47ea605b08" category="doc">部署示例应用程序</block>
  <block id="c09ee63e688125cf9517a66bb5a0a5a6" category="paragraph">以下示例显示了将PVC连接到POD的基本配置：*基本配置*：</block>
  <block id="f477db05998ad8420119de646e2ff290" category="doc">创建IAM角色和AWS机密</block>
  <block id="98c3c9acd444d11890d48438db3c165e" category="paragraph">您可以通过作为AWS IAM角色进行身份验证(而不是提供显式AWS凭据)来配置Kubbernetes Pod以访问AWS资源。</block>
  <block id="3f566b5ded6e7ac8c26dd3c07a2ea056" category="admonition">要使用AWS IAM角色进行身份验证、您必须使用EKS部署Kubenetes集群。</block>
  <block id="3926fdac6344d565c95f560468946335" category="section-title">创建IAM策略</block>
  <block id="78edc229f8df1c5e0840f6469bc28454" category="paragraph">以下示例将使用AWS命令行界面创建IAM策略：</block>
  <block id="77f6e3db9b70538186091595d9c8c9e8" category="list-text">EKS附加项</block>
  <block id="e477faed39be08642267684bb501d931" category="open-title">管理控制台</block>
  <block id="e8d532dbf6904e2793dbda6fd0d03818" category="list-text">打开Amazon EKS控制台，网址为<block ref="c4765fcd1a0f97cf67c0365ddc45d563" category="inline-link-rx"></block>。</block>
  <block id="cacc1ddf612923b1c73b0a9a76659f42" category="list-text">在“*配置选定的附加项*设置”页面上，执行以下操作：</block>
  <block id="149e81257342cd05b0256d010b0b4a37" category="list-text">选择要使用的*版本*。</block>
  <block id="dfe4bfc5bd8b8d180411468fbdbb4033" category="list-text">选择“*下一步*”。</block>
  <block id="fbadf292f84bef20d7678936dbe4c4ce" category="list-text">在*Review and add*页上，选择*Cree*。</block>
  <block id="46bfc11fb8f185d278ea910b0052a317" category="paragraph">加载项安装完成后、您将看到已安装的加载项。</block>
  <block id="7820fdb5d8b3ebe0c69c86cf8bd2d0cf" category="open-title">AWS命令行界面</block>
  <block id="52b5830420efb96c3a91beb52bac3b23" category="paragraph">*示例输出：*</block>
  <block id="b3f252777a69b110667756babe83a98f" category="inline-link-macro">插件</block>
  <block id="25626757a73152ece7fdadb90ede4b7c" category="inline-link-macro">Kubbernetes现场管理</block>
  <block id="751f793ade8de1ed590e0f90ac05d8e1" category="paragraph">如果您删除了该<block ref="c23ab3adaec8ca15ff3ffd0971be6152" prefix=" " category="inline-code"></block> 选项、并且任何Amazon EKS附加设置与您的现有设置冲突、则更新Amazon EKS附加设置将失败；您将收到一条错误消息、以帮助您解决冲突。在指定此选项之前、请确保Amazon EKS附加组件不会管理您需要管理的设置、因为这些设置会被此选项覆盖。有关此设置的其他选项的详细信息，请参见 <block ref="aea621f0e078efb8367c5d5e894674cd" category="inline-link-macro-rx"></block>。有关Amazon EKS Kubenetes字段管理的详细信息，请参阅 <block ref="97bdcfd76d2ff3e4855f6b36ebad236e" category="inline-link-macro-rx"></block>。</block>
  <block id="b0c6845b636be8c810182f985c930fed" category="list-text">打开Amazon EKS控制台<block ref="c4765fcd1a0f97cf67c0365ddc45d563" category="inline-link-rx"></block>。</block>
  <block id="5f06738a5749e735a4681f5c09e2bafc" category="paragraph">以下示例将更新EKS加载项：</block>
  <block id="d8c918c170a0768203b4c2a6218e22bf" category="paragraph">您可以通过两种方式删除Amazon EKS附加项：</block>
  <block id="577a7d77fb14f745abf0c5ee04b72879" category="admonition">如果此附加项具有关联的IAM帐户、则不会删除此IAM帐户。</block>
  <block id="c8e9b5ea2470965edac225c56a879d07" category="list-text">在*Remove NetApp_trdent-operator con確 認*对话框中，执行以下操作：</block>
  <block id="10aba138eb518a0cc15662934a1f6e18" category="list-text">如果您希望Amazon EKS停止管理此附加组件的设置、请选择*保留集群*。如果要在集群上保留附加软件、以便您可以自行管理附加软件的所有设置、请执行此操作。</block>
  <block id="ecca191ac54751ba8120816fbe45777e" category="list-text">输入*NetApp_trdent-operator*。</block>
  <block id="bb7c6bde1fc26965ada02923bac65350" category="paragraph">请使用集群的名称进行替换<block ref="e2eb89f0ffaf521a0d2eeaffca04d117" prefix=" " category="inline-code"></block> 、然后运行以下命令。</block>
  <block id="23e0e5bfdd7b1fef2ab4d932aae742e5" category="doc">配置存储后端</block>
  <block id="c3e86b30fe8148143701324ae1595af8" category="list-text"><block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix="" category="inline-code"></block>：配置的每个PV都是其自身Amazon FSx for NetApp ONTAP卷中的一个LUN。建议用于块存储。</block>
  <block id="3878a0c92e55dbd3cdd9458330c2f1c3" category="list-text"><block ref="8321592ce24c8a122ecf26a63cfca407" prefix="" category="inline-code"></block>：配置的每个PV都是一个完整的Amazon FSx for NetApp ONTAP卷。建议用于NFS和SMB。</block>
  <block id="eadd7f9188e84053efc871a14d0d3bd6" category="section-title">后端高级配置和示例</block>
  <block id="ab2e083df601e1b7c7346487158ab13f" category="cell">"`100`"</block>
  <block id="7a5bbb3c815084605b780e0cd6e810fd" category="cell"><block ref="89ffa293e05655bd6be9d422345be38a" prefix="" category="inline-code"></block></block>
  <block id="9817ca035dba7bc4123be2c0bf280d66" category="doc">配置存储类和PVC</block>
  <block id="c3d2188822ac025c91b768888f8af01e" category="paragraph">此示例显示了一个具有rwx访问权限的基本PVC，该PVC与名为的StorageClass关联<block ref="1c62ceba602064183a6346b85fe26c96" prefix=" " category="inline-code"></block>。</block>
  <block id="8067a6840467d2024a341120a4e2440e" category="list-text">基于凭据(建议)：将凭据安全地存储在AWS机密管理器中。您可以使用文件系统的用户、也可以使用<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block><block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block> 为SVM配置的用户。</block>
  <block id="53f64465dc89ebfc8f426b3cdf4d1614" category="sidebar">创建IAM角色和AWS密钥</block>
  <block id="0a3c6c3b1b9418c792ec73b934ca8fdd" category="sidebar">配置存储后端</block>
  <block id="50399b7d6597b32502708277dd2be03c" category="sidebar">配置存储类和PVC</block>
  <block id="cb4d8d2a5476183e7996047b4bd621a5" category="summary">了解适用于Google Cloud NetApp卷的NFS和NFS后端配置选项并查看配置示例。</block>
  <block id="45868a9cc24b15883bb385cc21568b9c" category="doc">Google Cloud NetApp Volumes后端配置选项和示例</block>
  <block id="24efddb2a68726b53abbc21ed25602ec" category="cell">的值<block ref="d45aebe724c55b101f2ae8924ba3d486" prefix=" " category="inline-code"></block> 必须指定为"gosle-Cloud NetApp-volumes"。</block>
  <block id="486c28964f4c2b1cb7d4cf8476c6f43b" category="cell">(可选)存储后端的自定义名称</block>
  <block id="04075132f95c6ef305485ab113422c5a" category="cell">用于指定用于创建卷的存储池的可选参数。</block>
  <block id="1713a0b57aa7aa8811b66291bd6740ea" category="cell">存储池及其卷的服务级别。值为<block ref="897a779351421523cadbafccdce22efe" prefix=" " category="inline-code"></block>、、<block ref="c00f0c4675b91fb8b918e4079a0b1bac" prefix=" " category="inline-code"></block><block ref="a288195832f8717bca4671416014a464" prefix=" " category="inline-code"></block>或<block ref="287e9593819b2fcdf9945e7ccacd637d" prefix=" " category="inline-code"></block>。</block>
  <block id="c1a95f00cc65baba0b4226ef5a52eb6c" category="cell">用于GCNV卷的Google Cloud网络。</block>
  <block id="ed9bce6a4d879e7f479badb9932b75b3" category="cell">故障排除时要使用的调试标志。例如，<block ref="448bcae3131355f9b92b192b1057af2f" prefix=" " category="inline-code"></block>。除非您正在进行故障排除并需要详细的日志转储，否则请勿使用此功能。</block>
  <block id="95c5fc7684c0c685ae305908e8360de5" category="cell">新卷的导出规则。必须是IPv4地址任意组合的逗号分隔列表。</block>
  <block id="3731633acfd0b9fb847e03ce2fdab4fa" category="cell">""(接受默认值0)</block>
  <block id="f666bd4432d66c3d0a6c3eb68602a507" category="cell">新卷的UNIX权限(4个八进制数字)。</block>
  <block id="b0663450e547d90a59ef16fd10b49313" category="paragraph">当您刚刚开始使用Google Cloud NetApp卷并尝试操作时、此配置是理想的选择、但实际上、您很可能需要为您配置的卷提供额外的范围界定。</block>
  <block id="2d55ceabc505d58735d6f639a0ddee3c" category="example-title">使用StoragePools筛选器的配置</block>
  <block id="9f50e88dc1b2f50c32d6623a46186422" category="paragraph">此后端配置可在一个文件中定义多个虚拟池。虚拟池在一节中进行了定义<block ref="ddecebdea58b5f264d27f1f7909bab74" prefix=" " category="inline-code"></block> 。如果您有多个存储池支持不同的服务级别、而您希望在Kubbernetes中创建表示这些服务级别的存储类、则这些选项板非常有用。虚拟池标签用于区分池。例如、在以下示例中<block ref="c05f6c233521207f6fe311afef550c3c" prefix=" " category="inline-code"></block> 、标签和<block ref="f1d0ae63f2e948a9e43dcc60303d595d" prefix=" " category="inline-code"></block> 类型用于区分虚拟池。</block>
  <block id="88b8febb44310d1976318cdfbfc8e272" category="paragraph">此外、您还可以设置一些适用于所有虚拟池的默认值、并覆盖各个虚拟池的默认值。在以下示例中、<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block> 和<block ref="c72971f17465d2a32345bc872af62a34" prefix=" " category="inline-code"></block> 用作所有虚拟池的默认值。</block>
  <block id="6a34de146c5cb15d515a8eccfe1e159a" category="paragraph">有关详细信息，请参阅 <block ref="2485f0c91682fe52be2f7fb65e682d5e" category="inline-link-macro-rx"></block>。</block>
  <block id="aae18f7253cac406ae284f53b287a9df" category="paragraph">要验证是否已成功创建后端、请运行以下命令：</block>
  <block id="03b8a172613e4de074d79fb4f46074a3" category="paragraph">如果后端创建失败，则后端配置出现问题。您可以使用命令说明后端<block ref="229abe1e223382a9207e6c5818f53303" prefix=" " category="inline-code"></block> 、或者运行以下命令查看日志以确定原因：</block>
  <block id="c80946da495de259ca1ba66a90f669f1" category="paragraph">确定并更正配置文件的问题后、您可以删除后端并再次运行create命令。</block>
  <block id="7412fabe1fe110c48954fa7d913c7aa6" category="paragraph">下面是有关上述后端的基本<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block> 定义。</block>
  <block id="73edba1e6e192a3d47eeb049261cf706" category="paragraph">*使用字段的示例定义<block ref="4d859186a09b1da3597e5901157d9400" prefix=" " category="inline-code"></block> :*</block>
  <block id="131942def57ce0eceb784a70e3a3c6b7" category="inline-link-macro">虚拟池</block>
  <block id="21f282d336bd6884d8049de5c63672b5" category="paragraph">使用、<block ref="4d859186a09b1da3597e5901157d9400" prefix=" " category="inline-code"></block> 您可以为每个指定<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block> <block ref="6679d756882db6798c9460928c0b140b" category="inline-link-macro-rx"></block> 用于托管卷的。卷将在选定池中定义各个方面。</block>
  <block id="017c90fe97524fad37b16a935c4a6d93" category="paragraph">有关存储类的详细信息，请参见 <block ref="70514be1adf68f525abe0b1ddd1123f6" category="inline-link-macro-rx"></block>。</block>
  <block id="f9f2eb48a9034cb5dc809b4a8cfe0514" category="section-title">PVC定义示例</block>
  <block id="1fa71ec0db169cb1ef6cfabf7648910e" category="paragraph">要验证PVC是否已绑定、请运行以下命令：</block>
  <block id="42d7c2849e22a4d78da8b275f64f75aa" category="summary">在配置Google Cloud NetApp Volumes后端之前、您需要确保满足以下要求。</block>
  <block id="b50d4e4fb1b847d1270df87e42364fe0" category="doc">准备配置Google Cloud NetApp卷后端</block>
  <block id="0935df2153a18d9a4776751ebfb7cb82" category="section-title">NFS卷的前提条件</block>
  <block id="a03c3224ff98ca5b518f8a11ed9d6f72" category="paragraph">如果您是首次使用Google Cloud NetApp卷或在新位置使用、则需要进行一些初始配置才能设置Google Cloud NetApp卷和创建NFS卷。请参阅 <block ref="d2edeebd0b5ddcd8a293f6eb7960f37c" category="inline-link-macro-rx"></block>。</block>
  <block id="ec8b4b1603705e8f5deb17b1f83c5b04" category="paragraph">在配置Google Cloud NetApp卷后端之前、请确保您满足以下条件：</block>
  <block id="1215f8190533dfdf63d2224a6d88266f" category="inline-link-macro">Google Cloud NetApp卷</block>
  <block id="cbd1a08f0c7e9ece495b85acebbda95f" category="list-text">配置有Google Cloud NetApp卷服务的Google Cloud帐户。请参阅 <block ref="633097af004065de10009ea2f33900c4" category="inline-link-macro-rx"></block>。</block>
  <block id="d602f37c15ba943e502f28694eb5a2b1" category="inline-link-macro">确定项目</block>
  <block id="ecf1c0124555e123ac90e38128ef83e5" category="list-text">您的Google Cloud帐户的项目编号。请参阅 <block ref="64c0ff4c5d45f1d3f3d8ce4197eed1cc" category="inline-link-macro-rx"></block>。</block>
  <block id="aa22e5fd0429d1ecf78d5deedf0c6dc8" category="inline-link-macro">身份和访问管理角色和权限</block>
  <block id="ef2186bedd233e9b009e5d1764dc1e3c" category="inline-link-macro">存储池概述</block>
  <block id="33773afc759728866f9a57d82940a56c" category="list-text">存储池。请参阅 <block ref="d347dce2da907b926fcf6a02a7257712" category="inline-link-macro-rx"></block>。</block>
  <block id="dd2c158264290c91be79556252aca308" category="inline-link-macro">设置对Google Cloud NetApp卷的访问权限</block>
  <block id="7cef0ad261753740989fa192df2e19e9" category="paragraph">有关如何设置对Google Cloud NetApp卷的访问权限的详细信息，请参阅 <block ref="5e9b4ec852ec4a511a1370be58118d01" category="inline-link-macro-rx"></block>。</block>
  <block id="b73a4f3ea8538e5ef0b4078c119b3c8d" category="doc">配置Google Cloud NetApp卷后端</block>
  <block id="23fa813a6884f33dc0d2070ae5260e6a" category="section-title">Google Cloud NetApp卷驱动程序详细信息</block>
  <block id="5ab9649a1218ec1b35bfb38efbeaea76" category="cell"><block ref="94594b2ccbc8e0d220ad37504461650b" prefix="" category="inline-code"></block></block>
  <block id="74d08e13aea757b8172499f067668443" category="paragraph">可要求的最大卷大小。</block>
  <block id="f14a3ef36727dfbbea91c1d6b3fdbede" category="cell"><block ref="c8f83e727d4a4255a6485c24776e86bb" prefix="" category="inline-code"></block></block>
  <block id="33fefa32caf35cd4691465f3592a0539" category="cell">*<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block><block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>仅支持和驱动程序。*限制ONTAP ONTAP经济型和ONTAP经济型驱动程序中的FlexVol大小。</block>
  <block id="1b75c146ff0568d5fc11072b08cfe580" category="section-title">限制Trident创建的FlexVol的大小上限</block>
  <block id="913d5950907a31c9d3ea6cd0a3b6a524" category="paragraph">要配置用作ONTAP SAN经济型驱动程序和ONTAP NAS经济型驱动程序池的FlexVol的最大大小、请<block ref="c8f83e727d4a4255a6485c24776e86bb" prefix=" " category="inline-code"></block>在<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block>定义中使用参数。</block>
  <block id="d981d675ba14b9478a2c2da5c7df780b" category="cell">在LUS-SAN-Economy后端使用ONTAP时可要求的最大FlexVol大小。</block>
  <block id="64049136ec90cc479c7521e9b6e172eb" category="section-title">用于导入UKS卷的PVC配置</block>
  <block id="b49b86551096c421a3bc5d3b79eede84" category="paragraph">要动态导入LUKS卷、请将标注设置<block ref="36720d50814e4335401b2047257bfedf" prefix=" " category="inline-code"></block>为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>、并在PVC中包含启用了LUKS的存储类、如本示例所示。</block>
  <block id="eb80be396693610ba21c23b6b222bb73" category="paragraph">*升级Trident前的注意事项*</block>
  <block id="b100864b32a36993557470c9854e7e3a" category="list-text">如果仅使用了每个节点的igroup (在23.04及更高版本中推出)、则iSCSI自我修复功能将对SCSI总线中的所有设备启动SCSI重新检查。</block>
  <block id="284bb2f9d2596017aa72985df760fdb3" category="list-text">如果仅使用后端范围的igroup (自23.04起已弃用)、则iSCSI自行恢复功能将启动SCSI重新检查、以确定SCSI总线中的确切LUN ID。</block>
  <block id="0d6cf1de077f00140ee25c03f94e4805" category="list-text">如果混合使用了每个节点的igroub和后端范围的igroux、则iSCSI自我修复功能将对SCSI总线中的确切LUN ID启动SCSI重新检查。</block>
  <block id="472039bf3422ff2697dba6fc9fdd57d8" category="inline-link-macro">Trident支持生命周期</block>
  <block id="c45d9c1b397ff706a7a39c069930c677" category="inline-link">Trident 24.06</block>
  <block id="d0fd12656eeec63fe137c83181c17c0b" category="list-text"><block ref="d0fd12656eeec63fe137c83181c17c0b" category="inline-link-rx"></block></block>
  <block id="45d1e500370372fc7e76e110b5aff92d" category="inline-link">Trident 24.02</block>
  <block id="b735f50352c31f80267e7a6fc57ce804" category="list-text"><block ref="b735f50352c31f80267e7a6fc57ce804" category="inline-link-rx"></block></block>
  <block id="b4dfeb42b5c9816777494eeb7a772461" category="inline-link">Trident 23.10</block>
  <block id="55cad0455da7cf59434d9f8ff225c39b" category="list-text"><block ref="55cad0455da7cf59434d9f8ff225c39b" category="inline-link-rx"></block></block>
  <block id="8806d0d5f26e8a704b5d26c076c531bd" category="inline-link">Trident 23.07</block>
  <block id="9c74a4e8266dd7e50d12a159c32d6b10" category="list-text"><block ref="9c74a4e8266dd7e50d12a159c32d6b10" category="inline-link-rx"></block></block>
  <block id="3a4e6f76b26aa8878f5798aba052777c" category="inline-link">Trident 23.04</block>
  <block id="5bff8eb1dea519dd15a076031fa9f288" category="list-text"><block ref="5bff8eb1dea519dd15a076031fa9f288" category="inline-link-rx"></block></block>
  <block id="5382f4fbc3622ef143d9ddbe033351ab" category="inline-link">Trident 23.01</block>
  <block id="a9425b076f0cf301dc3a2d77e67816ca" category="list-text"><block ref="a9425b076f0cf301dc3a2d77e67816ca" category="inline-link-rx"></block></block>
  <block id="2e0d64f2a4b164112beaf0506070ad85" category="inline-link">Trident 22.10</block>
  <block id="e4c5c8d195d27f073639195f80da50a2" category="list-text"><block ref="e4c5c8d195d27f073639195f80da50a2" category="inline-link-rx"></block></block>
  <block id="42b023f127a09218e58c2611e2e34ce2" category="inline-link">Trident 22.07</block>
  <block id="7f7bdec4905ccd8d5a077969d0b77fd5" category="list-text"><block ref="7f7bdec4905ccd8d5a077969d0b77fd5" category="inline-link-rx"></block></block>
  <block id="c48696f9d5a5a881f7f2f08fd40ce424" category="summary">查找有关Trident安装、配置、升级和故障排除的常见问题解答。</block>
  <block id="d9aca3de44ae0828dd89d53663e6e4c8" category="section-title">Trident的发布频率如何？</block>
  <block id="d68e1eab03012de1cfe733b0e5a56e0a" category="paragraph">从24.02版开始、Trident每四个月发布一次：2月、6月和10月。</block>
  <block id="0f7d5cbd339fb02ad7b6d2052778b76c" category="section-title">Trident是否支持在特定版本的Kubnetes中发布的所有功能？</block>
  <block id="0393f24e9d90badf5195c5d59c8cab27" category="paragraph">Trident通常不支持Kubbernetes中的Alpha功能。在 Kubernetes 测试版之后的两个 Trident 版本中， Trident 可能支持测试版功能。</block>
  <block id="c05993771d3f4855968becac69b33f44" category="section-title">Trident是否依赖于其他NetApp产品才能正常运行？</block>
  <block id="206d5ff7336a8540d7a581ba45c5f83f" category="paragraph">Trident不依赖于其他NetApp软件产品、它可作为独立应用程序运行。但是，您应具有 NetApp 后端存储设备。</block>
  <block id="95bcf2f0f55536798451f058ec6640a9" category="section-title">如何获取完整的Trident配置详细信息？</block>
  <block id="67323698ba39f83a63a92758f63e8080" category="paragraph">使用<block ref="fed7609223e8cae53e079facb24f3426" prefix=" " category="inline-code"></block>命令可获取有关Trident配置的详细信息。</block>
  <block id="d29b114bc457427dcaea77aacc90fe8a" category="section-title">我能否获得有关Trident如何配置存储的指标？</block>
  <block id="61d2a329cdb6694d83cd5fbf5dc02f7a" category="paragraph">是。Prometheus端点、可用于收集有关Trident操作的信息、例如受管后端的数量、配置的卷数量、已用字节数等。您还可以使用<block ref="7a2477b8055ecdaa4bd473b0556bcb2a" category="inline-link-macro-rx"></block>进行监控和分析。</block>
  <block id="9bdccce3d8a96585da41b41f9a8a35ea" category="section-title">使用Trident作为CSI配置程序时、用户体验是否会发生变化？</block>
  <block id="09c8fb7656ad21dac196205f70094681" category="paragraph">否。就用户体验和功能而言、没有变化。使用的配置程序名称为<block ref="08044207e9f63bb0fd474dab347a776c" prefix=" " category="inline-code"></block>。如果要使用当前版本和未来版本提供的所有新功能、建议使用此方法安装Trident。</block>
  <block id="804e1070c55dcfc75cbde5cbcb86c3ba" category="section-title">在Kubbernetes集群上安装和使用Trident</block>
  <block id="df316d84e969d52af02710ec31df7055" category="section-title">Trident是否支持从私有注册表进行脱机安装？</block>
  <block id="5e05991e14fd9934a724121da40f5b98" category="inline-link-macro">了解Trident安装</block>
  <block id="d55b9ba8a4efff113044f9efe0557e0c" category="paragraph">可以、Trident可以脱机安装。请参阅 <block ref="ed3eb8298d3a91b1400b1be26865f5ec" category="inline-link-macro-rx"></block>。</block>
  <block id="75ac7954ef399713139c894c431e4116" category="section-title">是否可以远程安装Trident？</block>
  <block id="cab0813b2ef0c2dc3e0c17505f73a2f2" category="paragraph">是。Trident 18.10及更高版本支持从有权访问集群的任何计算机远程安装<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>。验证访问后<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>(例如、从远程计算机启动<block ref="1513e62b9eb7bbfc46c1be1a91a2ab76" prefix=" " category="inline-code"></block>命令进行验证)、请按照安装说明进行操作。</block>
  <block id="50434308d8b9fc89f708232cb5e9cf87" category="section-title">是否可以使用Trident配置高可用性？</block>
  <block id="d4a0a879bb58dfc0d2dd69374d278afe" category="paragraph">Trident作为KubeNet部署(复制集)安装、具有一个实例、因此内置了HA。您不应增加部署中的副本数量。如果安装了Trident的节点丢失或无法访问此Pod、Kubnetes会自动将此Pod重新部署到集群中运行状况良好的节点。Trident仅支持控制平台、因此、如果重新部署Trident、当前挂载的Pod不会受到影响。</block>
  <block id="b23db7e049824adf28d5d2d6839ee268" category="section-title">Trident是否需要访问Kube-system命名空间？</block>
  <block id="685a0ffaaa9ec81b2c31846cbf192282" category="paragraph">Trident从Kubednetes API服务器读取数据、以确定应用程序何时请求新的PVC、因此需要访问Kube-system。</block>
  <block id="0df447334013f5ccae9c82a00df9508a" category="section-title">Trident使用哪些角色和Privileges？</block>
  <block id="8b1b2eab4c453e6c69faf86b91b46898" category="section-title">是否可以在本地生成Trident用于安装的确切清单文件？</block>
  <block id="b633901fb93d2b4cb35254a9764dd626" category="paragraph">如果需要、您可以在本地生成和修改Trident用于安装的确切清单文件。请参阅 <block ref="ddc7df443077796093efdaf5a64d03cd" category="inline-link-macro-rx"></block>。</block>
  <block id="176cc68bd86878bb1bde4c3e72b4c315" category="section-title">对于两个单独的Kubnetes集群的两个单独的Trident实例、我是否可以共享同一个ONTAP后端SVM？</block>
  <block id="55c5d3092c2cf2c38eb0a708eefb8486" category="section-title">是否可以在存储Linux (以前称为CoreTM OS)下安装Trident？</block>
  <block id="ed71f481574b61f58ec3289a77e224fa" category="paragraph">Trident只是一个Kubbernetes Pod、可以安装在运行Kubbernetes的任何位置。</block>
  <block id="42fb91822adc98aa7764157cc987363a" category="section-title">是否可以将Trident与NetApp Cloud Volumes ONTAP结合使用？</block>
  <block id="c8e65f25ae4e876dc9b834240dd90ae1" category="paragraph">是的、Trident在AWS、Google Cloud和Azure上受支持。</block>
  <block id="563c8f675c158ed1e8fb653c2a5b0d16" category="section-title">Trident是否支持Cloud Volumes服务？</block>
  <block id="2d0bdf474b915de478abc990596c76bd" category="paragraph">是的、Trident支持Azure中的Azure NetApp Files服务以及GCP中的Cloud Volumes Service。</block>
  <block id="adb6af04aac45867d68bb2c3bc1e7b0d" category="section-title">NetApp是否支持Trident？</block>
  <block id="2dcb58c8d0e9bfa26fd8a13a709eed09" category="paragraph">尽管Trident是开源的、并且是免费提供的、但只要您的NetApp后端受支持、NetApp就完全支持它。</block>
  <block id="42bfc6e3acd67192d42135138102a1de" category="inline-link">Trident Github</block>
  <block id="c2146fea25aea76bae1b5853f60a2f87" category="paragraph">创建问题<block ref="47273b71915582ec6db59ad21099cfb9" category="inline-link-rx"></block>并在问题的主题和说明中提及*RFE*。</block>
  <block id="f976373ae689e994b60c082fe0210016" category="paragraph">在上创建问题<block ref="47273b71915582ec6db59ad21099cfb9" category="inline-link-rx"></block>。请务必包含与问题描述相关的所有必要信息和日志。</block>
  <block id="e3c42f7edef4d44b3a12f0876d080b65" category="section-title">如果我对Trident有快速问题需要澄清、会发生什么情况？是否有社区或论坛？</block>
  <block id="5249e7d2220ef48adc4e11f3ae5e102a" category="paragraph">如果您有任何疑问、问题或请求、请通过我们的Trident或GitHub与我们联系<block ref="6130664377fa14615bb1abd5257e9714" category="inline-link-macro-rx"></block>。</block>
  <block id="85fb3cc3c008776a14e8adea3419b79d" category="section-title">我的存储系统密码已更改、Trident不再工作、如何恢复？</block>
  <block id="590f1c54e9cee50de3f69ae3604e432e" category="section-title">Trident找不到我的Kubbernetes节点。如何修复此问题？</block>
  <block id="b114148f5ef97af6ffb82c1edfaa1775" category="paragraph">Trident找不到Kubnetes节点的可能情形有两种。这可能是因为 Kubernetes 中的网络问题描述或 DNS 问题描述。在每个 Kubernetes 节点上运行的 Trident 节点取消设置必须能够与 Trident 控制器进行通信，以便向 Trident 注册该节点。如果在安装Trident后发生网络连接更改、则只有在添加到集群中的新Kubnetes节点上才会遇到此问题。</block>
  <block id="c2147118d3a3e64452475171765d47d0" category="section-title">升级Trident</block>
  <block id="aa11aafa4155b6c4a3e62b5b9c8abc7b" category="paragraph">NetApp支持将Trident从一个主要版本升级到下一个即时主要版本。您可以从 18.xx 升级到 19.xx ，从 19.xx 升级到 20.xx 等。在生产部署之前，您应在实验室中测试升级。</block>
  <block id="e651aace307e5b2d6047fa19dd9ebc49" category="inline-link-macro">卸载Trident</block>
  <block id="c8d8623e1862e33460131e0b358e25c4" category="paragraph">如果您需要修复在升级、依赖关系问题或升级失败或不完整后发现的错误、则应<block ref="e618ba4d3d6ecf34e3de22934d88cfd8" category="inline-link-macro-rx"></block>按照该版本的特定说明重新安装早期版本。这是降级到早期版本的唯一建议方法。</block>
  <block id="bdee9022b73039d7d36eb214d473b6a5" category="list-text">ONTAP SAN：不为iSCSI指定。Trident使用<block ref="2de2f329c45219df280af5a70ed7a17c" category="inline-link-macro-rx"></block>发现建立多路径会话所需的iCI LUN。如果明确定义、则会生成警告<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>。有关详细信息、请参见 <block ref="823b6e1f172888081aece7b5cdeb0e03" category="inline-link-macro-rx"></block> 。</block>
  <block id="931fb9ef9e2f0b2e60b412c93e32bdb2" category="section-title">Trident是否可以为ONTAP后端配置CHAP？</block>
  <block id="6a7447005192022403df540c4a76b8df" category="paragraph">是。Trident支持对ONTAP后端使用双向CHAP。这需要在后端配置中进行设置<block ref="68978ccf4ed83900c8dd27558ca5ec18" prefix=" " category="inline-code"></block>。</block>
  <block id="e04360e9c1c0a231ee50fb6bc2440ab0" category="section-title">如何使用Trident管理导出策略？</block>
  <block id="0f719cc4fb105f34258976d892e8bfe9" category="paragraph">从20.04版开始、Trident可以动态创建和管理导出策略。这样，存储管理员便可在其后端配置中提供一个或多个 CIDR 块，并使 Trident 将属于这些范围的节点 IP 添加到其创建的导出策略中。通过这种方式、Trident会自动管理在给定CIDR中具有IP的节点的规则添加和删除。</block>
  <block id="d9e938c59af9d6ebf3b10c2ba625470e" category="paragraph">Trident支持为以下项定义IPv6地址：</block>
  <block id="c92ee98f27fea35d4b40d8e58cff3e23" category="paragraph">必须使用标志(对于<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>安装)、(对于Trident operator)或(对于<block ref="b63589bf34442180f04a6b46488afa6d" prefix=" " category="inline-code"></block>Helm安装)安装Trident<block ref="4a4ef9f92e69acc000120379678aadcf" prefix=" " category="inline-code"></block>、<block ref="fdb7cb8f657426e7c409bfd6d1a36ce4" prefix=" " category="inline-code"></block>才能使其在IPv6上运行。</block>
  <block id="b0ebe39ab16d0aea1148ebc2abc3e6d7" category="section-title">是否可以在Trident中为Kubnetes创建多个后端？</block>
  <block id="9d813dd9dc4f8a97f4735e4e7780283c" category="paragraph">Trident可以同时支持多个后端、可以使用相同的驱动程序、也可以使用不同的驱动程序。</block>
  <block id="dc7c8edffb370f5f952a2787e0381ad6" category="section-title">Trident如何存储后端凭据？</block>
  <block id="3b5102f815723b1b94a1969ac254470a" category="paragraph">Trident将后端凭据存储为Kubnetes密码。</block>
  <block id="c68b08bc6f1bd9bc3f8b4d3e4e81ca78" category="section-title">Trident如何选择特定后端？</block>
  <block id="1facd0eb6221a85a854aa93123529773" category="section-title">如何确保Trident不会从特定后端进行配置？</block>
  <block id="8fd7e30f04618e679c684df3dd0bebeb" category="paragraph"><block ref="7df974d787ead594df017a11672f2f0e" prefix=" " category="inline-code"></block>参数用于筛选Trident用于配置的池集、并将删除所有匹配的池。</block>
  <block id="64eb982f45f5cfa602f8a3e7d69f000d" category="section-title">如果有多个同类型的后端、Trident如何选择要使用的后端？</block>
  <block id="c5864ef434aa44689b2af37a1e9af5c7" category="paragraph">如果有多个已配置的相同类型的后端，Trident将根据和<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>中的参数选择适当的后端<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>。例如，如果有多个ONTAP－NAS驱动程序后端，则Trident会尝试匹配和<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>中的参数，<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>并组合和匹配可满足和<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>中所列要求的后端<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>。如果有多个后端与请求匹配、则Trident会随机从其中一个后端中进行选择。</block>
  <block id="d458942a0a2872de7232f879c70d5c72" category="section-title">Trident是否支持使用Element或SolidFire的双向CHAP？</block>
  <block id="c92811de6c03f5ad483962308676ecf1" category="section-title">Trident如何在ONTAP卷上部署qtrees？一个卷可以部署多少个 qtree ？</block>
  <block id="e516c194a6ef04e00986e6105285f3a6" category="paragraph">您可以通过在后端定义文件中设置参数来对Trident配置的卷设置Unix权限。</block>
  <block id="389f296dbf77d0f86dfe8a06d526c127" category="paragraph">默认情况下、Trident不会在Kubbernetes中将挂载选项设置为任何值。要在Kubnetes存储类中指定挂载选项，请按照给定的示例进行操作<block ref="29e04d8356a523f6fc836193630ad63e" category="inline-link-macro-rx"></block>。</block>
  <block id="99c8f2d04c19fdc0a232b7482cfee080" category="section-title">如何使用ONTAP通过Trident设置卷加密？</block>
  <block id="73b2a012b43089e1665c476788027e1c" category="inline-link-macro">Trident如何与NVE和NAE配合使用</block>
  <block id="cbf898bcb5d9e5595fd3bc81ec6e29ad" category="paragraph">您可以使用后端定义文件中的加密参数在 Trident 配置的卷上设置加密。有关详细信息、请参见：<block ref="419c27d13476c7b2e51e83cf6c88459f" category="inline-link-macro-rx"></block></block>
  <block id="ec2427ac714a740c73f10dfde2363075" category="section-title">通过Trident为ONTAP实施QoS的最佳方式是什么？</block>
  <block id="540b44f12eb5cca80bd7e9128aeede6c" category="section-title">如何通过Trident指定精简配置或厚配置？</block>
  <block id="37a1da11b0f4b3ebef0df195d2fbccd5" category="section-title">是否可以增加Trident创建的NFS PVC的大小？</block>
  <block id="e99a58cb2fd51c2db5c9598c04a5f53c" category="paragraph">是。您可以扩展由Trident创建的PVC。请注意，卷自动增长是一项 ONTAP 功能，不适用于 Trident 。</block>
  <block id="c15d8f156ba84321c880b1bbe78dc0c7" category="paragraph">只要 NetApp 存储具有容量， Kubernetes 存储资源配额就应起作用。如果NetApp存储因容量不足而无法支持Kubbernetes配额设置、则Trident会尝试配置、但会出错。</block>
  <block id="08ec89166861e10bdf4e2bf3bcb7a150" category="section-title">是否可以使用Trident创建卷快照？</block>
  <block id="64f5059234f21b014e1c442be4f03052" category="paragraph">是。Trident支持按需创建卷快照以及从快照创建持久卷。要从快照创建PV,请确保<block ref="e7b29a25284a6f582881023fdc0cbe93" prefix=" " category="inline-code"></block>已启用功能门。</block>
  <block id="669e09edc60383401e0adf3ce0cefcf3" category="section-title">哪些驱动程序支持Trident卷快照？</block>
  <block id="54b8b99690e4f103a6d2f9967cadcd72" category="section-title">如何使用ONTAP为Trident配置的卷创建快照备份？</block>
  <block id="3d68d8607ffd54f10e7dd693bb2b8a16" category="section-title">是否可以为通过Trident配置的卷设置快照预留百分比？</block>
  <block id="423b8287d49f26ac095593b58d3d9e69" category="paragraph">可以、您可以通过在后端定义文件中设置属性来预留特定百分比的磁盘空间、用于通过Trident存储Snapshot副本<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block>。如果您已在后端定义文件中配置<block ref="0a236e7685e50a59df980d0a30929d6c" prefix=" " category="inline-code"></block>和<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block>、则会根据后端文件中提及的百分比设置快照预留百分比<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block>。如果未提及此<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block>百分比数、则默认情况下、ONTAP会将快照预留百分比设置为5。如果此<block ref="0a236e7685e50a59df980d0a30929d6c" prefix=" " category="inline-code"></block>选项设置为none、则快照预留百分比将设置为0。</block>
  <block id="4bfa28359ad130e5906ee7d785f1b314" category="section-title">是否可以通过Trident为卷设置SnapMirror？</block>
  <block id="567994f58882dceaeab9400ad2bdf7e2" category="paragraph">NetApp 以多种方式为 Trident 提供支持。全天候提供广泛的免费自助支持选项、例如知识库(KB)文章和不和渠道。</block>
  <block id="925ebc19538c47a22c7fcbf3d4f16838" category="paragraph">Trident根据您的版本提供三个支持级别。请参阅 <block ref="1b35655e5fe9e8bdc0fd2a18d7e5a06c" category="inline-link-macro-rx"></block>。</block>
  <block id="bcf42b210ffb66f788559ec05bd3978c" category="list-text">Trident提供自发布之日起12个月内的全面支持。</block>
  <block id="c4672ccc07d08b01842ba7bff5ab9012" category="list-text">Trident在发布日期起的13到24个月内提供有限支持。</block>
  <block id="c6fc0d89ce850093b5d2e987955ba870" category="list-text">Trident文档自发布之日起的25到36个月内可用。</block>
  <block id="e9c4cf1c3d2fd7e6c0a13bfe44d8e785" category="inline-link-macro">24.10</block>
  <block id="17ab7ccda1012696aabc01e478bd7612" category="cell">2027年10月</block>
  <block id="1e441e2a6ea2842643d9b8f88e32aebf" category="paragraph"><block ref="1e441e2a6ea2842643d9b8f88e32aebf" category="inline-link-macro-rx"></block></block>
  <block id="d2196853cebe173567df4b864e4816f7" category="paragraph"><block ref="d2196853cebe173567df4b864e4816f7" category="inline-link-macro-rx"></block></block>
  <block id="62c93f738b926db77daa59d585fbfa48" category="paragraph">有关故障排除文章的完整列表，请参阅<block ref="57f5c759ada931c6a2051314ca6ee99e" category="inline-link-rx"></block>。</block>
  <block id="9cc21385e3a5bbf0e140948125e39e4c" category="paragraph">我们的上有一个由容器用户(包括Trident开发人员)组成的活跃公共社区<block ref="6130664377fa14615bb1abd5257e9714" category="inline-link-macro-rx"></block>。这是一个很好的地方，可以提出有关项目的一般问题，并与志同道合的同行讨论相关主题。</block>
  <block id="b27fcb3adc5d56564559e3f24a9659c8" category="paragraph">要获得有关Trident的帮助，请使用创建支持包<block ref="1d41e2024c69110ad6054ffc785ca8e0" prefix=" " category="inline-code"></block>并将其发送到<block ref="da34ca64df3f236a423516102d4096c2" prefix=" " category="inline-code"></block>。</block>
  <block id="40d95260a6bcacc40a23df4576b97ec8" category="inline-link-macro">Trident博客</block>
  <block id="e476cbfc1ce1aee033e17376d6942cf3" category="paragraph">您可以在每个版本的notices文件中查看适用于Trident的NetApp软件中使用的第三方版权和许可证，网址为<block ref="4a3c8c5a408c6db1c44c04391a8a0a2f" category="inline-link-rx"></block>。</block>
  <block id="52eb48d8202a6d184f86997bcbd937cf" category="summary">Trident中的配置分为两个主要阶段。第一阶段会将存储类与一组合适的后端存储池相关联，并在配置之前进行必要的准备。第二阶段包括卷创建本身、需要从与待定卷的存储类关联的存储池中选择一个存储池。</block>
  <block id="90bec6679868d1d43c3f2f5d9905165f" category="paragraph">将后端存储池与存储类相关联取决于存储类请求的属性及其<block ref="c614017642b6cfd9e6a25c7df122d917" prefix=" " category="inline-code"></block>、<block ref="145d1b89a9f9ed8bdc16d1f7a814cace" prefix=" " category="inline-code"></block>和<block ref="7df974d787ead594df017a11672f2f0e" prefix=" " category="inline-code"></block>列表。创建存储类时， Trident 会将其每个后端提供的属性和池与存储类请求的属性和池进行比较。如果某个存储池的属性和名称与请求的所有属性和池名称匹配、则Trident会将该存储池添加到该存储类的一组合适存储池中。此外、Trident还会将列表中列出的所有存储池添加到该池<block ref="145d1b89a9f9ed8bdc16d1f7a814cace" prefix=" " category="inline-code"></block>集中、即使其属性不满足存储类请求的全部或任何属性也是如此。您应使用此<block ref="7df974d787ead594df017a11672f2f0e" prefix=" " category="inline-code"></block>列表覆盖存储池并将其从存储类中删除。每次添加新后端时、Trident都会执行类似的过程、检查其存储池是否满足现有存储类的要求、并删除标记为已排除的任何。</block>
  <block id="252902d6f7f664b44722075296d3ce49" category="paragraph">然后、Trident使用存储类和存储池之间的关联来确定在何处配置卷。创建卷时、Trident会首先获取该卷的存储类的存储池集、如果为该卷指定协议、则Trident会删除无法提供所请求协议的存储池(例如、NetApp HCI或SolidFire后端无法提供基于文件的卷、而ONTAP后端无法提供基于块的卷)。Trident会随机排列此结果集的顺序、以便于均匀分布卷、然后在其中进行迭代、尝试依次在每个存储池上配置卷。如果在一个上成功，则它会成功返回，并记录在此过程中遇到的任何故障。只有当*无法在*所有*上配置可供请求的存储类和协议使用的存储池时、Trident才会返回故障。</block>
  <block id="6cba37a64b3872e40e12212479ca8ece" category="summary">详细了解Trident如何为其驱动程序创建卷快照。</block>
  <block id="e5200dca1b3eb1315befdc6f874d5143" category="list-text">使用和<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>驱动程序时<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>、ONTAP快照是FlexVol的时间点副本、会占用FlexVol本身的空间。这样，在创建 / 计划快照时，卷中的可写空间量会随着时间的推移而减少。解决此问题的一个简单方法是，通过 Kubernetes 调整大小来增大卷的大小。另一个选项是删除不再需要的快照。删除通过KubeNet创建的卷快照后、Trident将删除关联的ONTAP快照。也可以删除未通过 Kubernetes 创建的 ONTAP 快照。</block>
  <block id="9f049d4909391d7f977c1fc9b8c6db8f" category="paragraph">通过Trident、您可以使用卷快照创建新的PV.通过对支持的 ONTAP 和 CVS 后端使用 FlexClone 技术，可以从这些快照创建 PV 。从快照创建PV时、备份卷是快照父卷的FlexClone。此<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>驱动程序使用Element软件卷克隆从快照创建PV.此时，它将从 Element 快照创建一个克隆。</block>
  <block id="962da67bee9575fc006f5d69c948f63a" category="summary">虚拟池在Trident的存储后端和KubeNet的StorageCluster之间提供了一个抽象层。管理员可以通过这些协议以一种通用的，与后端无关的方式定义各个方面，例如每个后端的位置，性能和保护，而不会使 StorageClass 指定要用于满足所需条件的物理后端，后端池或后端类型。</block>
  <block id="6dc68c3b2f9d6c276fc86090da3220f5" category="paragraph">虚拟池在Trident存储后端和Kubnetes之间提供了一个抽象层<block ref="f652904c3bfb48fb25a0a75f485f0ff6" prefix=" " category="inline-code"></block>。管理员可以通过它们以一种不受后端限制的通用方式定义各个方面、例如每个后端的位置、性能和保护、而无需<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>指定要用于满足所需条件的物理后端、后端池或后端类型。</block>
  <block id="63e606feac51f51c118b9ea9da3584dc" category="paragraph">存储管理员可以在JSON或YAML定义文件中的任何Trident后端定义虚拟池。</block>
  <block id="acd6bcd484ba971a72536c22c06f04e2" category="summary">详细了解Trident如何使用卷访问组。</block>
  <block id="6a460593bdfb0144320bef6fdd1b2472" category="paragraph">详细了解Trident如何使用<block ref="783dd6ea9e0b09c84db9ccd072a61c55" category="inline-link-rx"></block>。</block>
  <block id="1ce858ea946af658f2db231318e1c74e" category="admonition">如果使用的是 CHAP ，请忽略此部分，建议使用此部分来简化管理并避免下面所述的扩展限制。此外、如果您在CSI模式下使用Trident、则可以忽略此部分。作为增强型CSI配置程序安装时、Trident使用CHAP。</block>
  <block id="547d4fe433ab9ed2223dfe9c48379548" category="paragraph">Trident可以使用卷访问组来控制对其配置的卷的访问。如果禁用了CHAP、则它会查找名为的访问组<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block>、除非您在配置中指定一个或多个访问组ID。</block>
  <block id="33a94edb76f0383c1d244a8698373b50" category="paragraph">虽然Trident会将新卷与配置的访问组关联起来、但不会自行创建或管理访问组。在将存储后端添加到Trident之前、这些访问组必须存在、并且它们必须包含可能会挂载由该后端配置的卷的Kubbernetes集群中每个节点的iSCSI IQN。在大多数安装中，包括集群中的每个工作节点。</block>
  <block id="6049f954e4284100050b26e9f3fb772e" category="list-text">如果您正在使用建议的托管插件方法(即使用命令)运行Trident、请按如下所示查看这些插件<block ref="fb3421df1496105acc8a14808359550b" prefix=" " category="inline-code"></block>：</block>
  <block id="e391df7d288176b307da8db0c4d91ae5" category="summary">适用于Docker的Trident可与适用于NetApp存储平台的Docker生态系统直接集成。它支持从存储平台到 Docker 主机的存储资源配置和管理，并提供一个框架，用于在未来添加其他平台。</block>
  <block id="e0a3531ef314a005745a9fea19b5ba09" category="doc">部署Trident</block>
  <block id="70f45f0faadd8edb223d0fdeb6668679" category="paragraph">多个Trident实例可以同时在同一主机上运行。这样可以同时连接到多个存储系统和存储类型，并能够自定义用于 Docker 卷的存储。</block>
  <block id="7da919c969cc2b18d98105fe90684df8" category="paragraph">请参见<block ref="18d5551396fb2ce2e009cfdb709e4875" category="inline-link-macro-rx"></block>。确保满足这些前提条件后、即可部署Trident。</block>
  <block id="58391bc76e8c1c5635a11134b3e4083d" category="admonition">如果在传统守护进程方法中使用的是Trident Docker 1.3/17.03之前的版本、请确保先停止Trident进程并重新启动Docker守护进程、然后再使用托管插件方法。</block>
  <block id="8554af307cedea04e0e39362f35175f4" category="list-text">使用受管插件系统启动Trident。请替换<block ref="3d689bd3819ead35ed794427bd12f459" prefix=" " category="inline-code"></block>为您正在使用的插件版本(xxx.xx.x)。</block>
  <block id="8020e7c6d37db1ac7100b3b117f46cfd" category="list-text">开始使用Trident使用已配置系统中的存储。</block>
  <block id="b48e6203239c93859800f96924a39ed7" category="section-title">在系统启动时启动Trident</block>
  <block id="a5a6bc232526faaa8ab11bd5f46a069c" category="summary">查找有关将Trident与Docker结合使用时的已知问题的信息。</block>
  <block id="44110fddc560d626db733ac60924ea7c" category="paragraph">查找有关将Trident与Docker结合使用时的已知问题和限制的信息。</block>
  <block id="442b5623691118072cf6342e3614f21a" category="section-title">Docker Swarm的某些行为会使Trident无法为每个存储和驱动程序组合提供支持。</block>
  <block id="738890a616b36648aef3afc3dbd99a29" category="list-text">卷插件(包括Trident)必须在Swarm集群中的每个节点上单独运行。由于ONTAP的工作方式以及和<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>驱动程序的工作方式<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>、它们是唯一能够在这些限制下运行的驱动程序。</block>
  <block id="8e846679c3471e522caeeaf12adf2232" category="summary">如果希望同时提供多个存储配置，则需要多个 Trident 实例。多个实例的关键在于，在主机上实例化 Trident 时，使用 -alias 选项和容器化插件或 -volume-driver 选项为其提供不同的名称。</block>
  <block id="2af81ac5264569558ae512fd78aaeb99" category="doc">管理多个Trident实例</block>
  <block id="6d9d4f707717522af7673ba035a40845" category="summary">您必须先在主机上安装和配置必要的协议前提条件、然后才能部署Trident。</block>
  <block id="ab2ce125ebcf04e3858934dafe06462f" category="summary">请参见适用于您的Trident配置的配置选项。</block>
  <block id="048751d5dafc60f01ac58c7abebe0fb4" category="paragraph">无论使用哪个存储平台、这些配置选项都适用于所有Trident配置。</block>
  <block id="24794cfca66d1eed7c8defc480365bf0" category="paragraph">要配置的聚合（可选；如果设置了聚合，则必须将其分配给 SVM ）。对于<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>驱动程序、此选项将被忽略。分配给SVM的所有聚合均用于配置FlexGroup卷。</block>
  <block id="5cbbc03b20d402cc5f3688219dc927db" category="paragraph">Trident会将每个节点创建和管理<block ref="58f3779afe9da9ffdc085dc3064306f7" prefix=" " category="inline-code"></block>为<block ref="e77a1bd34ff5793aca292b38d23bc2c9" prefix=" " category="inline-code"></block>。</block>
  <block id="98c76e4bb2a33d9fd5985c31833d545b" category="paragraph">如果在后端启用了NAE、则在Trident中配置的任何卷都将启用NAE。</block>
  <block id="dd7e96ca2da30b4de0cef5d5d0d67883" category="paragraph">有关详细信息，请参阅：<block ref="5113a2fb1642ecd23870711ba25c4ad7" category="inline-link-macro-rx"></block>。</block>
  <block id="775acc7033e41c0ec1b40c64643c6339" category="paragraph">用于访问目录的NAS选项<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block>。</block>
  <block id="9baf39c0a00f0d9f174a9671e5cefbab" category="paragraph">对于NFSv4、为"TRUE"；对于NFSv3、为"false"</block>
  <block id="e1232df03027aec38979e9ee0c9b350c" category="paragraph">选择<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>一个驱动程序来提高单个卷的并行处理能力、该卷可能会增长到包含数十亿个文件的PB级范围。FlexGroup 的一些理想用例包括 AI/ML/DL ，大数据和分析，软件构建，流式传输，文件存储库等。配置FlexGroup卷时、Trident会使用分配给SVM的所有聚合。Trident 中的 FlexGroup 支持还需要注意以下事项：</block>
  <block id="90bce6b2a4ca618777f172f6d51e69f1" category="list-text">FlexGroup卷不支持克隆。</block>
  <block id="971d29a2392e004ddd4263282b307e0c" category="inline-link">《NetApp FlexGroup卷最佳实践和实施指南》</block>
  <block id="1534742dd977c66a11d77eb23f10a5ab" category="section-title">Trident的自定义ONTAP角色</block>
  <block id="c1781ac6bfd240f903c26ce4164a5d30" category="paragraph">您可以创建Privileges最低的ONTAP集群角色、这样就不必使用ONTAP管理员角色在Trident中执行操作。如果在Trident后端配置中包含用户名、则Trident将使用您创建的ONTAP集群角色来执行操作。</block>
  <block id="6f3cfcc010b2a22b26b8059d261fac87" category="inline-link-macro">Trident自定义角色生成器</block>
  <block id="c466d2f2e197b9c922cb025297903d0c" category="paragraph">有关创建Trident自定义角色的详细信息、请参见<block ref="4eb6d8d47ddb4f7930e07a2c9166ea85" category="inline-link-macro-rx"></block>。</block>
  <block id="e2862bb379be91d6c367e3ce170d88f7" category="open-title">使用ONTAP命令行界面</block>
  <block id="13b3544c4f5df79cbf834a2ae8ec0d87" category="list-text">使用以下命令创建新角色：</block>
  <block id="2c7e6d2877f857f126c24c7742e84098" category="paragraph"><block ref="c33f6523b710a03a2fd5d3e78562afa6" prefix="" category="inline-code"></block></block>
  <block id="baf63376850e35e5b35be659d0ef2894" category="list-text">为Trident用户创建用户名：</block>
  <block id="1af6536f50b7c77854633155c6ae923a" category="paragraph"><block ref="496d78c32dd2b2752181d6346f8b0aeb" prefix="" category="inline-code"></block></block>
  <block id="dfeb1cb6cf625159ce3e04d467f8ec3f" category="list-text">将角色映射到用户：</block>
  <block id="80812a5ac42a9862b7d20ef498a269ce" category="paragraph"><block ref="5eb0d996baab37017dab0c8a2a171589" prefix="" category="inline-code"></block></block>
  <block id="3ceac40325b3a50cc62cce2df9efb8ae" category="open-title">使用 System Manager</block>
  <block id="b36ba0290d144b7b7cf516c0b9f70063" category="paragraph">在ONTAP系统管理器中执行以下步骤：</block>
  <block id="88ec54a18605240b35f6b1c72d27ffb6" category="list-text">*创建自定义角色*：</block>
  <block id="70af366c70c2f42b90ebe57600895fa4" category="list-text">要在集群级别创建自定义角色，请选择*Cluster &gt; Settings*。</block>
  <block id="c981775dff9d5b385dd83a577d5a47b5" category="paragraph">(或)要在SVM级别创建自定义角色、请选择*存储&gt; Storage VM<block ref="6913fa50f9906263ba0aa9cbfc60f855" prefix=" " category="inline-code"></block> &gt;&gt;设置&gt;用户和角色*。</block>
  <block id="0d47f26dcf60e81c5a6649ae4ded4563" category="list-text">选择*用户和角色*旁边的箭头图标(*-&gt;*)。</block>
  <block id="abf2a7962f2af308e67cf04c04d67351" category="list-text">在*角色*下选择*+添加*。</block>
  <block id="0607c670bf97cc18aea662bb4a8b1897" category="list-text">定义角色的规则，然后单击*Save*。</block>
  <block id="8c112f6dd4899ec2bde450ad96ea3854" category="list-text">*将角色映射到Trident user*：+在*Users and Roles*页面上执行以下步骤：</block>
  <block id="a0d362400ef1998e3199f1a2a4e851a0" category="list-text">在*用户*下选择添加图标*+*。</block>
  <block id="d81179b522f733916296275ca934cec0" category="list-text">选择所需的用户名，然后在下拉菜单中为*rouser*选择一个角色。</block>
  <block id="4cc186df234138a57b2e8c5d8e5f7f8d" category="list-text">单击 * 保存 * 。</block>
  <block id="63a7ae2ee855741b03454ffca32a6548" category="paragraph">有关详细信息、请参见以下页面：</block>
  <block id="5f20deacb4e1a680e1507ac2f9038f3d" category="inline-link-macro">用于管理ONTAP的自定义角色</block>
  <block id="5f318245652e5c97dfa5340e400f38d4" category="inline-link-macro">定义自定义角色</block>
  <block id="6bfa5cadeded7f55ece7a366fff5008f" category="list-text"><block ref="612b00166c7c7ac093e9d589e794c9ab" category="inline-link-macro-rx"></block>或<block ref="42415b53f4c69ae3cfdecaffa64f1802" category="inline-link-macro-rx"></block></block>
  <block id="61d21be565a36251bbca59c0ffb7571d" category="inline-link-macro">使用角色和用户</block>
  <block id="c92674673011f8a8c6fc62a43d907f3c" category="list-text"><block ref="c92674673011f8a8c6fc62a43d907f3c" category="inline-link-macro-rx"></block></block>
  <block id="a1dbba31317214ceff74a44fe41d31ee" category="summary">您可以安全地升级适用于Docker的Trident、而不会对正在使用的卷产生任何影响。在升级过程中、有一段短暂的时间、<block ref="8609cd03fd6628c6bcc999242fa9f3aa" prefix=" " category="inline-code"></block>指向插件的命令将不会成功、应用程序将无法挂载卷、直到插件重新运行为止。在大多数情况下，这只需要几秒钟。</block>
  <block id="62171888e44548522bb83b960a55d872" category="paragraph">执行以下步骤升级适用于Docker的Trident。</block>
  <block id="39ebc56f061889873fccc1784c6638f7" category="admonition">Trident 18.01版取代了nDVP。您应直接从映像升级<block ref="86e913ca68bd85fc4edc0bd4588cdf55" prefix=" " category="inline-code"></block>到<block ref="c0324ebb59395a35956b35c5d0c7b285" prefix=" " category="inline-code"></block>映像。</block>
  <block id="ee0630d22b9d452ae7bb9de29a466b86" category="admonition">如果要从旧版本Trident (20.10之前的版本)升级到Trident 20.10或更高版本、则可能会遇到错误。有关详细信息，请参阅 <block ref="6d21ff1c2708107ac3f4ed1a6e27b449" category="inline-link-macro-rx"></block>。如果遇到此错误、则应先禁用此插件、然后删除此插件、然后再通过传递额外的配置参数来安装所需的Trident版本：<block ref="5be09dfb82e46451bc4cc62d83a8dafe" prefix=" " category="inline-code"></block></block>
  <block id="b8b22011179e05bc575b579038285d28" category="paragraph">执行以下步骤卸载适用于Docker的Trident。</block>
  <block id="265a503bda2fd70f2fd9a6cf2d876c27" category="paragraph">如果未指定快照预留且快照策略为<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block>，则Trident将使用0%的快照预留。</block>
  <block id="e5dfa6bb65c32f9e92c36163229be455" category="summary">要创建卷、请使用标准<block ref="8609cd03fd6628c6bcc999242fa9f3aa" prefix=" " category="inline-code"></block>命令以及根据需要指定的Trident驱动程序名称。</block>
  <block id="56143904c89c4a03d66e1cd15cc7d399" category="paragraph">您可以使用标准命令以及根据需要指定的Trident驱动程序名称轻松创建、克隆和删除卷<block ref="8609cd03fd6628c6bcc999242fa9f3aa" prefix=" " category="inline-code"></block>。</block>
  <block id="b09a5613f6e78efae1c0ac67f2289c08" category="list-text">创建具有特定Trident实例的卷：</block>
  <block id="3fb1a139a17d8521fe406180d6d6fd59" category="paragraph">使用<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>、、<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block><block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>和<block ref="a3e1af20cc594d726b1beb3d184dcf26" prefix=" " category="inline-code"></block>时，Trident可以克隆卷。使用或<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>驱动程序时<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>、不支持克隆。从现有卷创建新卷将创建新快照。</block>
  <block id="97b3aeb8d6066d1decf96518ded15d8e" category="paragraph">如果容器没有分区、并且Trident支持其文件系统、则您可以使用Trident *仅*通过容器访问外部创建的块设备(或其克隆)(例如、<block ref="40d1d2ce03569076bd0dc1e0ff90aa4c" prefix=" " category="inline-code"></block>无法通过Trident访问格式化的<block ref="1f986d7f0f42932dbaaf84475f63ea7a" prefix=" " category="inline-code"></block>)。</block>
  <block id="0cc9d438ad56fdbd4bbdfb24f3548660" category="summary">Trident在集群中的每个工作节点上作为一个控制器Pod加一个节点Pod运行。节点Pod必须运行在可能要挂载Trident卷的任何主机上。</block>
  <block id="aae2218cccc8db14384d3387594fe6ae" category="doc">Trident架构</block>
  <block id="2544d3adb30a2378653ade7cf906c0aa" category="paragraph">Trident在Kubernetes集群上部署为一个<block ref="7f05a5daccc48435b05c14a7b739fa36" category="inline-xref-macro-rx"></block>或多个<block ref="8642ddce0d2b15cad48dfefb369d4c89" category="inline-xref-macro-rx"></block>、并使用标准Kubernetes _CSI Sidecar Containers_来简化CSI插件的部署。<block ref="c1b69fa7e0376b667b144d553d4653a8" category="inline-link-macro-rx"></block>由Kubbernetes存储社区维护。</block>
  <block id="b38acf7b48d99a3dc06e012c7b1c1f3e" category="paragraph">Kubornetes<block ref="219288b06ade6fd51c16efe605941441" category="inline-link-macro-rx"></block>和<block ref="9466cd429d8630101055a8fd14904bd9" category="inline-link-macro-rx"></block>用于限制Pod在特定或首选节点上运行。您可以在Trident安装期间为控制器和节点Pod配置节点选择器和容差。</block>
  <block id="4d0894b72f21c4fc0e41d094c2d50aed" category="image-title">Trident部署在Kubbernetes集群上</block>
  <block id="92ad11160b8482411ae1167ed34e2bc0" category="image-alt">Kubbernetes集群上的Trident架构示意图。</block>
  <block id="190693c471c998e2d7706ff05c87d3c2" category="paragraph">以下Kubenetes架构支持Trident：</block>
  <block id="330103c2a0c87f0aa273d6c15590a575" category="summary">Trident 是一个由 NetApp 维护的完全受支持的开源项目。它旨在帮助您使用容器存储接口(CSI)等行业标准接口满足容器化应用程序的持久性需求。</block>
  <block id="e61b32e0e629aff81f643458f823b962" category="doc">了解Trident</block>
  <block id="f94a579e5ec139027f8b7d0d24bcce36" category="paragraph">Trident 是由 NetApp 维护的一个受全面支持的开源项目。它旨在帮助您使用容器存储接口(CSI)等行业标准接口满足容器化应用程序的持久性需求。</block>
  <block id="b8a9ce80261b5fb6cc4c2d2e1f0990ca" category="section-title">什么是Trident？</block>
  <block id="b1779edf31deaecac634566a2a377f62" category="paragraph">Trident是一款与本机集成的符合容器存储接口(CI)的动态存储流程编排程序<block ref="c4f47b2d4c7b6c009c3ed9bc1f952dce" category="inline-link-macro-rx"></block>。Trident在集群中的每个工作节点上作为一个控制器Pod加一个节点Pod运行。有关详细信息、请参见 <block ref="9f6208219ae600271f6632db354451ed" category="inline-link-macro-rx"></block> 。</block>
  <block id="d613d80a6fcacbbceeb665fc5b0846f0" category="inline-link-macro">部署适用于Docker的Trident</block>
  <block id="5b6cbf8e3be454064a322ad7f9c47cc2" category="paragraph">Trident还可以直接与适用于NetApp存储平台的Docker生态系统集成。NetApp Docker卷插件(nDVP)支持从存储平台到Docker主机配置和管理存储资源。有关详细信息、请参见 <block ref="168e02b8c5756e29b56aa79aa4a1b715" category="inline-link-macro-rx"></block> 。</block>
  <block id="ad82bf93e4b28ad012a8be09e30d3d59" category="paragraph">Trident 可以直接在底层 NetApp HCI 存储平台上为容器化应用程序配置和管理存储设备。</block>
  <block id="10f0fa4079121b371145e16713fdbb44" category="section-title">Trident</block>
  <block id="c14b72fed21fd4eafddae164ba8081d0" category="paragraph"><block ref="41274746a612585e32637b095dd7555b" category="inline-link-rx"></block>让企业可以更轻松地在公有云和内部环境中、跨公有云和内部环境管理、保护和移动在Kubnetes上运行的数据丰富的容器化工作负载。Trident利用公共云和内部环境中经验证的广泛NetApp存储产品组合中的Trident配置和提供持久容器存储。此外，它还提供了一组丰富的高级应用程序感知型数据管理功能，例如快照，备份和还原，活动日志和主动克隆，用于数据保护，灾难 / 数据恢复，数据审核以及 Kubernetes 工作负载的迁移用例。</block>
  <block id="8c33c0d65f9f2a648eb30a9703072383" category="doc">Trident快速入门</block>
  <block id="a555fee6c6587118e36d8dd135df1313" category="inline-link-macro">Trident要求</block>
  <block id="96a40ad4ad263d59437e326f22eaecdf" category="paragraph">您可以通过几个步骤安装Trident并开始管理存储资源。开始之前，请查看<block ref="d5fb7f9fba906801b000d5533dc030cf" category="inline-link-macro-rx"></block>。</block>
  <block id="f1bcf1c509e84f327a99d5510a722dec" category="inline-link-macro">适用于Docker的Trident</block>
  <block id="5b5dc0344ff29ee1aeb0845b87692cf1" category="admonition">对于Docker，请参见<block ref="f7120b9f314af1c9d82deae8957b54f3" category="inline-link-macro-rx"></block>。</block>
  <block id="9877a7ec0ff327ca21c8022d61c25f88" category="paragraph">Trident提供了多种针对各种环境和组织进行了优化的安装方法和模式。</block>
  <block id="b8b9eab8c1ed7b79387652490f5724ec" category="inline-link-macro">安装 Trident</block>
  <block id="d94be11e75caa4db23a136d9b4cca4d9" category="paragraph"><block ref="d94be11e75caa4db23a136d9b4cca4d9" category="inline-link-macro-rx"></block></block>
  <block id="2e5120dd8211c4057a742a03b68ffe1a" category="paragraph">后端用于定义Trident与存储系统之间的关系。它会告诉Trident如何与该存储系统通信、以及Trident如何从该存储系统配置卷。</block>
  <block id="a5cdf497d98aa8d8e9bf311fe225a905" category="paragraph">Kubnetes StorageClass对象将Trident指定为配置程序、并允许您创建存储类以配置具有可自定义属性的卷。Trident会为指定Trident配置程序的Kubbernetes对象创建匹配的存储类。</block>
  <block id="54f1c3c7de2748b6f3616d7b1186ade2" category="summary">在安装Trident之前、您应查看这些常规系统要求。特定后端可能有其他要求。</block>
  <block id="0fe713481395212a8eb358f4cb188c04" category="section-title">有关Trident的关键信息</block>
  <block id="8e7cb3d16dbeb8a9289495de8b479d1f" category="paragraph">*您必须阅读以下有关Trident的重要信息。*</block>
  <block id="04dc1d4246222d48d4348b40baef0aac" category="example-title">&lt;strong&gt;与Trident &lt;/strong&gt;相关的信息</block>
  <block id="5e25fae885baef0275d27a764979b289" category="list-text">Trident会严格强制在SAN环境中使用多路径配置、并在Multipath.conf文件中使用建议值<block ref="db729c5c8df447087e5a84b961df14f6" prefix=" " category="inline-code"></block>。</block>
  <block id="710f95d40d121f27f89b0faa6e178133" category="paragraph">Trident支持多个容器引擎和流程编排程序、其中包括：</block>
  <block id="e42907190e2666646d57ade5c061e6e2" category="paragraph">Trident还可以与许多其他完全托管和自行管理的Kubernetes产品配合使用、包括Google Kubernetes Engine (GKE)、Amazon Elatic Kubernetes Services (EKS)、Azure Kubernetes Service (AKS)、MiranT斯Kubernetes Engine (MKE)和VMware Tanzu产品组合。</block>
  <block id="4cb56edacf6f40b0077e559878cb88a1" category="paragraph">Trident和ONTAP可用作的存储提供程序<block ref="98ab68800979b414641691275d2b9c15" category="inline-link-macro-rx"></block>。</block>
  <block id="90e5d592b7e0b2afb122e69c00372ddf" category="paragraph">要使用Trident、您需要使用以下一个或多个受支持的后端：</block>
  <block id="6116c21c42b3138e811999de6433a0a6" category="paragraph">下表总结了此版本的Trident及其支持的Kubernetes版本提供的功能。</block>
  <block id="29fce9ae0f476afd36cf3ebf4de1d2a8" category="paragraph">虽然Trident不正式支持特定操作系统、但已知以下操作系统可以正常工作：</block>
  <block id="779639a0216e7a8fd164ee8a7266d8b8" category="paragraph">默认情况下、Trident在容器中运行、因此将在任何Linux工作器上运行。但是、根据您使用的后端、这些员工需要能够使用标准NFS客户端或iSCSI启动程序挂载Trident提供的卷。</block>
  <block id="ac65d911a6a42e3244db78a534db815a" category="paragraph">Trident可能需要先对存储系统进行更改、然后后端配置才能使用它。</block>
  <block id="8ff649e05d6e0ae0d638b05135917e8b" category="section-title">Trident端口</block>
  <block id="31ae62dfe6cb254d32d0f67deda8d9ad" category="paragraph">Trident需要访问特定端口才能进行通信。</block>
  <block id="2e442c7238666f1b73934ff5c2034b82" category="paragraph"><block ref="2e442c7238666f1b73934ff5c2034b82" category="inline-link-macro-rx"></block></block>
  <block id="ce8468ce4398f1403e56c8d07fbfbdff" category="paragraph">对于气隙安装、以下列表是安装Trident所需容器映像的参考。使用<block ref="4ebf280824868255c952dc529072ecb9" prefix=" " category="inline-code"></block>命令验证所需容器映像的列表。</block>
  <block id="f5d19c8a8c2f8f69c432eeca877b5fcd" category="summary">您可以使用Trident安装程序自定义部署。</block>
  <block id="4b4c8bb835df197f723a52a388a1a4e0" category="paragraph">您可以使用Trident安装程序自定义安装。</block>
  <block id="e0ebb2a26a33f54574264738d90b4256" category="paragraph">通过Trident安装程序、您可以自定义属性。例如，如果已将Trident映像复制到私有存储库，则可以使用指定映像名称<block ref="00e6ff45e8bcc6b9e35e9c68d8d5135c" prefix=" " category="inline-code"></block>。如果您已将Trident映像以及所需的CSI副本映像复制到私有存储库，则最好使用开关指定该存储库的位置，<block ref="53b228c1c8295f49b0c35325e14fcd6a" prefix=" " category="inline-code"></block>其格式为<block ref="c4c34dc2c7d5cb25c084ca11127ba1c6" prefix=" " category="inline-code"></block>。</block>
  <block id="85219bbc6090744b49cad804af63daaa" category="admonition">在私有存储库中安装Trident时、如果<block ref="53b228c1c8295f49b0c35325e14fcd6a" prefix=" " category="inline-code"></block>使用交换机指定存储库位置、请勿在存储库路径中使用<block ref="191065897cafafd6677dec7355a785d9" prefix=" " category="inline-code"></block>。例如：<block ref="51e87a5a10277cd8b68fe2bfaab6b1e5" prefix=" " category="inline-code"></block></block>
  <block id="dafb04a56b5428b7efaff9062ddc586b" category="summary">通过Trident运算符、您可以使用规范中的属性自定义Trident的安装方式<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>。</block>
  <block id="0155e97c891593a2b846fc604a01426f" category="paragraph">Trident操作员允许您使用规范中的属性自定义Trident安装<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>。如果要在允许的参数之外自定义安装<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>、请考虑使用生成自定义YAML清单、<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>以便根据需要进行修改。</block>
  <block id="8d6d249f3e02155f1f4e28dec3f40a4f" category="paragraph">Trident作为单个控制器Pod以及集群中每个工作节点上的一个节点Pod运行。节点Pod必须运行在可能要挂载Trident卷的任何主机上。</block>
  <block id="d71d7e5009f5ee11ae970a342fff23ae" category="admonition"><block ref="b2c66bca748ffde67c7b6817cb8dd795" prefix="" category="inline-code"></block>在中指定<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>以表示安装Trident的命名空间。安装Trident后无法更新此参数*。尝试执行此操作会导致<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>状态更改为<block ref="d7c8c85bf79bbe1b7188497c32c3b0ca" prefix=" " category="inline-code"></block>。Trident不应跨多个名称卷进行迁移。</block>
  <block id="0cf03ede150b823aae6ae068fa6ffb35" category="cell">要安装Trident的命名空间</block>
  <block id="6c6ebc33a5cbbe6942a0c9ec90d575a2" category="cell">为Trident启用调试</block>
  <block id="609512f035fafafacc14b4f6f29bb70d" category="cell">安装基于IPv6的Trident</block>
  <block id="9e6197850998001239ecde260b512013" category="cell">用于卸载Trident的标志</block>
  <block id="26ed500280b8c0e427f21574b44203cc" category="cell">要使用的Trident日志记录格式[text,json]</block>
  <block id="f443d16ba56df1480ca415fae25eaaef" category="cell">要安装的Trident映像</block>
  <block id="26cb458bf42b8de61d4c66da519e7560" category="cell">要删除以执行Trident完全删除的资源列表</block>
  <block id="2c82926c3266fa69b7a6b9b9bf2da929" category="cell"><block ref="e9a7558decb5e432d8b7c4d536cc9876" prefix="" category="inline-code"></block></block>
  <block id="17290457cf887fb0694111a08adc91e7" category="cell">使Trident能够使Kubbernetes集群的节点做好准备、以便使用指定的数据存储协议管理卷。*目前，<block ref="39eea648dab96b0ee6022dabb38bc420" prefix=" " category="inline-code"></block>是唯一支持的值。*</block>
  <block id="b90bdf58371477fc38f47c2f6d120df5" category="admonition">由于Trident依赖于Kubbernetes NGN、因此在重新计划所有不可允许的工作负载之前、请勿从运行状况不正常的节点中删除<block ref="2ea3337d8d7fc43880e82df308aa0f16" prefix=" " category="inline-code"></block>污点。不负责任地应用或删除该问题可能会危及后端数据保护。</block>
  <block id="36d4895fba0608ac61adf67bca2ca709" category="paragraph">当Kubnetes集群管理员已将此标记应用<block ref="7b58fe53e2e4b586e9605f1371e1ebf3" prefix=" " category="inline-code"></block>于节点并<block ref="badc795d88a7db6cc65d56bc758b3ea4" prefix=" " category="inline-code"></block>设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>时，Trident将确定节点状态并：</block>
  <block id="a753dc0e9b9a4864e2954c838d295341" category="list-text">将Trident节点对象标记为<block ref="32478ef751ab0a81974a3aa8569607b9" prefix=" " category="inline-code"></block>(对于新出版物不安全)。</block>
  <block id="d3f280add1ef01848e3068dbafeb2930" category="admonition">Trident控制器将拒绝新的发布卷请求，直到节点被Trident节点POD重新认定(标记为后)为止<block ref="32478ef751ab0a81974a3aa8569607b9" prefix=" " category="inline-code"></block>。使用挂载的PVC计划的任何工作负载(即使在集群节点运行状况良好且已准备就绪之后)都将无法接受、直到Trident能够验证该节点<block ref="123402c04dcfb6625f688f771a5fc05d" prefix=" " category="inline-code"></block>(对于新发布的产品来说是安全的)。</block>
  <block id="94b5491434477bb572567175dae8789b" category="paragraph">在恢复节点运行状况并删除此污染后、Trident将：</block>
  <block id="9b87d3b70754b676221dcbe27972c21e" category="list-text">如果此节点处于某个<block ref="4304fb35c4cdfa886970499304f2aaba" prefix=" " category="inline-code"></block>状态(已删除服务中断、并且此节点处于<block ref="e7d31fc0602fb2ede144d18cdffd816b" prefix=" " category="inline-code"></block>状态)、并且所有陈旧的已发布路径均已清理、则Trident会将此节点重新提交为、并允许新的已发布卷访问此节点<block ref="123402c04dcfb6625f688f771a5fc05d" prefix=" " category="inline-code"></block>。</block>
  <block id="0b566d8eeef773fb0a1874a0340c1bf1" category="paragraph">此示例将安装具有节点选择器的Trident。</block>
  <block id="f9c98839799a3d0d53b9fe671548369b" category="paragraph">此示例将安装Trident以在AKS集群上启用受管身份。</block>
  <block id="134db50713debda2944acc2079f0cd32" category="paragraph">此示例将在AKS集群上安装Trident以与云标识结合使用。</block>
  <block id="338531cfbc43156671176c4844d84c2e" category="example-title">适用于GKE的云身份</block>
  <block id="dfee7b28d5bbb63372e0d49295ca91ff" category="summary">您可以使用Helm部署Trident操作员并安装Trident。此过程适用于将Trident所需的容器映像存储在私有注册表中的安装。</block>
  <block id="eba73b570dfb3af8b46b60d34f2b27a9" category="paragraph">您可以使用Helm部署Trident操作员并安装Trident。此过程适用于将Trident所需的容器映像存储在私有注册表中的安装。如果没有专用映像注册表，请使用<block ref="2230544d14bc4ba0c61a5a1b2030a1d4" category="inline-link-macro-rx"></block>。</block>
  <block id="906e93a2060242b360786042d0f40c9f" category="section-title">部署Trident操作员并使用Helm安装Trident</block>
  <block id="4d204b33a367deb7dbcb20395c917da2" category="admonition">在私有存储库中安装Trident时、如果<block ref="990dc1a09e10c7b5378e6bc8a1956cb8" prefix=" " category="inline-code"></block>使用交换机指定存储库位置、请勿在存储库路径中使用<block ref="191065897cafafd6677dec7355a785d9" prefix=" " category="inline-code"></block>。</block>
  <block id="43eba64dcd06763432addbcf8db2d367" category="list-text">添加Trident Helm存储库：</block>
  <block id="4dd793a25a8706b6330293fdd8ba3cca" category="paragraph">要添加nodePrep值、请运行以下命令：</block>
  <block id="a4b3e6e276b60f51832e92ee5e4c0d3c" category="admonition">请勿从values.yaml文件中删除默认相关性。如果要提供自定义相关性、请扩展默认相关性。</block>
  <block id="13449393414b4d9d6fb5c0c42481c6bb" category="cell">标识、<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block>和其它图像的注册表<block ref="c39d2745402b5d2987cfdd8df3bda0e1" prefix=" " category="inline-code"></block>。留空以接受默认值。重要信息：在私有存储库中安装Trident时、如果<block ref="990dc1a09e10c7b5378e6bc8a1956cb8" prefix=" " category="inline-code"></block>使用交换机指定存储库位置、请勿在存储库路径中使用<block ref="191065897cafafd6677dec7355a785d9" prefix=" " category="inline-code"></block>。</block>
  <block id="2b5e815c8ff99f9eef6559d24c783ba7" category="cell">允许在IPv6集群中启用Trident。</block>
  <block id="31f08e89ef234f9ec501c003d82bd2b4" category="cell">允许禁用Trident定期AutoSupport报告。</block>
  <block id="1eb59d4f1034670c547353e700b9c45f" category="cell">允许覆盖Trident AutoSupport容器的映像标记。</block>
  <block id="1b8b03266c41458cf8c8b67fddf79f72" category="cell">允许Trident AutoSupport容器通过HTTP代理回拨。</block>
  <block id="28b0bd49547c0889ddc764ec4af0404f" category="cell">设置Trident日志记录格式<block ref="1cb251ec0d568de6a929b520c4aed8d1" prefix="(" category="inline-code"></block>或<block ref="466deec76ecdf5fca6d38571f6324d54" prefix=" " category="inline-code"></block>)。</block>
  <block id="025e09276aadc123e8e855a29fafc984" category="cell">禁用Trident审核日志程序。</block>
  <block id="dca184d2a2b16c8fb797363408cbe703" category="cell">允许将Trident的日志级别设置为：<block ref="04a75036e9d520bb983c5ed03b8d0182" prefix=" " category="inline-code"></block>、<block ref="ad42f6697b035b7580e4fef93be20b4d" prefix=" " category="inline-code"></block><block ref="caf9b6b99962bf5c2264824231d7a40c" prefix=" " category="inline-code"></block>、、、<block ref="1ea4c3ab05ee0c6d4de30740443769cb" prefix=" " category="inline-code"></block><block ref="cb5e100e5a9a3e7f6d1fd97512215282" prefix=" " category="inline-code"></block>或<block ref="df6402fd9ecc60f5a2159fdf45711cd4" prefix=" " category="inline-code"></block>。</block>
  <block id="14db3339a3d7e6dcb158ff8a75d75327" category="cell">允许将Trident的日志级别设置为<block ref="ad42f6697b035b7580e4fef93be20b4d" prefix=" " category="inline-code"></block>。</block>
  <block id="a17b61342a14dd24f10e7959b8c897e8" category="cell">允许为跟踪日志记录或日志抑制启用特定的Trident工作流。</block>
  <block id="8a755d63b74fdfced1868a0b3e2d5162" category="cell">允许为跟踪日志记录或日志抑制启用特定的Trident层。</block>
  <block id="d31727faddcc7355e9e3bf46abdf8088" category="cell">允许完全覆盖Trident的图像。</block>
  <block id="275360255393ae93a5ae2ff80a7ee5b6" category="cell">允许覆盖Trident的映像标记。</block>
  <block id="baee061ae15e488356d9c958fd837562" category="cell">使Trident能够安装在Windows工作节点上。</block>
  <block id="6d893452bf49a70aa18938a81935210f" category="summary">您可以使用Helm部署Trident操作员并安装Trident。此过程适用于Trident所需容器映像未存储在私有注册表中的安装。</block>
  <block id="c4a180ac17652dd1cd170c28b376be9c" category="paragraph">您可以使用Helm部署Trident操作员并安装Trident。此过程适用于Trident所需容器映像未存储在私有注册表中的安装。如果您有私有映像注册表，请使用<block ref="95202a095b590d767c9926fd1850fb68" category="inline-link-macro-rx"></block>。</block>
  <block id="7552178c666688de472839ddf4b0f4d0" category="cell">在AKS集群上使用云标识时、设置为工作负载标识("azure.Workload .Identity /client-id：XXXXXX-xxxx-xxxx-xxxx-xxxxxxxxxxx")。在Trident集群上使用云身份时、设置为eks.amazonaws.com/role-arn: AWS IAM角色("eks arn：aws：iam：：：12356：roe/EAM-roe"")。</block>
  <block id="a4ae088aa8dbc2e97f85135b007cce76" category="summary">您可以手动部署Trident操作员以安装Trident。此过程适用于将Trident所需的容器映像存储在私有注册表中的安装。</block>
  <block id="c54f3e7a1c4cb645b1fc4f0f7a583ac6" category="paragraph">您可以手动部署Trident操作员以安装Trident。此过程适用于将Trident所需的容器映像存储在私有注册表中的安装。如果没有专用映像注册表，请使用<block ref="0d70fdec6fbaf15c3c460970c31207c9" category="inline-link-macro-rx"></block>。</block>
  <block id="7a14ead6cd595f6aff8b701879a9f990" category="paragraph">Trident安装程序包包含部署Trident Operator和安装Trident所需的一切。从下载并解压缩最新版本的Trident安装程序<block ref="6a7c34d1e7545bd3ab5abc336e61eb7f" category="inline-link-macro-rx"></block>。</block>
  <block id="fcd239294bb5f5ad3a84db6ce79fd5ee" category="paragraph">创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>自定义资源定义(CRD)。您稍后将创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>自定义资源。在中使用适当的CRD YAML版本创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>CRD<block ref="91ff3926f7c7983bb4a56689f631e6c9" prefix=" " category="inline-code"></block>：</block>
  <block id="22471ed8a819a124f9ee9785680269ec" category="paragraph">Trident安装程序提供了一个可用于安装操作员和创建关联对象的捆绑包文件。通过捆绑包文件、可以使用默认配置轻松部署操作员并安装Trident。</block>
  <block id="a0c08bc8d399eef3571153bb0ecb4a77" category="paragraph">现在、您可以创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>并安装Trident。您也可以进一步<block ref="af79c767b326b6188dbe7366c85a8007" category="inline-link-macro-rx"></block>使用规范中的属性<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>。以下示例显示了Trident和CSI映像位于不同注册表中的安装。</block>
  <block id="e4f485171dcf600d2f0b0e8332394897" category="cell">操作员正在使用此CR安装Trident<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>。</block>
  <block id="55a64caca1122c8b2fd992a355c7750b" category="cell">已成功安装Trident。</block>
  <block id="cdef3688b4499bd3dbc552c9cf5defc3" category="cell">操作员正在卸载Trident，因为<block ref="f41a95848a012f4f1a6550ce79c588aa" prefix=" " category="inline-code"></block>。</block>
  <block id="e52593aaecb3b20362fa0081eea6a0f9" category="cell">Trident已卸载。</block>
  <block id="36be8fe129110882a2ec7138f4e363dd" category="cell">操作员无法安装、修补、更新或卸载Trident；操作员将自动尝试从此状态中恢复。如果此状态仍然存在，则需要进行故障排除。</block>
  <block id="24947bdc3a3d6387b2550da2302d4470" category="paragraph">您可以通过查看已创建Pod的状态来确认Trident安装是否已完成：</block>
  <block id="85390ca1f1fb456c5467114ab06d3089" category="paragraph">您可以使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>检查安装的Trident版本。</block>
  <block id="9be65bfc0904c8b8e06776335df88c52" category="summary">您可以手动部署Trident操作员以安装Trident。此过程适用于Trident所需容器映像未存储在私有注册表中的安装。</block>
  <block id="e09b85e9dd23a53724a460d162828e91" category="paragraph">您可以手动部署Trident操作员以安装Trident。此过程适用于Trident所需容器映像未存储在私有注册表中的安装。如果您有私有映像注册表，请使用<block ref="3fd9bb28718715a2d036f0ab9d9239b8" category="inline-link-macro-rx"></block>。</block>
  <block id="108ffd952d0eac9e6153a050e07ff8da" category="paragraph">创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>自定义资源定义(CRD)。您稍后将创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>自定义资源。在中使用适当的CRD YAML版本创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>CRD<block ref="91ff3926f7c7983bb4a56689f631e6c9" prefix=" " category="inline-code"></block>。</block>
  <block id="c97e335d53c8d571c8e8f7464c884831" category="paragraph">现在、您可以创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>并安装Trident。您也可以选择<block ref="af79c767b326b6188dbe7366c85a8007" category="inline-link-macro-rx"></block>使用规范中的属性<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>。</block>
  <block id="7904a6dadeabd7b725caf08c750b3d2e" category="summary">您可以使用安装Trident<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。此过程适用于Trident所需容器映像存储在或未存储在私有注册表中的安装。</block>
  <block id="10ccc4c39e10c8cfa195e969ad74df78" category="paragraph">您可以使用安装Trident<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。此过程适用于Trident所需容器映像存储在或未存储在私有注册表中的安装。要自定义<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>部署，请参见<block ref="8e7a26c9800a78fa0b68fb2423ba3fb4" category="inline-link-macro-rx"></block>。</block>
  <block id="a44928a927e3a51b044bf23f54c5ecc1" category="section-title">使用安装Trident<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block></block>
  <block id="380dea89244939b33f7066f0dfbafa8b" category="paragraph">Trident安装程序包会创建Trident Pod、配置用于保持其状态的CRD对象、并初始化CSI边形以执行配置卷并将卷附加到集群主机等操作。从下载并解压缩最新版本的Trident安装程序<block ref="6a7c34d1e7545bd3ab5abc336e61eb7f" category="inline-link-macro-rx"></block>。使用您选择的版本更新Trident本示例中的Trident安装程序-XX．．．．．．tar．gz&gt;_。</block>
  <block id="9937b0e906f4a701bfb0a7f52c8b7458" category="section-title">第2步：安装Trident</block>
  <block id="aab75b58977502d2c2813069d908ad61" category="paragraph">执行命令、在所需的命名空间中安装Trident<block ref="430bf77bee6c59d385d4194f84c21b16" prefix=" " category="inline-code"></block>。您可以添加其他参数来指定映像注册表位置。</block>
  <block id="d01f9020330072ac03affe8ff09d74c1" category="paragraph">以下示例提供了使用安装Trident的示例配置<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="f19a63197b0bddc429409fc31e0f0028" category="paragraph">要使Trident能够在Windows节点上运行、请执行以下操作：</block>
  <block id="16f386086a2ad7537b5e373f9c0c2d25" category="summary">您可以使用Trident操作员(手动或使用Helm)或与一起安装Trident<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。本主题提供了有关为您选择正确安装过程的重要信息。</block>
  <block id="3673a00b7dc94dd4c41d2410acd2fd30" category="paragraph">为了确保Trident可以安装在各种环境和组织中、NetApp提供了多种安装选项。您可以使用Trident操作员(手动或使用Helm)或与一起安装Trident<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。本主题提供了有关为您选择正确安装过程的重要信息。</block>
  <block id="4561600b99ad801aedaa0ed3d3f3d7dd" category="paragraph">无论是手动部署还是使用Helm部署、Trident操作员都是简化安装和动态管理Trident资源的绝佳方式。您甚至可以<block ref="5290e5312b651716bedf8a83ec5a6467" category="inline-link-macro-rx"></block>使用自定义资源(CR)中的属性<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>。</block>
  <block id="4c4c1456097b6c9eca1c708465c381be" category="example-title">&lt;strong&gt; Trident对象&lt;/strong&gt;</block>
  <block id="fd326d5b24197ffa86d97a4a14cb4f74" category="paragraph">集群范围的Trident操作员在集群级别管理与Trident安装关联的资源。这可减少使用命名空间范围的操作符维护集群范围的资源时可能导致的错误。这对于自我修复和修补至关重要。</block>
  <block id="971121cd3f2006d8d765f6943be3667d" category="paragraph">操作员监控Trident安装并主动采取措施解决问题、例如何时删除部署或意外修改部署。此时将创建一个<block ref="6088362e783ede60a64ba91287dc58c1" prefix=" " category="inline-code"></block>POD、将CR与Trident安装关联起来<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>。这样可以确保集群中只有一个Trident实例、并控制其设置、从而确保安装有效。对安装进行更改（例如删除部署或节点取消设置）时，操作员会识别这些更改并逐个修复它们。</block>
  <block id="2bd0a347fcdd1f32b2c47512a0f234b5" category="paragraph">例如、假设您需要启用Trident以生成调试日志。要执行此操作，请修补<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>以将设置<block ref="8cddd364bfd0d68f21e3a9ba1123b849" prefix=" " category="inline-code"></block>为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>：</block>
  <block id="fac5e433885256c138db519bfb7d9c8b" category="paragraph">通过集群范围的三端技术参数操作符、可以完全删除集群范围的资源。用户可以完全卸载Trident并轻松重新安装。</block>
  <block id="2b926612abdd76af2a073b5894f76c21" category="paragraph">将集群的Kubnetes版本升级到受支持的版本后、操作员会自动更新现有Trident安装并进行更改、以确保满足Kubnetes版本的要求。</block>
  <block id="47a11daa7ba65ffd7ce5a63a596b662f" category="admonition">如果集群升级到不受支持的版本、则操作员将阻止安装Trident。如果已使用操作员安装Trident、则会显示一条警告、指示Trident安装在不受支持的Kubnetes版本上。</block>
  <block id="c82b4b0fab3872638ac3c7cebf4e6354" category="paragraph">如果您的现有部署必须升级，或者您希望高度自定义您的部署，则应考虑<block ref="e214bf159dbaf6573cfe15f1373b92db" category="inline-link-macro-rx"></block>。这是部署Trident的传统方法。</block>
  <block id="2a756f07c39d09b80ec682e46071340c" category="paragraph">您可以<block ref="d16089dfa270d6679e80d43ec8b5c378" category="inline-link-macro-rx"></block>为Trident资源生成清单。其中包括Trident在安装过程中创建的部署、守护进程、服务帐户和集群角色。</block>
  <block id="726ba10e7d6fe535f2d9336e7321a0d0" category="admonition">从22.04版开始、每次安装Trident时、不会再重新生成AES密钥。在此版本中、Trident将安装一个新的机密对象、此对象会在安装期间持续存在。这意味着、<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>在22.04中可以卸载早期版本的Trident、但早期版本无法卸载22.04安装。选择适当的安装_method。</block>
  <block id="551b274494ab1b09b1dc86a5a0c18783" category="paragraph">这是安装Trident的最简单方法、适用于不施加网络限制的大多数环境。标准安装模式使用默认注册表来存储所需的Trident <block ref="0b505db73d92bac18356fa3feb3cf7e3" prefix="(" category="inline-code"></block>()和CSI <block ref="95d6355f896a633ab07c528c03b44c8e" prefix="(" category="inline-code"></block>()图像。</block>
  <block id="2c5f46571f2892ffdec449b4fe136e81" category="paragraph">使用标准模式时、Trident安装程序将：</block>
  <block id="987eeee7473b18ea803953637bdfad2e" category="list-text">创建部署或节点守护进程、以便在Kubornetes集群中所有符合条件的节点上启动Trident Pod</block>
  <block id="c784203bd2d02288d50564d90224ed01" category="list-text">在要从中部署Trident的远程计算机上部署适当版本的<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>。</block>
  <block id="47bc0a3097919fdad65f139b6d69a9ff" category="list-text">请始终使用相同的方法安装和卸载Trident。如果已使用部署<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>，则应使用适当版本的<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>二进制文件卸载Trident。同样、如果使用操作员进行部署、则应编辑<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>CR并设置<block ref="f41a95848a012f4f1a6550ce79c588aa" prefix=" " category="inline-code"></block>为卸载Trident。</block>
  <block id="e1c3faef9fedf771266b88670b01c96e" category="list-text">如果要删除基于操作员的部署并使用它<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>来部署Trident、则应首先编辑并设置<block ref="f41a95848a012f4f1a6550ce79c588aa" prefix=" " category="inline-code"></block>为卸载Trident。<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>然后删除<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>和操作员部署。然后，您可以使用安装<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="f2019abfb2d31501ffeb653190c776c7" category="paragraph">在VMware Tanzu产品组合上安装Trident时：</block>
  <block id="f13f0f6bb53cad2be972536943806066" category="doc">使用trdentctrd管理Trident</block>
  <block id="aace960e27eac9490c7c162553e42f7f" category="paragraph"><block ref="5a856e83aada9750fe5389f8da94335b" category="inline-link-rx"></block>包含<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>命令行实用程序、可用于轻松访问Trident。具有足够Privileges的Kubornetes用户可以使用它来安装Trident或管理包含Trident Pod的命名空间。</block>
  <block id="be99e89b73ca0fc3198af4f4649e5134" category="paragraph">Trident<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>实用程序支持以下命令和全局标志。</block>
  <block id="a0ac16c3fbcfa888fa59e67b5463167b" category="list-text">将资源添加到Trident。</block>
  <block id="2f9b5be603774ecb9636b484d457359e" category="list-text">从Trident中删除一个或多个资源。</block>
  <block id="6635cd89ace7391965bccedd81e35cb6" category="list-text">从Trident获取一个或多个资源。</block>
  <block id="926631c8cfb777fe0db4134e51613ead" category="list-text">打印Trident所需容器映像的表。</block>
  <block id="bb596d4d22f7a33ee0d2a24060a763ec" category="list-text">将现有资源导入到Trident。</block>
  <block id="27b4c36cae8d1c4fd515d289942c87cc" category="list-text">安装 Trident 。</block>
  <block id="257fa8c5a4a1749d97d717fe4e1215ea" category="list-text">从Trident打印日志。</block>
  <block id="2124524b5b56338967984edc522a8671" category="list-text">从Trident发送资源。</block>
  <block id="806cf5654c2458b177e5c7daa3c09f48" category="list-text">卸载Trident。</block>
  <block id="28c0034c10c257670255526657e62d93" category="list-text">在Trident中修改资源。</block>
  <block id="852e24eece7824454b8f5c79668a07bb" category="list-text">在Trident中升级资源。</block>
  <block id="70e5b412fc117fa7faec13d3e8be6421" category="list-text">打印Trident版本。</block>
  <block id="0680c12a98c31009064ca561bf02c7f8" category="list-text">Trident部署的命名空间。</block>
  <block id="d56fa7a9770a5e6333220363051532ac" category="list-text">Trident REST接口的地址/端口。</block>
  <block id="592f5a846f45840ff17ae3fcbb5f2d26" category="paragraph">使用<block ref="76ea0bebb3c22822b4f0dd9c9fd021c5" prefix=" " category="inline-code"></block>命令将资源添加到Trident。</block>
  <block id="71f8a14d1d2aabce6854ce9de9e4de40" category="list-text"><block ref="b43fdd98b1fd705ae4c3a10cf25aad8a" prefix="" category="inline-code"></block>：将后端添加到Trident。</block>
  <block id="03c6dd1ba84a83f2cd07f340b6806c09" category="paragraph">使用<block ref="099af53f601532dbd31e0ea99ffdeb64" prefix=" " category="inline-code"></block>命令从Trident中删除一个或多个资源。</block>
  <block id="21ee8d29d964bb9b13a0c41d9602ae94" category="list-text"><block ref="b43fdd98b1fd705ae4c3a10cf25aad8a" prefix="" category="inline-code"></block>：从Trident中删除一个或多个存储后端。<block ref="c322d3de29d2b0c5e2e011dad5e77df2" prefix=" " category="inline-code"></block>：从Trident中删除一个或多个卷快照。<block ref="0606cab8952ca875c43a0e15b35aab7c" prefix=" " category="inline-code"></block>：从Trident中删除一个或多个存储类。<block ref="210ab9e731c9c36c2c38db15c28a8d1c" prefix=" " category="inline-code"></block>：从Trident中删除一个或多个存储卷。</block>
  <block id="e558124864c80bb4cb3afd12ca94d6a3" category="paragraph">使用<block ref="b5eda0a74558a342cf659187f06f746f" prefix=" " category="inline-code"></block>命令从Trident获取一个或多个资源。</block>
  <block id="d4f3a31079f902b3ab789d35c645a783" category="list-text"><block ref="b43fdd98b1fd705ae4c3a10cf25aad8a" prefix="" category="inline-code"></block>：从Trident获取一个或多个存储后端。<block ref="c322d3de29d2b0c5e2e011dad5e77df2" prefix=" " category="inline-code"></block>：从Trident获取一个或多个快照。<block ref="0606cab8952ca875c43a0e15b35aab7c" prefix=" " category="inline-code"></block>：从Trident获取一个或多个存储类。<block ref="210ab9e731c9c36c2c38db15c28a8d1c" prefix=" " category="inline-code"></block>：从Trident获取一个或多个卷。</block>
  <block id="2d7cc984025c13a373fe75153203182f" category="paragraph">使用<block ref="59b514174bffe4ae402b3d63aad79fe0" prefix=" " category="inline-code"></block>标志打印Trident所需容器映像的表。</block>
  <block id="713e63397727c946dac8452e705917bd" category="paragraph">使用<block ref="f6c534966bc7687e0c87134d025f8837" prefix=" " category="inline-code"></block>命令将现有卷导入Trident。</block>
  <block id="cc674f0e0cd8c84b97f0fa6a907c1a9c" category="paragraph">使用<block ref="19ad89bc3e3c9d7ef68b89523eff1987" prefix=" " category="inline-code"></block>标志安装Trident。</block>
  <block id="0d51d869bb009f988dbb6446e0b3e043" category="list-text"><block ref="88e6af50844241df09da1b4f0fed0dc1" prefix="" category="inline-code"></block>：AutoSupport遥测的容器图像(默认为“NetApp / Trident AutoSupport：&lt;current-version&gt;”)。<block ref="21e377b6d1724ef73707d1b42de99ab3" prefix=" " category="inline-code"></block>：用于发送AutoSupport遥测的代理的地址/端口。<block ref="8ef3d4e948c6061ad15793e3bfd2660f" prefix=" " category="inline-code"></block>：尝试在节点上安装所需的软件包。<block ref="5de93c87952cd098700fb8d46daed4d6" prefix=" " category="inline-code"></block>：生成YAML文件而不安装任何内容。<block ref="914071b8934b1d6035495f1ed02aa5fd" prefix=" " category="inline-code"></block><block ref="0c113ca6d57519b559ba5a426be3c6b6" prefix=" " category="inline-code"></block>：安装帮助。<block ref="a6bd80a942dd6d1c4d4b8aa4bd064415" prefix=" " category="inline-code"></block>：覆盖Trident控制器REST API的HTTP请求超时(默认值为1m30s)。<block ref="22f97752ec243e2f8fb13a584ff48f0d" prefix=" " category="inline-code"></block>：内部映像注册表的地址/端口。<block ref="af58b91b0e366d67d75550c28c8b73bd" prefix=" " category="inline-code"></block>：所有KubeNet操作的超时(默认值为3m0)。<block ref="931fef57514fa5bc71c5c9784dcb35b2" prefix=" " category="inline-code"></block>：kubelet内部状态的主机位置(默认为"/var/lib/kubelet")。<block ref="ad595b91ed4748510a60df1c00ce5bd6" prefix=" " category="inline-code"></block>：Trident日志记录格式(文本，json)(默认为“文本”)。<block ref="1606f6268af560ddbfffdd3790afb4d2" prefix=" " category="inline-code"></block>：使Trident能够使Kubbernetes集群的节点做好准备，以便使用指定的数据存储协议管理卷。*目前，<block ref="39eea648dab96b0ee6022dabb38bc420" prefix=" " category="inline-code"></block>是唯一支持的值。*<block ref="120a4fcacf73dd87df1de81c4d7a2526" prefix=" " category="inline-code"></block>：Trident使用的原有PV的名称确保不存在(默认为“Trident”)。<block ref="12ea064968b15f51e1c1a7444fe9f227" prefix=" " category="inline-code"></block>：Trident使用的原有PVC的名称确保不存在(默认为“Trident”)。<block ref="284e51f7c35ac8708577507873ff928e" prefix=" " category="inline-code"></block>：不自动向NetApp发送AutoSupport分发包(默认为true)。<block ref="61bce13717a9d6da0266dbc3e2b1e642" prefix=" " category="inline-code"></block>：在安装期间禁用大多数输出。<block ref="356c2fa7142c3aee4cd6204d96ea0890" prefix=" " category="inline-code"></block>：要安装的Trident映像。<block ref="8026926641b283123174e50f80da83de" prefix=" " category="inline-code"></block>：使用安装目录中的任何现有YAML文件。<block ref="4a4ef9f92e69acc000120379678aadcf" prefix=" " category="inline-code"></block>：使用IPv6进行Trident通信。</block>
  <block id="d26beba5397e2900bd10ac2f4114439a" category="paragraph">使用<block ref="2165e4fa5bddb65a31f6a0c495c2fa37" prefix=" " category="inline-code"></block>标志从Trident打印日志。</block>
  <block id="03b876ad5d685e21517c5c91d80aa1b7" category="list-text"><block ref="37caf0ee262229a9ddc60877eec6883f" prefix="" category="inline-code"></block><block ref="33a12b543204974f74acd94de699324e" prefix=" " category="inline-code"></block>：创建包含所有日志的支持归档文件，除非另有说明。<block ref="914071b8934b1d6035495f1ed02aa5fd" prefix=" " category="inline-code"></block><block ref="0c113ca6d57519b559ba5a426be3c6b6" prefix=" " category="inline-code"></block>：日志帮助。<block ref="269889131ee4793a82191b78a2eb60e3" prefix=" " category="inline-code"></block><block ref="e1db966b8a9ad737de7da72be15dcfc3" prefix=" " category="inline-code"></block>：要显示的Trident日志。Trident |自动|Auto-operator|all之一Trident (默认值为"auto")。<block ref="60cfbca684c147d47b652c83c9617370" prefix=" " category="inline-code"></block>：要从中收集节点Pod日志的Kubbernetes节点名称。<block ref="b3868ba70a8f4cf55464dd9926381db1" prefix=" " category="inline-code"></block><block ref="a29a0e1222e48537fee91cff87dcb786" prefix=" " category="inline-code"></block>：获取上一个容器实例(如果存在)的日志。<block ref="2c82c1731bc7980f276a26037aa42ec1" prefix=" " category="inline-code"></block>：获取此容器的日志。</block>
  <block id="05ec773046cd39b8bc0f2d677bce0910" category="paragraph">使用<block ref="2541d938b0a58946090d7abdde0d3890" prefix=" " category="inline-code"></block>命令从Trident发送资源。</block>
  <block id="18a643410fc45a102fb920f23c9c2836" category="paragraph">使用<block ref="fe98497efedbe156ecc4b953aea77e07" prefix=" " category="inline-code"></block>标志卸载Trident。</block>
  <block id="599e9ff51846ab1b00f04c11c114486b" category="paragraph">使用<block ref="3ac340832f29c11538fbe2d6f75e8bcc" prefix=" " category="inline-code"></block>命令修改Trident中的资源。</block>
  <block id="0cf5883c2ee5ddae619d22db9c564f72" category="list-text"><block ref="b43fdd98b1fd705ae4c3a10cf25aad8a" prefix="" category="inline-code"></block>：在Trident中更新后端。</block>
  <block id="5c7182b03561a92970bed5538e17d9c4" category="list-text">要在通过tbc设置后重新能够通过tldentcdt设置<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block>、必须从tbc中删除此字段。<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block>可以使用命令来完成此操作<block ref="d8d9eaf9706e633cb1e715e88dfbe301" prefix=" " category="inline-code"></block> 。删除此字段后<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block>、您可以使用<block ref="30ef4d8d0d0cb9218c8f70ca2b7ee7bc" prefix=" " category="inline-code"></block>命令更改<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block>后端的。</block>
  <block id="3bed2aa34d42c38e2a5593a67e2fe0c4" category="section-title">插件支持</block>
  <block id="424054df70ee64ca6c70f04f668acb1e" category="paragraph">tridentctd支持类似于kubectd的插件。如果插件二进制文件名遵循"tridentcts-tld"方案&lt;plugin&gt;、并且二进制文件位于列出了路径环境变量的文件夹中、则tridentctL)将检测插件。所有检测到的插件都会在trdentctrd帮助的插件部分中列出。您也可以通过在环境变量TRIDENTCTL_plugin_path中指定plugin文件夹来限制搜索(示例：<block ref="d8923b227a7eb64a54abbd6aa4ee0f6d" prefix=" " category="inline-code"></block>)。如果使用了变量、则trdencdld仅在指定文件夹中搜索。</block>
  <block id="deeb141b9b83e90418e171a1871e4c4c" category="summary">您应使用与安装Trident相同的方法卸载Trident。如果您需要修复在升级、依赖关系问题或升级失败或不完整后发现的错误、则应卸载Trident、然后按照该版本的特定说明重新安装早期版本。</block>
  <block id="7fdff6d1496ee07f5530882ace839236" category="paragraph">您应使用与安装Trident相同的方法卸载Trident。</block>
  <block id="e2f3eebc5fb0722c4ff76f470c4c3644" category="list-text">如果您需要修复在升级、依赖关系问题或升级失败或不完整后发现的错误，则应卸载Trident，然后按照适用于该版本的特定说明重新安装早期版本<block ref="e168bf6cc8da3b05fae6b22bcd12ba37" category="inline-link-macro-rx"></block>。这是将_降 级_降级到早期版本的唯一建议方法。</block>
  <block id="0a5e338ee1a9820e7a4a7d64f09e4a90" category="inline-link-macro">完全删除Trident和CRD</block>
  <block id="bfc34bbf9ae6407400b3d77e0e84543b" category="list-text">为了便于升级和重新安装、卸载Trident不会删除Trident创建的CRD或相关对象。如果需要完全删除Trident及其所有数据，请参见<block ref="a2addcf593ef6071e49d2a678662f830" category="inline-link-macro-rx"></block>。</block>
  <block id="39596b8f60148eb1bbb5294ed08b18e3" category="paragraph">如果要停用Kubnetes集群、则必须在卸载之前删除使用Trident创建的卷的所有应用程序。这样可以确保在删除之前、在Kubbernetes节点上未取消对这些PVC的审核。</block>
  <block id="17733a3e129c42343460715297e0ac17" category="paragraph">您应使用与安装Trident相同的方法来卸载它。卸载之前、请验证最初安装Trident时使用的版本。</block>
  <block id="289484202abcb58bc03e41c81caae5ac" category="list-text">如果没有操作员POD，则使用安装了Trident<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="ec1716523baff70aa24080e64d8b4b12" category="list-text">如果有操作员POD、则Trident是使用Trident操作员手动或使用Helm安装的。</block>
  <block id="5577c7ef32ae8572fa7be77d6824637e" category="list-text">如果有操作员POD、请使用<block ref="2bbaa285a4b0035313ee3178abf33313" prefix=" " category="inline-code"></block>确定Trident是否是使用Helm安装的。</block>
  <block id="aa5d66e97bedb220b9ef74e7c17b9f61" category="list-text">如果有Helm标签、则Trident是使用Helm安装的。</block>
  <block id="28de01ed4501d62f4c5b88fa6049543d" category="list-text">如果没有Helm标签、则Trident是使用Trident操作员手动安装的。</block>
  <block id="e2a7f7c4ad1f2b2220b05363feef82c8" category="paragraph">如果您使用操作员安装了Trident、则可以通过执行以下操作之一将其卸载：</block>
  <block id="9f9bf29ad71be284c3ea7064648785b5" category="list-text">**删除<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>**:删除用于部署Trident的CR后<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>，您将指示操作员卸载Trident。操作员将处理Trident部署和守护进程的删除过程、并继续删除此部署和守护进程<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>、同时删除其在安装过程中创建的Trident Pod。</block>
  <block id="ea75777d00ce93c49ed762f4f7dfada6" category="paragraph">如果您使用Helm安装了Trident，则可以使用将其卸载<block ref="547d17b0589ba1ba53549f8ddb830b62" prefix=" " category="inline-code"></block>。</block>
  <block id="b19a703b7895e9b3039fbad761b2c100" category="paragraph">使用<block ref="fe98497efedbe156ecc4b953aea77e07" prefix=" " category="inline-code"></block>中的命令<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>删除与Trident关联的所有资源(CRD和相关对象除外)：</block>
  <block id="6bfc286a12a4a343361f71fd9b7ccf62" category="summary">在使用Trident运算符升级Trident之前、您应了解升级期间发生的后台进程。其中包括对支持滚动更新的三项技术控制器、控制器Pod和节点Pod以及节点DemonSet进行的更改。</block>
  <block id="6bd585eb6409f22b8a1e247f4935c581" category="paragraph">要安装和升级Trident的众多操作之一<block ref="1294f86abdf2591159d9dd04918b1092" category="inline-link-macro-rx"></block>是自动处理Trident和Kubbernetes对象、而不会中断已挂载的现有卷。通过这种方式，Trident可以在零停机时间或<block ref="c0fb6b6f12bb8ae805a97690328ec023" category="inline-link-macro-rx"></block>的情况下支持升级。尤其是、通过与Kubenetes集群进行通信、可以：</block>
  <block id="a958e7fa65b27b4be8589d6d0de8d135" category="list-text">检测当前安装的Trident版本(版本_n_)。</block>
  <block id="0efdc02c2d9fa1fcf31ff85fec4ed8de" category="summary">您可以使用操作员轻松升级现有的Trident安装。</block>
  <block id="9a98985a342ee2d7d213394e90d838a9" category="doc">使用Trident Operator或Helm升级Trident安装</block>
  <block id="5430a6b8f98712c8210f8df2d906793a" category="paragraph">您可以使用Trident操作员手动或使用Helm升级Trident。您可以从Trident操作员安装升级到另一个Trident操作员安装、也可以从安装升级<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>到Trident操作员版本。在升级Trident操作员安装之前、请查看<block ref="5cffa5fbe758cc3901f0e33c78b29d1b" category="inline-link-macro-rx"></block>。</block>
  <block id="7be5118cbf87396f839e400ffc94aecd" category="paragraph">您可以从集群范围的三端技术人员安装升级到另一个集群范围的三端技术人员安装。所有Trident 21.01及更高版本都使用集群范围的运算符。</block>
  <block id="18466b7fafaca62c9c0d2438889ca0c6" category="admonition">要从使用命名空间范围的运算符(版本20.07到20.10)安装的Trident升级、请按照Trident的升级说明进行操作<block ref="567dd1ff029f25a404a69ff1e3c8d83b" category="inline-link-macro-rx"></block>。</block>
  <block id="76e06d694db0c428e4d51e3354a7a4bd" category="list-text">验证Trident版本：</block>
  <block id="5681bedbe2af394566fa4b56d2d4c938" category="list-text">删除用于安装当前Trident实例的Trident运算符。例如、如果要从23.07升级、请运行以下命令：</block>
  <block id="1863fa40be678d4efa33c952a5cba52e" category="paragraph">您可以升级Trident Helm安装。</block>
  <block id="b2095ed231848e69cbd92e44defb033b" category="admonition">在将安装了Trident的Kubernetes集群从1.24升级到1.25或更高版本时、您必须<block ref="cd01e1bae83933b9c59c914bc71332ac" prefix=" " category="inline-code"></block>先更新values.yaml以设置为或添加到<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>命令、<block ref="96d5d0b9a6e3e01b2ae2ed889f75d22e" prefix=" " category="inline-code"></block>然后才能升级集群。<block ref="94ef2a130a825358ab3002442d6e5145" prefix=" " category="inline-code"></block></block>
  <block id="5198b91e39c3a2f369e2426e2732625e" category="paragraph">如果您已将Kubnetes集群从1.24升级到1.25、但未升级Trident Helm、则Helm升级将失败。要完成Helm升级、请作为前提条件执行以下步骤：</block>
  <block id="b85ec56f096c3a360d0efb02cd7a405c" category="list-text">从安装helm-mapkubeapis插件<block ref="bd65bd6616cbc50afd763e93267c969a" category="inline-link-rx"></block>。</block>
  <block id="5f5d62e54c7f1681b8aca17a51dae491" category="list-text">在安装了Trident的命名空间中对Trident版本执行演练。此操作将列出要清理的资源。</block>
  <block id="db65493922bad76f3135ea26ab9b5377" category="list-text">使用Helm执行完整运行以执行清理。</block>
  <block id="cdfb4a820b1c2fb971221fb06e0dcd22" category="inline-link-macro">已使用Helm安装Trident</block>
  <block id="51c9e4ca2440cc879a0ac3211d74b056" category="list-text">从下载最新的Trident版本<block ref="6a7c34d1e7545bd3ab5abc336e61eb7f" category="inline-link-macro-rx"></block>。</block>
  <block id="6a40bcc839c7c4e3dc8f6767cbe14743" category="list-text">下载最新版本的Trident。</block>
  <block id="3dddb901f6b5bd5d89988dafdfabdec3" category="list-text">创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>CR以安装Trident。</block>
  <block id="64913c0fb81e4c0c481a4fc1fac61cdd" category="summary">Trident遵循四个月的发布节奏、每年发布三个主要版本。每个新版本都是在先前版本的基础上构建的，可提供新功能和性能增强以及错误修复和改进功能。建议您至少每年升级一次、以利用Trident中的新功能。</block>
  <block id="77e55df8a70448ed424b5f523364ffc2" category="paragraph">从24.02版开始、Trident按四个月的发布节奏、每年发布三个主要版本。每个新版本都是在先前版本的基础上构建的、并提供了新功能、性能增强功能、错误修复和改进。我们建议您至少每年升级一次、以利用Trident中的新功能。</block>
  <block id="2189850878cb079b3d2ec0126cc0c42a" category="paragraph">升级到最新版本的Trident时、请考虑以下事项：</block>
  <block id="c0f69f3a3b098007f278b27ffb9915ac" category="list-text">在给定的Kubnetes集群中的所有名称区中只应安装一个Trident实例。</block>
  <block id="a34f035fd1be1d24760b20dd8fa547ea" category="list-text">Trident 23.07及更高版本需要v1卷快照、不再支持Alpha或Beta快照。</block>
  <block id="df1a9174fcb3edd8d76379e2ce3131fc" category="list-text">如果您在中创建了适用于Google Cloud的Cloud Volumes Service<block ref="14d2f65ad36632a8ebf2878592ce4877" category="inline-link-macro-rx"></block>，则在从Trident 23.01升级时，必须更新后端配置才能使用<block ref="317ec56a799e879712bbd2d0fcbd3b93" prefix=" " category="inline-code"></block>或<block ref="75b65576cc4a19f0836b73610ad5957a" prefix=" " category="inline-code"></block>服务级别。如果无法在后端更新<block ref="f1d0ae63f2e948a9e43dcc60303d595d" prefix=" " category="inline-code"></block>、可能会导致卷失败。有关详细信息、请参见 <block ref="83a0df2fb9a604879fdb2fab6c5f77c1" category="inline-link-macro-rx"></block> 。</block>
  <block id="355ecbb7c8a4a9a1ef360cb6b2697d0c" category="list-text">升级时、请务必在"由Trident使用"中<block ref="f652904c3bfb48fb25a0a75f485f0ff6" prefix=" " category="inline-code"></block>提供<block ref="f6e7f85d8aee15940665bf722f7afac2" prefix=" " category="inline-code"></block>。您可以在不中断已有卷的情况下删除和重新创建<block ref="f652904c3bfb48fb25a0a75f485f0ff6" prefix=" " category="inline-code"></block>卷。</block>
  <block id="a307a5edde0e4eeeb35bb77f0a1f1cc7" category="paragraph">Trident版本遵循基于日期的<block ref="fb6921a005d395f9482cdac0306d4935" prefix=" " category="inline-code"></block>命名约定、其中"YY"是一年的最后两位数字、"MM"是月份。DOT版本遵循<block ref="d93ec759c4a0e8c1cf9c7653b2939656" prefix=" " category="inline-code"></block>惯例、其中"X"是修补程序级别。您将根据要从中升级的版本选择要升级到的版本。</block>
  <block id="25005cf84eec08f8f6a673dd193efa30" category="paragraph">要确定最初安装Trident时使用的版本、请执行以下操作：</block>
  <block id="f83034df0569133b2bce8e38446dfa7d" category="list-text">如果有操作员POD、请使用<block ref="9ce56b0c50ae80fe754522969b1c96b9" prefix=" " category="inline-code"></block>确定Trident是否是使用Helm安装的。</block>
  <block id="831878da1887476c96f4d3663eb93345" category="paragraph">通常，您应该使用与初始安装相同的方法进行升级，但您可以这样做<block ref="e34c010032791417159012a5e31d7540" category="inline-link-macro-rx"></block>。升级Trident有两种方法。</block>
  <block id="0b788cf4288607cc017571ff06e7943e" category="summary">您可以使用轻松升级现有的Trident安装<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="ffdcc81ea1b556d1898b6edeef92af9c" category="paragraph">您可以使用轻松升级现有的Trident安装<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="f01c58ea1eebde50a8ce26c58daf4cce" category="paragraph">卸载和重新安装Trident相当于升级。卸载Trident时、不会删除Trident部署所使用的永久性卷请求(PVC)和永久性卷(PV)。已配置的PV在Trident脱机时仍可用、Trident将在恢复联机后为在此期间创建的任何PVC配置卷。</block>
  <block id="7ad65028965606bad1c173b4f16cefeb" category="list-text">在中运行卸载命令<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>以删除与Trident关联的所有资源、CRD和相关对象除外。</block>
  <block id="3777d5420fb2ef4c5e434cd5af97d73d" category="inline-link-macro">使用trdentcl安装Trident</block>
  <block id="23d4814be45e57b94df46ce2ee2a19f6" category="list-text">重新安装Trident。请参阅 <block ref="6fa1b6e43e706a69762bd9a319950a21" category="inline-link-macro-rx"></block>。</block>
  <block id="f36baffc9ca645fa1fe36124af4e39a7" category="summary">了解Trident以及使用Trident创建的卷的保护和恢复选项。对于具有持久性要求的每个应用程序，您都应制定一个数据保护和恢复策略。</block>
  <block id="ffe1fc42630bb81c5437556ccf118ba0" category="section-title">Trident复制和恢复</block>
  <block id="9c85886fa11238157a9de69d0caaf7f2" category="paragraph">您可以创建备份、以便在发生灾难时还原Trident。</block>
  <block id="a06c2dd9e460954c4c8e439ed6c16849" category="section-title">Trident复制</block>
  <block id="0cf2379589875f19fc411cdbbabab10c" category="paragraph">Trident使用Kubnetes CRD存储和管理自己的状态、并使用Kubnetes集群etCD存储其元数据。</block>
  <block id="df92604aa3f4e581e24f9f7e549cbe1e" category="section-title">Trident恢复</block>
  <block id="742d0be325a2cc0809fad668e223a40c" category="paragraph">您可以使用Kubenetes CRD和Kubenetes集群etCD快照恢复Trident。</block>
  <block id="1f7c8c42e8abc1d393aa79f78603a7d4" category="paragraph">Trident无法配置复制关系、但存储管理员可以使用<block ref="eae3571c3bcc896c3c2934b9eeb2171a" category="inline-link-rx"></block>来复制SVM。</block>
  <block id="5717b21c41683b40b5182faa442bafb8" category="paragraph">使用SnapMirror、您可以设置选项来控制要复制的内容。您需要知道在预成形时选择了哪些选项<block ref="36ddeb299c5dc6bcf247ffb9df4df208" category="inline-xref-macro-rx"></block>。</block>
  <block id="876b144c54cd97607e6f6f4d8b15f39e" category="section-title">使用Trident恢复SVM</block>
  <block id="5c26def63f84646a9f77218eea10331a" category="paragraph">Trident不会自动检测SVM故障。如果发生灾难、管理员可以手动启动通过三项功能故障转移到新SVM的操作。</block>
  <block id="eb12f237ee9304f080e1a3b606030f2d" category="admonition">如果指定了<block ref="524218dc9ff1ef52c9a0404971525b21" prefix=" " category="inline-code"></block>，则在激活目标SVM后，Trident配置的所有卷都会开始提供数据。</block>
  <block id="4afaf8cedd32fb155e98f0626311d8ab" category="paragraph">Trident无法配置SnapMirror复制关系、但是存储管理员可以使用<block ref="c3487d6df2463efc752acd6f5cc45a1f" category="inline-link-macro-rx"></block>来复制Trident创建的卷。</block>
  <block id="9cf6e031ec85179307403b10689113c9" category="paragraph">然后，您可以使用将恢复的卷导入到Trident中<block ref="b0a81d9cb6f9ea994a428f959b11d3c6" category="inline-link-macro-rx"></block>。</block>
  <block id="3c520ff745f4964007340c06ce483d92" category="summary">部署Trident时、请遵循此处列出的建议。</block>
  <block id="4ac9935cf245d076d6ef4babd8659321" category="paragraph"><block ref="c41296e544cd0faaa4fe4e8b22535287" category="inline-link-rx"></block>在不同应用程序之间实现管理隔离、是资源共享的障碍。例如，一个命名空间中的 PVC 不能从另一个命名空间中使用。Trident为Kubenetes集群中的所有名称区提供PV资源、从而利用提升了Privileges的服务帐户。</block>
  <block id="f53e7cca65962add5f429193e9cbdb7c" category="doc">集成Trident</block>
  <block id="ef77c788fd33425198e77cd3ce7c4525" category="paragraph">要集成Trident、需要集成以下设计和架构要素：驱动程序选择和部署、存储类设计、虚拟池设计、永久性卷请求(PVC)对存储配置的影响、卷操作以及使用Trident部署OpenShift服务。</block>
  <block id="9586fb9f48cc64f580092d7123d5acad" category="paragraph">请注意、在下表中、并非所有功能都通过Trident公开。如果需要某些功能，存储管理员必须在配置后应用这些功能。上标脚注区分了每个功能和驱动程序的功能。</block>
  <block id="5b003b29dfd53276a5b816a47ab32348" category="paragraph">Trident为ONTAP提供了2个SAN驱动程序、其功能如下所示。</block>
  <block id="3f89ded204a4589d3a6dc04e8b5f3199" category="verse-content-simple">脚注：是脚注：1[]：不受Trident管理是脚注：2[]：支持原始块卷</block>
  <block id="e999eb209b6aaa7fd15151716377009a" category="paragraph">Trident使用<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block>驱动程序管理<block ref="d617d79fbb5ee3bc8bd280353eeb1349" category="inline-link-macro-rx"></block>服务。</block>
  <block id="67f0b796ae8988fe5446f8f925a4f9d8" category="inline-link-macro">Azure NetApp Files 的 Trident 后端配置</block>
  <block id="46a410b97b05c5034e7d6dd503471548" category="paragraph">有关此驱动程序及其配置方法的详细信息，请参见<block ref="be39645497306a87b14bbf7b3f50cd06" category="inline-link-macro-rx"></block>。</block>
  <block id="57c2378ca2b5638498fcfce53847fb9c" category="verse-content-simple">脚注：是脚注：1[]：不受Trident管理</block>
  <block id="66a053f36417f94321dcee6851d216fb" category="paragraph">Trident使用<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block>驱动程序与Google Cloud上的Cloud Volumes Service链接。</block>
  <block id="372b7e839ce4640b08b006c48ae95057" category="paragraph">该<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block>驱动程序使用虚拟池对后端进行抽象化、并允许Trident确定卷放置。管理员在文件中定义虚拟池<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block>。存储类使用选择器按标签标识虚拟池。</block>
  <block id="ac8324606d3b8866904635470650c639" category="list-text">如果在后端定义了虚拟池、则Trident将尝试在Google Cloud存储池中创建一个卷、而这些虚拟池仅限于此类存储池。</block>
  <block id="9fc446e524c543fa3dd1400cdc43e4a1" category="list-text">如果未在后端定义虚拟池、Trident将从该区域的可用存储池中选择Google Cloud存储池。</block>
  <block id="0fe1467ee5cd2261fbc5597882bb689e" category="paragraph">要在Trident上配置Google Cloud后端，必须在后端文件中指定<block ref="80ef6899136dfcff295c16caa93c2138" prefix=" " category="inline-code"></block>、<block ref="1e9c0fd1beef5ff8ed3bef2ae3b7e560" prefix=" " category="inline-code"></block>和<block ref="c9ff119073ea2567730fb42e3a4fe805" prefix=" " category="inline-code"></block>。您可以在Google Cloud控制台中找到项目编号。API密钥来自您在Google Cloud上为Cloud Volumes Service 设置API访问时创建的服务帐户专用密钥文件。</block>
  <block id="0ae6ba37bc9a9c5f0420b6d38d38f5a9" category="inline-link-macro">了解Trident对CVS for GCP的支持</block>
  <block id="a215dc15f2b1d935791b8a15eeda76fd" category="paragraph">有关Google Cloud上的Cloud Volumes Service服务类型和服务级别的详细信息，请参阅<block ref="76c16eb2ef8acb446255be1d7b0a5f06" category="inline-link-macro-rx"></block>。</block>
  <block id="232ed8614fde30f69091f058b325c923" category="list-text">复制不受Trident管理。</block>
  <block id="452de30c1a2630700e271baac21f9ff5" category="paragraph"><block ref="c614017642b6cfd9e6a25c7df122d917" prefix=" " category="inline-code"></block>参数可帮助将存储限制为与任何指定属性匹配的池集。<block ref="145d1b89a9f9ed8bdc16d1f7a814cace" prefix=" " category="inline-code"></block>参数用于扩展Trident用于配置的池集以及通过属性和参数选择的池集<block ref="c614017642b6cfd9e6a25c7df122d917" prefix=" " category="inline-code"></block>。您可以单独使用参数，也可以同时使用这两个参数，以确保选择适当的存储池集。</block>
  <block id="e2dcff5242641fe99e5de74fa1bfd61c" category="paragraph">所有Trident后端均可使用虚拟池。您可以使用Trident提供的任何驱动程序为任何后端定义虚拟池。</block>
  <block id="976ae934688a6ffde1862ea50e00d6f9" category="paragraph">通过虚拟池、管理员可以在后端创建一个抽象级别、并可通过存储类进行引用、从而提高卷在后端的灵活性和效率。可以使用相同的服务类定义不同的后端。此外、可以在同一后端创建多个存储池、但其特征不同。如果为存储类配置了具有特定标签的选择器、则Trident会选择一个与所有选择器标签匹配的后端来放置卷。如果存储类选择器标签与多个存储池匹配、则Trident将选择其中一个存储池来配置卷。</block>
  <block id="7c8b5a1db3d2eb7f3d2e4fe76042fb2b" category="paragraph">创建后端时，通常可以指定一组参数。管理员无法使用相同的存储凭据和一组不同的参数创建另一个后端。随着虚拟池的推出、此问题描述 得以缓解。虚拟池是在后端和Kubernetes存储类之间引入的级别抽象、因此管理员可以定义参数以及标签、这些参数和标签可以通过Kubernetes存储类作为选择器进行引用、并且与后端无关。可以使用Trident为所有受支持的NetApp后端定义虚拟池。该列表包括 SolidFire/NetApp HCI ， ONTAP ， GCP 上的 Cloud Volumes Service 以及 Azure NetApp Files 。</block>
  <block id="fb241a03678f7f6dbc815840b0eb275b" category="paragraph">创建PVC时、请求的存储类以外的某些参数可能会影响Trident配置决策过程。</block>
  <block id="d0652515edf18bae4abe8c32cbada535" category="paragraph">Trident 将尝试与根据下表指定的访问方法所使用的存储协议匹配。这独立于底层存储平台。</block>
  <block id="5778c34e2378296c943901d6fc399424" category="paragraph">Trident 支持按需创建卷快照，并使用 CSI 框架从快照创建 PVC 。快照提供了一种维护数据时间点副本的便捷方法，并且生命周期独立于 Kubernetes 中的源 PV 。这些快照可用于克隆 PVC 。</block>
  <block id="9aea71aa176b781fee80bdbfd4f20d46" category="paragraph">Trident 还支持从卷快照创建 PersistentVolumes 。为此、只需创建一个PerseentVolumeClaim、并将<block ref="1ea7e575defdf6bc3f26a3f127e98170" prefix=" " category="inline-code"></block>作为需要从中创建卷的所需快照。Trident 将使用快照上的数据创建卷来处理此 PVC 。通过此功能，可以跨区域复制数据，创建测试环境，整体更换损坏或损坏的生产卷，或者检索特定文件和目录并将其传输到另一个连接的卷。</block>
  <block id="ed6f39ab5224d264f94fc4324f391366" category="paragraph">存储管理员可以在 ONTAP 集群中的聚合和控制器之间无中断地将卷移动到存储使用者。只要目标聚合是Trident正在使用的SVM有权访问的聚合、此操作不会影响Trident或Kubornetes集群。重要的是、如果此聚合已新添加到SVM中、则需要通过将其重新添加到Trident来刷新后端。此操作将触发 Trident 来重新清点 SVM ，以便识别新聚合。</block>
  <block id="aec7eb75babd44ee65e8fe4e8f0b1096" category="paragraph">但是， Trident 不支持在后端之间自动移动卷。这包括在同一集群中的 SVM 之间，集群之间或不同存储平台上（即使该存储系统是连接到 Trident 的存储系统也是如此）。</block>
  <block id="16c30c56fe00d20f49bb055490dff7aa" category="paragraph">如果将卷复制到其他位置，则可以使用卷导入功能将当前卷导入到 Trident 中。</block>
  <block id="6b810970c1e58f8070c318df43054f6c" category="paragraph">使用ONTAP和驱动程序时<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>、请使用命令<block ref="5b139f5309999fcf6a4bbc8389cbc865" prefix=" " category="inline-code"></block>将现有卷导入到要由Trident管理的Kubnetes中。导入卷命令中使用的 PVC YAML 或 JSON 文件指向将 Trident 标识为配置程序的存储类。使用 NetApp HCI/SolidFire 后端时，请确保卷名称是唯一的。如果卷名称重复，请将卷克隆为唯一名称，以便卷导入功能可以区分它们。</block>
  <block id="39367d7a2c7f9b4acc498f4324db020c" category="paragraph">如果<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block>使用或驱动程序、请使用命令<block ref="37e8b35fb48ead6318ca6f2f83110554" prefix=" " category="inline-code"></block>将卷导入到Trident要管理的Kubornetes<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block>中。这样可以确保卷引用是唯一的。</block>
  <block id="4cb042ac9491457dd22d7368d4fa27c1" category="paragraph">执行上述命令后， Trident 将在后端找到卷并读取其大小。它会自动添加(并在必要时覆盖)已配置的PVC卷大小。然后， Trident 会创建新的 PV ， Kubernetes 会将 PVC 绑定到 PV 。</block>
  <block id="e8b2e1fd32346fcd38f11f84cd51d409" category="paragraph">使用在主机 / 清单文件中定义的适当 Ansible 变量，使用 Ansible 部署服务。如果您在 OpenShift 安装时进行部署，则系统将自动创建和使用 PV 。如果您要使用组件操作手册进行部署、则在安装OpenShift后、Ansable会创建所需的任何PVC、并在Trident为其配置存储后部署该服务。</block>
  <block id="d6e925b1fae42b853ba04f3810c28628" category="summary">您可以启用Linux统一密钥设置(Unified Key Setup、LKS)来对Trident上的ONTAP SAN和ONTAP SAN经济型卷进行加密。Trident支持对经过LUN加密的卷调整卷大小和密钥(密码短语)轮换。</block>
  <block id="3d987bdfee54b4cc132665887eab7b60" category="paragraph">您可以启用Linux统一密钥设置(Unified Key Setup、LKS)来对Trident上的ONTAP SAN和ONTAP SAN经济型卷进行加密。Trident支持对经过LUN加密的卷进行密码短语轮换和卷扩展。</block>
  <block id="35ae21817657169af402c244d1974dfd" category="paragraph">在Trident中，根据的建议，经过LUN加密的卷使用AES-XTS-PLAN 64 cypher和模式<block ref="79a538d5fda32e1565131ca044d589f6" category="inline-link-macro-rx"></block>。</block>
  <block id="32a9b32fc41708606002471c1eb3f55c" category="paragraph">要导入LUN卷、必须在后端将设置<block ref="0f179ba2bc32ab5d8f60692f5b800c86" prefix=" " category="inline-code"></block>为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>。该<block ref="0f179ba2bc32ab5d8f60692f5b800c86" prefix=" " category="inline-code"></block>选项会告诉Trident卷是符合LUN <block ref="b326b5062b2f0e69046810717534cb09" prefix="(" category="inline-code"></block>(兼容)还是不符合LUN <block ref="68934a3e9455fa72420237eb05902327" prefix="(" category="inline-code"></block>(兼容)，如以下示例所示。</block>
  <block id="623002c2cdb3e388098c78e4a56c5f74" category="paragraph">如果在指定新的LUKS密码短语后创建了挂载卷的POD、则会发生LUKS密码短语轮换。创建新Pod时、Trident会将卷上的LUN密码短语与密钥中的活动密码短语进行比较。</block>
  <block id="0cf736e750e01f7d7ddbc08fe8297576" category="summary">请按照此处列出的建议确保Trident安装安全。</block>
  <block id="e047f381a9811c1d60a8a3750b2d0cda" category="paragraph">请按照此处列出的建议确保Trident安装安全。</block>
  <block id="2d40d7a116d252bb16ef5b074c9c28ee" category="section-title">在自己的命名空间中运行Trident</block>
  <block id="7d4a55ae858dcca9ad616f33e6035cc6" category="paragraph">请务必防止应用程序、应用程序管理员、用户和管理应用程序访问Trident对象定义或Pod、以确保可靠的存储并阻止潜在的恶意活动。</block>
  <block id="59eb6cc525324355d85d541c963c8697" category="paragraph">要将其他应用程序和用户与Trident分离，请始终将Trident安装在其自身的Kubbernetes命名空间中<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix="(" category="inline-code"></block>)。将Trident置于自己的命名空间中可确保只有Kubelnetes管理人员才能访问Trident Pod和存储在命名空间CRD对象中的项目(如适用、例如后端和CHAP密码)。您应确保仅允许管理员访问Trident命名空间、从而访问<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>应用程序。</block>
  <block id="9d9837d692b44e524c96b427964bea85" category="paragraph">Trident支持对ONTAP SAN工作负载进行基于CHAP的身份验证(使用<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>驱动程序)。NetApp建议对Trident使用双向CHAP在主机和存储后端之间进行身份验证。</block>
  <block id="a77f6a8d6a33d8d8102cdeed9631b96d" category="paragraph">NetApp 建议部署双向 CHAP ，以确保主机与 NetApp HCI 和 SolidFire 后端之间的身份验证。Trident使用一个机密对象、其中每个租户包含两个CHAP密码。安装Trident后、它会管理CHAP密钥、并将其存储在相应PV的CR对象中<block ref="3ddc70b4b408f6dd5bbd5fe7d6008993" prefix=" " category="inline-code"></block>。创建PV时、Trident会使用CHAP密码启动iSCSI会话并通过CHAP与NetApp HCI和SolidFire系统进行通信。</block>
  <block id="99dfe9c8c9bd791b7382d67a440c38be" category="admonition">Trident创建的卷不与任何卷访问组关联。</block>
  <block id="9559c7656e8a28d235478856aa8e44ce" category="section-title">将Trident与NVE和NAE结合使用</block>
  <block id="4a8deb2ba46901e5599a8d9ca85ca254" category="list-text">如果在后端启用了NAE、则在Trident中配置的任何卷都将启用NAE。</block>
  <block id="6fd5fcab13431f04cede0c124a46282a" category="paragraph">在启用了NAE的后端的Trident中创建的卷必须已进行NVE或NAE加密。</block>
  <block id="18eea8a0000e827a336c57c06568e4d5" category="list-text">如果在启用了NAE的后端将NVE加密标志设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>、则会创建启用了NAE的卷。您不能通过将NVE加密标志设置为来禁用NAE加密<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>。</block>
  <block id="9feef6eaebf84b29639dd7c179735c8c" category="list-text">您可以通过将NVE加密标志显式设置为来在Trident中手动创建NVE卷<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>。</block>
  <block id="4551cdad3ae48d3a807028a224a3617f" category="admonition">通常、您不需要管理<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>对象。但是、如果要在Trident外部创建、则会出现一个例外情况<block ref="0b4cdf17ac3e4123330cb8e51ec533a2" category="inline-link-macro-rx"></block>。</block>
  <block id="805098fafaaebe033d70c80fe542e3af" category="paragraph">Trident使用<block ref="99bc4b850e05bafd67cf5f5f49344c1e" prefix=" " category="inline-code"></block>对象保留Trident对象的身份、例如Trident后端、Trident存储类和Trident卷。这些对象由 Trident 管理。此外， CSI 卷快照框架还引入了一些定义卷快照所需的 CRD 。</block>
  <block id="a8a62fe3b16797ce253b78f83dc73a18" category="section-title">Trident<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>对象</block>
  <block id="21283df20640a21f468122a427ef1bfc" category="section-title">Trident 后端对象</block>
  <block id="8a4410d54113ca147b35c633207444b7" category="section-title">Trident<block ref="5e5d444b688db40e013a7d0b8b3c0898" prefix=" " category="inline-code"></block>对象</block>
  <block id="f08d82cd2f4fa097db43220a04f62434" category="section-title">Trident<block ref="bd7a9717d29c5ddcab1bc175eda1e298" prefix=" " category="inline-code"></block>对象</block>
  <block id="9b53117639a1995b2872ed6bca3dec8e" category="section-title">Trident<block ref="d4e2713d1b1725a1592f9268589f990d" prefix=" " category="inline-code"></block>对象</block>
  <block id="7eff879bfca572dbfc347fa226402a22" category="section-title">Trident<block ref="0b79951d94d2a7fc1f7ba55091959bda" prefix=" " category="inline-code"></block>对象</block>
  <block id="554741cc944c4e5f022fcbc0fa74e635" category="paragraph">Trident守护进程使用优先级类(KubeNet中可用的最高优先级类)、以确保Trident可以在正常节点关闭期间识别和清理卷、并允许Trident守护进程<block ref="e2c3c5140d40bff7c63d42afa55e20cb" prefix=" " category="inline-code"></block>Pod抢占资源压力较高的集群中优先级较低的工作负载。</block>
  <block id="ee17e6c68211ace703b5692f81c2e6c4" category="paragraph">为此、Trident会使用一个<block ref="0b79951d94d2a7fc1f7ba55091959bda" prefix=" " category="inline-code"></block>对象来确保满足Trident守护程序集上的"system-node critical"优先级类。在部署和创建守护进程之前、Trident会查找对象、如果未发现、则会应用该<block ref="0b79951d94d2a7fc1f7ba55091959bda" prefix=" " category="inline-code"></block>对象。</block>
  <block id="b09f29e72667c7bbfee7df15e0918219" category="paragraph">如果您希望控制自己的资源分配、可以使用以下命令删除Trident<block ref="0b79951d94d2a7fc1f7ba55091959bda" prefix=" " category="inline-code"></block>对象：</block>
  <block id="6f9b6f4ef23610d31af9db2f8015cd91" category="summary">Kubernetes Pod安全标准(PSS)和Pod安全策略(PSP)定义权限级别并限制Pod的行为。OpenShift安全上下文约束(SCC)同样定义了特定于OpenShift Kubernetes引擎的POD限制。为了提供此自定义功能、Trident会在安装期间启用某些权限。</block>
  <block id="75f5ed582d115d8da9d2b70f7279ae9c" category="paragraph">Kubernetes Pod安全标准(PSS)和Pod安全策略(PSP)定义权限级别并限制Pod的行为。OpenShift安全上下文约束(SCC)同样定义了特定于OpenShift Kubernetes引擎的POD限制。为了提供此自定义功能、Trident会在安装期间启用某些权限。以下各节详细介绍了Trident设置的权限。</block>
  <block id="81f58ff2750ef607f5ace37340e32983" category="cell">启动NFS时需要此参数<block ref="3fc52a01383634d8618b7d25147b3990" prefix=" " category="inline-code"></block>。Trident会在挂载NFS卷之前查询主机进程以确定是否<block ref="3fc52a01383634d8618b7d25147b3990" prefix=" " category="inline-code"></block>正在运行。</block>
  <block id="8c4d735e96caff70ec2fb4b6da0b8647" category="cell">Seccomp配置文件始终处于"非受限"状态、因此无法在Trident中启用。</block>
  <block id="55067c9b7862cdb9b724bac1e11f114e" category="cell">在OpenShift上、有权限的容器在("超级特权容器")域中运行<block ref="4c6c95436260ecf7ab3cf7558410a157" prefix=" " category="inline-code"></block>、无权限的容器在域中运行<block ref="ce0991860b118fa3ab777cbb62c7caa5" prefix=" " category="inline-code"></block>。在上<block ref="34c54dce528ae11502f7c2908c0e4a21" prefix=" " category="inline-code"></block>，安装后<block ref="c42c2c095fe432fac047b16b37a0c05c" prefix=" " category="inline-code"></block>，所有容器都在域中运行<block ref="4c6c95436260ecf7ab3cf7558410a157" prefix=" " category="inline-code"></block>，从而有效地禁用SELinux。因此、Trident不会添加<block ref="0221dccbaacc71551feb621f4ebfae36" prefix=" " category="inline-code"></block>到容器中。</block>
  <block id="1b1944fe544c06f29c78d07fcfbf4683" category="summary">详细了解Trident通信所使用的端口。</block>
  <block id="190c8d0a8c0f9d99e2a5cee87981451c" category="paragraph">详细了解Trident用于通信的端口。</block>
  <block id="cf99312afccffdb3b97f892cb91990a0" category="summary">如果您希望与Trident的REST API进行交互、则可以直接使用REST端点。</block>
  <block id="5eee484e5d1a379b56272cbb68f0b4a6" category="doc">Trident REST API</block>
  <block id="01244d6a0ae311e8f26e37eff3b90b3a" category="paragraph">虽然<block ref="8321852d17a287399cb52ef30f4b21eb" category="inline-link-macro-rx"></block>这是与Trident REST API交互的最简单方式、但您也可以根据需要直接使用REST端点。</block>
  <block id="d802062141c45c0c8ed9e54ff53f4878" category="paragraph">对于在非Kubnetes部署中使用Trident作为独立二进制文件的高级安装、REST API非常有用。</block>
  <block id="daef2c20475904ee3d06d11ab5e5cc0a" category="paragraph">为了提高安全性、默认情况下、在Pod中运行时、Trident<block ref="aba3d4b49c454e1974970e7b5514b001" prefix=" " category="inline-code"></block>仅限于本地主机。要更改此行为、您需要在Pod配置中设置Trident的<block ref="38df54fe961fa2bf2a7f82a5854fabad" prefix=" " category="inline-code"></block>参数。</block>
  <block id="4e1a255728b39675b43f116f4cfb488b" category="paragraph">有关如何调用这些API的示例，请传递debug <block ref="9b017020b9d48d433ec90c548e6b5c70" prefix="(" category="inline-code"></block>)标志。有关详细信息，请参阅 <block ref="47a3478e106194126b8a4a249a182714" category="inline-link-macro-rx"></block>。</block>
  <block id="e0fcace21bf76f1a9c21940cb093720e" category="list-text">需要为要创建的对象配置 JSON 。有关每种对象类型的规范，请参见<block ref="47a3478e106194126b8a4a249a182714" category="inline-link-macro-rx"></block>。</block>
  <block id="de7f4e4d8a5861d8381abc8bfafc64c2" category="admonition">与后端或存储类关联的卷将继续存在；必须单独删除这些卷。有关详细信息，请参阅 <block ref="47a3478e106194126b8a4a249a182714" category="inline-link-macro-rx"></block>。</block>
  <block id="9cd971ecdea9d32fa28fcdca5951a02c" category="summary">Trident为Trident流程编排程序提供了多个命令行选项、并可通过特定端口进行通信。</block>
  <block id="33649eaebf2b1cded3cfe2ae660b3db8" category="paragraph">Trident为Trident流程编排程序提供了多个命令行选项。您可以使用这些选项修改部署。</block>
  <block id="df659a37411eac4669a05e25173aa8b7" category="list-text">使用此选项或启用Kubornetes<block ref="4012723fd7948507761ae4f00f8a6ce5" prefix=" " category="inline-code"></block>支持。指定后， Trident 将使用提供的不安全地址和端口连接到 Kubernetes API 服务器。这样、Trident便可部署在POD之外；但是、它仅支持与API服务器的不安全连接。要安全连接、请使用选项在POD中部署Trident<block ref="4012723fd7948507761ae4f00f8a6ce5" prefix=" " category="inline-code"></block>。</block>
  <block id="e3ab8ff46f9c86474b01bf93b504507e" category="summary">NetApp 不断改进和完善其产品和服务。下面是最新版本的Trident中的一些最新功能、增强功能和错误修复。</block>
  <block id="f219960762ce1ea892bf48746515e583" category="list-text">Google Cloud NetApp卷驱动程序现已广泛适用于NFS卷、并支持区域感知型配置。</block>
  <block id="09dc81fef04f949a006210deaff2f205" category="list-text">GCP工作负载标识将用作具有GKE的Google Cloud NetApp卷的云标识。</block>
  <block id="179837f123bf751c03460e6d2e0927c2" category="list-text">向ONTAP－SAN和LUN－SAN－Economy驱动程序中添加了<block ref="ef225248e79c14501d51a4941b5ae5d1" prefix=" " category="inline-code"></block>配置参数，以允许用户指定ONTAP格式选项。</block>
  <block id="b500d40dfa3ea14369fdaf59d3b1c835" category="list-text">已将Azure NetApp Files最小卷大小减少到50 GiB。Azure新的最小大小预计将于11月全面上市。</block>
  <block id="2e6f95101e443ed93c211c35457a90e6" category="list-text">添加了<block ref="80fd16da9d17abac4374b362f2e409fe" prefix=" " category="inline-code"></block>配置参数、用于将ONTAP－NAS－经济型和ONTAP－SAN经济型驱动程序限制为原有的FlexVol池。</block>
  <block id="bf300dbe4f3e7fba7ef23cdf029d7f54" category="list-text">增加了对在所有ONTAP驱动程序中从SVM添加、删除或重命名聚合的检测功能。</block>
  <block id="9528c4a630c0b90815b8626d441c3d22" category="list-text">为LUKS LUN增加了18MiB开销、以确保报告的PVC大小可用。</block>
  <block id="b0587c4582678977a894feccef58eb73" category="list-text">改进了ONTAP - SAN和ONTAP - SAN经济型节点阶段和取消暂存错误处理、以便在出现故障阶段后取消暂存以删除设备。</block>
  <block id="914e332f78206303c5897d6de3d31dc4" category="list-text">添加了一个自定义角色生成器、允许客户在ONTAP中为Trident创建一个精简角色。</block>
  <block id="54a5a20d9182724aeda126c68ff2d500" category="inline-link-macro">问题描述#792</block>
  <block id="ae953ee35cc48d929d62cd63fe1a5db9" category="list-text">添加了用于故障排除的其他日志记录<block ref="2a18927ad567a1bf015ee23d2f7d416f" prefix=" " category="inline-code"></block><block ref="0ac90c45cb5e08b111534147dc8d07bf" category="inline-link-macro-rx"></block>()。</block>
  <block id="d28325b08a2b4a8f4af42dc025afe338" category="list-text">为安装程序添加了一个新标志<block ref="060e82a16c6de7d9a8541fb1da32de80" prefix=" " category="inline-code"></block>、用于设置Trident与Kubbernetes API服务器通信所使用的QPS值。</block>
  <block id="46b4e7bf1e76e8eeb88747ded42b6d4f" category="list-text">为安装程序添加了<block ref="1606f6268af560ddbfffdd3790afb4d2" prefix=" " category="inline-code"></block>一个标志、用于自动管理Kubernetes集群节点上的存储协议依赖关系。已测试并验证与Amazon Linux 2023 iSCSI存储协议的兼容性</block>
  <block id="ee2cc86dbfffd3b53ed4701a6b458dfb" category="list-text">增加了对在非正常节点关闭情况下强制断开ONTAP - NAS经济型卷的支持。</block>
  <block id="326a8f228f219b0e904c9d182f05edc0" category="list-text">使用后端选项时、新的NFS-NAS经济型ONTAP卷将使用每个qtree导出策略<block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix=" " category="inline-code"></block>。只有在发布时、qtrees才会映射到节点限制性导出策略、以提高访问控制和安全性。当Trident从所有节点取消发布卷时、现有qtrees将切换到新的导出策略模型、这样做不会影响活动工作负载。</block>
  <block id="62900e6f021ab726737e77fc086ef8d8" category="list-text">增加了对Kubnetes 1.31的支持。</block>
  <block id="99feca4f342726633c553b7037f4effd" category="section-title">试验性增强功能</block>
  <block id="f47cb8e173cabaf3981c7356253eaf5f" category="list-text">*Kubernetes*：</block>
  <block id="d17c6ce149a6479587ff459c15a1f857" category="inline-link-macro">问题描述#839</block>
  <block id="0d72ada08f4f4a9200f5e98c300ac3f5" category="list-text">阻止Trident Helm安装的固定兰彻入场网钩<block ref="db779c46d1b4e6ce40c3816626258ba8" category="inline-link-macro-rx"></block>()。</block>
  <block id="c4a8381892da41f8d4badcb947360547" category="inline-link-macro">问题描述#898</block>
  <block id="2403ede55427cd43025cacf6e3c01d80" category="list-text">Helm图表值中的固定相关性键<block ref="54ec46fe50699b7fd3f7ef30c485e12a" category="inline-link-macro-rx"></block>()。</block>
  <block id="72ce7c26f0607a9f5bd8ca30e55cacef" category="inline-link-macro">问题描述#899</block>
  <block id="cede03cb51e9bbed6dcab643181d12d7" category="list-text">固定tentControllerPluginNodeSelector/tldentNodePluginNodeSelector不 能与"true"值一起使用<block ref="5d339a433df6492948708982baf428fa" category="inline-link-macro-rx"></block>()。</block>
  <block id="f11d62f384cbec26d8ed4550c153bf05" category="inline-link-macro">问题描述#901</block>
  <block id="a0b1bd692e916f05f2ede181b41aa8a9" category="list-text">已删除克隆期间创建的一段时间快照<block ref="ef65b2f52a8de25e7edcbd74532daf2c" category="inline-link-macro-rx"></block>()。</block>
  <block id="7d873532774b92f91f5b02b26b6ab15f" category="list-text">增加了对Windows Server 2019的支持。</block>
  <block id="c1932a20d0117f7b70be58add390f98b" category="inline-link-macro">问题描述#767</block>
  <block id="b205e07db438d75480a1439aaea49b90" category="list-text">在Trident repo()中修复`Go mod Tidy `<block ref="b886e4c1dbe24e4b012cebe88d7f5dfa" category="inline-link-macro-rx"></block>。</block>
  <block id="0c1b395b1875f8cc0a3a3065e200951a" category="list-text">* Kubernetes：*</block>
  <block id="86c0118c20bbec39a37e58e07b4ca78e" category="list-text">已将支持的最小Kubbernetes更新为1.25。</block>
  <block id="8b1b4442b4204fbf84931236c6402e37" category="list-text">不再支持POD安全策略。</block>
  <block id="4f52a386be5239d16bac5e9e054c7686" category="section-title">产品品牌重塑</block>
  <block id="b56fb7b6833a5dc3a047885cd9fb56b3" category="section-title">24.06中的变化</block>
  <block id="59757b96b5b7c76f5131b54a97bfb34b" category="list-text">增加了将Trident控制器的用户配置日志设置传播到Trident节点Pod的功能。</block>
  <block id="0d9957366afc474c1adc655929d57fcc" category="list-text">新增了Trident DemonSet在启动时清理zombie挂载和剩余跟踪文件的功能<block ref="1db457cca48a821c9957caae88cdf1d0" category="inline-link-macro-rx"></block>()。</block>
  <block id="32c6cb7d24cfe592a3da026077c89057" category="list-text">修复了因事务陈旧而导致的Trident安装失败问题。</block>
  <block id="268938527c6b78a7ed673063e5a861e7" category="list-text">已将Trident控制器优先级更<block ref="4727953cbcafc9a49db2d5e1fbb4878a" prefix=" " category="inline-code"></block>改为<block ref="cfcd208495d565ef66e7dff9f98764da" prefix=" " category="inline-code"></block><block ref="f7f5a51d8afc55795aa860b78e4c6437" category="inline-link-macro-rx"></block>()。</block>
  <block id="f81abe23ec78b1087f167b2fcf413105" category="list-text">增加了从EKS控制台将Trident作为附加项安装在EKS集群上的支持。</block>
  <block id="81a270127bea2c4d04088d2a999f883e" category="list-text">修复了重新启动Windows节点时该节点上的Trident初始化问题。</block>
  <block id="84874d4f1fcbda2a79fad9c2be463612" category="admonition">现在、在Trident中支持Kubnetes 1.27。请先升级Trident、然后再升级Kubernetes。</block>
  <block id="8bf4d4f1641bc0ae0e1ce84b2301ad3c" category="paragraph">*在升级到Trident 22.10.*之前，必须阅读以下重要信息</block>
  <block id="3c8c581ba3964d04278eae9be921969f" category="admonition-title">&lt;strong&gt;有关Trident 22.10 &lt;/strong&gt;的信息</block>
  <block id="2ec2ecd5679471f4915360aaa9562646" category="list-text">现在、在Trident中支持Kubnetes 1.25。您必须先将Trident升级到22.10、然后才能升级到Kubbernetes 1.25。</block>
  <block id="3fe15650bf774497f976b0dcd6e74e95" category="list-text">现在、Trident会在SAN环境中严格强制使用多路径配置、并在Multipath.conf文件中使用建议值<block ref="db729c5c8df447087e5a84b961df14f6" prefix=" " category="inline-code"></block>。</block>
  <block id="3e84d49b37065ae841277ed78e8fb1bb" category="list-text">删除了Trident iSCSI工作流中的细粒度重试、以快速失败并缩短外部重试间隔。</block>
  <block id="b1ae71d1cd3967fcca9453f4087b19ef" category="list-text">增加了对Kubnetes 1.25的支持。您必须先将Trident升级到22.10、然后才能升级到Kubbernetes 1.25。</block>
  <block id="95b61962ec35cc252a4791e4101c5aaa" category="list-text">现在、ONTAP SAN卷将使用每个节点的igroup、并且仅将LUN映射到igroup、而将其主动发布到这些节点、以改善我们的安全状况。如果Trident确定在不影响活动工作负载的情况下安全执行此操作、现有卷将有机会切换到新的igroup方案。</block>
  <block id="5e65f8ef909da6c604c403e32b1b48ee" category="paragraph">添加了一个新的<block ref="305368b4f0d008a807e095ab9da58448" category="inline-link-macro-rx"></block>(PSS)部分，详细介绍了Trident在安装时启用的权限。</block>
  <block id="1709d6f66b1414fcc9f298c36d33f86b" category="paragraph">NetApp 不断改进和完善其产品和服务。下面是Trident中的一些最新功能。有关以前版本的信息，请参阅<block ref="25da125dffad1d6323c21354bccf0203" category="inline-link-rx"></block>。</block>
  <block id="0e258ce589a7c5edca46e96701e7a846" category="list-text">修复了在SolidFire卷上创建32个快照时Trident性能降低的问题。</block>
  <block id="abf7e791f62ca6d68b31527c63563786" category="list-text">修复了Trident在关闭时记录致命错误的问题(GitHub问题597)。</block>
  <block id="20179fee7c8b97f5118f8bb139c3e3ee" category="list-text">修复了所有Trident安装程序都可以将纯KubeNet标识为OpenShift的问题(GitHub第639期)。</block>
  <block id="da7c48c170570a143b062de762b69ac3" category="list-text">Trident现在会 <block ref="6d8a605a6037c779649e91ad03a19c1c" prefix="(" category="inline-code"></block>对存储类中未指定的卷强制使用空白<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>)<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>。使用Kubernetes 1.17或更高版本时、Trident支持为NFS卷提供空白<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>。对于iSCSI卷、在使用安全上下文强制实施时、您需要在StorageClass上<block ref="c7a6c0ee60c6f68dfe700feaacf15703" prefix=" " category="inline-code"></block>设置<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>。</block>
  <block id="e19cc53ffca782e210d63cc3ba607068" category="list-text">在多个Trident实例中使用后端时、每个后端配置文件应为ONTAP后端设置不同的值、或者为SolidFire后端<block ref="ed66bef2b107983b6e4066fddf8c45c3" prefix=" " category="inline-code"></block>设置不同的值<block ref="2e9183e3f034dbf1322a3385f151456e" prefix=" " category="inline-code"></block>。Trident无法检测其他Trident实例已创建的卷。尝试在ONTAP或SolidFire后端创建现有卷会成功、因为Trident会将卷创建视为一项具有等量功能的操作。如果<block ref="ed66bef2b107983b6e4066fddf8c45c3" prefix=" " category="inline-code"></block>或<block ref="2e9183e3f034dbf1322a3385f151456e" prefix=" " category="inline-code"></block>不不同、则在同一后端创建的卷可能会发生名称冲突。</block>
  <block id="f361d11207fb1bf400735cf23bd3eead" category="list-text">在安装Trident (使用或Trident操作员)以及使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>管理Trident时<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>、您应确保<block ref="39e7fa5a13dbc25a4aa8c4b323cd657c" prefix=" " category="inline-code"></block>已设置环境变量。这是指示应处理的Kubbernetes集群所必需的<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。在使用多个Kubnetes环境时、您应确保<block ref="39e7fa5a13dbc25a4aa8c4b323cd657c" prefix=" " category="inline-code"></block>文件的来源准确无误。</block>
  <block id="fb03c645f52123146ba91e4a67fc8b1e" category="list-text">如果每个Kubornetes集群具有多个Trident实例、则Trident无法与其他实例进行通信、并且无法发现其创建的其他卷、如果在一个集群中运行多个实例、则会导致出现意外且不正确的行为。每个Kubnetes集群只应有一个Trident实例。</block>
  <block id="6d2a9758a5a695c93ba565384c106ee5" category="list-text">如果在Trident脱机时从Kubnetes中删除基于Trident的<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>对象、则Trident不会在其数据库恢复联机后从其数据库中删除相应的存储类。您应使用或REST API删除这些存储类<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="8064c72c81e13811dd14b604af2cba51" category="list-text">如果用户在删除相应的PVC之前删除了Trident配置的PV、则Trident不会自动删除后备卷。您应通过或REST API删除此卷<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="cf2e8e446588a928fb23cb0dbd820e8b" category="list-text">使用基于IPv6的Trident时、应在后端定义中使用方括号指定<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block>和<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>。例如，<block ref="cbd17d3c94dc0ed51eeeab01d2ae8741" prefix="" category="inline-code"></block>。</block>
  <block id="b75a48587845391dbbe47d0dcc15d3c0" category="admonition">您不能在ONTAP SAN后端指定<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>。Trident会发现所有可用的iSCSI LUN并使用它们建立多路径会话。</block>
  <block id="8a247589aa6f5931b3416e5dd64ba361" category="inline-link">Trident GitHub</block>
  <block id="2e62261179042a713555c66362bf55b6" category="list-text"><block ref="2e62261179042a713555c66362bf55b6" category="inline-link-rx"></block></block>
  <block id="fd898492f5f83a18091a5e6c78cf2276" category="list-text"><block ref="fd898492f5f83a18091a5e6c78cf2276" category="inline-link-rx"></block></block>
  <block id="7afa2d89ddb38b52ee6c828cd75c06c9" category="paragraph">Trident可使用您的后端配置(子网、虚拟网络、服务级别和位置)在请求位置可用的容量池上创建Azure NetApp Files卷、并与请求的服务级别和子网匹配。</block>
  <block id="47696c1242682d2928198892a193df8f" category="admonition">Trident不支持手动QoS容量池。</block>
  <block id="e9acc9c9f9c15bdc3abfff747835f188" category="paragraph">这是绝对的最低后端配置。使用此配置时、Trident会发现在所配置位置委派给Azure NetApp Files的所有NetApp帐户、容量池和子网、并随机将新卷放置在其中一个池和子网上。由于<block ref="296026821ada2ab8aebcf13547a63df5" prefix=" " category="inline-code"></block> 省略了、因此会<block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix=" " category="inline-code"></block> 应用默认设置、后端将为NFS卷配置。</block>
  <block id="c23ef0ddbc293eb69087843f50a25be6" category="paragraph">此后端配置会将卷放置在Azure的<block ref="6356111305f5daab178fa6051b7a8ae7" prefix=" " category="inline-code"></block>容量池中<block ref="7057376a419b3334cc7b8b7a9f064abb" prefix=" " category="inline-code"></block>。Trident会自动发现该位置委派给Azure NetApp Files的所有子网、并随机在其中一个子网上放置一个新卷。</block>
  <block id="fefaa3b6dca112cc6521c571cfc3803d" category="paragraph">Trident可以根据区域和可用性区域为工作负载配置卷。<block ref="1f2a94e142bf020b1f7c6297ec12413f" prefix=" " category="inline-code"></block>此后端配置中的块用于提供每个后端的区域和分区列表。此处指定的区域和分区值必须与每个Kubnetes集群节点上标签中的区域和分区值匹配。这些区域和分区表示可在存储类中提供的允许值列表。对于包含后端提供的部分区域和区域的存储类、Trident会在上述区域和区域中创建卷。有关详细信息，请参阅 <block ref="a735758eec435cad1c5672b75bd657c0" category="inline-link-macro-rx"></block>。</block>
  <block id="cc13c2d3734cd4826a8ef70e17841621" category="list-text"><block ref="8ad3956583058d3582a7dd1281d1f882" category="inline-link-macro-rx"></block>订阅级别<block ref="e023f2926fb9af676f2809a760efeb14" prefix="(" category="inline-code"></block>的)具有以下权限，这些权限仅限于Trident所需的权限。创建自定义角色后，<block ref="af58105ed429db29198b767444ed6d0d" category="inline-link-macro-rx"></block>。</block>
  <block id="8ce7a57e3680dab09c67446ce08707de" category="list-text">一个Kubernetes集群、其中包含一个Linux控制器节点以及至少一个运行Windows Server 2022的Windows工作节点。Trident仅支持挂载到Windows节点上运行的Pod的SMB卷。</block>
  <block id="d118256fd34a78d74f0336eb83898964" category="list-text">至少一个包含Active Directory凭据的Trident密钥、以便Azure NetApp Files可以向Active Directory进行身份验证。生成密钥<block ref="e47a193687dde960f6b6f80d394142a3" prefix=" " category="inline-code"></block>：</block>
  <block id="4d869f60891f92b0887fa0954bb83cf6" category="summary">您可以将Azure NetApp Files配置为Trident的后端。您可以使用Azure NetApp Files后端连接NFS和SMB卷。Trident还支持使用托管身份对Azure Kubnetes Services (AKS)集群进行凭据管理。</block>
  <block id="d0c2adbcdd991dec2899d7223e4800b7" category="paragraph">Trident提供了以下Azure NetApp Files存储驱动程序来与集群进行通信。支持的访问模式包括：_ReadWriteOnce_(RWO)、_ReadOnlyMany_(ROX)、_ReadWriteMany_(rwx)、_ReadWriteOncePod_(RWOP)。</block>
  <block id="6bc1d5588b10361a0f432d43d687c72b" category="list-text">Azure NetApp Files服务不支持小于50 GiB的卷。如果请求的卷较小、Trident会自动创建50 GiB卷。</block>
  <block id="2d5ff5cb87519a4e50ace141656cfcb1" category="list-text">Trident仅支持挂载到Windows节点上运行的Pod的SMB卷。</block>
  <block id="f82e660891c5d7411358cecf3f95d1b8" category="paragraph">Trident支持<block ref="74c572b9a9e05a7969e3f88bd692fcb8" category="inline-link-macro-rx"></block>Azure Kubnetes服务集群。要利用受管身份提供的简化凭据管理、您必须：</block>
  <block id="ba4a4a15a9255fcbc02a1aae5442a70e" category="list-text">安装了Trident，其中包括要指定<block ref="71d36c46e340ad9137b2691e267f5ecd" prefix=" " category="inline-code"></block>的<block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix=" " category="inline-code"></block>。</block>
  <block id="948b24b4e198f8ddc985605c69c55718" category="paragraph">要使用Trident运算符安装Trident，请编辑<block ref="244895464fd1d6c7ff5a2044c324c0fc" prefix=" " category="inline-code"></block>以将设置<block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix=" " category="inline-code"></block>为<block ref="71d36c46e340ad9137b2691e267f5ecd" prefix=" " category="inline-code"></block>。例如：</block>
  <block id="6e3a55be7185a416b963c89e1313a21e" category="paragraph">以下示例使用环境变量将Trident集安装<block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix=" " category="inline-code"></block>到Azure<block ref="e7b51407a2bfaa34b58afce0107e9a5f" prefix=" " category="inline-code"></block>：</block>
  <block id="5914afb9381493b19e7d55f591b22f7e" category="paragraph">以下示例将安装Trident并将标志设置<block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix=" " category="inline-code"></block>为<block ref="3a580f142203677f1f0bc30898f63f53" prefix=" " category="inline-code"></block>：</block>
  <block id="f4a04ca0cf488acdb4c47e4276e53b0d" category="list-text">已安装Trident、其中包括<block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix=" " category="inline-code"></block>用于指定<block ref="71d36c46e340ad9137b2691e267f5ecd" prefix=" " category="inline-code"></block>和<block ref="89abe9fddbe3cf0f9bcd7779fe4aed69" prefix=" " category="inline-code"></block>指定工作负载标识的</block>
  <block id="cd1b43a026c160e8905dc5847d424f8f" category="paragraph">要使用Trident运算符安装Trident，请编辑<block ref="244895464fd1d6c7ff5a2044c324c0fc" prefix=" " category="inline-code"></block>以将设置为，并将<block ref="89abe9fddbe3cf0f9bcd7779fe4aed69" prefix=" " category="inline-code"></block>设置<block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix=" " category="inline-code"></block>为<block ref="71d36c46e340ad9137b2691e267f5ecd" prefix=" " category="inline-code"></block><block ref="ab6b275be02c02a9982cb7a0c234629e" prefix=" " category="inline-code"></block>。</block>
  <block id="0df381404177fadd38b0a15ef178cf09" category="paragraph">以下示例将安装Trident并使用环境变量将设置<block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix=" " category="inline-code"></block>为Azure<block ref="e7b51407a2bfaa34b58afce0107e9a5f" prefix=" " category="inline-code"></block>、并使用环境变量<block ref="c9d280b28993d1d105c3fbafb5868a15" prefix=" " category="inline-code"></block>设置<block ref="89abe9fddbe3cf0f9bcd7779fe4aed69" prefix=" " category="inline-code"></block>：</block>
  <block id="7d7c872ffb338fffab0ed66d892cf48b" category="paragraph">以下示例将安装Trident并将标志设置<block ref="e33bb4eb32023da4a8ea7a1ba6927067" prefix=" " category="inline-code"></block>为<block ref="e7b51407a2bfaa34b58afce0107e9a5f" prefix=" " category="inline-code"></block>、和<block ref="c5af480af77c330e04a1fce1f6c2b03a" prefix=" " category="inline-code"></block><block ref="c9d280b28993d1d105c3fbafb5868a15" prefix=" " category="inline-code"></block>：</block>
  <block id="6531f27ba87f15c54cdf44dcb7ef3273" category="summary">后端用于定义Trident与存储系统之间的关系。它会告诉Trident如何与该存储系统通信、以及Trident如何从该存储系统配置卷。安装Trident后、下一步是创建后端。<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>通过自定义资源定义(CRD)、您可以直接通过Kubednetes界面创建和管理Trident后端。您可以使用或对Kubornetes分发等效的命令行界面工具来执行此操作<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>。</block>
  <block id="672d26386c125fcd3bc8d1c008758043" category="paragraph"><block ref="913a4b06671d1e04e6582a85afe3abbe" prefix="" category="inline-code"></block><block ref="11c73f5ef965e27ad7f2162c6d862d00" prefix="(" category="inline-code"></block><block ref="f049287d4b5e8c2771cd45ad40d6bbd0" prefix=" " category="inline-code"></block>、、<block ref="e4f7bfc35d74ab4136d16191494e7ceb" prefix=" " category="inline-code"></block>)是一个前端，具有名称节奏的CRD，使您可以使用管理Trident后端<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>。现在，Kubbernetes和存储管理员可以直接通过Kubbernetes CLI创建和管理后端，而无需专用的命令行实用程序<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix="(" category="inline-code"></block>)。</block>
  <block id="b7bd3d795dd544bcf8b44a16fc1ddab8" category="list-text">Trident会根据您提供的配置自动创建后端。这在内部表示为<block ref="d2eac341e6076c7146e5b2598b973d94" prefix=" " category="inline-code"></block> <block ref="ebf1bd0254e733981928851df08fca08" prefix="(" category="inline-code"></block>，<block ref="18d388723371b89385366f93f0fbbbc6" prefix=" " category="inline-code"></block>) CR。</block>
  <block id="96cf9ab1c0acdca2aa54ed2c55a7e95d" category="list-text"><block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>唯一绑定到由Trident创建的<block ref="d2eac341e6076c7146e5b2598b973d94" prefix=" " category="inline-code"></block>。</block>
  <block id="17858cf125217a7fe7239b3271b587af" category="admonition"><block ref="d2eac341e6076c7146e5b2598b973d94" prefix="" category="inline-code"></block>CRS由Trident自动创建。您 * 不应 * 修改它们。如果要更新后端、请通过修改对象来执行此操作<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>。</block>
  <block id="d2605b6821beb27d0e7001414ade9773" category="admonition">使用创建的后端<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>没有关联<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>对象。您可以通过创建CR来<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>选择使用管理此类后端<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>。必须注意指定相同的配置参数(如<block ref="de48524ae3369aa3a3a220c9107c1d2b" prefix=" " category="inline-code"></block>、、<block ref="670f8a39d00195ce172543b2794c522b" prefix=" " category="inline-code"></block><block ref="4f361a1568cc7e740f7642f6f59e2fe0" prefix=" " category="inline-code"></block>等)。Trident将自动将新创建的与已有的后端绑定<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>。</block>
  <block id="b681f7c062097827d9374fb7ef922a12" category="list-text">创建<block ref="fcce7b7bd05b6b012eabe3df8de04808" category="inline-link-rx"></block>。此密钥包含Trident与存储集群/服务通信所需的凭据。</block>
  <block id="2836a99ecae06907e08eb3b9502d45d6" category="list-text">如果后端不存在永久性卷请求(PVC)、则删除<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>将导致Trident删除后端以及CR。<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block></block>
  <block id="7ddc4cac10b03b42fc0ff0fc7e00789f" category="list-text"><block ref="88183b946cc5f0e8c96b2e66e1c74a7e" prefix="" category="inline-code"></block>：Trident无法确定与CR关联的后端的状态或是否存在<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>。例如、如果API服务器未响应或<block ref="5f829d3562952527064a5c553cd09189" prefix=" " category="inline-code"></block>缺少CRD。这可能需要干预。</block>
  <block id="5c3139ae9ab5d818511e9d321e73fece" category="paragraph"><block ref="5a5abb2eaa9c440d605c2a659dd2079f" prefix="" category="inline-code"></block>包含<block ref="a3d5885ebdbdbb3f39c48e483cc04978" prefix=" " category="inline-code"></block>响应CR而创建的后端的<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>和<block ref="17b686c7edfa8cfaa60e094e4592491f" prefix=" " category="inline-code"></block>。<block ref="8d625027763e2e062eb5f57c8518040d" prefix=" " category="inline-code"></block>字段表示CR的上次操作状态，可以是用户触发的操作(例如，用户在中更改了某些内容)，也可以是Trident触发的操作<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>(例如，<block ref="b979c2934ac0b4ba3f08dabfdd1b2299" prefix=" " category="inline-code"></block>在Trident重新启动期间)。可以是成功、也可以是失败。<block ref="7ee7184c970537ea83afe7f9bae4c61f" prefix=" " category="inline-code"></block>表示CR和后端之间关系的状态<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>。在上面的示例中、<block ref="7ee7184c970537ea83afe7f9bae4c61f" prefix=" " category="inline-code"></block>具有绑定值、这意味着<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR与后端关联。</block>
  <block id="cd9b0eee685820fd4ee1b3c0bea5cfb5" category="paragraph">通过删除<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>，您可以指示Trident删除/保留后端(基于<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>)。要删除后端、请确保<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>将设置为delete。要仅删除<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>，请确保<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>将设置为保留。这样可以确保后端仍然存在，并且可以使用进行管理<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="5f39834a6f39c7539a5edeb4e8f3ea48" category="paragraph">Trident不会删除正在使用的Kubnetes加密<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>。Kubernetes 用户负责清理密钥。删除机密时必须小心。只有在后端未使用机密时，才应将其删除。</block>
  <block id="63f9a789e1c077aab804a2a5c20f1419" category="list-text">存储系统的凭据已更改。要更新凭据、必须更新对象中使用的Kubbernetes机密<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>。Trident将使用提供的最新凭据自动更新后端。运行以下命令以更新 Kubernetes Secret ：</block>
  <block id="4f3ff24da375936278cfeceb396c61dd" category="paragraph">要从Trident中删除后端、请执行以下操作：</block>
  <block id="734b51d6b10d22bfb052a1b8e8a9bc56" category="summary">了解在Trident中管理后端的不同方法。</block>
  <block id="e0b4d05f7fb24e9606ae02b176974698" category="paragraph">在这两种情况下、都将继续存在后端、Trident会为这些后端计划卷并在其上运行。管理员可以选择以下两种方式之一：</block>
  <block id="1abff208034794e09bab3e34ad393f6c" category="list-text">创建 Kubernetes 机密。此密钥包含Trident与存储集群/服务通信所需的凭据。</block>
  <block id="76d558fd5aada70a89c3e865ca420a68" category="paragraph">让我们来看看的价值<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>。需要将其设置为<block ref="16d79ff80feadcf2f52096f073f2b94a" prefix=" " category="inline-code"></block>。这样可以确保在删除CR时<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>，后端定义仍然存在，并且可以使用进行管理<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="112121684d9357cc8fb46c6007457443" category="paragraph">删除对象后<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>、Trident会直接将其删除、而不会实际删除后端本身。</block>
  <block id="81feffd6e3f1dfe7d96f93bb83a3576f" category="paragraph">Trident会自动从满足存储类定义的要求的后端提供存储池。了解如何为存储系统配置后端。</block>
  <block id="982a76bd7422f8b1ee773545fc01ea11" category="inline-link-macro">将Trident与Amazon FSx for NetApp ONTAP结合使用</block>
  <block id="729d88792170d42963cf63b9e9606321" category="list-text"><block ref="729d88792170d42963cf63b9e9606321" category="inline-link-macro-rx"></block></block>
  <block id="68a131c3971c1c8532edfb16be1b2903" category="summary">您可以设计一个Kubnetes存储类文件并创建存储类、以指示Trident如何配置卷。</block>
  <block id="e093f3bc5e5c7d5965cb1bf67aeee4c6" category="paragraph">配置Kubnetes StorageClass对象并创建存储类、以指示Trident如何配置卷。</block>
  <block id="cc11289855049780fd7db136e693d82e" category="paragraph"><block ref="da3f7f170e13df7f56e057fc4226aa85" category="inline-link-rx"></block>将Trident标识为用于该类的配置程序、并指示Trident如何配置卷。例如：</block>
  <block id="cfcd78d3f3ec6bdd1da5051dc5fbad51" category="paragraph">有关存储类如何与和参数交互以控制Trident如何配置卷的详细信息<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>、请参见<block ref="879ce943b486ecaae1c4cb96b01133e9" category="inline-link-macro-rx"></block>。</block>
  <block id="060364df9713326935c57a6702c9084c" category="list-text">现在，Kubernetes和Trident中都应显示一个*BASIC－Csi*存储类，并且Trident应已发现后端的池。</block>
  <block id="45ae9b184f3067c00f4a660edac67a17" category="paragraph">Trident提供<block ref="78512e06e40b1d6e7b22821168623dd6" category="inline-link-rx"></block>。</block>
  <block id="689375d73a0e73673da4e52a37631d4d" category="summary">Trident可以通过使用CSI拓扑功能有选择地创建卷并将其连接到Kubbernetes集群中的节点。</block>
  <block id="f9ee522bc68b30b3de2c706b1e656ea6" category="paragraph">Trident可以通过使用有选择地创建卷并将其连接到Kubbernetes集群中的节点<block ref="80b9a4f4a1bc9851317207ee3477041a" category="inline-link-rx"></block>。</block>
  <block id="fad4fe0757704f7cfbc0d68602a1a58b" category="paragraph">使用 CSI 拓扑功能，可以根据区域和可用性区域将对卷的访问限制为一小部分节点。如今，借助云提供商， Kubernetes 管理员可以生成基于分区的节点。节点可以位于一个区域内的不同可用性区域中，也可以位于不同区域之间。为了便于在多区域架构中为工作负载配置卷、Trident使用CSI拓扑。</block>
  <block id="c7c66bdbe6c90a256243cb5346a324a5" category="list-text">将设置为<block ref="43f6615bbb2c40a5306ff804094420b1" prefix=" " category="inline-code"></block>时，Trident创建卷时<block ref="7d1aaf47144f9eb2fc66e328ddd3bad7" prefix=" " category="inline-code"></block>不具有任何拓扑感知功能。创建 PVC 时会处理卷绑定和动态配置。这是默认设置<block ref="7d1aaf47144f9eb2fc66e328ddd3bad7" prefix=" " category="inline-code"></block>、适合不强制实施拓扑限制的集群。创建永久性卷时、不会依赖于发出请求的POD的计划要求。</block>
  <block id="e60c9ae411010a64108db4f1b8d793be" category="list-text">集群中的节点应具有可引入拓扑感知的标签<block ref="e1ff98cb39abe026da77d207e1fd46de" prefix="(" category="inline-code"></block>和<block ref="c4d11894a6687c3a84f5daeda7154443" prefix=" " category="inline-code"></block>)。在安装Trident之前，这些标签*应出现在群集中的节点上*，以便Trident能够识别拓扑。</block>
  <block id="6110b46939d65cd5339476bd5fdbe7df" category="paragraph">Trident存储后端可以设计为根据可用性区域选择性地配置卷。每个后端都可以包含一个可选<block ref="1f2a94e142bf020b1f7c6297ec12413f" prefix=" " category="inline-code"></block> 块、该块代表受支持的分区和区域列表。对于使用此后端的 StorageClasses ，只有在受支持区域 / 区域中计划的应用程序请求时，才会创建卷。</block>
  <block id="db432089fc07064a10ae6334c0db7e97" category="admonition"><block ref="1f2a94e142bf020b1f7c6297ec12413f" prefix="" category="inline-code"></block>用于提供每个后端的区域和分区列表。这些区域和分区表示可在 StorageClass 中提供的允许值列表。对于包含后端提供的部分区域和分区的StorageClasses、Trident会在后端创建一个卷。</block>
  <block id="f8d5cb4864ad5d339fb567af550ff371" category="paragraph">在上述StorageClass定义中，<block ref="086b513e7d83c4cf32a8bd3550679276" prefix=" " category="inline-code"></block>将设置为<block ref="ed783cfa871a96ff337b1ae9a5f8bfa5" prefix=" " category="inline-code"></block>。在此存储类中请求的 PVC 在 Pod 中引用之前不会执行操作。和<block ref="df6ccab784b5892507a7d11443254dc8" prefix=" " category="inline-code"></block>提供了要使用的分区和区域。StorageClass会<block ref="a88a8ddf9fecacf26383a3c60dc3e5fb" prefix=" " category="inline-code"></block>在上述定义的后端创建PVC<block ref="e3ed370204229201f6df345a5a590519" prefix=" " category="inline-code"></block>。</block>
  <block id="48dec026afe488df8faca35c5c3a39ea" category="summary">了解如何在 Trident 安装中创建和使用 Element 后端。</block>
  <block id="e3bf4f4da0c5a0a22b37a23b20b2789f" category="paragraph">了解如何在Trident安装中创建和使用Element后端。</block>
  <block id="55d12319f030354c3d3da130783340d4" category="paragraph">Trident提供了<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>用于与集群通信的存储驱动程序。支持的访问模式包括：_ReadWriteOnce_(RWO)、_ReadOnlyMany_(ROX)、_ReadWriteMany_(rwx)、_ReadWriteOncePod_(RWOP)。</block>
  <block id="d332cf1f1b1ca6601e95859b9d3b2434" category="paragraph"><block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>存储驱动程序支持_file_和_block_卷模式。对于<block ref="ac52cf637478f3656a1fdee5c02324fd" prefix=" " category="inline-code"></block>卷模式、Trident会创建一个卷并创建一个文件系统。文件系统类型由 StorageClass 指定。</block>
  <block id="36f37bb9b250ed1fab33dfdced302bec" category="cell">使用CHAP对iSCSI进行身份验证。Trident使用CHAP。</block>
  <block id="626a366c19963bb80ca04337415711f5" category="paragraph">配置时、Trident会将存储池上的标签复制到后端存储LUN。为了方便起见、存储管理员可以按标签为每个虚拟池和组卷定义标签。</block>
  <block id="6b414187e193a000944e395beb010938" category="paragraph">第一个StorageClass<block ref="166028d9a95f5465a6ae917e6e089ce6" prefix="(" category="inline-code"></block>)将映射到第一个虚拟池。这是唯一一个提供金牌性能的池<block ref="89bf6c97f9a3eaea76c86df0086361bc" prefix=" " category="inline-code"></block>。最后一个StorageClass<block ref="b4457b3eeca98cadb51648f8fcef36cb" prefix="(" category="inline-code"></block>)会调用任何提供银牌性能的存储池。Trident将决定选择哪个虚拟池、并确保满足存储要求。</block>
  <block id="4f50ef2995c3caa2284d837d375e4db0" category="cell">Trident创建GCNV卷的Google Cloud位置。创建跨区域Kubnetes集群时、在中创建的卷<block ref="d5189de027922f81005951e6efe0efd5" prefix=" " category="inline-code"></block> 可用于在多个Google Cloud区域的节点上计划的工作负载。跨区域流量会产生额外成本。</block>
  <block id="827683b582e1abfa2478a23d65a88a1f" category="cell">表示此后端支持的区域和区域的列表。有关详细信息，请参阅 <block ref="a735758eec435cad1c5672b75bd657c0" category="inline-link-macro-rx"></block>。例如：<block ref="1e97fdca2db62120d99c87c9fad7ac06" prefix=" " category="inline-code"></block></block>
  <block id="9f857ec3fcdcb6ffcc762e0be5004aa2" category="paragraph">这是绝对的最低后端配置。使用此配置时、Trident会发现在配置位置委派给Google Cloud NetApp卷的所有存储池、并随机将新卷放置在其中一个池上。由于<block ref="296026821ada2ab8aebcf13547a63df5" prefix=" " category="inline-code"></block> 省略了、因此会<block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix=" " category="inline-code"></block> 应用默认设置、后端将为NFS卷配置。</block>
  <block id="ec0fec1613e760b6689b9fb4990bdb46" category="inline-link-macro">创建服务帐户密钥</block>
  <block id="704f74ac9dc2a2a60c73df6b9d8a9eff" category="list-text">您的GCNV帐户的API密钥文件。请参见 <block ref="068ee9c4fdcce4c0fd131a7dd8fe524f" category="inline-link-macro-rx"></block></block>
  <block id="6db42dae8341edee9e823963baa82d9d" category="paragraph">Trident提供了<block ref="94594b2ccbc8e0d220ad37504461650b" prefix=" " category="inline-code"></block>用于与集群通信的驱动程序。支持的访问模式包括：_ReadWriteOnce_(RWO)、_ReadOnlyMany_(ROX)、_ReadWriteMany_(rwx)、_ReadWriteOncePod_(RWOP)。</block>
  <block id="dd0d8a6eeca2940c60cd0ac812afed1d" category="paragraph">通过云身份、Kubnetes Pod可以通过作为工作负载身份进行身份验证来访问Google Cloud资源、而不是提供明确的Google Cloud凭据。</block>
  <block id="299b031aaa6fc8a06127791cf12decf9" category="paragraph">要在Google Cloud中利用云身份、您必须：</block>
  <block id="df181b0b41273ec7065dab05b4a6da10" category="list-text">使用GKE部署的Kubbernetes集群。</block>
  <block id="ff87a1c47933f4d6895655dd61ad9d5c" category="summary">了解如何使用提供的示例配置将适用于Google Cloud的Cloud Volumes Service配置为Trident安装的后端。</block>
  <block id="6385dfeab6eb1cdf5e0b269b83c02870" category="paragraph">了解如何使用提供的示例配置将适用于Google Cloud的NetApp Cloud Volumes Service配置为Trident安装的后端。</block>
  <block id="f501f5f541b4e828bada7eb37751ec96" category="paragraph">Trident提供了<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block>用于与集群通信的驱动程序。支持的访问模式包括：_ReadWriteOnce_(RWO)、_ReadOnlyMany_(ROX)、_ReadWriteMany_(rwx)、_ReadWriteOncePod_(RWOP)。</block>
  <block id="bc3c06062e58c58165fa787186ae374c" category="section-title">了解Trident对适用于Google Cloud的Cloud Volumes Service的支持</block>
  <block id="fe7058df6a1b56e94957ef68f8ddf955" category="paragraph">Trident可以使用<block ref="a3cd55e5a9ff014b76f6953040234c24" category="inline-link-macro-rx"></block>以下两种方法之一创建Cloud Volumes Service卷：</block>
  <block id="48cbfcdcce7c2c2d2876ce5a2c74ea32" category="list-text">*CVS性能*：默认的Trident服务类型。这种性能优化的服务类型最适合重视性能的生产工作负载。CVS-Performance服务类型是一种硬件选项、支持的卷大小至少为100 GiB。您可以选择<block ref="87d12cea36129673eb9128fd986958c5" category="inline-link-macro-rx"></block>以下选项之一：</block>
  <block id="d75d4a2bd644e06cc6588477267e33d8" category="cell">用于指定CVS服务类型的可选参数。<block ref="f9fa10ba956cacf91d7878861139efb9" prefix=" " category="inline-code"></block>用于选择CVS服务类型。否则，Trident会采用CVS性能服务类型<block ref="3ca14c518d1bf901acc339e7c9cd6d7f" prefix="(" category="inline-code"></block>)。</block>
  <block id="dc7c0c7001706c97a9a03d5f77e6883e" category="cell">Trident创建Cloud Volumes Service卷的Google Cloud区域。创建跨区域Kubnetes集群时、在中创建的卷<block ref="1e9c0fd1beef5ff8ed3bef2ae3b7e560" prefix=" " category="inline-code"></block>可用于在多个Google Cloud区域的节点上计划的工作负载。跨区域流量会产生额外成本。</block>
  <block id="7630c5d33e3b852f758af8c20c4caefb" category="list-text">最后一个StorageClass<block ref="92c87bc6be7db462499a5a2258aa7ba9" prefix="(" category="inline-code"></block>)调用提供10%快照预留的任何存储池。Trident决定选择哪个虚拟池、并确保满足快照预留要求。</block>
  <block id="ab10f4a91ef779d380fca281ef9df578" category="list-text">要查看Trident的同步存储类、请运行以下命令：</block>
  <block id="0953527d940d16d1979f49a4ac5bc746" category="list-text">要查看Trident的已同步存储类详细信息、请运行以下命令：</block>
  <block id="a78b12e067ec1975a317cab6fc947692" category="paragraph">以下是您可以使用为Trident后端对象输出的JSON回答的问题示例<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。这将使用<block ref="d8757fb4e9ea07606d23a1ef5a4b8d4e" prefix=" " category="inline-code"></block>实用程序、您可能需要先安装该实用程序。</block>
  <block id="2538c9a2100f674ce2db1e4b4c26315f" category="paragraph">通过此存储类创建的任何永久性卷将保持不变、Trident将继续对其进行管理。</block>
  <block id="ad882e33b96ca33000804dbc738d1d50" category="admonition">Trident会对其创建的卷强制使用空白<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>。对于iSCSI后端、建议在StorageClass中强制实施<block ref="01cd995fd9a843d3ca767e057de28873" prefix=" " category="inline-code"></block>。您应删除现有StorageClasses、然后使用指定的重新创建它们<block ref="01cd995fd9a843d3ca767e057de28873" prefix=" " category="inline-code"></block>。</block>
  <block id="0c2d4b956840e91a5026f299d11e6b2a" category="summary">Trident提供了一组Prometheus指标端点、您可以使用这些端点来监控Trident的性能。</block>
  <block id="f3bf54ffbc2b1eef233e6a26009af940" category="doc">监控Trident</block>
  <block id="023417a8020b969b0bbe5cc6cf816d22" category="paragraph">Trident提供了一组Prometheus指标端点、可用于监控Trident性能。</block>
  <block id="5e65c891836aee4c311dc1e3dcbd072f" category="paragraph">通过Trident提供的指标、您可以执行以下操作：</block>
  <block id="35ada9c61125e74058c883f83c6c6867" category="list-text">密切关注Trident的运行状况和配置。您可以检查操作的成功程度以及它是否能够按预期与后端进行通信。</block>
  <block id="35ff0baf577051daffe0a27ab0d03c9e" category="list-text">跟踪性能。您可以查看Trident与后端通信并执行操作所需的时间。</block>
  <block id="cb9109c9018f4c25d0545bac0f21176f" category="list-text">安装了Trident的Kubnetes集群。</block>
  <block id="67cc72b550d17849cb7141b0b95aea77" category="paragraph">您应定义Prometheus目标、以收集指标并获取有关Trident管理的后端及其创建的卷等的信息。这<block ref="dc7964965bf1b3af43b28caf6231e550" category="inline-link-rx"></block>说明了如何将Prometheus和Grafana与Trident结合使用来检索指标。本博客介绍了如何以操作员身份在Kubelnetes集群中运行Prometheus、以及如何创建ServiceMonitor来获取Trident指标。</block>
  <block id="a36c5d8fdf28501b60d84fa4b009f7c9" category="paragraph">此ServiceMonitor定义检索服务返回的指标<block ref="d9585690fd147c34fbd50c487a3520de" prefix=" " category="inline-code"></block>、并专门查找<block ref="aa59d67c2123f094d0d6798ffe651c4d" prefix=" " category="inline-code"></block>服务的端点。因此、Prometheus现在可以配置为了解Trident的指标。</block>
  <block id="b25be1046c4629be0262d9873a147d96" category="paragraph">除了直接从Trident获得的指标之外、kubelet还会通过自己的指标端点公开许多<block ref="f706c2d1cef9479098166eec3d215483" prefix=" " category="inline-code"></block>指标。Kubelet 可以提供有关已连接的卷， Pod 及其处理的其他内部操作的信息。请参阅<block ref="3f1f0977d0df3e8b343e403140284021" category="inline-link-rx"></block>。</block>
  <block id="0665ea39a4ca4388763b36eda9a3986d" category="list-text">**来自Trident的HTTP 2XX响应的百分比**</block>
  <block id="26cd09e35e7d03c2f93f8d6a691c8567" category="list-text">**通过状态代码来自Trident的REST响应的百分比**</block>
  <block id="5919ab2f7a44a6b3f0a6741f7b0f3f86" category="list-text">**由Trident执行的操作的平均持续时间(以毫秒为单位)**</block>
  <block id="57421d698299c713c3afb841620271d8" category="section-title">获取Trident使用情况信息</block>
  <block id="3ed8ff2d40a8a68841cd7d548c47f079" category="section-title">了解Trident AutoSupport遥测</block>
  <block id="b5fb620a79591716feab3605e0045775" category="paragraph">默认情况下、Trident会每天向NetApp发送Prometheus指标和基本后端信息。</block>
  <block id="41cc8a517566946bcfd42776583c2946" category="list-text">要阻止Trident向NetApp发送Prometheus指标和基本后端信息、请在Trident安装期间传递此<block ref="284e51f7c35ac8708577507873ff928e" prefix=" " category="inline-code"></block>标志。</block>
  <block id="2293c34fd6ddef40c9c9ecb540c27898" category="list-text">Trident还可以通过按需向NetApp支持发送容器日志<block ref="8cf945b97dde0c7bfc643bea7edbff67" prefix=" " category="inline-code"></block>。您需要触发Trident来上传其日志。在提交日志之前，应接受NetApp的<block ref="91b6c0438017ba5fa21c286a96d5acb4" category="inline-link-rx"></block>。</block>
  <block id="517af010cc9f1850ec10fc55631d3437" category="list-text">除非指定、否则Trident将提取过去24小时的日志。</block>
  <block id="cc368c6d3d859a01a63550429f01cb9c" category="list-text">您可以使用标志指定日志保留时间范围<block ref="86339c2ed773d5bd944b82d3086d3477" prefix=" " category="inline-code"></block>。例如：<block ref="e238339d491d4840f7d8e509bdbb7b63" prefix=" " category="inline-code"></block>。此信息通过随Trident一起安装的容器收集和发送<block ref="9d80ca17f097c8e365550f4036ccf0e3" prefix=" " category="inline-code"></block>。您可以从获取容器映像<block ref="1b00454f0ab35dcec2ee1a0061efc6e5" category="inline-link-rx"></block>。</block>
  <block id="b508f8888445cd57bcf910ed51afb0dd" category="paragraph">Trident发送的有效负载示例如下所示：</block>
  <block id="19398926f4bb3de321ccfc2488d606dd" category="section-title">禁用Trident指标</block>
  <block id="053cd9e68cf6c155e5b93616bc7e3e32" category="summary">了解如何在Trident安装中创建和使用ONTAP NAS驱动程序。本节提供了后端配置示例以及有关如何将后端映射到 StorageClasses 的详细信息。</block>
  <block id="6603621fd665e289ada4dbb1dcc5835c" category="paragraph">了解如何在Trident安装中创建和使用ONTAP NAS驱动程序。本节提供了将后端映射到StorageClasses的后端配置示例和详细信息。</block>
  <block id="c31c728d8c1e31b350486f8db0ebd5df" category="cell">集群或SVM管理LIF的IP地址可以指定完全限定域名(FQDN)。如果Trident是使用IPv6标志安装的、则可以设置为使用IPv6地址。IPv6地址必须用方括号定义，例如<block ref="33e9328e92e3ef05629093b4693b3925" prefix=" " category="inline-code"></block>。有关无缝MetroCluster切换的信息，请参见<block ref="41195e18a4a81a05f5c5a6be365a5602" category="inline-xref-macro-rx"></block>。</block>
  <block id="5b487539b64483311ed87290e717353a" category="cell">启用自动创建和更新导出策略[布尔值]。使用<block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix=" " category="inline-code"></block>和<block ref="b9c40fbe9daa81e40e06509d5bbd5a6c" prefix=" " category="inline-code"></block>选项、Trident可以自动管理导出策略。</block>
  <block id="aeeba745624a2ddc45043c3be805561e" category="cell">用于筛选KubeNet节点IP的CIDR列表(启用时)。<block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix=" " category="inline-code"></block>使用<block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix=" " category="inline-code"></block>和<block ref="b9c40fbe9daa81e40e06509d5bbd5a6c" prefix=" " category="inline-code"></block>选项、Trident可以自动管理导出策略。</block>
  <block id="0b74b16550d48484341fc52ad7af0c7d" category="paragraph">要配置的聚合（可选；如果设置了聚合，则必须将其分配给 SVM ）。对于<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>驱动程序、此选项将被忽略。如果未分配、则 可以使用任何可用聚合来配置FlexGroup卷。</block>
  <block id="f01b478814d1117e017539a48474a29d" category="admonition">在SVM中更新聚合后、该聚合将在Trident中自动更新、方法是轮询SVM、而无需重新启动Trident控制器。在Trident中配置了特定聚合以配置卷后、如果将该聚合重命名或移出SVM、则在轮询SVM聚合时、后端将在Trident中变为故障状态。您必须将聚合更改为SVM上的聚合、或者将其全部删除、以使后端恢复联机。</block>
  <block id="9b791871c2696d3b7bc8c95a1d487b58" category="cell">FlexgroupGroupGroupRegateList</block>
  <block id="77a0d40a429011d223a093dd3cf8713e" category="paragraph">要配置的聚合列表(可选；如果已设置、则必须将其分配给SVM)。分配给SVM的所有聚合均用于配置FlexGroup卷。支持* ONTAP－NAS－FlexGroup－Storage驱动程序。</block>
  <block id="dbe23b2e968cff9eb3692844d1e75516" category="admonition">在SVM中更新聚合列表后、此列表将在Trident中自动更新、方法是轮询SVM、而无需重新启动Trident控制器。在Trident中配置特定聚合列表以配置卷后、如果聚合列表重命名或移出SVM、则在轮询SVM聚合时、后端将在Trident中变为故障状态。您必须将聚合列表更改为SVM上的聚合列表、或者将其全部删除、以使后端恢复联机。</block>
  <block id="5160493063ea2e4f1b1a6e3b951b0a53" category="cell">NFS挂载选项的逗号分隔列表。通常会在存储类中为Kubnetes-永久性 卷指定挂载选项、但如果在存储类中未指定挂载选项、则Trident将回退到使用存储后端配置文件中指定的挂载选项。如果在存储类或配置文件中未指定挂载选项、则Trident不会在关联的永久性卷上设置任何挂载选项。</block>
  <block id="8f0dd7b65e6130f3f55d984ebc34bbdb" category="cell">您可以指定以下选项之一：使用Microsoft管理控制台或ONTAP命令行界面创建的SMB共享的名称；允许Trident创建SMB共享的名称；或者、您可以将参数留空以防止对卷进行通用共享访问。对于内部ONTAP、此参数是可选的。此参数对于Amazon FSx for ONTAP后端为必填项、不能为空。</block>
  <block id="760f7a1b05bc9d3d50c534dc491c07d4" category="cell">在新卷上启用NetApp卷加密(NVE)；默认为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>。要使用此选项，必须在集群上获得 NVE 的许可并启用 NVE 。如果在后端启用了NAE、则在Trident中配置的任何卷都将启用NAE。有关详细信息，请参阅：<block ref="5113a2fb1642ecd23870711ba25c4ad7" category="inline-link-macro-rx"></block>。</block>
  <block id="9cae9ee80bd5bcfdc5aefb0ffdbdf25b" category="admonition">将QoS策略组与Trident结合使用需要使用ONTAP 9™8或更高版本。您应使用非共享QoS策略组、并确保此策略组分别应用于每个成分卷。共享QoS策略组会对所有工作负载的总吞吐量实施上限。</block>
  <block id="a70620fd8360d045b82ff1bd1d0c3df5" category="paragraph">对于<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>和<block ref="10be922aa0fd75bc53ab71eda9229763" prefix=" " category="inline-code"></block>，Trident现在使用新的计算方法来确保使用snapshotReserve百分比和pvc正确调整FlexVol的大小。当用户请求PVC时、Trident会使用新计算方法创建具有更多空间的原始FlexVol。此计算可确保用户在 PVC 中收到所请求的可写空间，而不是小于所请求的空间。在 v21.07 之前，如果用户请求 PVC （例如， 5GiB ），并且 snapshotReserve 为 50% ，则只会获得 2.5 GiB 的可写空间。这是因为用户请求的是整个卷、并且<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block>是其中的一个百分比。在Trident 21.07中、用户请求的是可写空间、Trident将该数字定义<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block>为整个卷的百分比。这不适用于<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>。请参见以下示例以了解其工作原理：</block>
  <block id="22924e617739cd9c383b969f041801fd" category="paragraph">先前安装的现有后端将在升级Trident时按照上文所述配置卷。对于在升级之前创建的卷，您应调整其卷的大小，以便观察到所做的更改。例如、使用较早版本的2GiB PVC<block ref="01d8e11bde220373533705ed26796e25" prefix=" " category="inline-code"></block>会导致卷提供1GiB的可写空间。例如，将卷大小调整为 3GiB 可为应用程序在一个 6 GiB 卷上提供 3GiB 的可写空间。</block>
  <block id="04475efebba67943de12a2269d2e0a7b" category="paragraph">此示例介绍如何指示Trident使用动态导出策略自动创建和管理导出策略。这对于和<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>驱动程序是相同的<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>。</block>
  <block id="917b750655d8fd1d6c961e661535fa99" category="paragraph">Trident会在"Comments"字段中设置配置标签。注释在FlexVol for或FlexGroup<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> for上设置<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>。配置时、Trident会将虚拟池上的所有标签复制到存储卷。为了方便起见、存储管理员可以按标签为每个虚拟池和组卷定义标签。</block>
  <block id="fb66862ac33cf61ecc10382c3a42dee3" category="paragraph">Trident将决定选择哪个虚拟池、并确保满足存储要求。</block>
  <block id="3791349e449ca2bc9a8b7b7ed4c843de" category="list-text">Trident仅支持挂载到Windows节点上运行的Pod的SMB卷。有关详细信息、请参见 <block ref="688177e6b45c5d27a545463079c58d82" category="inline-xref-macro-rx"></block> 。</block>
  <block id="bef1bdf06ff1fb19147e51880974a6c5" category="paragraph">Trident提供了两种对ONTAP后端进行身份验证的模式。</block>
  <block id="c3ac6347a688cffd729947263e3387fb" category="list-text">基于证书：此模式需要在后端安装证书、Trident才能与ONTAP集群进行通信。此处，后端定义必须包含客户端证书，密钥和可信 CA 证书的 Base64 编码值（如果使用）（建议）。</block>
  <block id="3dcd67bbe9a272b52d3d7a0b30220f72" category="paragraph">Trident需要SVM范围/集群范围的管理员的凭据才能与ONTAP后端进行通信。建议使用标准的预定义角色，如<block ref="21232f297a57a5a743894a0e4a801fc3" prefix=" " category="inline-code"></block>或<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>。这样可以确保与未来ONTAP版本的正向兼容性、这些版本可能会公开未来Trident版本要使用的功能API。可以创建自定义安全登录角色并将其用于Trident、但不建议这样做。</block>
  <block id="9cce0e23fbc00d5ef4aa8264a88e346a" category="paragraph">更新后端不会中断对已创建卷的访问，也不会影响在之后建立的卷连接。后端更新成功表示Trident可以与ONTAP后端通信并处理未来的卷操作。</block>
  <block id="1d67220b5084f7489e1a078d7ce093c3" category="section-title">为Trident创建自定义ONTAP角色</block>
  <block id="9284d31490691a3e4c3cb7c3fa6bdb30" category="paragraph">Trident使用NFS导出策略控制对其配置的卷的访问。</block>
  <block id="911e36a0e95c6a8cd786e86a3fcc313a" category="paragraph">使用导出策略时、Trident提供了两个选项：</block>
  <block id="5dc1a99b61ad0584100fea35d3c77e2d" category="list-text">Trident可以动态管理导出策略本身；在此操作模式下、存储管理员可以指定一个表示可接受IP地址的CIDR块列表。Trident会在发布时自动将这些范围内的适用节点IP添加到导出策略中。或者、如果未指定CIDR、则在要发布卷的节点上找到的所有全局范围单播IP都将添加到导出策略中。</block>
  <block id="d6f1d6cb064a0fa1dad0c21c9e750994" category="list-text">存储管理员可以手动创建导出策略和添加规则。除非在配置中指定了其他导出策略名称、否则Trident将使用默认导出策略。</block>
  <block id="9391b78a23c85c79820dc84c10db96aa" category="paragraph">通过Trident、可以动态管理ONTAP后端的导出策略。这样，存储管理员就可以为工作节点 IP 指定允许的地址空间，而不是手动定义显式规则。它大大简化了导出策略管理；修改导出策略不再需要手动干预存储集群。此外、这还有助于将对存储集群的访问限制为仅限正在挂载卷且IP位于指定范围内的工作节点访问、从而支持精细的自动化管理。</block>
  <block id="b1c10dc35d4f2204f84dafbae3a9db72" category="admonition">使用此功能时、您必须确保SVM中的根接合具有先前创建的导出策略、并具有允许节点CIDR块的导出规则(例如默认导出策略)。始终遵循NetApp建议的最佳实践、将SVM专用于Trident。</block>
  <block id="be5fcef35e23604f5b0fc183ca7506c7" category="list-text">后端UUID 403b5326/8482-40db-96d0-d83fb3f4daec</block>
  <block id="28dfab96c79abedb70e1d50d710ea98b" category="list-text"><block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix="" category="inline-code"></block>将设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block></block>
  <block id="580cc4344cc0f2e6db295db4ab750199" category="list-text">存储前缀<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block></block>
  <block id="281f254b4327225d2f04f74bef468fda" category="list-text">pvc UUID a79bcf5f-7b6d-4a40-9876- e2551f159c1c</block>
  <block id="9f39168351aa064bf4add0614e72cf76" category="list-text">名为svm_pvc_a79bcf5f_7b6d_4a40_9876_e2551f159c1c的qtree会为名为的FlexVol创建一个导出策略、为名为的qtree创建一个导出策略、<block ref="a9394417b5c3be8334bc253bf0db8df0" prefix=" " category="inline-code"></block>并在Trident上创建<block ref="c39e5727ab9fde433a5c617f19a07adc" prefix=" " category="inline-code"></block>一个名为的空导出策略<block ref="735cc5128643b8de22e29beb94c9ccf4" prefix=" " category="inline-code"></block>。FlexVol导出策略的规则将是qtree导出策略中包含的任何规则的超集。空导出策略将由所有未附加的卷重复使用。</block>
  <block id="1ac483d2832bce598fb016d9eb24a804" category="list-text"><block ref="b9c40fbe9daa81e40e06509d5bbd5a6c" prefix="" category="inline-code"></block>包含地址块列表。此字段为可选字段，默认为 "0.0.0.0/0 ， " ：： /0" 。如果未定义、则Trident会添加在具有出版物的工作节点上找到的所有全局范围单播地址。</block>
  <block id="b2a40ed90888ed4dd5f4dce75ca437a5" category="paragraph">在此示例中、<block ref="f2293842bd9b1febec66e01804867721" prefix=" " category="inline-code"></block>提供了地址空间。这表示属于此地址范围且发布内容的Kub联网 节点IP将添加到Trident创建的导出策略中。当Trident注册运行该功能的节点时，它将检索该节点的IP地址，并根据中提供的地址块对其进行检查<block ref="b9c40fbe9daa81e40e06509d5bbd5a6c" prefix=" " category="inline-code"></block>。发布时，在筛选IP之后，Trident将为要发布到的节点的客户端IP创建导出策略规则。</block>
  <block id="7bbfd70596d4809b3a59a1d543c64933" category="paragraph">在Trident创建或更新后端后、您可以使用或相应的<block ref="18d388723371b89385366f93f0fbbbc6" prefix=" " category="inline-code"></block>CRD检查后端<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>：</block>
  <block id="c21ad3c9d699da710d3d9a10d356f72d" category="paragraph">删除节点后、Trident会检查所有导出策略以删除与该节点对应的访问规则。通过从受管后端的导出策略中删除此节点IP、Trident可防止恶意挂载、除非集群中的新节点重复使用此IP。</block>
  <block id="560093aa674b397879f076b8f8a64fb1" category="paragraph">对于以前存在的后端、使用更新后端<block ref="defd1e55f93269ac9278afc086951ba8" prefix=" " category="inline-code"></block>可确保Trident自动管理导出策略。这样会根据需要创建两个新的导出策略、并以后端的UUID和qtree名称命名。后端上的卷在卸载并重新挂载后将使用新创建的导出策略。</block>
  <block id="5be86c6240034dbc77f8dad4eae132b0" category="paragraph">如果更新了活动节点的IP地址、则必须在此节点上重新启动Trident Pod。然后、Trident将更新其管理的后端的导出策略、以反映此IP更改。</block>
  <block id="3c84638211d81849fc9b0b95216d1afa" category="admonition"><block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix="" category="inline-code"></block>SMB卷不支持。</block>
  <block id="072a79a382792fdaa71cab41d1340dae" category="list-text">至少一个包含Active Directory凭据的Trident密钥。生成密钥<block ref="e47a193687dde960f6b6f80d394142a3" prefix=" " category="inline-code"></block>：</block>
  <block id="f05dd4ff0ba35f59e465466148e57015" category="list-text">对于内部ONTAP、您可以选择创建SMB共享、也可以选择Trident为您创建一个共享。</block>
  <block id="c267535828cc965ba3fe4e10913f7285" category="paragraph">Trident提供了以下NAS存储驱动程序来与ONTAP集群进行通信。支持的访问模式包括：_ReadWriteOnce_(RWO)、_ReadOnlyMany_(ROX)、_ReadWriteMany_(rwx)、_ReadWriteOncePod_(RWOP)。</block>
  <block id="f993941dc62990aa70d883be7a386ea7" category="paragraph">Trident应以ONTAP或SVM管理员身份运行、通常使用集群用户<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>或SVM用户、或者使用<block ref="21232f297a57a5a743894a0e4a801fc3" prefix=" " category="inline-code"></block>具有相同角色的其他名称的用户。</block>
  <block id="fed5cc1d933ad528f364a438a22f2465" category="paragraph">对于Amazon FSx for NetApp ONTAP部署、Trident应使用集群用户<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>或SVM用户以ONTAP或SVM管理员身份运行、或者使用具有相同角色的其他名称的用户运行<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block>。此<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block>用户只能有限地替代集群管理员用户。</block>
  <block id="6e82d09aa274380adf21d56aaa3b0413" category="admonition">如果使用<block ref="d57551b1efacf8a7be84b4d10c5a6e99" prefix=" " category="inline-code"></block>参数、则需要集群管理员权限。将Amazon FSx for NetApp ONTAP与Trident结合使用时、<block ref="d57551b1efacf8a7be84b4d10c5a6e99" prefix=" " category="inline-code"></block>参数不适用于<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>和<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block>用户帐户。如果指定此参数，配置操作将失败。</block>
  <block id="8dbaef294ecadfe828f5bab1ae097d46" category="summary">了解如何在Trident安装中创建和使用ONTAP SAN驱动程序。本节提供了后端配置示例以及有关如何将后端映射到 StorageClasses 的详细信息。</block>
  <block id="55fd4fb7ce66d950d3136fb6613ab770" category="paragraph">了解如何在Trident安装中创建和使用ONTAP SAN驱动程序。本节提供了将后端映射到StorageClasses的后端配置示例和详细信息。</block>
  <block id="c59bb4e25695c195dbaa360d34c9795e" category="cell"><block ref="ef225248e79c14501d51a4941b5ae5d1" prefix="" category="inline-code"></block></block>
  <block id="091b358e8a9ea5e6b1137fbd4c18372f" category="paragraph"><block ref="ef225248e79c14501d51a4941b5ae5d1" prefix=" " category="inline-code"></block>用于指定命令的命令行参数、每当对卷进行格式化时、都会应用这些参数<block ref="899da842f7d2c1db0e3f8c88ad72507f" prefix=" " category="inline-code"></block>。这样、您可以根据偏好格式化卷。请确保指定与mkfs命令选项类似的格式选项，但不包括设备路径。示例："-E nobdiscard"</block>
  <block id="18eb1633594b2436e83e73071958b960" category="section-title">有关使用formatOptions的建议</block>
  <block id="d9ec468a8922eca17349404c59b7659c" category="paragraph">Trident建议使用以下选项来加快格式化过程：</block>
  <block id="ee8d7eb9cc1e43184ed6a64abb3255f6" category="paragraph">*-E NODiscard：*</block>
  <block id="f1e8c049fa2ad08b8d1a332e2d26163e" category="cell">要为创建的卷分配的 QoS 策略组。选择每个存储池 / 后端的 qosPolicy 或 adaptiveQosPolicy 之一。将QoS策略组与Trident结合使用需要使用ONTAP 9™8或更高版本。您应使用非共享QoS策略组、并确保此策略组分别应用于每个成分卷。共享QoS策略组会对所有工作负载的总吞吐量实施上限。</block>
  <block id="c598aba0725ffc7663bf0f4db1a3238f" category="cell"><block ref="80fd16da9d17abac4374b362f2e409fe" prefix="" category="inline-code"></block></block>
  <block id="a5b88f2b14a5b0fa1aa2bbed9eb87602" category="cell">限制<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>后端创建新的FlexVol卷以包含其LUN。仅会使用已有的FlexVol配置新的PV.</block>
  <block id="e78c177a9e5dfcf995756c1f03c48529" category="admonition">对于使用驱动程序创建的所有卷<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>、Trident会向FlexVol额外添加10%的容量、以容纳LUN元数据。LUN 将使用用户在 PVC 中请求的确切大小进行配置。Trident会将10%的空间添加到FlexVol中(在ONTAP中显示为可用大小)。用户现在将获得所请求的可用容量。此更改还可防止 LUN 变为只读状态，除非已充分利用可用空间。这不适用于 ontap-san-economy.</block>
  <block id="2d4fda186ee0e99d76ee82d9cd36b908" category="paragraph">对于定义的后端<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block>，Trident将按如下所示计算卷的大小：</block>
  <block id="da726af8694451874b7c47ae0ed223c6" category="paragraph">1.1是Trident为容纳LUN元数据而向FlexVol额外增加的10%。对于<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block>= 5%、PVC请求= 5 GiB、则卷总大小为5.79 GiB、可用大小为5.5 GiB。此<block ref="0c5606ed319753bb2d86a485f23c8f6d" prefix=" " category="inline-code"></block>命令应显示类似于以下示例的结果：</block>
  <block id="83e850c97b7044397eba3d214682be5b" category="list-text">基于证书：Trident还可以使用后端安装的证书与ONTAP集群进行通信。此处，后端定义必须包含客户端证书，密钥和可信 CA 证书的 Base64 编码值（如果使用）（建议）。</block>
  <block id="14bc1b6d66d79a6242106075078d6a75" category="paragraph">Trident可以使用和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>驱动程序的双向CHAP对iSCSI会话进行身份验证<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>。这需要在后端定义中启用此<block ref="099cb468880f266cba40b49391fa46bc" prefix=" " category="inline-code"></block>选项。设置为时<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>，Trident会将SVM的默认启动程序安全性配置为双向CHAP，并设置后端文件中的用户名和密钥。NetApp 建议使用双向 CHAP 对连接进行身份验证。请参见以下配置示例：</block>
  <block id="a3101deed09a2c98e2dc3f8d302ef2ec" category="paragraph">如果将设置<block ref="099cb468880f266cba40b49391fa46bc" prefix=" " category="inline-code"></block>为true、则存储管理员将指示Trident在存储后端配置CHAP。其中包括：</block>
  <block id="8a8d93d572194f00b71a710946af762d" category="list-text">如果SVM的默认启动程序安全类型为none (默认设置)*和*卷中已没有已有的LUN、则Trident会将默认安全类型设置为<block ref="9ef2bbb12ff72558472202561a25058d" prefix=" " category="inline-code"></block>、并继续配置CHAP启动程序以及目标用户名和密码。</block>
  <block id="1938c188012d6b3e1bb2a8ab1d30ed4b" category="list-text">如果SVM包含LUN、则Trident不会在此SVM上启用CHAP。这样可确保对SVM上已存在的LUN的访问不受限制。</block>
  <block id="6aee28036e0c3cf4a8792451108bdab1" category="paragraph">创建后端后、Trident会创建相应的<block ref="18d388723371b89385366f93f0fbbbc6" prefix=" " category="inline-code"></block>CRD并将CHAP密码和用户名存储为Kubbernetes密码。Trident在此后端创建的所有PV,都将通过CHAP进行挂载和连接。</block>
  <block id="efa0e2d045a35ff3060322078634f115" category="paragraph">现有连接不会受到影响；如果Trident在SVM上更新凭据、这些连接将继续保持活动状态。新连接将使用更新后的凭据、现有连接将继续保持活动状态。断开并重新连接旧的 PV 将导致它们使用更新后的凭据。</block>
  <block id="b5ab1040103dff58a29ac4bd0e6ce111" category="paragraph">Trident提供了以下SAN存储驱动程序来与ONTAP集群进行通信。支持的访问模式包括：_ReadWriteOnce_(RWO)、_ReadOnlyMany_(ROX)、_ReadWriteMany_(rwx)、_ReadWriteOncePod_(RWOP)。</block>
  <block id="e5981541c0e608f7fb860a1ba0443a18" category="paragraph">Trident应以ONTAP或SVM管理员身份运行、通常使用集群用户<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>或SVM用户、或者使用<block ref="21232f297a57a5a743894a0e4a801fc3" prefix=" " category="inline-code"></block>具有相同角色的其他名称的用户。对于Amazon FSx for NetApp ONTAP部署、Trident应使用集群用户<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>或SVM用户以ONTAP或SVM管理员身份运行、或者使用具有相同角色的其他名称的用户运行<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block>。此<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block>用户只能有限地替代集群管理员用户。</block>
  <block id="03f5e10eafb756dac410015b29a6d0e0" category="paragraph">Trident使用以下驱动程序支持非易失性内存快速(NVMe)协议<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>：</block>
  <block id="8102a8aaee21f7594331faa6a31ceeb6" category="list-text">导入在Trident外部创建的NVMe卷、以便Trident可以管理其生命周期</block>
  <block id="54211a2d289b1fa18afc99aab9e27892" category="paragraph">Trident不支持：</block>
  <block id="efd6bf14511b7506d1d5a1575d817027" category="cell">集群或SVM管理LIF的IP地址可以指定完全限定域名(FQDN)。如果Trident是使用IPv6标志安装的、则可以设置为使用IPv6地址。IPv6地址必须用方括号定义、例如：[28e8：d9fb：a825：b7bf：69a8：d02f：9e7b：3555]。</block>
  <block id="900a97d43b0d89ff1f26477ad38cc3bc" category="cell">*请勿指定Amazon FSx for NetApp ONTAP。*提供的和<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>不包含使用Trident检索聚合使用情况并对其进行限制所需的<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block>权限。</block>
  <block id="df2f5c3ad0d6cdf07a86704a8dfcef06" category="cell">您可以指定以下选项之一：使用Microsoft管理控制台或ONTAP命令行界面创建的SMB共享的名称、或者允许Trident创建SMB共享的名称。对于Amazon FSx for ONTAP后端、此参数是必需的。</block>
  <block id="4f124386f4b1bb06c61bcf1c73aff529" category="cell">要为创建的卷分配的 QoS 策略组。选择每个存储池或后端的qosPolicy或adaptiveQosPolicy之一。将QoS策略组与Trident结合使用需要使用ONTAP 9™8或更高版本。您应使用非共享QoS策略组、并确保此策略组分别应用于每个成分卷。共享QoS策略组会对所有工作负载的总吞吐量实施上限。</block>
  <block id="e5bbe1a57bb9d1fa8056d28e0a96a518" category="summary">通过将Trident与Amazon FSx for NetApp ONTAP结合使用、您可以确保在Amazon Elic Kubelnetes Service (EKS)中运行的Kubelnetes集群可以配置ONTAP支持的块和文件永久性卷。</block>
  <block id="a2e4c75efdd834198ec30de5256aa938" category="paragraph">您可以使用以下驱动程序将Trident与Amazon FSx for NetApp ONTAP集成：</block>
  <block id="b67b129bb636d36f948ca02b68bfa9bc" category="cell">集群或SVM管理LIF的IP地址可以指定完全限定域名(FQDN)。如果Trident是使用IPv6标志安装的、则可以设置为使用IPv6地址。IPv6地址必须用方括号定义、例如：[28e8：d9fb：a825：b7bf：69a8：d02f：9e7b：3555]。如果在字段下<block ref="ac68bbf921d953d1cfab916cb6120864" prefix=" " category="inline-code"></block>提供<block ref="d731d2fecb66f9c4a30253bd316a220f" prefix=" " category="inline-code"></block>、则无需提供、<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block>因为Trident会从AWS检索SVM<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block>信息。因此、您必须提供SVM下某个用户的凭据(例如vsadmin)、并且该用户必须具有此<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block> 角色。</block>
  <block id="52934bc714f29a2f1d7b732705cd3bc3" category="list-text">一个Kubernetes集群、其中包含一个Linux控制器节点以及至少一个运行Windows Server 2019的Windows工作节点。Trident仅支持挂载到Windows节点上运行的Pod的SMB卷。</block>
  <block id="456166bed74a8ee84892a1778e8485a7" category="section-title">Trident属性</block>
  <block id="0a6a0f274bdb2256373050bb5155f62f" category="paragraph">您可以将Amazon FSx for NetApp ONTAP文件系统与Trident进行集成、以确保在Amazon Elic Kubelnetes Service (EKS)中运行的Kubelnetes集群可以配置ONTAP支持的块和文件永久性卷。</block>
  <block id="e22cd0725c5dbd58b894af3d4584607c" category="paragraph">通过将Trident与Amazon FSx for NetApp ONTAP结合使用、您可以确保在Amazon Elic Kubelnetes Service (EKS)中运行的Kubelnetes集群可以配置ONTAP支持的块和文件永久性卷。</block>
  <block id="0ad999be0dea6cdee2afca2bcb6da8b1" category="paragraph">除了<block ref="6004af307fc2eed554c42ebaa4be8446" category="inline-link-macro-rx"></block>，要将FSx for ONTAP与Trident集成，您还需要：</block>
  <block id="6bb2a5c441a4e421f26e835928b68f1f" category="list-text">Trident EKS加载项不支持SMB卷。</block>
  <block id="910bc8aad96dce304454db69330c4c1c" category="list-text">Trident仅支持挂载到Windows节点上运行的Pod的SMB卷。有关详细信息、请参见 <block ref="5d9770278862f1ca4af19e761a5fa655" category="inline-link-macro-rx"></block> 。</block>
  <block id="3111c4c842496dcfcddb5de6e9f7ec11" category="list-text">在Trident 24.02之前的版本中、Trident无法删除在已启用自动备份的Amazon FSx文件系统上创建的卷。要在Trident 24.02或更高版本中防止此问题，请在AWS FSx for ONTAP的后端配置文件中指定<block ref="d731d2fecb66f9c4a30253bd316a220f" prefix=" " category="inline-code"></block>、AWS、<block ref="9af4d8381781baccb0f915e554f8798d" prefix=" " category="inline-code"></block>AWS<block ref="1e9c0fd1beef5ff8ed3bef2ae3b7e560" prefix=" " category="inline-code"></block>和AWS<block ref="ce656850400574e9f9cffb285ee8abc0" prefix=" " category="inline-code"></block>。</block>
  <block id="9f953e6f7a1bf75b24ad7c1f72aeda22" category="admonition">如果要为Trident指定IAM角色，则可以省略为Trident明确指定<block ref="1e9c0fd1beef5ff8ed3bef2ae3b7e560" prefix=" " category="inline-code"></block>、<block ref="c9ff119073ea2567730fb42e3a4fe805" prefix=" " category="inline-code"></block>和<block ref="ce656850400574e9f9cffb285ee8abc0" prefix=" " category="inline-code"></block>字段。有关详细信息，请参阅 <block ref="d3e98810edf44af02b30486ed13bd043" category="inline-link-macro-rx"></block>。</block>
  <block id="7b53d57c2eba03d6610dce9feca9a586" category="paragraph">Trident提供两种身份验证模式。</block>
  <block id="954d503a6b34d7989c109f6cb0bfac8d" category="admonition">Trident应以SVM用户身份运行、或者以具有相同角色的其他名称的用户身份运行<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>。Amazon FSx for NetApp ONTAP的某个<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block>用户只能有限地替代ONTAP<block ref="21232f297a57a5a743894a0e4a801fc3" prefix=" " category="inline-code"></block>集群用户。强烈建议将与Trident结合使用<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>。</block>
  <block id="e4cd0c6f3c2ade8eef84039005a10f36" category="list-text">基于证书：Trident将使用SVM上安装的证书与FSx文件系统上的SVM进行通信。</block>
  <block id="f8abfe6b352de2fd0e868bcaf6f3e7f7" category="summary">Trident支持为创建的卷分配有意义的名称和标签、以便更轻松地识别和监控这些卷、并轻松地将其映射到相应的Kubnetes资源(PVC)。</block>
  <block id="ba7c9f4d567a323afc79746f519e415b" category="paragraph">使用Trident、您可以为创建的卷分配有意义的名称和标签。这有助于您识别卷并轻松地将其映射到其各自的Kubnetes资源(PVC)。您还可以在后端级别定义用于创建自定义卷名称和自定义标签的模板；您创建、导入或克隆的任何卷都将遵循这些模板。</block>
  <block id="97c781efba117c0e1d5363fc4b25ca4d" category="list-text">Trident不支持使用带有存储前缀的分区操作符。</block>
  <block id="d30011d07380d694abaa3a0701445be9" category="list-text">如果这些模板不会生成唯一的卷名称、则Trident将附加一些随机字符来创建唯一的卷名称。</block>
  <block id="67b2f0b2bd7da526ee1d031a8d146585" category="list-text">如果NAS经济型卷的自定义名称长度超过64个字符、则Trident将根据现有命名约定为卷命名。对于所有其他ONTAP驱动程序、如果卷名称超过名称限制、则卷创建过程将失败。</block>
  <block id="e784d9ded1cce64694895e336ef35234" category="paragraph">Trident会创建一个永久性卷(PV)并将其与此永久性卷请求(PVC)相关联。</block>
  <block id="c97c2c03f174086fc1172be741226250" category="list-text">如果PV连接到Pod、则Trident会扩展存储后端的卷、重新扫描设备并重新设置文件系统大小。</block>
  <block id="8870cc012f196366d720ebdad2f5632f" category="list-text">尝试调整未连接PV的大小时、Trident会扩展存储后端的卷。将 PVC 绑定到 Pod 后， Trident 会重新扫描设备并调整文件系统大小。然后， Kubernetes 会在扩展操作成功完成后更新 PVC 大小。</block>
  <block id="026f69e8eb7faab2f07a68365843746d" category="paragraph">您可以通过检查PVC、PV和Trident卷的大小来验证扩展是否正常：</block>
  <block id="d8fc21061998f01679cbbabd9102ec8c" category="paragraph">Trident支持对、<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>、<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>、<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block>和<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block>后端配置的NFS PV进行卷扩展<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>。</block>
  <block id="8b09849d996182780fe1a4bd0fdc1d6d" category="paragraph">Trident应为此PVC创建一个20MiB NFS PV：</block>
  <block id="36941664e357e5e47a63d528d3ff49b5" category="paragraph">您可以通过检查PVC、PV和Trident卷的大小来验证调整大小是否正常：</block>
  <block id="822f23137373a7a374fd33ef3863c2de" category="paragraph">您可以将卷导入到Trident中、以便：</block>
  <block id="15309597fffd67488a7a5dde3591144d" category="list-text">Trident只能导入RW (读写)类型的ONTAP卷。DP (数据保护)类型的卷是SnapMirror目标卷。在将卷导入Trident之前、应先中断镜像关系。</block>
  <block id="349d29de1123e1836103914780ffb39b" category="list-text">虽然<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>必须在PVC上指定、但Trident在导入期间不使用此参数。创建卷期间会使用存储类根据存储特征从可用池中进行选择。由于卷已存在、因此导入期间不需要选择池。因此、即使卷位于与PVC中指定的存储类不匹配的后端或池中、导入也不会失败。</block>
  <block id="7a06039f2c19a8797457cd811e999229" category="list-text">使用<block ref="a768f5449e3a83ac56f2fb8ab4562339" prefix=" " category="inline-code"></block>命令指定包含卷的Trident后端的名称以及在存储上唯一标识卷的名称(例如：ONTAP FlexVol、Element卷、Cloud Volumes Service路径)。<block ref="5338b151154663bac9980b0f044518f2" prefix=" " category="inline-code"></block>指定PVC文件的路径需要参数。</block>
  <block id="f610f3c991a9fe41a30dec78ba76caa8" category="paragraph">Trident支持使用和<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>驱动程序导入卷<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>。</block>
  <block id="2bde530216fea43a4e556d3bba5dce11" category="paragraph">使用参数时<block ref="e2b9359adf7cdd62fc784b5090c3c452" prefix=" " category="inline-code"></block>、Trident不会重命名卷。</block>
  <block id="ef40e9c3e0773e9fb6f24b131aa9ba8f" category="paragraph">Trident支持使用和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>驱动程序导入卷<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>。</block>
  <block id="df1e93e323319db2375e3d3dad7fb9cc" category="paragraph">Trident支持使用驱动程序导入NetApp Element软件和NetApp HCI卷<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>。</block>
  <block id="49fdf43d32dad9fda984acfedf0be04f" category="admonition">Element 驱动程序支持重复的卷名称。但是、如果存在重复的卷名称、Trident将返回错误。作为临时解决策、克隆卷、提供唯一的卷名称并导入克隆的卷。</block>
  <block id="13bad29adee620ad0bb1075fdf0e45b0" category="paragraph">Trident支持使用驱动程序导入卷<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block>。</block>
  <block id="781d7167559669ccd02b24925b4be62e" category="paragraph">Trident支持使用驱动程序导入卷<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block>。</block>
  <block id="91df12d96329d2a5cdfb509205e68b38" category="summary">Trident提供了多种用于管理卷的功能。了解Trident为卷提供的功能。</block>
  <block id="3f21653d19d6382928f806e17a3ab1c4" category="paragraph">了解Trident为管理卷提供的功能。</block>
  <block id="ca5acbb90042e065e5dd4eb793ef320c" category="paragraph">请参见以下内容、了解如何使用Trident管理卷。</block>
  <block id="bf320e716fd5e77836a28acbf01fd5f2" category="summary">持久卷(PVs)的Kubbernetes卷快照支持卷的时间点副本。您可以为使用Trident创建的卷创建快照、导入在Trident外部创建的快照、从现有快照创建新卷以及从快照恢复卷数据。</block>
  <block id="27aa53a8adee533e027b5b2a725716da" category="list-text"><block ref="e2d45d57c7e2941b65c6ccd64af4223e" prefix=" " category="inline-code"></block>指向Trident CSI驱动程序。</block>
  <block id="443fed0e44021bc800c6840b6a2c8191" category="paragraph">Trident支持通过<block ref="a3174ff04e144786ca73f65ec9b76f58" category="inline-link-macro-rx"></block>、集群管理员可以创建<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>对象并导入在Trident外部创建的快照。</block>
  <block id="5de65a931e7f0117030dde1d54eff5f4" category="paragraph">Trident必须已创建或导入快照的父卷。</block>
  <block id="a06ecac9b140cf61cd5d4a82c88c488a" category="list-text">*集群管理员：*创建<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>引用后端快照的对象。这将在Trident中启动快照工作流。</block>
  <block id="d480294e263bd9916f014824428ddbca" category="list-text">在中指定<block ref="62c99546614b1610927a47ea682b6d63" prefix=" " category="inline-code"></block>。这是调用中<block ref="39133e4ee9648ecb1a2dae934a22788a" prefix=" " category="inline-code"></block>外部快照程序向Trident提供的唯一信息。<block ref="b4dfa9524f461a609ad4726f69b847e9" prefix=" " category="inline-code"></block></block>
  <block id="3e36f7927fcc85da94d36bcb51457a89" category="list-text">*内部处理(无需执行任何操作)：*外部快照程序识别新创建的<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>并运行<block ref="b4dfa9524f461a609ad4726f69b847e9" prefix=" " category="inline-code"></block>调用。Trident将创建<block ref="9a303ae09fee10afe60e5fd9e00e5e45" prefix=" " category="inline-code"></block>。</block>
  <block id="c179bf71b229cad4b31c8b19407ab978" category="summary">使用Trident、您可以在主命名空间中创建卷、并在一个或多个二级命名空间中共享该卷。</block>
  <block id="eeef56d54787b9aa6bd579f2e856b658" category="paragraph">通过TridentvolumeReference CR、您可以在一个或多个Kubernetes名空间之间安全地共享ReadwriteMany (rwx) NFS卷。此Kubernetes本机解决方案 具有以下优势：</block>
  <block id="00315912b48f10a3906def68b6887f6c" category="paragraph">Trident将创建PV及其后端NFS存储卷。</block>
  <block id="7f2c8022cfb81e20fa274d1e20f4ae7b" category="paragraph">Trident会读取<block ref="57c54cbee1c6ed3d5902aa1d8cd1e55a" prefix=" " category="inline-code"></block>目标PVC上的标注、并将目标PV创建为其自身没有指向源PV的存储资源的子卷、同时共享源PV存储资源。目标PVC和PV显示为正常绑定。</block>
  <block id="a5b25f7f8c74c644f3484c2182ea8a25" category="paragraph">您可以删除跨多个命名空间共享的卷。Trident将删除对源命名空间上的卷的访问权限、并保留共享该卷的其他命名空间的访问权限。删除引用卷的所有名称空间后、Trident将删除该卷。</block>
  <block id="39e92ae6d270535c1cad298373650560" category="list-text">Trident无法阻止目标名称空间写入共享卷。您应使用文件锁定或其他进程来防止覆盖共享卷数据。</block>
  <block id="b709b82e3d76fa5433fd3117387424b7" category="paragraph-title">基于FC的SCSI工具</block>
  <block id="867cf4bbcb92ecc7017612aafa765813" category="inline-link-macro">配置FC和FC-NVMe SAN主机的方式(&amp;A)</block>
  <block id="16649adc62ed952ba4dac811c548cbfb" category="paragraph">Trident会尝试自动检测节点是否可以运行iSCSI或NFS服务。</block>
  <block id="ff577472362d5ec5388791cc868e283e" category="paragraph">Trident会为此节点创建事件以确定发现的服务。要查看这些事件、请运行：</block>
  <block id="e0dbb340725a054b795eaa2c5ce9925a" category="paragraph">Trident标识为Trident节点CR上的每个节点启用的服务。要查看发现的服务、请运行：</block>
  <block id="5a89f68b37546fc775b3e4fdbaa83f86" category="paragraph">Trident可以自动建立iSCSI会话、扫描LUN、发现多路径设备、对其进行格式化并将其挂载到Pod。</block>
  <block id="f31ad49d6d434380feb4017e7e67844c" category="paragraph">对于ONTAP系统、Trident每五分钟运行一次iSCSI自我修复、以便：</block>
  <block id="88857aef34da03584f9873d9ae451f35" category="list-text">*将所需状态与当前状态进行比较*、以确定所需的修复。Trident确定修复优先级以及何时抢占修复。</block>
  <block id="43b7f6020acce94258b8cd6f49d039e9" category="admonition">自我修复活动日志位于相应的Demonset Pod上的容器中<block ref="7883e3d8f80ff24d70c49bd975fb3f75" prefix=" " category="inline-code"></block>。要查看日志、必须在Trident安装期间将设置<block ref="ad42f6697b035b7580e4fef93be20b4d" prefix=" " category="inline-code"></block>为"TRUE"。</block>
  <block id="575a6c9926e4c10d0f01f5a7b5ae5af7" category="paragraph">Trident iSCSI自我修复功能有助于防止：</block>
  <block id="dc5ea7c62b923ea94fb050bf49982b18" category="list-text">在网络连接问题描述 之后可能发生的陈旧或运行不正常的iSCSI会话。如果会话陈旧、Trident将等待七分钟后再注销、以便重新建立与门户的连接。</block>
  <block id="35a7465f650e4e342879c89b19aab955" category="paragraph">您可以配置以下Trident iSCSI自我修复设置来修复陈旧会话：</block>
  <block id="37ed104d69b44253f63f811d2ac61b38" category="admonition">Trident会修改此<block ref="f0523c4334dbbc70205de4279475561a" prefix=" " category="inline-code"></block>值、以确保NVMe在路径发生故障时不会放弃此路径。请勿更改此设置。</block>
  <block id="49c51de1f7ef1bb1a3f7996dce0bd162" category="summary">使用此处提供的指针解决您在安装和使用Trident时可能遇到的问题。</block>
  <block id="ff880370a59a3edf263703cf427ef61b" category="paragraph">对于Trident 20.07和20.10，请使用<block ref="5d50f02b16b5f3c834b39c00b5adcf4f" prefix=" " category="inline-code"></block>代替<block ref="b9b2e8f293392f4f25fc8a59b9522d84" prefix=" " category="inline-code"></block>。</block>
  <block id="f61e7737805bc6c31f70cc744f0be580" category="paragraph">您可以完全删除Trident和所有创建的CRD以及关联的自定义资源。</block>
  <block id="bf33d5f4492b83e480e02a87c13bea8f" category="admonition">此操作无法撤消。除非您需要全新安装Trident、否则请勿执行此操作。要卸载Trident而不删除CRD，请参阅<block ref="09e567d3102352bdd3a5975f49a136db" category="inline-link-macro-rx"></block>。</block>
  <block id="7e8fc4df4a520d5e63be7a3cceaf49b6" category="paragraph">要使用Trident运算符卸载Trident并完全删除CRD、请执行以下操作：</block>
  <block id="48402172a8740f09fa3a5295a3c776f2" category="paragraph">要使用Helm卸载Trident并完全删除CRD、请执行以下操作：</block>
  <block id="fca562606bcefc58d4a718783c1b96d2" category="paragraph">使用卸载Trident后完全删除CRD<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block></block>
  <block id="4432cfcacafa1abcedd4043a54b77f9f" category="paragraph">假设您已将Trident托管命名空间(NVMe永久性卷)连接到Pod。如果直接从ONTAP后端删除命名空间、则取消暂存过程会在您尝试删除Pod后停滞。此情形不会影响Kubornetes集群或其他功能。</block>
  <block id="65edeac74973a1ff99e0e74473ca1ac5" category="sidebar">Trident是由NetApp维护的开源存储配置程序和编排程序。通过它，您可以为 Docker 和 Kubernetes 管理的容器化应用程序创建存储卷。</block>
  <block id="c2be0dce836d12b399a864c7019c6c72" category="sidebar">使用Trident</block>
  <block id="c2cad626583e84ad7681ff1f879baed0" category="sidebar">Trident视频</block>
  <block id="19cd85517cccf8e142cb03b4a1b778b8" category="sidebar">Trident文档</block>
  <block id="cbe339e53da479584b62fcdaed7006c1" category="sidebar">Trident概述</block>
  <block id="c95d3f2a880ad1b81926c3a78c2294ed" category="sidebar">管理和监控Trident</block>
  <block id="4182ceafe6e7afa67be49e639a8fa3a9" category="sidebar">Trident集成</block>
  <block id="e41a00202d1138f85f18e0c7afdb0955" category="sidebar">在EKS集群上配置Trident EKS加载项</block>
  <block id="b89f71465b55ef1dc894a4364041d9f0" category="paragraph">此示例将在GKE集群上安装Trident以与云标识结合使用。</block>
  <block id="3bd49228e6aff48852b023fa1ceaf62c" category="paragraph">要使用Trident运算符安装Trident，请编辑<block ref="244895464fd1d6c7ff5a2044c324c0fc" prefix=" " category="inline-code"></block>以将设置为，并将<block ref="89abe9fddbe3cf0f9bcd7779fe4aed69" prefix=" " category="inline-code"></block>设置<block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix=" " category="inline-code"></block>为<block ref="9856712fdf7563a4074fc130ed9f0755" prefix=" " category="inline-code"></block><block ref="90f8fb110d694743ec7a069beef76b7b" prefix=" " category="inline-code"></block>。</block>
  <block id="7ba174e1291062b960ec1b8607b6e1e2" category="paragraph">以下示例将安装Trident并使用环境变量将设置<block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix=" " category="inline-code"></block>为GCP<block ref="e7b51407a2bfaa34b58afce0107e9a5f" prefix=" " category="inline-code"></block>，并使用环境变量<block ref="fab50dca589d1a68fdf56bd4ae0b4a83" prefix=" " category="inline-code"></block>设置<block ref="89abe9fddbe3cf0f9bcd7779fe4aed69" prefix=" " category="inline-code"></block>：</block>
  <block id="bde178d22672aa38120646e529ed04b5" category="paragraph">以下示例将安装Trident并将标志设置<block ref="e33bb4eb32023da4a8ea7a1ba6927067" prefix=" " category="inline-code"></block>为<block ref="e7b51407a2bfaa34b58afce0107e9a5f" prefix=" " category="inline-code"></block>、和<block ref="c5af480af77c330e04a1fce1f6c2b03a" prefix=" " category="inline-code"></block><block ref="fab50dca589d1a68fdf56bd4ae0b4a83" prefix=" " category="inline-code"></block>：</block>
  <block id="dc3d22611e67d08cb39256f8980be582" category="cell">限制<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>后端创建新的FlexVol卷以包含其qtrees。仅会使用已有的FlexVol配置新的PV.</block>
  <block id="eddc3ab7d283c02464f100ff837cf055" category="inline-link-macro">Trident资源</block>
  <block id="01ba66c56fa9029a3ce0095f09b9b340" category="list-text"><block ref="01ba66c56fa9029a3ce0095f09b9b340" category="inline-link-macro-rx"></block></block>
  <block id="10c80ca6b662fb62c61b4f3551fa4460" category="paragraph">对于使用SAN存储驱动程序的ONTAP后端，Trident可以通过设置双向CHAP并管理CHAP用户名和机密<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。要了解Trident如何在ONTAP后端配置CHAP、请参见<block ref="647d5f494fdd01a14f263aa1b49a3db4" category="inline-link-macro-rx"></block>。</block>
  <block id="98b1298645505c6ec838667dff651c81" category="cell">在qtree-NAS ONTAP经济型后端使用qtrees时可请求的最大FlexVol大小。</block>
  <block id="7be7ec1f4262cda30e19c85af89449af" category="cell">qtrees的空间分配</block>
  <block id="bc78339d85241498c635b61d8f201ef9" category="cell">如果请求的卷大小超过此值、则配置失败。此外、还会限制它为LUN管理的卷的大小上限。</block>
  <block id="579198c91fea423d4b79c97828ac3da4" category="summary">通过Trident Protect、您可以使用Trident保护应用程序和应用程序数据。</block>
  <block id="a53f4cc048a3d0227206b8b6182e67dc" category="doc">了解Trident Protect</block>
  <block id="6d8d3279a9b2226029d9af309058363b" category="paragraph">NetApp Trident Protect提供高级应用程序数据管理功能、可增强由NetApp ONTAP存储系统和NetApp Trident CSI存储配置程序提供支持的有状态Kubbernetes应用程序的功能和可用性。Trident Protect可简化公有云和内部环境中容器化工作负载的管理、保护和移动。它还通过API和CLI提供自动化功能。</block>
  <block id="6a945469c2d9fdc27b0cb844d066c984" category="paragraph">您可以通过创建自定义资源(CRS)或使用Trident Protect命令行界面来使用Trident Protect保护应用程序。</block>
  <block id="7e6f9558ca98ca29afd74d0bbb0b2bce" category="paragraph">您可以在安装Trident Protect之前了解其要求：</block>
  <block id="a0a1eb9fbd2b7284352e6b610999f841" category="inline-link-macro">Trident Protect要求</block>
  <block id="8d806bd87636d4fd0eecab0333057f10" category="list-text"><block ref="8d806bd87636d4fd0eecab0333057f10" category="inline-link-macro-rx"></block></block>
  <block id="af68364761ed4114c192b6bb2962467b" category="summary">Trident Protect使用基于角色的访问控制(Role-Based Access Control、RBAC)的Kubelnetes模型。您可以使用Trident保护RBAC功能更精细地控制对资源的访问。</block>
  <block id="3f94255d3ae6517615821f8939ba6230" category="doc">管理授权和访问控制</block>
  <block id="9991f5d4b3aa4ae5a36fb2ad6a637d73" category="paragraph">Trident Protect使用基于角色的访问控制(Role-Based Access Control、RBAC)的Kubelnetes模型。默认情况下、Trident Protect提供单个系统命名空间及其关联的默认服务帐户。如果您的组织具有许多用户或特定的安全需求、则可以使用Trident Protect的RBAC功能更精细地控制对资源和域名称的访问。</block>
  <block id="a22c0a4dfca95968d88392eb0bbb2dcf" category="paragraph">集群管理员始终可以访问默认命名空间中的资源<block ref="9a82c7a4099124e5bfaa83e7c5997bd4" prefix=" " category="inline-code"></block>、也可以访问所有其他命名空间中的资源。要控制对资源和应用程序的访问、您需要创建更多的名分并将资源和应用程序添加到这些名分。</block>
  <block id="661e3b2b32de1ab85fb426b5abec28f3" category="paragraph">请注意、任何用户都不能在默认命名空间中创建应用程序数据管理CRS<block ref="9a82c7a4099124e5bfaa83e7c5997bd4" prefix=" " category="inline-code"></block>。您需要在应用程序命名空间中创建应用程序数据管理CRS (最佳做法是、在与其关联的应用程序相同的命名空间中创建应用程序数据管理CRS)。</block>
  <block id="b1f69b20762545a6c94e024888638df8" category="paragraph">只有管理员才能访问特权Trident Protect自定义资源对象、其中包括：</block>
  <block id="4516bb1529fba64216073cc95812839c" category="list-text">*AppVault*：需要存储分段凭据数据</block>
  <block id="984eb0d94901a4b5f9105f96d4d2b4a9" category="list-text">*AutoSupportBundle*：收集指标、日志和其他敏感的Trident Protect数据</block>
  <block id="10e6811ca4c78900349b612176a3233b" category="list-text">*AutoSupportBundleSchedule：管理日志收集计划</block>
  <block id="7cfd5c25f0cd486a1157966cad4acba7" category="paragraph">作为最佳实践、请使用RBAC限制管理员对有权限的对象的访问。</block>
  <block id="407b2fe2d3bbcc55c8ae895a2fd8263c" category="inline-link">Kubbernetes RBAC文档</block>
  <block id="280879df8b54b2167169ec47c5cabf6d" category="paragraph">有关RBAC如何控制对资源和称表的访问的详细信息，请参阅<block ref="4825a411217f39ad9486c7b5e7edfd2b" category="inline-link-rx"></block>。</block>
  <block id="1f8885e14663f7eb65b23f1fb65cf1ad" category="inline-link">Kubbernetes服务帐户文档</block>
  <block id="6d2eefddf1d006b070ac00f2cf8d9f2e" category="paragraph">有关服务帐户的信息，请参见<block ref="37bf82f0fc7d7e935aabd2fb73032b3c" category="inline-link-rx"></block>。</block>
  <block id="c8daba6f7a2139f5744d1f673acae2b4" category="section-title">示例：管理两组用户的访问权限</block>
  <block id="9a9f2142e8d53ddda9013b6fc97827cd" category="paragraph">例如、一个组织有一个集群管理员、一组工程用户和一组营销用户。集群管理员应完成以下任务、以创建一个环境、在此环境中、工程组和营销组各自只能访问分配给各自命名区域的资源。</block>
  <block id="62e8eb1beb4089e76f084fa767746c24" category="section-title">第1步：创建一个命名空间以包含每个组的资源</block>
  <block id="bff98f2ace11d8e7b9fe541ae444c93a" category="paragraph">通过创建命名空间、您可以从逻辑上分离资源、并更好地控制谁有权访问这些资源。</block>
  <block id="34bc7fd01806723536ffab05992d77d0" category="list-text">为工程组创建命名空间：</block>
  <block id="ba644a4cbff232b5b4157a0f8bfc30f8" category="list-text">为营销组创建命名空间：</block>
  <block id="aac00f41716d928be61ef3ff1cd6fc2d" category="section-title">第2步：创建新的服务帐户、以便与每个命名空间中的资源进行交互</block>
  <block id="3e8da71376257c3915a88fb2bfe69a27" category="paragraph">您创建的每个新命名空间都会附带一个默认服务帐户、但您应为每组用户创建一个服务帐户、以便将来根据需要在各个组之间进一步划分Privileges。</block>
  <block id="7bd34dd5c1a41f3a7aeea2aaad2469b5" category="list-text">为工程组创建服务帐户：</block>
  <block id="37281883196948d16907e71598070c79" category="list-text">为营销组创建服务帐户：</block>
  <block id="2cdbda2406e807bdae6ccf33ad2445f3" category="section-title">第3步：为每个新服务帐户创建一个密钥</block>
  <block id="a15042adaad3bebc86d46ef450a4f98c" category="paragraph">服务帐户密钥用于向服务帐户进行身份验证、如果泄露、可以轻松删除和重新创建。</block>
  <block id="78a7dfb4e5b60d84d3c54ec150be8a80" category="list-text">为工程服务帐户创建一个密钥：</block>
  <block id="b098f513abca683a5e1c36cbc8b244db" category="list-text">为营销服务帐户创建密钥：</block>
  <block id="d1732b3423240a19064951afa9a3266a" category="section-title">第4步：创建RoleBinding对象以将ClusterRole对象绑定到每个新服务帐户</block>
  <block id="720de81bb5619bda23df5ae99eb9ebcb" category="paragraph">安装Trident Protect时会创建一个默认的ClusterRole对象。您可以通过创建和应用RoleBinding对象将此ClusterRole绑定到服务帐户。</block>
  <block id="067d8d99affb5418a3d899eba8658cc4" category="list-text">将ClusterRole绑定到工程服务帐户：</block>
  <block id="b25ecd55b23c424058fdad947fe23b13" category="list-text">将ClusterRole绑定到营销服务帐户：</block>
  <block id="574c7934280b498080dfc2272c570f69" category="section-title">第5步：测试权限</block>
  <block id="8d65423ec256f18737823ea6cedeae87" category="paragraph">测试权限是否正确。</block>
  <block id="7b0c0cd292b286167249cc067be6d47d" category="list-text">确认工程用户可以访问工程资源：</block>
  <block id="37aa0c3d444b765e5080a77f572f9040" category="list-text">确认工程用户无法访问营销资源：</block>
  <block id="1317a4b523ecc5ea298adec08e7ba407" category="summary">用于Trident Protect的存储分段自定义资源(CR)称为AppVault。AppVault是存储分段的声明性Kubarnetes工作流表示形式。</block>
  <block id="618ce5e44021c1c57c9655e5e3846eda" category="doc">使用AppVault对象管理分段</block>
  <block id="f39726752bf5b117fe78f8c383e31cdd" category="paragraph">用于Trident Protect的存储分段自定义资源(CR)称为AppVault。AppVault对象是存储分段的声明性Kubarnetes工作流表示形式。AppVault CR包含在备份、快照、还原操作和SnapMirror复制等保护操作中使用存储分段所需的配置。只有管理员才能创建AppVault。</block>
  <block id="56ef2682280ac110060b881925a87b80" category="section-title">Google Cloud</block>
  <block id="1668ca1bd914c1d847f23b491319ac91" category="section-title">Microsoft Azure</block>
  <block id="cf04a02e37b774fc311a48f605c3c597" category="cell">azure</block>
  <block id="50f66ecbc45488ee5826941bfbc50411" category="cell">GCP</block>
  <block id="485573baf8bfa9487485deb07780d89f" category="list-text">查看AppVault对象的内容：</block>
  <block id="10dce9030ad8783afd2b4e831da49b7f" category="paragraph">*示例输出*：</block>
  <block id="72444a17ff17655124f96b02602fe90f" category="list-text">(可选)要查看每个资源的AppVaultPath，请使用标志<block ref="a9b1c03a99224cbb5c6773ccbe51d4fb" prefix=" " category="inline-code"></block>。</block>
  <block id="caef5be37857b92378c0054db6bc8696" category="paragraph">只有在Trident Protect Helm安装中指定了集群名称时、此表第一列中的集群名称才可用。例如：<block ref="b84d46473a6782105f40ea4fa2bc2964" prefix=" " category="inline-code"></block>。</block>
  <block id="eb5dcb495342ee5285be31fb17267ccc" category="section-title">删除AppVault</block>
  <block id="086d4622dbc50dc37c51fc80568681a2" category="paragraph">您可以随时删除AppVault对象。</block>
  <block id="79f2a1cdb1287644a5d3176157cc43c4" category="admonition">在删除AppVault对象之前、请勿<block ref="276c63528ef3085f91fb1bc80a3febc0" prefix=" " category="inline-code"></block>删除AppVault CR中的密钥。如果这样做、可能会导致AppVault存储分段中有残留数据、集群中会出现孤立资源。</block>
  <block id="33850d305da8c5eb949c81e70e40a54d" category="open-title">使用Kubbernetes命令行界面删除AppVault</block>
  <block id="6c4ae71603666b23d3e05193118a3147" category="summary">您可以使用protect c结合 命令创建Trident Protect自定义资源并与之进行交互。</block>
  <block id="40e0842217cf3fc8b760cbd68cc14a76" category="doc">安装Trident Protect命令行界面插件</block>
  <block id="bd0df34f0c12fe6faae3a05dde47f3a9" category="paragraph">您可以使用Trident Protect命令行插件(Trident实用程序的扩展)创建Trident Protect<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>自定义资源(CRS)并与之交互。</block>
  <block id="2b1100a071932a4cb5f33e22121f48fa" category="paragraph">在使用命令行实用程序之前、您需要将其安装在用于访问集群的计算机上。根据您的计算机使用的是x64 CPU还是ARM CPU、执行以下步骤。</block>
  <block id="852f04e90409df288c69ca8f37453383" category="open-title">下载适用于Linux amd64 CPU的插件</block>
  <block id="567471047b313eb49e48a17b4213a1d1" category="list-text">下载Trident Protect命令行界面插件：</block>
  <block id="b64b2077b896969e7810dbb0a2de2f1a" category="open-title">下载适用于Linux ARM64 CPU的插件</block>
  <block id="d58e744bd40cf0f8373ee5b2c7d11387" category="open-title">下载适用于Mac amd64 CPU的插件</block>
  <block id="fd3e558ef6c1af851bddabf0eb1945d7" category="open-title">下载适用于Mac ARM64 CPU的插件</block>
  <block id="b23c395acc963a69b0a5f06a20bb4887" category="section-title">查看Trident命令行界面插件帮助</block>
  <block id="305f79cb740685921820521a57e525e5" category="paragraph">您可以使用内置插件的帮助功能获取有关插件功能的详细帮助：</block>
  <block id="09b4818c610e8f967a9f5257455a3a2a" category="list-text">使用帮助功能查看使用指南：</block>
  <block id="da9d072bec5b191d5b5120761a2094e5" category="section-title">启用命令自动完成</block>
  <block id="2994879f05c105b10427c87890d6ce6a" category="paragraph">安装Trident Protect命令行界面插件后、您可以对某些命令启用自动完成。</block>
  <block id="df7d0aa2cf46fe870b9bba130ea4d964" category="open-title">为bash shell启用自动完成</block>
  <block id="dc8d08efd37c5c2cd13f1da4b74b2004" category="list-text">下载完成脚本：</block>
  <block id="bbd32e1d32af84e3002666b13f548cce" category="list-text">在主目录中创建一个新目录以包含该脚本：</block>
  <block id="63f01fb9933705d6d795c4c690a6504c" category="list-text">将下载的脚本移动到<block ref="37476bab24bad3126a5edbc11fab761e" prefix=" " category="inline-code"></block>目录：</block>
  <block id="4a76f80f250e570c9fd0b4b8b9e41486" category="list-text">将以下行添加到<block ref="b8cb707d54dfbd8ab64f0b1dc81b72e1" prefix=" " category="inline-code"></block>主目录中的文件：</block>
  <block id="51c2c8a3b8dd4aaaa1d5640e39860408" category="open-title">为Z shell启用自动完成</block>
  <block id="45dba4471beecdb4813778042a6ccfc2" category="list-text">将下载的脚本移动到<block ref="d6ca46a9bae5529cb8e845fb419ba1e0" prefix=" " category="inline-code"></block>目录：</block>
  <block id="e2f12f24108169a5ab9aa9923f95a468" category="list-text">将以下行添加到<block ref="f0f9c4057b7322a99704208706a05ba7" prefix=" " category="inline-code"></block>主目录中的文件：</block>
  <block id="8eea62084ca7e541d918e823422bd82e" category="paragraph-title">结果</block>
  <block id="7b6672be7a52979b1357ccc3d2a45f8a" category="summary">通过Trident Protect、管理员可以生成包含对NetApp支持有用信息的捆绑包、其中包括有关所管理的集群和应用程序的日志、指标和拓扑信息。如果您已连接到Internet、则可以使用自定义资源(CR)文件将支持包上传到NetApp支持站点(NSS)。</block>
  <block id="e984343e441956b7136d09919877b5ab" category="open-title">使用CR创建支持包</block>
  <block id="dd942fa25b8e28c96c8d05e37b0f157e" category="list-text">创建自定义资源(CR)文件并将其命名(例如<block ref="699c503b46d4ca3ec78905dff3704cac" prefix=" " category="inline-code"></block>)。</block>
  <block id="18924d9e76d2dc9a88bddb772904461d" category="list-text">配置以下属性：</block>
  <block id="3dbbdf39618ebec771728a10e75c52f9" category="list-text">*。metadata.name*:(_required__)此自定义资源的名称；请为您的环境选择一个唯一且合理的名称。</block>
  <block id="1d18312b2c5bd000f0693d25f38bddc9" category="list-text">*spec.t触发 器Type*：(_required_)用于确定是立即生成支持包、还是按计划生成支持包。计划在UTC时间中午12点生成捆绑包。可能值：</block>
  <block id="2b7dabba0077abe3732e0418b048a56b" category="list-text">已计划</block>
  <block id="e1ba155a9f2e8c3be94020eef32a0301" category="list-text">手动</block>
  <block id="b541a1c308699e3b9e58d7a1aa6d3ad6" category="list-text">*spec.u倍 加载已启用*：(_可 选_)控制是否应在生成支持包后将其上传到NetApp支持站点。如果未指定，则默认为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>。可能值：</block>
  <block id="e836d7c4f6371da7534f60641286999b" category="list-text">false (默认)</block>
  <block id="fa3e867f8599e4541ced8b0ced5b2cf1" category="list-text">*spec.dataWindowStart*：(_可 选_) RFC 3339格式的日期字符串，指定支持包中包含的数据窗口应开始的日期和时间。如果未指定、则默认为24小时前。您可以指定的最早窗口日期是7天前。</block>
  <block id="139f344cca23a89c521bc7cc6c7100b8" category="paragraph">YAML示例：</block>
  <block id="1f5c923d658756149d27388a30350ece" category="list-text">使用正确的值填充文件后<block ref="f242db754742ad72c7a0a3fa93d314df" prefix=" " category="inline-code"></block> 、应用CR：</block>
  <block id="b69675775a82aaa1e3307ebbe6a45fc0" category="open-title">使用命令行界面创建支持包</block>
  <block id="2294988013d14e5c254422b8164d83ad" category="list-text">创建支持包、将括号中的值替换为您环境中的信息。<block ref="769627afa23a2b90f925b1091e474dc5" prefix=" " category="inline-code"></block>确定是否立即创建分发包，或者是否由计划决定了创建时间，可以是<block ref="e1ba155a9f2e8c3be94020eef32a0301" prefix=" " category="inline-code"></block>或<block ref="2b7dabba0077abe3732e0418b048a56b" prefix=" " category="inline-code"></block>。默认设置为<block ref="e1ba155a9f2e8c3be94020eef32a0301" prefix=" " category="inline-code"></block>。</block>
  <block id="4351048276414d4fad273a0c7ad9f491" category="summary">如果您的环境符合要求、则可以按照以下步骤安装Trident Protect。</block>
  <block id="9ee0b57319616120eef37546fa8e4c42" category="doc">安装和配置Trident Protect</block>
  <block id="dc48a335c2095fb6a79ee14ee62b4806" category="paragraph">如果您的环境满足Trident Protect的要求、您可以按照以下步骤在集群上安装Trident Protect。您可以从NetApp获取Trident Protect、也可以从您自己的私人注册表安装它。如果集群无法访问Internet、则从专用注册表进行安装非常有用。</block>
  <block id="1d5f2a4008fa2c223d0ebc6aea423256" category="open-title">安装Trident Protect from NetApp</block>
  <block id="f1db582519ebcfcc20d90e41c0c5e9cc" category="open-title">从专用注册表安装Trident Protect</block>
  <block id="73dac5f92be0a06ecbcb1b8139b40593" category="paragraph">如果您的Trident集群无法访问Internet、则可以从专用映像注册表安装Kubbernetes Protect。在以下示例中、将括号中的值替换为您环境中的信息：</block>
  <block id="dfb8cfd789dde682f000a96e0aabb1f1" category="list-text">将以下映像提取到本地计算机、更新标记、然后将其推送到您的私人注册表：</block>
  <block id="2dcd4437dbff8aff3bc16ac15a71b74d" category="list-text">创建Trident Protect系统命名空间：</block>
  <block id="e0f6b701766eb28d805d7ba1e820f582" category="list-text">登录到注册表：</block>
  <block id="814565bb5d7e7359fff967986fd4195a" category="list-text">创建用于私人注册表身份验证的拉机密：</block>
  <block id="86e8b34710172d33dcae839e1f4dd07e" category="summary">您可以通过创建应用程序CR和关联的Trident Vault CR来使AppProtect能够识别要管理的应用程序。</block>
  <block id="80b940e5c68d020c06f9dc2f188d2169" category="doc">定义要管理的应用程序</block>
  <block id="1e10d655f5307ce7f79aeee68a9e72f3" category="paragraph">您可以通过创建应用程序CR和关联的Trident Vault CR来定义要使用AppProtect管理的应用程序。</block>
  <block id="58bd941b0268654136e17a3f6361fa75" category="section-title">创建AppVault CR</block>
  <block id="f5ddee36f3439fbf6875de509925b804" category="inline-link-macro">AppVault自定义资源。</block>
  <block id="2c2c79b6a4bc3f3b90fed9b96ab44d05" category="paragraph">您需要创建一个AppVault CR、以便在对应用程序执行数据保护操作时使用、并且AppVault CR需要驻留在安装了Trident Protect的集群上。AppVault CR特定于您的环境；有关AppVault CRS的示例、请参见<block ref="7e7838343a821a01b97d2b866c568a54" category="inline-link-macro-rx"></block></block>
  <block id="7eb786201a1068df31c2a8d7805c50bf" category="open-title">使用CR添加应用程序</block>
  <block id="b4b10aa7102ef4de9ba1d5672445c895" category="list-text">创建目标应用程序CR文件：</block>
  <block id="0f14679ea6b53d676a4e19300d32937e" category="list-text">创建自定义资源(CR)文件并将其命名(例如<block ref="6e1c6964e1bb7e391ff353b09e122d80" prefix=" " category="inline-code"></block>)。</block>
  <block id="3b96edf2a12486fc5d9dfaf7e692cdfc" category="list-text">*metadata.name*:(_required__)应用程序自定义资源的名称。请注意您选择的名称、因为保护操作所需的其他CR文件会引用此值。</block>
  <block id="edb32c41feaaffb2d7ff10dac9d80312" category="open-title">使用命令行界面添加应用程序</block>
  <block id="0ef657dffb550796349fff7260ee7b1f" category="summary">您可以将备份或快照数据还原到其他集群或存储类</block>
  <block id="5d23a9c0c55a80ece74daa65c04f1d66" category="doc">迁移应用程序</block>
  <block id="f0947115fd72dc8926d993b03e13a329" category="paragraph">您可以通过将备份或快照数据还原到其他集群或存储类来在集群或存储类之间迁移应用程序。</block>
  <block id="85ff05ce333a3cc83e4b1bece0b1a885" category="admonition">迁移应用程序时、为该应用程序配置的所有执行挂钩都会随该应用程序一起迁移。如果存在还原后执行挂钩、则它会在还原操作中自动运行。</block>
  <block id="dea2f94d534ebdd522c0137cd11f63bf" category="section-title">备份和还原操作</block>
  <block id="b21f1727ed04fb70c8e47cb11cdfb2bb" category="paragraph">要在以下情况下执行备份和还原操作、您可以自动执行特定的备份和还原任务。</block>
  <block id="a9764be0f1589c38e0a7df19889c7d63" category="section-title">克隆到同一集群</block>
  <block id="5a9889aaf704b3737fe054ecabd850fc" category="paragraph">要将应用程序克隆到同一集群、请创建快照或备份并将数据还原到同一集群。</block>
  <block id="365d382b2d9ecca9b0d40171c69b38ff" category="list-text">执行以下操作之一：</block>
  <block id="af9c364e0933200b7b8c1e7e13947ccf" category="inline-link-macro">创建快照</block>
  <block id="a73aa64574ccfae0cf05d9da96bd1301" category="list-text"><block ref="e078308a27dcac975eec5d2adaa1104c" category="inline-link-macro-rx"></block>(英文)</block>
  <block id="f99b69945a176ffbedac86a22cf6c413" category="inline-link-macro">创建备份</block>
  <block id="d0b37af201761eb2698b45f7c3f6d0d8" category="list-text"><block ref="7d9cd4227c8376552577f7b664ce81bb" category="inline-link-macro-rx"></block>(英文)</block>
  <block id="cf36005406fb9e7864efedea0a35a8a0" category="list-text">在同一集群上、根据您是创建了快照还是备份、执行以下操作之一：</block>
  <block id="2d173330624878d1a02dc399b82aa10b" category="inline-link-macro">从快照还原数据</block>
  <block id="00b559822f9df33b751ce11389fb7c7a" category="list-text"><block ref="137b81ae6c60df62029e75ad69c6bacd" category="inline-link-macro-rx"></block>(英文)</block>
  <block id="1c7b9a68982aa2ad5f1d69eeb5bdf99e" category="inline-link-macro">从备份还原数据</block>
  <block id="e27031b9d0bffffcf2abd2136eed21f5" category="list-text"><block ref="71bc4096317f8eb78a9951851bc1165b" category="inline-link-macro-rx"></block>(英文)</block>
  <block id="403ecb1db6fa0f1bb20e787bb5f5dacd" category="section-title">克隆到其他集群</block>
  <block id="181aa092ab965b34bcee90e25056f876" category="section-title">将应用程序从一个存储类迁移到另一个存储类</block>
  <block id="97a1f17d0c2154050e8ba2ecfd07ecf4" category="paragraph">您可以通过将快照还原到不同的目标存储类来将应用程序从一个存储类迁移到另一个存储类。</block>
  <block id="f1ad7bca566917ee78958caa78fab3f5" category="paragraph">例如(从还原CR中排除密钥)：</block>
  <block id="daf2d2aebeca09dea5ece5c9c1513383" category="open-title">使用CR还原快照</block>
  <block id="a35b06511e032bee46bbed064afa12dc" category="list-text">创建自定义资源(CR)文件并将其命名为<block ref="fac6dff7f801a4983f4a536dbcbd40d7" prefix=" " category="inline-code"></block>。</block>
  <block id="3585700696abe40ccc0973202ddace0a" category="list-text">在创建的文件中、配置以下属性：</block>
  <block id="ac6cdb13ccdd5d0ac3195b3301db572c" category="list-text">*spec.appArchivePath*：AppVault中存储快照内容的路径。您可以使用以下命令查找此路径：</block>
  <block id="d2e7f59eea5f95f37b023a243745727d" category="list-text">*spec.appVaultRef*：(_required_)存储快照内容的AppVault的名称。</block>
  <block id="33dc1feba43183f93ade318576611f4a" category="list-text">*。spec.namespaceMapping*:还原操作的源命名空间到目标命名空间的映射。将和<block ref="2cfb071d6be7d4cf9e297100f62858fe" prefix=" " category="inline-code"></block>替换<block ref="a6f7f0a873c27a67ee3194949076866b" prefix=" " category="inline-code"></block>为您环境中的信息。</block>
  <block id="12ed8140e585382bd7caee15c2ebb002" category="list-text">(可选)如果您只需要选择要还原的应用程序的某些资源、请添加包含或排除带有特定标签的资源的筛选：</block>
  <block id="15212a55e2108abef019ef0de4a2d413" category="list-text">*resourceFilter.resourceSourcesionCriteri*：(筛选时需要)<block ref="0daf9ee05d33b85e4cfc7be473c64e9b" prefix=" " category="inline-code"></block>用于包含或排除在resourceMatchers中定义的资源。添加以下resourceMatchers参数以定义要包括或排除的资源：</block>
  <block id="d9348d075dc7b3c91cff99d56dfc327b" category="inline-link">Kubernetes 文档</block>
  <block id="bca1b1b2b1a229dc37dffa4f7012c02d" category="list-text">使用正确的值填充文件后<block ref="fac6dff7f801a4983f4a536dbcbd40d7" prefix=" " category="inline-code"></block> 、应用CR：</block>
  <block id="ffe607ccb2c74bd77fcfcd7f0ff7691e" category="open-title">使用命令行界面还原快照</block>
  <block id="a77b4ff586cfbf08c54732a1ced52e4f" category="list-text">将快照还原到其他命名空间、将括号中的值替换为环境中的信息。</block>
  <block id="4f7a601ab79eb07bd8f0460d0e4ebccf" category="list-text"><block ref="c322d3de29d2b0c5e2e011dad5e77df2" prefix=" " category="inline-code"></block>参数使用格式为的命名空间和快照名称<block ref="7310980de32cd5ca687291f4b01b2e19" prefix=" " category="inline-code"></block>。</block>
  <block id="9a3152a9bfe0e487c80e9e42ee22e9f0" category="list-text">此<block ref="65e11896cb6b19f7dcb2432e67c74725" prefix=" " category="inline-code"></block>参数使用冒号分隔的卷来将源卷的源卷映射到格式为的正确目标卷的<block ref="07c70c21dcae158a4b2f0d389a52981b" prefix=" " category="inline-code"></block>卷。</block>
  <block id="3909674c7e76459d193fe9c27f127cbf" category="summary">通过使用自动保护策略或临时创建快照和备份来保护所有应用程序。</block>
  <block id="ca73b42f56baa81e1c83e31ee5c53d42" category="doc">保护应用程序</block>
  <block id="2530ad97c013f5d8d9c69004a4e7ee67" category="section-title">创建按需快照</block>
  <block id="9bbdcd6083ca1f29424ab7d4e6e6d3f5" category="paragraph">您可以随时创建按需快照。</block>
  <block id="ca5d8da21766c0b74083bb89d9b98f19" category="open-title">使用CR创建快照</block>
  <block id="d3455b82ff23d66412cff307dea26e95" category="list-text">创建自定义资源(CR)文件并将其命名为<block ref="30f7bac2bbe029d2d24e82f27526854c" prefix=" " category="inline-code"></block>。</block>
  <block id="14c5017706ef7ba38dbfced0b670f7e4" category="list-text">*spec.applicationRef*：要创建快照的应用程序的Kubernetes名称。</block>
  <block id="92c5bebe15e018e9b60ed9fa2a5d7736" category="list-text">*spec.appVaultRef*：(_required_)应存储快照内容(元数据)的AppVault的名称。</block>
  <block id="a9860c462819471295facd0a13fc4275" category="list-text">*spec.relaimPolicy*：(_可 选_)定义删除快照CR时快照的AppArchive会发生什么情况。这意味着，即使设置为，快照也<block ref="afece4245269582cb2f1009d4fb52047" prefix=" " category="inline-code"></block>将被删除。有效选项：</block>
  <block id="ff5ca6a0665c8d286d507fe36b867e1c" category="list-text"><block ref="afece4245269582cb2f1009d4fb52047" prefix="" category="inline-code"></block> (默认)</block>
  <block id="c009f85498c5a7a2db78e1874e6dd4b1" category="list-text"><block ref="f2a6c498fb90ee345d997f888fce3b18" prefix="" category="inline-code"></block></block>
  <block id="e405f936b8c322965ea5098c0dbead5e" category="list-text">使用正确的值填充文件后<block ref="30f7bac2bbe029d2d24e82f27526854c" prefix=" " category="inline-code"></block> 、应用CR：</block>
  <block id="70e7d17c41da1ec8002b8b8735b5d0b2" category="open-title">使用命令行界面创建快照</block>
  <block id="210011bd2b9ec4d5301f86e4a42cd17a" category="list-text">创建快照、将括号中的值替换为您环境中的信息。例如：</block>
  <block id="6c4e6d5940a93fcf9cfb1c5d53280da3" category="section-title">创建按需备份</block>
  <block id="f874973a64b67b3f5a5bb3aa28c5ed12" category="paragraph">您可以随时备份应用程序。</block>
  <block id="e0babda055ca7a962e4010e772393eb7" category="open-title">使用CR创建备份</block>
  <block id="adfd482111138eb2dfed01cdbaf4bead" category="list-text">创建自定义资源(CR)文件并将其命名为<block ref="a130741c8dff3b771a616715e2390607" prefix=" " category="inline-code"></block>。</block>
  <block id="888ea90f9844794ae90f13cbee8b341f" category="list-text">*spec.applicationRef*：(_required_)要备份的应用程序的Kubernetes名称。</block>
  <block id="df4c9919e99b5b20e10644af2e6480e1" category="list-text">*spec.appVaultRef*：(_required_)应存储备份内容的AppVault的名称。</block>
  <block id="2c5daece4baabe00a1e913f6f4248b54" category="list-text">*spec.dataMover*：(_可 选_)一个字符串，指示用于备份操作的备份工具。可能值(区分大小写)：</block>
  <block id="2baffe938961bfb9edd7d7ddfd52e2e1" category="list-text"><block ref="5f1c05bdfa0fa9da52e78fce65f0891a" prefix="" category="inline-code"></block></block>
  <block id="02c4383beef4fc06361dc4ef7bd9762a" category="list-text"><block ref="d112b025f416527f157666baac7d0ff7" prefix="" category="inline-code"></block> (默认)</block>
  <block id="5a848fb25ba88be36b674bded99badbd" category="list-text">*spic.relaimPolicy*：(_可 选_)定义了从备份申请中释放备份时会发生什么情况。可能值：</block>
  <block id="e3cdcd12b4f53ac42049007406401d18" category="list-text">使用正确的值填充文件后<block ref="a130741c8dff3b771a616715e2390607" prefix=" " category="inline-code"></block> 、应用CR：</block>
  <block id="4dd48cffc8290e0b33e5c4ee6ddc6dbb" category="open-title">使用命令行界面创建备份</block>
  <block id="25ccf268b4f889fe28d3f3de94aace02" category="list-text">创建备份、将括号中的值替换为您环境中的信息。例如：</block>
  <block id="451d39e79b7f4418d96b486e79bbce7d" category="section-title">创建数据保护计划</block>
  <block id="45ad0235a77627fe6b23b64997cecf69" category="paragraph">保护策略通过按定义的计划创建快照，备份或这两者来保护应用程序。您可以选择每小时，每天，每周和每月创建快照和备份，并且可以指定要保留的副本数。</block>
  <block id="1f3ba9ee33f6eeade259b37d0a9d4295" category="open-title">使用CR创建计划</block>
  <block id="0e94d109e3c6dd8f63d25b03253b5d5b" category="list-text">创建自定义资源(CR)文件并将其命名为<block ref="8b0c6e1f32e0c117335dedae62b11dba" prefix=" " category="inline-code"></block>。</block>
  <block id="fd3508664419c1ac5449e5dc6073188b" category="list-text">*spec.applicationRef*：要备份的应用程序的Kubernetes名称。</block>
  <block id="42423d5a056001113d7894f5f70d7b91" category="list-text">*spec.backupretention *：要保留的备份数。零表示不应创建任何备份。</block>
  <block id="53ea99d8bfae17bb8fc2186524166892" category="list-text">*spec.snapshotretention *：要保留的快照数。零表示不应创建任何快照。</block>
  <block id="da9137c7fbfdc9b7f02e3ca8def0431d" category="list-text">*。spec.granularity*:计划的运行频率。可能值以及必需的关联字段：</block>
  <block id="682d677bcf1ee88366ae753c477ace2d" category="list-text"><block ref="745fd0ea7f576f350a0eed4b8c48a8e2" prefix="" category="inline-code"></block> (要求您指定<block ref="aadd5cec42dbc02d51f62a1095401f59" prefix=" " category="inline-code"></block>)</block>
  <block id="a1fbdfda9f5f05dbe5b05383881f400f" category="list-text"><block ref="bea79186fd7af2da67e59b4b15df5a26" prefix="" category="inline-code"></block> (要求您指定<block ref="aadd5cec42dbc02d51f62a1095401f59" prefix=" " category="inline-code"></block> 和<block ref="9199af27775b1a2a876e6d7b25540711" prefix=" " category="inline-code"></block>)</block>
  <block id="41f071e1fad48cd8dcd577b1ac9c6917" category="list-text"><block ref="4a11fc05ed694c195f0703605b64da90" prefix="" category="inline-code"></block>(要求您指定<block ref="d5870327522a71f5b75f9d3793d0dc97" prefix=" " category="inline-code"></block>、和<block ref="4a04848e0e6e9423892ebc93ae61842d" prefix=" " category="inline-code"></block>)</block>
  <block id="80ec5614051d9052a9306e31ccee727b" category="list-text"><block ref="708638881f3bac9d9c8c742c79502811" prefix="" category="inline-code"></block>(要求您指定<block ref="d5870327522a71f5b75f9d3793d0dc97" prefix=" " category="inline-code"></block>、和<block ref="9a7606959f42328ceeef95d70c353158" prefix=" " category="inline-code"></block>)</block>
  <block id="fcf190043fb09fd4804fe6782a78a9a2" category="list-text">*spec.dayOfMonth*：(_可 选_)计划应运行的日期(1 - 31)。如果粒度设置为，则需要此字段<block ref="708638881f3bac9d9c8c742c79502811" prefix=" " category="inline-code"></block>。</block>
  <block id="2af4c701bc864e6f851f67ac3c19d5ea" category="list-text">*spec.dayOfWeek*：(_可 选_)计划应运行的日期(0到7)。值0或7表示星期日。如果粒度设置为，则需要此字段<block ref="4a11fc05ed694c195f0703605b64da90" prefix=" " category="inline-code"></block>。</block>
  <block id="b3af349c3c5d7f7aaa212c92d5ea9e51" category="list-text">*spec.hour *：(_可 选_)计划应运行的时间(0 - 23)。如果粒度设置为、或，则需要此字段<block ref="bea79186fd7af2da67e59b4b15df5a26" prefix=" " category="inline-code"></block><block ref="4a11fc05ed694c195f0703605b64da90" prefix=" " category="inline-code"></block><block ref="708638881f3bac9d9c8c742c79502811" prefix=" " category="inline-code"></block>。</block>
  <block id="27c9cf2998853e8a9b756268b2844110" category="list-text">*spec.minute：(_可 选_)计划应运行的分钟(0 - 59)。如果粒度设置为、、或，则需要此字段<block ref="745fd0ea7f576f350a0eed4b8c48a8e2" prefix=" " category="inline-code"></block><block ref="bea79186fd7af2da67e59b4b15df5a26" prefix=" " category="inline-code"></block><block ref="4a11fc05ed694c195f0703605b64da90" prefix=" " category="inline-code"></block><block ref="708638881f3bac9d9c8c742c79502811" prefix=" " category="inline-code"></block>。</block>
  <block id="1326c499c45cd471c6075891c6573130" category="list-text">使用正确的值填充文件后<block ref="8b0c6e1f32e0c117335dedae62b11dba" prefix=" " category="inline-code"></block> 、应用CR：</block>
  <block id="6bb2ab2bbc2b0f3f5faec961628f6f4b" category="open-title">使用命令行界面创建计划</block>
  <block id="95e2bfc6f531a05575927e45b0a34558" category="list-text">创建保护计划、将括号中的值替换为您环境中的信息。例如：</block>
  <block id="efb44cfe1d5b8d9954ea045385675c66" category="section-title">删除快照</block>
  <block id="a37bf6328466dc531288498c6041de5f" category="paragraph">删除不再需要的计划快照或按需快照。</block>
  <block id="3eb928cdf7a13317d47b6aff6e1777bc" category="list-text">删除与快照关联的快照CR：</block>
  <block id="cb2cecbd9776fc0c17c7929541fe9404" category="section-title">删除备份</block>
  <block id="2072fc95a1bd08ae58a002d5b61a84d0" category="paragraph">删除不再需要的计划备份或按需备份。</block>
  <block id="7b30bbf41be45c1c70a68e6dd971d83a" category="list-text">删除与备份关联的备份CR：</block>
  <block id="b4907a30deb60cd2f8ea2856235ce4d7" category="section-title">检查备份操作的状态</block>
  <block id="b030755f5014f11eb86aee527d4ef872" category="paragraph">您可以使用命令行检查正在进行、已完成或失败的备份操作的状态。</block>
  <block id="83fe182363ccdea33046e538aec4ac23" category="list-text">使用以下命令检索备份操作的状态、将括号中的值替换为环境中的信息：</block>
  <block id="bdd3c7731ba2eae7059bfebd0d56c7e3" category="section-title">为azure-ANF-files (NetApp)操作启用备份和还原</block>
  <block id="e9730662640f8238dbf4ed30d6292ecb" category="paragraph">如果您已安装Trident Protect、则可以为使用azure-files-files NetApp存储类且在Trident 24.06之前创建的存储后端启用节省空间的备份和还原功能。此功能适用于NFSv4卷、不会占用容量池中的额外空间。</block>
  <block id="a3ba5a3fd33b03f148e52fd833cda7c3" category="paragraph">确保满足以下要求：</block>
  <block id="a6cdb2021351db573212b98138416717" category="list-text">您已安装Trident Protect。</block>
  <block id="1b56af5799cb507ae72605b020a620df" category="list-text">您已在Trident Protect中定义应用程序。在您完成此操作步骤之前、此应用程序的保护功能将受限。</block>
  <block id="a9910fb38baec2aa849c3ea6191b1cf9" category="list-text">您已<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block> 选择作为存储后端的默认存储类。</block>
  <block id="579cc8ac85c74501fbfa1bac4d013c1f" category="example-title">展开以了解配置步骤</block>
  <block id="b1927eae954479de09c736cae4ed08dd" category="list-text">如果ANF卷是在升级到Trident 24.10之前创建的、请在Trident中执行以下操作：</block>
  <block id="119a6ab21356c173b517e4baf8ab21d3" category="list-text">为每个基于azure-pv-files且与应用程序关联的NetApp启用Snapshot目录：</block>
  <block id="9cb0a94d3b3051cae7cda63d4c5aa1d6" category="list-text">确认已为每个关联PV启用Snapshot目录：</block>
  <block id="54472d1da4b0c6eadf8684e846b25dcc" category="paragraph">响应：</block>
  <block id="77c9498d5c74a08af1c5918bd5fd8ee1" category="paragraph">如果未启用快照目录、Trident Protect将选择常规备份功能、此功能会在备份过程中临时占用容量池中的空间。在这种情况下、请确保容量池中有足够的可用空间来创建与要备份的卷大小相同的临时卷。</block>
  <block id="2efd4c8775ce47d6aa29183091d2a4e2" category="paragraph">此应用程序已准备好使用Trident Protect进行备份和还原。每个PVC还可供其他应用程序用于备份和恢复。</block>
  <block id="697f51e8965440d487236d46d469510d" category="summary">首先验证您的操作环境、应用程序集群、应用程序和许可证是否已准备就绪。确保您的环境满足这些要求、才能部署和运行Trident Protect。</block>
  <block id="c8f91050b5ec3e677d9c7e16e424f9bc" category="paragraph">Trident Protect与各种完全托管和自行管理的Kubernetes产品兼容、其中包括：</block>
  <block id="480c9b5f979d1ce95ea2a58b09826d1b" category="list-text">Amazon Elelic Kubelnetes Service (EKS)</block>
  <block id="974030a30a48754684d05541fd5e96c9" category="list-text">Google Kubernetes Engine （ GKEE ）</block>
  <block id="f3bd1985b243e9691bbbd63c6702344b" category="list-text">Microsoft Azure Kubernetes Service （ AKS ）</block>
  <block id="b175d08ac03101cd40f077848d436e1f" category="list-text">Red Hat OpenShift</block>
  <block id="6577b94f9943e513915919cfd0dc5909" category="list-text">SUSE试用者</block>
  <block id="c395793804bd9dfa82ff727781faf3c5" category="list-text">VMware Tanzu产品组合</block>
  <block id="1de3a8db0dcc39abe68ae2b506a8f0ac" category="list-text">上游Kubernetes</block>
  <block id="f6fbfc99b1ed4fcb2dee65355a088f0b" category="section-title">Trident保护存储后端兼容性</block>
  <block id="dc754c1df3be627f8c83600f4c69aade" category="paragraph">Trident Protect支持以下存储后端：</block>
  <block id="ca3930511e1c5997e851e891e33190ab" category="list-text">ONTAP存储阵列</block>
  <block id="e254891423d193d0e614eaf948880de5" category="paragraph">确保存储后端满足以下要求：</block>
  <block id="1efa9b79a24750278cc3058eaf2ead00" category="list-text">确保您有一个NetApp ONTAP存储后端。</block>
  <block id="c9a524733ac9eb25fbf1980538b5437d" category="list-text">确保已配置用于存储备份的对象存储分段。</block>
  <block id="953216b11f9b494b0b28bcec605cbea1" category="list-text">创建您计划用于应用程序或应用程序数据管理操作的任何应用程序卷。Trident Protect不会为您创建这些命名空间；如果在自定义资源中指定不存在的命名空间、则操作将失败。</block>
  <block id="f4ce5a5f08fdc6de51b81cc305a21fd0" category="section-title">NAS经济型卷的要求</block>
  <block id="85641afe25671a9190f50185f6e499d5" category="paragraph">Trident Protect支持对NAS经济型卷执行备份和还原操作。目前不支持将快照、克隆和SnapMirror复制到NAS经济型卷。您需要为计划与Trident Protect结合使用的每个NAS经济型卷启用一个Snapshot目录。</block>
  <block id="43da051477acee60af3ad54451d3d090" category="paragraph">某些应用程序与使用Snapshot目录的卷不兼容。对于这些应用程序、您需要通过在ONTAP存储系统上运行以下命令来隐藏Snapshot目录：</block>
  <block id="beb2d6f4cedfc5b87a39d1766369fade" category="paragraph">您可以通过对每个NAS经济型卷运行以下命令来启用Snapshot目录、并将其替换<block ref="a86374477aa0b3d451812bb6ced0458d" prefix=" " category="inline-code"></block>为要更改的卷的UUID：</block>
  <block id="70117c3862b4c793cc80799862e6fde9" category="admonition">通过将Trident后端配置选项设置为，您可以默认为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>新卷启用快照目录<block ref="7ad68fdac2eac069eb8ed0fc45b0fb74" prefix=" " category="inline-code"></block>。现有卷不受影响。</block>
  <block id="3ab436334531996382ccf17d7d3a4d69" category="section-title">SnapMirror复制的要求</block>
  <block id="00ae925249b1dcd734cdb679b48bf8f7" category="list-text">NetApp ONTAP Select</block>
  <block id="0f0b99ea2f70cd363c2c6a279f74e760" category="list-text">NetApp Cloud Volumes ONTAP</block>
  <block id="9f91d52d37c43ec162560596ac851ec9" category="section-title">SnapMirror复制的ONTAP集群要求</block>
  <block id="6ed8f95cb1dcd3baff756120151793a9" category="paragraph">如果您计划使用SnapMirror复制、请确保ONTAP集群满足以下要求：</block>
  <block id="ba84728ffba482ceb12371a53be2f636" category="inline-link">ONTAP 中的SnapMirror许可概述</block>
  <block id="b677eb65f7f869d18b845725a133a8d5" category="list-text">*许可证*：必须在源和目标ONTAP集群上启用使用数据保护包的ONTAP SnapMirror异步许可证。有关详细信息、请参见<block ref="a7b9425cefc4a3715b38951f4b2b6b35" category="inline-link-rx"></block> 。</block>
  <block id="ed097f5d093bf5311313c62bfb2f2d5a" category="section-title">SnapMirror复制的对等注意事项</block>
  <block id="a56ca0c4752a7197e296cb9141e9be9f" category="paragraph">如果您计划使用存储后端对等、请确保您的环境满足以下要求：</block>
  <block id="9fecd08b776fdfca7b33426363edf913" category="inline-link">集群和 SVM 对等概述</block>
  <block id="ddae31913091b421eaff815ed1e19b4f" category="list-text">*集群和SVM*：ONTAP存储后端必须建立对等状态。有关详细信息、请参见<block ref="36ecaf21e9ca81a83e736deb4ff5c657" category="inline-link-rx"></block> 。</block>
  <block id="94ac6b3955eab183cb88ab17c91000eb" category="admonition">确保两个ONTAP集群之间的复制关系中使用的SVM名称是唯一的。</block>
  <block id="e05c29680eacd6a4c163eefe138ff9fd" category="list-text">*托管后端*：您需要在Trident Protect中添加和管理ONTAP存储后端、才能创建复制关系。</block>
  <block id="57fe82c052fea1c269ca2b14e92e80d3" category="section-title">用于SnapMirror复制的Trident / ONTAP配置</block>
  <block id="59292a70a610fc937685ef1c3a3b5cb1" category="paragraph">Trident Protect要求您至少配置一个存储后端、以便为源集群和目标集群同时支持复制。如果源集群和目标集群相同、则目标应用程序应使用与源应用程序不同的存储后端、以获得最佳故障恢复能力。</block>
  <block id="4b92c534580865d96f1efb9f86289249" category="summary">您可以使用Trident Protect从快照或备份还原应用程序。将应用程序还原到同一集群时，从现有快照进行还原的速度会更快。</block>
  <block id="ff29014f3961a30f52557df7142d1a65" category="doc">还原应用程序</block>
  <block id="f346d32ba5d9c332bf8577bf1bacda07" category="admonition">还原应用程序时、为该应用程序配置的所有执行挂钩都会随该应用程序还原。如果存在还原后执行挂钩、则它会在还原操作中自动运行。</block>
  <block id="a082effb2d23d4eb077129001a77582f" category="section-title">从备份还原到其他命名空间</block>
  <block id="5a3a68cc2fb27d13057472b4869353f1" category="open-title">使用CR</block>
  <block id="0334c5d881452d9144d4edf93d44ff85" category="list-text">创建自定义资源(CR)文件并将其命名为<block ref="aa3356b96c40153ef83fe9854ede7a70" prefix=" " category="inline-code"></block>。</block>
  <block id="8ebefb3e84a05b2e3bf54824870d776d" category="list-text">*spec.appArchivePath*：AppVault中存储备份内容的路径。您可以使用以下命令查找此路径：</block>
  <block id="3f1db1c30ba33e5d04499f000ed77f97" category="list-text">*spec.appVaultRef*：(_required_)存储备份内容的AppVault的名称。</block>
  <block id="3e209c1619d0c38cf60c13838ca4cf72" category="list-text">*spec.storageClassMapping*：还原操作的源存储类到目标存储类的映射。将和<block ref="cb3a1d54728d178b537383d31afb4b53" prefix=" " category="inline-code"></block>替换<block ref="6d4164a2db4b8f123f2f4666f47d1304" prefix=" " category="inline-code"></block>为您环境中的信息。</block>
  <block id="a5085953f7b15a312b4e12827abc66e5" category="list-text">(_可 选_)如果只需要选择要还原的应用程序的某些资源、请添加包含或排除带有特定标签的资源的筛选：</block>
  <block id="be16b6e14200639734fb9694e3c0f655" category="list-text">*resourceMatcher[].group*：(_可 选_)要筛选的资源的组。</block>
  <block id="2162d9f0c97d87c37f838ea27ecb393a" category="list-text">*resourceMatcher[].KIND*：(_可 选_)要筛选的资源种类。</block>
  <block id="862dca1a77422225d13abda4b7bf539b" category="list-text">*resourceMatcher[].version*：(_可 选_)要筛选的资源版本。</block>
  <block id="f5d1dcaf86934b4541162f010db1d3e1" category="list-text">*resourceMatcher[].names*：(_可 选_)要筛选的资源的Kubernetes metadata.name字段中的名称。</block>
  <block id="19c69b04e9f9adb29979cc0ff90625b2" category="list-text">*resourceMatcher[].namespies*：(_可 选_)要筛选的资源的Kubernetes metadata.name字段中的命名空间。</block>
  <block id="cb4354b08a6a88b3c12671390a85c520" category="list-text">*resourceMatcher[].labelSelectors *：(_可 选_)资源的Kubernetes metadata.name字段中的标签选择器字符串，如中所定义<block ref="d4ce3da8407a7d8e148bb1287288e778" category="inline-link-rx"></block>。例如：<block ref="6ea45baf659f1f35e51c8dc9005eac03" prefix=" " category="inline-code"></block>。</block>
  <block id="18ad656f28db1ef6b2d76d21959ca243" category="list-text">使用正确的值填充文件后<block ref="aa3356b96c40153ef83fe9854ede7a70" prefix=" " category="inline-code"></block> 、应用CR：</block>
  <block id="8a9e0f8224695e94f0988f444488877b" category="open-title">使用命令行界面</block>
  <block id="6a07207e8441bfa8c4c36dc925112780" category="list-text">将备份还原到其他命名空间、将括号中的值替换为环境中的信息。此<block ref="65e11896cb6b19f7dcb2432e67c74725" prefix=" " category="inline-code"></block>参数使用冒号分隔的卷来将源卷的源卷映射到格式为的正确目标卷的<block ref="07c70c21dcae158a4b2f0d389a52981b" prefix=" " category="inline-code"></block>卷。例如：</block>
  <block id="0bfcabe961e72fea535a073143d53fad" category="section-title">从备份还原到原始命名空间</block>
  <block id="7260bc412b6c22c2589f01098c1f4430" category="paragraph">您可以随时将备份还原到原始命名空间。</block>
  <block id="34653be4af07bad31b9a3775f18b1b5f" category="list-text">创建自定义资源(CR)文件并将其命名为<block ref="59a09233aaa2a2c9e25fc46650bd6dee" prefix=" " category="inline-code"></block>。</block>
  <block id="349d4c53fe9d2e740d60f7ce8094c294" category="list-text">使用正确的值填充文件后<block ref="59a09233aaa2a2c9e25fc46650bd6dee" prefix=" " category="inline-code"></block> 、应用CR：</block>
  <block id="11d13ce9542ccbfd1e47138c96b125a1" category="list-text">将备份还原到原始命名空间、将括号中的值替换为环境中的信息。<block ref="402051f4be0cc3aad33bcf3ac3d6532b" prefix=" " category="inline-code"></block>参数使用格式为的命名空间和备份名称<block ref="7310980de32cd5ca687291f4b01b2e19" prefix=" " category="inline-code"></block>。例如：</block>
  <block id="db4c6bfd26488f4d6ab2ec6129b067d8" category="section-title">从快照还原到其他命名空间</block>
  <block id="941a76112ae80457a7a22ae552218be9" category="section-title">从快照还原到原始命名空间</block>
  <block id="a392e5395f0751460dc460cd6ec5e89d" category="paragraph">您可以随时将快照还原到原始命名空间。</block>
  <block id="4d18dba9a79fbe92e2bb99f0a9300df3" category="list-text">创建自定义资源(CR)文件并将其命名为<block ref="620b0dae36dbe6aeaae5d993f961c634" prefix=" " category="inline-code"></block>。</block>
  <block id="54625166c25afd8a6a484aaf2f346fbb" category="list-text">使用正确的值填充文件后<block ref="620b0dae36dbe6aeaae5d993f961c634" prefix=" " category="inline-code"></block> 、应用CR：</block>
  <block id="6bd960f94c189d42fef14b770c0ac909" category="list-text">将快照还原到原始命名空间、将括号中的值替换为环境中的信息。例如：</block>
  <block id="ba2718de6be08337811d049982d9f03f" category="section-title">检查还原操作的状态</block>
  <block id="97dedb929a195e839af5f7d7f8ef0ec5" category="paragraph">您可以使用命令行检查正在进行、已完成或失败的还原操作的状态。</block>
  <block id="c076e91339c1f092aaad1d36a9c18a7a" category="list-text">使用以下命令检索还原操作的状态、将括号中的值替换为环境中的信息：</block>
  <block id="3b236bd888d7d3460e381b13adb8f6b8" category="summary">如果您要从产品的试用版升级到完整版本、则可能需要删除Trident Protect组件。</block>
  <block id="1bc8acdabd6fc240195da5f19b986dd6" category="doc">卸载Trident Protect</block>
  <block id="fb509ce83a58c3beeca23f5d55c8d75c" category="paragraph">要删除Trident Protect、请执行以下步骤。</block>
  <block id="f6116aed83b3970c50d28447d27f4f97" category="list-text">删除Trident Protect CR文件：</block>
  <block id="aec02c2a1b714f40a949aa18d1f2d588" category="list-text">删除Trident保护：</block>
  <block id="20c06650be80c297c0e4dc5ae977d44f" category="list-text">删除Trident Protect命名空间：</block>
  <block id="a8c1fc9f09b8338dd9f8badd5c3d30c0" category="summary">您可以使用Trident Protect为应用程序创建自定义执行挂钩。要创建执行挂钩，您需要拥有所有者，管理员或成员权限。</block>
  <block id="ccd62d676165e34c2e9c6d088c06e70f" category="paragraph">执行挂钩是一种自定义操作、您可以将其配置为与受管应用程序的数据保护操作结合运行。例如、如果您有一个数据库应用程序、则可以使用执行挂钩在快照之前暂停所有数据库事务、并在快照完成后恢复事务。这样可以确保应用程序一致的快照。</block>
  <block id="83fbf1604bedff410ea11872b40ab9f0" category="section-title">执行挂钩的类型</block>
  <block id="d702711249a4d54c15ce81c80152b8e7" category="paragraph">Trident Protect支持以下类型的执行挂钩、具体取决于它们可以运行的时间：</block>
  <block id="9c6a9cc04a4d5840a5d237b232190a35" category="list-text">预快照</block>
  <block id="65db6b15c7f05c97a1647c11699053e3" category="list-text">快照后</block>
  <block id="0a2055495a94f091655a2e4d421cffe2" category="list-text">预备份</block>
  <block id="cf6e97e89c4b36c29252fcb7b0728d2f" category="list-text">备份后</block>
  <block id="349b93d2884e6ca3d41d0d9dab41dcd8" category="list-text">还原后</block>
  <block id="0952ad82f36d650828c9197bb777ee05" category="list-text">故障转移后</block>
  <block id="a9f57378169166a88acf61a71442e5fb" category="section-title">执行顺序</block>
  <block id="e8132483e0cae3565c87c193b3fd8f57" category="paragraph">运行数据保护操作时、执行钩事件按以下顺序发生：</block>
  <block id="4a6ccf1757fd10978b3fb28d81187dcc" category="list-text">任何适用的自定义操作前执行挂钩都会在相应的容器上运行。您可以根据需要创建和运行任意数量的自定义操作前挂钩、但操作前这些挂钩的执行顺序既不能保证也不可配置。</block>
  <block id="cfbed2286711be0cf6dbc12aba602709" category="list-text">执行数据保护操作。</block>
  <block id="9465fae733e0b5fdcd6e532ef8a78b08" category="list-text">任何适用的自定义操作后执行挂钩都会在相应的容器上运行。您可以根据需要创建和运行任意数量的自定义操作后挂机、但这些挂机在操作后的执行顺序既不能保证也不可配置。</block>
  <block id="a4ce4f522b635b3063f4af5d138933cc" category="paragraph">如果创建多个相同类型的执行挂钩(例如、预快照)、则无法保证这些挂钩的执行顺序。但是、可以保证不同类型的挂钩的执行顺序。例如、以下是具有所有不同类型挂钩的配置的执行顺序：</block>
  <block id="25fcbdcc7c9fb7d2e1db9e64ef06804c" category="list-text">已执行预快照挂钩</block>
  <block id="f098e888afa8ccb3f1ad3337c3b6eea1" category="list-text">已执行后快照挂钩</block>
  <block id="59b50be8e9e2ed1b0e1bccae54c76036" category="list-text">已执行备份前的挂钩</block>
  <block id="1f374d287bf615eef6eb9afd92b862f2" category="list-text">已执行备份后挂钩</block>
  <block id="e807d528474129e76f18c5ce17a2c3d6" category="admonition">只有在运行不使用现有快照的备份时、上述顺序示例才适用。</block>
  <block id="b74efcc6eafe1d8dec6ade34cfa13365" category="admonition">在生产环境中启用执行钩脚本之前，应始终对其进行测试。您可以使用 "kubectl exec" 命令方便地测试脚本。在生产环境中启用执行挂钩后、请测试生成的快照和备份、以确保它们一致。为此、您可以将应用程序克隆到临时命名空间、还原快照或备份、然后测试应用程序。</block>
  <block id="f99748fb4b1cf592516b60937743c52d" category="section-title">有关自定义执行挂钩的重要注意事项</block>
  <block id="6b8e88c5f4231fbc6994f3a29dd893af" category="paragraph">在为应用程序规划执行挂钩时，请考虑以下几点。</block>
  <block id="c9333604c0c05d7727ea70ec5f1b806b" category="list-text">执行挂钩必须使用脚本执行操作。许多执行挂钩可以引用同一个脚本。</block>
  <block id="cc0a52984aa9087cc5fca898c4dc1caa" category="list-text">Trident Protect要求以可执行shell脚本的格式编写执行挂钩所使用的脚本。</block>
  <block id="6a7d60379bb9015c0bfe02adcc54d0b5" category="list-text">脚本大小限制为96 KB。</block>
  <block id="d6eb1b65eb578d8eb99d367edc11bb03" category="list-text">Trident Protect使用执行挂钩设置和任何匹配条件来确定哪些挂钩适用于快照、备份或还原操作。</block>
  <block id="6b988caf78b1aa60f0402c611a1c8e2a" category="admonition">由于执行挂钩通常会减少或完全禁用其运行的应用程序的功能，因此您应始终尽量缩短自定义执行挂钩运行所需的时间。如果使用关联的执行挂钩启动备份或快照操作、但随后将其取消、则在备份或快照操作已开始时、仍允许运行这些挂钩。这意味着、备份后执行挂钩中使用的逻辑不能假定备份已完成。</block>
  <block id="99dc882fc0f61d1db87631ed9f156913" category="section-title">执行钩筛选器</block>
  <block id="44db75fbdb91be494665aebf40107fcf" category="paragraph">在为应用程序添加或编辑执行挂钩时、可以向执行挂钩添加筛选器、以管理挂钩将匹配的容器。对于在所有容器上使用相同容器映像的应用程序、筛选器非常有用、但可能会将每个映像用于不同的用途(例如Elasticsearch)。通过筛选器、您可以创建执行挂钩在某些容器上运行的方案、但不一定是所有相同的容器上运行的方案。如果为单个执行钩创建多个筛选器、则这些筛选器将与逻辑运算符和运算符结合使用。每个执行连接最多可以有10个活动筛选器。</block>
  <block id="7caae75448dbc59fcadd621099e170b3" category="inline-link">正则表达式2 (RE2)语法支持</block>
  <block id="c8390f7fcf8913e63d64e8069f87aa58" category="paragraph">添加到执行挂钩中的每个筛选器都会使用一个正则表达式来匹配集群中的容器。当某个挂钩与某个容器匹配时、该挂钩将在该容器上运行其关联脚本。筛选器的正则表达式使用正则表达式2 (RE2)语法、不支持创建从匹配列表中排除容器的筛选器。有关Trident Protect在执行挂钩过滤器中支持正则表达式的语法的信息，请参阅<block ref="d4d0dd655d04b2dc5b031206e1febd50" category="inline-link-rx"></block>。</block>
  <block id="4c004df391027b81952b788a3802e37c" category="admonition">如果将命名空间筛选器添加到在还原或克隆操作之后运行的执行挂钩、并且还原或克隆源和目标位于不同的命名空间中、则命名空间筛选器仅会应用于目标命名空间。</block>
  <block id="f1ec6389b6d19d3be02f29f4a7d29051" category="section-title">执行钩示例</block>
  <block id="0370124d48bfc5af2def19c48f433283" category="inline-link">NetApp Verda GitHub项目</block>
  <block id="a59e4fa5cc01a3a4bdebbff4cec60b47" category="paragraph">请访问<block ref="84d9961ef5a89731849bc2055780d0b6" category="inline-link-rx"></block> 、下载适用于Apache cassandr和Elascearch等常见应用程序的真实执行挂钩。您还可以查看示例并了解如何构建自己的自定义执行挂钩。</block>
  <block id="b103709bb8bab06f6db02c661d88466a" category="section-title">创建执行挂钩</block>
  <block id="e39c63d5ded2742e4215d5e339fa729e" category="list-text">创建自定义资源(CR)文件并将其命名为<block ref="ce6abb389eaae6953714e27f1dfde579" prefix=" " category="inline-code"></block>。</block>
  <block id="a1b64283bac1ca460b6b777a46121e7f" category="list-text">根据您的Trident Protect环境和集群配置配置以下属性：</block>
  <block id="500ef917ae8cc36e9c85a2c0bc7d9337" category="list-text">*spec.applicationRef*：(_required_)要运行执行挂钩的应用程序的Kubernetes名称。</block>
  <block id="5422fe7ebd8e2354557341f5b0c60905" category="list-text">*spec.stage *：(_required_)一个字符串，指示执行挂钩应在操作期间的哪个阶段运行。可能值：</block>
  <block id="fb55a965b77791b31ffd2bb548f71080" category="list-text">预</block>
  <block id="03d947a2158373c3b9d74325850cb8b9" category="list-text">发布</block>
  <block id="e60e3d87a1e5f522bbc8419b61b46a94" category="list-text">*spec.action*：(_required_)一个字符串，指示执行挂钩将执行的操作，假设指定的任何执行挂钩过滤器都匹配。可能值：</block>
  <block id="3500ba09d0538297440ca620c9dd46bf" category="list-text">备份</block>
  <block id="2bd339d85ee3b33e513359ce781b60cc" category="list-text">还原</block>
  <block id="7388404ef116c3ff812bfd290b094d9e" category="list-text">故障转移</block>
  <block id="216715348d2815376ef6d68d1ae8d3a1" category="list-text">*spec.enabled *：(_可 选_)指示此执行挂钩是启用还是禁用。如果未指定、则默认值为true。</block>
  <block id="aa6776e9151e1848128d771057fdb5d1" category="list-text">*spec.hookSource*：(_required_)包含base64编码的挂钩脚本的字符串。</block>
  <block id="c2f4f9c36d367244147c02191649b33e" category="list-text">*spec.timeout *：(_可 选_)一个数字，用于定义允许执行挂钩运行多长时间(以分钟为单位)。最小值为1分钟、如果未指定、则默认值为25分钟。</block>
  <block id="327ca4bc755c7de7ac0d335364730679" category="list-text">*spic.arge件*：(_可 选_)可为执行挂钩指定的YAML参数列表。</block>
  <block id="bf30a4b48b4b2636f15eacfc7159af33" category="list-text">*spec.匹 配Criteria：(_可 选_)标准键值对的可选列表，每个对构成执行挂钩筛选器。每个执行挂钩最多可以添加10个筛选器。</block>
  <block id="9092d99fcac84905883e4e76cd55bfab" category="list-text">*spec.匹 配Cricera.type*：(_可 选_)标识执行挂钩筛选器类型的字符串。可能值：</block>
  <block id="820b7ec56ed75f6138f5ddc10aec4747" category="list-text">内容管理器映像</block>
  <block id="3d52068b047d2a094a1af32cb2e338d6" category="list-text">内容名</block>
  <block id="8fd1f588fe68392265ea3a8149ce05a3" category="list-text">播客名称</block>
  <block id="d76694b319ab8227266d15f77f5f7aec" category="list-text">PodLabel</block>
  <block id="d84562295e02e89c17de04ba750d4c35" category="list-text">NamespaceName</block>
  <block id="011b50d44a6bb217bbe310071e727641" category="list-text">*spec.匹 配Cricery.value*：(_可 选_)用于标识执行挂钩筛选器值的字符串或正则表达式。</block>
  <block id="5b34802949c91e91f2c85f8ee1c129bd" category="list-text">使用正确的值填充CR文件后、应用CR：</block>
  <block id="de72143da28c8cafc0b906859f6e6d05" category="list-text">创建执行挂钩、将括号中的值替换为环境中的信息。例如：</block>
  <block id="d37692493f4055c8b34b9de2897bb1a6" category="summary">通过使用Trident Protect、您可以使用NetApp SnapMirror技术的异步复制功能将数据和应用程序更改从一个存储后端复制到另一个存储后端、复制到同一集群上或复制到不同集群之间。</block>
  <block id="73ff2f0e4c750901167edccad459407d" category="doc">使用NetApp SnapMirror复制应用程序</block>
  <block id="40322a2a338856f04751d8d3bdb62496" category="section-title">设置复制关系</block>
  <block id="f7c69ddccabddb0b74276d3c2a3086e0" category="paragraph">设置复制关系涉及以下方面：</block>
  <block id="a7b38e98cd0b780e4d7f39ca030851fe" category="list-text">选择希望Trident Protect创建应用程序快照的频率(包括应用程序的Kubbernetes资源以及应用程序每个卷的卷快照)</block>
  <block id="cc37bc9830a1edb8e50e296af8ade03b" category="list-text">选择复制计划(包括Kubbernetes资源以及永久性卷数据)</block>
  <block id="55960a396448d8f19fb182dfd2b04d90" category="list-text">设置创建快照的时间</block>
  <block id="7fe804bb721f10861ae38239b332f774" category="inline-link-macro">AppVault自定义资源</block>
  <block id="bb557baccf285d1ab6b4cdc32daf5848" category="open-title">使用CR创建AppVault</block>
  <block id="32429298e62d70d6afc71defdbdd3c42" category="list-text">创建自定义资源(CR)文件并将其命名(例如<block ref="0992b18d0f3771479838d4ddbaa2b097" prefix=" " category="inline-code"></block>)。</block>
  <block id="4b60a832776a25dfdf74d5dac3d3111f" category="list-text">* metadata.name*:(_required__) AppVault自定义资源的名称。请记下您选择的名称、因为复制关系所需的其他CR文件会引用此值。</block>
  <block id="2e65eb784535a1ecc4b75ea18e2863a6" category="list-text">*。spec.providerConfig*:(_required__)存储使用指定提供程序访问AppVault所需的配置。为您的提供商选择一个BucketName和任何其他必要的详细信息。请记下所选的值、因为复制关系所需的其他CR文件会引用这些值。有关其他提供商的AppVault CRS示例、请参见<block ref="789b31b0a5cabea5de04107e65439f53" category="inline-link-macro-rx"></block>。</block>
  <block id="655a22501c6f6d02821989a81036e65e" category="list-text">*。spec.providerCredentials*:(_required__)存储对使用指定提供程序访问AppVault所需的任何凭据的引用。</block>
  <block id="cb95e87ea13fe367aee43a64591dc23f" category="list-text">*。spec.providerCredentials.valueFromSecret*:(_required__)表示凭据值应来自密钥。</block>
  <block id="553f77a87c1f7385701bd0df77669571" category="list-text">*key*:(_required_)要从中选择的密钥的有效密钥。</block>
  <block id="cf3ae025f91646ac07aa5641d4e510cb" category="list-text">*name*:(_required_)包含此字段值的机密的名称。必须位于同一命名空间中。</block>
  <block id="0e022225fc6e6c1b2028f3a32bcc9dbc" category="list-text">* spec.providerCredentials.secretAccessKey*:(_required__)用于访问提供程序的访问密钥。名称*应与*。spec.providerCredentials.valueFromSecret.name*。</block>
  <block id="3830f9aa0973251f5c2658ea2e742ee5" category="list-text">*。spec.providerType*:(_required__)用于确定提供备份的内容；例如、NetApp ONTAP S3、通用S3、Google Cloud或Microsoft Azure。可能值：</block>
  <block id="ac68bbf921d953d1cfab916cb6120864" category="list-text">aws</block>
  <block id="03034eb1f294ef4f7a106ae02a31ae45" category="list-text">常规S3</block>
  <block id="a4d3001255c12ffd187d9548a2c800aa" category="list-text">ONTAP S3</block>
  <block id="da8c660bc44b572ae5fc3157a93282cb" category="list-text">StorageGRID S3</block>
  <block id="8af3a24bfad8f2e7a06abec1e5bc710e" category="list-text">使用正确的值填充文件后<block ref="0992b18d0f3771479838d4ddbaa2b097" prefix=" " category="inline-code"></block> 、应用CR：</block>
  <block id="65b1402ebaf9b35766ab033225a55f41" category="open-title">使用命令行界面创建AppVault</block>
  <block id="d686d91628b89b1ba45ca8bf5274eece" category="list-text">创建AppVault、将括号中的值替换为您环境中的信息：</block>
  <block id="93b7f025ad50fefb3f6b0c5ee86d6162" category="open-title">使用CR创建源应用程序</block>
  <block id="793bc477cba966a8d3771d018030c3c4" category="list-text">创建自定义资源(CR)文件并将其命名(例如<block ref="3e2c6ff026eba99761434b4f79aaa782" prefix=" " category="inline-code"></block>)。</block>
  <block id="3bf6684ac69fda7ed549f87ecb72678d" category="list-text">*metadata.name*:(_required__)应用程序自定义资源的名称。请记下您选择的名称、因为复制关系所需的其他CR文件会引用此值。</block>
  <block id="969353c1601d960362b65e2372b29251" category="list-text">*。spec.includedNamespaces*:(_required__)一个由命名区域和关联标签组成的数组。使用命名空间名称、并可选择通过标签缩小命名空间的范围、以指定此处列出的命名空间中存在的资源。应用程序命名空间必须属于此数组。</block>
  <block id="7a4e65ca72b4d8d16a9df08725a64df9" category="paragraph">*示例YAML*：</block>
  <block id="948be8a05d305f0b3dece0e8dcaf4546" category="list-text">使用正确的值填充文件后<block ref="3e2c6ff026eba99761434b4f79aaa782" prefix=" " category="inline-code"></block> 、应用CR：</block>
  <block id="677aa747b5e08444532c7cc040384124" category="open-title">使用命令行界面创建源应用程序</block>
  <block id="feaddb5b204f8f8f1226cc6f02275f5c" category="list-text">创建源应用程序。例如：</block>
  <block id="929d5ad53cad5d51ead7578004e2d5e5" category="list-text">为源应用程序创建复制计划：</block>
  <block id="57cc31c4785dfe52bb22cc8d375a3b67" category="list-text">创建自定义资源(CR)文件并将其命名(例如<block ref="8898becea7c9a79dd32acb9c34818b46" prefix=" " category="inline-code"></block>)。</block>
  <block id="87918fdbe5607aeceec3ec53bc40a2f8" category="list-text">* metadata.name*:(_required__)计划自定义资源的名称。</block>
  <block id="3e23380d121194d4ed43d5587e33eeba" category="list-text">*spec.appVaultRef*：(_required_)此值必须与源应用程序的AppVault的metadata.name字段匹配。</block>
  <block id="a7ac547d97c63ad78926b420081cf36d" category="list-text">*spec.ApplicationRef*：(_required_)此值必须与源应用程序CR的metadata.name字段匹配。</block>
  <block id="565c53b27f6972afc514c3431a7fb733" category="list-text">*spec.backup놣 쇴*：(_required_)此字段为必填字段、且值必须设置为0。</block>
  <block id="e00228f2eaa851d908b74fd6e1cbb1ab" category="list-text">*spec.enabled *：必须设置为true。</block>
  <block id="b8e08f9f53492c0cf7c4c918c8c27185" category="list-text">*。spec.granularity*:必须设置为<block ref="90589c47f06eb971d548591f23c285af" prefix=" " category="inline-code"></block>。</block>
  <block id="8c33ed4b89c2cd001ffad0203fe3c3b6" category="list-text">*spec.rec发 规则*：定义UTC时间的开始日期和重复间隔。</block>
  <block id="35ef995e5b9fe2ba99491ff849d63302" category="list-text">*spec.snapshot놣 쇴*：必须设置为2。</block>
  <block id="7c6d1c687b69c90909ec8375ac84883e" category="list-text">使用正确的值填充文件后<block ref="8898becea7c9a79dd32acb9c34818b46" prefix=" " category="inline-code"></block> 、应用CR：</block>
  <block id="04a53b4d2f7e20d9df207bfb6beb6ee7" category="list-text">应用CR：</block>
  <block id="d5ab09bc69c7800783bce2e14f2e456f" category="list-text">创建自定义资源(CR)文件并将其命名(例如<block ref="b851e4210e3875aa9242df636b0b3068" prefix=" " category="inline-code"></block>)。</block>
  <block id="7fab67e3c762a0a044dd84f11a740dd7" category="list-text">*。spec.providerConfig*:(_required__)存储使用指定提供程序访问AppVault所需的配置。为您的提供商选择<block ref="070a97dcde31faecac1fc843e205039c" prefix=" " category="inline-code"></block>以及任何其他必要的详细信息。请记下所选的值、因为复制关系所需的其他CR文件会引用这些值。有关其他提供商的AppVault CRS示例、请参见<block ref="789b31b0a5cabea5de04107e65439f53" category="inline-link-macro-rx"></block>。</block>
  <block id="4758f7c104e1f75364dadc9f8310e51d" category="list-text">使用正确的值填充文件后<block ref="b851e4210e3875aa9242df636b0b3068" prefix=" " category="inline-code"></block> 、应用CR：</block>
  <block id="15e5c4ea8565e669f02393ab1d7b1021" category="open-title">使用CR创建App镜像 关系</block>
  <block id="3ca407ea70946200511f8d2e1008f20f" category="list-text">创建自定义资源(CR)文件并将其命名(例如<block ref="e4fba3915616865173fe7feee130a30f" prefix=" " category="inline-code"></block>)。</block>
  <block id="52e868ab750f66344086c9bc5d6dadeb" category="list-text">* metadata.name:*(必需) App镜像 关系自定义资源的名称。</block>
  <block id="d9ee8f59f7e4a770213d4728b012fa38" category="list-text">*。spec.destinationAppVaultRef*:(_required__)此值必须与目标集群上目标应用程序的AppVault名称匹配。</block>
  <block id="ad47c31cec730ddef75893f6207a8350" category="list-text">*。spec.namespaceMapping*:(_required__)目标和源命名空间必须与相应应用程序CR中定义的应用程序命名空间匹配。</block>
  <block id="0d2f17f43053f85c97752c575bb2af3e" category="list-text">*spec.sourceAppVaultRef*：(_required_)此值必须与源应用程序的AppVault名称匹配。</block>
  <block id="5c0044cad9c27e4f4742c4a031edd6eb" category="list-text">*spec.sourceApplicationName*:(_required_)此值必须与您在源应用程序CR中定义的源应用程序的名称匹配。</block>
  <block id="e1e70c108ffb369c9c05ac65820562c3" category="list-text">使用正确的值填充文件后<block ref="e4fba3915616865173fe7feee130a30f" prefix=" " category="inline-code"></block> 、应用CR：</block>
  <block id="d4c94febe4f13411fa761de57ad6cce6" category="open-title">使用命令行界面创建App镜像 关系</block>
  <block id="1d29e9d9da5d097b90cc18a976fa591c" category="list-text">创建并应用App镜像 关系对象、将括号中的值替换为环境中的信息。例如：</block>
  <block id="86d47ead9019d8e9c93c863f7ab4e41b" category="list-text">(_可 选_)检查复制关系的状态：</block>
  <block id="70cc2bec279e168711b67e789468c45c" category="section-title">故障转移到目标集群</block>
  <block id="196c4df78e5add7c9590d6a1c18367ec" category="paragraph">使用Trident Protect、您可以将复制的应用程序故障转移到目标集群。此操作步骤 将停止复制关系并使应用程序在目标集群上联机。如果源集群上的应用程序正常运行、则Trident Protect不会停止该应用程序。</block>
  <block id="2d258c624d61d2388efacfc246d2439e" category="list-text">保存 CR 文件。</block>
  <block id="66ccf267a388b1a30a7530a93ea5ce18" category="list-text">(_可 选_)在故障转移应用程序上创建所需的任何保护计划。</block>
  <block id="ea7117a895b98283737d3855ef6a2adc" category="section-title">重新同步故障转移复制关系</block>
  <block id="c91dda18aff454993264381ffa25993f" category="paragraph">重新同步操作将重新建立复制关系。执行重新同步操作后、原始源应用程序将成为正在运行的应用程序、对目标集群上正在运行的应用程序所做的任何更改将被丢弃。</block>
  <block id="86e073f24d64b270ed8fd6bac00280eb" category="paragraph">此过程会先停止目标集群上的应用程序、然后再重新建立复制。</block>
  <block id="63a5fb6889ac843fec3c274399995a88" category="admonition">故障转移期间写入目标应用程序的所有数据都将丢失。</block>
  <block id="c7e41946fafafcb541aaa5a67635b607" category="list-text">如果您在目标集群上创建了任何保护计划来保护故障转移应用程序、请将其删除。任何保留的计划都会导致卷快照失败。</block>
  <block id="6e81bcb9e218ada350c173457300a0ed" category="section-title">反向重新同步故障转移复制关系</block>
  <block id="b29e882c5e41f060c9261101cb1cab06" category="paragraph">反向重新同步故障转移复制关系时、目标应用程序将成为源应用程序、而源将成为目标。在故障转移期间对目标应用程序所做的更改将保留下来。</block>
  <block id="3c890586eb43d0d71cdcb47011358420" category="list-text">通过将最初用于设置复制关系的CR文件应用于对等集群来设置复制关系。</block>
  <block id="8a427fa57d96e74516c008754320b521" category="list-text">在另一个集群上设置复制关系、并配置反向值。</block>
  <block id="792322eb4a0bf1a122100fc009041d9b" category="section-title">反转应用程序复制方向</block>
  <block id="eb89cf8a1850f41e41a65f7b65ec9c87" category="paragraph">反向复制方向时、Trident Protect会将应用程序移至目标存储后端、同时继续复制回原始源存储后端。Trident Protect会先停止源应用程序并将数据复制到目标、然后再故障转移到目标应用程序。</block>
  <block id="4625c1e6ccf2351ad9a08dcee33270c8" category="paragraph">在这种情况下、您将交换源和目标。</block>
  <block id="4f902591d45de06985f0af6d869c8a04" category="open-title">使用CR创建关闭快照</block>
  <block id="1f6c30c2bcecec90eda54cd7038f326b" category="list-text">禁用源应用程序的保护策略计划。</block>
  <block id="4a4cfa535eb9cd705b5999ffaa6a738b" category="list-text">创建Sh关机Snapshot CR文件：</block>
  <block id="92391ecdad41a6b33b04771b3e5e20bf" category="list-text">创建自定义资源(CR)文件并将其命名(例如<block ref="9bab8384d1fd26e8737f71771039462f" prefix=" " category="inline-code"></block>)。</block>
  <block id="1b38935a45d4eaf71098501cbdc191df" category="list-text">* metadata.name*:(_required__)自定义资源的名称。</block>
  <block id="54c1687e91064a6e4cdc35b9a2d411a8" category="list-text">*spec.ApplicationRef*：(_required_)此值必须与源应用程序CR文件的metadata.name字段匹配。</block>
  <block id="4390dd9bb73a0c56ac3c54b54b1fe51a" category="list-text">使用正确的值填充文件后<block ref="9bab8384d1fd26e8737f71771039462f" prefix=" " category="inline-code"></block> 、应用CR：</block>
  <block id="f450395b52edc310f6e53fe1a9e24477" category="open-title">使用命令行界面创建关闭快照</block>
  <block id="01eb7f0adf446989c265a6179909de7b" category="list-text">创建关闭快照、将括号中的值替换为环境中的信息。例如：</block>
  <block id="bdd0666b03fe73dd725c0376fdb435e0" category="admonition">在故障转移过程的第2步中、将字段包含<block ref="60464bee8fcac84cb209df68a2b05fba" prefix=" " category="inline-code"></block>在App镜像 关系CR文件中、并将其值设置为您在上述第3步中记录的基本名称。</block>
  <block id="ab486212bb19e45c8e71532739574a22" category="list-text">在新的源集群上启用保护计划。</block>
  <block id="aea4fd534bd3152673956c6bbd7c115c" category="paragraph">反向复制会导致以下操作：</block>
  <block id="a23cf6af7e31f808d57bb74c992226c6" category="list-text">系统会为原始源应用程序的Kubbernetes资源创建一个快照。</block>
  <block id="08c383efd49395a644fa60036a0853a2" category="list-text">通过删除原始源应用程序的Kubernetes资源(保留PVC和PV)、可以正常停止原始源应用程序的Pod。</block>
  <block id="0053c8b169583fc7b29e0dfbe82d59fd" category="list-text">关闭Pod后、将为应用程序的卷创建快照并进行复制。</block>
  <block id="b1907879d61e1f061c433469dfb8ddcf" category="list-text">SnapMirror关系将中断、从而使目标卷做好读/写准备。</block>
  <block id="b6c3873d17157e3e4a0b1ef02b3cef69" category="list-text">此应用程序的Kubornetes资源将使用在初始源应用程序关闭后复制的卷数据从关闭前的快照中还原。</block>
  <block id="3cecdf93ba8c40eb3b09b7a7f9985e1d" category="list-text">反向重新建立复制。</block>
  <block id="827d6f4840be3ba668aa3eaee7c11d8d" category="section-title">将应用程序故障恢复到原始源集群</block>
  <block id="fbe6471033a142db5e3165e4034c1157" category="paragraph">通过使用Trident Protect、您可以通过以下操作序列在故障转移操作后实现"故障恢复"。在此恢复原始复制方向的工作流中、Trident Protect会在反转复制方向之前将所有应用程序更改复制(重新同步)回原始源应用程序。</block>
  <block id="3a045f0ae84563b460627f43bb272936" category="paragraph">此过程从已完成故障转移到目标的关系开始、涉及以下步骤：</block>
  <block id="9cbd7771b861e31b5edb23d83de4758c" category="list-text">从故障转移状态开始。</block>
  <block id="39d2beed854377dcad2ea22fe9e58477" category="section-title">删除复制关系</block>
  <block id="a6c87e2b66308cd117a39af0fdac9885" category="paragraph">您可以随时删除复制关系。删除应用程序复制关系后、会导致两个单独的应用程序之间没有关系。</block>
  <block id="c4407b1cc5192fe600872654a5ffe223" category="list-text">为KubeNet本机工作流添加了新的Trident功能：</block>
  <block id="7e7397a7b79323762c61941fc0e6b5f9" category="list-text">数据保护</block>
  <block id="5866b98c049a53ea6dc7f50f9349f434" category="list-text">数据迁移</block>
  <block id="645a84975202e30700b572b49a5ee29d" category="list-text">灾难恢复</block>
  <block id="11d5920d0c0b3a97e764f84dc92ef110" category="list-text">应用程序移动性</block>
  <block id="f593e32b2a3ead4ac029c13126d3531d" category="inline-link-macro">详细了解Trident Protect</block>
  <block id="487dc96e91d89134e7a216bab529a019" category="paragraph">从24.10版开始、Astra Trident更名为Trident (NetApp Trident)。此品牌重塑不会影响Trident的任何功能、支持的平台或互操作性。</block>
  <block id="a2d3ef10e2d8aae09270e11f8faea2d2" category="sidebar">高级数据管理和保护</block>
  <block id="6274fe9ce01bdde4e27e80b7958fb714" category="sidebar">借助Trident Protect实现高级数据保护</block>
  <block id="1251ea693b8f0b6da19ce6991115faa0" category="sidebar">部署Trident Protect</block>
  <block id="6c3cb2816fa53d1d99c44a111d9f7206" category="sidebar">使用Trident Protect保护应用程序</block>
  <block id="884400bd4c8f5f2b0070bef92b055594" category="sidebar">安装Trident Protect</block>
  <block id="f284d92e4bd22a3c7a76bfe530ddd899" category="sidebar">管理Trident Protect</block>
  <block id="b9ef0ee6944eb101de3de64b82db00dd" category="sidebar">生成Trident Protect支持包</block>
  <block id="1ae067a03c56065918252f36c73024d1" category="sidebar">管理和保护应用程序</block>
  <block id="793ba052e921b84a44dd053d68f45012" category="sidebar">使用Trident Protect管理执行挂钩</block>
  <block id="a4ac350fb585f51020f747525f3175d8" category="paragraph"><block ref="2c7a14b5507108d57a83e6eb9858f03a" category="inline-link-macro-rx"></block>(英文)</block>
  <block id="c5bc7ac802b8e0a400d724239314a7bf" category="image-alt">AWS EKS 06</block>
  <block id="c198f49680a4c22b6d731cdd7d7b513a" category="paragraph">您可以使用<block ref="cd4140d3de30b520500459331d08d2bf" prefix=" " category="inline-code"></block>命令查看安装详细信息、例如名称、命名空间、图表、状态、应用程序版本和修订版号。</block>
  <block id="d43d72969793ea80734b71e9c2406b2a" category="list-text">*保留集群上的附加软件*–此选项将删除Amazon EKS对任何设置的管理。此外、它还会使Amazon EKS无法通知您更新、并在您启动更新后自动更新Amazon EKS附加项。但是、它会保留集群上的附加软件。此选项可使附加组件成为自管理安装、而不是Amazon EKS附加组件。通过此选项、此附加组件不会出现停机。保留命令中的<block ref="4b4ac0f998920a46fd2015e11d01d3e7" prefix=" " category="inline-code"></block> 选项以保留此附加项。</block>
  <block id="03f2a9d8b5b9f1a03bc58b91a939d84f" category="paragraph"><block ref="ad43edaec055586043c762c9475bde5c" category="inline-link-macro-rx"></block> 是Google Cloud中的一项完全托管的文件存储服务、可提供高性能企业级文件存储。</block>
  <block id="0ce84605b24873b2ee81987302d60089" category="paragraph"><block ref="bc468e9b0072cb6f1552f9bc0a3b6063" category="inline-link-rx"></block>是一种云原生文件服务、可通过NFS为NAS卷提供全闪存性能。此服务支持在GCP云中运行任何工作负载、包括传统应用程序。它提供了一种完全托管的服务，可提供稳定一致的高性能，即时克隆，数据保护以及对 Google Compute Engine （ GCE ）实例的安全访问。</block>
  <block id="afb432a9cb893dca3218bf5ed8f124b6" category="section-title">第6步：授予对AppVault对象的访问权限</block>
  <block id="518792e00e0ca0d711657c9051ae8b45" category="paragraph">要执行备份和快照等数据管理任务、集群管理员需要向各个用户授予对AppVault对象的访问权限。</block>
  <block id="3ce2b0dd65dc314e4d0ccf4ed02db5a7" category="list-text">创建并应用AppVault和机密组合YAML文件、以授予用户对AppVault的访问权限。例如、以下CR将授予用户对AppVault的访问权限<block ref="6ca05da537cc3daa1ec22134c0b69946" prefix=" " category="inline-code"></block>：</block>
  <block id="f1c648202447b3667edef5439e1a8c5e" category="list-text">创建并应用角色CR、使集群管理员能够授予对命名空间中特定资源的访问权限。例如：</block>
  <block id="2ebacf7e8f38b367350c5c91618a6e79" category="list-text">创建并应用RoleBinding CR以将权限绑定到用户eng-user。例如：</block>
  <block id="dc3d0a515ce0266cb00eb5cc06c4fe94" category="list-text">验证权限是否正确。</block>
  <block id="b5c9b7c142e23b0f885d64628ec267ff" category="list-text">尝试检索所有名称库的AppVault对象信息：</block>
  <block id="d0848afd8553c34945705222a97a4553" category="paragraph">您应看到类似于以下内容的输出：</block>
  <block id="07337191562a62a775a853d9901903a6" category="list-text">测试用户是否可以获取他们现在有权访问的AppVault信息：</block>
  <block id="e7165fc51f62031fcae1d793899febaa" category="paragraph">您为其授予了AppVault权限的用户应该能够使用授权的AppVault对象执行应用程序数据管理操作、并且不能访问分配的命名区之外的任何资源、也不能创建他们无权访问的新资源。</block>
  <block id="a268a576db3133de464aad1cd81ab3e1" category="inline-link-macro">生成支持包</block>
  <block id="753f99fdafabdea1282917a0d7df52d4" category="list-text">执行中的反向重新同步步骤<block ref="07428cadd63a52910df8ba314efe2f56" category="inline-xref-macro-rx"></block>。</block>
  <block id="fe411ea35c29677771dcaad52985fc08" category="list-text">反向重新同步复制关系。</block>
  <block id="eb10e971ec83f13f35beb8166ae8958b" category="admonition">请勿执行正常的重新同步操作、因为这会丢弃在故障转移过程中写入目标集群的数据。</block>
  <block id="de5da2c7cfd6c7eda31703be01d3513e" category="list-text">反转复制方向。</block>
  <block id="be41e0ea028981dcba35343dcbd34991" category="list-text">执行<block ref="07428cadd63a52910df8ba314efe2f56" category="inline-xref-macro-rx"></block>步骤。</block>
  <block id="e3f67484570d0b1b5736841718c5ab22" category="list-text">执行<block ref="80fca82e419d46692dbbc4fbbcd0c990" category="inline-xref-macro-rx"></block>步骤。</block>
  <block id="51d8fa0a5eb3f269bad2a2a47a660a2d" category="paragraph">现在、您可以在Trident中使用光纤通道(Fibre Channel、FC)协议来配置和管理ONTAP系统上的存储资源。</block>
  <block id="822b1839c387749c78601eebc94c8d7d" category="paragraph">为FC配置所需的网络和节点设置。</block>
  <block id="f508b22c8fc4486b19fee39d5ded3841" category="section-title">网络设置</block>
  <block id="16fdd92def5a71313d6535c74ef67b81" category="inline-link-macro">network interface show</block>
  <block id="cc7e69899d736126df9787634ad41870" category="list-text">获取启动程序(主机)上接口的WWPN。</block>
  <block id="1089b965cabd19cfee7f3ef855fbd63d" category="paragraph">请参阅相应的主机操作系统实用程序。</block>
  <block id="6f58745fc3a341adae0772d30d9e508c" category="list-text">使用主机和目标的WWPN在FC交换机上配置分区。</block>
  <block id="54336aa51b161faac4d0ebb1b76b1536" category="paragraph">有关信息、请参见相应的交换机供应商文档。</block>
  <block id="299f2e1a529559eb06c9dfbe12ccdea9" category="paragraph">有关详细信息、请参见以下ONTAP文档：</block>
  <block id="d7281ba358054b30594dcd34819057a1" category="inline-link">光纤通道和 FCoE 分区概述</block>
  <block id="bce9f24194c15bbf6b5ad6cd1d8d1899" category="list-text"><block ref="bce9f24194c15bbf6b5ad6cd1d8d1899" category="inline-link-rx"></block></block>
  <block id="9b9db0b6f6df6361aa97412feea7ae07" category="list-text"><block ref="1a83c479258a4b0e250085c944bae4de" category="inline-link-rx"></block></block>
  <block id="36b37761159ed00a729b4f6fab9a0f02" category="paragraph-title">安装FC工具</block>
  <block id="f0ad3dc6a6ba17b1e77a2a4af657f22a" category="paragraph">使用适用于您的操作系统的命令安装FC工具。</block>
  <block id="553ac32ac6bcab84d5384eda7468d415" category="paragraph">Kubernetes集群中的所有工作节点都必须能够挂载为Pod配置的卷。要准备工作节点、必须根据您选择的驱动程序安装NFS、iSCSI、NVMe/TCP或FC工具。</block>
  <block id="64467ac9530ff26c4e6495117175346d" category="admonition">如果使用的ONTAP是包含24个或更多字符的storagePrefix、则qtrees不会嵌入存储前缀、但会显示在卷名称中。</block>
  <block id="0d28255dc96cb23d422741096c09ce8e" category="paragraph"><block ref="256d12880dee7515c7ed6253fd0a228a" prefix="" category="inline-code"></block><block ref="bd5ed83ae12ddcfe924a6af54a0be554" prefix=" " category="inline-code"></block></block>
  <block id="15286900a0d0667ffc4d515aeec6a1d2" category="list-text">将插件二进制文件复制到路径变量中定义的位置。例如、<block ref="7512824c50c61ea8d89d0f193a4f72d1" prefix=" " category="inline-code"></block>或<block ref="ad2e864ce1a99daa836c3449f3ba705d" prefix=" " category="inline-code"></block>(您可能需要提升Privileges)：</block>
  <block id="cff063350a0daf1b0ee4c6c97eb2e2de" category="admonition">将备份还原到具有现有资源的其他命名空间不会更改与备份中的资源共享名称的任何资源。要还原备份中的所有资源、请删除并重新创建目标命名空间、或者将备份还原到新命名空间。</block>
  <block id="0ac202e458490a734271522fcedf4876" category="list-text">确保<block ref="8732863da72605a20ed96b4eee87a5fb" prefix=" " category="inline-code"></block>正在运行：</block>
  <block id="69eeaf73fccab6d6abcba46bd6a3a3bf" category="list-text">确保<block ref="452b142235e718663e27bc4f162c14ca" prefix=" " category="inline-code"></block>已启用且正在运行：</block>
  <block id="00ea3f7016d7b9a4ad023b106cc1e6d3" category="paragraph"><block ref="7e7b7908484dc2cebc13ec93d8042bd0" category="inline-link-macro-rx"></block>如果您使用的是<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>sanType<block ref="0f64d0456878c73cbec1ccea842a6f14" prefix=" " category="inline-code"></block> (基于FC的SCSI)。</block>
  <block id="0cc310db20eaee9161e8ef937010b536" category="doc">管理Trident保护授权和访问控制</block>
  <block id="97f3fa7a4bb86197f0db69aa160c73e9" category="doc">使用Trident Protect AppVault对象管理分段</block>
  <block id="bf4313699bccd15d73aa8653cfdfd754" category="doc">使用Trident Protect定义要管理的应用程序</block>
  <block id="b6a8ee5a5280d899b4ea1be0f8697335" category="doc">使用Trident Protect迁移应用程序</block>
  <block id="8686ed080978191a10848ee52cd0c87a" category="doc">使用Trident Protect保护应用程序</block>
  <block id="0539043b2ec0bd1bfae64dc58173dec7" category="doc">使用Trident Protect还原应用程序</block>
  <block id="873e2eae9a82cbe9c291ade077f017d2" category="doc">管理Trident Protect执行挂钩</block>
  <block id="6f8f09e1a22390ac35a40283a4dc713f" category="doc">使用NetApp SnapMirror和Trident Protect复制应用程序</block>
  <block id="2fc23e09b483dc4495beb473646c0273" category="list-text"><block ref="2fc23e09b483dc4495beb473646c0273" category="inline-link-macro-rx"></block></block>
  <block id="e132245ad28668c6b32dee21fb8a3820" category="list-text">获取目标接口的WWPN。有关详细信息、请参见<block ref="92fd8fd0370792cd397ea6fdc3c8edb0" category="inline-link-rx"></block> 。</block>
  <block id="ab17e5f89eede1d0e6d8d31cc646b837" category="paragraph-title"><block ref="58f667aaf05f87159670e12bd9bc076b" category="inline-image-macro-rx" type="image"></block>准备工作节点</block>
  <block id="8f571d58ed95211be01ea993de3fee3e" category="paragraph-title"><block ref="54f425ce8d89f4ed6b8a546561af5d60" category="inline-image-macro-rx" type="image"></block>安装Trident</block>
  <block id="2fd92693952062fc00d949899370185d" category="section-title">定义应用程序</block>
  <block id="da305154e58c2f6709cee1cca6b2d8c8" category="paragraph">您需要定义要使用Trident Protect管理的每个应用程序。您可以通过手动创建应用程序CR或使用Trident Protect命令行界面来定义要管理的应用程序。</block>
  <block id="964ba319e15e38c5b0f3ee2a3dd4a8f8" category="list-text">创建应用程序CR以匹配您的环境后、请应用CR。例如：</block>
  <block id="26ff92fc2410a19d125f3783f36a21f5" category="paragraph">保护在KubeVirt VM上运行的应用程序时、Trident Protect 24.10 24.10.1及更高版本的行为会有所不同。对于这两个版本、您都可以在数据保护操作期间启用或禁用文件系统冻结和解除冻结。</block>
  <block id="4d2e55f1e0d6587dd3b63700ee1065af" category="paragraph-title">Trident智能驭领保障24.10</block>
  <block id="2d261bce9a1e151a31ff22788033f212" category="paragraph">Trident Protect 24.10不会在数据保护操作期间自动确保KubeVirt VM文件系统的状态一致。如果要使用Trident Protect 24.10保护KubeVirt VM数据、则需要在执行数据保护操作之前手动为文件系统启用冻结/取消冻结功能。这样可确保文件系统处于一致状态。</block>
  <block id="acb14ba5b70eb330a1d4de9c6b7a325d" category="inline-link-macro">正在配置虚拟化</block>
  <block id="74c1cc067621b7ea2ccf9f91b4595bd8" category="paragraph">您可以先配置Trident Protect 24.10、以便在执行数据保护操作期间管理VM文件系统的冻结和解除冻结<block ref="e0dd4c4b8aa16596df6c3f5cb36d3cdc" category="inline-link-macro-rx"></block>、然后使用以下命令：</block>
  <block id="72768e0f0d0f990d0abd53363fda4696" category="paragraph-title">Trident®24.10.1及更高版本</block>
  <block id="42a2550b14037192e0c3252e7666ec4d" category="paragraph">从Trident Protect 24.10.1开始、Trident Protect会在数据保护操作期间自动冻结和解除冻结KubeVirt文件系统。或者、您可以使用以下命令禁用此自动行为：</block>
  <block id="cedf2576eebff15fc6b30d5a7109eb6b" category="doc">还原和故障转移操作期间的命名空间标注和标签</block>
  <block id="131ff34387be167411ffda7d60b577e7" category="paragraph">在还原和故障转移操作期间、目标命名空间中的标签和标注会与源命名空间中的标签和标注相匹配。此时将添加源命名空间中目标命名空间中不存在的标签或标注、并覆盖已存在的任何标签或标注、以便与源命名空间中的值匹配。仅存在于目标命名空间上的标签或标注保持不变。</block>
  <block id="20f40e0b9308901dac07ce8a8efb3350" category="inline-link">OpenShift安全上下文约束文档</block>
  <block id="6c83555d4261acb08ebbc5f24823dc7b" category="paragraph">在执行还原或故障转移操作之前、您可以通过设置Kubornetes环境变量来防止目标命名空间中的特定标注被覆盖<block ref="1580ff61f204e9d56cd5324c7e9221ba" prefix=" " category="inline-code"></block>。例如：</block>
  <block id="11a75e55f9a91a12e7d31886a76ff312" category="paragraph">如果您使用带有标志的Helm安装源应用程序，则会对标签键进行<block ref="cc1f5c1d16e33b8463c9ee27295cd5df" prefix=" " category="inline-code"></block>特殊处理<block ref="b068931cc450442b63f5b3d276ea4297" prefix=" " category="inline-code"></block>。在还原或故障转移过程中、Trident Protect会将此标签复制到目标命名空间、但如果源命名空间中的值与源命名空间匹配、则会将此值更新为目标命名空间值。如果此值与源命名空间不匹配、则会将其复制到目标命名空间、而不会发生任何更改。</block>
  <block id="1280c48f074ec68fd2281266662c9a3f" category="paragraph">以下示例显示了一个源和目标命名空间、每个命名空间都具有不同的标注和标签。您可以查看目标命名空间在操作前后的状态、以及标注和标签在目标命名空间中的组合或覆盖方式。</block>
  <block id="2cfe257f724ed59a07ab01918c828fb5" category="section-title">在执行还原或故障转移操作之前</block>
  <block id="c972cd959174c84d137520d91c011446" category="paragraph">下表说明了执行还原或故障转移操作之前示例源和目标名称卷的状态：</block>
  <block id="b3ba0fe968ce39dcfc6fe8cc0f1b02da" category="cell">命名空间</block>
  <block id="933e469cb306a0ea9faabd3e4235d3be" category="cell">标注</block>
  <block id="86a2c974d76e381c7efd2206939722b7" category="cell">命名空间ns-1 (源)</block>
  <block id="278dbe8403d8ebf0d4ec8f723ca24aa6" category="list-text">标注.One/键："updatedvalue"</block>
  <block id="7217e7166d38adddcd72b9b1c9359148" category="list-text">标注。双/键："TRUE"</block>
  <block id="a03c56a353af6ece3297a5fcad5250f2" category="list-text">环境=生产</block>
  <block id="d1642f369aa9d43205cf91975f1359d4" category="list-text">合规性=HIPAA</block>
  <block id="fc10b995e3d1c13cbae652922eba0bb6" category="list-text">name=ns-1</block>
  <block id="58e6b4eeb688a71c985d2593769d2fda" category="cell">命名空间ns-2 (目标)</block>
  <block id="f0e6f2ec2d0d1aa7012e3b32889c034c" category="list-text">标注.One/键："TRUE"</block>
  <block id="1e678090acf06eb2bf74c38dee9d3317" category="list-text">标注三个/项："false"</block>
  <block id="ebbaf450aa5330e33917a8de9157e099" category="list-text">Role=database</block>
  <block id="46c40b68ab6fcc817f5134602b1985e3" category="section-title">还原操作之后</block>
  <block id="15d6567aa33ad00e352de9164a741b8b" category="paragraph">下表显示了还原或故障转移操作后示例目标命名空间的状态。已添加某些密钥、某些密钥已被覆盖、并且<block ref="b068931cc450442b63f5b3d276ea4297" prefix=" " category="inline-code"></block>标签已更新以与目标命名空间匹配：</block>
  <block id="a8306d4d1af4239dba9a6bcfd799eba7" category="list-text">name=nS-2</block>
  <block id="da1046077b664fa54e4894632960137d" category="paragraph">您可以通过使用自动保护策略或临时创建快照和备份来保护Trident Protect管理的所有应用程序。</block>
  <block id="e27f117e119beccd01579e6a8d0151fb" category="inline-link-macro">详细了解如何使用Trident Protect配置文件系统冻结</block>
  <block id="9efebf2c277b6c382e759b6b916fd0dd" category="admonition">您可以将Trident Protect配置为在数据保护操作期间冻结和取消冻结文件系统。<block ref="d0a15703ee89b8fa8b780fb2dbace2bd" category="inline-link-macro-rx"></block>(英文)</block>
  <block id="ac84b7596169ab3fb6c24e8a5c85c234" category="section-title">使用KubeVirt VM保护数据</block>
  <block id="c14dcfe7b0231c7a77642ffab50a55eb" category="summary">您可以将Trident Protect升级到最新版本、以利用新功能或错误修复。</block>
  <block id="91d6fa36b819133d3be4dc9c8bf2cf22" category="doc">升级Trident Protect</block>
  <block id="9a4ef497aa1e88e71b08a41b069a9cf4" category="paragraph">要升级Trident Protect、请执行以下步骤。</block>
  <block id="08583ac87350c1205f57ca5d8c629482" category="list-text">更新Trident Helm存储库：</block>
  <block id="0f5b1b3a9bfb872579b78d2db623d3d8" category="list-text">升级Trident Protect CRD：</block>
  <block id="a16ec228f0e3336de76f224b11d860d9" category="list-text">升级Trident Protect：</block>
  <block id="08810911e9a818361e28207072354bd4" category="list-text">如果适用、会发生文件系统冻结。<block ref="d0a15703ee89b8fa8b780fb2dbace2bd" category="inline-link-macro-rx"></block>(英文)</block>
  <block id="caf47630bbafdc416f6b6ecdb585e83e" category="list-text">如果适用、冻结的文件系统将被解除冻结。</block>
  <block id="1eb6c79d30a4cb086ad406cb25fec350" category="list-text">*resourceFilter.resourceMatcher*：resourceMatcher对象数组。如果在此数组中定义多个元素，它们将作为OR操作进行匹配，每个元素(组、种类、版本)中的字段将作为AND操作进行匹配。</block>
  <block id="effa92215c770083617150adc291c130" category="list-text">展开*可选配置设置*并根据需要进行修改。</block>
  <block id="fd8585ec0c8ba7001713251f9ab9c69e" category="paragraph">要将应用程序克隆到其他集群(执行跨集群克隆)、请在源集群上创建备份、然后将备份还原到其他集群。确保目标集群上已安装Trident Protect。</block>
  <block id="a1f41e52e9ddbd9f87ecd032c237b1c0" category="inline-link-macro">SnapMirror 复制</block>
  <block id="f6acb98f21e25882aaaa267339abcc92" category="admonition">您可以使用在不同集群之间复制应用程序<block ref="69314cba6d14bf88b8e850c978056766" category="inline-link-macro-rx"></block>。</block>
  <block id="fe961357dbe4b6bf8b5503f4919ea35c" category="list-text">确保已在目标集群上为包含备份的对象存储分段配置AppVault CR。</block>
  <block id="baafbccab17d07f9ba18e7becb7c76d2" category="inline-link-macro">从备份还原数据</block>
  <block id="878bbf0662ed19ef900e4e06bfad92d2" category="list-text">在目标集群上，<block ref="11860f9f3ec51316f8ebc9805806b6cd" category="inline-link-macro-rx"></block>。</block>
  <block id="4a0207b6a74b63dcaaa4d58fe75ec431" category="list-text">*resourceFilter.resourceSourcedionCritera*：(筛选时需要)使用<block ref="f4d72a64acd8929c0cc9ed96a7a336cc" prefix=" " category="inline-code"></block>或包含或<block ref="843f2812f595e7ec7c5036e89fde02d6" prefix=" " category="inline-code"></block>排除资源匹配备程序中定义的资源。添加以下resourceMatchers参数以定义要包括或排除的资源：</block>
  <block id="5e77ee724e7a9c6f34c1fd6a65b3f3b5" category="list-text">*spec.storageClassName*：(_required_)选择集群上有效存储类的名称。存储类必须链接到与源环境建立对等关系的ONTAP Storage VM。</block>
  <block id="b22804421b3e5bca94f2a9979721eb60" category="cell">具有角色的Google Cloud服务帐户的API密钥<block ref="e50dbf86780cfad5e007e4a95a6aa71e" prefix=" " category="inline-code"></block> 。它包括 Google Cloud 服务帐户专用密钥文件的 JSON 格式的内容（逐字复制到后端配置文件）。<block ref="c9ff119073ea2567730fb42e3a4fe805" prefix=" " category="inline-code"></block>必须包括以下键的键值对：<block ref="599dcce2998a6b40b1e38e8c6006cb0a" prefix=" " category="inline-code"></block>、<block ref="b098ad43c65e68f3d8ce27a3c7e6f6e2" prefix=" " category="inline-code"></block>、<block ref="a4a9fd77bfb3720e66b510bef7ffe71a" prefix=" " category="inline-code"></block>、、<block ref="2bfe9d72a4aae8f06a31025b7536be80" prefix=" " category="inline-code"></block><block ref="478cc0e49bfbb9ded4ffc7ea662d3968" prefix=" " category="inline-code"></block><block ref="98b215082431c21156af94f3aa69f838" prefix=" " category="inline-code"></block><block ref="8201fe8e688f4f948a62370fd1b411d4" prefix=" " category="inline-code"></block>和<block ref="61426bc7fdd11e59a5c98e7ee37e3dbb" prefix=" " category="inline-code"></block>。</block>
  <block id="d0e48e9528072c6ff90b82adeab94dea" category="list-text">具有NetApp卷管理员角色的Google Cloud服务帐户 <block ref="04bf1a6a0250bc9d4cba09ee34106dfc" prefix="(" category="inline-code"></block>。请参阅 <block ref="4f506c30a158c85db714d53536a12770" category="inline-link-macro-rx"></block>。</block>
  <block id="a13eeeef5ff2b7fe85692890fb5d28b3" category="open-title">Amazon S3 (AWS)</block>
  <block id="b2aa71ee04e531f0b6d1f084ba45f52f" category="open-title">通用 S3</block>
  <block id="1716834171e243de0f898a67621b6624" category="open-title">ONTAP S3</block>
  <block id="79832d443dadeb6d3b0637941d6ac067" category="open-title">StorageGRID S3</block>
  <block id="6b4d16571162a69eb03c99cb132a69ec" category="section-title">AppVault CR示例</block>
  <block id="d05c8b60cfd355fccac41017c33ca892" category="paragraph">您可以使用以下CR示例为每个云提供程序创建AppVault对象。</block>
  <block id="59264d37bdf7f6cbf4f94ad00dacdce1" category="section-title">使用Trident Protect命令行界面创建AppVault的示例</block>
  <block id="4db09810b323e73b4041a65c99bb14f8" category="paragraph">您可以使用以下命令行界面命令示例为每个提供程序创建AppVault CRS。</block>
  <block id="c8dac6733f0c00d0b3b8b239841a0255" category="list-text">创建一个名为的文件<block ref="5744e710490761bdd5b4603b9b0487a7" prefix=" " category="inline-code"></block>。确保它包含以下Trident保护设置：</block>
  <block id="d9802724acbde7ce7749f0884262496a" category="section-title">指定Trident Protect容器资源限制</block>
  <block id="723ff7c28b60307db94ddb35dd6cc517" category="paragraph">安装Trident Protect后、您可以使用配置文件为Trident Protect容器指定资源限制。通过设置资源限制、您可以控制Trident Protect操作占用的集群资源量。</block>
  <block id="45d7099b61647936da59ccfbaa49ca5c" category="list-text">创建一个名为的文件<block ref="e66ad8c89b28dc43a24e6e1689a79cdc" prefix=" " category="inline-code"></block>。</block>
  <block id="9f83417f7d6c999c56b0dcc3b274be23" category="list-text">根据您的环境需求、使用Trident Protect容器的资源限制选项填充文件。</block>
  <block id="956fe3fe2ad4f9cb1b569d66b4ff1db5" category="list-text">应用文件中的值<block ref="e66ad8c89b28dc43a24e6e1689a79cdc" prefix=" " category="inline-code"></block>：</block>
  <block id="a4af4e386bb379977acdb5a465780149" category="open-title">使用Trident Protect命令行界面删除AppVault</block>
  <block id="7bbf9a1a0bbcbeb6a4fef133c3975079" category="paragraph">下次shell登录时、您可以使用带有trdentcd-protect插件的命令自动完成。</block>
  <block id="0708d6413707329d6051a0456f0810ac" category="admonition">您可以使用<block ref="deb04333ae980bc0147681e476e1941c" prefix=" " category="inline-code"></block>查看此命令的详细帮助信息。</block>
  <block id="b0e7049d5aeb967991b6b3a21db08de3" category="paragraph">使用BackupRestore CR将备份还原到其他命名空间时、Trident Protect会将应用程序还原到新命名空间中、并为还原的应用程序创建应用程序CR。要保护已还原的应用程序、请创建按需备份或快照、或者制定保护计划。</block>
  <block id="4b405223d9feceac91c5ef8df77b1961" category="paragraph">您可以使用自定义资源(CR)文件从快照将数据还原到其他命名空间或原始源命名空间。使用SnapshotRestore CR将快照还原到其他命名空间时、Trident Protect会将应用程序还原到新命名空间中、并为还原的应用程序创建应用程序CR。要保护已还原的应用程序、请创建按需备份或快照、或者制定保护计划。</block>
  <block id="375efef64643c8aa6bb8e0ba2159a82a" category="list-text">为插件二进制文件启用执行权限：</block>
  <block id="eefd51253afc93c1ad54658882a65dec" category="list-text">您也可以将插件二进制文件复制到主目录中的某个位置。在这种情况下、建议确保此位置属于您的路径变量：</block>
  <block id="75b0e724fe59ed9d6eda0fcd4679bfee" category="admonition">通过将插件复制到路径变量中的某个位置、您可以通过在任意位置键入或<block ref="e89ec374c6edc886ea12d28524834e68" prefix=" " category="inline-code"></block>来使用此插件<block ref="d4845d5856667a10aee97f3404a35627" prefix=" " category="inline-code"></block>。</block>
  <block id="dc5b2d9ecd49d3e5ee37059e2d80512f" category="section-title">Trident Protect Kubbernetes集群兼容性</block>
  <block id="9ac0dd27d420b7b48ca72e463ae95e18" category="inline-link">这些说明</block>
  <block id="664d28801abc192d5c7dfd7bfa758e98" category="admonition">确保为安装Trident Protect的集群配置了正在运行的快照控制器以及相关的CRD。要安装快照控制器，请参见<block ref="5d66944a2971d1b9b5f332812a6e737b" category="inline-link-rx"></block>。</block>
  <block id="9560d298aea880d389acf56a45410c4b" category="summary">您可以配置加密以保护Trident与存储后端之间的流量。</block>
  <block id="c994f1e00d22f7d8d4e7b3e7f50f8002" category="doc">Kerberos传输中加密</block>
  <block id="c8ea4672c0efc6fee26c8648f609a829" category="paragraph">通过使用Kerberos传输中加密、您可以对受管集群和存储后端之间的流量启用加密、从而提高数据访问安全性。</block>
  <block id="420bac2406e93da0c7c791aca209017d" category="paragraph">Trident支持将ONTAP用作存储后端的Kerberos加密：</block>
  <block id="796f801ad41f96aeb2e1a1950ed629e4" category="list-text">*内部部署Kubernet*—Trident支持通过从ONTAP OpenShift和上游Kubernetes集群到内部部署ONTAP卷的NFS3和NFSv4连接进行Kerberos加密。</block>
  <block id="0a710c309a5f6dc65b056833a5208521" category="paragraph">您可以创建、删除、调整大小、创建快照、克隆、 只读克隆、并导入使用NFS加密的卷。</block>
  <block id="2aff02c8ceb99a9445937af9d4d8f286" category="section-title">使用内部ONTAP卷配置传输中的Kerberos加密</block>
  <block id="330282591e8caa9814eb88ec524b89cf" category="paragraph">您可以对受管集群与内部ONTAP存储后端之间的存储流量启用Kerberos加密。</block>
  <block id="daf34fb0fcb74d9bcf85abcebcc8e1f2" category="admonition">只有使用存储驱动程序、才支持对使用内部ONTAP存储后端的NFS流量进行Kerberos加密<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>。</block>
  <block id="0ff02d27ae5cac1a12c6c403fd55443c" category="list-text">确保您可以访问该<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 实用程序。</block>
  <block id="bef890ed7cc869346d4b483cd3e3ab00" category="list-text">确保您对ONTAP存储后端具有管理员访问权限。</block>
  <block id="160b05c1b85ce34d702a3568614baec1" category="list-text">确保您知道要从ONTAP存储后端共享的一个或多个卷的名称。</block>
  <block id="9fe985de654739fa6f48edb0d49059b4" category="inline-link">《NetApp NFSv4增强功能和最佳实践指南》</block>
  <block id="9c6a0d551d50340cca48e6cfa4355566" category="list-text">确保已正确配置使用Kerberos加密的任何NFSv4卷。请参阅的“NetApp NFSv4域配置”一节(第13页)<block ref="fcbfe3012009d21ef9ba8407142f85b6" category="inline-link-rx"></block>。</block>
  <block id="7c67bfc9153da2055f6d09209f9853c7" category="section-title">添加或修改ONTAP导出策略</block>
  <block id="3afa4a2a4546fcf1b9a361d1bff9763b" category="paragraph">您需要向现有ONTAP导出策略添加规则、或者创建新的导出策略、以便对ONTAP Storage VM根卷以及与上游Kubornetes集群共享的任何ONTAP卷支持Kerberos加密。您添加的导出策略规则或创建的新导出策略需要支持以下访问协议和访问权限：</block>
  <block id="e21233a7f0d7fedb5883aea1dfed27cf" category="paragraph-title">访问协议</block>
  <block id="e10f51f4d0eb1b58929237c03db4b832" category="paragraph">使用NFS、NFSv3和NFSv4访问协议配置导出策略。</block>
  <block id="baedff73fdfff23f65e8b80727cd3088" category="paragraph-title">访问详细信息</block>
  <block id="892969be437eb53b05f372cc0ae74d6c" category="paragraph">您可以根据卷的需求配置以下三种不同版本的Kerberos加密之一：</block>
  <block id="fda32d078836aa6e69a3497be5f9cdca" category="list-text">*Kerberos 5*-(身份验证和加密)</block>
  <block id="7d55fc39e32469f330297f866ec40e41" category="list-text">*Kerberos 5i*-(身份验证和加密与身份保护)</block>
  <block id="ec7a355c2dad88f01ddce6c662ff507f" category="list-text">*Kerberos 5p*-(身份验证和加密、具有身份和隐私保护功能)</block>
  <block id="43c969c43b32e3dd3bcf607fcbe4eb43" category="paragraph">使用适当的访问权限配置ONTAP导出策略规则。例如、如果集群要挂载混合使用Kerberos 5i和Kerberos 5p加密的NFS卷、请使用以下访问设置：</block>
  <block id="0370275db54735bcb50d5bfce36de4e6" category="cell">只读访问</block>
  <block id="dbdb2754b99a3cb725e62ef04c72ee06" category="cell">读/写访问</block>
  <block id="a3a9521b6675631e988004e7b8ffe7b4" category="cell">超级用户访问</block>
  <block id="15395d0642f86c5992abbca5e56e2b29" category="cell">UNIX</block>
  <block id="00d23a76e43b46dae9ec7aa9dcbebb32" category="cell">已启用</block>
  <block id="f22873ba6efee4accc10bd5a3d3ca9eb" category="cell">Kerberos 5i</block>
  <block id="a98fd9001be872cb9763c171625ee881" category="cell">Kerberos 5p</block>
  <block id="9a83b6e7170a551799b737b273fde5e1" category="paragraph">有关如何创建ONTAP导出策略和导出策略规则、请参见以下文档：</block>
  <block id="bb53c6c29f127a298da7dd86bf00bb89" category="inline-link">创建导出策略</block>
  <block id="2065c7b470f4d228b592158785fc8c0b" category="list-text"><block ref="2065c7b470f4d228b592158785fc8c0b" category="inline-link-rx"></block></block>
  <block id="8c47b652d31bca921bb367b0e3c5ec6d" category="inline-link">向导出策略添加规则</block>
  <block id="249db3ace916cc1363d388978a8b6c5e" category="list-text"><block ref="249db3ace916cc1363d388978a8b6c5e" category="inline-link-rx"></block></block>
  <block id="c21c2b66c343dfe9db6298e59c2cc767" category="section-title">创建存储后端</block>
  <block id="449396632614b1e0731c51704890f8bd" category="paragraph">您可以创建包含Kerberos加密功能的Trident存储后端配置。</block>
  <block id="0848c0a5d21711a3f8967a344553c492" category="paragraph">在创建用于配置Kerberos加密的存储后端配置文件时、您可以使用参数指定以下三种不同版本的Kerberos加密之一<block ref="21f59c061af833af5de20556ce76052d" prefix=" " category="inline-code"></block> ：</block>
  <block id="619885da64e4ba4b0df04a00d78079b7" category="list-text"><block ref="47587c842cb0a2574a5a4c7c644b006d" prefix="" category="inline-code"></block> (身份验证和加密)</block>
  <block id="aa734ef649b1255faccfc198980bf49a" category="list-text"><block ref="600550ee922e257041b75142ddab2319" prefix="" category="inline-code"></block> (身份验证和加密以及身份保护)</block>
  <block id="4197df0e0ac8f9480069ee1e0dc22543" category="list-text"><block ref="b148e7f5a01830ae530070588af5e9e6" prefix="" category="inline-code"></block> (身份验证和加密以及身份和隐私保护)</block>
  <block id="c99e9f5ade1b20705438ad6882d112c2" category="paragraph">请仅指定一个Kerberos级别。如果在参数列表中指定多个Kerberos加密级别、则仅会使用第一个选项。</block>
  <block id="926a7d5402fb3ed0da8fcd630e3a8f8c" category="list-text">在受管集群上、使用以下示例创建存储后端配置文件。将括号&lt;&gt;中的值替换为您环境中的信息：</block>
  <block id="2cd636101227e18554e5c5351bf5bbe3" category="list-text">使用您在上一步中创建的配置文件创建后端：</block>
  <block id="3204b0a88f0c8e6cb89ef2653173ddf1" category="paragraph">您可以创建存储类来配置采用Kerberos加密的卷。</block>
  <block id="03111bbdda72125f143e084557265c1c" category="paragraph">创建存储类对象时、可以使用参数指定以下三种不同版本的Kerberos加密之一<block ref="e1d3d66c5926aa7fbc3186da8f9b476b" prefix=" " category="inline-code"></block> ：</block>
  <block id="85eee746a5d30d5149d419a3dfd2fe4e" category="list-text"><block ref="ebd2fabd7ee9d78e670334fba38c5a6b" prefix="" category="inline-code"></block> (身份验证和加密)</block>
  <block id="24dac19871e9929a42267b538a60ebe5" category="list-text"><block ref="82f5845550ca9ab77ce797c16bd7bca1" prefix="" category="inline-code"></block> (身份验证和加密以及身份保护)</block>
  <block id="c36d9d41da2e174bfa8b3338450fb45c" category="list-text"><block ref="7a1dedb8f6c22fd4833b45267ad3b01a" prefix="" category="inline-code"></block> (身份验证和加密以及身份和隐私保护)</block>
  <block id="4a2e7c9ecf75ac18d4daec2783256280" category="paragraph">请仅指定一个Kerberos级别。如果在参数列表中指定多个Kerberos加密级别、则仅会使用第一个选项。如果您在存储后端配置中指定的加密级别与您在存储类对象中指定的加密级别不同、则存储类对象优先。</block>
  <block id="0bae6577bb0c45b6f2d82896713df9f9" category="list-text">使用以下示例创建StorageClass Kubenetes对象：</block>
  <block id="bd9c5e9bd5f130a6fbdbcaeb04656652" category="list-text">创建存储类：</block>
  <block id="2472867b1c2b8a486fe64cfc08afeba5" category="list-text">确保已创建存储类：</block>
  <block id="0a44f30bac4e15e0464a80627bef5882" category="section-title">配置卷</block>
  <block id="37bd6ab74d66efd877ea77c0e69e593c" category="paragraph">创建存储后端和存储类后、您现在可以配置卷。有关说明，请参阅<block ref="70405bfb2744633a336a6c9abdd1df6e" category="inline-link-rx"></block>。</block>
  <block id="fe10ad21eb1ce607c403a8d609d5ab3e" category="section-title">为Azure NetApp Files卷配置传输中的Kerberos加密</block>
  <block id="cd21e25bc313d3805456542eac624499" category="paragraph">您可以对受管集群与单个Azure NetApp Files存储后端或Azure NetApp Files存储后端虚拟池之间的存储流量启用Kerberos加密。</block>
  <block id="04379b5e9a5ec6b970752d2b8d0341c8" category="list-text">确保已在受管Red Hat OpenShift集群上启用Trident。</block>
  <block id="6c32a3d0f1a665987b98dde5a0f96d7d" category="inline-link">Azure NetApp Files 文档</block>
  <block id="aa63a31f222305a4ce10d8c1020ab1fd" category="list-text">请注意要求并按照中的说明，确保已为Kerberos加密准备好Azure NetApp Files存储后端<block ref="54b351b1767d2d50eb8c87e19c20164c" category="inline-link-rx"></block>。</block>
  <block id="4f07c8d51fef64025d4b746305177733" category="paragraph">您可以创建包含Kerberos加密功能的Azure NetApp Files存储后端配置。</block>
  <block id="5c6eaa8dd4c4134f6ad836e97ffdee13" category="paragraph">在创建配置Kerberos加密的存储后端配置文件时、您可以对其进行定义、使其应用于以下两个可能的级别之一：</block>
  <block id="bc0557be41ea94e344d7ece1f311b7d4" category="list-text">使用字段的*存储后端级别*<block ref="6a60a6d9955ef9fce24cf4e86efed7af" prefix=" " category="inline-code"></block></block>
  <block id="e30ee9a2b9976217a5fe28b412fe04d6" category="list-text">使用字段的*虚拟池级别*<block ref="533988f6253fcffab6270c1aafb50970" prefix=" " category="inline-code"></block></block>
  <block id="64864cec765a0e5c421369098904873c" category="paragraph">在虚拟池级别定义配置时、系统会使用存储类中的标签来选择该池。</block>
  <block id="082ccae8192fda90d271d92200b3a7dd" category="paragraph">在任一级别、您都可以指定以下三种不同版本的Kerberos加密之一：</block>
  <block id="853434fc4aabccb1e3341f56ef2a9424" category="list-text"><block ref="9ce0da43b8420d1a89f0d00da04312a2" prefix="" category="inline-code"></block> (身份验证和加密)</block>
  <block id="44ea74e03aa9994870273996b8770ef6" category="list-text"><block ref="6bbaa5deea5e26abf8837d31bd265b6f" prefix="" category="inline-code"></block> (身份验证和加密以及身份保护)</block>
  <block id="e22427c81cd5155061fad66ed3f13f52" category="list-text"><block ref="42b55bed7d0514cd2e2189a3edc9d87b" prefix="" category="inline-code"></block> (身份验证和加密以及身份和隐私保护)</block>
  <block id="c51fc706f0eb21d747d3ff2e2bb6c38b" category="list-text">在受管集群上、根据需要定义存储后端的位置(存储后端级别或虚拟池级别)、使用以下示例之一创建存储后端配置文件。将括号&lt;&gt;中的值替换为您环境中的信息：</block>
  <block id="d51a5db438981d465f8fecc7ecbeb054" category="open-title">存储后端级别示例</block>
  <block id="83aab9b6ffc8c65b79350e009c49e5f4" category="open-title">虚拟池级别示例</block>
  <block id="1738a6ff1f0b418ce16cf74aabdceff1" category="section-title">从快照原位还原卷</block>
  <block id="f29961e077241efec95d259658aa48f1" category="paragraph">Trident可使用(TSR) CR从快照快速原位还原卷<block ref="2aabb3b01d0d54317a9eeef910e001f6" prefix=" " category="inline-code"></block>。此CR用作要务Kubbernetes操作、在操作完成后不会持久保留。</block>
  <block id="0219777660eb822cd45c74808c60e5e6" category="paragraph">Trident支持在<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>、、<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block><block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>、<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block><block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block>、、<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block><block ref="94594b2ccbc8e0d220ad37504461650b" prefix=" " category="inline-code"></block>和<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>驱动程序。</block>
  <block id="e0bc0596a7d966cd8dab3ee0e924c9b5" category="paragraph">您必须具有绑定的PVC和可用的卷快照。</block>
  <block id="d785d18f53979794a4ef9e08d186e3c4" category="list-text">验证PVC状态是否已绑定。</block>
  <block id="d0f2b7254060d8a37c98c1eb4289586d" category="list-text">确认卷快照已准备就绪、可以使用。</block>
  <block id="da6aadede1bc870c9042c660fdf93f25" category="list-text">创建TSR CR。此示例将为PVC和卷快照创建CR<block ref="30520f4f96804df83914260b79f55962" prefix=" " category="inline-code"></block><block ref="06f2874897d3ec8426ec85e0ffda5544" prefix=" " category="inline-code"></block>。</block>
  <block id="68fb76b60d3c1f9302a04ef3eb761c08" category="admonition">TSR CR必须位于PVC和VS所在的命名空间中。</block>
  <block id="0c9991859e53bf37c58a2fd1233eb478" category="list-text">应用CR以从快照还原。此示例将从Snapshot恢复<block ref="30520f4f96804df83914260b79f55962" prefix=" " category="inline-code"></block>。</block>
  <block id="91f853f4fc1dc83a1a2f28c65af59d28" category="list-text">在大多数情况下、如果出现故障、Trident不会自动重试此操作。您需要再次执行此操作。</block>
  <block id="c83b74c2020dd836f5b401ecda0da78c" category="list-text">没有管理员访问权限的Kubbernetes用户可能必须获得管理员授予的权限、才能在其应用程序命名空间中创建TSR CR。</block>
  <block id="cff310c77e35cf2f693ebbb39c78e89f" category="summary">Trident支持在源卷和目标卷之间创建镜像关系、以复制卷以实现灾难恢复。</block>
  <block id="50e2eea9ba53d70147772db1c5d25f79" category="doc">使用SnapMirror复制卷</block>
  <block id="a682d8ef86abcae6c5a1db6186c5f02b" category="list-text">在卷之间创建镜像关系(PVC)</block>
  <block id="31a8f98d3378661a5b8abf15438f0bca" category="list-text">删除卷之间的镜像关系</block>
  <block id="a6349012892be516e5729d501a9649a7" category="list-text">中断镜像关系</block>
  <block id="2597cb6d27f572bb6d7d2fd15f414795" category="list-text">在灾难情况下提升二级卷(故障转移)</block>
  <block id="40f7c55be912a395aed2502927d3fcfa" category="list-text">在集群之间执行应用程序无中断过渡(在计划内故障转移或迁移期间)</block>
  <block id="d193cd9a2432eca22e5cf0d06dcee1e6" category="section-title">复制前提条件</block>
  <block id="55be807bf2be012ff44a04449cc5e8a8" category="paragraph">开始之前、请确保满足以下前提条件：</block>
  <block id="3404cce75db90acf6a9d52860721a139" category="list-title">ONTAP 集群</block>
  <block id="fbcc2a3b7506e5e36eb6f61b69bb75da" category="list-text">*Kubernet*：使用ONTAP作为后端的源和目标Trident集群上必须存在Trident版本22.10或更高版本。</block>
  <block id="5cc8ada79224d850ecd22fd22e550c47" category="list-title">对等</block>
  <block id="02b05cdd8f0a8c426f307085cc1004f7" category="list-text">*集群和SVM*：ONTAP存储后端必须建立对等状态。有关详细信息、请参见<block ref="60333a598df416e49fbceb5a88dce370" category="inline-link-rx"></block> 。</block>
  <block id="792f00dfd96560df18fe1c6b56861893" category="list-text">* Trident和SVM*：对等远程SVM必须可供目标集群上的Trident使用。</block>
  <block id="0c5e1b5bc54261ccadd2a72af1047ded" category="list-title">支持的驱动程序</block>
  <block id="3ce5b83f8896ef0d2e356d3972ec8898" category="section-title">创建镜像PVC</block>
  <block id="427a1ab7f39ee4f2dd7a0b7e35f572da" category="paragraph">按照以下步骤并使用CRD示例在主卷和二级卷之间创建镜像关系。</block>
  <block id="4dc69f665f0d76c17a577a352dd15b25" category="list-text">在主Kubbernetes集群上执行以下步骤：</block>
  <block id="cffc5263be00a76539edeeff72190d54" category="list-text">使用参数创建StorageClass对象<block ref="23041ca302bab724a5a0a4ee923c745d" prefix=" " category="inline-code"></block> 。</block>
  <block id="f1fe26832c26eb686c85bd72da8a62f1" category="list-text">使用先前创建的StorageClass创建PVC。</block>
  <block id="a306778c7affcc4dd2329c7f1e9a6389" category="list-text">使用本地信息创建镜像关系CR。</block>
  <block id="12551ccb4392cf7715384812c34ff7dc" category="paragraph">Trident会提取卷的内部信息以及卷的当前数据保护(DP)状态、然后填充镜像关系的状态字段。</block>
  <block id="7e36329a511f28054ceb0cb2aba7de3a" category="list-text">获取TridentMirorRelationship CR以获取PVC的内部名称和SVM。</block>
  <block id="ce01c03f932076e82348fc5aaefacc7d" category="list-text">在二级Kubbernetes集群上执行以下步骤：</block>
  <block id="dbe7fac150e57be9bc0d8e046792f4c3" category="list-text">使用trident.netapp.io/replication: true参数创建StorageClass。</block>
  <block id="01d68e0f9630c032dc8a33358e46e65b" category="list-text">使用目标和源信息创建镜像关系CR。</block>
  <block id="b4dcd7f617380594be36d544e6823841" category="paragraph">Trident将使用配置的关系策略名称(或ONTAP的默认策略)创建SnapMirror关系并对其进行初始化。</block>
  <block id="4ba5d2a91c95149a7ad924ebd0d9503d" category="list-text">使用先前创建的StorageClass创建一个PVC以用作二级(SnapMirror目标)。</block>
  <block id="14c271d9e62dcf6baaab0fde456f080f" category="paragraph">Trident将检查是否存在TridentMirorRelationship CRD、如果此关系不存在、则无法创建卷。如果存在此关系、Trident将确保将新FlexVol volume放置到与镜像关系中定义的远程SVM建立对等关系的SVM上。</block>
  <block id="e71d1a5cbaac30e63ed507e4b62c705f" category="section-title">卷复制状态</block>
  <block id="d802b3b47bb3c6b52714c9817598fcb8" category="paragraph">三级镜像关系(TCR)是一种CRD、表示PVC之间复制关系的一端。目标T关系 管理器具有一个状态、此状态会告知Trident所需的状态。目标T关系 管理器具有以下状态：</block>
  <block id="546afd3b22376f948ae8d790e441d7da" category="list-text">*已建立*：本地PVC是镜像关系的目标卷、这是一个新关系。</block>
  <block id="724cfb5ec8bac42a80699bb79c4eccb9" category="list-text">*提升*：本地PVC可读写并可挂载、当前未建立任何有效的镜像关系。</block>
  <block id="d323366aa32e60d08a0f93bda543af47" category="list-text">*重新建立*：本地PVC是镜像关系的目标卷、以前也位于该镜像关系中。</block>
  <block id="4c3cd5b62a43e82e03fffa6b238ed918" category="list-text">如果目标卷曾经与源卷建立关系、因为它会覆盖目标卷的内容、则必须使用重新建立的状态。</block>
  <block id="b2e7dc07859cd924ca5706b299986e57" category="list-text">如果卷之前未与源建立关系、则重新建立的状态将失败。</block>
  <block id="93f9c6ccc7d85e709509db31891ae5eb" category="section-title">在计划外故障转移期间提升辅助PVC</block>
  <block id="4a76c8d930ec18b5aedc26b5d8e5246f" category="paragraph">在二级Kubbernetes集群上执行以下步骤：</block>
  <block id="78ac02218b5a9367bdcb4881538477cc" category="list-text">将TridentMirorRelationship的_spec.state_字 段更新到<block ref="1fe57d6202c7cfbb0ee344b1e0a6fb37" prefix=" " category="inline-code"></block>。</block>
  <block id="ffe4cfc202d643b50342b93a4a11a82f" category="section-title">在计划内故障转移期间提升辅助PVC</block>
  <block id="1d60b89a076d7f30b8efdef50e842f68" category="paragraph">在计划内故障转移(迁移)期间、执行以下步骤以提升二级PVC：</block>
  <block id="3310d9a60c164accb7c262ab6e9fbc65" category="list-text">在主Kubbernetes集群上、创建PVC的快照、并等待创建快照。</block>
  <block id="8b17b79902950942165541a8ab704363" category="list-text">在主Kubnetes集群上、创建SnapshotInfo CR以获取内部详细信息。</block>
  <block id="678346d79faaa65b2da52e6d7ddce845" category="list-text">在二级Kubernetes集群上、将_TridentMirorRelationship_ CR的_spec.state_字 段更新为_promoted_和_spec.promotedSnapshotHandle_、以成为快照的内部名称。</block>
  <block id="7b007b14980acd66e9301e02a5670f47" category="list-text">在二级Kubernetes集群上、确认Trident镜像 关系的状态(stats.state字段)为已提升。</block>
  <block id="f69101c0107c4bbf8f0ccc9141beb68b" category="section-title">在故障转移后还原镜像关系</block>
  <block id="9a023cbe1d3be933d8edb6228f9901ce" category="paragraph">在还原镜像关系之前、请选择要用作新主卷的那一端。</block>
  <block id="1c7011adbcc0afa258396aff4f10266b" category="list-text">在二级Kubernetes集群上、确保已更新TundentMirorRelationship上的_spic.netVolumeHandle_字段的值。</block>
  <block id="ffb25f01fda2538ae98bc0c4b4d465a6" category="list-text">在二级Kubernetes集群上，将Trident镜像 关系的_spec.mirector_字段更新到<block ref="036bbe13de7250844b100bc381b59214" prefix=" " category="inline-code"></block>。</block>
  <block id="41a593c0bede63aac2726a18e4599087" category="section-title">其他操作</block>
  <block id="567147b40ff26562a6dfcddbde29e62e" category="paragraph">Trident支持对主卷和二级卷执行以下操作：</block>
  <block id="253093d00b66ff2357df5085c04b2758" category="section-title">将主PVC复制到新的二级PVC</block>
  <block id="301dcece9e67241c29ebbbac8a94274e" category="paragraph">确保您已有一个主PVC和一个次要PVC。</block>
  <block id="7f1c32cba6b98d1db7f3dfda1df76189" category="list-text">从已建立的二级(目标)集群中删除PerbestentVolumeClaim和TridentMirorRelationship CRD。</block>
  <block id="e655fd5342cff178f54ae5f5b2a3b7b6" category="list-text">从主(源)集群中删除TridentMirorRelationship CRD。</block>
  <block id="3eb69a135044d3f308d140dccb1dbe5e" category="list-text">在主(源)集群上为要建立的新二级(目标) PVC创建新的TridentMirorRelationship CRD。</block>
  <block id="92c650dfb6284b5d24ed0e83a2338fa0" category="section-title">调整镜像、主PVC或二级PVC的大小</block>
  <block id="66990a43216d28b5b6818b021d397574" category="paragraph">可以正常调整PVC的大小、如果数据量超过当前大小、ONTAP将自动扩展任何目标flevxvol。</block>
  <block id="4e2626fed5da19a4be8255f16a331609" category="section-title">从PVC中删除复制</block>
  <block id="e1abf7fa65d845d34c33d593ed070453" category="paragraph">要删除复制、请对当前二级卷执行以下操作之一：</block>
  <block id="b3dd2c563dffb09f03c72bc16a72be62" category="list-text">删除次要PVC上的镜像关系。此操作将中断复制关系。</block>
  <block id="413ab8e64d0d4ccb3f08ef2a8653a525" category="list-text">或者、将spec.state字段更新为_promoted_。</block>
  <block id="c00cff9971607d7a0409066a0ecc3bcd" category="section-title">删除PVC (之前已镜像)</block>
  <block id="e52ffc7f9894586bbf7c4260d92073c4" category="paragraph">Trident会检查是否存在复制的PVC、并在尝试删除卷之前释放复制关系。</block>
  <block id="8ec9c60105332c1be8facc42b496e14b" category="section-title">删除TTr</block>
  <block id="a956a14d229badbbde1032651b3586fd" category="paragraph">删除镜像关系一端的T磁 还原会导致剩余的T磁 还原在Trident完成删除之前过渡到_promoted _状态。如果选择删除的TMirror已处于_Promved"状态、则不存在现有镜像关系、此时TMirror将被删除、Trident会将本地PVC提升为_ReadWrite_。此删除操作将释放ONTAP中本地卷的SnapMirror元数据。如果此卷将来要在镜像关系中使用、则在创建新镜像关系时、它必须使用具有_re设立_卷复制状态的新TMirror。</block>
  <block id="d41660149eb8930ad76a1dfe3dc5f2e3" category="section-title">在ONTAP联机时更新镜像关系</block>
  <block id="7079164c5ba86439b0719782591106dd" category="paragraph">建立镜像关系后、可以随时更新这些关系。您可以使用<block ref="abb3a949c6d70e3e5d92f4ad2bf143a3" prefix=" " category="inline-code"></block> 或<block ref="ff0b4e3d4dfe8f6074b6943947345d4d" prefix=" " category="inline-code"></block> 字段更新关系。将目标卷提升为常规ReadWrite卷时、可以使用_promotedSnapshotHandle_指定要将当前卷还原到的特定快照。</block>
  <block id="4eecab048a7c90cfb92e0f04884686e8" category="section-title">在ONTAP脱机时更新镜像关系</block>
  <block id="e782fcb9f3e7e8fa8b5ccdb3169c0e42" category="paragraph">您可以使用CRD执行SnapMirror更新、而无需Trident直接连接到ONTAP集群。请参阅以下TridentAction镜像 更新的示例格式：</block>
  <block id="bc08468157c4a9e3a30eed7ba64cc309" category="paragraph"><block ref="1f9dfae8a369525bce4996df40963532" prefix="" category="inline-code"></block> 反映TridentAction镜像 更新CRD的状态。它可以从_suced_、_in Progress _或_failed中获取值。</block>
  <block id="239be7c008105ac7fd4ca34940e848dd" category="list-text">在GKE集群上配置的工作负载标识以及在节点池上配置的GKE元数据服务器。</block>
  <block id="cf1b0c32b7f8d889140a0a7a048bc29b" category="list-text">具有Google Cloud NetApp卷管理员(角色/GCP .admin)角色或自定义角色的NetApp服务帐户。</block>
  <block id="b70329a4cd0d7e433e8af087eebce89a" category="list-text">已安装Trident、其中包括用于指定"gcp"的云提供程序和用于指定新GCP服务帐户的云标识。下面给出了一个示例。</block>
  <block id="73a8d79444c307e1446b60eb6a9ba8f1" category="paragraph">在配置适用于AWS EKS的Trident加载项之前、请确保满足以下条件：</block>
  <block id="5c48b2cb013af0c5d292d6bc5659074c" category="section-title">使用命令行界面安装/卸载Trident EKS加载项</block>
  <block id="1095f7331744c1accf45762c2da50a60" category="paragraph">Trident简化了Kubelnetes中适用于NetApp ONTAP的Amazon FSx存储管理、使开发人员和管理员能够专注于应用程序部署。</block>
  <block id="aa9c9ff1836c624104eb3a256a7b8b69" category="section-title">通过舵安装Trident</block>
  <block id="b0e9da2f71a439472cddf0553ae43edc" category="section-title">通过EKS插件安装Trident</block>
  <block id="03023c37f6d85929cf0151fe858d3183" category="paragraph">Trident EKS加载项包括最新的安全修补程序和错误修复、并已通过AWS验证、可与Amazon EKS配合使用。通过EKS加载项、您可以始终确保Amazon EKS集群安全稳定、并减少安装、配置和更新加载项所需的工作量。</block>
  <block id="16a9eb0d1ef7d37ab7459bc9a67a8102" category="section-title">启用适用于AWS的Trident加载项</block>
  <block id="1d5144e260d8c4ece3c5d47a77d84c11" category="section-title">更新Trident EKS加载项</block>
  <block id="ccab466451ff5a867710cce1b28c33a0" category="section-title">卸载/删除Trident EKS加载项</block>
  <block id="d1548585dadda37a28905a23e22cf65d" category="section-title">从备份还原到其他集群</block>
  <block id="7fa8874b1f645ca2af9d81b51985b8fb" category="paragraph">如果原始集群出现问题、您可以将备份还原到其他集群。</block>
  <block id="dd4ee610bd1d035c73bc0cbcd80e46da" category="paragraph">确保满足以下前提条件：</block>
  <block id="1d6028c560c8f6dbee841737e60a3d9d" category="list-text">目标集群已安装Trident Protect。</block>
  <block id="b20f8883edb9068c67a2faeb3c083d38" category="list-text">目标集群可以访问与存储备份的源集群相同的AppVault的分段路径。</block>
  <block id="0425d0358a4cba7a7cce5ddd727ab6a2" category="list-text">使用Trident Protect命令行界面插件检查目标集群上AppVault CR的可用性：</block>
  <block id="1ff83a5266e9e025c2984e0c10dea90e" category="admonition">确保目标集群上存在用于应用程序还原的命名空间。</block>
  <block id="8d433ae9a21c49e9e5433ebd408605c0" category="list-text">从目标集群查看可用AppVault的备份内容：</block>
  <block id="378e6f0ba7080535a4462b5311befb40" category="paragraph">运行此命令可显示AppVault中的可用备份、包括其原始集群、相应的应用程序名称、时间戳和归档路径。</block>
  <block id="053aba80de03f3fdf626d1c858342330" category="list-text">使用AppVault名称和归档路径将应用程序还原到目标集群：</block>
  <block id="fceebbe32c1f7b24c54d6a4e8a0fa776" category="admonition">如果BackupRestore CR不可用、您可以使用步骤2中提到的命令查看备份内容。</block>
  <block id="4ef55c1fec2de9218af40d16cbc021a4" category="list-text">使用以下命令还原应用程序、将括号中的值替换为环境中的信息。命名空间映射参数使用冒号分隔的命名空间将源命名空间映射到正确的目标命名空间、格式为SOURCE1：dest1、Source2：dest2。例如：</block>
  <block id="41ee1e1e674f49a8e3c78fc5517b1b83" category="inline-link">Trident 24.10</block>
  <block id="330905133ec61fb32dbdb0593cf466a2" category="list-text"><block ref="330905133ec61fb32dbdb0593cf466a2" category="inline-link-rx"></block></block>
  <block id="14151311f8b442ecc7db1533868dccd9" category="paragraph">尽管不建议这样做、但您可以对两个Trident实例使用相同的后端SVM。在安装期间为每个实例指定一个唯一的卷名称和/或在文件中指定一个唯一的<block ref="641b2675465e765661450709e2351a8e" prefix=" " category="inline-code"></block>参数<block ref="57a3822fdb39e72cdc47d89fd04ce467" prefix=" " category="inline-code"></block>。这是为了确保不会对这两个实例使用相同的FlexVol volume。</block>
  <block id="c45e7f5f358ba554413458272da37266" category="paragraph">该驱动程序可<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>在同一个FlexVol volume中创建多达200个qtrees (可在50到300之间配置)、每个集群节点创建100、000个qtrees、每个集群创建240万个qtrees。当您输入由经济型驱动程序提供服务的新<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>时、驱动程序将查看是否已存在可为新qtree提供服务的FlexVol volume。如果不存在可为qtree提供服务的FlexVol volume、则会创建一个新的FlexVol volume。</block>
  <block id="53f6fbaa0c2bc4ebb4fc98f8a0337c54" category="paragraph">此功能也适用于<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>驱动程序、但适用于FlexVol volume级别粒度、而不适用于qtree级别粒度。要为Trident配置的卷创建快照、请将backend参数选项设置为ONTAP后端<block ref="0a236e7685e50a59df980d0a30929d6c" prefix=" " category="inline-code"></block>上定义的所需快照策略。Trident无法识别存储控制器创建的任何快照。</block>
  <block id="68d4b8621bcc2d9eae1a68dc27dfa485" category="inline-link-macro">25.02</block>
  <block id="eaaf7bd308bf6f27888c8d18ba11417d" category="cell">2028年2月</block>
  <block id="5956c33dbd8c8ed6e363f54092a9d544" category="paragraph"><block ref="5956c33dbd8c8ed6e363f54092a9d544" category="inline-link-macro-rx"></block></block>
  <block id="29a2e5ba987103c3a239ad6ec13b96a2" category="list-text">对于<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>、、<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block><block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block>和<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block>驱动程序，每个永久性卷(PV)都会映射到FlexVol volume，因此，会将卷快照创建为NetApp快照。与竞争对手的快照技术相比、NetApp快照技术可提供更高的稳定性、可扩展性、可恢复性和性能。无论是在创建 Snapshot 副本所需的时间还是在存储空间中，这些 Snapshot 副本都极为高效。</block>
  <block id="9574cb59de58a7e6882179620abd42fd" category="list-text">对于<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>驱动程序、PVs映射到在共享FlexVol卷上创建的LUN PVs的Snapshot可通过对关联LUN执行FlexClone来实现。借助ONTAP FlexClone技术、即使是最大的数据集、也可以近乎瞬时地创建副本。副本与其父级共享数据块，除了元数据所需的存储之外，不会占用任何存储。</block>
  <block id="20215ca4c00abcf8fb731d0f856d0e91" category="section-title">FC工具</block>
  <block id="fb2a1518f6d194cef3caaff16d0f8ee4" category="admonition">不要对元素后端使用<block ref="ed66bef2b107983b6e4066fddf8c45c3" prefix=" " category="inline-code"></block>(包括默认值)。默认情况下，<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>驱动程序将忽略此设置，而不使用前缀。NetApp建议对Docker卷映射使用特定的租户ID、或者在可能已使用任何名称创建的情况下使用由Docker版本、驱动程序信息和原始名称填充的属性数据。</block>
  <block id="ede78805a80cf9b2284aa458924e07b2" category="paragraph">*SAN ONTAP驱动程序*:不指定用于iSCSI或FC。Trident使用<block ref="2de2f329c45219df280af5a70ed7a17c" category="inline-link-macro-rx"></block>发现建立多路径会话所需的iSCSI或FC LUN。如果明确定义、则会生成警告<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>。</block>
  <block id="c024b0a80a0f117a251e956f7b09ac4e" category="cell">*仅支持<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>驱动程序。*用于为iSCSI、<block ref="eac89e2640666fd1076a776e4b748fae" prefix=" " category="inline-code"></block>NVMe/TCP或基于光纤通道的<block ref="0f64d0456878c73cbec1ccea842a6f14" prefix=" " category="inline-code"></block>SCSI (FC)选择<block ref="39eea648dab96b0ee6022dabb38bc420" prefix=" " category="inline-code"></block>。</block>
  <block id="36212bd37512e583deabaefb464f77f9" category="paragraph">要使用的分层策略，默认为<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block>。</block>
  <block id="b52d90bca507da030b84d478b8b8f150" category="paragraph"><block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>和<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>驱动程序会为每个Docker卷创建一个ONTAP FlexVol。ONTAP支持每个集群节点多达1000个FlexVol、集群最多12、000个FlexVol卷如果您的Docker卷要求符合此限制、则该驱动程序是首选NAS解决方案、因为它<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>具有FlexVol提供的其他功能、例如Docker卷粒度快照和克隆。</block>
  <block id="35bf5cbb6338abecc1fe5e2fddecc6fa" category="example-title">&lt;code&gt; ONTAP－&lt;/code&gt;驱动程序的基于FC的SCSI示例</block>
  <block id="58c4d5bb52050e96221a67cebc52a666" category="paragraph">NFS、iSCSI和FC的卷创建选项包括以下内容：</block>
  <block id="72291962244c35e29a2e95cd6bd139bf" category="list-text">使用Snapshot策略创建卷、并接受ONTAP的默认Snapshot预留(通常为5%)：</block>
  <block id="5e62a96ba0adfc3472a925ff92c33174" category="paragraph">NetApp Trident支持在公有云或内部环境中的所有常见NetApp存储平台上使用和管理存储资源、包括内部ONTAP集群(AFF、FAS和ASA)、ONTAP Select、Cloud Volumes ONTAP、Element软件(NetApp HCI、SolidFire)、Azure NetApp Files、Amazon FSx for NetApp ONTAP以及Google Cloud上的Cloud Volumes Service。</block>
  <block id="90de0fd1d09f4fc27d99667555a8a12f" category="paragraph">ONTAP系统具有全闪存、混合或纯HDD配置、并提供许多不同的部署模式：内部FAS、AFA和ASA集群、ONTAP Select和Cloud Volumes ONTAP。Trident支持这些ONTAP部署模式。</block>
  <block id="bde4e01f8df98626e0dc1c36a8e06a5a" category="admonition">在将安装了Trident的Kubernetes集群从1.25升级到1.26或更高版本之前，请参见<block ref="1b428bb9b9fe27db6cd8932526864634" category="inline-link-macro-rx"></block>。</block>
  <block id="8f323a9e5c0c5162cc6e0d48e0cb1850" category="paragraph-title">支持的存储驱动程序：</block>
  <block id="8321592ce24c8a122ecf26a63cfca407" category="list-text">ontap-NAS</block>
  <block id="caafdf62a2c609bfa5316118231a1007" category="list-text">ONTAP—NAS—经济型</block>
  <block id="188c0d870c5f930d042bdaa1f1fc3573" category="list-text">NVMe-SAN (iSCSI、FCP、基于的ONTAP)</block>
  <block id="1bbe28a8ef9b1c85d07b013af0628d36" category="list-text">ONTAP—SAN经济型(仅限iSCSI)</block>
  <block id="db526afc657fdfec1ca176eb9d281f89" category="list-title">注意事项：</block>
  <block id="f97169869bcbff98d85a1b7ec1d7b5f8" category="list-text">对于需要rwx访问模式的实时迁移工作流、支持以下组合：</block>
  <block id="d3701dd5a7c831a74d496a90c3a65f13" category="list-text">NFS +<block ref="7f5db5e0500761cacd6f89838e2ebdc5" prefix=" " category="inline-code"></block></block>
  <block id="42c7d371004c0674ae717618c4a08508" category="list-text">iSCSI +<block ref="1467a571dd94848f616edc4a0c33b927" prefix=" " category="inline-code"></block>(原始设备)</block>
  <block id="e031968b595722f16da97146c3a92c69" category="list-text">NVMe/TCP +<block ref="1467a571dd94848f616edc4a0c33b927" prefix=" " category="inline-code"></block>(原始设备)</block>
  <block id="381edc20137f75d1e418981c1361fd2c" category="list-text">FC +<block ref="1467a571dd94848f616edc4a0c33b927" prefix=" " category="inline-code"></block>(原始设备)</block>
  <block id="b55333d21cb50b1d1d34c529c999482f" category="list-text">注册表.k8s.io/sig-storage/CsI-置 配置程序：v5.2.0</block>
  <block id="7e8b00e8f801232796015a8859867e55" category="list-text">注册表.k8s.io/sig-storage/CsI-N节点 驱动程序注册器：v2.13.0</block>
  <block id="0915385df687d0c4a0afb57a61f02af3" category="cell"><block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix="" category="inline-code"></block><block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>仅限、、<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>和<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>。可与Kubnetes非正常节点关闭(NGN)结合使用、使集群管理员能够在节点运行状况不正常时将已挂载卷的工作负载安全地迁移到新节点。</block>
  <block id="abef2fa5ff95ef0fcfa0688ea6bcb3a9" category="cell"><block ref="c257f92937b246af1d65825bab674c3b" prefix="" category="inline-code"></block></block>
  <block id="abd94f25c6f83f31232f41e2c03a17c1" category="cell">启用自动后端配置、从而根据输入参数无缝创建后端和存储类。</block>
  <block id="584255a02e82c085a6eee64514bf791a" category="paragraph">强制分离仅适用于<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>、、<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>和<block ref="bc63092df841150cda2e4fd2992a38d1" prefix=" " category="inline-code"></block>。<block ref="c9cdb62835ea4d8965a6e946dc9826f0" prefix=" " category="inline-code"></block>在启用强制断开之前、必须在Kubbernetes集群上启用非正常节点关闭(NGN)。默认情况下、对于Kubbernetes 1.28及更高版本、NGN处于启用状态。有关详细信息，请参阅 <block ref="a0c86c823d7e699cfc277c93de351a2d" category="inline-link-macro-rx"></block>。</block>
  <block id="97949d2167cfb02925ebeb5fbc18e41c" category="admonition">使用或驱动程序时<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>、您需要将后端配置中的参数设置<block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix=" " category="inline-code"></block>为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>、以便Trident可以限制通过受管导出策略应用了此内容的Kubornetes<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>节点的访问。</block>
  <block id="6e8d58237141258ce4818d1462b0a37a" category="cell"><block ref="4c65cbb4d2559a68fba50cf196427b85" prefix="" category="inline-code"></block></block>
  <block id="084302fa0b21538a6a87278579b36fc1" category="paragraph">启用或禁用自动配置Trident后端和Amazon FSx存储类。使用以下参数和<block ref="4c65cbb4d2559a68fba50cf196427b85" prefix=" " category="inline-code"></block>启用自动后端配置：：<block ref="a10311459433adf322f2590a4987c423" prefix=" " category="inline-code"></block>设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>启用自动后端配置。<block ref="aa34e5d130d1fc91b3c5fdc4d2d5d1cb" prefix=" " category="inline-code"></block>:包含将为其创建自动后端配置的文件系统ID列表。-<block ref="280fa711b12d488436b7cdcbfb2543fc" prefix=" " category="inline-code"></block>:设置SVM身份验证的身份验证类型。对于AWS、目前支持基于arn的身份验证("awsarn")。-<block ref="ac590318582c1d8275a50180aba8a35c" prefix=" " category="inline-code"></block>：设置AWS FSx的文件系统ID。示例："fs-0dfeuda884a68b1cab"。-<block ref="66203c461b36a2af573149f0aa6164ff" prefix=" " category="inline-code"></block>-指定支持自动后端配置的协议列表；"NFS"、"iSCSI"或两者。</block>
  <block id="f27e6cf95381139bd9916c64f178d212" category="list-text">对于运行Kubbernetes 1.24的集群，请使用 <block ref="ccef28639b5a7d8b851d32c1ca719ce3" category="inline-link-macro-rx"></block>。</block>
  <block id="b9f6abf28d1518cdaae0ed7e29a5727e" category="list-text">对于运行Kubernetes 1.25或更高版本的集群，请使用 <block ref="d1039b29d019902f70f499d65ede99cb" category="inline-link-macro-rx"></block>。</block>
  <block id="572a8b759ae44dd81571fb9d11e9932b" category="paragraph">NetApp SnapMirror复制可用于以下ONTAP解决方案的Trident Protect：</block>
  <block id="701fc71f0daf0d596d98b3af41d195dd" category="list-text">内部NetApp FAS、AFF和ASA集群</block>
  <block id="405c5315f2ee81c7d907857a97bc9ccc" category="list-text">将备份项目放在FlexVol volume上</block>
  <block id="f4d58905240b9c44d84e6ee73c8499ac" category="admonition">NetApp建议您保护与另一个SVM具有SnapMirror关系的FlexVol所在的SVM。</block>
  <block id="2e465fe2a334bfbbd0254091d76e5cf5" category="cell">注：3[]</block>
  <block id="c2f3f489a00553e7a01d369c103c7251" category="cell">否</block>
  <block id="60fa17e80af13d37b16c3991f5b175a6" category="verse-content-simple">上表的脚注：是脚注：1[]：不受Trident管理是脚注：2[]：受Trident管理、但不受PV粒度注：3[]：不受Trident管理、不受PV粒度是是脚注：4[]：支持原始块卷脚注：5[]：受Trident支持</block>
  <block id="ce8f76b595bb8163817ad21f0d964fe2" category="admonition">Kubernetes树内配置程序目前不支持对NFS、iSCSI或FC PVs执行卷大小调整操作。Trident支持扩展NFS、iSCSI和FC卷。</block>
  <block id="e168cabed41efc63d96f214d5cbe189a" category="paragraph">Trident支持调整NFS、iSCSI和FC PVs的大小。这样，用户就可以直接通过 Kubernetes 层调整其卷的大小。所有主要 NetApp 存储平台均可进行卷扩展，包括 ONTAP ， SolidFire/NetApp HCI 和 Cloud Volumes Service 后端。要允许稍后进行扩展、请在与卷关联的StorageClass中将设置<block ref="6add71a247c8f4513060920be14857bc" prefix=" " category="inline-code"></block>为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>。每当需要调整永久性卷的大小时、都可以将永久性卷声明中的标注编辑<block ref="02b011e6fe36e26e5f7365ba08bf5a48" prefix=" " category="inline-code"></block>为所需的卷大小。Trident会自动调整存储集群上卷的大小。</block>
  <block id="1b5e17f09c6b94c6a943765fe4bf9d6c" category="list-text">出于性能原因、NetApp建议工作节点支持高级加密标准新指令(AES-NI)。要验证AES-NI支持、请运行以下命令：</block>
  <block id="8d102642e270f6e890338a2cfc4a188d" category="paragraph">例如、双节点ONTAP集群最多可托管2000个FlexVol卷。将最大卷数设置为 1250 似乎非常合理。但是、如果仅<block ref="acf6cbef6ee0ef07ee3fe13269233be8" category="inline-link-rx"></block>从一个节点分配给SVM、或者无法配置从一个节点分配的聚合(例如、由于容量原因)、则另一个节点将成为所有Trident配置的卷的目标。这意味着、在达到此值之前、可能会达到该节点的卷限制<block ref="1829fafb02997aa2b4d309a69b7cdbfa" prefix=" " category="inline-code"></block>、从而影响使用该节点的Trident和其他卷操作。* 您可以通过确保将集群中每个节点的聚合分配给 Trident 使用的 SVM 来避免这种情况。 *</block>
  <block id="f3497351aae46692e603fedb2f2cd146" category="inline-link">ONTAP命令参考</block>
  <block id="94ac1e66ef8b79949d7fe240ca1fc49e" category="paragraph">有关QoS策略组的详细信息，请参见<block ref="c7075dcfeceb3e1e55c7a25ddec6d166" category="inline-link-rx"></block>。</block>
  <block id="6146d9e1c8e067801be76f7b7027b42f" category="paragraph">限制对Trident创建的NFS卷、iSCSI LUN和FC LUN的访问是Kubbernetes部署安全防护的一个重要组成部分。这样可以防止不属于 Kubernetes 集群的主机访问卷并可能意外修改数据。</block>
  <block id="fe7898282075be6913421f0b11f5c0e1" category="inline-link">SAN管理</block>
  <block id="cd2793aaeed5e7f0429f516ecf5eb130" category="list-text"><block ref="8a4b824281db82475bec9857f32bde41" category="inline-link-rx"></block>(适用于iSCSI)</block>
  <block id="23db1fababbb1ae99bf5bf19e6f6f47b" category="list-text">NetApp建议克隆空闲卷。</block>
  <block id="3ca0a694ceba360e6f67566a611b37fb" category="paragraph">卷是基本配置单元、由后端端端点(例如NFS共享以及iSCSI和FC LUN)组成。在Kubnetes中，这些直接对应于<block ref="3f91308865b7567ae097573f6d0519e9" prefix=" " category="inline-code"></block>。创建卷时，请确保其具有存储类，此类可确定可配置该卷的位置以及大小。</block>
  <block id="f732fd09d1f97b63aaad6d5a80382f0c" category="list-text">增加了对适用于iSCSI的ONTAP ASA R2的支持。</block>
  <block id="87959ecf0c52ae4baca9f7e962286ec1" category="list-text">增加了对在非正常节点关闭情况下强制断开ONTAP NAS卷的支持。现在、新的ONTAP NAS卷将使用Trident管理的每个卷导出策略。为现有卷提供了一个升级路径、以便在取消发布时过渡到新的导出策略模型、而不会影响活动工作负载。</block>
  <block id="09abe7a508b1461d2b42cd082e9680aa" category="list-text">已添加cloneFronSnapshot标注。</block>
  <block id="9746cecbe2eafd28277700bbaea79ccf" category="list-text">增加了对跨命名空间卷克隆的支持。</block>
  <block id="1cd9d07d7ac9faf3b1d1e464094fed79" category="list-text">增强了iSCSI自我修复扫描修复功能、可按确切的主机、通道、目标和LUN ID启动重新扫描。</block>
  <block id="c2653fd16e9e4da4d4d738616dcb956a" category="list-text">增加了对Kubnetes 1.32的支持。</block>
  <block id="2e110255627afe2fff57458d9bb2205b" category="list-text">*OpenShift*：</block>
  <block id="ddbeca6e89eb34fdc94eeec79b9f6a43" category="list-text">增加了对ROSA集群上的RHCOS自动iSCSI节点准备的支持。</block>
  <block id="e5f47a8bc4c6e320936843808b4b8392" category="list-text">在ONTAP驱动程序上增加了光纤通道支持。</block>
  <block id="00a0b47f2d2eb76897798a0b983daf88" category="list-text">增加了NVMe Ks支持。</block>
  <block id="890fc08a388302375744ade0476c1409" category="list-text">已切换到所有基本映像的暂存映像。</block>
  <block id="d6dc63ac67744b1aac236b69c66dfde2" category="inline-link-macro">问题描述#961</block>
  <block id="35805c702a0d37de58fd020d28318c88" category="list-text">添加了iSCSI连接状态发现和日志记录(iSCSI会话应登录但不应登录)<block ref="0939f851f18acedadb7fdffdec6d140b" category="inline-link-macro-rx"></block>。</block>
  <block id="121a804f61cdaf83f9c80e5b2ecf5658" category="list-text">通过gosle-Cloud NetApp卷驱动程序增加了对SMB卷的支持。</block>
  <block id="92ce3c86905470d0feaa428d8438bf74" category="list-text">增加了对允许ONTAP卷在删除时跳过恢复队列的支持。</block>
  <block id="7b97d5f955a87ceaab8fdc5ee542dd5d" category="list-text">增加了对使用SHA (而不是标记)覆盖默认图像的支持。</block>
  <block id="8064b658df7d1098fbc06c88a182a398" category="list-text">已将image-pull机密标志添加到trdentctrd安装程序中。</block>
  <block id="a6b7ff9774a7997f58d8eeff9907ae1f" category="inline-link-macro">问题描述#965</block>
  <block id="6cb0e6987f921e8d1b11fc9850d89d90" category="list-text">修复了自动导出策略()中缺少的节点IP地址<block ref="54a0e12625c53fbb79b83159edf0dab4" category="inline-link-macro-rx"></block>。</block>
  <block id="2ad835ef65ba9fef1c3b178d86eb59b1" category="list-text">修复了自动导出策略在ONTAP NAS经济环境中过早切换到每个卷策略的问题。</block>
  <block id="a794d83b092a8031769c2bcf2a88ceb5" category="inline-link-macro">问题描述#913</block>
  <block id="cfc9cd0ab1d20f67db270bed8d63126c" category="list-text">修复了后端配置凭据，以支持所有可用的AWS ARN分区<block ref="00fe04b68c89d56b5fe9076943919a54" category="inline-link-macro-rx"></block>()。</block>
  <block id="375e43b9a6d4ec413731b638ec0945b5" category="inline-link-macro">问题描述#924</block>
  <block id="50da178eec9235ba0a85999374d51cba" category="list-text">增加了在Trident运算符中禁用自动配置器协调的选项<block ref="95579fcabb606a95f307c6ba89588c08" category="inline-link-macro-rx"></block>()。</block>
  <block id="16aa6756a13a48723b3d2bc4bf50c104" category="inline-link-macro">问题描述#976</block>
  <block id="60b04b91abae29736bd23b21579be5cb" category="list-text">增加了CSI -非标准容器的SecurityContext<block ref="a97be45bfcdf3eeaee81dc9917811f8f" category="inline-link-macro-rx"></block> ()。</block>
  <block id="cb1f1e88b6db83dc715d1cb1d8733445" category="section-title">Trident Protect</block>
  <block id="b094c3f306a844e9e49992f69a84cfa4" category="paragraph">NetApp Trident Protect提供高级应用程序数据管理功能、可增强由NetApp ONTAP存储系统和NetApp Trident CSI存储配置程序提供支持的有状态Kubbernetes应用程序的功能和可用性。</block>
  <block id="7df125a00671c08a40e0225c8e7bfe51" category="list-text">增加了在Kubevirt环境的应用程序级别控制冻结行为的功能。</block>
  <block id="bde8e1e3de96ead9884d920004bad3bf" category="list-text">增加了对配置AutoSupport代理连接的支持。</block>
  <block id="3a3a7f688efad3284b8088de98d9c990" category="list-text">增加了为数据移动程序加密(Kerberos / Restic)定义密钥的功能。</block>
  <block id="7bd24598cff0819911511e7a4114afc9" category="list-text">增加了手动运行执行挂钩的功能。</block>
  <block id="d8420a2285ade91fbb556a8705392d4e" category="list-text">增加了在Trident Protect安装期间配置安全上下文约束(SCC)的功能。</block>
  <block id="397cc2a4d426cf97968c783f15ec2de3" category="list-text">增加了对在Trident Protect安装期间配置nodeSelect器 的支持。</block>
  <block id="b5b9bc3aab84e4b648c1432f95ac9294" category="list-text">增加了对AppVault对象的HTTP/HTTPS出口代理的支持。</block>
  <block id="e7ce2b289382a615113880a71867a2fb" category="list-text">扩展的ResourceFilter可用于排除集群范围的资源。</block>
  <block id="230ae1ea7310e8fa80a6cd9e6208085e" category="list-text">增加了对S3 AppVault凭据中AWS会话令牌的支持。</block>
  <block id="639c61df343e77e3de0b8188942cb635" category="list-text">增加了对快照前执行挂钩后资源收集的支持。</block>
  <block id="31ddfac7cfd4824f2708b4b925145a29" category="list-text">改进了临时卷的管理、可跳过ONTAP卷恢复队列。</block>
  <block id="b9b8b880b51afd88c2f4e04a85fe762e" category="list-text">SCC标注现在恢复为原始值。</block>
  <block id="b045f8636f0c21a7fefb437149e20dc9" category="list-text">通过支持并行操作提高了恢复效率。</block>
  <block id="8f35f1b8a50531165f36731d30906b11" category="list-text">增强了对大型应用程序执行挂接超时的支持。</block>
  <block id="c7e79f1db15a592daab7f7427aef79d5" category="section-title">24.10中的变化</block>
  <block id="b4da90c52a04dd004929d86ec62cc931" category="list-text">增加了对ONTAP驱动程序的光纤通道支持的技术预览。</block>
  <block id="bf8ced7df51ab8a52eb2f62a26930270" category="list-text">在Trident中增加了对ONTAP的支持、以便默认情况下使用REST、而不是使用ONTAPI (ZAPI)来运行9.15.1及更高版本。</block>
  <block id="629823c949babd4c929b5092cd5e2745" category="list-text">修复了Trident、以防止在对ONTAP驱动程序执行调整大小操作期间缩减FlexVol卷。</block>
  <block id="f327f341da3048e9e44264cc06a32d7e" category="list-text">在ONTAP驱动程序中添加了Amazon FSx特性，以实现与AWS IAM和SecretsManager的集成，并使Trident能够删除带有备份的FSx卷<block ref="7c3258c670b686f5f475bd6b06dfec79" category="inline-link-macro-rx"></block>()。</block>
  <block id="0f6d5d982c20f6f746c8e4019cc039f8" category="list-text">修复了ONTAPI (ZAPI)请求、以确保在节点暂存操作期间获取LUN属性以识别和修复虚影iSCSI设备时查询LUN序列号。</block>
  <block id="1ae87fd6923d3446058e089c56a6c49d" category="list-text">在SMS-NAS存储驱动程序中增加了对ONTAP卷的Amazon FSx for NetApp ONTAP支持。</block>
  <block id="4e48fbbb41f5d5816d9638612c6e4171" category="list-text">提高了管理多个FlexVol卷时ONTAP -NAS经济型存储驱动程序的性能</block>
  <block id="bf5d13740edaf72b96d340da8b520aa2" category="paragraph">了解Google Cloud NetApp卷的后端配置选项并查看配置示例。</block>
  <block id="a61f1a0c3100fa19040c465723b8d138" category="example-title">SMB卷的配置</block>
  <block id="d7532ab2cf050869a37a3b301475208c" category="paragraph">现在、您可以将Google Cloud NetApp卷配置为Trident的后端。您可以使用Google Cloud NetApp卷后端连接NFS和SMB卷。</block>
  <block id="e996b7ab8a2ede8d8b06fc99b3a11062" category="cell"><block ref="8321592ce24c8a122ecf26a63cfca407" prefix="" category="inline-code"></block><block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>或<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block></block>
  <block id="b9bc5d902a9cd0a94cdcf025103a3488" category="cell">如果请求的卷大小超过此值、则配置失败。此外、还会限制它为qtrees管理的卷的大小上限、并且此<block ref="8b08152c170e621ffcc8bfac7c4d6785" prefix=" " category="inline-code"></block>选项允许自定义每个FlexVol volume的qtrees的最大数量</block>
  <block id="891bc9d98980555712816ab85ae4a747" category="list-text"><block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix="" category="inline-code"></block>设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>。这表示Trident会为SVM的使用此后端配置的每个卷创建一个导出策略<block ref="3568c00ad84b08a31b2dfadbfd8ee221" prefix=" " category="inline-code"></block>、并使用地址块处理规则的添加和删除<block ref="c108f084ab28ac46ad3787ba09ae8304" prefix=" " category="inline-code"></block>。在将卷连接到节点之前、此卷会使用一个空导出策略、此策略不带任何规则来防止对该卷进行不必要的访问。将卷发布到节点后、Trident会创建一个与指定CIDR块中包含节点IP的底层qtree同名的导出策略。这些IP也会添加到父FlexVol volume使用的导出策略中</block>
  <block id="ce3bd20884ed2b4f4a604d922dbb0dd9" category="admonition">您必须在SVM上同时配置NFS和SMB/CCIFS协议、才能为ONTAP内部集群创建<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>SMB卷。如果未能配置其中任一协议、则发生原因 SMB卷创建将失败。</block>
  <block id="b6de3e094a7f00742b82e2ac02d7d167" category="cell"><block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix="" category="inline-code"></block>或<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block></block>
  <block id="b42a873c5558eb05b643cf896aa6e1a4" category="paragraph">集群或SVM管理LIF的IP地址。</block>
  <block id="3dba01512ea96ad84a108f0fc949477a" category="paragraph">可以指定完全限定域名(FQDN)。</block>
  <block id="fcc539559cb740199f02074f11b246c3" category="paragraph">如果Trident是使用IPv6标志安装的、则可以设置为使用IPv6地址。IPv6地址必须用方括号定义，例如<block ref="33e9328e92e3ef05629093b4693b3925" prefix=" " category="inline-code"></block>。</block>
  <block id="3b4dab2ec7635dde859482b32c23ab9f" category="paragraph">有关无缝MetroCluster切换的信息，请参见<block ref="41195e18a4a81a05f5c5a6be365a5602" category="inline-xref-macro-rx"></block>。</block>
  <block id="2c8c9fb51502e9a1b2d2539b4d21a27b" category="cell">协议 LIF 的 IP 地址。如果Trident是使用IPv6标志安装的、则可以设置为使用IPv6地址。IPv6地址必须用方括号定义，例如<block ref="33e9328e92e3ef05629093b4693b3925" prefix=" " category="inline-code"></block>。*不指定iSCSI。*Trident使用<block ref="2de2f329c45219df280af5a70ed7a17c" category="inline-link-macro-rx"></block>发现建立多路径会话所需的iSCSI LUN。如果明确定义、则会生成警告<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>。*省略MetroCluster。*请参见<block ref="41195e18a4a81a05f5c5a6be365a5602" category="inline-xref-macro-rx"></block>。</block>
  <block id="1f5f7f2866fe3a2c557b2ea38e4c2137" category="cell">用于为iSCSI、<block ref="eac89e2640666fd1076a776e4b748fae" prefix=" " category="inline-code"></block>NVMe/TCP或基于光纤通道的<block ref="0f64d0456878c73cbec1ccea842a6f14" prefix=" " category="inline-code"></block>SCSI (FC)选择<block ref="39eea648dab96b0ee6022dabb38bc420" prefix=" " category="inline-code"></block>。</block>
  <block id="b1b6ee25d859768bce6271cfb4265c37" category="admonition">如果您在NetApp ONTAP上使用Amazon FSx和、NetApp建议您为Trident指定DNS名称、而不是IP地址。</block>
  <block id="d5be4c1bab384a780d2912d10b295308" category="paragraph">要进行无缝切换和切回、请使用指定SVM<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block>、并省略这些<block ref="924ff83ff1e671bacfb07ff12b845703" prefix=" " category="inline-code"></block>参数。例如：</block>
  <block id="c905ec8a79a58aa12ad3c7ae35e3127d" category="example-title">基于FC的SCSI (FCP)示例</block>
  <block id="aecb281656d93e34b85fc03341498ff2" category="paragraph">您必须在ONTAP后端为SVM配置FC。这是FC的基本后端配置。</block>
  <block id="d502f4db20ef2dbccab335781e870976" category="example-title">formatOptions的ONTAP SAN经济驱动程序示例</block>
  <block id="54ed52257df13a4cb85caecc569dfeff" category="paragraph">Trident会在"Comments"字段中设置配置标签。在配置时、FlexVol volume Trident会将虚拟池上的所有标签复制到存储卷上、从而设置注释。为了方便起见、存储管理员可以按标签为每个虚拟池和组卷定义标签。</block>
  <block id="684e3a49585228dba75783996b7b6fe7" category="admonition">更新后端的CHAP密码时、必须使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>更新后端。请勿使用ONTAP命令行界面或ONTAP系统管理器更新存储集群上的凭据、因为Trident将无法接受这些更改。</block>
  <block id="1f04e6944e16311a300b742aa0cfb55c" category="paragraph">基于FC的iSCSI SCSI</block>
  <block id="acb2e9160652c3e412ead9e870d11c9b" category="summary">将Trident EKS加载项添加到Kubenetes集群。</block>
  <block id="a2aa5421f278a17c32520d5a0b59edb2" category="doc">在EKS集群上配置Trident EKS加载项</block>
  <block id="c4a27aca3b599e184c25bae01c45a9ec" category="paragraph">NetApp Trident简化了Kubelnetes中适用于NetApp ONTAP的Amazon FSx存储管理、使开发人员和管理员能够专注于应用程序部署。NetApp Trident EKS加载项包括最新的安全修补程序和错误修复、并已通过AWS验证、可与Amazon EKS配合使用。通过EKS加载项、您可以始终确保Amazon EKS集群安全稳定、并减少安装、配置和更新加载项所需的工作量。</block>
  <block id="1ed7790b15234cd5e801f2adf2a3dcd8" category="inline-link-macro">Amazon EKS附加项</block>
  <block id="cf83ec5a1f7760b5f6841c88c08cd788" category="list-text">具有使用加载项的权限的Amazon EKS集群帐户。请参阅 <block ref="40db0d27bd24093e06ae540834459d19" category="inline-link-macro-rx"></block>。</block>
  <block id="1264c0dc5af1ae65d165b02064fb48da" category="list-text">请务必创建IAM角色和AWS密钥、以使EKS Pod能够访问AWS资源。有关说明，请参阅<block ref="0243716974e666f2f8c61577b454990b" category="inline-link-macro-rx"></block>。</block>
  <block id="5125c17a3f7aca891b87dc6ad4b9aa93" category="list-text">在EKS Kubernetes集群上、导航到*加载项*选项卡。</block>
  <block id="07a5364a7a995818398d39d8d5f84d64" category="list-text">找到*Next* NetApp Trident并选中Trident插件的复选框，然后单击*Next*。</block>
  <block id="7f3424d52d579a5a23fa5102f22de8bd" category="list-text">运行以下命令以验证Trident是否已正确安装在集群上：</block>
  <block id="5b06ec175e810e88c7f4e485931d2ce9" category="list-text">继续设置并配置存储后端。有关信息，请参见 <block ref="a2c0b79bf795dfa2b95204a4216320db" category="inline-link-macro-rx"></block>。</block>
  <block id="2f3961a883aa613983c8f34a8add7695" category="paragraph-title">使用命令行界面安装NetApp Trident EKS加载项：</block>
  <block id="fa1234b3e3fcccb885405485ab5cbefb" category="paragraph-title">使用命令行界面卸载NetApp Trident EKS加载项：</block>
  <block id="aa8e98bf63904518342c90bd49a9ea9c" category="paragraph">以下命令将卸载Trident EKS加载项：</block>
  <block id="e462cafda39f4eb6d1800486fc401348" category="cell">如果请求的卷大小超过此值、则配置失败。此外、还会限制它为qtrees和FlexVol volume管理的卷的大小上限、并且此选项允许自定义每个LUN<block ref="8b08152c170e621ffcc8bfac7c4d6785" prefix=" " category="inline-code"></block>的qtrees的最大数量</block>
  <block id="e992eb9afeef39efec8f68b68ffade1d" category="paragraph">*策略JSON示例*：</block>
  <block id="54fe765490f6a1e88df34666a34bd7de" category="paragraph">*信任关系.json文件：*</block>
  <block id="383e53c41c71ed73661ac56b250f6ba3" category="paragraph">更新文件中的以下值<block ref="d19984a25b3e536a13a6bc3036325ffd" prefix=" " category="inline-code"></block>：</block>
  <block id="e6fd9d7b1a119dcc259f2b06b2a2168c" category="list-text">*AWS*-您的&lt;account_id&gt;帐户ID</block>
  <block id="799fd029d6ab8a846f662458a1f8df55" category="list-text">*EKS*-&lt;oidc_provider&gt;集群的OIDC*。您可以通过运行以下命令来获取oidc_Provider：</block>
  <block id="053db598e2fbb7aa26ff7edbf6139941" category="paragraph">*将IAM角色附加到IAM策略*：</block>
  <block id="069097b4881e6034a743e694f616726d" category="paragraph">创建角色后、使用以下命令将在上述步骤中创建的策略附加到此角色：</block>
  <block id="02b550dde0cf971ab3461242774691c7" category="paragraph">*验证OCD提供程序是否关联*：</block>
  <block id="25c5ea267b4be122e562399076209238" category="paragraph">验证OIDC提供程序是否已与集群关联。您可以使用以下命令进行验证：</block>
  <block id="7c3f89bd6bb66984ef17d4765bf1f65a" category="open-title">eksc</block>
  <block id="bc04665b1c712547a7dcc87033ae7152" category="paragraph">您可以使用以下方法之一安装Trident：</block>
  <block id="a01b2c45a64c7d0c2a2aa3ce418eaa04" category="inline-link-macro">为CSI卷启用快照功能</block>
  <block id="9adc02aa546c3838bddb73a67ebaa4e2" category="paragraph">如果要使用快照功能、请安装CSI快照控制器加载项。有关详细信息、请参见 <block ref="d2fce68a585fb4c517040885fb7393e9" category="inline-link-macro-rx"></block> 。</block>
  <block id="df5baf46554bffd06bf1e8e9ae5e6b52" category="paragraph">以下示例命令将安装Trident EKS加载项：</block>
  <block id="87d54c3153674640af4f36dd72f8953a" category="list-text">在“*按NetApp配置Trident”页上，执行以下操作：</block>
  <block id="7d91a8c58620fc2b878600d5ab834bda" category="list-text">*从集群中完全删除附加软件*–NetApp建议您仅在集群中没有依赖于此附加软件的资源时、才从集群中删除此附加软件。从命令中删除<block ref="4b4ac0f998920a46fd2015e11d01d3e7" prefix=" " category="inline-code"></block> 此选项<block ref="099af53f601532dbd31e0ea99ffdeb64" prefix=" " category="inline-code"></block> 以删除此加载项。</block>
  <block id="996d0bc5ff30cfbcef97caeaf2c6b353" category="paragraph">要创建存储后端、您需要创建JSON或YAML格式的配置文件。该文件需要指定所需的存储类型(NAS或SAN)、文件系统和用于获取该文件的SVM以及如何向其进行身份验证。以下示例显示了如何定义基于NAS的存储以及如何使用AWS密钥将凭据存储到要使用的SVM：</block>
  <block id="301909df91f724e7a48b15a1b5d05fa2" category="paragraph">运行以下命令以创建和验证Trident后端配置(TBC)：</block>
  <block id="d072ff8aa34f8a629a86f50ed8e738e5" category="list-text">从YAML文件创建Trident后端配置(TBC)并运行以下命令：</block>
  <block id="f695eae3342584490d4ff28ac968bd5b" category="list-text">验证是否已成功创建Trident后端配置(TBC)：</block>
  <block id="1189a90ab4944cc8e995186943355be8" category="paragraph">创建配置文件后、运行此命令在EKS中创建该文件：</block>
  <block id="91997590df030f7b1753ee07ed8a9857" category="paragraph">要验证状态、请运行以下命令：</block>
  <block id="2001e2e03a90bd5c85ca8982c01a0500" category="cell">每个FlexVol volume的最大LUN数必须在[50、200]范围内。仅SAN。</block>
  <block id="14ed525d625786e77d722ce4d08ee599" category="cell">每个FlexVol volume的最大qtrees数、必须在[50、300]范围内</block>
  <block id="9a30deaecbfde403e36a8a700d09e3e1" category="cell">用于使用 ONTAP REST API 的布尔参数。如果设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>，则Trident将使用ONTAP REST API与后端进行通信。此功能需要使用ONTAP 9.11.1及更高版本。此外、使用的ONTAP登录角色必须有权访问<block ref="a9ba4dc88fa11d44cc7c0c918d174778" prefix=" " category="inline-code"></block> 应用程序。预定义的和角色可以满足这一<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block> 要求<block ref="fdb6ba311fad29ec53069808f10ebef4" prefix=" " category="inline-code"></block> 。</block>
  <block id="43d8d272a15eda3f1fbfcedc2408b697" category="paragraph">要在AWS Bottler套 件上配置NFS3卷、请将所需添加<block ref="e1d3d66c5926aa7fbc3186da8f9b476b" prefix=" " category="inline-code"></block>到存储类：</block>
  <block id="2b00559f1e8a052e6ec27fd2da2fc0ef" category="paragraph-title">PVC、可接入rwx</block>
  <block id="808a149c66a46569dfd8eda4200e5b28" category="paragraph">此示例显示了具有rwx访问权限且与名为的StorageClass关联的NVMe/TCP的基本PVC<block ref="63f9100803e1f67a5e33cbd5da9dbb33" prefix=" " category="inline-code"></block>。</block>
  <block id="627d563f4445675e960fd39150a292ba" category="paragraph">文件系统是 Amazon FSX 中的主要资源，类似于内部部署的 ONTAP 集群。在每个 SVM 中，您可以创建一个或多个卷，这些卷是将文件和文件夹存储在文件系统中的数据容器。借助Amazon FSx for NetApp ONTAP、将在云中作为托管文件系统提供。新的文件系统类型称为 * NetApp ONTAP * 。</block>
  <block id="e5fd3b07dfde2732fc5e3a9d4e7c5370" category="section-title">测试过的Amazon计算机映像(AMI)</block>
  <block id="af2fcef81914e3ce8b2cbe1ab832c879" category="cell">AMI</block>
  <block id="c07ee5debf5f3a3fef16c1ee5e8e4942" category="cell">NAS</block>
  <block id="12b1f0215cde9ea0ca4aac0c3ade3a96" category="cell">NAS经济型</block>
  <block id="62a0282d39568be094470486eaf70c4f" category="cell">SAN</block>
  <block id="8bb9a7fe88283df4df4c9131b10d6601" category="cell">SAN经济型</block>
  <block id="b2f628a87c3b04816210b608f76d5fa0" category="cell">AL2023_x86_64_STANDARD</block>
  <block id="c1dfeb2129506a6914b9c6c3c0cdb647" category="cell">AL2_x86_64</block>
  <block id="9cfc5bb3d7caf552b74c3e5295bb5f11" category="cell">是**</block>
  <block id="e732f4cda23726735e2b2cf9bc3ba76f" category="cell">BOTTLEROCKET_x86_64</block>
  <block id="01a9a3b8d0fcae3055dc91935e8ec6c6" category="cell">是 *</block>
  <block id="382b0f5185773fa0f67a8ed8056c7759" category="cell">不适用</block>
  <block id="1566bc91a0bfa1dbeba46107fc54f756" category="cell">AL2023_ARM_64_STANDARD</block>
  <block id="e3b9c2e4d8176e1074a9511b580d6396" category="cell">AL2_ARM_64</block>
  <block id="a28322bc0e8a38770a1af7cc1d4a9ad9" category="cell">BOTTLEROCKET_ARM_64</block>
  <block id="b5056db6cc95f0ceeb72bf7925b7409d" category="list-text">**在不重新启动节点的情况下，无法删除PV</block>
  <block id="07e5351dce8b6c8e3f72745762bac773" category="paragraph">*使用以下项执行的测试*：</block>
  <block id="502ca2b9844982f6255585372ccd8f3e" category="list-text">安装方法：Helm和作为AWS插件</block>
  <block id="583a5d19bce672251a82cb390b576d1a" category="list-text">对于NAS、我们同时测试了NFSv3和NFSv4.1。</block>
  <block id="8dba245dcac3bf8acf6067e0d62d01cb" category="list-text">对于SAN、测试的是仅iSCSI、而不是NVMe-oF。</block>
  <block id="6eee4bc92cc38369e7271225ec488e82" category="paragraph">*执行的测试*：</block>
  <block id="0524d900ed906479235e99cfc10e1cb6" category="list-text">创建：存储类、PVC、POD</block>
  <block id="12dbb8a3d281738c9cc213bc80fa2343" category="list-text">删除：POD、PVC (常规、qtree/LUN—经济型、NAS与AWS备份)</block>
  <block id="c50cb71bc70d27f0ecf850ff18d11479" category="summary">使用Trident、您可以使用同一个K8s集群中不同命名空间的现有卷或卷快照创建新卷。</block>
  <block id="fc61af20b92225aae2a169587940eb14" category="doc">跨命名空间克隆卷</block>
  <block id="7d3b4ba16dd9908f0a9572976f62cb92" category="paragraph">通过使用Trident、您可以使用同一个Kubornetes集群中不同命名空间的现有卷或卷快照创建新卷。</block>
  <block id="12bf911acc3865647e24aa6cc61fad9d" category="paragraph">克隆卷之前、请确保源后端和目标后端的类型相同、并且具有相同的存储类。</block>
  <block id="9e556d1188a1d7d3f911546d9c8f70f1" category="paragraph-title"><block ref="58f667aaf05f87159670e12bd9bc076b" category="inline-image-macro-rx" type="image"></block>配置源PVC以克隆卷</block>
  <block id="4f371bbe8ba542b2ca00eb9f3a3a2716" category="paragraph-title"><block ref="beadfa85a2fdca06b91edc1131c603e6" category="inline-image-macro-rx" type="image"></block>在目标命名空间中创建克隆PVC</block>
  <block id="a77fe76c8980416f14767484ab56a324" category="paragraph">目标命名空间的所有者创建PVC以从源命名空间克隆PVC。</block>
  <block id="b739008e44cdaf094f62931a68086bb5" category="paragraph">为确保安全性、跨命名空间克隆卷需要源命名空间所有者、集群管理员和目标命名空间所有者进行协作并采取相应操作。每个步骤都会指定用户角色。</block>
  <block id="6558f904ce916da3190d62209965d0ee" category="list-text">*Source命名空间owner:*<block ref="30520f4f96804df83914260b79f55962" prefix="(" category="inline-code"></block>在源命名空间中创建PVC<block ref="612897f0683dd83be850731b14801182" prefix="(" category="inline-code"></block>)，用于<block ref="6fde1ba4470caca933058264dbfdea2e" prefix="(" category="inline-code"></block>使用标注授予与目标命名空间共享的权限。<block ref="176dbae9b2594398063073fa2462e819" prefix=" " category="inline-code"></block></block>
  <block id="848c08c0dad8da2f2f28ca678bbfbf1f" category="list-text">您可以使用逗号分隔列表将PVC共享给多个命名空间。例如，<block ref="01066aa74fe32f5dae708937da0fdc6f" prefix=" " category="inline-code"></block>。</block>
  <block id="e49c2aab2a070ab6ebb8b78acc7d3685" category="list-text">您可以使用共享到所有<block ref="3389dae361af79b04c9c8e7057f60cc6" prefix=" " category="inline-code"></block>的文件。例如、<block ref="b50a7cdb2a6c7bc49cf0ac66428e8a33" prefix=" " category="inline-code"></block></block>
  <block id="6844c666d46d26f14f45880c3b8cd2ec" category="list-text">您可以随时更新PVC以包含<block ref="176dbae9b2594398063073fa2462e819" prefix=" " category="inline-code"></block>标注。</block>
  <block id="8e7677f5fca35d9d3480fac62441fe33" category="list-text">*Cluster admin:*创建自定义角色和kubeconfig,以向目标命名空间所有者授予在目标命名空间中创建Trident卷 参考CR的权限<block ref="6fde1ba4470caca933058264dbfdea2e" prefix="(" category="inline-code"></block>)。</block>
  <block id="b49d0358b75283a3c4f7a2e7229fc097" category="list-text">*Destination命名空间owner:*<block ref="3f6857fc20ae2372499a71869ac3fe7e" prefix="(" category="inline-code"></block>在目标命名空间中创建PVC<block ref="6fde1ba4470caca933058264dbfdea2e" prefix="(" category="inline-code"></block>)，使用<block ref="77167d63af133b47bca3bbacd580fa44" prefix=" " category="inline-code"></block>或<block ref="bfd2f3d7d043509924eaac702957a99d" prefix=" " category="inline-code"></block>和<block ref="2413b30c8869ee9ac5b416f44004a212" prefix=" " category="inline-code"></block>标注指定源PVC。</block>
  <block id="188811e4b8b33253d84403cd9a1fcfa9" category="list-text">对于使用PV-NAS经济型驱动程序配置的ONTAP、不支持只读克隆。</block>
  <block id="18554a6310d1d501f5fdbbbc7a0cd7c6" category="summary">Trident使Kubnetes用户能够在创建卷后对其进行扩展。查找有关扩展iSCSI、FC和NFS卷所需配置的信息。</block>
  <block id="bda53ac9cab805b0770875d4365918b2" category="paragraph">Trident使Kubnetes用户能够在创建卷后对其进行扩展。查找有关扩展iSCSI、NFS和FC卷所需配置的信息。</block>
  <block id="1dea918d41199b513b961287c6579f4f" category="section-title">展开 FC 卷</block>
  <block id="213524ddd0b0daf2a171ee47c3596e00" category="paragraph">您可以使用CSI配置程序扩展FC持久卷(PV)。</block>
  <block id="7ff05a6f045c4cd794027d9a80f2ee93" category="admonition">驱动程序支持FC卷扩展<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>、并且需要Kubernetes 1.16及更高版本。</block>
  <block id="7e60a488a5dff73b203319b9ad63006e" category="paragraph">将PV连接到POD以调整大小。调整FC PV大小有两种情形：</block>
  <block id="3edd5ccaa0382772ccb1cc5a409488a8" category="list-text">默认情况下、Trident管理PVC并在后端重命名FlexVol volume和LUN。您可以传递此<block ref="e2b9359adf7cdd62fc784b5090c3c452" prefix=" " category="inline-code"></block>标志以导入非受管卷。如果使用<block ref="e2b9359adf7cdd62fc784b5090c3c452" prefix=" " category="inline-code"></block>，则在对象的生命周期内，Trident不会对PVC或PV执行任何附加操作。删除PV后、不会删除存储卷、并且卷克隆和卷大小调整等其他操作也会被忽略。</block>
  <block id="82ffd98bd5aacd62bc72d8aca0f53528" category="paragraph">使用驱动程序创建的每个卷<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>都是ONTAP集群上的一个FlexVol volume。使用驱动程序导入FlexVol卷的<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>工作原理相同。可以将ONTAP集群上已存在的FlexVol卷作为PVC导入<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>。同样、FlexGroup vols也可以作为PVC导入<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>。</block>
  <block id="b5556653d8db6b84df68b320ccd5d1a8" category="paragraph">Trident可以导入包含单个LUN的ONTAP SAN FlexVol卷。这与驱动程序一致<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>、该驱动程序会为FlexVol volume中的每个PVC和LUN创建一个FlexVol volume。Trident导入FlexVol volume并将其与PVC定义关联。</block>
  <block id="76f6a2d1bd679fa4c1b485fed91cd412" category="paragraph">对于受管卷，Trident会将FlexVol volume重命名为格式，并将FlexVol volume中的LUN重命名<block ref="b1a57c8f543d163276a264ab84f98485" prefix=" " category="inline-code"></block>为<block ref="1793051c27c3288cfb3a1c86e4e41b41" prefix=" " category="inline-code"></block>。</block>
  <block id="4e0dca66d693b4377c93d787e9d5176a" category="paragraph">以下示例将导入<block ref="9c263b72b293041bdc16e8711bb55a99" prefix=" " category="inline-code"></block>后端上的FlexVol volume<block ref="5461c7e570fd7b4318a37f0dceb291c1" prefix=" " category="inline-code"></block>：</block>
  <block id="aa39e6a781613c350b8408df39aa0171" category="paragraph">Trident支持使用驱动程序导入卷<block ref="94594b2ccbc8e0d220ad37504461650b" prefix=" " category="inline-code"></block>。</block>
  <block id="89df083c083e8cfa84ef1517f2b9e609" category="paragraph-title">Google Cloud NetApp卷示例</block>
  <block id="3312627a317726be3901705d655e8582" category="paragraph">以下示例将使用卷在后端<block ref="c082d32d434314708cccf35dd974ac32" prefix=" " category="inline-code"></block>导入<block ref="94594b2ccbc8e0d220ad37504461650b" prefix=" " category="inline-code"></block>卷<block ref="acdf8df0c694db089171ecaf51f80166" prefix=" " category="inline-code"></block>。</block>
  <block id="94154cfb6a6056267c34a431cd1a4224" category="paragraph">以下示例将在两个卷位于同一区域时导入<block ref="94594b2ccbc8e0d220ad37504461650b" prefix=" " category="inline-code"></block>卷：</block>
  <block id="93c5b0ed9261693ca8644540ac8a1cd9" category="admonition">NetApp建议对NVMe/TCP使用ONTAP 9.12或更高版本。</block>
  <block id="d019fe86b16ae6b783603693309fb4c6" category="section-title">基于FC卷的SCSI</block>
  <block id="09b3e69fece0c8fed98cbfa4f60560d0" category="paragraph">确保AWS会话令牌到期时间足以执行任何长时间运行的S3备份操作。如果令牌在备份操作期间过期、则操作可能会失败。</block>
  <block id="5eb831e0d78e65bcd3dba1b12bc07037" category="inline-link">AWS API文档</block>
  <block id="acc296a904bd0d4d976a52cfe9fe9b8c" category="list-text">有关检查当前会话令牌到期时间的详细信息、请参见<block ref="718365c4473e4015a2556ceb49bc6d0e" category="inline-link-rx"></block>。</block>
  <block id="47700faecc8b055ea48413402a7add11" category="inline-link">AWS IAM文档</block>
  <block id="40a9530583ad3747ca30675858b0a6cd" category="list-text">有关AWS资源凭据的详细信息、请参见<block ref="101809cc7793764f39e2d5fc223ea04c" category="inline-link-rx"></block>。</block>
  <block id="00d3f03654bed141c3478449f1760762" category="paragraph">确保AWS会话令牌到期时间足以执行任何长时间运行的S3还原操作。如果令牌在还原操作期间过期、则操作可能会失败。</block>
  <block id="0c2517d08c2a451f035c427a4dc895e1" category="summary">下面是此版本的已知问题。</block>
  <block id="34515f1d88b10d0db0a78eba6c533394" category="paragraph">已知问题可确定可能妨碍您成功使用此版本产品的问题。</block>
  <block id="825cc355a6b503245e0d84d26f0e16d1" category="paragraph">以下已知问题会影响当前版本：</block>
  <block id="dd298b4e9bfcd54db2048c92819679ad" category="section-title">还原大型文件的Restic备份可能会失败</block>
  <block id="beca1b1ae9141eb4cf9a371088911e0f" category="paragraph">从使用Restic创建的Amazon S3备份还原30 GB或更大的文件时、还原操作可能会失败。解决方法是、使用Koria作为数据移动工具备份数据(Koria是备份的默认数据移动工具)。有关说明、请参见<block ref="1e108e5c10b0ba51ea4cfaf507765efb" category="inline-link-rx"></block> 。</block>
  <block id="7fc5875d06887df5109a87a0ada90eca" category="section-title">配置AppVault身份验证和密码</block>
  <block id="8e2c4d33f50c044b257a84cd65ff1c79" category="section-title">数据移动工具存储库密码</block>
  <block id="e64d157c7a9e337d525d51f62d9d0809" category="section-title">创建数据移动工具存储库密码密钥</block>
  <block id="fc114cb2ee6c7bff559d58e2a7454cab" category="paragraph">使用以下示例创建密码密钥。创建AppVault对象时、您可以指示Trident Protect使用此密钥向数据移动工具存储库进行身份验证。</block>
  <block id="571768fad7edd9c4f57173c592c1f86c" category="section-title">云提供商的AppVault密钥生成示例</block>
  <block id="4d813fb6887e4d4533c00424efc22903" category="paragraph">定义AppVault CR时、您需要包含凭据才能访问由提供程序托管的资源。根据提供程序的不同、为凭据生成密钥的方式也会有所不同。以下是多个提供程序的命令行密钥生成示例。您可以使用以下示例为每个云提供商的凭据创建密钥。</block>
  <block id="3e2db83ddd4087c64413cfd7c14100b6" category="section-title">AppVault创建示例</block>
  <block id="80b938565b2e1ff14bd06e780149b085" category="paragraph">以下是每个提供程序的AppVault定义示例。</block>
  <block id="dd180e899bea0f9a0eb538e256c19673" category="list-text">您可以选择指定一个包含用于Restic和Koria存储库加密的自定义密码的Kubernetes密钥。有关详细信息、请参见 <block ref="7bf3b37360a9f432b37d8ac6c9f10cd4" category="inline-xref-macro-rx"></block> 。</block>
  <block id="2b7c7776f596f179d63bae82e841e9fe" category="list-text">对于S3 AppVault对象、您可以选择使用密钥为出站S3流量指定出口代理URL<block ref="ea739eb21b9424ad95fb5cd1b3ee7d1c" prefix=" " category="inline-code"></block>。</block>
  <block id="99313bdb05c30c161eb80ae8dc89265f" category="list-text">对于S3 AppVault对象、您可以选择使用参数为出站S3流量指定出口代理URL<block ref="c0b36cdbc2185c1fe6ee0b0c177312da" prefix=" " category="inline-code"></block>。</block>
  <block id="aafdbe511f8dcfce152fe32eec4b84a8" category="section-title">查看AppVault信息</block>
  <block id="fe7f61a858dc37b884e97617cd26e1da" category="paragraph">您可以使用Trident保护命令行界面插件查看有关在集群上创建的AppVault对象的信息。</block>
  <block id="ef3bab72151c3b40feca67b002c6d518" category="summary">自定义Trident Protect的默认设置以满足您的特定需求。</block>
  <block id="c465b5ba6226b5fce1902a4b68097d26" category="doc">自定义Trident Protect安装</block>
  <block id="f59f3d4c8cdf79dc43502eea9ff82e75" category="paragraph">您可以自定义Trident Protect的默认配置、以满足您环境的特定要求。</block>
  <block id="df0ecee897380da18617ddb170abdeb0" category="paragraph">以下示例配置文件显示了可用设置、并包含每个资源限制的默认值：</block>
  <block id="73d4542a63a157d0b7e3093eabec8fc9" category="section-title">自定义安全上下文约束</block>
  <block id="d3b1c8ea61eed8a2b7579d4013d792b3" category="paragraph">安装Trident Protect后、您可以使用配置文件修改Trident Protect容器的OpenShift安全上下文约束(SCC)。这些限制为Red Hat OpenShift集群中的Pod定义了安全限制。</block>
  <block id="2708058a93672fbaa8bcf3e785e87b21" category="list-text">创建一个名为的文件<block ref="12cbdc8aa1f61a2cee8eff2b77c0e113" prefix=" " category="inline-code"></block>。</block>
  <block id="468f17ddccd3b34c0d539404233a5e45" category="list-text">将scc选项添加到文件中、然后根据环境的需要修改参数。</block>
  <block id="616d9e371ad293e03cb7d5ad25d66c80" category="paragraph">以下示例显示了SCC选项参数的默认值：</block>
  <block id="0c98fb0c406324f0a1aa95f76be6abee" category="paragraph">下表介绍了SCC选项的参数：</block>
  <block id="4241afd729bbb74051e3cba55f164b0d" category="cell">确定是否可以创建SCC资源。只有在将设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>且Helm安装过程标识OpenShift环境时、才会创建SCC资源<block ref="aac82cc6424e9b52c84a0dbdc2518a15" prefix=" " category="inline-code"></block>。如果不在OpenShift上运行，或者如果<block ref="aac82cc6424e9b52c84a0dbdc2518a15" prefix=" " category="inline-code"></block>设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>，则不会创建任何SCC资源。</block>
  <block id="fd9cec0b7219b39de0235d899bf5b2c0" category="cell">指定SCC的名称。</block>
  <block id="141351edcf12ef25b127186a711471ce" category="cell">Trident保护作业</block>
  <block id="b988295c268025b49dfb3df26171ddc3" category="cell">优先级</block>
  <block id="18dbc63582d575814786eb13d8baf787" category="cell">定义SCC的优先级。优先级值较高的SCC会在优先级值较低的SCC之前进行评估。</block>
  <block id="c4ca4238a0b923820dcc509a6f75849b" category="cell">1</block>
  <block id="ee747b6b4f133aa926c072d073f4a8d5" category="list-text">应用文件中的值<block ref="12cbdc8aa1f61a2cee8eff2b77c0e113" prefix=" " category="inline-code"></block>：</block>
  <block id="54b43aeb73b3f5136e6febff4f374663" category="paragraph">此操作会将默认值替换为文件中指定的值<block ref="12cbdc8aa1f61a2cee8eff2b77c0e113" prefix=" " category="inline-code"></block>。</block>
  <block id="f7d44f30f5245f3d8b32ca7ac3386d95" category="section-title">为Trident Protect配置NetApp AutoSupport连接</block>
  <block id="f7b9fd6fa7c3a2cb8d2aa416b333de52" category="paragraph">您可以通过为连接配置代理来更改Trident Protect连接到NetApp支持以上传支持包的方式。您可以根据需要将代理配置为使用安全或不安全连接。</block>
  <block id="d9e0a3823b1441be4f5c45d4363b5f72" category="open-title">配置安全代理连接</block>
  <block id="1f9d5a4d36fe5f9bef4b60a24e652273" category="list-text">为Trident Protect支持包上传配置安全代理连接：</block>
  <block id="5bd30bac7c368f4bd00e4b23ea9fa84c" category="open-title">配置不安全的代理连接</block>
  <block id="67d7248c78969a2f4f4e7a7204960d0a" category="list-text">为跳过Trident验证的TLS Protect支持包上传配置不安全的代理连接：</block>
  <block id="19ac5903f95d5ebe1db017be54990f37" category="section-title">将Trident保护Pod限制为特定节点</block>
  <block id="2c9025d65a10f87c581d792f629f0b40" category="paragraph">您可以使用Kubenetes nodeSelecte节点选择约束根据节点标签控制哪些节点有资格运行Trident Protect Pod。默认情况下、Trident Protect仅限于运行Linux的节点。您可以根据需要进一步自定义这些限制。</block>
  <block id="e131fc2359f1f35a2fdb476c3f19bfdd" category="list-text">创建一个名为的文件<block ref="7eec75c3fd904f84005cd47f3bed0e47" prefix=" " category="inline-code"></block>。</block>
  <block id="785a1066f4a7291f0bd0c65d4529e79f" category="list-text">将nodeSelector选项添加到文件中、然后修改文件以添加或更改节点标签、从而根据环境需求进行限制。例如、以下文件包含默认操作系统限制、但也针对特定区域和应用程序名称：</block>
  <block id="0b3a205b675b10deddbe1e4c76c36e22" category="list-text">应用文件中的值<block ref="7eec75c3fd904f84005cd47f3bed0e47" prefix=" " category="inline-code"></block>：</block>
  <block id="86ff3a8cca72a77f236198059cede1b6" category="paragraph">此操作会将默认限制替换为您在文件中指定的限制<block ref="7eec75c3fd904f84005cd47f3bed0e47" prefix=" " category="inline-code"></block>。</block>
  <block id="213e43c92b705298b37a27707e3ecdea" category="section-title">禁用每日Trident Protect AutoSupport捆绑包上传</block>
  <block id="e6e2ac25d149c9ca2eda9da019c8857c" category="paragraph">您也可以禁用计划的每日Trident Protect AutoSupport支持包上传。</block>
  <block id="3701dd93d7fa9d380885a4c7fb15bebc" category="admonition">默认情况下、Trident Protect会收集有助于处理您可能创建的任何NetApp支持案例的支持信息、包括有关集群和托管应用程序的日志、指标和拓扑信息。Trident Protect会按每日计划将这些支持包发送给NetApp。您可以随时手动<block ref="dedfc5877c343d6cbe77701c7edd9bde" category="inline-link-macro-rx"></block>执行此操作。</block>
  <block id="1b8215632ac6cd0bc10bb44ac5786a82" category="list-text">创建一个名为的文件<block ref="7cc35e350ac50663f9c914e677dc5c5a" prefix=" " category="inline-code"></block>。</block>
  <block id="92e8c3505d5d84a0a2e1eb8698158967" category="list-text">将AutoSupport选项添加到文件中、然后根据您的环境需求修改参数。</block>
  <block id="c924e3d11dc98c4bfb0bb0a7e4bba949" category="paragraph">以下示例显示了AutoSupport选项参数的默认值：</block>
  <block id="668d522672fb38a8d3d4961de5f59a62" category="paragraph">如果<block ref="4dd202185370b5db00de876ba19c1bd1" prefix=" " category="inline-code"></block>将设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>，则会禁用AutoSupport支持包的每日上传。</block>
  <block id="3a73620d7003f9f9087ba74069b621e9" category="list-text">应用文件中的值<block ref="7cc35e350ac50663f9c914e677dc5c5a" prefix=" " category="inline-code"></block>：</block>
  <block id="b8c29704f9b86600d95c1c0c4d902455" category="list-text">使用Helm安装Trident Protect。替换<block ref="b90b2ffedb63ca3bd8795caf4397715e" prefix=" " category="inline-code"></block>为集群名称、此名称将分配给集群并用于标识集群的备份和快照：</block>
  <block id="029d1c6e95e08907e4a8d285674ab46b" category="inline-link-macro">全局Trident保护冻结设置</block>
  <block id="f0c05ba588826dcd6ebd5a2b3796d458" category="list-text">*。metadata.annotations.protect.trident.netapp.io/skip-vm-freeze*:(_可 选_)此标注仅适用于从虚拟机定义的应用程序、例如在KubeVirt环境中、文件系统在快照之前冻结。指定此应用程序是否可以在快照期间写入文件系统。如果设置为true、则应用程序将忽略全局设置、并可在快照期间写入文件系统。如果设置为false、则应用程序将忽略全局设置、并且文件系统会在快照期间冻结。如果指定了此参数、但应用程序定义中没有虚拟机、则会忽略此标注。如果未指定，则应用程序将遵循<block ref="61895e61fe23c9afb5a69eafa8d9b7ba" category="inline-link-macro-rx"></block>。</block>
  <block id="1fdb8b98325df025bfd256fc475c0986" category="paragraph">如果您需要在创建应用程序后应用此标注、可以使用以下命令：</block>
  <block id="221764e612f482dbef981bc478028287" category="list-text">使用以下示例之一创建并应用应用程序定义、将括号中的值替换为您环境中的信息。您可以使用逗号分隔列表和示例中显示的参数在应用程序定义中包括名称和资源。</block>
  <block id="50b08150a783c8c645d4ae11790366e3" category="paragraph">您可以选择在创建应用程序时使用标注来指定应用程序是否可以在快照期间写入文件系统。这仅适用于从虚拟机定义的应用程序、例如在KubeVirt环境中、文件系统在快照之前冻结。如果将标注设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>，则应用程序将忽略全局设置，并可在快照期间写入文件系统。如果将其设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>，则应用程序将忽略全局设置，并且文件系统会在快照期间冻结。如果使用标注、但应用程序定义中没有虚拟机、则会忽略标注。如果不使用标注，则应用程序将遵循<block ref="61895e61fe23c9afb5a69eafa8d9b7ba" category="inline-link-macro-rx"></block>。</block>
  <block id="26f08cf1da862c1ae831c562f3621d09" category="paragraph">要在使用命令行界面创建应用程序时指定标注、可以使用标志。<block ref="3164592cacced1f14eeb788e764306a8" prefix=" " category="inline-code"></block></block>
  <block id="1ab026b6049460749549c7e94872c903" category="list-text">创建应用程序并使用文件系统冻结行为的全局设置：</block>
  <block id="5c69fd9a5297da7a82e38395fe1ca096" category="list-text">创建应用程序并为文件系统冻结行为配置本地应用程序设置：</block>
  <block id="c2c21ce64dd4770c44c8642d322a5424" category="admonition">如果在应用程序定义中明确引用了集群范围的资源、或者这些资源引用了任何应用程序命名源、则会将这些资源包括在备份、快照或克隆中。</block>
  <block id="2358fb4006fff416413cb9bfc04e4b73" category="list-text">确保AWS会话令牌到期时间足以执行任何长时间运行的还原操作。如果令牌在还原操作期间过期、则操作可能会失败。</block>
  <block id="df710f89ebb9e663bd3d66607a0bf413" category="inline-link">AWS 文档</block>
  <block id="f3aa7db516c38030a276a5895520407a" category="list-text">有关AWS资源凭据的详细信息、请参见<block ref="968595e57d50a64e3fbe0f06bc16cb91" category="inline-link-rx"></block>。</block>
  <block id="3094ed24e92fa43f93a063b74aba1810" category="admonition">如果快照前执行挂钩添加、更改或删除了Kubornetes资源、则这些更改将包括在快照或备份以及任何后续还原操作中。</block>
  <block id="d323f0b96d7cc15909a8faf8b343f7a0" category="section-title">手动运行执行挂钩</block>
  <block id="b634452964a2a438acc2e266661043f1" category="paragraph">您可以手动运行执行挂钩以进行测试、或者在发生故障后需要手动重新运行挂钩。要手动运行执行挂钩、您需要具有所有者、管理员或成员权限。</block>
  <block id="b363e23f5ecd8c7994b0a821469e303c" category="paragraph">手动运行执行挂钩包含两个基本步骤：</block>
  <block id="799527cc898bf9953cb450f2b50e3184" category="list-text">创建资源备份、此备份用于收集资源并为其创建备份、从而确定挂钩的运行位置</block>
  <block id="d65fd71b39d33804450847f69ddd69c0" category="list-text">对备份运行执行挂钩</block>
  <block id="d07d4b96979a15c6dea6fb4556200241" category="example-title">第1步：创建资源备份</block>
  <block id="32f56b6a11303c523e67b3ef5e70618e" category="list-text">创建自定义资源(CR)文件并将其命名为<block ref="1f13ad2055ef28f62611a4ced3a8da82" prefix=" " category="inline-code"></block>。</block>
  <block id="10f8657004606b105a7612de4504c293" category="list-text">*spec.applicationRef*：(_required_)要为其创建备份资源的应用程序的Kubernetes名称。</block>
  <block id="854d053ea53b0a9b6012fe3af98a11f9" category="list-text">查看备份状态。您可以重复使用以下示例命令、直到操作完成：</block>
  <block id="5c04e29edc18bc5ad81fc61dec5eee00" category="list-text">验证备份是否成功：</block>
  <block id="163cbd835d00fc0fb13923332a76e532" category="example-title">第2步：运行执行挂钩</block>
  <block id="89666a2351b355f4191600de4436dfe7" category="list-text">创建自定义资源(CR)文件并将其命名为<block ref="433572a415d5824f82d7e7c9a0829077" prefix=" " category="inline-code"></block>。</block>
  <block id="3e0977039522c796fb780d1c0155fdb7" category="list-text">*spec.applicationRef*：(_required_)确保此值与您在步骤1中创建的ResourceBackup CR中的应用程序名称匹配。</block>
  <block id="c4f09daab57e7cc61e19e7da88f84edc" category="list-text">*spec.appVaultRef*：(_required_)确保此值与您在步骤1中创建的ResourceBackup CR中的appVaultRef匹配。</block>
  <block id="021c431bf5a7e31ec81f982db93aa9f3" category="list-text">*spec.appArchivePath*：确保此值与您在步骤1中创建的ResourceBackup CR中的appArchivePath匹配。</block>
  <block id="e2399671182dcd28bddf5d44b11f7af2" category="list-text">*spec.stage *：(_required_)一个字符串，指示执行挂钩应在操作期间的哪个阶段运行。此挂钩运行不会在任何其他阶段运行挂钩。可能值：</block>
  <block id="aa9f056f37cdee5e5bcd47f7bc3ac1ba" category="list-text">创建手动执行挂钩运行请求：</block>
  <block id="42e563c466d27e9d4943ef1acd3703b7" category="list-text">检查执行挂钩运行的状态。您可以重复运行此命令、直到操作完成：</block>
  <block id="8430f2c56dfc9e79fcaf741392d54499" category="list-text">描述exech本 运行对象以查看最终详细信息和状态：</block>
  <block id="b343abb76f62f4eef4afa255e885eee4" category="paragraph">从Trident 25.02开始、新增功能摘要提供了有关Trident和Trident Protect版本的增强功能、修复和弃用的详细信息。</block>
  <block id="5674eb46caea5efcff5615daf30ab92d" category="paragraph">在使用CRS或Trident Protect命令行界面插件创建AppVault对象时、您可以选择指示Trident Protect使用包含用于Restic和Koria存储库加密的自定义密码的Kubernetes机密。如果未指定密钥、Trident Protect将使用默认密码。</block>
  <block id="4fc9faf161c64ed80d0fb8ca9aa0882e" category="admonition">根据所使用的数据移动工具、您只需包含该数据移动工具的相应密码即可。例如、如果您正在使用Restic、并且将来不打算使用KONIA、则在创建密钥时只能包含Restic密码。</block>
  <block id="6a346946ba0777d650b6e41a4c30c7b6" category="paragraph">确保已删除要删除的AppVault正在使用的所有快照和备份CRS。</block>
  <block id="b00fc94596cde685c68e0bedddb72ec6" category="summary">您可以使用Kube-state-metrics和Prometheus监控Trident Protect资源的状态。这样、您就可以获得有关部署、节点和Pod的运行状况信息。</block>
  <block id="9f496d568415fb10daa1a69c18a27d52" category="doc">监控Trident保护资源</block>
  <block id="c3815bcedc348a572c0e7310d70e426d" category="paragraph">您可以使用Kube-state-metrics、Prometheus和智能管理器开源工具来监控受Trident Protect保护的资源的运行状况。</block>
  <block id="57d16d79ebb62eb467b490200f5f3191" category="paragraph">Kube-state-metrics服务可通过Kuber-netes API通信生成指标。将其与Trident Protect结合使用可提供有关环境中资源状态的有用信息。</block>
  <block id="0e68741139605975f01bc532098ea92c" category="paragraph">Prometheus是一个工具包、可用于读取由Kube-state-metrics生成的数据、并将其呈现为有关这些对象的易读信息。Kube-state-metrics和Prometheus共同为您提供了一种监控使用Trident Protect管理的资源的运行状况和状态的方法。</block>
  <block id="6d0450323deb4880d88d2da4155d7c76" category="paragraph">警报管理器是一项服务、可接收Prometheus等工具发送的警报、并将其路由到您配置的目标。</block>
  <block id="45501c075fe75338b712d61db6d82f54" category="paragraph">这些步骤中包含的配置和指导仅为示例；您需要对其进行自定义以符合您的环境。有关具体说明和支持、请参见以下官方文档：</block>
  <block id="d9bdb1d7869cec3eaa75aaa48b414845" category="inline-link">Kube-state-metrics 文档</block>
  <block id="28b29a811fcff582b069060bb6104048" category="list-text"><block ref="28b29a811fcff582b069060bb6104048" category="inline-link-rx"></block></block>
  <block id="695c33d174e4ad444d82403015632550" category="inline-link">Prometheus文档</block>
  <block id="94fa5821707b81f95ad49b7f10d2d4d6" category="list-text"><block ref="94fa5821707b81f95ad49b7f10d2d4d6" category="inline-link-rx"></block></block>
  <block id="853d2b8407eda505e00a8014afdb0ddf" category="inline-link">记录</block>
  <block id="e23d8cb1d9d009a1aa298e95526efcd3" category="list-text"><block ref="e23d8cb1d9d009a1aa298e95526efcd3" category="inline-link-rx"></block></block>
  <block id="b246a1443f359b6da345c33e0b25f47a" category="section-title">第1步：安装监控工具</block>
  <block id="08d75478cbb19385a09620acc4f7a148" category="paragraph">要在Trident Protect中启用资源监控、您需要安装和配置Kube-state-metrics、Prometus和智能管理器。</block>
  <block id="2a2c51a8db12ee75c90da4a3fb0e1a0b" category="section-title">安装Kube-state-metrics</block>
  <block id="016aa0f0550f5a0506cb61b61568e043" category="paragraph">您可以使用Helm安装Kube-state-metrics。</block>
  <block id="ea6a84ebff4515f07a0f260b7cce7b83" category="list-text">添加Kube-state-metrics Helm图表。例如：</block>
  <block id="d6cff887be77b3dc5c6f689b93bb9b32" category="list-text">为Helm图表创建配置文件(例如<block ref="1da0bbdfeb5bb05830055a1515d9e2a9" prefix=" " category="inline-code"></block>)。您可以根据您的环境自定义以下示例配置：</block>
  <block id="cf5cf09f9422112814f7fa967e303283" category="listing-title">metrics-config.yaml：Kube-state-metrics Helm图表配置</block>
  <block id="eca99dda7e2a747b75c232f5c3e314a0" category="list-text">通过部署Helm图表来安装Kube-state-metrics。例如：</block>
  <block id="1b61aa1e4c2991758aa9c5bea0047156" category="inline-link">Kube-state-metrics自定义资源文档</block>
  <block id="6c21207c2c29ab5841100bb2ca67480f" category="list-text">按照中的说明配置Kube-state-metrics，以便为Trident Protect使用的自定义资源生成度量指标<block ref="0c2d96c77ebc80eb4f9df846c2904f4c" category="inline-link-rx"></block>。</block>
  <block id="88b8613d339947a37e41b1f514dcc42c" category="section-title">安装 Prometheus</block>
  <block id="6cfabcb4c640f9570382e21ec242a3c0" category="paragraph">您可以按照中的说明安装Prometheus<block ref="9c3dd7b31d363d10addc1dc55a338e01" category="inline-link-rx"></block>。</block>
  <block id="7d512717b3f318d83bbce6f09e891a6f" category="section-title">安装活动管理器</block>
  <block id="ee3b7d497a79c10fe3b10cda25267876" category="paragraph">您可以按照中的说明安装提示管理器<block ref="34c399dcb7431f049905523dd168baa8" category="inline-link-rx"></block>。</block>
  <block id="9147f13af253be263e759a06097eea20" category="section-title">第2步：配置监控工具以协同工作</block>
  <block id="73be38664a808318efe65c02c4ce747c" category="paragraph">安装监控工具后、您需要将其配置为协同工作。</block>
  <block id="68f04b43068f22f98aaa6513240dd2b5" category="paragraph">Prometheus现在可以从Kube-state-metrics收集指标、并可向警报管理器发送警报。现在、您可以配置触发警报的条件以及警报的发送位置。</block>
  <block id="a42cb9abdbaf69f90fba5592304008cd" category="section-title">第3步：配置警报和警报目标</block>
  <block id="1138a7ff5cea0f83ce07834c8e02315c" category="paragraph">将这些工具配置为协同工作后、您需要配置触发警报的信息类型以及警报的发送位置。</block>
  <block id="917045fa08d9c44ee88951e8cdb4023b" category="section-title">警报示例：备份失败</block>
  <block id="e8665bc518bf7a6d63332be811e8f6cb" category="section-title">将警报管理器配置为向其他通道发送警报</block>
  <block id="c9272f0d68fac2055ba2d71be6c87b1b" category="paragraph">以下示例将配置警报管理器、以便向Sl延 时信道发送通知。要根据您的环境自定义此示例、请将此密钥的值替换<block ref="aa8106611bcfe43fec48e6d1d371de52" prefix=" " category="inline-code"></block>为您的环境中使用的Slackwebhook URL：</block>
  <block id="792d490e884279c961aba837ccd9b67a" category="admonition">Trident Protect会自动选择某些资源、因为这些资源与您选择的资源之间存在关系。例如、如果您选择永久性卷请求资源、并且该资源具有关联的POD、则Trident Protect也会还原关联的POD。</block>
  <block id="d110d36251c4dd04b7da5ef237ac6063" category="inline-link">文档</block>
  <block id="2cd3acbff016f03ffcfe72208e450647" category="admonition">在使用Koria作为数据移动工具还原备份时、您可以选择在CR中指定标注、也可以使用命令行界面控制Koria使用的主存储的行为。有关可配置选项的详细信息、请参见<block ref="08f67cdc0555f043586a8a4182d9187b" category="inline-link-rx"></block>。有关使用Trident Protect命令行界面指定标注的详细信息、请使用<block ref="26d4326deff4a9a34c8bff3eaf4ad7fc" prefix=" " category="inline-code"></block>命令。</block>
  <block id="7491b3d3a4aa89a2dd6445477c6b6e0a" category="list-text">对于Amazon S3 (AWS) AppVault对象、您可以选择指定sSession令牌、如果使用单点登录(SSO)进行身份验证、则此令牌非常有用。此令牌是在中为提供程序生成密钥时创建的<block ref="cd932e77bb3df9634d58b2fd34398b6f" category="inline-xref-macro-rx"></block>。</block>
  <block id="620026f954fdad541c9d19554476345c" category="list-text">删除AppVault对象、替换<block ref="bf09cf3bd2a9288a0bdf3d1b89b770a1" prefix=" " category="inline-code"></block>为要删除的AppVault对象的名称：</block>
  <block id="35d393329a969d87338f26cd6fe42238" category="list-text">使用Helm安装Trident Protect。替换<block ref="ecc79c99c4f86f0db5cc7f200415205f" prefix=" " category="inline-code"></block>为集群名称、此名称将分配给集群并用于标识集群的备份和快照：</block>
  <block id="c14fd2bf15bccb33c362aafa6a463f49" category="section-title">是否需要在ONTAP后端定义文件中同时定义管理和数据LIF？</block>
  <block id="7279808725b91afce38762e4e1a8108b" category="paragraph">管理LIF为必填项。DataLIF因情况而异：</block>
  <block id="adfb1f23733ff9ee458d139c1df9f86f" category="list-text">ONTAP NAS：NetApp建议指定<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>。如果未提供此参数、则Trident将从SVM提取数据LIF。您可以指定要用于NFS挂载操作的完全限定域名(FQDN)、以便创建轮叫DNS来在多个dataLIF之间进行负载平衡。有关详细信息、请参见<block ref="879dc93198c7c5e8ce7148b6d1205d73" category="inline-link-macro-rx"></block></block>
  <block id="565b6e5803bd2aeffbb1b529ae150998" category="section-title">IPv6地址是否可用于管理和DataLIF？</block>
  <block id="4464ed822c0b46fd0bb406f3addad477" category="section-title">是否可以更新后端的DataLIF？</block>
  <block id="6299c4ccad2894e1fc64eb6059df19b8" category="paragraph">您只能在和<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>上更新DataLIF<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>。</block>
  <block id="50738c79b08f93cc8be7f7ee1a3ac387" category="paragraph">* ONTAP NAS驱动程序*：NetApp建议指定<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>。如果未提供此参数、则Trident将从SVM提取数据LIF。您可以指定要用于NFS挂载操作的完全限定域名(FQDN)、以便创建轮叫DNS来在多个dataLIF之间进行负载平衡。</block>
  <block id="2455735b04a718daf96631c95e2d2d2c" category="paragraph">如果在AKS集群上使用托管身份或云身份、请设置为<block ref="71d36c46e340ad9137b2691e267f5ecd" prefix=" " category="inline-code"></block>。如果在EKS集群上使用云标识、请设置为<block ref="907695ffaef2806fea589c7d8d044679" prefix=" " category="inline-code"></block>。在GKE集群上使用云标识时、将设置为<block ref="9856712fdf7563a4074fc130ed9f0755" prefix=" " category="inline-code"></block>。</block>
  <block id="d73f3637b8d6ba73db2eed6c626bb0f7" category="paragraph">在AKS集群上使用云标识时、设置为工作负载标识("azure.Workload .Identity /client-id：XXXXXX-xxxx-xxxx-xxxx-xxxxxxxxxxx")。在Trident集群上使用云身份时、设置为eks.amazonaws.com/role-arn: AWS IAM角色("eks arn：aws：iam：：：12356：roe/EAM-roe"")。在GKE集群上使用云标识时、请设置为云标识("iam.GKE.IO/GCP-service-account：xxxx@mygcpproject.iam.gserviceaccount.com ")。</block>
  <block id="f39a4edd3567c3db7a288d4b8203dbee" category="cell">NFS 主机的主机名或 IP 地址。此值应设置为虚拟机的dataLIF。</block>
  <block id="7a6f34ea0b1eec52267ce30c62d910ba" category="cell">NFS 主机的主机名或 IP 地址。此值应设置为SVM的dataLIF。</block>
  <block id="65066f84c75170b9c4abad6591a73548" category="inline-link">在dataLIF上启用Kerberos</block>
  <block id="3d2c78553d28b3786f4ec9e513e0adba" category="list-text">确保已准备好ONTAP Storage VM以支持NFS卷的Kerberos加密。有关说明、请参见<block ref="27faba9d44bb486b2290a75aafcee5c1" category="inline-link-rx"></block> 。</block>
  <block id="fdbf43c52ad3e72902872b8ada5c6dde" category="paragraph">通过此<block ref="d51321f13693d09d4a9cbb2758b42d12" prefix=" " category="inline-code"></block>功能、NFS客户端可以向SVM查询可用NFS导出的列表。部署到Kubnetes集群的Pod可以对发出<block ref="55fb64f15dd3d0c53de3a4d095218569" prefix=" " category="inline-code"></block>命令、并接收可用挂载列表、包括其无权访问的挂载。虽然这本身并不会影响安全，但它确实会提供不必要的信息，可能有助于未经授权的用户连接到 NFS 导出。</block>
  <block id="fcb4221a7bd32f5d31d2e30a8443eac9" category="list-text">配置或<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>驱动程序时、不应再指定DataLIF<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>。</block>
  <block id="3165be312bab247f04681069367db65a" category="list-text">修复了ONTAP SAN后端特有的SLM问题、以确保仅发布属于报告节点的部分数据LIF。</block>
  <block id="a478d15e95ddd4ce45d4fe0b98b651a6" category="list-text">如果使用方括号指定ONTAP SAN IPv6数据LIF、则这些LIF现在可以正常工作。</block>
  <block id="a7080c23e8c14c73db47d3f3e492003c" category="paragraph"><block ref="9e6b25667a12ee82b7da8f90b3adfb4d" prefix="" category="inline-code"></block><block ref="e831869c37ce314b5ade82786bf3348f" prefix=" " category="inline-code"></block></block>
  <block id="762a96bc52f41b6b53a4e2d27fd14560" category="cell">协议 LIF 的 IP 地址。NetApp建议指定<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>。如果未提供此参数、则Trident将从SVM提取数据LIF。您可以指定要用于NFS挂载操作的完全限定域名(FQDN)、以便创建轮叫DNS来在多个dataLIF之间进行负载平衡。可以在初始设置后更改。请参阅 <block ref="b2c939cb81e81d99a25f4be74f517f2f" category="inline-xref-macro-rx"></block>。如果Trident是使用IPv6标志安装的、则可以设置为使用IPv6地址。IPv6地址必须用方括号定义，例如<block ref="33e9328e92e3ef05629093b4693b3925" prefix=" " category="inline-code"></block>。*省略MetroCluster。*请参见<block ref="41195e18a4a81a05f5c5a6be365a5602" category="inline-xref-macro-rx"></block>。</block>
  <block id="6e7bd344d0c1260e0145e18171b598bb" category="paragraph">您可以在初始配置后更改dataLIF、方法是运行以下命令、为新的后端JSON文件提供更新后的dataLIF。</block>
  <block id="df9bc5d5fd5d258576244d9b760ef3d9" category="admonition">如果一个或多个Pod连接了PVC、则必须先关闭所有相应的Pod、然后再将其重新启动、以使新的dataLIF生效。</block>
  <block id="a2b356ce90145d5d188d7705a9797bc1" category="cell">协议 LIF 的 IP 地址。* ONTAP NAS驱动程序*：NetApp建议指定dataLIF。如果未提供此参数、则Trident将从SVM提取数据LIF。您可以指定要用于NFS挂载操作的完全限定域名(FQDN)、以便创建轮叫DNS来在多个dataLIF之间进行负载平衡。可以在初始设置后更改。请参阅 <block ref="b2c939cb81e81d99a25f4be74f517f2f" category="inline-xref-macro-rx"></block>。* ONTAP SAN驱动程序*：不为iSCSI指定。Trident使用ONTAP选择性LUN映射来发现建立多路径会话所需的iSCI LI。如果明确定义了dataLIF、则会生成警告。如果Trident是使用IPv6标志安装的、则可以设置为使用IPv6地址。IPv6地址必须用方括号定义、例如：[28e8：d9fb：a825：b7bf：69a8：d02f：9e7b：3555]。</block>
  <block id="a0c3ccd8e55dd8a4f5f5ad3a5269e331" category="admonition">如果您还没有熟悉<block ref="13aad4b6f98e790ff55e578921fa5ede" category="inline-link-macro-rx"></block>，现在是一个好时机。</block>
  <block id="f54758d5b91452d3103cc1017fa70d71" category="admonition">有关Kubnetes集群上Trident架构的详细信息，请参阅<block ref="2e4686c52a7aa47e7bc2aa3cfa953fbe" category="inline-link-macro-rx"></block>。</block>
  <block id="50a4fd89cedf0068776b972ce96fcceb" category="cell">用于使用 ONTAP REST API 的布尔参数。<block ref="14d839191d1ecf387a15b5b0c802a8ae" prefix=" " category="inline-code"></block>设置为时<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>，Trident使用ONTAP REST API与后端通信；设置为时<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>，Trident使用ONTAPI (ZAPI)调用与后端通信。此功能需要使用ONTAP 9.11.1及更高版本。此外、使用的ONTAP登录角色必须有权访问<block ref="045ed0306c61104cb0777ccd31ce648b" prefix=" " category="inline-code"></block> 应用程序。预定义的和角色可以满足这一<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block> 要求<block ref="fdb6ba311fad29ec53069808f10ebef4" prefix=" " category="inline-code"></block> 。从Trident 24.06版和9.15.1 9.151或更高版本开始、默认情况下会<block ref="14d839191d1ecf387a15b5b0c802a8ae" prefix=" " category="inline-code"></block>设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>；更<block ref="14d839191d1ecf387a15b5b0c802a8ae" prefix=" " category="inline-code"></block>改为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>以使用ONTAPI (ZAPI)调用。</block>
  <block id="43086d9a7f35d289c190a6d377be9418" category="paragraph">对于 snapshotReserve = 50% ， PVC 请求 = 5GiB ，卷总大小为 5/.5 = 10GiB ，可用大小为 5GiB ，这是用户在 PVC 请求中请求的大小。此<block ref="0c5606ed319753bb2d86a485f23c8f6d" prefix=" " category="inline-code"></block>命令应显示类似于以下示例的结果：</block>
  <block id="d858eab1cb0b74aa1e6d052d7c06bd76" category="list-text">OpenShift 4.10 - 4.18</block>
  <block id="42113cf11e30b764619d3a98db65262d" category="list-text">R润 彻Kubernetes Engine 2 (RKE2) v1.26.7+rke2r1、v1.28.5+rke2r1</block>
  <block id="e516fe45e3db545de8d5d292a67f4990" category="list-text">为两个卷模式(文件和卷模式：块(原始设备)存储)增加了对KubeVirt / OpenShift虚拟化VM的备份和恢复支持。此支持与所有Trident驱动程序兼容、并可增强使用NetApp SnapMirror和Trident Protect复制存储时的现有保护功能。</block>
  <block id="fc1d748db1b5b488ce7af7d17ea15d55" category="inline-link-macro">软件版本支持</block>
  <block id="1906137ea73af1894fec1becb00e0aee" category="summary">您可以找到一些出色的NetApp Trident和Trident Protect博客。</block>
  <block id="0db80d8cadbd011f12ade006191e47b0" category="doc">Trident和Trident保护博客</block>
  <block id="c5497cf98d8e6141ba38e1421502c2d4" category="paragraph">您可以在以下位置找到一些出色的NetApp Trident和Trident Protect博客：</block>
  <block id="897b6a6a21c73524107071aff80ed94e" category="inline-link-macro">解锁无缝iSCSI存储集成：适用于AWS的ROSA集群上的FSxN指南</block>
  <block id="7e03dec1558430aac74331cea427e6fa" category="list-text">2025年3月5日：<block ref="c5953f971a0752feeb8ffbf7d9258789" category="inline-link-macro-rx"></block></block>
  <block id="6dc79a8e11fda729083bb4e518de411f" category="inline-link-macro">介绍Trident中的光纤通道支持</block>
  <block id="b81f0a113de47ddee93e4aea79f4231f" category="list-text">2024年12月12日：<block ref="5c3a9e150bc491524071eb191093dabe" category="inline-link-macro-rx"></block></block>
  <block id="767cfc132547de728a22c9fa992eabfc" category="section-title">Trident Protect博客</block>
  <block id="a706b02fe1ef4870ecc8b588cbe37989" category="inline-link-macro">为OpenShift虚拟化VM执行崩溃状态一致的备份和还原操作</block>
  <block id="938cab8cf5785dfe0cd9ba76b4cae8f0" category="list-text">2025年3月13日：<block ref="94b3904630a42c759a6ceb844d104a7a" category="inline-link-macro-rx"></block></block>
  <block id="20e2f4e6733d3ac5dd3cfb83506a2882" category="inline-link-macro">利用NetApp Trident将GitOps模式扩展到应用程序数据保护</block>
  <block id="ccd722b2b8950bc9aa2b92826dcc4664" category="list-text">2025年3月11日：<block ref="751073ae4d07c4adc8a15e872b137421" category="inline-link-macro-rx"></block></block>
  <block id="bc057a27d4d8047073d6f5fa802c9c2b" category="inline-link-macro">Trident 25.02：借助激动人心的新功能提升Red Hat OpenShift体验</block>
  <block id="fb68b473f5b70bc40e206ef882be4c63" category="list-text">2025年3月3日：<block ref="ce0fc75766d0530b76aaabf87dc1b463" category="inline-link-macro-rx"></block></block>
  <block id="62ca59fefb174e2cae471bd3ff034f37" category="inline-link-macro">介绍Trident Protect基于角色的访问控制</block>
  <block id="2471f7ea5ea7dad7f60b4ece1fab4a9f" category="list-text">2025年1月15日：<block ref="685287f953e60833f62fba2c623c4cb9" category="inline-link-macro-rx"></block></block>
  <block id="4a685524952a84cef8685a87bb60f47a" category="inline-link">推出trdentctrd protect：适用于Trident Protect的强大命令行界面</block>
  <block id="281486a8e7fd8f1c6bd6cf0c6bc7eba0" category="list-text">2024年11月11日：<block ref="b1528afdd7be1e71d2c311686269cf66" category="inline-link-rx"></block></block>
  <block id="c0d721f6d5aa4d159e2f9890fab5bbee" category="inline-link-macro">Kubernetes驱动的数据管理：Trident Protect带来的新时代</block>
  <block id="78ec91ade28d11ab9c3f53f543bba8d3" category="list-text">2024年11月11日：<block ref="46b2057fd4479a7d4462fb82adc6f54b" category="inline-link-macro-rx"></block></block>
  <block id="244fede3edf8f2ab57f281d777777961" category="list-text">*。spec.includedNamespaces*:(_required__)使用命名空间和标签选择器指定应用程序使用的命名空间和资源。应用程序命名空间必须属于此列表。标签选择器是可选的、可用于筛选每个指定命名空间中的资源。</block>
  <block id="cc8aa03bb88101c1901ab425b29a1901" category="list-text">*。spec.includedClusterScopedResources*:(_可 选_)使用此属性指定要包含在应用程序定义中的集群范围资源。此属性允许您根据资源的组、版本、种类和标签来选择这些资源。</block>
  <block id="eba6898a839f426c3106a97f94614eb9" category="list-text">*groupVersionKind*：(_required_)指定集群范围资源的API组、版本和类型。</block>
  <block id="8d8a8010684a930aa7760c829cad4141" category="list-text">*labelSelecter*：(_可 选_)根据集群范围的资源的标签对其进行筛选。</block>
  <block id="47edbb9e6d6e6e874eb40c274a0e2e0f" category="sidebar">博客文章</block>
  <block id="4a5fadb6b0890cea5e8d53c37411aaf0" category="cell"><block ref="bc35d038baf172a19349f289d31fbf9d" prefix="" category="inline-code"></block></block>
  <block id="022571ee546e1a953d857961a8cd0442" category="paragraph">创建一个使用已配置的Kubernetes StorageClass来请求PV访问权限的永久性卷请求(PVC)。然后、您可以将PV挂载到POD。</block>
  <block id="f79367bddbaecd3962f7c740a1b2178f" category="paragraph">A<block ref="b1b93f46fc69df9fe663c091f4d6c2b4" category="inline-link-rx"></block> (PVC)是指请求访问集群上的永久卷。</block>
  <block id="79a251ee7369fdcdb0847d35254afcf8" category="paragraph">创建PVC后、您可以将卷挂载到Pod中。</block>
  <block id="a305c8fb2137d8a4a767905590079e89" category="section-title">创建PVC</block>
  <block id="06034bca671a3028021f1a722aac7b41" category="paragraph">配置Kubnetes StorageClass对象并创建存储类、以指示Trident如何配置卷。创建一个使用已配置的Kubernetes StorageClass来请求PV访问权限的永久性卷请求(PVC)。然后、您可以将PV挂载到POD。</block>
  <block id="5de805965faeb85a54098223ea3a3334" category="paragraph">创建PVC后、您可以将卷挂载到Pod中。</block>
  <block id="89fb75fa5ae260c326092b78970469ed" category="list-text">在左侧导航窗格中，选择*群集*。</block>
  <block id="abdaa0762abc2037a71287c94bceae14" category="list-text">选择要为其配置NetApp Trident CSI加载项的集群的名称。</block>
  <block id="691da62871e09bf9c944f36b9de07889" category="list-text">选择*Add-ones*，然后选择*Get more add-ones*。</block>
  <block id="e6cd86d61f4639c8a27006c6c29b3e9f" category="list-text">选择 * 下一步 * 。</block>
  <block id="ce7f62393ec7cbcc106793e2c9ab41e8" category="list-text">选择要更新NetApp Trident CSI加载项的集群的名称。</block>
  <block id="f90a2b79ab21cae46f34d96bb4501334" category="list-text">选择*Add-ones*选项卡。</block>
  <block id="38b15bc2ab2d3588a9a19b123eaec1b5" category="list-text">选择* Trident按NetApp显示*，然后选择*编辑*。</block>
  <block id="302ef561e28f7d7cd13d1042cece78e1" category="list-text">选择 * 保存更改 * 。</block>
  <block id="b7cd6be51eaf277b357ed1c976d66d06" category="list-text">在左侧导航窗格中，选择*群集*。</block>
  <block id="1ca28d22337393f531c7c8028230ed76" category="list-text">选择要删除的NetApp Trident CSI加载项的集群名称。</block>
  <block id="85f27397ddcaf9ec996f312d1d89ecf9" category="list-text">选择*Add-ons*选项卡，然后选择Trident by NetApp。*</block>
  <block id="6f99fa9b2e1f4893851a8aeb82d171f9" category="list-text">选择 * 删除 * 。</block>
  <block id="f8c91efdaebc08b292c83903943a18c8" category="admonition">如果您为冲突解决方法选择覆盖、则可以使用Amazon EKS附加设置覆盖现有附加项的一个或多个设置。如果未启用此选项、并且与现有设置存在冲突、则操作将失败。您可以使用生成的错误消息来解决冲突。在选择此选项之前、请确保Amazon EKS附加组件未管理您需要自行管理的设置。</block>
  <block id="3b19f031abb1ee1e70a3d19640060ff8" category="cell">指定要存储在AWS密码管理器中的FSx SVM凭据。-<block ref="b068931cc450442b63f5b3d276ea4297" prefix=" " category="inline-code"></block>：密钥的Amazon资源名称(ARN)、其中包含SVM的凭据。-<block ref="599dcce2998a6b40b1e38e8c6006cb0a" prefix=" " category="inline-code"></block>：设置为<block ref="eb301fdabb7b8996ba898845d5546121" prefix=" " category="inline-code"></block>。有关详细信息、请参见 <block ref="e10af1024bf046058eef4c68dff3462a" category="inline-link-macro-rx"></block> 。</block>
  <block id="f62b661d066f6d5a24622ec3438e051b" category="example-title">配置AWS FSx for ONTAP和"一切 管理器"</block>
  <block id="88f9965484e8785ad82e1b99cdae3ab3" category="section-title">创建AWS机密管理器密钥</block>
  <block id="646ed389b399156cbfb4923c9d8fbf95" category="paragraph">由于Trident将对FSx Sx Sv服务器发出API来为您管理存储、因此它需要凭据才能执行此操作。传递这些凭据的安全方法是通过AWS机密管理器密钥。因此、如果您还没有、则需要创建一个AWS机密管理器密钥、其中包含vsadmin帐户的凭据。</block>
  <block id="360f6e9d45a33dadfdb2b47fa3a32110" category="paragraph">以下示例将创建一个AWS机密管理器密钥来存储Trident CSI凭据：</block>
  <block id="1cb68d4d58173447ddb7517b51d352a9" category="paragraph">Trident还需要AWS权限才能正常运行。因此、您需要创建一个策略来为Trident提供所需的权限。</block>
  <block id="49512d524988e02360eaf4f4bb2ad8f3" category="paragraph">如果输出为空、请使用以下命令将IAM OIDC与集群关联：</block>
  <block id="fa1c8065dc4d2b862bfba881472c0aac" category="admonition">替换<block ref="2befb7722283d545949c6220c6548fe4" prefix=" " category="inline-code"></block>为上一步中创建的角色的ARN。</block>
  <block id="44308ffe82692c268b99d3caefca907e" category="list-text">检查FSxN Trident CSI加载项的当前版本。请替换<block ref="e2eb89f0ffaf521a0d2eeaffca04d117" prefix=" " category="inline-code"></block>为您的集群名称。</block>
  <block id="a1dc4a2136ed260b34021d64aaa6980a" category="list-text">将此加载项更新到上一步输出中的update下返回的版本。</block>
  <block id="0ca34892a0e67f37b07d196ec272007d" category="list-text">NetApp不建议在所有ONTAP驱动程序中使用FlexVol自动增长、但ONTAP SAN除外。解决方法是、Trident支持使用快照预留并相应地扩展FlexVol卷。</block>
  <block id="67ed8fb72dc668ae9c7c1114df8f02ed" category="paragraph">请参见<block ref="ee9d56c9130a1d3814c95b35eb7c82a4" category="inline-link-macro-rx"></block>有关配置FC和FC-NVMe SAN主机的详细信息、。</block>
  <block id="1b9fede0aad66dda6d8b01b66280fff4" category="paragraph">*注意事项*：* OpenShift和KubeVirt环境支持基于FC的SCSI。* Docker不支持基于FC的SCSI。* iSCSI自我修复不适用于基于FC的SCSI。</block>
  <block id="5e6c49c79d451ce5d17472c430c69454" category="admonition">确保<block ref="dd5ff67ba72768d33f75e645aa2b8e56" prefix=" " category="inline-code"></block>包含<block ref="2a81b35478c9ccb4f9392dcc40edb8e6" prefix=" " category="inline-code"></block>在下<block ref="a4a918a45181164207929d52aec36aec" prefix=" " category="inline-code"></block>。</block>
  <block id="ce3d3f85c4d1d4dd7826863d9428b4e5" category="admonition">要获得有关Trident的帮助、请使用创建支持包<block ref="1d41e2024c69110ad6054ffc785ca8e0" prefix=" " category="inline-code"></block>并将其发送给NetApp支持部门。</block>
  <block id="8ef3114bf1395e8f04d7b3404982499e" category="list-text">您可以将NVE加密标志设置为<block ref="9d4568c009d203ab10e33ea9953a0264" prefix=" " category="inline-code"></block>、以创建启用了NAE的卷。</block>
  <block id="351e2b20bd9ea864b69cd832f3a4a5df" category="list-text">如果未在后端启用NAE、则在Trident中配置的任何卷都将启用NVE、除非在后端配置中NVE加密标志设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>(默认值)。</block>
  <block id="39fb9551310e8e28d64d0e2b94913f7a" category="paragraph">在对应用程序执行数据保护操作时、您需要手动或使用命令行创建AppVault CR、并且AppVault CR需要驻留在安装了Trident Protect的集群上。AppVault CR特定于您的环境；您可以使用此页面上的示例作为创建AppVault CRS的指南。</block>
  <block id="8b70987187655cedeb971520a2170b2d" category="paragraph">在创建AppVault CR之前、您需要确保所选的AppVault和数据移动工具可以向提供程序和任何相关资源进行身份验证。</block>
  <block id="a346cffc17b34fc56f3020d8b33d30c3" category="paragraph">创建存储类和PVC后、您可以将PV挂载到Pod。本节列出了将PV连接到POD的示例命令和配置。</block>
  <block id="f253a45a33bc62e467efd426699d9025" category="paragraph">启动守护进程后、您可以使用Docker命令行界面创建和管理卷。</block>
  <block id="a0ba0b0d751124c646a352594c7e9d7b" category="paragraph">其余驱动程序会受到争用条件等问题的影响、这些条件可能会导致为单个请求创建大量卷、而没有明确的"获奖者"；例如、Element的一项功能允许卷具有相同的名称但ID不同。</block>
  <block id="8904f6454065d44212063d39eeae5f07" category="paragraph">对NFS挂载选项进行精细控制；默认为"-o nfsvers=3"。*仅适用于<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>和<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>驱动程序*。<block ref="71f7a3f48cfd3876cffba401813b7db0" category="inline-link-rx"></block>(英文)。</block>
  <block id="6a3f2fe5a221ff5e914123b7d1d207ac" category="paragraph">Snapshot预留百分比、默认值为""以接受ONTAP默认值</block>
  <block id="5c43de330169c269435e59a6b0ec6a2e" category="paragraph">此<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>驱动程序会在自动管理的FlexVol卷池中将Docker卷创建为ONTAP qtrees。qtree 的扩展能力远高于此，每个集群节点最多可扩展 100 ， 000 个，每个集群最多可扩展 2 ， 400 ， 000 个，但某些功能会受到影响。该<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>驱动程序不支持Docker卷粒度快照或克隆。</block>
  <block id="a21d144a1c4c6283532b218d06e428b5" category="admonition">Docker Swarm目前不支持此<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>驱动程序、因为Docker Swarm不会在多个节点之间编排卷创建过程。</block>
  <block id="a742d54fecc7e60d5a6c56568622bf9d" category="paragraph">此<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>驱动程序会在自动管理的FlexVol卷共享池中将Docker卷创建为ONTAP LUN。这样，每个 FlexVol 就不会仅限于一个 LUN ，并且可以为 SAN 工作负载提供更好的可扩展性。根据存储阵列的不同， ONTAP 每个集群最多支持 16384 个 LUN 。由于卷是下面的 LUN ，因此此驱动程序支持 Docker 卷粒度快照和克隆。</block>
  <block id="8d848c284e4e3a777487dbfd26724083" category="paragraph">有关适用于FlexGroup的FlexGroup和工作负载的信息，请参见<block ref="fd26d63759e7985cecb8814cdedc189b" category="inline-link-rx"></block>。</block>
  <block id="9e2ebdd267bef148382aa48682e06bc5" category="paragraph">要在同一环境中获得高级功能和大规模扩展，您可以运行多个Docker卷插件实例，其中一个使用，另一个<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>使用<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>。</block>
  <block id="86c8f953c394c19d7db6f6cf9882490e" category="paragraph"><block ref="6594f00105facbc68b3a919300221cc8" prefix="" category="inline-code"></block></block>
  <block id="fc03ab18d43301d015d44d432ae97eee" category="paragraph"><block ref="576b5b6204cfa4837c36a45307295380" prefix="" category="inline-code"></block><block ref="6d1394abf99896b6835a3be55cc2adce" prefix=" " category="inline-code"></block></block>
  <block id="ff0444fca20d2b690849631c3206bc5a" category="paragraph"><block ref="9e7d4cc1e0a49fb0aadd14f9a159a7ec" prefix="" category="inline-code"></block></block>
  <block id="839d5cbe0fec88e102ab7dee46577ac7" category="paragraph">此操作会将 Snapshot 策略设置为所需的值。默认值为<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block>，表示不会自动为卷创建快照。除非存储管理员进行修改、否则所有ONTAP系统上都会存在一个名为"default"的策略、此策略会创建并保留六个每小时快照、两个每日快照和两个每周快照。可以通过浏览到卷中任何目录中的目录来恢复快照中保留的数据<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block>。</block>
  <block id="c515dd3a067f21589c3e11d31e32462b" category="list-text">_rwx块存储驱动程序访问模式_：只有"volumemode：block"(原始设备)才支持ONTAP SAN (iSCSI、NVMe/TCP、FC)和ONTAP SAN经济型(iSCSI)驱动程序。对于这些驱动程序、<block ref="8da9b296683a7538d85fc38fcb987292" prefix=" " category="inline-code"></block>无法使用参数、因为卷是在原始设备模式下提供的。</block>
  <block id="8c1fabda63909c966d5b02c908178af2" category="paragraph">此示例在运行命令后创建<block ref="6108feb94d9d09a19e33648dcce80003" prefix=" " category="inline-code"></block>、表示基本的自定义安装：</block>
  <block id="a687cccb5ef434dd8df6734253a09535" category="paragraph">此示例在运行命令后创建<block ref="2241cac556b278d16d0bb5f94117277a" prefix=" " category="inline-code"></block>、用于在Windows工作节点上安装Trident。</block>
  <block id="de4b458ce26c7e2479c45bb915c621b5" category="paragraph">如果在创建PVC时收到"No Capacity Pools"(未找到容量池)错误、则您的应用程序注册可能没有关联的所需权限和资源(子网、虚拟网络、容量池)。如果启用了调试、Trident将记录在创建后端时发现的Azure资源。验证是否正在使用适当的角色。</block>
  <block id="1c52b877ebb92e642f84ee1628240247" category="cell">始终为SolidFire SAN</block>
  <block id="31079062306e509fbecf7a2bd9485187" category="cell">"iSCSI_"+存储(SolidFire) IP地址</block>
  <block id="1ed25c6118740d8ddd80ea0ce520e808" category="cell">查找名为Trident的访问组的ID</block>
  <block id="c72dc6713f14ba2541824417f46e1cd6" category="cell">故障排除时要使用的调试标志。例如、｛"api"：false、"METHO"：true｝</block>
  <block id="cc1ae9a700356c7c519b4aee7dcbf53b" category="cell">"10.0.0.1"、"[2001：1234：abc：：：fefe]"</block>
  <block id="1925cd490b13f25205214eccfe51fccd" category="admonition">如果您使用的是"vsadmin"凭据、<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block>则必须是SVM的凭据；如果使用的是"admin"凭据、则必须是集群的凭据<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block>。</block>
  <block id="788fe8d661645297ab41d7c9235dcbb8" category="list-text">保留、不要尝试在mkfs时间丢弃块(丢弃块最初在固态设备和稀疏/精简配置存储上很有用)。此选项将取代已弃用的选项"-K"、并适用于所有文件系统(xfs、ext3和ext4)。</block>
  <block id="470fa5f00d398bad1d1874a9b4d59d7b" category="cell">"["0.0.0.0/0、"：：：/0"]"</block>
  <block id="1e8d899088cef4cd1758075ac2b63721" category="cell">为快照"0"预留的卷百分比</block>
  <block id="d8d01124b8b3fe614b475ad96fca4635" category="cell">如果<block ref="0a236e7685e50a59df980d0a30929d6c" prefix=" " category="inline-code"></block>为<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block>，<block ref="2954e92a9b4d0e998fe4893f8141649a" prefix=" " category="inline-code"></block>“”</block>
  <block id="5a71b77feca506fc8eba218b4e65048b" category="paragraph">Trident将从快照还原数据。您可以验证快照还原状态：</block>
  <block id="9d577c00c4cbb5d99e7a8a6589113669" category="paragraph">删除具有关联快照的永久性卷时、相应的Trident卷将更新为"正在删除"状态。删除卷快照以删除Trident卷。</block>
  <block id="27e9bd9989c090489f69126b9910d7d8" category="list-text">您还可以通过在后端定义中包含来获取每个后端的调试日志<block ref="effa2d809c72dcb6cce15a1e0b040e63" prefix=" " category="inline-code"></block>。例如、include<block ref="825a719baa5b5b7445c98535815fac39" prefix=" " category="inline-code"></block>可在Trident日志中获取API调用和方法迁移。现有后端可以<block ref="effa2d809c72dcb6cce15a1e0b040e63" prefix=" " category="inline-code"></block>配置<block ref="ad782b779edfd8199198bed41b3e3b6b" prefix=" " category="inline-code"></block>。</block>
  <block id="1e8493e925b9f37d24c0573c08c6643a" category="list-text">在源集群上、为源应用程序创建AppVault。根据您的存储提供程序、修改中的示例<block ref="789b31b0a5cabea5de04107e65439f53" category="inline-link-macro-rx"></block>以适合您的环境：</block>
  <block id="a42a308559809e0fc20b13ea51d5d3d4" category="list-text">在源集群上、创建源应用程序CR：</block>
  <block id="85d88f09b637997959adc6d50a42d56f" category="list-text">在目标集群上，创建一个与您在源集群上应用的AppVault CR完全相同的源应用程序AppVault CR，并将其命名为(例如<block ref="3ad9e8b652d0a9a977e2534bf143ea29" prefix=" " category="inline-code"></block>)。</block>
  <block id="8af8219e9797756f7e348dd40e365632" category="list-text">在目标集群上为目标应用程序创建目标AppVault CR。根据您的存储提供程序、修改中的示例<block ref="789b31b0a5cabea5de04107e65439f53" category="inline-link-macro-rx"></block>以适合您的环境：</block>
  <block id="f454fc9c64d31c07a352c043fe184940" category="list-text">在目标集群上、创建App镜像 关系CR文件：</block>
  <block id="3d9dc864aeb5b914422a6a665c53ceeb" category="list-text">(_可 选_)在目标集群上、检查复制关系的状态：</block>
  <block id="fe07abfd92e0d0809a7eb71ce3f79b4b" category="list-text">在目标集群上，编辑AppMirorRelationship CR文件(例如<block ref="e4fba3915616865173fe7feee130a30f" prefix=" " category="inline-code"></block>)，并将*spec.desiredState*的值更改为<block ref="2c42d7d277f63fcbe64b041b997ceaed" prefix=" " category="inline-code"></block>。</block>
  <block id="2ebd442ba9080ba8f10b660fd69bb379" category="list-text">可选：在源集群上、创建源应用程序的快照。这样可确保捕获源集群的最新更改。</block>
  <block id="4d77fef9f6bd1f87593e41a1d32a7ea4" category="list-text">在目标集群上，编辑AppMirorRelationship CR文件(例如<block ref="e4fba3915616865173fe7feee130a30f" prefix=" " category="inline-code"></block>)，并将spec.desiredState的值更改为<block ref="072f9734fceb02f516b50d4174ac0f18" prefix=" " category="inline-code"></block>。</block>
  <block id="cd7eea117bba074d0250983f81bb10e4" category="list-text">在初始目标集群上、删除App镜像 关系CR。这会使目标成为源。如果新目标集群上仍有任何保护计划、请将其删除。</block>
  <block id="5ca8234bb17898bdaa8421e9bab83a0b" category="list-text">确保为新目标(初始源集群)配置了两个AppVault CRS。</block>
  <block id="e319bd320145e358af8fd5dbada2d800" category="list-text">在源集群上、创建一个关闭快照：</block>
  <block id="47d8460d4aa2253d733ecb9b355e4319" category="list-text">在源集群上、关闭快照完成后、获取关闭快照的状态：</block>
  <block id="00e7f88da8b7690738f8546262d2fe54" category="list-text">在源集群上，使用以下命令查找*shutdownfapp.statues.appArchivePath*的值，并记录文件路径的最后一部分(也称为基本名称；这将是最后一个斜杠之后的所有内容)：</block>
  <block id="579f2feb3d9edaa336d3ccb69c3fb855" category="list-text">执行从新目标集群到新源集群的故障转移、并进行以下更改：</block>
  <block id="23b4dec181e41ab3962cf73b28ffe58c" category="list-text">在当前目标集群上、删除App镜像 关系CR：</block>
  <block id="90abe2b6c39f51adea4c5aabff2df094" category="list-text">遵循*附加配置模式*，并将*配置值*部分中的配置值参数设置为您在上一步(步骤1)中创建的ro-arn。值应采用以下格式：</block>
  <block id="be88c7e0502cadac6eccdbb309610a77" category="paragraph">以下命令示例将安装Trident EKS加载项：<block ref="a5b33d95c2beda5bdc154ff0b946fffe" prefix=" " category="inline-code"></block>(使用专用版本)</block>
  <block id="6935ea1d99a0c26f0e4cddb80f444849" category="summary">如果使用Red Hat OpenShift、则可以使用操作员安装Trident。</block>
  <block id="c282cc9924716a0ecdcc1864c8821950" category="doc">从Trident社区运营商切换到OpenShift认证运营商</block>
  <block id="92da9bfce4b6635fcf5d3f3725accbbc" category="paragraph">要从NetApp社区Trident操作员切换到Red Hat OpenShift认证Trident操作员、您需要卸载社区操作员、然后使用OperatorHub安装认证操作员。</block>
  <block id="cec1c482e499b4748371d5e19359dacd" category="inline-link-macro">准备安装Trident的环境</block>
  <block id="82c3da1e712e572f424c3b7bf7dafcaf" category="section-title">卸载NetApp Trident社区操作员</block>
  <block id="ae76609b28371ddbc9f46be837040994" category="list-text">使用OpenShift控制台导航到OperatorHub。</block>
  <block id="349838fb1d851d3e2014b9fe39203275" category="image-alt">安装</block>
  <block id="2d8d10c295f87a1f17d2f37a4df9688d" category="list-text">查找NetApp Trident社区操作员。</block>
  <block id="e1b3a07c6ba67335c1564ff539f1f885" category="admonition">不要选择*从该操作符中删除所有操作数实例*。</block>
  <block id="615da270425b5ecb4fe6ddeed9358880" category="list-text">单击 * 卸载 * 。</block>
  <block id="c7afcce8432c7e249a80e803d2a81180" category="section-title">安装OpenShift认证操作员</block>
  <block id="6eaf33f9c2387a07f89fc20e19acffaa" category="list-text">导航到Red Hat OperatorHub。</block>
  <block id="cccebca328e4674a8888d5dc22f61e0d" category="list-text">搜索并选择NetApp Trident操作员。</block>
  <block id="9872de8cf3e5ac67cae81e5c17eaa5cc" category="list-text">按照屏幕上的说明安装操作员。</block>
  <block id="52b8ffce119fe77b28034f2fdd35eb5f" category="section-title">验证</block>
  <block id="ba8b537f098a607b7119fc78961300eb" category="list-text">检查控制台中的OperatorHub、确保已成功安装新的认证操作员。</block>
  <block id="838483eae18a7bca44c25a90dc7f55c3" category="doc">使用OpenShift OperatorHub安装Trident</block>
  <block id="d569da5fb14cad502f71e232cdfcb4e4" category="paragraph">如果您使用的是Red Hat OpenShift、则可以通过Red Hat认证操作员安装NetApp Trident。使用此过程从Red Hat OpenShift容器平台安装Trident。</block>
  <block id="516a493e6df274ac5512ffaab7234ebf" category="section-title">找到并安装Trident运算符</block>
  <block id="7a200e69eab0d67b215ea6e3c6081797" category="list-text">导航到OpenShift OperatorHub并搜索NetApp Trident。</block>
  <block id="f19e5d93360a2cdbfe64b6c513e8d263" category="list-text">单击 * 安装 * 。</block>
  <block id="86499c179913093d38f20a089bb4967f" category="list-text">选择所需选项，然后单击*Install*。</block>
  <block id="301a8f7d2ea6785da5f183d668f629b2" category="list-text">安装完成后、操作员将显示在已安装操作员列表中。</block>
  <block id="daf49607bdd50d5294748814ce67ed21" category="list-text">创建类似于operator软件包安装的Torc。</block>
  <block id="7f95b6a9d45bd5ee11107a5abb5dd69c" category="section-title">卸载Trident Operator</block>
  <block id="9838ab5306db947832d94d1cd49a486a" category="list-text">从已安装操作员列表中选择Trident操作员。</block>
  <block id="b5a7424a278ddd01fa4e381b58d1e00d" category="list-text">选择是否要从操作符中删除所有操作数实例。</block>
  <block id="28ed84868f638999e59e306d6b87b07c" category="admonition">如果未选中“*从该运算符中删除所有操作数实例*”复选框，则不会卸载Trident。</block>
  <block id="0e9e7400617f4a815b5ec92f2030b580" category="sidebar">使用OpenShift认证操作员进行安装</block>
  <block id="93e4eff1c01241084bfc9427074bacea" category="sidebar">使用OpenShift OperatorHub安装Trident</block>
  <block id="c9e3d6c8fc80db4773cf69e205f2b571" category="sidebar">从Trident社区运营商切换到OpenShift认证运营商</block>
  <block id="88f2acec92adfdf94ffec73a8fda60a6" category="paragraph">只需几个步骤即可设置卷克隆。</block>
  <block id="e44a637a848aa60ef27cfc477d692412" category="paragraph">Trident将创建PV及其后端存储卷。</block>
  <block id="9f965f02f635b760a84c43d43aba854f" category="paragraph">开始安装之前，<block ref="a24ee29cd883cbf52de58a68b0fed1a7" category="inline-link-macro-rx"></block>。</block>
  <block id="d72c3d84865c2955b89cbf6e0ec00ada" category="inline-link-macro">问题描述#983</block>
  <block id="ac76c3fcac41a10bd5f709108875e6c6" category="list-text">修复了使用非默认图像注册表()时Trident运算符错误填充的侧向图像名称和版本的问题<block ref="524f95fe3800e5d3ef82e615d679c539" category="inline-link-macro-rx"></block>。</block>
  <block id="7bc2d7846b2e95d3f64a4d4f4b53cc3c" category="list-text">修复了在ONTAP故障转移恢复()期间多路径会话无法恢复的问题<block ref="0939f851f18acedadb7fdffdec6d140b" category="inline-link-macro-rx"></block>。</block>
  <block id="212dff1a74c955a52357c5a67478720d" category="section-title">25.02中的变化</block>
  <block id="ef5363598e9b6f09c42a4f11b7798e31" category="section-title">24.10.1中的变更</block>
  <block id="fe28e2a5f749261aca15de7b9e5841d0" category="list-text">*Kubernetes*：增加了对Kubernetes 1.32的支持。</block>
  <block id="3da21bcb163e7e142caada3e22ac014f" category="list-text">更新了Trident和Trident CVE-ASUP的依赖关系、以解决CVE-2024-45337和CVE-2024-45310。</block>
  <block id="eeda04a5133a10ebd4956c7d83dfd389" category="list-text">删除了在iSCSI自我修复期间因非CHAP门户间歇性运行状况不正常而注销的问题<block ref="0939f851f18acedadb7fdffdec6d140b" category="inline-link-macro-rx"></block>()。</block>
  <block id="93898a0aff94da797ef263a35d0ba2f8" category="admonition">如果您使用Red Hat OpenShift、请务必注意命名空间标注在OpenShift环境中的关键作用。命名空间标注可确保还原的Pod遵循OpenShift安全上下文约束(SCC)定义的适当权限和安全配置、并可在没有权限问题的情况下访问卷。有关详细信息，请参阅<block ref="9c33d4f1fa6e1f731baeaf3a5fe229cd" category="inline-link-rx"></block>。</block>
  <block id="78937357687a7b0292ed689d4e420485" category="inline-link">Red Hat 文档</block>
  <block id="89e30b0f2c0e48835ff872a994fc749c" category="list-text">如果将运行RHL/Red Hat Enterprise Linux Core-OS (RHOS)的工作节点与FC PVs结合使用、请在StorageClass中指定<block ref="70f68bb2f748b85de6526bfe236ea1e9" prefix=" " category="inline-code"></block>mountOption以执行实时空间回收。请参阅<block ref="65c95aeda8cb0b26307f9839dd3fefbf" category="inline-link-rx"></block>。</block>
  <block id="e80b6a304e29d5dfcb9150f47d69db94" category="section-title">Trident支持KubeVirt和OpenShift虚拟化</block>
  <block id="cffd29fb8e17cb30625130ee24cd667d" category="paragraph">Trident支持以下用于KubeVirt和OpenShift虚拟化的ONTAP驱动程序：</block>
  <block id="0ae326ef84f2a6bc4be48951f88c0162" category="list-text">在OpenShift虚拟化环境中更新存储类以使用<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>参数(例如：<block ref="6db865adcb81b7cf881ff9839476f850" prefix=" " category="inline-code"></block>)。如果需要、可使用中的参数<block ref="c6dda2fd1e6d70d582099348cfe6c847" prefix=" " category="inline-code"></block>将卷模式明确设置为阻止<block ref="1467a571dd94848f616edc4a0c33b927" prefix=" " category="inline-code"></block>、以通知数据卷创建者。</block>
  <block id="daa6a182f8035711e9635994f572c7bc" category="list-text">OpenShift容器平台(amd64和ARM64)支持的Red Hat Enterprise Linux CoreTM OS (RHCOS)版本</block>
  <block id="2bf380408feee0a9443f217c907f0681" category="inline-link-macro">Red Hat OpenShift日志记录文档</block>
  <block id="796814ebd3d324fe438f0c699c37c89e" category="admonition">下表仅包含与日志记录服务相关的存储配置相关的变量。您可以找到其他选项、应根据您的部署查看、配置和使用这些选项<block ref="202ad309c67a74272d432350a2d0cf76" category="inline-link-macro-rx"></block>。</block>
  <block id="3a298688c4d78e1b7532d3859cd16a57" category="inline-link-macro">Red Hat OpenShift Container Platform 3.11文档</block>
  <block id="620fb6046d1af07a3df48b291902887c" category="paragraph">但是，如果在初始安装后进行部署，则 Ansible 需要使用组件攻略手册。此过程可能会随OpenShift的不同版本略有不同、因此请务必阅读并遵循<block ref="87091f5bcd27af3d8592e461d451be85" category="inline-link-macro-rx"></block>您的版本。</block>
  <block id="95c7854cff26589ad1555baa8672c001" category="inline-link-macro">Red Hat的OpenShift部署指南</block>
  <block id="757eaf1f1a551aabeb24f57705261f85" category="paragraph">上述变量以及部署过程可能会随 OpenShift 的每个版本而发生变化。请务必查看并遵循<block ref="1b29818189b1aff318eccaee960b09cb" category="inline-link-macro-rx"></block>您的版本、以便为您的环境配置此版本。</block>
  <block id="4e602d306baa843baf9ed9bd9ce452b1" category="list-text">增加了对ONTAP驱动程序OpenShift虚拟化的支持。</block>
  <block id="814077b936b9bc9d2731d0f5fd50fde3" category="list-text">要对 iSCSI PV 执行联机空间回收，工作节点上的底层操作系统可能需要将挂载选项传递到卷。这一点适用于RERL/Red Hat Enterprise Linux CoreTM OS (RHCOS)实例、此实例需要<block ref="70f68bb2f748b85de6526bfe236ea1e9" prefix=" " category="inline-code"></block><block ref="2ee633fb26bfccf07d490458d29f92a2" category="inline-link-rx"></block>；请确保在n ü^中包含discard mountOption、以支持联机块丢弃<block ref="15699dd651c6fec3ed329f2bf55d54b4" category="inline-link-rx"></block><block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix="[" category="inline-code"></block>。</block>
  <block id="de6d7aa94730ba882f7284ac8e07a0d1" category="paragraph">如果您使用的是驱动程序组合、则应安装驱动程序所需的所有工具。默认情况下、最新版本的Red Hat Enterprise Linux CoreTM OS (RHCOS)已安装这些工具。</block>
  <block id="ce557c2f93da665463decf7b19e61b7b" category="list-text">如果将运行RHL/Red Hat Enterprise Linux Core-OS (RHOS)的工作节点与iSCSI PVs结合使用、请在StorageClass中指定<block ref="70f68bb2f748b85de6526bfe236ea1e9" prefix=" " category="inline-code"></block>mountOption以执行实时空间回收。请参阅<block ref="65c95aeda8cb0b26307f9839dd3fefbf" category="inline-link-rx"></block>。</block>
  <block id="3992b498f2510c20f4dc0df9804e6038" category="list-text">使用Red Hat Enterprise Linux CoreTM OS (RHCOS)时、请确保<block ref="3fe4dc8de876aca2c78fa0cd9c6d0b65" prefix=" " category="inline-code"></block>已在工作节点上启用并默认启动。可以使用 OpenShift MachineConfigs 或修改点燃模板来完成此操作。</block>
  <block id="aaa0c40b2c8011bdffe750a1ba36c398" category="paragraph">使用<block ref="296026821ada2ab8aebcf13547a63df5" prefix=" " category="inline-code"></block>、<block ref="e12fdd044232e643620eed06bf33c7af" prefix=" " category="inline-code"></block>和<block ref="1ad68a6a046942b7c1666aed825df70a" prefix=" " category="inline-code"></block>，您可以指定SMB卷并提供所需的Active Directory凭据。任何具有任何/无权限的Active Directory用户/密码均可用作节点阶段密钥。</block>
  <block id="1e0e0f35966b4297310419e9023a837b" category="admonition">如果Trident从此后端配置了仍存在的卷和快照、则删除后端将阻止其配置新卷。后端将继续处于"正在删除"状态。</block>
  <block id="e441c0f153e5f2e8328aa8c2e9badf45" category="list-text">将Kube-state-metrics与Prometheus集成。编辑Prometheus配置文件<block ref="aacdd9a7e2029a243488dbd0c49c5bbb" prefix="(" category="inline-code"></block>)并添加Kube-state-metrics服务信息。例如：</block>
  <block id="ce813b4c1248ec7e0f14b08f1a037497" category="listing-title">prometheus.yaml：kube-state-metrics 服务与 Prometheus 的集成</block>
  <block id="934a401d15e7226d8cb60e2a12f28611" category="list-text">配置Prometheus以将警报路由到警报管理器。编辑Prometheus配置文件<block ref="aacdd9a7e2029a243488dbd0c49c5bbb" prefix="(" category="inline-code"></block>)并添加以下部分：</block>
  <block id="2a88bf2582239d12cc0700d3c6857519" category="listing-title">prometheus.yaml：向 Alertmanager 发送警报</block>
  <block id="ae9aa1ddb34419c7b7b7f49feba7fb45" category="paragraph">以下示例定义了备份自定义资源的状态设置为5秒或更长时间时触发的严重警报<block ref="902b0d55fddef6f8d651fe1035b7d4bd" prefix=" " category="inline-code"></block>。您可以自定义此示例以匹配您的环境、并将此YAML段包含在您的配置文件中<block ref="aacdd9a7e2029a243488dbd0c49c5bbb" prefix=" " category="inline-code"></block>：</block>
  <block id="62c242d2e7dfd83a58d8ccf60227d68f" category="listing-title">rules.yaml：定义失败备份的 Prometheus 警报</block>
  <block id="70694773feb2b23c45e7ff7a6a3c3c8b" category="paragraph">通过在文件中指定相应的配置、您可以将警报管理器配置为向其他通道发送通知、例如电子邮件、PagerDty、Microsoft团队或其他通知服务<block ref="9001eaececb0884cbeb80659e81340ad" prefix=" " category="inline-code"></block>。</block>
  <block id="965357e3c90ccf3fba01174c6508d562" category="listing-title">alertmanager.yaml：向 Slack 频道发送警报</block>
  <block id="fb72ca78c839cefc52d39ebcecaf6827" category="paragraph">卷快照支持<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> ， <block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> ， <block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ， <block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> ， <block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> ， <block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block> ， <block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block> ， 和<block ref="94594b2ccbc8e0d220ad37504461650b" prefix=" " category="inline-code"></block>司机。</block>
  <block id="173f808fc086ccd7ca8b43512be2cd48" category="admonition">这<block ref="e28ab870e47892fbd81eca8fc84c45ac" prefix=" " category="inline-code"></block>属性仅在原始属性和新属性都有效时<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>使用相同的存储后端。如果您尝试恢复到<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>如果使用不同的存储后端，则恢复操作将失败。</block>
  <block id="02c19b7bc038d2af238bbd729bc3d9c4" category="list-text">手动创建 AppVault CR 时，使用 *spec.dataMoverPasswordSecretRef* 字段指定密钥。</block>
  <block id="0a636ed0406fe1d7ddf9db59b32011b3" category="list-text">使用 Trident Protect CLI 创建 AppVault 对象时，使用<block ref="66f22eb4f5e5b0147ea7521212b07044" prefix=" " category="inline-code"></block>参数来指定秘密。</block>
  <block id="d2a7dc5804ec844f3f7bfb903e97693f" category="section-title">S3 兼容存储 IAM 权限</block>
  <block id="48f73146a4944adc8ee8fb44ba954d59" category="paragraph">当您访问与 S3 兼容的存储（例如 Amazon S3、Generic S3）时， <block ref="3d0b4c23d9ed62ec7d7cd16273ca2521" category="inline-link-rx"></block> ， 或者<block ref="3a31dfad8c316380b9a5542d694c5833" category="inline-link-rx"></block>使用 Trident 保护时，您需要确保您提供的用户凭证具有访问存储桶所需的权限。以下是一个策略示例，该策略授予使用 Trident 保护访问所需的最低权限。您可以将此策略应用于管理与 S3 兼容的存储桶策略的用户。</block>
  <block id="d9b7f314625fb7dcf35c741afe65b676" category="inline-link">Amazon S3 文档</block>
  <block id="46d663191f16f782a681e5f6702a09d4" category="list-text">对于所有 ONTAP 后端，Trident 要求至少将一个聚合分配给 SVM。</block>
  <block id="782b4a6bf31d7d564f002ed80e56a970" category="doc">数据移动器超时注释</block>
  <block id="2cf4114566459ea3b3a5ac507cb86fd9" category="paragraph">在备份和恢复操作期间，您可以使用注释<block ref="f49fa3f76b2a4fcdf04dff369d417d84" prefix=" " category="inline-code"></block>配置数据移动操作的超时时间。此注解指定数据移动器在超时前等待特定操作完成的最长时间（以秒为单位）。这在网络问题或其他因素可能导致数据移动操作停滞的情况下尤其有用。它有助于检测和处理停滞的操作，而不是为整个过程设置通用超时。例如，如果由于网络问题导致卷数据恢复没有进展，则该操作将根据指定的时长超时。</block>
  <block id="c2b7f24f4ddbaedb4e3d9e19f77eebac" category="paragraph">您可以在 YAML 文件中使用此注释，如下所示：</block>
  <block id="14a0e26cbe187a4754f8b523ffba6073" category="paragraph">在此示例中，注释失败<block ref="ec2a2895b09b6030ec8cc1b3c43ddc4d" prefix=" " category="inline-code"></block>如果恢复操作在 2 秒内没有进展，则停止操作。</block>
  <block id="c49aaf233c16f1193a8d683c17866eea" category="admonition">如果注释值小于或等于0，则操作将立即失败。</block>
  <block id="5ac5b84505fffb8149e9d0cb84ddedbe" category="admonition">在恢复操作期间，任何<block ref="890b633d48ac6398f14ae722463da08b" prefix=" " category="inline-code"></block>为虚拟机 (VM) 创建的数据不会被恢复。</block>
  <block id="4d1a32c0e466ff9011c60655b98dbf71" category="inline-link-macro">使用 Amazon EKS 插件自动为 FSx for ONTAP 配置 Trident 后端</block>
  <block id="607ed18429282657fb3f6b377df32f8c" category="inline-link-macro">NetApp Trident 与 Google Cloud NetApp Volumes 的 SMB 协议</block>
  <block id="9455e2bd0c8a4dfe041579b6feac6833" category="list-text">2025年4月15日： <block ref="1d74efb61b1c97b9032a1222a24185b1" category="inline-link-macro-rx"></block></block>
  <block id="ee031d295c711ed3119e4ca1bf2829b1" category="inline-link-macro">释放 NetApp ASA r2 系统对 Kubernetes 块存储的强大功能</block>
  <block id="9ff2ac23d0ac11c688af59d453e16970" category="list-text">2025年4月14日： <block ref="e28ddf0afaf73832b19731c7248b6de5" category="inline-link-macro-rx"></block></block>
  <block id="a3148578e6ffde89485954832ff9be37" category="paragraph">如果您未运行Trident 25.06，则可从获取以前版本的文档<block ref="6d47e9235a19453f00cf246917b9e162" category="inline-link-macro-rx"></block>。</block>
  <block id="a1862e00d8111386cdf238bd23bb97db" category="inline-link">Trident 25.02</block>
  <block id="25bdd2f6eb0ca7663bf4152396a74a09" category="list-text"><block ref="25bdd2f6eb0ca7663bf4152396a74a09" category="inline-link-rx"></block></block>
  <block id="e26bc895e5bb00237e35bd08e101a228" category="inline-link-macro">25.06</block>
  <block id="512754259e832a6faaee7e55aa2a0641" category="paragraph"><block ref="512754259e832a6faaee7e55aa2a0641" category="inline-link-macro-rx"></block></block>
  <block id="e388180fa8946253a28286d92fcbc393" category="cell">2028年6月</block>
  <block id="61a3094d46fa14bffb9067eeb8d3405a" category="paragraph"><block ref="61a3094d46fa14bffb9067eeb8d3405a" category="inline-link-macro-rx"></block></block>
  <block id="dfd4fd2ff3f0bcabea8bfd811d0db9b4" category="summary">Trident是由NetApp维护的开源存储配置程序和编排程序。通过它，您可以为 Docker 和 Kubernetes 管理的容器化应用程序创建存储卷。**阅读发行说明，了解有关升级到Trident 25.06的重要信息。**</block>
  <block id="1c14876f05b759f9c9be73a49c84ddd4" category="doc">Trident 25.06文档</block>
  <block id="7b64f90c10ba527f2f6b6f1e6fb0c9fe" category="list-text">现在、在Trident中支持Kubnetes 1.33。在升级Kubernetes之前升级Trident。</block>
  <block id="f39d8c359b3284c30097b65ae4e0dccf" category="list-text">Kubbernetes 1.27 - 1.33</block>
  <block id="d84962dc87f0a0b8de6c8bcc166c1868" category="list-text">NetApp 有限支持下的本地 FAS、AFF 或 ASA r2（iSCSI 和 NVMe/TCP）集群版本。请参阅。 <block ref="50931d770a2149cdd08c9f8b08c33f00" category="inline-link-macro-rx"></block></block>
  <block id="9f7ace1a0a4d64a8dfa14012ff8f7e8c" category="paragraph">1.27 - 1.33</block>
  <block id="006871bfbb54929c1e2b37d3ce36b37f" category="cell">v1.27.0、v1.28.0、v1.29.0、v1.30.0、v1.31.0、 v1.32.0、v1.33.0</block>
  <block id="3e711dbc16f3de48b46eca5b86572321" category="list-text">dDocker。io/NetApp/trdent：25.06.0</block>
  <block id="d010f8bd4e6cede4d3e51de4419c09aa" category="list-text">docer.io/NetApp/trdent-autostsupport：25.06</block>
  <block id="3b72fba0c67a9cb87151e878d3ba37f9" category="list-text">注册表.k8s.io/sig-storage/CsI-Attacher：v4.8.1</block>
  <block id="06489d7f99c3b214c8b9a539006a642c" category="list-text">注册表.k8s.io/sig-storage/CsI-s不同：v1.13.2</block>
  <block id="5b892dce2351df7e1f21d1004bc2cb19" category="list-text">注册表.k8s.io/sig-storage/CsI-snapshotter：v8.2.1</block>
  <block id="5647d06b79232a09c66557bdfc379908" category="list-text">dDocker .io/NetApp/trdent操作员：25.06.0 (可选)</block>
  <block id="d59cb19805caf164811cd6ff7d71da51" category="cell"><block ref="2a096ce9ce9c58c91575ae3f40daa915" prefix="" category="inline-code"></block></block>
  <block id="fcd7f4cc8a01becf1cfddb538266578c" category="cell"><block ref="f6ac10a5549303d8f00a11f375963f9b" prefix="" category="inline-code"></block></block>
  <block id="b59305925bb6ffc962ea48351db964e8" category="section-title">有关Trident 25.06的重要信息</block>
  <block id="d7ccfdca42aadc41314f5df3ed2e4cbf" category="list-text">使用<block ref="0562418e6d9a76d0dd22b2f186a2203d" prefix=" " category="inline-code"></block> 并指定部署和映像注册表位置的名称。您的 <block ref="57de9a35aeedde82408b1e047030d221" category="inline-link-macro-rx"></block> 可以位于一个注册表中、也可以位于不同的注册表中、但所有CSI图像都必须位于同一注册表中。在示例中、<block ref="5c9befb508998ce21883733ce6ab129f" prefix=" " category="inline-code"></block>是要安装的Trident版本。</block>
  <block id="9632d6ad86670e70a32c6b93e85ad9f4" category="paragraph">例如，要更改的默认值<block ref="ad42f6697b035b7580e4fef93be20b4d" prefix=" " category="inline-code"></block>，请运行以下命令，其中<block ref="5c9befb508998ce21883733ce6ab129f" prefix=" " category="inline-code"></block>是要安装的Trident版本：</block>
  <block id="b34ad03c5088f36033c20b21d9aae4c2" category="list-text">使用<block ref="0562418e6d9a76d0dd22b2f186a2203d" prefix=" " category="inline-code"></block>并指定部署名称、如以下示例所示、其中<block ref="5c9befb508998ce21883733ce6ab129f" prefix=" " category="inline-code"></block>是要安装的Trident版本。</block>
  <block id="287d9354cd0e889ca3c170f1a20060ce" category="paragraph">在中<block ref="02f3115b006f7541a477d52ea8c0f861" prefix=" " category="inline-code"></block>，更新<block ref="ff1ea91c85a440ad216d6d8dafdb2b4a" prefix=" " category="inline-code"></block> 以反映映像注册表的位置。您的 <block ref="57de9a35aeedde82408b1e047030d221" category="inline-link-macro-rx"></block> 可以位于一个注册表中、也可以位于不同的注册表中、但所有CSI图像都必须位于同一注册表中。例如：</block>
  <block id="3ce13997cacbb7668e6636ffb21ba04a" category="list-text"><block ref="a5ad704b64900183c3e85fea9edad0f0" prefix="" category="inline-code"></block> 如果您的所有映像都位于一个注册表中。</block>
  <block id="b6e3b64ea99d65462c313d10936507a1" category="list-text"><block ref="f5f5dab4b39c35c32ac8846470b513ad" prefix="" category="inline-code"></block> 如果您的三端映像与CSI映像位于不同的注册表中。</block>
  <block id="3821e533e08e97c63527fb3e1ab72017" category="list-text">使用适用于您的环境的正确捆绑包YAML文件安装Trident、其中_是 或<block ref="5a02ebff4889c2de0379a0fb10bed282" prefix=" " category="inline-code"></block>基于您的&lt;bundle.yaml&gt;<block ref="bd2cc8575fe69c7f775292759380c838" prefix=" " category="inline-code"></block>版本。例如、如果要安装Trident 25.06、请运行以下命令：</block>
  <block id="d180bc23594b2a81a598da69af7136af" category="list-text">如果您 <block ref="538f4beb16c8502421a8389e199d34ce" category="inline-link-macro-rx"></block>使用，则可以使用<block ref="9ba27131bd1269499334744b89769fac" prefix=" " category="inline-code"></block> 一步升级。如果您未添加Helm repo或无法使用它进行升级：</block>
  <block id="19edaf19feadf74a38c5b3da24fd64bd" category="list-text">使用<block ref="cd01e1bae83933b9c59c914bc71332ac" prefix=" " category="inline-code"></block> 命令、其中<block ref="c49c0910ea156a14c49e617b509b605a" prefix=" " category="inline-code"></block> 反映了要升级到的版本。</block>
  <block id="843e8c92f2887fa83e4564f86e6a7ca0" category="list-text">您可以直接升级到已安装版本的四个版本窗口中的任何目标版本。例如、您可以直接从24.06 (或任何24.06 DOT版本)升级到25.06。</block>
  <block id="d4ea8129c0158e8c6ac0b3bb00a333e5" category="list-text">如果要从四个版本窗口之外的版本进行升级、请执行多步骤升级。按照您要升级的的升级说明升级到适合四个版本窗口的 <block ref="a799aa6eaf3a5192b34ea19f24bb716f" category="inline-link-macro-rx"></block> 最新版本。例如、如果您运行的是23.07并希望升级到25.06：</block>
  <block id="96643a0b653f3484db440bd905d8e591" category="list-text">首次从23.07升级到24.06。</block>
  <block id="0d5f6bd4062e1e564fa83bfc5eb6a64c" category="list-text">然后从24.06升级到25.06。</block>
  <block id="bc08c4a5eed12311fe8187fb000dd58a" category="paragraph">有关 Amazon S3 策略的更多信息，请参阅<block ref="61017e44ea21b481e69f04f8ac510768" category="inline-link-rx"></block> 。</block>
  <block id="2508b93e69f47b3a094284dbdc9a09de" category="list-text">（可选）添加包含或排除标有特定标签的资源的过滤：</block>
  <block id="b4d332d25d8164d8387707934254781d" category="admonition">当两者<block ref="a25777d0a6883efb33950a7cd7a8f9b9" prefix=" " category="inline-code"></block>和<block ref="2021b5ec814a388ca04af6c6d6c2d16f" prefix=" " category="inline-code"></block>被使用， <block ref="a25777d0a6883efb33950a7cd7a8f9b9" prefix=" " category="inline-code"></block>首先运行，然后<block ref="2021b5ec814a388ca04af6c6d6c2d16f" prefix=" " category="inline-code"></block>应用于结果资源。</block>
  <block id="6b556cca1436ef5909ccaa59f5aae989" category="paragraph">您可以使用<block ref="e80c5db95c437e3b5acee80112bd1f1a" prefix=" " category="inline-code"></block>和<block ref="484f02b530e920abf065e3f27b7a6d80" prefix=" " category="inline-code"></block>用于包含或排除资源的标志<block ref="303a9ae359153efd5b4c1067cd875175" prefix=" " category="inline-code"></block>例如组、种类、版本、标签、名称和命名空间，如下例所示：</block>
  <block id="13001655f60b86601d45076ffb7e8cb4" category="list-text">*spec.snapshotRef*：（可选）：用作备份源的快照的名称。如果不提供此参数、则会创建和备份临时快照。</block>
  <block id="ba2af206b00fb98d583a5fe7908af2cc" category="list-text">*metadata.annotations.protect.trident.netapp.io/full-backup*：（可选）此注释用于指定备份是否应该是非增量的。默认情况下、所有备份均为增量备份。但是，如果此标注设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>，则备份将变为非增量备份。如果未指定、则备份将采用默认增量备份设置。最佳做法是、定期执行完整备份、然后在两次完整备份之间执行增量备份、以最大程度地降低与还原相关的风险。</block>
  <block id="93b1107cde6ba041513cd9ccf7b4bae0" category="paragraph">您可以选择使用<block ref="53f5240b338c91a0568f15e2562a35de" prefix=" " category="inline-code"></block>标志来指定备份是否应为非增量备份。默认情况下、所有备份均为增量备份。使用此标志时、备份将变为非增量备份。最佳做法是、定期执行完整备份、然后在两次完整备份之间执行增量备份、以最大程度地降低与还原相关的风险。</block>
  <block id="99cd57e28c97c0577c8e6d701de91b88" category="section-title">创建备份计划</block>
  <block id="46773fe21c0cf6451e8de9f6a18da51f" category="paragraph">您可以计划非增量完整备份。默认情况下、所有备份均为增量备份。定期执行完整备份以及其间的增量备份有助于降低与还原相关的风险。</block>
  <block id="2c26e9a03dd91b6eafe57094f8245ad8" category="list-text">创建自定义资源(CR)文件并将其命名为<block ref="cb18a3ae8903eb525dd256cfa3d4576e" prefix=" " category="inline-code"></block>。</block>
  <block id="1770a13eba6600496a86d2f1cf357813" category="list-text">*。metadata.annotations.protect.trident.netapp.io/full-backup-rule*:(_可 选_)此标注用于指定计划完整备份的规则。您可以将其设置为以实现持续完整备份、也可以<block ref="f9f90eeaf400d228facde6bc48da5cfb" prefix=" " category="inline-code"></block>根据需要对其进行自定义。例如、如果您选择每日粒度、则可以指定应在哪些工作日进行完整备份。</block>
  <block id="9355f48a9876fcaefe0351294df4e05c" category="list-text">使用正确的值填充文件后<block ref="cb18a3ae8903eb525dd256cfa3d4576e" prefix=" " category="inline-code"></block> 、应用CR：</block>
  <block id="1bd9850ddb901f0e741293ec737c5de6" category="list-text">创建备份计划、将括号中的值替换为您环境中的信息。例如：</block>
  <block id="ab5807fb06fd654f730a4ed5a02bb950" category="paragraph">您可以将此标志设置为<block ref="f9f90eeaf400d228facde6bc48da5cfb" prefix=" " category="inline-code"></block>以实现持续完整备份、也可以<block ref="61df7cc86eb24ab1300f0e74e74bb50c" prefix=" " category="inline-code"></block>根据需要对其进行自定义。例如、如果您选择每日粒度、则可以指定应在哪些工作日进行完整备份。例如、使用<block ref="d416cce9d6bcb838c8958b9fbb84dffa" prefix=" " category="inline-code"></block>计划在星期一和星期四进行完整备份。</block>
  <block id="396e0c641a3eb6083fa0ba7badcff8ac" category="admonition">确保回收策略设置为<block ref="f2a6c498fb90ee345d997f888fce3b18" prefix=" " category="inline-code"></block>从对象存储中删除所有备份数据。该策略的默认设置是<block ref="afece4245269582cb2f1009d4fb52047" prefix=" " category="inline-code"></block>以避免意外数据丢失。如果政策没有改变<block ref="f2a6c498fb90ee345d997f888fce3b18" prefix=" " category="inline-code"></block> ，备份数据将保留在对象存储中，需要手动删除。</block>
  <block id="28b0a2e1fa7af6d4a2a83bc61c130c0f" category="list-text">确保连接到集群的 NetApp 存储使用 Trident 24.02 或更新版本（建议使用 Trident 24.10）。</block>
  <block id="089456655f37605dd109f3d8c7ece010" category="list-text">*NetApp Trident*：NetApp Trident 必须存在于使用 ONTAP 作为后端的源 Kubernetes 集群和目标 Kubernetes 集群上。Trident Protect支持使用以下驱动程序支持的存储类通过NetApp SnapMirror技术进行复制：</block>
  <block id="070b998f5495f2da2fb3ac5053772d1e" category="list-text"><block ref="8321592ce24c8a122ecf26a63cfca407" prefix="" category="inline-code"></block> ：NFS</block>
  <block id="48af35aa41f6c14dcd31a429e161cd45" category="list-text"><block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix="" category="inline-code"></block> ：iSCSI</block>
  <block id="af09466318992e13530265625ea96e63" category="list-text"><block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix="" category="inline-code"></block> ：足球俱乐部</block>
  <block id="53b96f55224c3a6f51becdf09ad8ffe6" category="list-text"><block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix="" category="inline-code"></block> ：NVMe/TCP（要求最低 ONTAP 版本 9.15.1）</block>
  <block id="a167444fdea2847400372052380975f2" category="inline-link-macro">ONTAP One附带的许可证</block>
  <block id="e25ea621e214708b88885c09ed9b5b9b" category="paragraph">从ONTAP 9.10.1开始、所有许可证均以NetApp许可证文件(NLG)的形式提供、NLG是一个支持多项功能的文件。有关详细信息、请参见 <block ref="99e347051ec17074ee747e0bde509d7d" category="inline-link-macro-rx"></block> 。</block>
  <block id="afafd0e230868b7ce6a0a4fcf57ee6d2" category="admonition">仅支持 SnapMirror 异步保护。</block>
  <block id="39741179a069c04c2421056e0f2b56fa" category="list-text">*NetApp Trident 和 SVM*：对等远程 SVM 必须可供目标集群上的 NetApp Trident 使用。</block>
  <block id="961ce5b35a999d2dc3f7e386f74eb614" category="list-text">对于 qtree 卷，支持从备份还原到其他命名空间或原始命名空间。但是，对于 qtree 卷，不支持从快照还原到其他命名空间或原始命名空间。</block>
  <block id="ffbfa7c1456b1cb991affd8a76d54fd1" category="section-title">支持的注释</block>
  <block id="738d4e5947ef1239f584cd47619cf356" category="paragraph">本节列出了系统中支持配置各种行为的注解。如果用户未明确设置注解，系统将使用默认值。</block>
  <block id="f49fa3f76b2a4fcdf04dff369d417d84" category="cell">protected.trident.netapp.io/data-mover-timeout-sec</block>
  <block id="a666ad37acca2b6a0ee400d7b2acf088" category="cell">允许数据移动设备操作停止的最长时间（以秒为单位）。</block>
  <block id="94f6d7e04a4d452035300f18b984988c" category="cell">300</block>
  <block id="3b2f6f0bb673ee02e8aafe624e2e971f" category="cell">protected.trident.netapp.io/kopia-content-cache-size-limit-mb</block>
  <block id="157db7df530023575515d366c9b672e8" category="cell">整数</block>
  <block id="f044e4dc5e5fdde631180451c25a973c" category="cell">Kopia 内容缓存的最大大小限制（以兆字节为单位）。</block>
  <block id="a9b7ba70783b617e9998dc4dd82eb3c5" category="cell">1000</block>
  <block id="0ae48837f8ebc5da6e90828852d02027" category="admonition">25.06 及更高版本不需要此步骤。</block>
  <block id="ed98e5c2a168d1606df0370fe371df28" category="paragraph">从版本 24.10 升级时，升级期间运行的快照可能会失败。此失败不会阻止将来创建快照（无论是手动快照还是计划快照）。如果升级期间快照失败，您可以手动创建新快照以确保应用程序受到保护。</block>
  <block id="756accba0f305693c47126f932bd7ac6" category="paragraph">为避免潜在的故障，您可以在升级前禁用所有快照计划，然后在升级后重新启用。但是，这会导致升级期间丢失所有计划的快照。</block>
  <block id="8e903b2b577c535f6f70248f34e61228" category="list-text">运行此命令将 CRD 的管理从<block ref="23901a54edbcff97a89483ac3112545c" prefix=" " category="inline-code"></block>到<block ref="9a82c7a4099124e5bfaa83e7c5997bd4" prefix=" " category="inline-code"></block> ：</block>
  <block id="da4df818678014568aed9623276fd9f5" category="list-text">运行此命令删除<block ref="23901a54edbcff97a89483ac3112545c" prefix=" " category="inline-code"></block>图表：</block>
  <block id="aeea10a9d4e3d29e20b749a201f0ae46" category="admonition">不要卸载<block ref="23901a54edbcff97a89483ac3112545c" prefix=" " category="inline-code"></block>图表使用 Helm，因为这可能会删除您的 CRD 和任何相关数据。</block>
  <block id="685db7ca1bcc71c55d1592c71e464158" category="section-title">故障转移和反向操作期间的执行挂钩</block>
  <block id="bfc5a6b94bc23ccc51c85a2aa1cb71b4" category="paragraph">当使用 AppMirror 关系保护您的应用程序时，您应该在故障转移和反转操作期间注意与执行挂钩相关的特定行为。</block>
  <block id="3d11bc959173dddd2997400e7bdf4d67" category="list-text">在故障转移期间，执行挂钩会自动从源集群复制到目标集群。您无需手动重新创建它们。故障转移后，执行挂钩仍存在于应用程序中，并将在任何相关操作期间执行。</block>
  <block id="ba9dd6212c2e02686051fbf28e548584" category="list-text">在反向同步或反向重新同步期间，应用程序上所有现有的执行钩子都将被移除。当源应用程序成为目标应用程序时，这些执行钩子将失效，并会被删除以阻止其执行。</block>
  <block id="98b9f287abe5860abcc3ab5364313188" category="paragraph">要了解有关执行钩子的更多信息，请参阅<block ref="d0f7adc5528355d3ba6ac91271095c29" category="inline-link-macro-rx"></block> 。</block>
  <block id="f815c45e5a618fe75ef3a716b30b711d" category="list-text">或者，在源集群上，拍摄源应用程序的快照。此快照将用作目标集群上应用程序的基础。如果跳过此步骤、则需要等待运行下一个计划快照、以便获得最新快照。</block>
  <block id="9399bd959f53d5a7d8671b597df92df2" category="paragraph">除了下面提供的计划外，建议创建一个单独的每日快照计划，保留期为 7 天，以便在对等 ONTAP 集群之间维护通用快照。这可确保快照最多可用 7 天，但保留期可根据用户需求自定义。</block>
  <block id="bd8250ba3a5ac73f1ca0ba8c92937c5a" category="paragraph">如果发生故障转移，系统可以使用这些快照最多 7 天进行反向操作。这种方法使反向过程更快、更高效，因为只会传输自上次快照以来所做的更改，而不是所有数据。</block>
  <block id="af22b57fbc1d302d6a0b83cb06ce9e6a" category="paragraph">如果应用程序的现有计划已经满足所需的保留要求，则不需要额外的计划。</block>
  <block id="84caf200e79d5962bc7f3516e9ad328c" category="open-title">使用CR创建快照</block>
  <block id="3feb4a62c8b59cd52ae22845d363c901" category="open-title">使用命令行界面创建快照</block>
  <block id="e995d56efd9e31d97825dd79be4d1383" category="inline-link-macro">了解ASA R2存储系统</block>
  <block id="19bf8687ff63071d6f6661c290cba7c2" category="admonition">ASA r2 系统不支持 LUKS 加密。有关 ASA r2 系统的信息，请参阅<block ref="40f055dd42976ff294174231df35e37e" category="inline-link-macro-rx"></block> 。</block>
  <block id="8e1b080c70f6bd5a6a7f2755f82fb95b" category="paragraph">NetApp Trident 支持使用<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> ， <block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ， <block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> ， 和<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block>存储驱动程序。使用或<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>驱动程序时<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>、不支持克隆。从现有卷创建新卷将创建新快照。</block>
  <block id="9470f4768dd90ef0be0fb76cb2f6e04b" category="admonition">避免克隆与其他 StorageClass 关联的 PVC。请在同一 StorageClass 内执行克隆操作，以确保兼容性并防止出现意外行为。</block>
  <block id="0f3fb6e27b9de1539a220130039ade03" category="admonition">VolumeSnapshot 的生命周期与源 PVC 无关：即使源 PVC 被删除，快照仍然存在。删除具有关联快照的 PVC 时， Trident 会将此 PVC 的后备卷标记为 " 正在删除 " 状态，但不会将其完全删除。删除所有关联快照后，卷将被删除。</block>
  <block id="24cf288d698c32f6be78d78ed4ae2da4" category="section-title">Kubbernetes<block ref="b05416d74805ad470e82fbd185a80f60" prefix=" " category="inline-code"></block>对象</block>
  <block id="03925a5c554c5613d08fccbd8b32b9f8" category="paragraph">Kubbernetes<block ref="b05416d74805ad470e82fbd185a80f60" prefix=" " category="inline-code"></block>对象类似于<block ref="19476662cd814e0aa085eca121de89b8" prefix=" " category="inline-code"></block>。它们有助于定义多种存储类别，并被卷组快照引用，以将快照与所需的快照类别关联。每个卷组快照都与单个卷组快照类别相关联。</block>
  <block id="fff4777b7ca5b9c8c8cf5e2bcba4f07c" category="paragraph">一个<block ref="b05416d74805ad470e82fbd185a80f60" prefix=" " category="inline-code"></block>应由管理员定义，以便创建快照组。卷组快照类使用以下定义创建：</block>
  <block id="8245adeb076e6d9db9f6ac77dfb4c7e3" category="paragraph">由 Trident 处理。<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>指定必须删除组快照时要采取的操作。当<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>设置为<block ref="f2a6c498fb90ee345d997f888fce3b18" prefix=" " category="inline-code"></block> ，删除快照时，卷组快照对象以及存储集群上的底层快照也将被删除。或者、将其设置为<block ref="afece4245269582cb2f1009d4fb52047" prefix=" " category="inline-code"></block>表示将<block ref="4a238bd658ede8bc190a54f7df8c3483" prefix=" " category="inline-code"></block>保留和物理快照。</block>
  <block id="0eb0a72ef062acee4c89d5b3ff32da7f" category="section-title">Kubbernetes<block ref="7afb2b9a0abcf6292858fe2f3450e700" prefix=" " category="inline-code"></block>对象</block>
  <block id="94d3b435d2b11531835e041026e7588f" category="paragraph">Kubernetes <block ref="7afb2b9a0abcf6292858fe2f3450e700" prefix=" " category="inline-code"></block>对象是创建多个卷快照的请求。正如 PVC 代表用户对卷的请求一样，卷组快照是用户为现有 PVC 创建快照的请求。</block>
  <block id="317c0b5a54de9fa8dd62802a550228c3" category="paragraph">当卷组快照请求到达时，Trident 会自动管理后端卷的组快照的创建，并通过创建唯一的<block ref="4a238bd658ede8bc190a54f7df8c3483" prefix=" " category="inline-code"></block>目的。您可以从现有 PVC 创建快照，并在创建新 PVC 时将这些快照用作 DataSource 。</block>
  <block id="3edcdec1ed853ba69f1224c7c43702c5" category="admonition">VolumeGroupSnapshot 的生命周期与源 PVC 无关：即使源 PVC 被删除，快照仍然有效。删除具有关联快照的 PVC 时， Trident 会将此 PVC 的后备卷标记为 " 正在删除 " 状态，但不会将其完全删除。当所有关联的快照都被删除时，卷组快照也会被移除。</block>
  <block id="8ea50d112474393280399a928479890a" category="section-title">Kubbernetes<block ref="4a238bd658ede8bc190a54f7df8c3483" prefix=" " category="inline-code"></block>对象</block>
  <block id="bf0839da8b1efda893b043a219a1630e" category="paragraph">Kubernetes <block ref="4a238bd658ede8bc190a54f7df8c3483" prefix=" " category="inline-code"></block>对象表示从已配置的卷中获取的组快照。它类似于<block ref="858e55ea2e6429120a862313c50a9f5f" prefix=" " category="inline-code"></block>、表示存储集群上已配置的快照。与和<block ref="858e55ea2e6429120a862313c50a9f5f" prefix=" " category="inline-code"></block>对象类似<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>、创建快照时、<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>对象会与请求创建快照的对象保持一对一映射<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block>。</block>
  <block id="85cb66a45776909e333f8847ee91255d" category="paragraph">这<block ref="4a238bd658ede8bc190a54f7df8c3483" prefix=" " category="inline-code"></block>对象包含识别快照组的详细信息，例如<block ref="e8dbdd2405d28658285ebd383044be1a" prefix=" " category="inline-code"></block>以及存储系统上现有的各个volumeSnapshotHandles。</block>
  <block id="a4314d759b2ba28d3d385366f2595052" category="paragraph">当快照请求到达时，Trident 会在后端创建卷组快照。创建卷组快照后，Trident 会配置一个<block ref="4a238bd658ede8bc190a54f7df8c3483" prefix=" " category="inline-code"></block>对象，从而将快照公开给 Kubernetes API。</block>
  <block id="fc679dfce4052095eac6de2f7f86cd16" category="paragraph">发行说明提供有关 NetApp Trident 最新版本中的新功能、增强功能和错误修复的信息。</block>
  <block id="d8789e2b2a964b430285afd098847d7e" category="section-title">25.06中的新增功能</block>
  <block id="08f1535b065719df5968364b00b95026" category="paragraph">新功能摘要提供了有关 Trident 和 Trident 保护版本的增强、修复和弃用的详细信息。</block>
  <block id="b73e3aa94514d51e32ca4c9fa306ce1e" category="inline-link-macro">使用卷组快照</block>
  <block id="d5bb517310bc551b239857e32401ac1f" category="inline-link-macro">启用安全 SMB</block>
  <block id="6bcdf917188bd0a976b410952a796d4b" category="list-text">增强 Trident 节点并发性，以提高 iSCSI 卷节点操作的可扩展性。</block>
  <block id="03384ffa27aceef186890eaae584f3c4" category="list-text">额外<block ref="b5073479eb6368548b299ea4d08aa8b7" prefix=" " category="inline-code"></block>打开 LUKS 卷时允许丢弃/TRIM 命令以回收空间。</block>
  <block id="f216940dceac21552e55089b0f450059" category="list-text">格式化 LUKS 加密卷时的性能增强。</block>
  <block id="aca9eafb022610d731f3f94197f227fd" category="list-text">增强了对失败但部分格式化的 LUKS 设备的 LUKS 清理。</block>
  <block id="fdba6fb56d2b6fb4d3d2af782f7f8e33" category="list-text">增强了 Trident 节点幂等性，用于 NVMe 卷的连接和分离。</block>
  <block id="ab129514c6ec5bf9326f9283a0c4b73d" category="list-text">额外<block ref="93e2011fcb40991e51f3f8427fdcfb82" prefix=" " category="inline-code"></block>字段到 ONTAP-SAN-Economy 驱动程序的 Trident 卷配置。</block>
  <block id="78eb403f568b0e64b07699199ebc4992" category="admonition">不适用于生产环境。</block>
  <block id="3dd4403c2b5ea69ecfbe030e29eee853" category="list-text">[技术预览] 通过以下方式启用并发 Trident 控制器操作<block ref="663f61c1cf47f8a531c8d769e8bf59f4" prefix=" " category="inline-code"></block>功能标志。这允许控制器操作并行运行，从而提高繁忙或大型环境中的性能。</block>
  <block id="8a54b5275af086a6a2bb3983856d3f56" category="admonition">此功能尚处于实验阶段，目前支持使用 ONTAP-SAN 驱动程序（iSCSI 和 FCP 协议）的有限并行工作流程。</block>
  <block id="969ab4db9d9d63b4573cc75a0b550b21" category="list-text">[技术预览] 使用 ANF 驱动程序添加了手动 QOS 支持。</block>
  <block id="fa420d9ecbb50720fc93ab14f7943b42" category="list-text">修复了 CSI NodeExpandVolume 的问题，当底层 SCSI 磁盘不可用时，多路径设备可能会出现大小不一致的情况。</block>
  <block id="69e0fec3be54a3b91103c8c7b788339f" category="list-text">修复了无法清理 ONTAP-NAS 和 ONTAP-NAS-Economy 驱动程序的重复导出策略的问题。</block>
  <block id="6e02211c85412fa0d990bce8af9e671f" category="list-text">修复了 GCNV 卷默认为 NFSv3 的问题<block ref="e477739f39dbd2f1e1c5268912135e92" prefix=" " category="inline-code"></block>未设置；现在 NFSv3 和 NFSv4 协议均受支持。如果<block ref="e477739f39dbd2f1e1c5268912135e92" prefix=" " category="inline-code"></block>如果未提供，则将使用主机的默认 NFS 版本（NFSv3 或 NFSv4）。</block>
  <block id="aaa014969ef27003313b67f83fe7091d" category="inline-link-macro">问题描述#831</block>
  <block id="cd620e798a4bbf9171d504843ebb70d0" category="list-text">修复了使用 Kustomize 安装 Trident 时出现的部署问题（ <block ref="ae3bb668f87d2aa74a2bfe43dedc0001" category="inline-link-macro-rx"></block> ）。</block>
  <block id="81a9708305846c55b26ba31f647ab071" category="inline-link-macro">问题描述#1016</block>
  <block id="11cdedcfa10c010ee258407d4a2535c9" category="list-text">修复了从快照创建的 PVC 缺少导出策略的问题（ <block ref="dfbabc79dc25039e80d49a5ce74702bc" category="inline-link-macro-rx"></block> ）。</block>
  <block id="1e655d3e31833883db169632edf4c07d" category="list-text">修复了 ANF 卷大小未自动与 1 GiB 增量对齐的问题。</block>
  <block id="c2c862a452feb157ea36fc61c62cb6d5" category="list-text">修复了将 NFSv3 与 Bottlerocket 结合使用时的问题。</block>
  <block id="d3c869af5d0f4ee5e35def393587ffea" category="inline-link-macro">问题描述#1008</block>
  <block id="21a4addc7283b0fef748a52987809884" category="list-text">修复使用 SolidFire 后端克隆卷时出现超时的问题（ <block ref="ff387119bc332768d9a3831513d005d5" category="inline-link-macro-rx"></block> ）。</block>
  <block id="1d85be817e7793c5b5423dbe7a618b9b" category="list-text">修复了 ONTAP-NAS-Economy 卷尽管调整大小失败但仍可扩展至 300 TB 的问题。</block>
  <block id="9bfdfc993711fd8c92649ae6040af106" category="list-text">修复了使用 ONTAP REST API 时克隆拆分操作同步完成的问题。</block>
  <block id="d7061136425214e6ed7ba38910be5772" category="section-title">弃用：</block>
  <block id="eb0a31990fe8d3afbb4177136e0a9c3b" category="list-text">*Kubernetes*：将最低支持的 Kubernetes 更新至 v1.27。</block>
  <block id="df6370ee6ad8bc05b4c28dc223a119ea" category="list-text">改善了恢复时间，提供了进行更频繁的完整备份的选项。</block>
  <block id="6d133839389fad9d044a57e7cd98852e" category="list-text">通过 Group-Version-Kind (GVK) 过滤提高了应用程序定义和选择性恢复的粒度。</block>
  <block id="d22659d02ebeb222423ac210fcf66e17" category="list-text">将 AppMirrorRelationship (AMR) 与 NetApp SnapMirror 结合使用时可实现高效的重新同步和反向复制，以避免完整的 PVC 复制。</block>
  <block id="9f36be3db329921235443aaf292d3420" category="list-text">增加了使用 EKS Pod Identity 创建 AppVault 存储桶的功能，无需使用 EKS 集群的存储桶凭证指定机密。</block>
  <block id="608712f29e31abc332f5d43892969412" category="list-text">如果需要，添加了在恢复命名空间中跳过恢复标签和注释的功能。</block>
  <block id="6d520f4b800d8a65184cb0662edd01eb" category="list-text">AppMirrorRelationship (AMR) 现在将检查源 PVC 扩展并根据需要对目标 PVC 执行适当的扩展。</block>
  <block id="68782d548164f602a09d8cf18a70a1a6" category="list-text">修复了先前快照的快照注释值被应用到新快照的错误。现在所有快照注释均已正确应用。</block>
  <block id="dec377bcea0a22bcf50bcfa52f5bd102" category="list-text">如果未定义，则默认定义数据移动器加密（Kopia / Restic）的秘密。</block>
  <block id="2b587d6f0a98259d243f20158ba733b9" category="list-text">为 S3 appvault 创建添加了改进的验证和错误消息。</block>
  <block id="38ada36ef84c3af0ce6c4562c412938e" category="list-text">AppMirrorRelationship (AMR) 现在仅复制处于 Bound 状态的 PV，以避免尝试失败。</block>
  <block id="e06ab528ad98b563963e366c18280c8d" category="list-text">修复了在具有大量备份的 AppVault 上获取 AppVaultContent 时显示错误的问题。</block>
  <block id="8009158785ac016dca3550bd3aadcf47" category="list-text">KubeVirt VMSnapshots 被排除在恢复和故障转移操作之外，以避免故障。</block>
  <block id="96c54179d89a7223d86e09ea0181939b" category="list-text">修复了 Kopia 的问题：由于 Kopia 默认保留计划覆盖了用户在计划中设置的计划，导致快照被过早删除。</block>
  <block id="ccc6e323e1b274244c3180ae807ca261" category="section-title">25.02.1 中的变化</block>
  <block id="09d5dcc1026143b7c8b97aead4ec1396" category="cell">如果使用量超过此百分比，则配置失败。*不适用于 Amazon FSx for ONTAP*。</block>
  <block id="6830d19c259617eba954cda2aa1d541d" category="cell"><block ref="c860a3f92e27bd5d0798ef97b9454101" prefix="" category="inline-code"></block></block>
  <block id="3c26595dc5f4e2d90bc81b000429b6a7" category="cell">具有 SMB 共享完全访问权限的 Active Directory 管理员用户或用户组。使用此参数可为 SMB 共享提供具有完全控制权的管理员权限。</block>
  <block id="007eb2831357fc17158f683f6dcff454" category="section-title">安全 SMB 示例</block>
  <block id="d31bd17463bbf5861b916a74d031385b" category="section-title">使用 ontap-nas 驱动程序的后端配置</block>
  <block id="0f4ec0551cca9ca01494fc00becd7670" category="section-title">使用 ontap-nas-economy 驱动程序的后端配置</block>
  <block id="423fe93aaec50040bb6be02e84f7efdf" category="section-title">具有存储池的后端配置</block>
  <block id="932c29a089501176987cc43435fb9490" category="section-title">采用 ontap-nas 驱动程序的存储类示例</block>
  <block id="6710620e6b99c9d38a3eae8738824721" category="admonition">确保添加<block ref="4ab6864fc58ecd8b598ee10dfe2ac311" prefix=" " category="inline-code"></block>启用安全 SMB。如果没有注释，安全 SMB 就无法工作，无论后端或 PVC 中设置了什么配置。</block>
  <block id="df600c813a46f3b822f7e5f064845591" category="section-title">采用 ontap-nas-economy 驱动程序的存储类示例</block>
  <block id="14026c1ce10412c2adbe88758af8fecd" category="section-title">具有单个 AD 用户的 PVC 示例</block>
  <block id="6588dbd33e470b3f0858ad0b7d2075c2" category="section-title">具有多个 AD 用户的 PVC 示例</block>
  <block id="353061699a2e052736b77ea68a2871e3" category="paragraph">从 25.06 版本开始，NetApp Trident 支持使用以下方式创建的 SMB 卷的安全配置<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>和<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>后端。启用安全 SMB 后，您可以使用访问控制列表 (ACL) 为 Active Directory (AD) 用户和用户组提供对 SMB 共享的受控访问。</block>
  <block id="fad725216d945a6443f15949ae73b316" category="list-title">需要记住的要点</block>
  <block id="fc531b442f38e267ff561d8bd20a3d71" category="list-text">输入<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>不支持卷。</block>
  <block id="ae588b4a9791f58d2c577c52692f45d9" category="list-text">仅支持只读克隆<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>卷。</block>
  <block id="250a0cf82016b0cf28e3072852df48ed" category="list-text">如果启用了安全 SMB，Trident 将忽略后端提到的 SMB 共享。</block>
  <block id="87275c5e346f7178346f0399a6ceb9de" category="list-text">更新 PVC 注释、存储类注释和后端字段不会更新 SMB 共享 ACL。</block>
  <block id="972efd467b8594821be7b5680a32c911" category="list-text">克隆 PVC 注释中指定的 SMB 共享 ACL 将优先于源 PVC 中的 ACL。</block>
  <block id="a3a338c1a9eb99aaf1ddaad940b0c906" category="list-text">启用安全 SMB 时，请确保提供有效的 AD 用户。无效用户将不会被添加到 ACL。</block>
  <block id="4dcf9ab5a157e5be3f0891588273273e" category="list-text">如果您在后端、存储类和 PVC 中为同一个 AD 用户提供不同的权限，则权限优先级为：PVC、存储类、后端。</block>
  <block id="e56268d5a3bb9869b9e76613edc53128" category="list-text">安全 SMB 支持<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>托管卷导入，不适用于非托管卷导入。</block>
  <block id="315910c69a0b41f8011b0ed2cbf00430" category="list-text">在 TridentBackendConfig 中指定 adAdminUser，如以下示例所示：</block>
  <block id="73f6ef8943a1983b789b024c7bfecf20" category="list-text">在存储类中添加注释。</block>
  <block id="f89369f9c30ff9c8236b833fb1b96aef" category="paragraph">添加<block ref="b85be3102972ffc22dfe9101b510b6f3" prefix=" " category="inline-code"></block>注释到存储类，以启用安全 SMB 而不会失败。为注释指定的用户值<block ref="b85be3102972ffc22dfe9101b510b6f3" prefix=" " category="inline-code"></block>应该与<block ref="e47a193687dde960f6b6f80d394142a3" prefix=" " category="inline-code"></block>秘密。您可以选择以下之一<block ref="5fd754a88e37f6a57427226bb237f59b" prefix=" " category="inline-code"></block> ： <block ref="f28185d762af16471070289c69f72331" prefix=" " category="inline-code"></block> ， <block ref="eb399bcaca686f8609137153307eecf1" prefix=" " category="inline-code"></block> ， 或者<block ref="ecae13117d6f0584c25a9da6c8f8415e" prefix=" " category="inline-code"></block> 。默认权限是<block ref="f28185d762af16471070289c69f72331" prefix=" " category="inline-code"></block> 。</block>
  <block id="79731e026bd64a3983c4d0a2b46c0516" category="list-text">创建 PVC。</block>
  <block id="151c5a9798f5c6d94a52ac5bce7f9436" category="paragraph">以下示例创建 PVC：</block>
  <block id="fde1abb5537b55c34521d414267b3f70" category="inline-link-macro">ASA r2系统</block>
  <block id="3cc22aeaf9742834647a32871fcf9142" category="inline-link-macro">详细了解 ASA r2 系统与其他 ONTAP 系统之间的差异</block>
  <block id="1fb5039067c7374148ef72425e995a96" category="paragraph"><block ref="9f40590ca1185cea7261c2a60fc922ea" category="inline-link-macro-rx"></block>与其他 ONTAP 系统（ASA、AFF 和 FAS）在存储层实现方面有所不同。这些差异会影响某些参数的使用，具体如下。<block ref="54401c26bff345016bccb2761388f645" category="inline-link-macro-rx"></block>(英文)</block>
  <block id="e6a4a47ba933fc66b26212913912ce7d" category="admonition">只有<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ASA r2 系统支持驱动程序（带有 iSCSI 和 NVMe/TCP 协议）。</block>
  <block id="c8863c7edb3430d82345fb2d429904cc" category="paragraph">在 Trident 后端配置中，您无需指定系统是 ASA r2。当您选择<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>作为<block ref="d45aebe724c55b101f2ae8924ba3d486" prefix=" " category="inline-code"></block> Trident 会自动检测 ASA r2 或传统 ONTAP 系统。某些后端配置参数不适用于 ASA r2 系统，如下表所示。</block>
  <block id="ad622c65f52f8bde8780fec7bcab74a6" category="cell">使用CHAP对iSCSI的ONTAP SAN驱动程序进行身份验证[布尔值]。将设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>、以便Trident配置双向CHAP并将其用作后端中给定SVM的默认身份验证。有关详细信息、请参见 <block ref="866e591dc2a03ecc454dad25a664ca86" category="inline-link-macro-rx"></block> 。*不支持 FCP 或 NVMe/TCP。*</block>
  <block id="8ecd39a3ee998e2e8b3b033dc8756c23" category="paragraph">*不要指定 ASA r2 系统*。</block>
  <block id="e35a87c3115267331b4387f1e07a5e0a" category="cell">如果使用量超过此百分比，则配置失败。如果您使用的是Amazon FSx for NetApp ONTAP后端，请勿指定<block ref="d57551b1efacf8a7be84b4d10c5a6e99" prefix=" " category="inline-code"></block>。提供的和<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>不包含使用Trident检索聚合使用情况并对其进行限制所需的<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block>权限。*不要指定 ASA r2 系统*。</block>
  <block id="fa4a1e6f7dd5c3ffb5522180ccb46f82" category="cell">用于使用 ONTAP REST API 的布尔参数。<block ref="14d839191d1ecf387a15b5b0c802a8ae" prefix=" " category="inline-code"></block>设置为时<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>，Trident使用ONTAP REST API与后端通信；设置为时<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>，Trident使用ONTAPI (ZAPI)调用与后端通信。此功能需要使用ONTAP 9.11.1及更高版本。此外、使用的ONTAP登录角色必须有权访问<block ref="045ed0306c61104cb0777ccd31ce648b" prefix=" " category="inline-code"></block> 应用程序。预定义的和角色可以满足这一<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block> 要求<block ref="fdb6ba311fad29ec53069808f10ebef4" prefix=" " category="inline-code"></block> 。从Trident 24.06版和9.15.1 9.151或更高版本开始、默认情况下会<block ref="14d839191d1ecf387a15b5b0c802a8ae" prefix=" " category="inline-code"></block>设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>；更<block ref="14d839191d1ecf387a15b5b0c802a8ae" prefix=" " category="inline-code"></block>改为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>以使用ONTAPI (ZAPI)调用。<block ref="14d839191d1ecf387a15b5b0c802a8ae" prefix=" " category="inline-code"></block> 完全符合NVMe/TCP要求。*如果指定，则始终设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>适用于 ASA r2 系统*。</block>
  <block id="3964653e783e46fb3a1ae3dc4aaa54ad" category="paragraph">*支持<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>带有 iSCSI 协议的驱动程序。**此外，在使用 iSCSI 和 NVMe/TCP 协议时，支持 ASA r2 系统。*</block>
  <block id="bf1a2c4f1b2b258c38cce886d156e3c6" category="cell">"true" *如果指定，则设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>适用于 ASA r2 系统*。</block>
  <block id="4ff68efad333313447b8808c20a63224" category="cell">空间预留模式；"无"(精简)或"卷"(厚)。*设置为<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block>适用于 ASA r2* 系统。</block>
  <block id="d5ff78b8f84bf2feac9559d3c4a5d31c" category="cell">要使用的Snapshot策略。*设置为<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block>适用于 ASA r2 系统*。</block>
  <block id="a75bcbe76d1f50305372e9c85d59b73c" category="cell">为快照预留的卷百分比。*不要为 ASA r2 系统指定*。</block>
  <block id="c2ae626eaa4dcf2be1d158758d5f789a" category="cell">“false” *如果指定，则设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>适用于 ASA r2 系统*。</block>
  <block id="317afded0cc22ff8de16ceec60d3e0ed" category="cell">"" *设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>适用于 ASA r2 系统*。</block>
  <block id="d716a23a6e731bf750989a45cf32a804" category="cell">分层策略使用“无” *不要为 ASA r2 系统指定*。</block>
  <block id="9e925e9341b490bfd3b4c4ca3b0c1ef2" category="inline-link-macro">这</block>
  <block id="5a401de4946c2175a17ad6fda3a04781" category="admonition"><block ref="9f40590ca1185cea7261c2a60fc922ea" category="inline-link-macro-rx"></block>与其他 ONTAP 系统（ASA、AFF 和 FAS）在存储层实现方面有所不同。在 ASA r2 系统中，使用存储可用区而不是聚合。请参阅<block ref="261295ed43e7c9d663fb0a84ba5b2157" category="inline-link-macro-rx"></block>有关如何在 ASA r2 系统中将聚合分配给 SVM 的知识库文章。</block>
  <block id="d3a94db6693be8414be239f55df31b37" category="paragraph">== 对 ONTAP 后端进行身份验证</block>
  <block id="f16fbd9bb3dcbec83ca559e0320bc245" category="paragraph">=== 启用基于凭证的身份验证</block>
  <block id="222449e5312c55d5a234569ae308041a" category="paragraph">=== 启用基于证书的身份验证</block>
  <block id="9a86918a1cd754d4c3e7a1745efe18dc" category="paragraph">=== 更新身份验证方法或轮换凭证</block>
  <block id="f33ff792ccf735be92ad60ca85333619" category="paragraph">=== 为 Trident 创建自定义 ONTAP 角色</block>
  <block id="1e86eeb01cf8def6f697ea2c64e7df45" category="paragraph">== 使用双向 CHAP 验证连接</block>
  <block id="1c47399fc1153044c4efc19db3115ddf" category="paragraph">=== 工作原理</block>
  <block id="0cc88844e21c5adec6036d2a3e35f523" category="paragraph">=== 轮换凭证并更新后端</block>
  <block id="6fddcf0bbb95fe4fb7de4f5f2e53ee74" category="paragraph">Kubernetes 持久卷 (PV) 卷组快照 NetApp Trident 提供了创建多个卷（一组卷快照）的功能。此卷组快照代表在同一时间点创建的多个卷的副本。</block>
  <block id="9c3e7c7a7d7349669946d43b4988c3ed" category="admonition">VolumeGroupSnapshot 是 Kubernetes 中的一个 Beta 功能，包含 Beta 版 API。VolumeGroupSnapshot所需的最低版本为 Kubernetes 1.32。</block>
  <block id="54100cbc57b96027d8dd74891c09bf53" category="section-title">创建卷组快照</block>
  <block id="e5c9406711c4a7cf7784d95bdf1a2d03" category="paragraph">卷组快照支持<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>驱动程序，仅适用于 iSCSI 协议，尚不支持光纤通道 (FCP) 和 NVMe/TCP。开始之前</block>
  <block id="5b01a9092d1abd7706608bb162c6b8b5" category="list-text">确保您的 Kubernetes 版本是 K8s 1.32 或更高版本。</block>
  <block id="16a63a09f76aeddeabaee67b10b15b73" category="paragraph">如果您的 Kubernetes 发行版不包含外部快照控制器和 CRD，请参阅<block ref="048c22f74eff12037af96b48becdf135" category="inline-xref-macro-rx"></block> 。</block>
  <block id="1f8b4b5fe121a8bf806f02d7e43e97b5" category="admonition">如果在 GKE 环境中创建按需卷组快照，请不要创建快照控制器。GKE-使用内置的隐藏快照控制器。</block>
  <block id="651dc2c39783e984f4c34a8de9e5bdf1" category="list-text">在快照控制器 YAML 中，设置<block ref="ba99addb5e4a87e02dbb279026aee6f0" prefix=" " category="inline-code"></block>功能门控设置为“true”，以确保卷组快照已启用。</block>
  <block id="8a30cbf1912a9801e2b44d7e46629b37" category="list-text">在创建卷组快照之前，创建所需的卷组快照类。</block>
  <block id="044fa4af347bac1f72b867321db43dc5" category="list-text">确保所有 PVC/卷都在同一个 SVM 上，以便能够创建 VolumeGroupSnapshot。</block>
  <block id="b05416d74805ad470e82fbd185a80f60" category="inline-link-macro">卷组快照类</block>
  <block id="4142b8b09dc7a34d6ec584224ea12401" category="list-text">在创建 VolumeGroupSnapshot 之前创建一个 VolumeGroupSnapshotClass。有关详细信息，请参阅 <block ref="4379abd46d192befbb8bdad98f8a5d59" category="inline-link-macro-rx"></block>。</block>
  <block id="62db7d93a1dcd7da96e447092fe6fc94" category="list-text">使用现有存储类创建具有所需标签的 PVC，或将这些标签添加到现有 PVC。</block>
  <block id="e7593a56264dced725b58e1dcee9feba" category="paragraph">以下示例使用以下方式创建 PVC <block ref="75b2ada4942bd6bef7c0a52dd98f7481" prefix=" " category="inline-code"></block>作为数据源和标签<block ref="976d0352c3b3c8881b2f195b2b26322b" prefix=" " category="inline-code"></block> .根据您的要求定义标签键和值。</block>
  <block id="88ee2eefee7a24d49764bba2f82da06c" category="list-text">创建具有相同标签的 VolumeGroupSnapshot <block ref="976d0352c3b3c8881b2f195b2b26322b" prefix="(" category="inline-code"></block> ) 在 PVC 中指定。</block>
  <block id="9d802b9a265ada16030457d797e599c4" category="paragraph">此示例创建卷组快照：</block>
  <block id="52d80f524a1f3e7aa3025bacef197f8a" category="section-title">使用组快照恢复卷数据</block>
  <block id="ee9a128a343c337cf14116c1aecbb76c" category="paragraph">您可以使用作为卷组快照的一部分创建的各个快照来恢复各个持久卷。您无法将卷组快照作为一个整体进行恢复。</block>
  <block id="76716637a3c3927e6595526c04493e52" category="paragraph">有关详细信息，请参见 <block ref="614ee046be6d137fe1c3eadbaba6d9fe" category="inline-link-macro-rx"></block>。</block>
  <block id="8b278511419cd00303a31bff3e658d7b" category="section-title">删除与组快照关联的 PV</block>
  <block id="3f0f9a5202405094b6d608bca6feef12" category="paragraph">删除组卷快照时：</block>
  <block id="24c108ca3f67c96a3a0fc4a98ab3f465" category="list-text">您可以删除整个 VolumeGroupSnapshots，而不是删除组中的单个快照。</block>
  <block id="f3a07fd55b2a15dd2fe4a64f0a2e01e1" category="list-text">如果在持久卷存在快照的情况下删除了该持久卷，Trident 会将该卷移至“删除”状态，因为必须先删除快照，然后才能安全删除该卷。</block>
  <block id="982deda5497c5c5a268ba1212d419648" category="list-text">如果已使用分组快照创建了克隆，然后要删除该组，则会开始克隆拆分操作，并且在拆分完成之前无法删除该组。</block>
  <block id="4379abd46d192befbb8bdad98f8a5d59" category="list-text"><block ref="4379abd46d192befbb8bdad98f8a5d59" category="inline-link-macro-rx"></block></block>
  <block id="d075b47d76ffc95cce31e3ff1a3bf887" category="paragraph">Trident支持在一个集群上的源卷与对等集群上的目标卷之间建立镜像关系、以便为灾难恢复复制数据。  您可以使用名为 Trident 镜像关系 (TMR) 的命名空间自定义资源定义 (CRD) 来执行以下操作：</block>
  <block id="2d78d4f2531b53f3a4980133900540f7" category="paragraph">NetApp Trident 支持使用 NetApp SnapMirror 技术进行卷复制，使用由以下驱动程序支持的存储类：** <block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> ：NFS** <block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ：iSCSI** <block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ： FC ** <block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ：NVMe/TCP（要求最低 ONTAP 版本 9.15.1）</block>
  <block id="a6d2a1b8501003e74309a1ac77e249d4" category="admonition">ASA r2 系统不支持使用 SnapMirror 进行卷复制。有关 ASA r2 系统的信息，请参阅<block ref="40f055dd42976ff294174231df35e37e" category="inline-link-macro-rx"></block> 。</block>
  <block id="5bc634e5febd2967f50c152731ebe0e0" category="admonition">如果您使用 Pod Identity 关联，请跳过此步骤。</block>
  <block id="26b17225b626fb9238849fd60eabdf60" category="paragraph">+</block>
  <block id="b2b0186a010875b0d453752a8aa06a4c" category="section-title">为服务帐户关联 (IRSA) 创建 Pod Identity 或 IAM 角色</block>
  <block id="152bceec6d4e34c053208d61763334bc" category="paragraph">您可以使用 EKS Pod Identity 配置 Kubernetes 服务账户，使其代入 AWS Identity and Access Management (IAM) 角色，或使用 IAM 角色进行服务账户关联 (IRSA)。任何配置为使用该服务账户的 Pod 都可以访问该角色有权访问的任何 AWS 服务。</block>
  <block id="0522426ad683048758e710700760f5a9" category="open-title">Pod 身份</block>
  <block id="acbe8cfddfd64fba35512f543affb372" category="paragraph">Amazon EKS Pod Identity 关联提供了管理应用程序凭证的能力，类似于 Amazon EC2 实例配置文件向 Amazon EC2 实例提供凭证的方式。</block>
  <block id="870d5f69e46397da39e4d5bc6a55edc4" category="paragraph">*在您的 EKS 集群上安装 Pod Identity*：</block>
  <block id="3a735289083f3ebf5b12bf1252f47e70" category="paragraph">您可以通过 AWS 控制台或使用以下 AWS CLI 命令创建 Pod 身份：</block>
  <block id="6b12dab36e102678866ee1a9295bf251" category="inline-link-macro">设置 Amazon EKS Pod Identity Agent</block>
  <block id="f0e49b3188e2241a1fd992e7697df37f" category="paragraph">更多信息请参阅<block ref="223f02a97a1894440d2727b156e834b6" category="inline-link-macro-rx"></block> 。</block>
  <block id="4fcddd38c3384849e906ff198dca9a35" category="paragraph">*创建 trust-relationship.json*：</block>
  <block id="9eaa0d9301ed8e0e6ec8d359da513e09" category="paragraph">创建 trust-relationship.json 文件，使 EKS 服务主体能够承担 Pod Identity 的此角色。然后创建一个具有以下信任策略的角色：</block>
  <block id="c256d9b106d5b83ccc940e1c11d40213" category="paragraph">*trust-relationship.json 文件*：</block>
  <block id="d5bcbf5d17aa3658058051153a3abb49" category="paragraph">*将角色策略附加到 IAM 角色*：</block>
  <block id="5855de3e8f302cffda094dad3434d14d" category="paragraph">将上一步中的角色策略附加到创建的 IAM 角色：</block>
  <block id="ae33daeae7be898405819838f197197f" category="paragraph">*创建 pod 身份关联*：</block>
  <block id="bfb2fc1510ac240a94b2b84a57023dfd" category="paragraph">在 IAM 角色和 Trident 服务帐户（trident-controller）之间创建 pod 身份关联</block>
  <block id="37d9be75a57d7c290f4624befaf41cba" category="open-title">服务帐户关联 (IRSA) 的 IAM 角色</block>
  <block id="58b24f910cf7a97cc3ea8486155b2ee3" category="paragraph">*使用 AWS CLI*：</block>
  <block id="4411692a55eac3faa65c355f682424c8" category="paragraph">*如果您使用 eksctl*，请使用以下示例为 EKS 中的服务账户创建 IAM 角色：</block>
  <block id="170c4b43aa699fd86dc97df5f091ff90" category="list-text">添加 NetApp Trident repo helm 配置：</block>
  <block id="de756da101866f0bf66d3cfdb32b337b" category="list-text">使用以下示例安装 Trident：</block>
  <block id="3840ce271260ab4b489b1664491a7ae0" category="open-title">服务帐户协会 (IRSA)</block>
  <block id="682fae06c762bb51c348b65f07930993" category="list-text">设置“云提供商”和“云身份”的值：</block>
  <block id="eff2bb231132a96a28f9d538ef100a34" category="paragraph">如果您计划使用 iSCSI，请确保在客户端计算机上启用了 iSCSI。如果您使用的是 AL2023 工作节点操作系统，则可以通过在 helm 安装中添加 node prep 参数来自动安装 iSCSI 客户端：</block>
  <block id="586ac0fdd530431245eb98eb3aa882f4" category="list-text">请按照以下步骤选择附加组件：</block>
  <block id="b2bd1d3671dec54e9318ab4475e27324" category="list-text">向下滚动到 *AWS Marketplace 附加组件* 部分，然后在搜索框中输入 *“Trident”*。</block>
  <block id="93883402b9e962f4416b72849cb667c9" category="list-text">选中 NetApp 的 Trident 框右上角的复选框。</block>
  <block id="77b0a7753de002b03ddc52594a9208ee" category="list-text">如果您使用 IRSA 身份验证，请确保设置可选配置设置中可用的配置值：</block>
  <block id="4881bf2869ec064993ab03177d502022" category="list-text">按照 *附加组件配置模式*，将 *配置值* 部分中的 *configurationValues* 参数设置为您在上一步中创建的角色 ARN（值应采用以下格式）：</block>
  <block id="7347242fe06ebf43402a11cc7e289da8" category="paragraph">*1.创建<block ref="feef18acfb11dc53b7100577c6d640c4" prefix=" " category="inline-code"></block>文件*：</block>
  <block id="ac85dba04837be45d97d83025fa9bef9" category="paragraph">*对于 Pod Identity，请使用以下格式*：</block>
  <block id="08ec33a477c6b216472cd10065483760" category="paragraph">*对于 IRSA 身份验证，请使用以下格式*：</block>
  <block id="895c408250687425783cbd96dd25276d" category="paragraph">*2.安装 Trident EKS 插件。*</block>
  <block id="3cec1ada82beb8b8e724d5114558490c" category="paragraph">EKS集群支持各种操作系统、但AWS已针对容器和EKS优化了某些Amazon计算机映像(AMI)。以下 AMI 已通过 NetApp Trident 25.02 测试。</block>
  <block id="173a8cacadf475f14befd10f39624033" category="cell">是的***</block>
  <block id="2e08317d3e70fb5ff3eda62f9abdd760" category="list-text">* 仅支持带有 iSCSI 的 nodePrep。</block>
  <block id="7f38f183170855059fc5861d18334928" category="list-text">*** 不支持 Trident 25.02 版的 NFSv3，但支持 24.10 版。NFSv4.1和 25.02 版均可兼容。</block>
  <block id="e5d0cb04635aeb2a6f06f54da8303683" category="admonition">如果此处未列出您所需的AMI、并不表示它不受支持、而只是表示它尚未经过测试。此列表可作为已知可运行的 AMI 的指南。</block>
  <block id="e30e4df15168b6dd1eefaa4f4590a961" category="list-text">EKS版本：1.31</block>
  <block id="324844cd8fa64fd82920fe6f11dc588d" category="list-text">2025年5月9日： <block ref="86b6d8d044348a051fe7477baf34debb" category="inline-link-macro-rx"></block></block>
  <block id="cbe74dc7c890979d924675df2fa27a35" category="list-text">增加了对 CSI 卷组快照的支持<block ref="ee21100dace47d83bcefcb7dea09cdd3" prefix=" " category="inline-code"></block>适用于 ONTAP-SAN iSCSI 驱动程序的卷组快照 Kubernetes API。请参阅。 <block ref="b136941d5c2c98d5e9ff86fd07e97048" category="inline-link-macro-rx"></block></block>
  <block id="5e93028f6e11493fcce0c15271413cc3" category="list-text">除了 iSCSI 之外，还增加了对 NVMe/TCP 的 ONTAP ASA r2 的支持。请参阅。 <block ref="0ffed2115293f61a0df2b3c8f01851e1" category="inline-link-macro-rx"></block></block>
  <block id="674d1c5daba14e57bb12199e316a830d" category="list-text">为 ONTAP-NAS 和 ONTAP-NAS-Economy 卷添加了安全的 SMB 支持。ActiveDirectory 用户和组现在可以与 SMB 卷一起使用，以增强安全性。请参阅。 <block ref="4f989a35378d98430cb4c4899de0cc08" category="inline-link-macro-rx"></block></block>
  <block id="68e904dfe8bbc558c556cc39aaca54b6" category="list-text">增加了对使用 SnapMirror 对 NVMe 后端进行卷复制的支持。请参阅。 <block ref="0837d9a30d067376d83aa60bb79334f8" category="inline-link-macro-rx"></block></block>
  <block id="afce633f05d99c109d2b0429ee891495" category="admonition">如果您从 25.06 之前的版本升级，则需要执行此步骤，因为 CRD 现在包含在 Trident Protect Helm 图表中。</block>
  <block id="78ba3dee1dfae1136825fa94b594e8b0" category="paragraph"><block ref="b370fec489f67cf82a40d70295a9ea9a" category="inline-xref-macro-rx"></block></block>
  <block id="b71ccf1062cee8c376a7eb37e3c42603" category="cell">启用LUKS加密。请参阅 <block ref="569f9f91cdcc19909b8acbf6f423daf7" category="inline-link-macro-rx"></block>。</block>
  <block id="af4e755c6284fa61e563c93320e97aaa" category="paragraph">Trident使用以下端口在 Kubernetes 内部进行通信：</block>
</blocks>