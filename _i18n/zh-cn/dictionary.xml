<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="8447c4879970f03c99a2bec36a05c141" category="summary">如果您希望与 Astra Trident 的 REST API 进行交互，则可以直接使用 REST 端点。</block>
  <block id="a0ebcf8495639418ba9d4b85dbb67b8b" category="doc">Astra Trident REST API</block>
  <block id="319c1a7b5479ffa2a028b658ad5b7033" category="inline-link-macro">tridentctl 命令和选项</block>
  <block id="8b3c7aa88e751573c842f17535525f19" category="paragraph">API 的工作原理如下：</block>
  <block id="2fab7aa97b6a2cfae6563e72aac5161e" category="list-text">`get &lt;trident 地址 &gt;/trident /v1/&lt; 对象类型 &gt;` ：列出此类型的所有对象。</block>
  <block id="c34156b367bae1b376f09b89d3be7992" category="list-text">`get &lt;trident 地址 &gt;/trident /v1/&lt; 对象类型 &gt;/&lt; 对象名称 &gt;` ：获取命名对象的详细信息。</block>
  <block id="6692e2cd6834e6b9b2151799cac2a9f8" category="paragraph">`post &lt;trident 地址 &gt;/trident /v1/&lt; 对象类型 &gt;` ：创建指定类型的对象。</block>
  <block id="3d2bacacf0178e742d5abb2abc32d431" category="list-text">需要为要创建的对象配置 JSON 。有关每种对象类型的规范，请参见 <block ref="e87a326653960de9774fcc58ee9fa490" category="inline-link-macro-rx"></block>。</block>
  <block id="5b2f45c3d098b61927afda859c9144f8" category="list-text">如果对象已存在，则行为会有所不同：后端更新现有对象，而所有其他对象类型将使操作失败。</block>
  <block id="ecfc51243c8c28fc234ff87f1f9ddb88" category="paragraph">`delete &lt;trident 地址 &gt;/trident /v1/&lt; 对象类型 &gt;/&lt; 对象名称 &gt;` ：删除指定的资源。</block>
  <block id="80e4e3d3203325fb6aeb139614fd09f3" category="admonition">与后端或存储类关联的卷将继续存在；必须单独删除这些卷。有关详细信息，请参见 <block ref="e87a326653960de9774fcc58ee9fa490" category="inline-link-macro-rx"></block>。</block>
  <block id="ce94b1f7df7a6a05a559b66f96eff1cc" category="paragraph">有关如何调用这些 API 的示例，请传递 debug （` -d` ）标志。有关详细信息，请参见 <block ref="e87a326653960de9774fcc58ee9fa490" category="inline-link-macro-rx"></block>。</block>
  <block id="a1582c89f8e85f372306a05848eafb68" category="summary">NetApp 存储产品组合可与 Kubernetes 集群的许多不同方面相集成，从而提供高级数据管理功能，从而增强 Kubernetes 部署的功能，功能，性能和可用性。</block>
  <block id="9944b094c4079f770fabc4ae629feb0f" category="doc">与 Kubernetes 集成的 NetApp 产品</block>
  <block id="3cce5f3eaf76e098ba8e28f7bbba3f92" category="section-title">Astra</block>
  <block id="253b40ae359ba25b56231803430c4873" category="section-title">ONTAP</block>
  <block id="cbb7697b4f6f189240d043ff70ca133c" category="admonition">Trident 支持上述所有 ONTAP 部署模式。</block>
  <block id="117bdbda976fe8b3212bc3b6327a0a1b" category="section-title">Cloud Volumes ONTAP</block>
  <block id="5c04ffbd0c110bf7b37d6b95eb756b75" category="paragraph"><block ref="700b45b9fca207b66f675c8d5dfb073b" category="inline-link-rx"></block> 是一款纯软件存储设备，可在云中运行 ONTAP 数据管理软件。您可以将 Cloud Volumes ONTAP 用于生产工作负载、灾难恢复、 DevOps 、文件共享和数据库管理。它通过提供存储效率，高可用性，数据复制，数据分层和应用程序一致性，将企业级存储扩展到云。</block>
  <block id="4d82a1ec1af02725042c8c785564ee7a" category="section-title">适用于 NetApp ONTAP 的 Amazon FSX</block>
  <block id="27bb76bfb1e4f9966c31f5042348cd1e" category="section-title">Element 软件</block>
  <block id="231afe47f3f37d3808096b36c28b4ded" category="inline-link">Element</block>
  <block id="1fdf61a8f946268990d8e15dd9069a6d" category="paragraph"><block ref="eca39b018af81e7b5c8e71b5b4aa3790" category="inline-link-rx"></block> 通过保证性能并简化存储占用空间，使存储管理员能够整合工作负载。Element 与 API 相结合，可实现存储管理各个方面的自动化，可帮助存储管理员事半功倍。</block>
  <block id="08edd2123939d5309dced149763a50ee" category="section-title">NetApp HCI</block>
  <block id="25f221cc63a7e1fa55b05c29420a72a2" category="paragraph"><block ref="2841e7defe3939e68d83d007d1ad666b" category="inline-link-rx"></block> 通过自动化执行日常任务并使基础架构管理员能够专注于更重要的功能，简化数据中心的管理和扩展。</block>
  <block id="be17f8b9c728a6cb61cad5a2609b3888" category="paragraph">Trident 完全支持 NetApp HCI 。Trident 可以直接在底层 NetApp HCI 存储平台上为容器化应用程序配置和管理存储设备。</block>
  <block id="7450cfde7058dc5e1f7909d0280fd7ae" category="section-title">Azure NetApp Files</block>
  <block id="29e7ab00082418141d470583a19c28d3" category="paragraph"><block ref="2384314bcd106c8062815b2ed789c4ad" category="inline-link-rx"></block> 是一种企业级 Azure 文件共享服务，由 NetApp 提供支持。您可以在 Azure 中以本机方式运行要求最苛刻的基于文件的工作负载，同时享受 NetApp 应有的性能和丰富的数据管理功能。</block>
  <block id="b0cee72642f5457a71ddd0b49efb6d93" category="section-title">适用于 Google Cloud 的 Cloud Volumes Service</block>
  <block id="a3b5183ae6f5c3f1d6644448f795b5cb" category="inline-link">适用于 Google Cloud 的 NetApp Cloud Volumes Service</block>
  <block id="a1515efe69d0ac9d979af2bdfc068934" category="paragraph"><block ref="68704f3321dd8ca7029c03c29da7736a" category="inline-link-rx"></block> 是一种云原生文件服务，可通过 NFS 和 SMB 提供具有全闪存性能的 NAS 卷。此服务支持在 GCP 云中运行任何工作负载，包括原有应用程序。它提供了一种完全托管的服务，可提供稳定一致的高性能，即时克隆，数据保护以及对 Google Compute Engine （ GCE ）实例的安全访问。</block>
  <block id="5ee08ab883e000ce6b739dbb0b6ff376" category="summary">详细了解 Kubernetes 系统的各个部分。</block>
  <block id="607ae6360b32f1bd6e559e915d414fab" category="doc">Kubernetes 概念</block>
  <block id="d60f0fff1c23a02458849862f593357e" category="inline-link">Kubernetes 系统</block>
  <block id="a7018a5fd7b610274c7786aa5402e64d" category="paragraph">详细了解的各个部分<block ref="f01a74527fa0343e793eb393c9d4809a" category="inline-link-rx"></block>。</block>
  <block id="7d4fab76513c90b603a722620cde60fe" category="doc">命令行选项</block>
  <block id="8db7df66ab1d7ab5f1dc947acdb5fae4" category="section-title">日志记录</block>
  <block id="7e2a14542a2613424ad88206fd2dd9aa" category="list-text">` -debug` ：启用调试输出。</block>
  <block id="55e727716c7f623987be58e50732c01e" category="list-text">` -loglevel &lt;level&gt;` ：设置日志记录级别（调试，信息，警告，错误，致命）。默认为 INFO 。</block>
  <block id="30136395f01879792198317c11831ea4" category="section-title">Kubernetes</block>
  <block id="5700f5ae190580b01f6ed6c031668336" category="list-text">` -K8s_pod` ：使用此选项或 ` -K8s_api_server` 启用 Kubernetes 支持。如果设置此值，则 Trident 将使用其所属 POD 的 Kubernetes 服务帐户凭据来联系 API 服务器。只有当 Trident 在启用了服务帐户的 Kubernetes 集群中作为 POD 运行时，此功能才有效。</block>
  <block id="24095e7ef85031e99914e2c5298a7ded" category="list-text">` -K8s_api_server &lt; 不安全地址：不安全端口 &gt;` ：使用此选项或 ` -K8s_pod` 启用 Kubernetes 支持。指定后， Trident 将使用提供的不安全地址和端口连接到 Kubernetes API 服务器。这样可以在 Pod 之外部署 Trident ；但是，它仅支持与 API 服务器的不安全连接。要安全连接，请使用 ` -K8s_pod` 选项将 Trident 部署在 Pod 中。</block>
  <block id="9d77217a2dfe50f2575ced46f5e661d8" category="list-text">` -K8s_config_path &lt;file&gt;` ：必需；必须指定 KubeConfig 文件的路径。</block>
  <block id="c5fd214cdd0d2b3b4272e73b022ba5c2" category="section-title">Docker</block>
  <block id="1e071a3d810132af1c9f8f6a03ca5609" category="list-text">` -volume_driver &lt; 名称 &gt;` ：注册 Docker 插件时使用的驱动程序名称。默认为 `NetApp` 。</block>
  <block id="dfbbfd6bbf6bc798d1cbe8895d1cff22" category="list-text">` -driver_port &lt;port-number&gt;` ：侦听此端口，而不是 UNIX 域套接字。</block>
  <block id="3874d7b8c9196001f8bfe4c49f43b323" category="list-text">` 配置 &lt; 文件 &gt;` ：必需；您必须指定后端配置文件的路径。</block>
  <block id="50780f47f6839d47d60bc4555ee00c3f" category="section-title">REST</block>
  <block id="bfffd3cb0560af555e57dd6bad52a9be" category="list-text">` 地址 &lt;ip-or-host&gt;` ：指定 Trident 的 REST 服务器应侦听的地址。默认为 localhost 。在本地主机上侦听并在 Kubernetes Pod 中运行时，无法从 Pod 外部直接访问 REST 接口。使用 ` 地址 ""` 可从 Pod IP 地址访问 REST 接口。</block>
  <block id="049ad2e7bef322af60013bbdd35ebbe7" category="list-text">` -port &lt;port-number&gt;` ：指定 Trident 的 REST 服务器应侦听的端口。默认为 8000 。</block>
  <block id="188cb756fe8659cb2caf27ca6d1446b4" category="list-text">` -REST` ：启用 REST 接口。默认为 true 。</block>
  <block id="afe272beb780ad53d441c342bf1c8c77" category="summary">了解有关 tridentctl 的更多信息， tridentctl 是一个命令行实用程序，可用于轻松访问 Trident 。</block>
  <block id="7358b1fd077fa65f88fff87888fd2547" category="inline-link">Trident 安装程序包</block>
  <block id="4e49f66de2e2dc43c25555fe50639334" category="paragraph">。<block ref="5a856e83aada9750fe5389f8da94335b" category="inline-link-rx"></block> 包括一个命令行实用程序 `tridentctl` ，可用于轻松访问 Astra Trident 。具有足够权限的 Kubernetes 用户可以使用它来安装 Astra Trident ，并直接与其交互以管理包含 Astra Trident Pod 的命名空间。</block>
  <block id="8ca34267f11cb69ea424bc0320f0e295" category="paragraph">有关使用情况信息，请运行 `tridentctl -help` 。</block>
  <block id="2dd878ee55d738aa02e6b0b162d45708" category="paragraph">可用命令：</block>
  <block id="4386bd8da14af923cbb7ac011ffc048e" category="list-text">`create` ：将资源添加到 Astra Trident 。</block>
  <block id="f40f9a4cf242d0355aaf8d9e06617436" category="list-text">`d删除` ：从 Astra Trident 中删除一个或多个资源。</block>
  <block id="94b75e236d78fe800d1d32acc3882789" category="list-text">`获取` ：从 Astra Trident 获取一个或多个资源。</block>
  <block id="bc9ef80dceea04796c6218fe96e05b30" category="list-text">`帮助` ：有关任何命令的帮助。</block>
  <block id="f5421bf790b945f508fa1b9f223318e5" category="list-text">`images` ：打印一个包含 Astra Trident 所需容器映像的表。</block>
  <block id="40e65170f778aaa7f4ab7f645b3bb3df" category="list-text">`import` ：将现有资源导入到 Astra Trident 。</block>
  <block id="a824e587817131e2052a450803b2d97c" category="list-text">`安装` ：安装 Astra Trident 。</block>
  <block id="c90c365a06ede3139cad79d4e55673ee" category="list-text">`logs` ：从 Astra Trident 打印日志。</block>
  <block id="e5c5ad2be68f58e910aa42a9fcc98141" category="list-text">`sEnd` ：从 Astra Trident 发送资源。</block>
  <block id="3166458a066b2d14394e408f1f8fed84" category="list-text">`卸载` ：卸载 Astra Trident 。</block>
  <block id="8c8fcf9d4df8bd54d26dc748cc4bac55" category="list-text">`update` ：修改 Astra Trident 中的资源。</block>
  <block id="042aeda3cc45bf1f53a0e74660dbd924" category="list-text">`升级` ：升级 Astra Trident 中的资源。</block>
  <block id="d014c15bf0496b645d02caf1704932f7" category="list-text">`version` ：打印 Astra Trident 的版本。</block>
  <block id="1c90ba5cf3791b6148c7887a696911ec" category="paragraph">flags</block>
  <block id="568cd496b6bde641a886745edfa59ae7" category="list-text">`` -d ， -debug` ：调试输出。</block>
  <block id="fe27ec35afa597521f9616f18c32e556" category="list-text">`` -h ， -help` ：帮助 `tridentctl` 。</block>
  <block id="874377d6c0baee9e8e842c8abf13d28c" category="list-text">`` -n ， -namespace string` ： Astra Trident 部署的命名空间。</block>
  <block id="463b413ea9e7764a789f3e987cb06fc8" category="list-text">`` -o ， -output string` ：输出格式。json_yaml_name_wide|ps 之一（默认）。</block>
  <block id="85c5338e138fc6d122a579f7a07040bf" category="list-text">`` -s ， -server string` ： Astra Trident REST 接口的地址 / 端口。</block>
  <block id="b8d486e9285b25b72d6efad05e41de4d" category="paragraph">您可以使用 run the `create` 命令向 Astra Trident 添加资源。</block>
  <block id="6d5c7e6905e460d1fba1f2dd1c0d2a8a" category="paragraph">可用选项： `backend` ：将后端添加到 Astra Trident 。</block>
  <block id="0d847e459450017616b8ab50b372ad2e" category="paragraph">您可以运行 `delete` 命令从 Astra Trident 中删除一个或多个资源。</block>
  <block id="16713f316b7cce82385c040efc32ac83" category="paragraph">可用选项：</block>
  <block id="417f8bf14ed5852917d189612c7d163c" category="list-text">`后端` ：从 Astra Trident 中删除一个或多个存储后端。</block>
  <block id="4896fd245b78ab9b7d044375c1fce85e" category="list-text">`snapshot` ：从 Astra Trident 中删除一个或多个卷快照。</block>
  <block id="cef6b6bb7932e7450e35eafc3d986f18" category="list-text">`storageclass` ：从 Astra Trident 中删除一个或多个存储类。</block>
  <block id="14eeaf8d1da512153855b759185ee129" category="list-text">`volume` ：从 Astra Trident 中删除一个或多个存储卷。</block>
  <block id="c7a7a677647f05a4032891d4aef5bed5" category="paragraph">您可以运行 `get` 命令从 Astra Trident 获取一个或多个资源。</block>
  <block id="2dd609bd837a41363817262fd314b0be" category="list-text">`后端` ：从 Astra Trident 获取一个或多个存储后端。</block>
  <block id="ad4ba4a1b0612fa67f4386330ac00e9d" category="list-text">`snapshot` ：从 Astra Trident 获取一个或多个快照。</block>
  <block id="5385ccfb9fd8a07e53dc1a6ac58a101d" category="list-text">`storageclass` ：从 Astra Trident 获取一个或多个存储类。</block>
  <block id="060da5b15e6fb7129c04e18b3d96c702" category="list-text">`volume` ：从 Astra Trident 获取一个或多个卷。</block>
  <block id="16ca0a361439e1f936eaa5c919443b10" category="paragraph">您可以运行 `images` 标志来打印包含 Astra Trident 所需容器映像的表。</block>
  <block id="1008ac4609cab9210ae758ff8fee8127" category="paragraph">标志： * `` -h ， -help` ：图像帮助。* `` -v ， -k8s-version 字符串` ： Kubernetes 集群的语义版本。</block>
  <block id="df5ec83145dcd824f8daf85d89e5dd8a" category="paragraph">您可以运行 `import volume` 命令将现有卷导入到 Astra Trident 。</block>
  <block id="ccf1bb29ef5562c033962d35014005e9" category="paragraph">别名： `volume ， v`</block>
  <block id="48c7ae9a5466415a6b9666ad86746640" category="list-text">`` -f ， -filename string` ： YAML 或 JSON PVC 文件的路径。</block>
  <block id="1bb2af29a08ab6ea9414a8656234b8c6" category="list-text">`` -h ， -help` ：卷帮助。</block>
  <block id="0ad393d5c23749c23f3855220b55375a" category="list-text">`` -no-manage` ：仅创建 PV/PVC 。不要假定卷生命周期管理。</block>
  <block id="42ddf993417d9568ca6a057fe55f9c63" category="paragraph">您可以运行 `install` 标志来安装 Astra Trident 。</block>
  <block id="fbd7cc4267716ab9206612c6dcaa206e" category="list-text">`` -autosupport-proxy string` ：用于发送 AutoSupport 遥测的代理的地址 / 端口。</block>
  <block id="778cbd0cbbd73953bc965ad29269803c" category="list-text">`` -enable-node-prep` ：尝试在节点上安装所需的软件包。</block>
  <block id="23945a1dd08f0fb29fc1b73a02a2f48d" category="list-text">`` -generate-custom-yaml` ：在不安装任何内容的情况下生成 YAML 文件。</block>
  <block id="351ac43ddb05bc31fb7aa4d76c9098ed" category="list-text">`` -h ， -help` ：安装帮助。</block>
  <block id="3b825e283b9b4452c1ef223373ad950d" category="list-text">`` -image-regRegistry string` ：内部映像注册表的地址 / 端口。</block>
  <block id="ba7224837b2ded4b5b295c1012fcc2c0" category="list-text">`` -K8s-timeout duration` ：所有 Kubernetes 操作的超时（默认值为 3 毫秒）。</block>
  <block id="6018142252ad7b87dc139b3235ff4fd3" category="list-text">`` -kubelet-dir string` ： kubelet 内部状态的主机位置（默认为 "/var/lib/kubelet" ）。</block>
  <block id="e36f8ff54239eb329caf981624e29cb9" category="list-text">`` -log-format string` ： Astra Trident 日志记录格式（文本， json ）（默认为 "text" ）。</block>
  <block id="75f452bd493d8727bcf31563cc9106b4" category="list-text">`` -pv 字符串` ： Astra Trident 使用的原有 PV 名称，用于确保此名称不存在（默认为 "trident " ）。</block>
  <block id="ba2a8d0773dc83972c406043a789e4dd" category="list-text">`` -PVC 字符串` ： Astra Trident 使用的原有 PVC 的名称，用于确保此名称不存在（默认为 "trident " ）。</block>
  <block id="6c99958eae5167b3baa561e4f7ee33f1" category="list-text">`` -silning-autosupport` ：不要自动向 NetApp 发送 AutoSupport 捆绑包（默认为 true ）。</block>
  <block id="77c96d54825d934e8abaadbc0049935d" category="list-text">`` —静默` ：在安装期间禁用大多数输出。</block>
  <block id="daeedc3203fdc6c1fb8dfe70e2381ed3" category="list-text">`` -trident 映像字符串` ：要安装的 Astra Trident 映像。</block>
  <block id="9a7a8500c6fa970d6879b522c3e33437" category="list-text">`` -use-custom-yaml` ：使用设置目录中现有的任何 YAML 文件。</block>
  <block id="bbf23448d408765a1240d287ed41ceff" category="list-text">`` -use-ipv6` ：使用 IPv6 进行 Astra Trident 的通信。</block>
  <block id="501416d02a886c81e8849b2f400e28a3" category="paragraph">您可以运行 `logs` 标志从 Astra Trident 打印日志。</block>
  <block id="be8607b2dc354b7010b1464ac140fc1b" category="list-text">`` A ， -archive` ：使用所有日志创建支持归档，除非另有说明。</block>
  <block id="d8d07479f4d5c7f0ef2b0f51407f070c" category="list-text">`` -h ， -help` ：日志帮助。</block>
  <block id="f925a9593a051a85d10acec74988d84f" category="list-text">`` -l ， -log 字符串` ：要显示的 Astra Trident 日志。Trident 中的一个 "auto"|trident 操作符 "All" （默认为 "auto" ）。</block>
  <block id="d8a224d86fa21c6c564987d0848bf681" category="list-text">`` -node string` ：用于收集节点 Pod 日志的 Kubernetes 节点名称。</block>
  <block id="a335d03b82ae4916c848dd419432f477" category="list-text">`` -p ， -previous` ：获取先前容器实例（如果存在）的日志。</block>
  <block id="d7d7c214e32f71943c71783fa9d5fb55" category="list-text">`` -sidecar` ：获取 sidecar 容器的日志。</block>
  <block id="3121026e841bd19d147c54ac43e423c0" category="paragraph">您可以运行 `send` 命令从 Astra Trident 发送资源。</block>
  <block id="9ce1e94be8ccb1612967a7e2cbe69a6f" category="paragraph">可用选项： `AutoSupport` ：将 AutoSupport 归档发送到 NetApp 。</block>
  <block id="e980a564a92aa568234d9757a591756b" category="paragraph">您可以运行 `uninstall` 标志来卸载 Astra Trident 。</block>
  <block id="328865de703bbe034177e6eb51dc3d28" category="paragraph">您可以运行 `update` 命令来修改 Astra Trident 中的资源。</block>
  <block id="8680f448b33371bcb4778563a93f4702" category="paragraph">可用选项： `backend` ：在 Astra Trident 中更新后端。</block>
  <block id="2af72f100c356273d46284f6fd1dfc08" category="section-title">version</block>
  <block id="9867997bba4e250bad7411d19fce3905" category="paragraph">您可以运行 `version` 标志来打印 `tridentctl` 的版本以及正在运行的 Trident 服务。</block>
  <block id="800f73959f4b721c78f4651c6b4b2052" category="paragraph">标志： * ` -client` ：仅限客户端版本（不需要服务器）。* ` -h ， -help` ：版本帮助。</block>
  <block id="04333ff788951193122a833ecd614950" category="summary">Kubernetes 与 Trident ， Trident 与存储以及 Kubernetes 与存储之间的关系由多个资源对象决定。其中一些对象通过 Kubernetes 进行管理，而另一些对象则通过 Trident 进行管理。</block>
  <block id="da1e63dd673a1932cebb48b6a81bbbb1" category="doc">Kubernetes 和 Trident 对象</block>
  <block id="d107eefb0ce66911b186b03b9e9c337e" category="paragraph">您可以通过读取和写入资源对象来使用 REST API 与 Kubernetes 和 Trident 进行交互。Kubernetes 与 Trident ， Trident 与存储以及 Kubernetes 与存储之间的关系由多个资源对象决定。其中一些对象通过 Kubernetes 进行管理，而另一些对象则通过 Trident 进行管理。</block>
  <block id="62499e0de79c4d07c7915a36f9faa0d8" category="section-title">对象如何相互交互？</block>
  <block id="b9ea565816618011ca591fc191fe5e63" category="paragraph">了解对象，对象的用途以及对象交互方式的最简单方法可能是，遵循 Kubernetes 用户的单个存储请求：</block>
  <block id="ec7d6500a82a56ee8f5fff02eafa7af7" category="list-text">用户创建一个 `PersistentVolumeClaim` ，请求管理员先前配置的 Kubernetes `StorageClass` 中具有特定大小的新 `PersistentVolume` 。</block>
  <block id="6b25cc026b6f29464d3fce0f6ec67805" category="list-text">Kubernetes `StorageClass` 将 Trident 标识为其配置程序，并包含一些参数，用于指示 Trident 如何为请求的类配置卷。</block>
  <block id="5b078d6b19593ee6c55f428e2c85faa7" category="list-text">Trident 会查看自己的 `StorageClass` 并使用相同的名称来标识匹配的 `Backend` 和 `StoragePools` ，它可以使用这些卷为该类配置卷。</block>
  <block id="ff099186f912c7abb21bcf68690c98d7" category="list-text">Trident 会在匹配的后端配置存储并创建两个对象： Kubernetes 中的 A `PersistentVolume` 用于告知 Kubernetes 如何查找，挂载和处理卷； Trident 中的一个卷用于保留 `PersistentVolume` 与实际存储之间的关系。</block>
  <block id="6d2ae40bc02e88464563ae42ae22d54c" category="list-text">Kubernetes 会将 `PersistentVolumeClaim` 绑定到新的 `PersistentVolume` 。包含 `PersistentVolumeClaim` 的 Pod 会将此 PersistentVolume 挂载到其运行所在的任何主机上。</block>
  <block id="490c1b0e3a604c81abb3db1b778ec07b" category="list-text">用户使用指向 Trident 的 `VolumeSnapshotClass` 创建现有 PVC 的 `VolumeSnapshot` 。</block>
  <block id="9f4e11d34d158ebd365226367c8b15d9" category="list-text">Trident 标识与 PVC 关联的卷，并在其后端创建卷的快照。此外，它还会创建一个 `VolumeSnapshotContent` ，指示 Kubernetes 如何识别快照。</block>
  <block id="c6a606bdd6882cd42de13f2ba3614285" category="list-text">用户可以使用 `VolumeSnapshot` 作为源创建 `PersistentVolumeClaim` 。</block>
  <block id="8ecb92f33c033b00fcf3c18e59c4b177" category="list-text">Trident 可识别所需的快照，并执行与创建 `PersistentVolume` 和 `Volume` 相同的一组步骤。</block>
  <block id="428895404a5e57e01a138a5df672d0fc" category="inline-link">永久性卷</block>
  <block id="173423532ed9a565a05f32db2c8f8172" category="admonition">要进一步了解 Kubernetes 对象，强烈建议您阅读<block ref="92dc8ed82beb7484ab6097a3e91b0deb" category="inline-link-rx"></block> Kubernetes 文档的一节。</block>
  <block id="794a32773794ee6c545794c065d1a88b" category="paragraph">Kubernetes `PersistentVolumeClaim` 对象是 Kubernetes 集群用户发出的存储请求。</block>
  <block id="43cf8e1465c61efc8b1b9bf71aa9931c" category="paragraph">除了标准规范之外，如果用户要覆盖在后端配置中设置的默认值， Trident 还允许用户指定以下特定于卷的标注：</block>
  <block id="55f6611cb342565cf0f5002400f53a95" category="cell">标注</block>
  <block id="1527fede1d561a899313c8cb3eb1e7bf" category="cell">卷选项</block>
  <block id="db8a0bbeae97b94338c1b7a61e2a1ec3" category="cell">支持的驱动程序</block>
  <block id="f3780100617165ed98557e3a6d2be72d" category="cell">trident.netapp.io/fileSystem</block>
  <block id="44d4d4eb1f08d8eb29766160086f61dd" category="cell">文件系统</block>
  <block id="979f70bf9da982ee97ac075df4f048c3" category="cell">trident.netapp.io/cloneFromPVC</block>
  <block id="b4ead50a5ca4f307f7d61da7763ad204" category="cell">cloneSourceVolume</block>
  <block id="46ec89aa5290ead7b514dd5182caa0a7" category="cell">trident.netapp.io/splitOnClone</block>
  <block id="58c1c86186ef8de4f6e12d8f3aed8b64" category="cell">splitOnClone</block>
  <block id="80f05e749a4f524e8c8a05fa19d5df0e" category="cell">ontap-NAS ， ontap-san</block>
  <block id="d6f010e4b4bf9748dcaa34feb70188ce" category="cell">trident.netapp.io/protocol</block>
  <block id="81788ba0d7d02d81c063dbca621ba11b" category="cell">协议</block>
  <block id="100b8cad7cf2a56f6df78f171f97a1ec" category="cell">任意</block>
  <block id="e9898504ff0569325d48acaee7e9ced9" category="cell">trident.netapp.io/exportPolicy</block>
  <block id="647ce4e5394e2e595e46b4fc50a628e9" category="cell">导出策略</block>
  <block id="61396290e72fa7d707996351c8815bd6" category="cell">ontap-nas ， ontap-nas-economy-、 ontap-nas-flexgroup</block>
  <block id="2902d12b1fe6d9ef5bd1a3474f2356e9" category="cell">trident.netapp.io/snapshotPolicy</block>
  <block id="0a236e7685e50a59df980d0a30929d6c" category="cell">snapshotPolicy</block>
  <block id="7f3bf2672240703dc69740ce11443cf2" category="cell">ontap-nas ， ontap-nas-economy. ontap-nas-flexgroup ， ontap-san</block>
  <block id="6224177007fc13e9e0d3789985ed165a" category="cell">trident.netapp.io/snapshotReserve</block>
  <block id="bb0d75280f9b683f2f1f0767fd0aff9b" category="cell">SnapshotReserve</block>
  <block id="1cb43054bed661d8c8457ddbb43e1b1b" category="cell">trident.netapp.io/snapshotDirectory</block>
  <block id="1ae33c448502ac3d326593aee304c21f" category="cell">snapshotDirectory</block>
  <block id="ec1739ebad429a70f25efc292c347f8e" category="cell">trident.netapp.io/unixPermissions</block>
  <block id="c005e78d4bd808038335c32dd84cf7da" category="cell">unixPermissions</block>
  <block id="69d900d222446aab8591b45a7363c9e7" category="cell">trident.netapp.io/blockSize</block>
  <block id="480d1b61a0432d1319f7504a3d7318dd" category="cell">块大小</block>
  <block id="c0d2a793e71b152662b3e8cd2da00620" category="cell">solidfire-san</block>
  <block id="fc5f8320f80474f09bdd1e3c3849123e" category="paragraph">如果创建的 PV 具有 `Delete` reclaime 策略，则在释放 PV 时（即用户删除 PVC 时）， Trident 会同时删除 PV 和后备卷。如果删除操作失败， Trident 会将 PV 标记为相应的 PV ，并定期重试此操作，直到操作成功或 PV 手动删除为止。如果 PV 使用 ` +retain+` 策略， Trident 会忽略该策略，并假定管理员将从 Kubernetes 和后端清理该策略，以便在删除卷之前对其进行备份或检查。请注意，删除 PV 不会通过发生原因 Trident 删除后备卷。您应使用 REST API （`tridentctl` ）将其删除。</block>
  <block id="5dad99bb31feaed11fecbe29cf682e51" category="paragraph">Trident 支持使用 CSI 规范创建卷快照：您可以创建卷快照并将其用作数据源来克隆现有 PVC 。这样， PV 的时间点副本就可以以快照的形式公开给 Kubernetes 。然后，可以使用快照创建新的 PV 。请查看 ` + 按需卷快照 +` 了解其工作原理。</block>
  <block id="96e0288ecc3c91f97de46420e70a4f8f" category="paragraph">例如：如果用户已经有一个名为 `mysql` 的 PVC ，则用户可以使用标注创建一个名为 `mysqlclone` 的新 PVC ，例如 `trident.netapp.io/cloneFromPVC: mysql` 。设置了此标注后， Trident 将克隆与 mysql PVC 对应的卷，而不是从头开始配置卷。</block>
  <block id="ff0fa770e22db25a156c5e2d7f017283" category="paragraph">请考虑以下几点：</block>
  <block id="5faae6e509c8aecf9f8815a4ceef02b3" category="list-text">建议克隆空闲卷。</block>
  <block id="f89d76e06e88814705882a1faad838fb" category="list-text">一个 PVC 及其克隆应位于同一个 Kubernetes 命名空间中，并具有相同的存储类。</block>
  <block id="f769a6b54b1d1476b6628ebd1c4b98c4" category="list-text">使用 `ontap-nas` 和 `ontap-san` 驱动程序时，可能需要将 PVC 标注 `trident.netapp.io/splitOnClone` 与 `trident.netapp.io/cloneFromPVC` 结合使用。当 `trident.netapp.io/splitOnClone` 设置为 `true` 时， Trident 会将克隆的卷与父卷拆分，从而将克隆的卷与其父卷的生命周期完全分离，从而降低存储效率。如果不设置 `trident.netapp.io/splitOnClone` 或将其设置为 `false` ，则会减少后端的空间占用，而会在父卷和克隆卷之间创建依赖关系，因此除非先删除克隆，否则无法删除父卷。拆分克隆是有意义的一种情形，即克隆空数据库卷时，该卷及其克隆会发生很大的差异，无法从 ONTAP 提供的存储效率中受益。</block>
  <block id="6cb5412cc2fe8210c4d14d6d6b08ab79" category="paragraph">Kubernetes `PersistentVolume` 对象表示可供 Kubernetes 集群使用的一段存储。它的生命周期与使用它的 POD 无关。</block>
  <block id="292289b7334983e53d9fb9bd00d30820" category="admonition">Trident 会创建 `PersistentVolume` 对象，并根据其配置的卷自动将其注册到 Kubernetes 集群中。您不应自行管理它们。</block>
  <block id="443f09ca4d0d1cc13b5baa064b90c0b7" category="paragraph">创建引用基于 Trident 的 `S存储类` 的 PVC 时， Trident 会使用相应的存储类配置新卷并为该卷注册新的 PV 。在配置已配置的卷和相应的 PV 时， Trident 会遵循以下规则：</block>
  <block id="b27c91fe87605abbb0d5240430518a1c" category="list-text">Trident 会为 Kubernetes 生成 PV 名称及其用于配置存储的内部名称。在这两种情况下，它都可以确保名称在其范围内是唯一的。</block>
  <block id="9c2f88a5c4297bd88ead0cd6314fe886" category="list-text">卷的大小与 PVC 中请求的大小尽可能匹配，但可能会根据平台将其取整为最接近的可分配数量。</block>
  <block id="0d35625a483152791f4e2d0b751a09cc" category="paragraph">Kubernetes `StorageClass` 对象在 `PersistentVolumeClass` 中按名称指定，用于使用一组属性配置存储。存储类本身可标识要使用的配置程序，并按配置程序所了解的术语定义该属性集。</block>
  <block id="f7738d717849274e5992d460fd2c0a75" category="paragraph">它是需要由管理员创建和管理的两个基本对象之一。另一个是 Trident 后端对象。</block>
  <block id="e51377a773f4713e536b061eaa2d4b04" category="paragraph">使用 Trident 的 Kubernetes `StorageClass` 对象如下所示：</block>
  <block id="39edc8618b50008d4cb2050414d6921f" category="paragraph">这些参数是 Trident 专用的，可告诉 Trident 如何为类配置卷。</block>
  <block id="b16da8ed7f6c8cce3011dc2b6c7bd1a4" category="paragraph">存储类参数包括：</block>
  <block id="f2bbdf9f72c085adc4d0404e370f0f4c" category="cell">属性</block>
  <block id="a1fa27779242b4902f7ae3bdd5c6d508" category="cell">Type</block>
  <block id="b651efdb98a5d6bd2b3935d0c3f4a5e2" category="cell">Required</block>
  <block id="b5a7adde1af5c87d7fd797b6245c2a39" category="cell">Description</block>
  <block id="736b91750e516139acc13c5eb6564f92" category="cell">属性</block>
  <block id="59a1e7292a0114529fb1b3401b37bc28" category="cell">map[string]string</block>
  <block id="7fa3b767c460b54a2be4d49030b349c7" category="cell">否</block>
  <block id="1b40216e6fe613bd013bf8710182e650" category="cell">请参见下面的属性部分</block>
  <block id="c614017642b6cfd9e6a25c7df122d917" category="cell">存储池</block>
  <block id="b8f32852327d2ffce86ae3ead4fdfb52" category="cell">map[string]StringList</block>
  <block id="bdd0ddb870ed9de6f6e7d3a75200e9f7" category="cell">后端名称映射到中的存储池列表</block>
  <block id="145d1b89a9f9ed8bdc16d1f7a814cace" category="cell">附加 StoragePools</block>
  <block id="6907a73ad9068ddf5f99d022102220bb" category="cell">后端名称映射到中的存储池列表</block>
  <block id="7df974d787ead594df017a11672f2f0e" category="cell">排除 StoragePools</block>
  <block id="99ba77776c83983f5ecbd2b51f2b43ef" category="cell">后端名称映射到中的存储池列表</block>
  <block id="f74d4b2b456fb453c0980710290f66eb" category="paragraph">存储属性及其可能值可以分类为存储池选择属性和 Kubernetes 属性。</block>
  <block id="2fdf10f3f64b631cd3a137740de02f8b" category="section-title">存储池选择属性</block>
  <block id="1f5912cd581dba393d5eecc43059adf4" category="paragraph">这些参数决定了应使用哪些 Trident 管理的存储池来配置给定类型的卷。</block>
  <block id="c82a6100dace2b41087ba6cf99a5976a" category="cell">值</block>
  <block id="6bb24468956384c482a8b5a901fb6383" category="cell">优惠</block>
  <block id="15c2d85f1fae22a3c3a0594510a1f611" category="cell">请求</block>
  <block id="7aa57840938d59b415c1e10dcd1f7173" category="cell">支持</block>
  <block id="0e72be2e13bf8a2ff8078d3435e5aa7c" category="cell">介质^1^</block>
  <block id="b45cffe084dd3d20d928bee85e7b0f21" category="cell">string</block>
  <block id="9ccd7f94313a98beb95801927907a0ab" category="cell">HDD ，混合， SSD</block>
  <block id="9bf3032f6854fb376cd8e3e92e11b077" category="cell">Pool 包含此类型的介质；混合表示两者</block>
  <block id="5c79c761bae4c27e96c04e54d1da1e91" category="cell">指定的介质类型</block>
  <block id="c9cb5e737e2746339fd0b462332c8740" category="cell">ontap-nas ， ontap-nas-economy. ontap-nas-flexgroup ， ontap-san ， solidfire-san</block>
  <block id="b713baf75bcf13859037b5274d27d4b8" category="cell">配置类型</block>
  <block id="6026fbd9abd05590949de220154e3262" category="cell">精简，厚</block>
  <block id="3064025fe3541bec9942e14fcaedfab7" category="cell">Pool 支持此配置方法</block>
  <block id="cf65591e3da90317fc132ea7464105d8" category="cell">指定的配置方法</block>
  <block id="55b56fb238360663afa6230ad82e74a0" category="cell">后端类型</block>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="doc"></block>
  <block id="0e1201d4d96df2d9d03c9c66b90874a1" category="cell">池属于此类型的后端</block>
  <block id="c4efe19137f43450149d48fddbab6c28" category="cell">指定后端</block>
  <block id="a04622349b3ede0d4176ca2c2e161763" category="cell">所有驱动程序</block>
  <block id="695633290d050f31cec0c9d4bd4a57fe" category="cell">snapshots</block>
  <block id="c506ff134babdd6e68ab3e6350e95305" category="cell">池</block>
  <block id="ac1ffb15effdc77a86029972670d022f" category="cell">true false</block>
  <block id="4ac43bef181074fbd4a1f3620b46f77f" category="cell">Pool 支持具有快照的卷</block>
  <block id="13410bff9f7871113a6af273e2a1b97f" category="cell">启用了快照的卷</block>
  <block id="bc3832c405ec6cb9c831849328240f3b" category="cell">克隆</block>
  <block id="609d32aa243917905f282544b543752a" category="cell">Pool 支持克隆卷</block>
  <block id="bcb81802de31cf9c717de3c1d6c2f610" category="cell">启用了克隆的卷</block>
  <block id="5bdf74912a51c34815f11e9a3d20b609" category="cell">加密</block>
  <block id="5f2f2cc138a8bc7067c7f61ab4db0f4d" category="cell">池支持加密卷</block>
  <block id="0bda31a93b84fd2b45a90df39c4c8049" category="cell">已启用加密的卷</block>
  <block id="dcc09b4a72e31323b652676ce4677771" category="cell">ontap-nas ， ontap-nas-economy-、 ontap-nas-flexgroups ， ontap-san</block>
  <block id="79073619fba8242703524f16870ff858" category="cell">IOPS</block>
  <block id="fa7153f7ed1cb6c0fcf2ffb2fac21748" category="cell">内部</block>
  <block id="86e5d65893929e5d38b4bdcb9fb48ecd" category="cell">正整数</block>
  <block id="bf57d1db8292b2855fa998a86562cfa7" category="cell">Pool 能够保证此范围内的 IOPS</block>
  <block id="342a7ce5bb7debc6ba84dc2a3bced587" category="cell">卷保证这些 IOPS</block>
  <block id="895f3d78c77292d9761bdabdc3cf0c99" category="paragraph">^1^ ： ONTAP Select 系统不支持</block>
  <block id="5b3c68bde0b3658758a8ebf47ec6abf1" category="paragraph">在大多数情况下，请求的值直接影响配置；例如，请求厚配置会导致卷配置较厚。但是， Element 存储池会使用其提供的 IOPS 最小值和最大值来设置 QoS 值，而不是请求的值。在这种情况下，请求的值仅用于选择存储池。</block>
  <block id="311fa7e17587a62a6fdcb110253feed7" category="paragraph">理想情况下，您可以单独使用 `attributes` 来为满足特定类需求所需的存储质量建模。Trident 会自动发现并选择与您指定的 `属性` 的 _all_ 匹配的存储池。</block>
  <block id="d0c865b74e0c4b4b387506e9e95d22b2" category="paragraph">如果您发现自己无法使用 `attributes` 自动为某个类选择合适的池，则可以使用 `storagePools` 和 `addtionalStoragePools` 参数进一步细化池，甚至可以选择一组特定的池。</block>
  <block id="06a87a25fa98442cf561762851213f7e" category="paragraph">您可以使用 `storagePools` 参数进一步限制与任何指定的 `attributes` 匹配的池集。换言之， Trident 会使用 `attributes` 和 `storagePools` 参数标识的池的交叉点进行配置。您可以单独使用参数，也可以同时使用这两者。</block>
  <block id="0c66a737e57eb6ac0885d2ba6d87cc12" category="paragraph">您可以使用 `addtionalStoragePools` 参数扩展 Trident 用于配置的池集，而不管 `attributes` 和 `storagePools` 参数选择的任何池如何。</block>
  <block id="2ed95c63c6e58641d710e098e7e23154" category="paragraph">您可以使用 `excludeStoragePools` 参数筛选 Trident 用于配置的池集。使用此参数将删除任何匹配的池。</block>
  <block id="9f8bfd75f7eb5b95503bb0abedf83b40" category="paragraph">在 `storagePools` 和 `addtionalStoragePools` 参数中，每个条目的格式为 ` &lt;backend&gt;： &lt;storagePoolList&gt;` ，其中 ` &lt;storagePoolList&gt;` 是指定后端的存储池列表，以逗号分隔。例如， `addtionalStoragePools` 的值可能类似于 `ontapnas_192.168.1.100 ： aggr1 ， aggr2 ； solidfire_192.168.1.101 ： bronze` 。这些列表接受后端值和列表值的正则表达式值。您可以使用 `tridentctl get backend` 来获取后端及其池的列表。</block>
  <block id="c087dddd46fcf0fbbf390abeff2216c3" category="section-title">Kubernetes 属性</block>
  <block id="d05956159ee82aafaaacfe08d33d3be6" category="paragraph">这些属性不会影响 Trident 在动态配置期间选择的存储池 / 后端。相反，这些属性仅提供 Kubernetes 永久性卷支持的参数。工作节点负责文件系统创建操作，并且可能需要文件系统实用程序，例如 xfsprogs 。</block>
  <block id="0e6ac0d7fca9c59e6545312a071555b6" category="cell">相关驱动程序</block>
  <block id="ae6b2a160dd2fafdee385c348edee0c1" category="cell">Kubernetes 版本</block>
  <block id="7cfbb6f07899c8071ff38e69dca190e2" category="cell">FSType</block>
  <block id="64b6d80cc167d5c657b60054dbe396ee" category="cell">ext4 ， ext3 ， xfs 等</block>
  <block id="7928a56d4874d982a06a59e3f30f6935" category="cell">块卷的文件系统类型</block>
  <block id="b1c94ca2fbc3e78fc30069c8d0f01680" category="cell">全部</block>
  <block id="2435c5eb0d842c13f635d4b1d6667a52" category="paragraph">Trident 安装程序包提供了几个示例存储类定义，可用于 ``sample-input/storage-class-* 。 yaml`` 中的 Trident 。删除 Kubernetes 存储类也会删除相应的 Trident 存储类。</block>
  <block id="65d18b5db5d5f35e4ddc5c696687d1bd" category="paragraph">Kubernetes `VolumeSnapshotClass` 对象类似于 `StorageClasses` 。它们有助于定义多个存储类，并由卷快照引用以将快照与所需的快照类关联。每个卷快照都与一个卷快照类相关联。</block>
  <block id="031e09713b698739db52cb150ef97605" category="paragraph">要创建快照，管理员应定义 `VolumeSnapshotClass` 。此时将使用以下定义创建卷快照类：</block>
  <block id="879cd061c6bf448cd6fc39dd56947611" category="paragraph">`driver` 指定给 Kubernetes ，由 Trident 处理对 `csI-snapclass` 类的卷快照请求。`deeltionPolicy` 指定必须删除快照时要执行的操作。如果将 `deletionPolicy` 设置为 `Delete` ，则在删除快照时，卷快照对象以及存储集群上的底层快照将被删除。或者，如果将其设置为 `Retain` ，则表示保留 `VolumeSnapshotContent` 和物理快照。</block>
  <block id="7ba558df52a052235cf288011e5d667c" category="paragraph">Kubernetes `VolumeSnapshot` 对象是创建卷快照的请求。就像 PVC 代表用户对卷发出的请求一样，卷快照也是用户为现有 PVC 创建快照的请求。</block>
  <block id="f67af493d1fd83b472d5f27307b2f3d9" category="paragraph">收到卷快照请求后， Trident 会自动管理在后端为卷创建快照的操作，并通过创建唯一的 `VolumeSnapshotContent` 对象公开快照。您可以从现有 PVC 创建快照，并在创建新 PVC 时将这些快照用作 DataSource 。</block>
  <block id="53847015682974d066a919b1b45a44a5" category="admonition">VolumeSnapshot 的生命周期与源 PVC 无关：即使删除了源 PVC ，快照也会持续存在。删除具有关联快照的 PVC 时， Trident 会将此 PVC 的后备卷标记为 " 正在删除 " 状态，但不会将其完全删除。删除所有关联快照后，卷将被删除。</block>
  <block id="e562bdcf97dce6973a736651f45eb054" category="paragraph">Kubernetes `VolumeSnapshotContent` 对象表示从已配置的卷创建的快照。它类似于 `PersistentVolume` ，表示存储集群上配置的快照。与 `PersistentVolumeClaim` 和 `PersistentVolume` 对象类似，创建快照时， `VolumeSnapshotContent` 对象会与请求创建快照的 `VolumeSnapshot` 对象保持一对一映射。</block>
  <block id="ca8035550d447392debfcaeb62855bd3" category="admonition">Trident 会创建 `VolumeSnapshotContent` 对象，并根据其配置的卷自动将其注册到 Kubernetes 集群中。您不应自行管理它们。</block>
  <block id="af741aec1c66e51c00d35a38f92471de" category="paragraph">`VolumeSnapshotContent` 对象包含用于唯一标识快照的详细信息，例如 `snapshotHandle` 。此 `snapshotHandle` 是 PV 名称和 `VolumeSnapshotContent` 对象名称的唯一组合。</block>
  <block id="b22c73e808eef321ee9941ec2e58b64f" category="paragraph">收到快照请求后， Trident 会在后端创建快照。创建快照后， Trident 会配置一个 `VolumeSnapshotContent` 对象，从而将快照公开到 Kubernetes API 。</block>
  <block id="7c43d52062b795d2d8e7f33b9dbbf671" category="paragraph">Kubernetes 自定义资源是 Kubernetes API 中的端点，由管理员定义并用于对类似对象进行分组。Kubernetes 支持创建自定义资源以存储对象集合。您可以通过运行 `kubectl get crds` 来获取这些资源定义。</block>
  <block id="09d4c17e4e0e002375326eee41d0f77f" category="paragraph">自定义资源定义（ CRD ）及其关联的对象元数据由 Kubernetes 存储在其元数据存储中。这样就无需为 Trident 创建单独的存储。</block>
  <block id="9f59afd5e4687b9960361128f049dae4" category="paragraph">CRD 是一种 Kubernetes 构造。上述资源的对象由 Trident 创建。例如，使用 `tridentctl` 创建后端时，会创建一个对应的 `tridentbackend` CRD 对象，供 Kubernetes 使用。</block>
  <block id="7cdfd680fe492e028cde251c38475469" category="paragraph">有关 Trident 的 CRD ，请注意以下几点：</block>
  <block id="adecfe476427253e9c680a7c5150a9cc" category="list-text">安装 Trident 时，系统会创建一组 CRD ，并可像使用任何其他资源类型一样使用。</block>
  <block id="c4b35352cbf7a52a9444a610687067f8" category="inline-link-macro">卸载 Trident</block>
  <block id="193c267230acf55be171a6a179560847" category="paragraph">Trident 会为 Kubernetes `StorageClass` 在其配置程序字段中指定 `csi.trident.netapp.io`/`netapp.io/trident` 的对象创建匹配的存储类。存储类名称与 Kubernetes `StorageClass` 其所代表的对象的名称匹配。</block>
  <block id="64cf33bfeab6c6bd8aa626b86fda9cbd" category="admonition">使用 Kubernetes 时，如果注册了使用 Trident 作为配置程序的 Kubernetes `StorageClass` ，则会自动创建这些对象。</block>
  <block id="51fa0a833f47d8f00ee2677c6fa7b075" category="paragraph">存储类包含一组卷要求。Trident 会将这些要求与每个存储池中的属性进行匹配；如果匹配，则该存储池是使用该存储类配置卷的有效目标。</block>
  <block id="04d84bba5a5e103ae9c192c03a7ad2f3" category="paragraph">您可以使用 REST API 创建存储类配置以直接定义存储类。但是，对于 Kubernetes 部署，我们希望在注册新的 Kubernetes `StorageClass` 对象时创建这些部署。</block>
  <block id="3c244b984a2188556c1115a5a27dbe1b" category="paragraph">后端表示存储提供程序，其中 Trident 配置卷；单个 Trident 实例可以管理任意数量的后端。</block>
  <block id="d71c5fad4769c19422c07158e24510ba" category="admonition">这是您自己创建和管理的两种对象类型之一。另一个是 Kubernetes `StorageClass` 对象。</block>
  <block id="54fd1dc39c3eecd913b4c9140522996c" category="paragraph">存储池表示可在每个后端配置的不同位置。对于 ONTAP ，这些聚合对应于 SVM 中的聚合。对于 NetApp HCI/SolidFire ，这些 QoS 分段对应于管理员指定的 QoS 分段。对于 Cloud Volumes Service ，这些区域对应于云提供商区域。每个存储池都有一组不同的存储属性，用于定义其性能特征和数据保护特征。</block>
  <block id="4ab1440e71a70a97c4966bcc0095f02b" category="paragraph">与此处的其他对象不同，存储池候选对象始终会自动发现和管理。</block>
  <block id="894765102686902c6acc3024e5bdb9bd" category="paragraph">卷是基本配置单元，由后端端点组成，例如 NFS 共享和 iSCSI LUN 。在 Kubernetes 中，这些卷直接对应于 `PersistentVolumes` 。创建卷时，请确保其具有存储类，此类可确定可配置该卷的位置以及大小。</block>
  <block id="2e53db54827c8c05b7bfe9cb31f299d9" category="admonition">在 Kubernetes 中，这些对象会自动进行管理。您可以查看它们以查看 Trident 配置的内容。</block>
  <block id="22fcc98910d0241e9835f502b7cb2398" category="admonition">删除具有关联快照的 PV 时，相应的 Trident 卷将更新为 * 正在删除 * 状态。要删除 Trident 卷，您应删除该卷的快照。</block>
  <block id="05353bc86910df31b2da9c8d3d26aad1" category="paragraph">卷配置定义了配置的卷应具有的属性。</block>
  <block id="ce9af1e3f0493eb7d5ffdf584ed763ba" category="cell">Trident API 版本（ "1" ）</block>
  <block id="b068931cc450442b63f5b3d276ea4297" category="cell">name</block>
  <block id="a6105c0a611b41b08f1209506350279e" category="cell">是的。</block>
  <block id="017dbd2b0a2195c3e8052cdff67bad39" category="cell">要创建的卷的名称</block>
  <block id="78ec9b60245b46a4f05158076962ace9" category="cell">存储类</block>
  <block id="fa00f346deccdbebef2b3cc0702d41de" category="cell">配置卷时要使用的存储类</block>
  <block id="f7bd60b75b29d79b660a2859395c1a24" category="cell">size</block>
  <block id="264c52ca068dfed30f5826bb054839f4" category="cell">要配置的卷大小（以字节为单位）</block>
  <block id="4f18882934f0472b4bfa32928bf92f14" category="cell">要使用的协议类型； "file" 或 "block"</block>
  <block id="252c6d364cc1a0437939a4f01b0717ae" category="cell">内部名称</block>
  <block id="2857a43e58983276d059c0e6e2fcb0e9" category="cell">存储系统上的对象名称；由 Trident 生成</block>
  <block id="e94d46d7c89bcb7e6ac2e2df4d21bafb" category="cell">ONTAP （ NAS ， SAN ）：将克隆从其父级拆分</block>
  <block id="819549a86d14e849e1d0042c9156d781" category="cell">Snapshot-* ：要使用的 ONTAP 策略</block>
  <block id="e38882545bfedafc7e8ec5973b2e6dd8" category="cell">Snapshot-* ：为快照预留的卷百分比 ONTAP</block>
  <block id="fc86db1233bfa77d5143dcaae9842cb1" category="cell">ontap-nas* ：要使用的导出策略</block>
  <block id="48e1d8180a61943f438c259b2b6715f8" category="cell">ontap-nas* ：是否显示快照目录</block>
  <block id="3f7c94eec4bbf43962e1667f5a334469" category="cell">ontap-nas* ：初始 UNIX 权限</block>
  <block id="4b2d5d83aef608a3fb59ec6eda8bea26" category="cell">SolidFire — * ：块 / 扇区大小</block>
  <block id="62fe71ae4f6a04a6937feb48ba5dc4f4" category="cell">文件系统类型</block>
  <block id="49539689cebb34166a417b3b666818e5" category="paragraph">您可以使用卷配置使用 REST API 直接配置卷，但在 Kubernetes 部署中，我们希望大多数用户使用标准的 Kubernetes `PersistentVolumeClaim` 方法。Trident 会在配置过程中自动创建此卷对象。</block>
  <block id="a1b3787bbd275b7ed5812d022dd36932" category="paragraph">快照是卷的时间点副本，可用于配置新卷或还原状态。在 Kubernetes 中，这些对象直接对应于 `VolumeSnapshotContent` 对象。每个快照都与一个卷相关联，该卷是快照的数据源。</block>
  <block id="cdf5c8d3dd31e49b82a5b3e2c4a65280" category="paragraph">每个 `Snapshot` 对象包括以下属性：</block>
  <block id="27118326006d3829667a400ad23d5d98" category="cell">string</block>
  <block id="93cba07454f06a4a960172bbd6e2a435" category="paragraph">是的。</block>
  <block id="de73fbae2864dd61c921cf0648a9717a" category="cell">Trident Snapshot 对象的名称</block>
  <block id="8e744456fb3d02d69442038d3e771460" category="cell">存储系统上 Trident Snapshot 对象的名称</block>
  <block id="617a43eb0446f84414df73cce2997fa1" category="cell">volumeName</block>
  <block id="b58c8ff1e837af6dafa971bf3d320646" category="cell">为其创建快照的永久性卷的名称</block>
  <block id="2c2aed4b417a0f9c189d7ad6414ae28c" category="cell">volumeInternalName</block>
  <block id="db1a117103c348ebaec41f9e249554c3" category="cell">存储系统上关联的 Trident 卷对象的名称</block>
  <block id="73f3d5934fdd36989f24cbae94ab423b" category="paragraph">创建 Kubernetes `VolumeSnapshot` 对象请求时， Trident 会在备用存储系统上创建 Snapshot 对象。此快照对象的 `internalName` 是通过将前缀 `snapshot-` 与 `VolumeSnapshot` 对象的 `UID` （例如， `snapshot-e8d8a0ca-9826-11e9-9807-525400f3f660` ）组合而生成的。`VolumeName` 和 `volumeInternalName` 可通过获取后备卷的详细信息来填充。</block>
  <block id="e977c869b42c54e3c7d8fb9c071aab2b" category="summary">详细了解 Astra Trident 所通过的端口。</block>
  <block id="b229055f6bd047c28dfc84c9bee4c252" category="doc">Astra Trident 端口</block>
  <block id="219abf04d1bb79760c15ca6966b68fb3" category="paragraph">Astra Trident 通过以下端口进行通信：</block>
  <block id="60aaf44d4b562252c04db7f98497e9aa" category="cell">Port</block>
  <block id="261addf78c7b2c961032b3dd08ba0b1f" category="cell">目的</block>
  <block id="7e6b20d014d1c659e4eaf20dc2dcd7eb" category="cell">8443</block>
  <block id="69bbf3571db03f0487c04a8254d15c75" category="cell">后通道 HTTPS</block>
  <block id="bc3c4a6331a8a9950945a1aa8c95ab8a" category="cell">8001</block>
  <block id="e5a4c481cc6f5935efb2c9d381f2e342" category="cell">Prometheus 指标端点</block>
  <block id="67ff32d40fb51f1a2fd2c4f1b1019785" category="cell">8000</block>
  <block id="10f5b805a46ea829cc3b9d8560a224ae" category="cell">Trident REST 服务器</block>
  <block id="35cf0f704286108deb76366a16415140" category="cell">17546</block>
  <block id="fb1396f82d0096741ea1b06f8cee2340" category="cell">Trident demonset Pod 使用的活动性 / 就绪性探测端口</block>
  <block id="d59b86d1714966230da7a00672e40912" category="summary">使用此处列出的建议确保您的 Astra Trident 安装安全。</block>
  <block id="2fae32629d4ef4fc6341f1751b405e45" category="doc">安全性</block>
  <block id="44a736677691eaca5e5d3d6b5c770b22" category="section-title">在自己的命名空间中运行 Astra Trident</block>
  <block id="347d4c35796a862cf20cdcdebfe59e57" category="paragraph">请务必防止应用程序，应用程序管理员，用户和管理应用程序访问 Astra Trident 对象定义或 Pod ，以确保存储可靠并阻止潜在的恶意活动。</block>
  <block id="47d7f9fac441e60d9523d256d02aa8ba" category="paragraph">要将其他应用程序和用户与 Astra Trident 分开，请始终在自己的 Kubernetes 命名空间（`trident` ）中安装 Astra Trident 。将 Astra Trident 置于自己的命名空间中可确保只有 Kubernetes 管理人员才能访问 Astra Trident Pod 以及存储在命名空间 CRD 对象中的项目（如适用，还包括后端和 CHAP 密码）。您应确保仅允许管理员访问 Astra Trident 命名空间，从而访问 `tridentctl` 应用程序。</block>
  <block id="f40aef657c875e42158050f63dcfbb6f" category="section-title">对 ONTAP SAN 后端使用 CHAP 身份验证</block>
  <block id="2738c60dc60977d9eb6af2bf2a98c193" category="paragraph">Astra Trident 支持对 ONTAP SAN 工作负载进行基于 CHAP 的身份验证（使用 `ontap-san` 和 `ontap-san-economy.` 驱动程序）。NetApp 建议将双向 CHAP 与 Astra Trident 结合使用，以便在主机和存储后端之间进行身份验证。</block>
  <block id="6c92285fa6d3e827b198d120ea3ac674" category="inline-link-macro">此处</block>
  <block id="d4e0ad8fd8e11d87eb431051692db344" category="section-title">对 NetApp HCI 和 SolidFire 后端使用 CHAP 身份验证</block>
  <block id="75f3d382f074f14c775efb5cf2f23c30" category="summary">在部署 Astra Trident 时，请使用此处列出的建议。</block>
  <block id="ea355214fd4bc7c57f471bd92918879b" category="doc">部署</block>
  <block id="d89d3b3161292ef0c65342cbe80e883f" category="section-title">部署到专用命名空间</block>
  <block id="13d28e8dfc702e3456e0767dff9a128a" category="inline-link">命名空间</block>
  <block id="79a77cdda2a2513aee654190c73f15ab" category="paragraph"><block ref="c41296e544cd0faaa4fe4e8b22535287" category="inline-link-rx"></block> 在不同应用程序之间实现管理隔离，是资源共享的障碍。例如，一个命名空间中的 PVC 不能从另一个命名空间中使用。Astra Trident 为 Kubernetes 集群中的所有命名空间提供 PV 资源，从而利用具有提升权限的服务帐户。</block>
  <block id="853cf568613b7eec1486421468e18b9b" category="paragraph">此外，访问 Trident POD 可能会使用户能够访问存储系统凭据和其他敏感信息。请务必确保应用程序用户和管理应用程序无法访问 Trident 对象定义或 Pod 本身。</block>
  <block id="2c8e89de5c6bf68b180cff5fea545167" category="section-title">使用配额和范围限制来控制存储消耗</block>
  <block id="74444eaf90c31d151645e59dcab0468d" category="inline-link">存储配额机制</block>
  <block id="1d81c150d54eae0c49d9cfeb8d493b0f" category="inline-link">范围限制</block>
  <block id="94104e476fe547cf6237480cacae5ed5" category="paragraph">Kubernetes 具有两项功能，这些功能结合使用后，可提供一种功能强大的机制来限制应用程序的资源消耗。。<block ref="bff513af91e6751aca3d34ef714e3b91" category="inline-link-rx"></block> 使管理员能够在每个命名空间基础上实施全局容量和对象计数消耗限制以及特定于存储类的限制。此外，使用<block ref="dbe9770513b0f7245f1fe016d20ebb70" category="inline-link-rx"></block> 确保在将 PVC 请求转发给配置程序之前，该请求同时处于最小值和最大值范围内。</block>
  <block id="4f9253eda0573e387f86d7777aafff03" category="inline-link">如何利用配额</block>
  <block id="923169151e05d28a3474b2a033666297" category="paragraph">这些值是按命名空间定义的，这意味着每个命名空间都应定义符合其资源要求的值。有关信息，请参见此处<block ref="5b289b2ffde01314d8b0d038aabd709b" category="inline-link-rx"></block>。</block>
  <block id="698aa9df4c2c5470599821c3d10620dd" category="summary">Kubernetes 集群通常由两种类型的节点组成，每种节点负责不同的功能方面。</block>
  <block id="6e8775bd755a8835ce86806d669677ea" category="doc">存储配置</block>
  <block id="ac5112696fd64ee051846c666ebebebe" category="paragraph">您应遵循使用所使用协议的主机操作系统的基线最佳实践。或者，您也可以考虑将应用程序最佳实践（如果有）与后端，存储类和 PVC 设置结合使用，以便为特定应用程序优化存储。</block>
  <block id="efc9d085ca2f3a152c786357e9359c03" category="section-title">ONTAP 和 Cloud Volumes ONTAP 最佳实践</block>
  <block id="a3f99d5d44515cf922e6b525de736173" category="paragraph">了解为 Trident 配置 ONTAP 和 Cloud Volumes ONTAP 的最佳实践。</block>
  <block id="76d50c7d0f100e6264e0d57727d099f1" category="paragraph">以下建议是为容器化工作负载配置 ONTAP 的准则，容器化工作负载会占用 Trident 动态配置的卷。应考虑并评估每个问题在您的环境中的适用性。</block>
  <block id="3fb21976d2729216782dd61ffed84a54" category="section-title">使用专用于 Trident 的 SVM</block>
  <block id="fa4e21d3612a3f737c7a4ac7ebf24950" category="paragraph">Storage Virtual Machine （ SVM ）可在 ONTAP 系统上的租户之间实现隔离和管理隔离。通过将 SVM 专用于应用程序，可以委派特权并应用最佳实践来限制资源消耗。</block>
  <block id="3dc5510a67688b81f0d6d0db440da909" category="paragraph">可通过多种方法管理 SVM ：</block>
  <block id="fe425a9419fa4d05d42131c26306e4f1" category="list-text">在后端配置中提供集群管理接口以及相应的凭据，并指定 SVM 名称。</block>
  <block id="e2160df70bcda0ee43cb3c66dc22c719" category="list-text">使用 ONTAP 系统管理器或命令行界面为 SVM 创建专用管理接口。</block>
  <block id="2bf2fa2c1c3a6e10095db72759cc9983" category="list-text">与 NFS 数据接口共享管理角色。</block>
  <block id="5cf4c2e89b362842d77f4e4209c4ef99" category="paragraph">在每种情况下，接口都应位于 DNS 中，配置 Trident 时应使用 DNS 名称。这有助于在不使用网络身份保留的情况下实施某些灾难恢复方案，例如 SVM-DR 。</block>
  <block id="6a392b5e005fffe32231c94dc96a1605" category="inline-link">SVM-DR</block>
  <block id="2b4a6ee2db063653d6076884295a3854" category="paragraph">在为 SVM 配置专用管理 LIF 或共享管理 LIF 之间没有任何偏好，但是，您应确保网络安全策略与您选择的方法一致。无论如何，管理 LIF 应可通过 DNS 访问，以实现最大的灵活性<block ref="f5e9502989ce78934689806ebb69606a" category="inline-link-rx"></block> 与 Trident 结合使用。</block>
  <block id="4a0ee008d3379206a925ade3a9e707dd" category="section-title">限制最大卷数</block>
  <block id="e5e09031843479ef9ef8cbbd4c2f404c" category="inline-link">NetApp Hardware Universe</block>
  <block id="400a5d259a812effb5b7df506bf020ef" category="paragraph">ONTAP 存储系统具有最大卷数，具体取决于软件版本和硬件平台。请参见<block ref="bb9c67b5a4c15a85b5e6aa6c9afd0285" category="inline-link-rx"></block> 以 ONTAP 确定确切限制。当卷计数用尽时，配置操作不仅会对 Trident 失败，而且会对所有存储请求失败。</block>
  <block id="39da19b7dd55941b6cdabf34befc0b4c" category="paragraph">Trident 的 `ontap-nas` 和 `ontap-san` 驱动程序为创建的每个 Kubernetes 永久性卷（ PV ）配置一个 FlexVolume 。`ontap-nas-economy` 驱动程序会为每 200 个 PV 创建大约一个 FlexVolume （可在 50 到 300 之间配置）。`ontap-san-economy-经济` 驱动程序会为每 100 个 PV 创建大约一个 FlexVolume （可配置为 50 到 200 ）。要防止 Trident 占用存储系统上的所有可用卷，您应对 SVM 设置限制。您可以从命令行执行此操作：</block>
  <block id="f36680e3d3cb96c74d2f1a54c3c4a0fa" category="paragraph">`max-volumes` 的值因环境的特定条件而异：</block>
  <block id="5f6d1abb6889904ee0375b2fc6c8f078" category="list-text">ONTAP 集群中现有卷的数量</block>
  <block id="029383c13d9ad2c5ba18a16f8fbe2002" category="list-text">希望在 Trident 之外为其他应用程序配置的卷数</block>
  <block id="02f4ac473b944a63551d51d727b5bb49" category="list-text">Kubernetes 应用程序预期占用的永久性卷数</block>
  <block id="1d3555f20ac0a2897a1596631b5fb27a" category="paragraph">`max-volumes` 值是在 ONTAP 集群中的所有节点上配置的总卷数，而不是在单个 ONTAP 节点上配置的总卷数。因此，在某些情况下， ONTAP 集群节点所配置的 Trident 卷可能远远多于或少于其他节点。</block>
  <block id="46710fe77f663864a23e02a880a9ae53" category="inline-link">聚合</block>
  <block id="8eb27359ed8f69eb07c318fcd224ba66" category="paragraph">例如，一个双节点 ONTAP 集群最多可以托管 2000 个 FlexVolume 。将最大卷数设置为 1250 似乎非常合理。但是，如果只是<block ref="acf6cbef6ee0ef07ee3fe13269233be8" category="inline-link-rx"></block> 从一个节点分配给 SVM ，或者从一个节点分配的聚合无法配置（例如，由于容量），则另一个节点将成为所有 Trident 配置卷的目标。这意味着，在达到 `max-volumes` 值之前，可能会达到该节点的卷限制，从而影响使用该节点的 Trident 和其他卷操作。* 您可以通过确保将集群中每个节点的聚合分配给 Trident 使用的 SVM 来避免这种情况。 *</block>
  <block id="7ef3217c984ef7f973d389e434be312c" category="section-title">限制 Trident 创建的卷的最大大小</block>
  <block id="031b203330c3abb94f6fa406ff721de4" category="paragraph">要为 Trident 可以创建的卷配置最大大小，请在 `backend.json` 定义中使用 `limitVolumeSize` 参数。</block>
  <block id="1c19414de17c9992b25b0a1b02a52715" category="paragraph">除了控制存储阵列上的卷大小之外，您还应利用 Kubernetes 功能。</block>
  <block id="85c0f9773e01224a56713ea4e6d83b86" category="section-title">配置 Trident 以使用双向 CHAP</block>
  <block id="2596e59ce5cd0d1b0066656f191365d0" category="section-title">创建并使用 SVM QoS 策略</block>
  <block id="560417d4f795b7e1176a40db8e4ccca8" category="inline-link">防止抢占资源</block>
  <block id="4870168b0713fe3089cf587858fc3b40" category="paragraph">利用应用于 SVM 的 ONTAP QoS 策略，限制 Trident 配置的卷可使用的 IOPS 数量。这有助于实现<block ref="1b59d76842e8b78d6111d3e73e9cd404" category="inline-link-rx"></block> 或控制不足的容器，以使其不会影响 Trident SVM 以外的工作负载。</block>
  <block id="d6ab867679686745d96bea839929a6de" category="paragraph">您可以通过几个步骤为 SVM 创建 QoS 策略。有关最准确的信息，请参见适用于您的 ONTAP 版本的文档。以下示例将创建一个 QoS 策略，将 SVM 可用的总 IOPS 限制为 5000 。</block>
  <block id="c790de304b7ca0097f2133cf9da4e657" category="paragraph">此外，如果您的 ONTAP 版本支持此功能，则可以考虑使用最低 QoS 来保证容器化工作负载的吞吐量。自适应 QoS 与 SVM 级别策略不兼容。</block>
  <block id="38c0b69f6b2ee691e1ba568134513414" category="paragraph">专用于容器化工作负载的 IOPS 数量取决于许多方面。其中包括：</block>
  <block id="ddbd18591c9b7378c6187dbd9179e1f0" category="list-text">使用存储阵列的其他工作负载。如果存在与 Kubernetes 部署无关的其他工作负载，则应注意利用存储资源，以确保这些工作负载不会意外受到不利影响。</block>
  <block id="5da5727b396cee5b024364d989fe253b" category="list-text">容器中运行的预期工作负载。如果 IOPS 要求较高的工作负载将在容器中运行，则 QoS 策略较低会导致出现不良体验。</block>
  <block id="e6f229b5d5d2421c4306920759828212" category="paragraph">请务必记住，在 SVM 级别分配的 QoS 策略会导致配置到 SVM 的所有卷共享同一个 IOPS 池。如果一个或少量容器化应用程序的 IOPS 要求较高，则可能会成为其他容器化工作负载的抢占资源的应用程序。如果是这种情况，您可能需要考虑使用外部自动化来分配每个卷的 QoS 策略。</block>
  <block id="ac2167b1e02d575eb6ddfe4e58f5cdcf" category="admonition">如果 ONTAP 版本早于 9.8 ，则应将此 QoS 策略组分配给 SVM * 仅 * 。</block>
  <block id="9992cae6c17055c750a849c5f6135eb2" category="section-title">为 Trident 创建 QoS 策略组</block>
  <block id="76a3e54f72b3a7224429f111e58f836c" category="inline-link">通过 QoS 保证吞吐量</block>
  <block id="edb2313b52b4c42008f0531bd6a05e49" category="paragraph">服务质量（ QoS ）可确保关键工作负载的性能不会因争用工作负载而降级。ONTAP QoS 策略组为卷提供 QoS 选项，并使用户能够为一个或多个工作负载定义吞吐量上限。有关 QoS 的详细信息，请参见<block ref="721a1778a2025ec5868484b3888c0186" category="inline-link-rx"></block>。您可以在后端或存储池中指定 QoS 策略组，这些策略组将应用于该池或后端创建的每个卷。</block>
  <block id="0394fb1288eac4cd3d40bcd991e079e9" category="paragraph">ONTAP 有两种类型的 QoS 策略组：传统和自适应。传统策略组以 IOPS 为单位提供固定的最大（或最小）吞吐量。自适应 QoS 会根据工作负载大小自动扩展吞吐量，并在工作负载大小发生变化时保持 IOPS 与 TBSGB 的比率。如果您要在大型部署中管理数百或数千个工作负载，则这将带来显著优势。</block>
  <block id="f5acc65a21daed9bb8e91cb5cdd0ae52" category="paragraph">创建 QoS 策略组时，请考虑以下事项：</block>
  <block id="6d5fcf300cd9e9239c26ce37b0919fca" category="list-text">您应在后端配置的 `defaults` 块中设置 `qosPolicy` 密钥。请参见以下后端配置示例：</block>
  <block id="32160c2368452bf7d86bcffae7f142be" category="list-text">您应该对每个卷应用策略组，以便每个卷都获得策略组指定的整个吞吐量。不支持共享策略组。</block>
  <block id="b2365e059850d5e32885189655bf469c" category="inline-link">ONTAP 9.8 QoS 命令</block>
  <block id="23225608cf33a6c6a4aec9126514b0e1" category="paragraph">有关 QoS 策略组的详细信息，请参见<block ref="40468e984a92fba9003857701268163a" category="inline-link-rx"></block>。</block>
  <block id="d5d2a5bc92eea85a4dd11a642ed8a170" category="section-title">将存储资源访问限制为 Kubernetes 集群成员</block>
  <block id="0f2b74d1b972675eb3d4efe7d8c3ed16" category="paragraph">限制对 Trident 创建的 NFS 卷和 iSCSI LUN 的访问是 Kubernetes 部署安全状况的重要组成部分。这样可以防止不属于 Kubernetes 集群的主机访问卷并可能意外修改数据。</block>
  <block id="9602ec8691c1a564016f9fd8086139f1" category="paragraph">请务必了解命名空间是 Kubernetes 中资源的逻辑边界。假设同一命名空间中的资源可以共享，但重要的是，没有跨命名空间功能。这意味着，即使 PV 是全局对象，但在绑定到 PVC 时，它们只能由同一命名空间中的 Pod 访问。* 请务必确保使用命名空间在适当时提供分隔。 *</block>
  <block id="1162be0546226cff2cbd973cd2140d33" category="paragraph">大多数组织在 Kubernetes 环境中的数据安全方面的主要顾虑是，容器中的进程可以访问挂载到主机但不适用于容器的存储。 <block ref="962cfea7b49ca7b2d398d891b4313cb5" category="inline-link-rx"></block> 旨在防止这种类型的损害。但是，存在一个例外：特权容器。</block>
  <block id="7b10e929cc2e0061dfb50042a0203c79" category="inline-link">POD 安全策略</block>
  <block id="76db1afb772160283f7f86cdd67c35f8" category="paragraph">有权限的容器是指运行时拥有比正常情况更多主机级别权限的容器。默认情况下，这些选项不会被拒绝，因此请确保使用禁用此功能<block ref="e5ab4ede40a4a6a5f5684247585b5fb0" category="inline-link-rx"></block>。</block>
  <block id="5fabba1d91abcfb09b6049897727e91c" category="paragraph">对于需要从 Kubernetes 和外部主机访问的卷，应采用传统方式管理存储，并由管理员引入 PV ，而不是由 Trident 管理。这样可以确保只有在 Kubernetes 和外部主机断开连接且不再使用此卷时，才会销毁此存储卷。此外，还可以应用自定义导出策略，以便从 Kubernetes 集群节点和 Kubernetes 集群以外的目标服务器进行访问。</block>
  <block id="e38f5be5ff6a8a362870a032acdf5d2f" category="section-title">使用专用导出策略</block>
  <block id="28af9e32119f59018dd5d887ad93ccd4" category="paragraph">或者，您也可以手动创建导出策略，并使用一个或多个导出规则来填充此策略，这些导出规则用于处理每个节点访问请求：</block>
  <block id="4ae1e64986504dce6897746ebc9d2786" category="list-text">使用 `vserver export-policy create` ONTAP 命令行界面命令创建导出策略。</block>
  <block id="cd0a9fca1fb3ba0fcdd98d0e87cb78a9" category="list-text">使用 `vserver export-policy rule create` ONTAP 命令行界面命令向导出策略添加规则。</block>
  <block id="bc3a2f6421da1e870583cfb0b9cf4a91" category="paragraph">通过运行这些命令，您可以限制哪些 Kubernetes 节点可以访问数据。</block>
  <block id="613655fb3db9bdbe0f795ee9424fc1fe" category="paragraph">通过 `showmount` 功能， NFS 客户端可以向 SVM 查询可用 NFS 导出列表。部署到 Kubernetes 集群的 Pod 可以对数据 LIF 执行问题描述 `showmount -e` 命令，并接收可用挂载列表，包括其无权访问的挂载。虽然这本身并不会影响安全，但它确实会提供不必要的信息，可能有助于未经授权的用户连接到 NFS 导出。</block>
  <block id="08f1d9a2f49f56965b640bc15796cd61" category="paragraph">您应使用 SVM 级别的 ONTAP 命令行界面命令禁用 `showmount` ：</block>
  <block id="648e0e1a6a98e76bdfe9780c42dacb6b" category="section-title">SolidFire 最佳实践</block>
  <block id="89f93e411a40f5c6365a4703e004f15b" category="paragraph">了解为 Trident 配置 SolidFire 存储的最佳实践。</block>
  <block id="52f311b56fcd9d4fb074918af9b7c7f9" category="section-title">创建 SolidFire 帐户</block>
  <block id="b0dd2707e9f12b5e1fda314748ffa386" category="paragraph">每个 SolidFire 帐户都代表一个唯一的卷所有者，并接收自己的一组质询握手身份验证协议（ Challenge-Handshake Authentication Protocol ， CHAP ）凭据。您可以使用帐户名称和相对 CHAP 凭据或通过卷访问组访问分配给帐户的卷。一个帐户最多可以分配 2 ， 000 个卷，但一个卷只能属于一个帐户。</block>
  <block id="eaf4b71058f7db58997dfe694c62a96a" category="section-title">创建 QoS 策略</block>
  <block id="fd640dfd679c3a7e40aa99c3e08c8294" category="paragraph">如果要创建并保存可应用于多个卷的标准化服务质量设置，请使用 SolidFire 服务质量（ QoS ）策略。</block>
  <block id="41be5238fc563c2aac0a0e6ee4cf6e96" category="paragraph">您可以按卷设置 QoS 参数。通过设置三个可配置的参数来定义 QoS ，可以确保每个卷的性能：最小 IOPS ，最大 IOPS 和突发 IOPS 。</block>
  <block id="48e4bd34fd7a9e1233ea82bc818a3161" category="paragraph">以下是 4 KB 块大小的可能最小，最大和突发 IOPS 值。</block>
  <block id="8e4988a1e5f387efce6f20e4f25a8e40" category="cell">IOPS 参数</block>
  <block id="0b890b1926b90387673882e6ccae7fdc" category="cell">定义</block>
  <block id="96a22bf638896c990d26e043087fb6b0" category="cell">最小value</block>
  <block id="31ce3cdcd67850870b616f75b555bbc5" category="cell">默认值</block>
  <block id="c9fb55be94277b8390352c215f32d44c" category="cell">最大值（ 4 KB ）</block>
  <block id="b05f9ccd772b396ac1f5a05345a9d4f8" category="paragraph">最小 IOPS</block>
  <block id="2b30c179facf62f8a2bdbd1b09b37b96" category="paragraph">卷的性能保障级别。</block>
  <block id="c0c7c76d30bd3dcaefc96f40275bdc0a" category="cell">50</block>
  <block id="3f74a886c7f841699690962c497d4f30" category="paragraph">15000</block>
  <block id="4f5a6f8b41826526724ba294b8e056bd" category="paragraph">最大 IOPS</block>
  <block id="4e41c5ccaf1affa697729ea4d1e88554" category="paragraph">性能不会超过此限制。</block>
  <block id="e05695d29cb4a9339534e5a9c273fa14" category="paragraph">200,000</block>
  <block id="affd4aba1c5f696e972368c9eb698c65" category="paragraph">突发 IOPS</block>
  <block id="2734923c054f38d8ca66133414af4469" category="paragraph">在短时突发情形下允许的最大 IOPS 。</block>
  <block id="e2eb05f1ef7720127ac371ceddc6f433" category="admonition">虽然最大 IOPS 和突发 IOPS 可设置为高达 200 ， 000 ，但卷的实际最大性能受集群使用情况和每节点性能的限制。</block>
  <block id="fa9b1a3006e0ba9ad904c059c0b9add6" category="inline-link">SolidFire 服务质量</block>
  <block id="7363485d4653963c22d3ed43afd0003a" category="paragraph">块大小和带宽会直接影响 IOPS 数量。随着块大小的增加，系统会将带宽增加到处理较大块大小所需的级别。随着带宽的增加，系统能够达到的 IOPS 数量也会减少。请参见<block ref="c8976c50ed9f016849fdce232777cd31" category="inline-link-rx"></block> 有关 QoS 和性能的详细信息。</block>
  <block id="b4657825f74ed622384dddf3a1d7d3b7" category="section-title">SolidFire 身份验证</block>
  <block id="9d3b5ff1cde828a63203f0465a34a967" category="paragraph">Element 支持两种身份验证方法： CHAP 和卷访问组（ VAG ）。CHAP 使用 CHAP 协议向后端对主机进行身份验证。卷访问组控制对其配置的卷的访问。NetApp 建议使用 CHAP 进行身份验证，因为它更简单，并且没有扩展限制。</block>
  <block id="fc9e812321a3f9b0eab1b702a08bab4e" category="admonition">具有增强型 CSI 配置程序的 Trident 支持使用 CHAP 身份验证。VAG 只能在传统的非 CSI 操作模式下使用。</block>
  <block id="d23eaa75b7bd1405526da0e18b7290ac" category="paragraph">只有基于帐户的访问控制才支持 CHAP 身份验证（验证启动程序是否为目标卷用户）。如果使用 CHAP 进行身份验证，则可以使用两个选项：单向 CHAP 和双向 CHAP 。单向 CHAP 使用 SolidFire 帐户名称和启动程序密钥对卷访问进行身份验证。双向 CHAP 选项可提供最安全的卷身份验证方法，因为卷会通过帐户名称和启动程序密钥对主机进行身份验证，然后主机通过帐户名称和目标密钥对卷进行身份验证。</block>
  <block id="42d135bea104c1079cebd1543c89e970" category="paragraph">但是，如果无法启用 CHAP 且需要使用 VAG ，请创建访问组并将主机启动程序和卷添加到此访问组。添加到访问组的每个 IQN 都可以使用或不使用 CHAP 身份验证访问组中的每个卷。如果将 iSCSI 启动程序配置为使用 CHAP 身份验证，则会使用基于帐户的访问控制。如果 iSCSI 启动程序未配置为使用 CHAP 身份验证，则会使用卷访问组访问控制。</block>
  <block id="b4931a42b69dbf4e721e7b97873b1ebb" category="section-title">如何查找更多信息</block>
  <block id="2c3a4d5c923121574c10ea22c0474a01" category="inline-link">NetApp 库</block>
  <block id="65840df7365892d2abe1280cb6cdb1d2" category="paragraph">下面列出了一些最佳实践文档。搜索<block ref="4caccef7312f2c398bfbb419629c1a78" category="inline-link-rx"></block> 对于最新版本。</block>
  <block id="d911b17f4f4cdcca62a04ad77aa9403d" category="paragraph">* ONTAP *</block>
  <block id="f9dd52d280693dc59e53b6e1fb7bd801" category="inline-link">NFS 最佳实践和实施指南</block>
  <block id="40bb23d54df7f59219c18f15a346d9e5" category="list-text"><block ref="40bb23d54df7f59219c18f15a346d9e5" category="inline-link-rx"></block></block>
  <block id="a76193f5d9397d9c49ca283a20ccf649" category="inline-link">《 SAN 管理指南》</block>
  <block id="5bc9b097037d45aff954bf9bd632d4a4" category="list-text"><block ref="c745f55eb0c9991966e63f0608541bb1" category="inline-link-rx"></block> （对于 iSCSI ）</block>
  <block id="5ca34d6ffc2a555b689542e3fbeeb7af" category="inline-link">适用于 RHEL 的 iSCSI 快速配置</block>
  <block id="36588ac65dcdb9b93916fb0ab708edb3" category="list-text"><block ref="36588ac65dcdb9b93916fb0ab708edb3" category="inline-link-rx"></block></block>
  <block id="ca7ab5ec4cba84fbef55956bb38759ce" category="paragraph">* Element 软件 *</block>
  <block id="e809d9f88c2933195c4d2ab379c1b5dc" category="inline-link">配置适用于 Linux 的 SolidFire</block>
  <block id="ce0470e08aa854a8f93fa119434e8422" category="list-text"><block ref="ce0470e08aa854a8f93fa119434e8422" category="inline-link-rx"></block></block>
  <block id="d64280eb12d42bb67976ffba6d268e7b" category="paragraph">* NetApp HCI *</block>
  <block id="3bc72bedcc42d144356d4f933c48485d" category="inline-link">NetApp HCI 部署前提条件</block>
  <block id="85bfffc1a1f7aaabd6cf58841640c308" category="list-text"><block ref="85bfffc1a1f7aaabd6cf58841640c308" category="inline-link-rx"></block></block>
  <block id="b52e411998b7d3a95ad5bd8a320bf271" category="inline-link">访问 NetApp 部署引擎</block>
  <block id="9d0da73b02655dd7861121905db229e2" category="list-text"><block ref="9d0da73b02655dd7861121905db229e2" category="inline-link-rx"></block></block>
  <block id="9aaca8cfd79770bc4944ccc477e37141" category="paragraph">* 应用程序最佳实践信息 *</block>
  <block id="27a5e02bc2fadee43ace94805739a0c8" category="inline-link">基于 ONTAP 的 MySQL 最佳实践</block>
  <block id="40d2eaf9adabe99a601c57eabf49e4d3" category="list-text"><block ref="40d2eaf9adabe99a601c57eabf49e4d3" category="inline-link-rx"></block></block>
  <block id="17efdd7d210511985714be299d595292" category="inline-link">基于 SolidFire 的 MySQL 最佳实践</block>
  <block id="d03b53d8ec563c37e16ee8c900a75b96" category="list-text"><block ref="d03b53d8ec563c37e16ee8c900a75b96" category="inline-link-rx"></block></block>
  <block id="3aefe1a041af945f1fe8673bf775057b" category="inline-link">NetApp SolidFire 和 Cassandra</block>
  <block id="7e2b19f6f6bd1332efe1f7a698984670" category="list-text"><block ref="7e2b19f6f6bd1332efe1f7a698984670" category="inline-link-rx"></block></block>
  <block id="6e580111d3a8c12cdcd9522a4d3484c6" category="inline-link">SolidFire 上的 Oracle 最佳实践</block>
  <block id="6db96715cefe9c4950ef722865494128" category="list-text"><block ref="6db96715cefe9c4950ef722865494128" category="inline-link-rx"></block></block>
  <block id="6448cf37496207be126495e5b05851de" category="inline-link">SolidFire 上的 PostgreSQL 最佳实践</block>
  <block id="eb2c92a9d2d39fa7191d6e84d5c33bb5" category="list-text"><block ref="eb2c92a9d2d39fa7191d6e84d5c33bb5" category="inline-link-rx"></block></block>
  <block id="b062996d6ca590abe798d3db75561f79" category="paragraph">并非所有应用程序都有特定的准则，与您的 NetApp 团队合作并使用非常重要<block ref="4caccef7312f2c398bfbb419629c1a78" category="inline-link-rx"></block> 以查找最新文档。</block>
  <block id="748c130a6179b02d614cf9a027294302" category="doc">集成 Astra Trident</block>
  <block id="1fdc23c8579638d050b7b219da011f2b" category="section-title">驱动程序选择和部署</block>
  <block id="815a377da65ae5b66c84438c43416d82" category="paragraph">更高级别的是，如果您的应用程序中的组件需要共享存储（多个 Pod 访问同一个 PVC ），则基于 NAS 的驱动程序将成为默认选项，而基于块的 iSCSI 驱动程序则可满足非共享存储的需求。根据应用程序要求以及存储和基础架构团队的舒适程度选择协议。一般来说，对于大多数应用程序来说，它们之间没有什么区别，因此通常是根据是否需要共享存储（多个 POD 需要同时访问）来决定的。</block>
  <block id="c2c889ded63fbe94cf7f1d5fe4747b2d" category="list-text">`ontap-NAS` ：配置的每个 PV 都是一个完整的 ONTAP FlexVolume 。</block>
  <block id="9418583a1b7e700d24bcc735aa4682b5" category="list-text">`ontap-nas-economy.` ：配置的每个 PV 都是一个 qtree ，每个 FlexVolume 的 qtree 数量是可配置的（默认值为 200 ）。</block>
  <block id="bc8f11db54909209ba09d55ee0b46990" category="list-text">`ontap-nas-flexgroup` ：使用配置为完整 ONTAP FlexGroup 的每个 PV ，以及分配给 SVM 的所有聚合。</block>
  <block id="5e587346b7a212ee6429303276a1578b" category="list-text">`ontap-san` ：配置的每个 PV 都是其自身 FlexVolume 中的一个 LUN 。</block>
  <block id="85f6f5093b037b5bde3201d8136ee585" category="list-text">`ontap-san-economi` ：配置的每个 PV 都是一个 LUN ，每个 FlexVolume 具有可配置的 LUN 数量（默认值为 100 ）。</block>
  <block id="f1d8371af632688748db007c98766ded" category="paragraph">在三个 NAS 驱动程序之间进行选择会对应用程序可用的功能产生一些影响。</block>
  <block id="8a1187760a2c55e422a454a64e160291" category="paragraph">请注意，在下表中，并非所有功能都通过 Astra Trident 公开。如果需要某些功能，存储管理员必须在配置后应用这些功能。上标脚注区分了每个功能和驱动程序的功能。</block>
  <block id="6252699c8e049f40eaf187092727a531" category="cell">ONTAP NAS 驱动程序</block>
  <block id="9147e5e61a7b9260dec09f3a6eb3e5be" category="cell">快照</block>
  <block id="999cc42b236c7aee1157ff02d6f1bcd5" category="cell">克隆</block>
  <block id="13bc190bfed9f972b3e33e3656737cdd" category="cell">动态导出策略</block>
  <block id="ab0c646b4c5e36d9bcf8239d97fd1843" category="cell">多连接</block>
  <block id="8f2db90dd4a6fbd95ba8f0bc54fd6b27" category="cell">QoS</block>
  <block id="9d723d04c40bfd81835c0766a698cf63" category="cell">调整大小</block>
  <block id="8c340dc334134096f68b880b42a8692c" category="cell">Replication</block>
  <block id="00055dac2ba112b87a95a368075b9561" category="cell">`ontap-NAS`</block>
  <block id="6bfc395e3d384b30d9f43ca45b1eeff7" category="cell">是脚注： 5[]</block>
  <block id="7c078cb746c3dd22969c07747fd7f3fc" category="cell">是脚注： 1[]</block>
  <block id="cecdaed309330a9e7dea16b2076957ee" category="cell">`ontap-nas-economy.`</block>
  <block id="e4e9da2a7bd5e2b5b29c51299a1b787f" category="cell">是脚注： 3[]</block>
  <block id="2b8ac774302bd45e0ad531e434d8cd6d" category="cell">`ontap-nas-flexgroup`</block>
  <block id="bafd7322c6e97d25b6299b5d6fe8920b" category="cell">否</block>
  <block id="15861eb7768c6587d321b6010008930e" category="paragraph">Astra Trident 为 ONTAP 提供了 2 个 SAN 驱动程序，其功能如下所示。</block>
  <block id="f916141465c67326e5d7d980bff2880b" category="cell">ONTAP SAN 驱动程序</block>
  <block id="4f546cdc5f90f7d264cde89d14c6e015" category="cell">双向 CHAP</block>
  <block id="cd17e7ed84c40a0ff5ecb8b625b1f186" category="cell">`ontap-san`</block>
  <block id="e78e01b4457814be0584f80618e4659a" category="cell">是脚注： 4[]</block>
  <block id="73b781a615cea2647a87ff2035e296b1" category="cell">`ontap-san-economy.`</block>
  <block id="74b4b41be17ac9897921032dfd4e94a8" category="paragraph">非 PV 粒度功能将应用于整个 FlexVolume ，而所有 PV （即共享 FlexVol 中的 qtree 或 LUN ）将共享一个通用计划。</block>
  <block id="b483d59c54aea739f0806cf2f30c057e" category="paragraph">如上表所示， `ontap-nas` 与 `ontap-nas-economy` 之间的大部分功能是相同的。但是，由于 `ontap-nas-economy` 驱动程序限制了按 PV 粒度控制计划的能力，因此这可能会特别影响灾难恢复和备份规划。对于希望在 ONTAP 存储上利用 PVC 克隆功能的开发团队，只有在使用 `ontap-NAS` ， `ontap-san` 或 `ontap-san-economy-经济` 驱动程序时，才可能实现这一点。</block>
  <block id="45f7f2e55c0930a28d1a9e481e602a09" category="admonition">`solidfire-san` 驱动程序还能够克隆 PVC 。</block>
  <block id="e040ac9827d856d3ad8ae9ac0da92295" category="paragraph">与 NetApp HCI/SolidFire 平台结合使用的 `solidfire-san` 驱动程序可帮助管理员根据 QoS 限制为 Trident 配置 Element 后端。如果您希望设计后端，以便为 Trident 配置的卷设置特定的 QoS 限制，请在后端文件中使用 `type` 参数。管理员还可以使用 `limitVolumeSize` 参数限制可在存储上创建的卷大小。目前， `solidfire-san` 驱动程序不支持卷大小调整和卷复制等 Element 存储功能。这些操作应通过 Element Software Web UI 手动完成。</block>
  <block id="77e9d6f249e4626d5b5c3aec863459d3" category="cell">SolidFire 驱动程序</block>
  <block id="9ef2bbb12ff72558472202561a25058d" category="cell">CHAP</block>
  <block id="57ee8ed0b2796ea5f35b10f9ae5d68cd" category="cell">`solidfire-san`</block>
  <block id="0929973a1c9993903f6193add75b3fcf" category="cell">是脚注： 2[]</block>
  <block id="bccbad684880808562152ac1d82d7b73" category="verse-content-simple">脚注：是脚注： 1[] ：不由 Astra Trident 管理是脚注： 2[] ：支持原始块卷</block>
  <block id="657e0fa57d574227dd7520919f55ff92" category="paragraph">Astra Trident 使用 `azure-netapp-files` 驱动程序来管理 <block ref="d617d79fbb5ee3bc8bd280353eeb1349" category="inline-link-macro-rx"></block> 服务</block>
  <block id="1f65578a7accdff5ca6ff9f8dc42d9c6" category="inline-link-macro">适用于 Azure NetApp Files 的 Astra Trident 后端配置</block>
  <block id="4da613089cbda3d7c19cb4b3f67c1f5d" category="cell">Azure NetApp Files 驱动程序</block>
  <block id="8098b34f582537833b36b58273c3545b" category="cell">展开</block>
  <block id="e228843381960c06d1035c4219901307" category="cell">`azure-netapp-files`</block>
  <block id="2fdc8a66565228c15d355a7849997337" category="verse-content-simple">脚注：是脚注： 1[] ：不由 Astra Trident 管理</block>
  <block id="1d326a2a7f267c800fe3eafb89e5c7cd" category="inline-link-macro">服务类型</block>
  <block id="949a374fc5a78d436e3067ee2de19cbe" category="cell">`GCP-CVS`</block>
  <block id="3af6198d49c40c18f13c73c5ce15cf34" category="section-title">存储类设计</block>
  <block id="388bdf78cbb5b6bf4248ddf5613f7cc3" category="paragraph">要创建 Kubernetes 存储类对象，需要配置并应用各个存储类。本节讨论如何为您的应用程序设计存储类。</block>
  <block id="a09acd5f665bdf96b6dce47f8d4265e3" category="paragraph">可以在特定存储类对象中使用筛选功能来确定要将哪个存储池或一组池与该特定存储类结合使用。可以在存储类中设置三组筛选器： `storagePools` ， `addtionalStoragePools` 和 / 或 `excludeStoragePools` 。</block>
  <block id="fc01760e8c283c2f128543ae8b8a67cc" category="paragraph">`storagePools` 参数有助于将存储限制为与任何指定属性匹配的一组池。`addtionalStoragePools` 参数用于扩展 Astra Trident 用于配置的池集以及由属性和 `storagePools` 参数选择的池集。您可以单独使用参数，也可以同时使用这两个参数，以确保选择适当的存储池集。</block>
  <block id="74476e892d2681775eb41ec00a11e8da" category="paragraph">`excludeStoragePools` 参数用于明确排除列出的一组与属性匹配的池。</block>
  <block id="ab807e6bd2f9cb9872eed98161bdd4e1" category="paragraph">如果要设计存储类以模拟服务质量策略，请创建一个存储类，其中 `mmedia` attribute 为 `HDD` 或 `sSD` 。根据存储类中提及的 `mmedia` 属性， Trident 将选择提供 `HDD` 或 `sSD` 聚合的相应后端，以便与介质属性匹配，然后将卷配置定向到特定聚合。因此，我们可以创建一个存储类高级版，该高级版会将 `mmedia` attribute 设置为 `sSD` ，该高级版可归类为高级 QoS 策略。我们可以创建另一个存储类标准，该标准会将介质属性设置为 `HDD' ，并可归类为标准 QoS 策略。我们还可以使用存储类中的 ``IOPS' 属性将配置重定向到可定义为 QoS 策略的 Element 设备。</block>
  <block id="0bc0e72aefbf8f8ec0b28cc0486f98a2" category="paragraph">存储类可设计为在启用了精简和厚配置，快照，克隆和加密等功能的特定后端直接配置卷。要指定要使用的存储，请创建存储类，以指定启用了所需功能的相应后端。</block>
  <block id="421f7dd5bb37a6401aa6326ad33dae20" category="section-title">影响存储配置的 PVC 特征</block>
  <block id="5ab83f35784f154d55ea7ab58c8e503b" category="section-title">访问模式</block>
  <block id="f3882c83b41b76a9fac2c57407f3ac2b" category="paragraph">通过 PVC 请求存储时，访问模式为必填字段之一。所需的模式可能会影响所选的托管存储请求的后端。</block>
  <block id="b72ab56468fdf0df298a89c3339b82c0" category="paragraph">Astra Trident 将尝试与根据下表指定的访问方法所使用的存储协议匹配。这独立于底层存储平台。</block>
  <block id="cac415feda213697b27d3b6fce10d33a" category="cell">ReadWriteOnce</block>
  <block id="c24ad3d99a666c95edd149419c958ee0" category="cell">ReadOnlyMany</block>
  <block id="caa8dc1f4bb28d2d11226494cd05a123" category="cell">读取写入任何</block>
  <block id="e4e1c13bb0b14f6cb7608cbecea948ef" category="cell">iSCSI</block>
  <block id="cefb8ccdebef1940174b22e9d0ab530b" category="cell">是（原始块）</block>
  <block id="1d1a594959ec615f56516f5d0f5e8ddb" category="cell">NFS</block>
  <block id="823f2153adc2211a0777560eafdcbad6" category="paragraph">如果在未配置 NFS 后端的情况下向 Trident 部署提交了 ReadWriteMany PVC 请求，则不会配置任何卷。因此，请求者应使用适合其应用程序的访问模式。</block>
  <block id="5a51acb2538e54805c54d37ebb49c75d" category="section-title">卷操作</block>
  <block id="26fad327e23b6b08dcc94300bfe1ed04" category="section-title">修改永久性卷</block>
  <block id="f82b5505d8def4abda0bec52275bd411" category="admonition">目前， Kubernetes 树中配置程序不支持对 NFS 或 iSCSI PV 执行卷大小调整操作。Astra Trident 支持扩展 NFS 和 iSCSI 卷。</block>
  <block id="b1d1874782626fe3f391628ea493e6ef" category="paragraph">创建 PV 后，无法修改其连接详细信息。</block>
  <block id="e68591655c8031177206e1e75728853f" category="section-title">创建按需卷快照</block>
  <block id="f557ce2b38683c13c1c1a070ce58a33d" category="paragraph">Astra Trident 支持按需创建卷快照，并使用 CSI 框架从快照创建 PVC 。快照提供了一种维护数据时间点副本的便捷方法，并且生命周期独立于 Kubernetes 中的源 PV 。这些快照可用于克隆 PVC 。</block>
  <block id="f007c56a8eb121e8a696105e69aefa68" category="section-title">从快照创建卷</block>
  <block id="e005d448313cdc2848d923f4c754e467" category="paragraph">Astra Trident 还支持从卷快照创建 PersistentVolumes 。为此，只需创建 PersistentVolumeClaim 并注明 `datasource` 作为创建卷所需的快照即可。Astra Trident 将通过创建包含快照上的数据的卷来处理此 PVC 。通过此功能，可以跨区域复制数据，创建测试环境，整体更换损坏或损坏的生产卷，或者检索特定文件和目录并将其传输到另一个连接的卷。</block>
  <block id="55a3309b0b6646e0ea6b47195bd3d4bd" category="section-title">移动集群中的卷</block>
  <block id="925b814524908630c07d45fc5a80028a" category="paragraph">存储管理员可以在 ONTAP 集群中的聚合和控制器之间无中断地将卷移动到存储使用者。此操作不会影响 Astra Trident 或 Kubernetes 集群，只要目标聚合是 Astra Trident 所使用的 SVM 有权访问的聚合即可。重要的是，如果已将聚合新添加到 SVM ，则需要通过将后端重新添加到 Astra Trident 来刷新后端。这将触发 Astra Trident 对 SVM 重新进行清单配置，以便识别新聚合。</block>
  <block id="033dcaefcc578c987d32d4bdb6f6b1e2" category="paragraph">但是， Astra Trident 不支持在后端之间自动移动卷。这包括在同一集群中的 SVM 之间，集群之间或不同存储平台上（即使该存储系统是连接到 Astra Trident 的存储系统也是如此）。</block>
  <block id="302be77289f337115411c01846d9a489" category="paragraph">如果将卷复制到其他位置，则可以使用卷导入功能将当前卷导入到 Astra Trident 中。</block>
  <block id="2243e252be826d6ec5e767668d9f961d" category="section-title">展开卷</block>
  <block id="40a28a40c11a193f8911cf4143a6ae6a" category="section-title">将现有卷导入到 Kubernetes 中</block>
  <block id="5d9f64103cac7a58da69304bc3320e98" category="paragraph">使用 ONTAP 和 `solidfire-san` 驱动程序时，请使用命令 `tridentctl import volume &lt;backend-name&gt; &lt;volume-name&gt; -f /path/PVC.YAML` 将现有卷导入到要由 Astra Trident 管理的 Kubernetes 中。导入卷命令中使用的 PVC YAML 或 JSON 文件指向将 Astra Trident 标识为配置程序的存储类。使用 NetApp HCI/SolidFire 后端时，请确保卷名称是唯一的。如果卷名称重复，请将卷克隆为唯一名称，以便卷导入功能可以区分它们。</block>
  <block id="3a8b25f50e2dcc298175abc8f6a71f82" category="paragraph">如果部署的容器需要特定的导入 PVC ，则容器将保持待定状态，直到通过卷导入过程绑定 PVC/PV 对为止。在绑定 PVC/PV 对后，如果没有其他问题，应启动容器。</block>
  <block id="41603705958b86c3ec4ff21cfce13a5b" category="section-title">部署 OpenShift 服务</block>
  <block id="7e3c623b48b608f4c6380c2994ae5aa9" category="paragraph">OpenShift 增值集群服务为集群管理员和要托管的应用程序提供了重要功能。这些服务使用的存储可以使用节点本地资源进行配置，但这通常会限制服务的容量，性能，可恢复性和可持续性。利用企业级存储阵列为这些服务提供容量可以显著改善服务，但是，与所有应用程序一样， OpenShift 和存储管理员应密切合作，为每个服务确定最佳选项。应大量利用 Red Hat 文档来确定要求并确保满足规模估算和性能需求。</block>
  <block id="6dd8f6c286b8e1a8c96c6309099f0003" category="section-title">注册表服务</block>
  <block id="68ee1c4c0da20bfd1e946df20351d4b9" category="inline-link-macro">netapp.io</block>
  <block id="126ac9f6149081eb0e97c2e939eaad52" category="inline-link-macro">博客</block>
  <block id="34d357a7f8cc47e860d5fb0a317cf22d" category="paragraph">有关为注册表部署和管理存储的文档，请参见 <block ref="d5e1883ebd095c0eda96c44469e8197d" category="inline-link-macro-rx"></block> 在中 <block ref="ceb73d0582d40281d79011a1e5343e89" category="inline-link-macro-rx"></block>。</block>
  <block id="62ac236856a5a6aefd15133e967514c6" category="section-title">日志记录服务</block>
  <block id="2f3052b6a2858bec8355ec56150f6a38" category="paragraph">与其他 OpenShift 服务一样，日志记录服务也是使用清单文件（也称为）提供的配置参数 Ansible 部署的主机，提供给攻略手册。其中包括两种安装方法：在初始 OpenShift 安装期间部署日志记录以及在安装 OpenShift 之后部署日志记录。</block>
  <block id="57cad4852c9c2e439f61728e0391fe7b" category="paragraph">如果您选择将 NFS 与日志记录服务结合使用，则需要将 Ansible 变量 `OpenShift_enable_unsupported _configurations` 设置为 `true` ，以防止安装程序失败。</block>
  <block id="be11c74c1dd7f307bb80183a90dc2067" category="section-title">入门</block>
  <block id="16e90b2336fdfec64b19194247422194" category="paragraph">可以选择为这两个应用程序以及 OpenShift 集群本身的核心操作部署日志记录服务。如果选择部署操作日志记录，则通过将变量 `OpenShift_logging_use_ops` 指定为 `true` ，将创建两个服务实例。控制操作日志记录实例的变量包含 "ops" ，而应用程序实例则不包含 "ops" 。</block>
  <block id="c5c09113a6a6ae4b75868a9e96ea3cc3" category="inline-link-macro">RedHat OpenShift 日志记录文档</block>
  <block id="02098b11f876fe10c40b6106bd9864da" category="paragraph">下表中的变量将导致 Ansible 攻略手册使用提供的详细信息为日志记录服务创建 PV 和 PVC 。与在 OpenShift 安装后使用组件安装攻略手册相比，此方法的灵活性明显降低，但是，如果您有可用的现有卷，则可以选择此方法。</block>
  <block id="47c14840d8e15331fa420b9b2f757cd9" category="cell">变量</block>
  <block id="3ec365dd533ddb7ef3d1c111186ce872" category="cell">详细信息</block>
  <block id="9aa2fd43742cd5ed36b406b3f4b0fd8c" category="cell">`OpenShift_logging_storage_kind`</block>
  <block id="3260b06ea72e4931f5fb5106001fcc28" category="cell">设置为 `NFS` ，以使安装程序为日志记录服务创建 NFS PV 。</block>
  <block id="e95f43173c69a9ca544d4aaef28a4d90" category="cell">`OpenShift_logging_storage_host`</block>
  <block id="3a262c1d9bdec02b241c16b2c5f6dbbe" category="cell">NFS 主机的主机名或 IP 地址。此值应设置为虚拟机的数据 LIF 。</block>
  <block id="41aae586bb7044d7741fe9412aa81e03" category="cell">`OpenShift_logging_storage_nfs_directory`</block>
  <block id="bf2d137d8c669b07aae26040c7e5c0e0" category="cell">NFS 导出的挂载路径。例如，如果卷接合为 ` /OpenShift_logging` ，则应使用该路径作为此变量。</block>
  <block id="88a9f7d18fabb82d63ac43c64ae6e735" category="cell">`OpenShift_logging_storage_volume_name`</block>
  <block id="6f8782c23f3cb958d0de4fad76dabaed" category="cell">要创建的 PV 的名称，例如 `PV_ose_logs` 。</block>
  <block id="789e0dc4bfc00f5c885a698d6ab34dff" category="cell">`OpenShift_logging_storage_volume_size`</block>
  <block id="b68f05ea52c8c80c07e6a4c0671c75bf" category="cell">NFS 导出的大小，例如 `100Gi` 。</block>
  <block id="2ab80b6965298dc6a178995bbedebe88" category="paragraph">如果 OpenShift 集群已在运行，因此已部署和配置 Trident ，则安装程序可以使用动态配置来创建卷。需要配置以下变量。</block>
  <block id="c2aecf833d743cbc47969cd85c67101e" category="cell">`OpenShift_logging_es_vc_dynamic`</block>
  <block id="540ad9a52084720ddb7f364fa8b304c6" category="cell">设置为 true 可使用动态配置的卷。</block>
  <block id="45a481a75749c5331e7e9fd7d89e473d" category="cell">`OpenShift_logging_es_vc_storage_class_name`</block>
  <block id="837ffa1e281409660ed25582c5b1963f" category="cell">要在 PVC 中使用的存储类的名称。</block>
  <block id="cd3daa927272b5624e96d283365d5500" category="cell">`OpenShift_logging_es_vc_size`</block>
  <block id="8f80d278a79cbc84b80a091713006022" category="cell">在 PVC 中请求的卷大小。</block>
  <block id="1bb0c7eeef4bbbefae080a294fd554b0" category="cell">`OpenShift_logging_es_vc_prefix`</block>
  <block id="f870ec92e294a018a17afe7a614fb5bb" category="cell">日志记录服务使用的 PVC 的前缀。</block>
  <block id="e8c62e1f0f0773ae5ba6a7acad696b2d" category="cell">`OpenShift_logging_es_ops_vc_dynamic`</block>
  <block id="46e65a11ac398c02b8fce45a7cd5cf36" category="cell">设置为 `true` 可对操作日志记录实例使用动态配置的卷。</block>
  <block id="8792c7234e14325cb68c493d20ab5154" category="cell">`OpenShift_logging_es_ops_vc_storage_class_name`</block>
  <block id="d016f79f0ee104f3805d61e6a379fb9b" category="cell">操作日志记录实例的存储类的名称。</block>
  <block id="048e768365962d7d520567f92aea8355" category="cell">`OpenShift_logging_es_ops_vc_size`</block>
  <block id="bc367f89ac597585e52d0eb58a5929ae" category="cell">操作实例的卷请求大小。</block>
  <block id="155871626071d69cb283985a9f36bad2" category="cell">`OpenShift_logging_es_ops_vc_prefix`</block>
  <block id="2a8f254749a466654f556c6466051133" category="cell">操作实例 PVC 的前缀。</block>
  <block id="e1b2d0d3228c29c069bcd139de306709" category="section-title">部署日志记录堆栈</block>
  <block id="0409a0cfdfa4f3b3033503b8309442ff" category="paragraph">如果要在初始 OpenShift 安装过程中部署日志记录，则只需遵循标准部署过程即可。Ansible 将配置和部署所需的服务和 OpenShift 对象，以便在 Ansible 完成后立即提供此服务。</block>
  <block id="210ecadaccb6088b0dfbd2e6a0b5d0a0" category="inline-link-macro">RedHat OpenShift Container Platform 3.11 文档</block>
  <block id="67f3e99678cc7c568f4ed29074cdc41c" category="paragraph">但是，如果在初始安装后进行部署，则 Ansible 需要使用组件攻略手册。此过程可能会因 OpenShift 的不同版本而略有变化，因此请务必阅读并遵循 <block ref="a2226808e95b8487c66dd3b8cbea118e" category="inline-link-macro-rx"></block> 适用于您的版本。</block>
  <block id="3dbf527ac3caf41ab150ec99a1737217" category="section-title">指标服务</block>
  <block id="69aa4440020e49c654aeb910f38c6bb9" category="admonition">下表仅包含与存储配置相关的变量，因为这些变量与指标服务相关。文档中还有许多其他选项，应根据您的部署情况进行查看，配置和使用。</block>
  <block id="4f692d78f978a73b157571022c1d1ba7" category="cell">`OpenShift_metrics_storage_kind`</block>
  <block id="30da7e263c0cffc34933d24a07fb097a" category="cell">`OpenShift_metrics_storage_host`</block>
  <block id="adba8dd7dd2b027405b815c03a05dbf1" category="cell">NFS 主机的主机名或 IP 地址。此值应设置为 SVM 的数据 LIF 。</block>
  <block id="3bafc264ad2a901d3be052a7f1cf2e44" category="cell">`OpenShift_metrics_storage_nfs_directory`</block>
  <block id="459859e54ba90bc4145c54d1f1deecff" category="cell">NFS 导出的挂载路径。例如，如果卷接合为 ` /OpenShift_metrics` ，则您将使用该路径作为此变量。</block>
  <block id="ca0f0d82f9c7cbc36df652cddd4b2f35" category="cell">`OpenShift_metrics_storage_volume_name`</block>
  <block id="eb10d02b22b02d7f543f867b8d31e7b0" category="cell">要创建的 PV 的名称，例如 `PV_ose_metrics` 。</block>
  <block id="a3eeeafe923ac73e75b3bf33cdadb603" category="cell">`OpenShift_metrics_storage_volume_size`</block>
  <block id="a56c731cfe96d228c7c0bcc57bc80d3d" category="cell">`OpenShift_metrics_Cassandra_vc_prefix`</block>
  <block id="0da919d4045e4f38d294aaec73f5d57f" category="cell">用于衡量指标 PVC 的前缀。</block>
  <block id="15bb3eef0b42a93e324977c289f2fd85" category="cell">`OpenShift_metrics_Cassandra_vc_size`</block>
  <block id="75929c9d67f1407282b5618fca4589e7" category="cell">要请求的卷的大小。</block>
  <block id="8ebb493e0ffdf7c1e850c67bc22f15c7" category="cell">`OpenShift_metrics_Cassandra_storage_type`</block>
  <block id="aab0ec84a4da1dfd2b63896453f1e05d" category="cell">要用于度量指标的存储类型，必须将此类型设置为动态， Ansible 才能创建具有相应存储类的 PVC 。</block>
  <block id="460aaf3805271ec2e5dc35755fe317b1" category="cell">`OpenShift_metrics_cassanda_vc_storage_class_name`</block>
  <block id="0c55ca33e89539cd67eb0be3796547c5" category="cell">要使用的存储类的名称。</block>
  <block id="6c13e62eb53f29e7794d3807369299d2" category="section-title">部署指标服务</block>
  <block id="bf1cadd7aa4e541e255df26af5451d85" category="inline-link-macro">RedHat 的 OpenShift 部署指南</block>
  <block id="eb502d6483a644e9b6f61ca4719276d8" category="paragraph">上述变量以及部署过程可能会随 OpenShift 的每个版本而发生变化。确保您查看并遵循 <block ref="5ad72ffc1eda2c257c8947a0ad66dddb" category="inline-link-macro-rx"></block> 为您的版本配置，以便为您的环境进行配置。</block>
  <block id="f3a29486bed19a90f2da6d007818b427" category="list-title">步骤</block>
  <block id="db5eb84117d06047c97c9a0191b5fffe" category="doc">支持</block>
  <block id="dec54888538ac86f51d29a3d043e6bf6" category="summary">您可以使用操作员轻松升级现有的 Astra Trident 安装。</block>
  <block id="5ff3faebb0ff710340bdbee89a4667ad" category="doc">使用操作员升级</block>
  <block id="199ed8c975e8bb544d18428ba17adbc3" category="inline-link">GitHub 上的问题描述详细信息</block>
  <block id="3002cfcea36b7fb4d87da4d413730851" category="list-text">下载最新的 Astra Trident 版本。</block>
  <block id="4a6b869a481b52472aa62cfa4d9d255e" category="paragraph">例如，要更改默认值 `tridentDebug` ，请运行以下命令：</block>
  <block id="4ab464bddccdcbc36fab4cea802025f9" category="list-text">从清单中创建 `tridentorchator` CRD 。</block>
  <block id="06da281bf5e01c3c59892dc886cd0067" category="list-text">创建 `TridentOrchestrator` CR 以安装 Astra Trident 。</block>
  <block id="43f17763173fe230bdd78477152f5f7d" category="inline-link-macro">卸载 Astra Trident</block>
  <block id="8656f6a3d04342ff6248bd7d32949c2a" category="paragraph">如果您使用 Helm 安装了 Astra Trident ，则可以使用 `helm uninstall` 将其卸载。</block>
  <block id="c416a70504ae36e8cfbf555ad0d13ab9" category="paragraph">如果您使用操作符安装了 Astra Trident ，则可以通过执行以下操作之一卸载它：</block>
  <block id="245e84de93b9b41f643f9e737c17e702" category="paragraph">当 `uninstall` 标志设置为 `true` 时， Trident 操作员将卸载 Trident ，但不会删除 Trident Orchestrator 本身。如果要重新安装 Trident ，应清理 Trident Orchestrator 并创建新的 Trident 。</block>
  <block id="3bda6d3452a50ffddd40bb74b05d6c50" category="summary">Astra Trident 遵循季度发布节奏，每个日历年提供四个主要版本。每个新版本都是在先前版本的基础上构建的，可提供新功能和性能增强以及错误修复和改进功能。我们建议您每年至少升级一次，以利用 Astra Trident 中的新功能。</block>
  <block id="3386987a97643481040e99019808e020" category="doc">升级 Astra Trident</block>
  <block id="558ab0bef1894a7a726109d36632d09d" category="inline-link-macro">已知问题</block>
  <block id="9c83e144e5481ac6766f4055e566594d" category="section-title">了解更多信息</block>
  <block id="f71fd95d4de4797557e6830c1448c945" category="summary">您可以使用 `tridentctl` 轻松升级现有的 Astra Trident 安装。</block>
  <block id="6224e22d5a77816dd8b659c25a3f88a5" category="paragraph">升级到最新版本的 Astra Trident 时，请考虑以下事项：</block>
  <block id="4ff0a9f6065b24ce3d325bad3223f4e2" category="paragraph">卸载并重新安装 Astra Trident 可作为升级。卸载 Trident 时，不会删除 Astra Trident 部署所使用的永久性卷声明（ PVC ）和永久性卷（ PV ）。在 Astra Trident 脱机期间，已配置的 PV 仍可用，而 Astra Trident 将在恢复联机后为在此期间创建的任何 PVC 配置卷。</block>
  <block id="f58e95baa778c9a2bd1a4597fb49d9b7" category="doc">ONTAP 驱动程序</block>
  <block id="48cf24486d9a8e65a142b25682f19949" category="cell">驱动程序</block>
  <block id="888a77f5ac0748b6c8001822417df8b6" category="cell">协议</block>
  <block id="1b5e109e8afd1f9b7f5bbf951eea3442" category="cell">卷模式</block>
  <block id="d5e2d9f8d8f10044e38b71b49e675d2e" category="cell">支持的访问模式</block>
  <block id="15971126972a002fcddb2c507534e371" category="cell">支持的文件系统</block>
  <block id="ac52cf637478f3656a1fdee5c02324fd" category="paragraph">文件系统</block>
  <block id="e1e4c8c9ccd9fc39c391da4bcd093fb2" category="paragraph">块</block>
  <block id="a029cca698cbf05f07897f86c43cf9e8" category="paragraph">`xfs` ， `ext3` ， `ext4`</block>
  <block id="4bd05efa612e48dd723de2bdd29f88e2" category="section-title">支持的 Kubernetes 集群架构</block>
  <block id="85b179f2c10f76f0171b4d9d3f2d5171" category="paragraph">以下 Kubernetes 架构支持 Astra Trident ：</block>
  <block id="c91cda04d3ac5ae2da327d347d4bbefe" category="cell">Kubernetes 集群架构</block>
  <block id="eaa4dc5078017a5c5bebf383ab6f5124" category="cell">supported</block>
  <block id="c0057eecd4b1a67d11dc801b8992a574" category="cell">默认安装</block>
  <block id="0c69c79a8788e0e4572d0c4838e69401" category="cell">单个主节点，计算节点</block>
  <block id="1fc3441370ae575a64d605fcd15a05fd" category="cell">多主机，计算</block>
  <block id="7cb2eb9488f3532834f7ef233ae894dd" category="cell">主， `etcd` ，计算</block>
  <block id="5e5f49db20e29f6377e57e98932dae57" category="cell">主机，基础架构，计算</block>
  <block id="ae663d0d321764bd88b8d864cd3afc9e" category="section-title">什么是 Astra ？</block>
  <block id="2a778cf7220cdde142651975e1bcd90f" category="paragraph">在虚拟池列表之外指定的任何方面对于后端都是全局的，并将应用于所有虚拟池，而每个虚拟池可能会分别指定一个或多个方面（覆盖任何后端 - 全局方面）。</block>
  <block id="e1b3ec89ead7f83a9245ed5c9cacfdbf" category="cell">运算符</block>
  <block id="0a52730597fb4ffa01fc117d9e71e3a9" category="cell">示例</block>
  <block id="499badcb6f450c7f46c51d873eb84286" category="cell">` =`</block>
  <block id="354653142ec321459dfd6d71444e992e" category="cell">性能 = 高级</block>
  <block id="5a5292b0a0d0379f0f1b12801b09b266" category="cell">` ！ =`</block>
  <block id="eccde6822783bd75209c9b6a2d357f6c" category="cell">性能！ = 至高</block>
  <block id="ae2bef277194f73d24a36a78009aac1e" category="cell">`在` 中</block>
  <block id="f8cf8c23afb5459dbf7c24b685caf85b" category="cell">位置（东部，西部）</block>
  <block id="1a031eecbce49366e550273b9321b909" category="cell">`注释`</block>
  <block id="b5585f3f9b45f391fee5dd15e6516450" category="cell">性能注释（银牌，铜牌）</block>
  <block id="ae8e28c37a725c4bb4a74663ac8615ea" category="summary">详细了解 Astra Trident 如何使用卷访问组。</block>
  <block id="b4621305109716b02eed0cf25fabab13" category="doc">卷访问组</block>
  <block id="33911b1eec54b4b5a7fbc504e6569989" category="inline-link">卷访问组</block>
  <block id="649833006ff7b612c3d988173b6417d5" category="paragraph">了解有关 Astra Trident 如何使用的更多信息<block ref="783dd6ea9e0b09c84db9ccd072a61c55" category="inline-link-rx"></block>。</block>
  <block id="e93c18adf30bc91499234d0ec7863499" category="admonition">如果使用的是 CHAP ，请忽略此部分，建议使用此部分来简化管理并避免下面所述的扩展限制。此外，如果您在 CSI 模式下使用 Astra Trident ，则可以忽略此部分。在作为增强型 CSI 配置程序安装时， Astra Trident 会使用 CHAP 。</block>
  <block id="3c56a859b413098b6bf2c54aff32a842" category="paragraph">Astra Trident 可以使用卷访问组来控制对其配置的卷的访问。如果禁用了 CHAP ，则它会查找名为 `trident` 的访问组，除非您在配置中指定了一个或多个访问组 ID 。</block>
  <block id="dff8ca466bae899e4dbc68c3a552033f" category="paragraph">对于节点数超过 64 个的 Kubernetes 集群，您应使用多个访问组。每个访问组最多可以包含 64 个 IQN ，每个卷可以属于四个访问组。在最多配置四个访问组的情况下，集群中大小最多为 256 个节点的任何节点都可以访问任何卷。有关卷访问组的最新限制，请参见<block ref="ac4000c3a85e5909daa6593f9f0617fd" category="inline-link-rx"></block>。</block>
  <block id="4d5445eb6c70cdab8d3ad5e71367f42a" category="summary">详细了解 Astra Trident 如何为其驱动程序创建卷快照。</block>
  <block id="e9c3828cd06711f9036bb4ce862a32c5" category="doc">卷快照</block>
  <block id="9dbabbadda024bb7b1d0db43ab31b45f" category="list-text">对于 `solidfire-san` 驱动程序，每个 PV 都会映射到在 NetApp Element 软件 /NetApp HCI 集群上创建的 LUN 。VolumeSnapshot 由底层 LUN 的 Element Snapshot 表示。这些快照是时间点副本，只占用少量系统资源和空间。</block>
  <block id="34f731018ae783f70901b14b4950c3a7" category="list-text">使用 `ontap-nas` 和 `ontap-san` 驱动程序时， ONTAP 快照是 FlexVol 的时间点副本，并占用 FlexVol 本身的空间。这样，在创建 / 计划快照时，卷中的可写空间量会随着时间的推移而减少。解决此问题的一个简单方法是，通过 Kubernetes 调整大小来增大卷的大小。另一个选项是删除不再需要的快照。删除通过 Kubernetes 创建的卷快照后， Astra Trident 将删除关联的 ONTAP 快照。也可以删除未通过 Kubernetes 创建的 ONTAP 快照。</block>
  <block id="89c3bcf0ecc1114f8d19734d9156cb40" category="doc">配置</block>
  <block id="2bd42f922a8c0b54b90557eba2071a76" category="paragraph">将后端存储池与存储类关联取决于存储类请求的属性及其 `storagePools` ， `addtionalStoragePools` 和 `excludeStoragePools` 列表。创建存储类时， Trident 会将其每个后端提供的属性和池与存储类请求的属性和池进行比较。如果存储池的属性和名称与请求的所有属性和池名称匹配，则 Astra Trident 会将该存储池添加到该存储类的一组合适存储池中。此外， Astra Trident 会将 `addtionalStoragePools` 列表中列出的所有存储池添加到该集中，即使其属性不满足存储类请求的所有或任何属性也是如此。您应使用 `excludeStoragePools` 列表覆盖存储池并将其从存储类中删除。每次添加新后端时， Astra Trident 都会执行类似的过程，检查其存储池是否满足现有存储类的要求，并删除任何已标记为已排除的。</block>
  <block id="668ccb4dd1c284f07a3062637c57d21a" category="paragraph">然后， Astra Trident 会使用存储类和存储池之间的关联来确定在何处配置卷。创建卷时， Astra Trident 会首先获取该卷的存储类的一组存储池， 此外，如果为卷指定协议，则 Astra Trident 会删除无法提供所请求协议的存储池（例如， NetApp HCI/SolidFire 后端无法提供基于文件的卷，而 ONTAP NAS 后端无法提供基于块的卷）。Astra Trident 会随机分配此结果集的顺序，以便均匀分布卷，然后迭代并依次尝试在每个存储池上配置卷。如果在一个上成功，则它会成功返回，并记录在此过程中遇到的任何故障。只有在 * 无法在 * 所有 * 可用于请求的存储类和协议的存储池上配置时， Astra Trident 才会返回故障。</block>
  <block id="3d522b99ca94333433532daa23e7ceab" category="summary">查找有关 Astra Trident 的安装，配置，升级和故障排除的常见问题解答。</block>
  <block id="af2a4d2810d86aa0169c117f82682f9a" category="doc">常见问题解答</block>
  <block id="96ab491ef73d5db0cd15f55e1552cc22" category="section-title">一般问题</block>
  <block id="b34c3d20de0f1b2c7a69bdc59002ad47" category="section-title">Astra Trident 的发布频率如何？</block>
  <block id="2f55088c7d055eb361252b15d5d7af10" category="paragraph">Astra Trident 每三个月发布一次： 1 月， 4 月， 7 月和 10 月。这是 Kubernetes 发布后一个月。</block>
  <block id="15602d1e4b699ebca549a3d953672d8c" category="section-title">Astra Trident 是否支持特定版本的 Kubernetes 中发布的所有功能？</block>
  <block id="d860923e20119473e7f7d50683cb0559" category="paragraph">Astra Trident 通常不支持 Kubernetes 中的 alpha 功能。在 Kubernetes 测试版之后的两个 Trident 版本中， Trident 可能支持测试版功能。</block>
  <block id="52ffcf336df0055235949cf324a8624b" category="section-title">Astra Trident 的运行是否依赖于其他 NetApp 产品？</block>
  <block id="9a10bc69a2553cd055c7b66932fd3864" category="paragraph">Astra Trident 与其他 NetApp 软件产品没有任何依赖关系，它可以作为独立应用程序运行。但是，您应具有 NetApp 后端存储设备。</block>
  <block id="bda04f64eaa9613cb4923cf43e24954c" category="section-title">如何获取完整的 Astra Trident 配置详细信息？</block>
  <block id="6d6d1fbb6191413b3262aed487048f1e" category="paragraph">使用 `tridentctl get` 命令可获取有关 Astra Trident 配置的详细信息。</block>
  <block id="d8634bcd1659c9cdf6f1a7a92ec00c30" category="section-title">我能否获取有关 Astra Trident 如何配置存储的指标？</block>
  <block id="3e9ebf4af3f0b9d1852396d46171ef99" category="section-title">使用 Astra Trident 作为 CSI 配置程序时，用户体验是否会发生变化？</block>
  <block id="05f95d89af1ccd9b986014406a4b1fc8" category="paragraph">否在用户体验和功能方面没有变化。使用的配置程序名称是 `csi.trident.netapp.io` 。如果要使用当前版本和未来版本提供的所有新功能，建议使用此方法安装 Astra Trident 。</block>
  <block id="0a7e87df44869b8d60a83f35d1e2747b" category="section-title">在 Kubernetes 集群上安装和使用 Astra Trident</block>
  <block id="bde6cb03741f92107c63aeebe62d3278" category="section-title">Astra Trident 是否支持从专用注册表脱机安装？</block>
  <block id="1c51806b370d428d5779dbcacd940174" category="section-title">是否可以远程安装 Astra Trident ？</block>
  <block id="bf858450c271da75a3df3a15ca761330" category="paragraph">是的。Astra Trident 18.10 及更高版本支持从 `kubectl` 访问集群的任何计算机远程安装。验证 `kubectl` 访问后（例如，从远程计算机启动 `kubectl get nodes` 命令进行验证），请按照安装说明进行操作。</block>
  <block id="12694c2de4575e39a6f7e81d55e35de9" category="section-title">是否可以使用 Astra Trident 配置高可用性？</block>
  <block id="f1cf2ca3af6ca7c374ad2104f570c790" category="paragraph">Astra Trident 以 Kubernetes 部署（ ReplicaSet ）的形式安装有一个实例，因此它具有内置的 HA 。您不应增加部署中的副本数量。如果安装了 Astra Trident 的节点丢失或 POD 无法访问， Kubernetes 会自动将 POD 重新部署到集群中运行正常的节点。Astra Trident 仅支持控制平面，因此，如果重新部署 Astra Trident ，当前安装的 Pod 不会受到影响。</block>
  <block id="1656e4b34abdb6d497b40cac65366767" category="section-title">Astra Trident 是否需要访问 Kube-system 命名空间？</block>
  <block id="6f67e1edfd4aa5b0e695528a9c7d8898" category="paragraph">Astra Trident 从 Kubernetes API 服务器读取数据，以确定应用程序何时请求新的 PVC ，因此需要访问 Kube-system 。</block>
  <block id="16cdb35003b5bcf0f30556e0bc477511" category="section-title">Astra Trident 使用哪些角色和特权？</block>
  <block id="8ff39a39871cc30228035bc0580a6af4" category="section-title">是否可以在本地生成 Astra Trident 用于安装的准确清单文件？</block>
  <block id="e6af67b71bd46d7588b50f28e1414f9b" category="section-title">是否可以为两个单独的 Kubernetes 集群的两个单独的 Astra Trident 实例共享同一个 ONTAP 后端 SVM ？</block>
  <block id="7bbf9b47e035f0f9bb7c46098e78fb4d" category="paragraph">尽管不建议这样做，但您可以对两个 Astra Trident 实例使用同一个后端 SVM 。在安装期间为每个实例指定唯一的卷名称和 / 或在 `setup/backend.json` 文件中指定唯一的 `StoragePrefix` 参数。这是为了确保不会对这两个实例使用相同的 FlexVol 。</block>
  <block id="9840a5bb6278469ed550bcdcc92c29c5" category="section-title">是否可以在 ContainerLinux （以前称为 CoreOS ）下安装 Astra Trident ？</block>
  <block id="7a35680d9db247612b732ae47144f030" category="paragraph">Astra Trident 只是 Kubernetes Pod ，可安装在 Kubernetes 运行的任何位置。</block>
  <block id="5fc6de1b535ebb2a5380b6aa607e4cca" category="section-title">是否可以将 Astra Trident 与 NetApp Cloud Volumes ONTAP 结合使用？</block>
  <block id="5d1cff73e26dc54ef52bdca5a29b319c" category="paragraph">是的， AWS ， Google Cloud 和 Azure 支持 Astra Trident 。</block>
  <block id="2ddee53d5c18f6e78f18dad82851303e" category="section-title">Astra Trident 是否支持 Cloud Volumes Services ？</block>
  <block id="92d1656d06303733c5e1398fb273a17e" category="section-title">故障排除和支持</block>
  <block id="9985a592486717ae388709b9267da4f9" category="section-title">NetApp 是否支持 Astra Trident ？</block>
  <block id="cc56e0da96ceaf708545923f1094815b" category="paragraph">虽然 Astra Trident 是开源且免费提供的，但只要您的 NetApp 后端受支持， NetApp 就会完全支持它。</block>
  <block id="a3d907947129a58ee6f9e23074840c8f" category="section-title">如何提出支持案例？</block>
  <block id="0265687df6c09d532b03477776c6d075" category="paragraph">要提交支持案例，请执行以下操作之一：</block>
  <block id="5dab8cca21a0ff4e72d4e2a1ee5156ea" category="list-text">请联系您的支持客户经理并获得帮助以提交服务单。</block>
  <block id="09ea0908fbfc4cde85bf416e35dc55c8" category="inline-link">NetApp 支持</block>
  <block id="a13956d424374973d31e5883b8bf8b6a" category="list-text">联系以提出支持案例<block ref="116f7ad90a3c7441981f82d8f8fba4d5" category="inline-link-rx"></block>。</block>
  <block id="3e77e87e5ee8fb4f6f910f4cf0594fc2" category="section-title">如何生成支持日志包？</block>
  <block id="7938aed248d09a5120eaf414e6c1d574" category="paragraph">您可以运行 `tridentctl logs -a` 来创建支持包。除了在捆绑包中捕获的日志之外，还可以捕获 kubelet 日志以诊断 Kubernetes 端的挂载问题。获取 kubelet 日志的说明因 Kubernetes 的安装方式而异。</block>
  <block id="2c3543f339dc749a508ed5e5e5aaae23" category="section-title">如果需要提出新功能请求，我该怎么办？</block>
  <block id="0aa1d7a95d75c0faa8302a803356b7b7" category="section-title">我应在何处提出缺陷？</block>
  <block id="4c1d312c39e7048d2c634824e243fdba" category="inline-link">Astra Trident Github</block>
  <block id="a814c59a6fef2fb64a2a32dedcf6f82e" category="paragraph">在上创建问题描述<block ref="e71a8230f1c77ee7d957187295b859e4" category="inline-link-rx"></block>。请务必包含与问题描述相关的所有必要信息和日志。</block>
  <block id="fd0759571f12527967b660b5b327c65b" category="section-title">如果我有有关 Astra Trident 的快速问题需要澄清，会发生什么情况？是否有社区或论坛？</block>
  <block id="6100f37d544e87e462129f21e52bae7f" category="section-title">Astra Trident 找不到我的 Kubernetes 节点。如何修复此问题？</block>
  <block id="d5cf5c734786394c838bacc6597594c6" category="paragraph">Astra Trident 无法找到 Kubernetes 节点的原因可能有两种。这可能是因为 Kubernetes 中的网络问题描述或 DNS 问题描述。在每个 Kubernetes 节点上运行的 Trident 节点取消设置必须能够与 Trident 控制器进行通信，以便向 Trident 注册该节点。如果在安装 Astra Trident 后发生网络更改，则只有在添加到集群中的新 Kubernetes 节点上才会遇到此问题。</block>
  <block id="bcd549c9f0199c5b8d0b55f782bff9e8" category="section-title">如果 Trident POD 被销毁，是否会丢失数据？</block>
  <block id="3de05f78e401869f4630ec8cabf339df" category="section-title">是否可以直接从旧版本升级到新版本（跳过几个版本）？</block>
  <block id="ce44cbbc54839f39b351c091b0e3caa5" category="paragraph">NetApp 支持将 Astra Trident 从一个主要版本升级到下一个直接主要版本。您可以从 18.xx 升级到 19.xx ，从 19.xx 升级到 20.xx 等。在生产部署之前，您应在实验室中测试升级。</block>
  <block id="0399b9e6348e554937a4d65efc97a1b8" category="section-title">是否可以将 Trident 降级到先前版本？</block>
  <block id="d307563c01953bd90a41ddd049f96d51" category="inline-link-macro">有关降级的章节</block>
  <block id="ba9c59aa9d07b25e124dcf6ca88d689a" category="section-title">管理后端和卷</block>
  <block id="ffe72215dff9a93d62ee68905212025e" category="section-title">是否需要在 ONTAP 后端定义文件中同时定义管理和数据 LIF ？</block>
  <block id="f3997f0b9446951754e665cfe7591cef" category="section-title">Astra Trident 是否可以为 ONTAP 后端配置 CHAP ？</block>
  <block id="952cc22022a80bb8079f6dd7afb289d2" category="section-title">如何使用 Astra Trident 管理导出策略？</block>
  <block id="1d08384060bd88a7801faae4fe346d06" category="section-title">IPv6 地址是否可用于管理和数据 LIF ？</block>
  <block id="4c0e813a0bfed033d75bbfd8b18f556c" category="section-title">是否可以在后端更新管理 LIF ？</block>
  <block id="66d8fee83a94421ca416a2bdb33703b4" category="paragraph">可以，可以使用 `tridentctl update backend` 命令更新后端管理 LIF 。</block>
  <block id="c56cd7a01da4acc4fc86aa498cabfd99" category="section-title">是否可以更新后端的数据 LIF ？</block>
  <block id="1e0e6fcec605e6450ba12b95969c8959" category="section-title">是否可以在适用于 Kubernetes 的 Astra Trident 中创建多个后端？</block>
  <block id="fb3cb30bfe23466a98407256c8b5164f" category="paragraph">Astra Trident 可以同时支持多个后端，可以使用相同的驱动程序，也可以使用不同的驱动程序。</block>
  <block id="6454319cc2398418b67f5b2df5aa5cd3" category="section-title">Astra Trident 如何存储后端凭据？</block>
  <block id="1d406f7ac7268b602da0989a4675480e" category="paragraph">Astra Trident 会将后端凭据存储为 Kubernetes Secretes 。</block>
  <block id="64a610ffaa66abeebc73d8159b9f73ec" category="section-title">Astra Trident 如何选择特定后端？</block>
  <block id="c6e9fbb586ad55ddf4bbda9814c6adc9" category="paragraph">如果无法使用后端属性自动为某个类选择合适的池，则会使用 `storagePools` 和 `addtionalStoragePools` 参数来选择一组特定的池。</block>
  <block id="3beefa69a05dde01d93a438a943a5a7a" category="section-title">如何确保 Astra Trident 不会从特定后端配置？</block>
  <block id="b5c265487a1fed6a3367664ccab664bb" category="paragraph">`excludeStoragePools` 参数用于筛选 Astra Trident 要用于配置的一组池，并将删除匹配的任何池。</block>
  <block id="e124ac30adf3eea60a13cd5f93980e7e" category="section-title">如果存在多个相同类型的后端，则 Astra Trident 如何选择要使用的后端？</block>
  <block id="c02ba3e7f8a02e0d1e29e2190a86e352" category="paragraph">如果配置了多个相同类型的后端，则 Astra Trident 会根据 `StorageClass` 和 `PersistentVolumeClaim` 中的参数选择相应的后端。例如，如果有多个 ontap-NAS 驱动程序后端，则 Astra Trident 会尝试匹配 `StorageClass` 和 `PersistentVolumeClaim` 组合中的参数，并匹配后端，这样可以满足 `StorageClass` 和 `PersistentVolumeClaim` 中列出的要求。如果有多个后端与请求匹配，则 Astra Trident 会随机从其中一个后端中进行选择。</block>
  <block id="7a2fd62f4a63259a7f94543a0ae01e76" category="section-title">Astra Trident 是否支持 Element 或 SolidFire 的双向 CHAP ？</block>
  <block id="b127099c71415d532da3a26ed73eb041" category="paragraph">是的。</block>
  <block id="7880810a250adc4ccf5108fe88325055" category="section-title">Astra Trident 如何在 ONTAP 卷上部署 qtree ？一个卷可以部署多少个 qtree ？</block>
  <block id="657cbdac1a85665b0b38b37c9a306925" category="paragraph">`ontap-nas-economy` 驱动程序可在同一个 FlexVol 中创建多达 200 个 qtree （可在 50 到 300 之间配置），每个集群节点创建 100 ， 000 个 qtree ，每个集群创建 2.4 M 个 qtree 。当您输入由经济型驱动程序提供服务的新的 `PersistentVolumeClaim` 时，驱动程序将查看是否已存在可为新的 qtree 提供服务的 FlexVol 。如果不存在可为 qtree 提供服务的 FlexVol ，则会创建一个新的 FlexVol 。</block>
  <block id="abbdd4298bb3e525fd172b2bbe5a451c" category="section-title">如何为在 ONTAP NAS 上配置的卷设置 Unix 权限？</block>
  <block id="a535e502931280dfaa539ecd1cbdfc0c" category="paragraph">您可以通过在后端定义文件中设置参数来对 Astra Trident 配置的卷设置 Unix 权限。</block>
  <block id="094ef47e6456d60b656401b0f2bbfcbd" category="section-title">如何在配置卷时配置一组显式 ONTAP NFS 挂载选项？</block>
  <block id="ae6bc3659bb0be0a7d9f98a63775b7c2" category="section-title">如何将配置的卷设置为特定导出策略？</block>
  <block id="700a2008fea63d02c24b85f2f75d357e" category="paragraph">要允许相应的主机访问卷，请使用后端定义文件中配置的 `exportPolicy` 参数。</block>
  <block id="9d5813dee71bcbf3d3a03c62354c3e55" category="section-title">如何使用 ONTAP 通过 Astra Trident 设置卷加密？</block>
  <block id="ef1581716b653c4364dd5005dbe9e40a" category="section-title">通过 Astra Trident 为 ONTAP 实施 QoS 的最佳方式是什么？</block>
  <block id="f412d672b51ea3c57812ebf3be0ddccb" category="paragraph">使用 `StorageClasses` 为 ONTAP 实施 QoS 。</block>
  <block id="1c771b761835123a135e64f70567d768" category="section-title">如何通过 Astra Trident 指定精简配置或厚配置？</block>
  <block id="0d97afe7a571dc39db1c810013844332" category="paragraph">ONTAP 驱动程序支持精简或厚配置。ONTAP 驱动程序默认为精简配置。如果需要厚配置，则应配置后端定义文件或 `StorageClass` 。如果同时配置了这两者，则 `StorageClass` 优先。为 ONTAP 配置以下内容：</block>
  <block id="2d0384de8b72e53c3476a478a5d4ec53" category="list-text">在 `StorageClass` 上，将 `provisioningType` 属性设置为 thick 。</block>
  <block id="3764067c4b14276efb241c511c8b0cc2" category="list-text">在后端定义文件中，通过将 `backend spaceReserve 参数` 设置为 volume 来启用厚卷。</block>
  <block id="d4391b26a81fead46afc74243c4029aa" category="section-title">如何确保即使意外删除了 PVC 也不会删除所使用的卷？</block>
  <block id="e58a684cd1a44d4879defbb2ec06b9a4" category="paragraph">从版本 1.10 开始， Kubernetes 会自动启用 PVC 保护。</block>
  <block id="8d766c7d692523686b8954d72ee86ea4" category="section-title">是否可以扩展由 Astra Trident 创建的 NFS PVC ？</block>
  <block id="328e34871ba32779f27f3e8a8e78499a" category="paragraph">是的。您可以扩展由 Astra Trident 创建的 PVC 。请注意，卷自动增长是一项 ONTAP 功能，不适用于 Trident 。</block>
  <block id="3319194e0ba07a6aa327aefa1ab1e41f" category="section-title">是否可以在卷处于 SnapMirror 数据保护（ DP ）或脱机模式时导入它？</block>
  <block id="0b10afe39923054016a71caf423fdec6" category="paragraph">如果外部卷处于 DP 模式或脱机，则卷导入将失败。您会收到以下错误消息：</block>
  <block id="eed67b2d196c61d9c6cf4a50878ba446" category="section-title">如何将资源配额转换为 NetApp 集群？</block>
  <block id="45f78013e46c8f3e884ed0f7becbd5ab" category="paragraph">只要 NetApp 存储具有容量， Kubernetes 存储资源配额就应起作用。当 NetApp 存储由于容量不足而无法支持 Kubernetes 配额设置时， Astra Trident 会尝试配置，但会出错。</block>
  <block id="491a93842f7a65b8cbe82aca71db0d3f" category="section-title">是否可以使用 Astra Trident 创建卷快照？</block>
  <block id="9792ac41ce6f91861f84548e1b4a2b1c" category="paragraph">是的。Astra Trident 支持从快照创建按需卷快照和永久性卷。要从快照创建 PV ，请确保已启用 `VolumeSnapshotDataSource` 功能门。</block>
  <block id="1eedb8a6574b0c07ea61689a7e3ec8d4" category="section-title">哪些驱动程序支持 Astra Trident 卷快照？</block>
  <block id="24c649a639a2c31810a4dfc6ed0190da" category="section-title">如何为采用 ONTAP 的 Astra Trident 配置的卷创建快照备份？</block>
  <block id="0bdcd128fab544a7df404bc496a4126e" category="paragraph">此功能可从 `ontap-nas` ， `ontap-san` 和 `ontap-nas-flexgroup` 驱动程序获得。您也可以在 FlexVol 级别为 `ontap-san-economy` 驱动程序指定 `snapshotPolicy` 。</block>
  <block id="933b520ff6d70262ddb482995c684d57" category="paragraph">此功能也可在 `ontap-nas-economy` 驱动程序上使用，但可在 FlexVol 级别粒度上使用，而不能在 qtree 级别粒度上使用。要启用对由 Astra Trident 配置的卷创建快照的功能，请将后端参数选项 `snapshotPolicy` 设置为 ONTAP 后端定义的所需快照策略。Astra Trident 无法识别存储控制器创建的任何快照。</block>
  <block id="594e8a352537de25938bdd663d6211b5" category="section-title">是否可以为通过 Astra Trident 配置的卷设置快照预留百分比？</block>
  <block id="8db5662205f3a6430af4bea6f08e7d45" category="paragraph">可以，您可以通过在后端定义文件中设置 `snapshotReserve` 属性来预留特定百分比的磁盘空间，以便通过 Astra Trident 存储 Snapshot 副本。如果在后端定义文件中配置了 `snapshotPolicy` 和 `snapshotReserve` ，则会根据后端文件中提及的 `snapshotReserve` 百分比设置快照预留百分比。如果未提及 `snapshotReserve` 百分比数，则默认情况下， ONTAP 会将快照预留百分比设置为 5 。如果将 `snapshotPolicy` 选项设置为 none ，则快照预留百分比将设置为 0 。</block>
  <block id="6b0d34d8a0749198a6b80eec69479c86" category="section-title">是否可以直接访问卷快照目录和复制文件？</block>
  <block id="eb3a2d1eb3c4022269f4c6837332311a" category="paragraph">可以，您可以通过在后端定义文件中设置 `snapshotDir` 参数来访问 Trident 配置的卷上的 Snapshot 目录。</block>
  <block id="81dbf5e91cc69bfcf6477128389d8a25" category="section-title">是否可以通过 Astra Trident 为卷设置 SnapMirror ？</block>
  <block id="64dd4ea74b402889a9c341da491f4933" category="paragraph">目前，必须使用 ONTAP 命令行界面或 OnCommand 系统管理器在外部设置 SnapMirror 。</block>
  <block id="e321bf6d54ded18df56a41ea51223a2a" category="section-title">如何将永久性卷还原到特定 ONTAP 快照？</block>
  <block id="5325f5d2cf63aaaa6610f09e8aa4dc35" category="paragraph">要将卷还原到 ONTAP 快照，请执行以下步骤：</block>
  <block id="4e789db936072df2058e9f271a9b8db8" category="list-text">暂停正在使用永久性卷的应用程序 POD 。</block>
  <block id="b34baa75f4f799a23b19de9b94e86868" category="list-text">通过 ONTAP 命令行界面或 OnCommand 系统管理器还原到所需的快照。</block>
  <block id="08754f2800804f1fe3673c858b4b56e0" category="list-text">重新启动应用程序 POD 。</block>
  <block id="0d3ef54a4cc337b5d907b6639e51c6d4" category="section-title">如何区分每个客户 / 租户的存储类使用情况？</block>
  <block id="fda1b35892cb6f61447f0e49415937d9" category="paragraph">Kubernetes 不允许在命名空间中使用存储类。但是，您可以使用 Kubernetes 通过使用每个命名空间的存储资源配额来限制每个命名空间的特定存储类的使用。要拒绝特定命名空间对特定存储的访问，请将该存储类的资源配额设置为 0 。</block>
  <block id="30d965eef5ba25c6b9998ae38270b43e" category="doc">法律声明</block>
  <block id="a191af7083288f9d9556f3ebcd821a34" category="paragraph">现在， Kubernetes 和 Astra Trident 都应显示 * 基本 -CSI * 存储类， Astra Trident 应已发现后端的池。</block>
  <block id="8355509d170c8a61d236e927a5fcc6e2" category="paragraph">如果您使用的是 Kubernetes 的分发版本，其中 `kubelet` 将其数据保存在通常的 ` /var/lib/kubelet` 以外的路径上，则可以使用 ` -kubelet-dir` 指定备用路径。</block>
  <block id="47cd697cf3c9dcf916f70a0007956c1d" category="paragraph">如果您需要自定义安装，使其超出安装程序参数的允许范围，则还可以自定义部署文件。使用 ` -generate-custom-yaml` 参数可在安装程序的 `setup` 目录中创建以下 YAML 文件：</block>
  <block id="0858f0ee003d52951161848adffe1b31" category="list-text">`trident — clusterrolebinding 。 yaml`</block>
  <block id="af73689aedfa47bd2a7cf144917b0642" category="list-text">`trident 部署。 yaml`</block>
  <block id="1d53fd876245951bb003eb47849ff39d" category="list-text">`trident — crds.yaml`</block>
  <block id="b17dbe8acaeca82c72d25948de03eefc" category="list-text">`trident 集群角色。 yaml`</block>
  <block id="ecb2b56a094cc1cbd3ac263b23d91f8b" category="list-text">`trident — demonset.yaml`</block>
  <block id="c5e462ae653234d0ea0e98a000e62a97" category="list-text">`trident service.yaml`</block>
  <block id="f1347677de6873f8ddce6d736cba9a63" category="list-text">`trident 命名空间 .yaml`</block>
  <block id="2539c7e25ada2a2cdae0eb4c4633b893" category="list-text">`trident 服务帐户。 yaml`</block>
  <block id="385d099ed91e83dbe20ea05fbed68e22" category="paragraph">生成这些文件后，您可以根据需要对其进行修改，然后使用 ` -use-custom-yaml` 安装自定义部署。</block>
  <block id="4a052772dca278b7be31d54ca9f21831" category="inline-link-macro">基本概念</block>
  <block id="dd3de2609b612d76ef4c71b97b8d6100" category="inline-link">按照其步骤启用 CLI 访问</block>
  <block id="c585967fa32d82c5e3c24bd63926c6a0" category="list-text">如果您将 Kubernetes 与 Docker Enterprise 结合使用，<block ref="57562caf1c76e1a261b7e2f8c3d113f9" category="inline-link-rx"></block>。</block>
  <block id="2e1b3f44683eee188be985693c4af5e1" category="list-text">Helm 版本 3</block>
  <block id="e366a20246a41520da551be510c1d658" category="paragraph">在安装期间，可以通过两种方式传递配置数据：</block>
  <block id="ea8cda06a0e70ad34c1b9ab1b7135105" category="inline-link-macro">支持的 Kubernetes 集群</block>
  <block id="e420b75ec3bc014e3f69c43b2383768b" category="admonition">使用 OpenShift 时，在以下所有示例中使用 `oc` 而不是 `kubectl` ，并首先以 * 系统： admin* 的身份运行 `oc login -u system ： admin` 或 `oc login -u Kube-admin` 进行登录。</block>
  <block id="337d79852891a37d41285c9101c3fff4" category="paragraph">运行以下命令：</block>
  <block id="dbbf8c6ec95775d28c3c6da1878bf8c3" category="list-text">运算符本身</block>
  <block id="a770ca95121cc795b602f9af6af024fb" category="admonition">在 Kubernetes 集群中只能有 * 一个操作符实例 * 。请勿创建 Trident 操作员的多个部署。</block>
  <block id="ec53a8c4f07baed5d8825072c89799be" category="cell">Status</block>
  <block id="2763f33c904a183bd0ef06f9c4fb4403" category="cell">安装</block>
  <block id="64162845794ff7262e665deec58a84f5" category="cell">操作员正在使用此 `TridentOrchestrator` CR 安装 Astra Trident 。</block>
  <block id="98dd43dfae05b11befe1f140e0ec787a" category="cell">已安装</block>
  <block id="2fe2cc0adf9b69a871d33ba220695cd4" category="cell">Astra Trident 已成功安装。</block>
  <block id="c2aaea4dacecce78b34302e41fcef75e" category="cell">正在卸载</block>
  <block id="c27ff0e050a671f2eab32a372c9636bd" category="cell">操作符正在卸载 Astra Trident ，因为 `sPec.uninstall=true` 。</block>
  <block id="b78846123fdd78d5ab62451b855194e3" category="cell">已卸载</block>
  <block id="f8a32612e33c768b5fa0dd033d91ce8d" category="cell">Astra Trident 已卸载。</block>
  <block id="d7c8c85bf79bbe1b7188497c32c3b0ca" category="cell">失败</block>
  <block id="273b9a9e933220f1963cbac7a7a46645" category="cell">操作员无法安装，修补，更新或卸载 Astra Trident ；操作员将自动尝试从此状态恢复。如果此状态仍然存在，则需要进行故障排除。</block>
  <block id="6909beea5b50605780e3411f879fe916" category="cell">正在更新</block>
  <block id="3201d58137fab497dea740d761a9733b" category="cell">操作员正在更新现有安装。</block>
  <block id="902b0d55fddef6f8d651fe1035b7d4bd" category="cell">error</block>
  <block id="efaeca66375c8663b6d1d64f4886f267" category="cell">不使用 `TridentOrchestrator` 。另一个已存在。</block>
  <block id="f456a413d0506028374e871768a5f176" category="paragraph">当集群的 Kubernetes 版本升级到受支持的版本时，操作员会自动更新现有的 Astra Trident 安装并进行更改，以确保其满足 Kubernetes 版本的要求。</block>
  <block id="d1aae6ea63eb5e7fe6a9fcea5f671406" category="admonition">如果集群升级到不受支持的版本，则操作员会阻止安装 Astra Trident 。如果已随操作员安装了 Astra Trident ，则会显示一条警告，指示 Astra Trident 安装在不受支持的 Kubernetes 版本上。</block>
  <block id="37dbca6cb8ca55a471ebc072575c0a46" category="list-text">在要部署 Astra Trident 的远程计算机上部署适当版本的 `kubectl` 。</block>
  <block id="02ed10abbc71334918b1acb54df6e3f3" category="list-text">从 Kubernetes 集群复制配置文件，并在远程计算机上设置 `KUBECONFIG` 环境变量。</block>
  <block id="da693b77cde91654c6296abe8f901988" category="list-text">启动 `kubectl get nodes` 命令，验证您是否可以连接到所需的 Kubernetes 集群。</block>
  <block id="df65ec31c6f96e95301e3c6ff8863335" category="list-text">使用标准安装步骤从远程计算机完成部署。</block>
  <block id="13c852fce58f7c6981fa0a952dcd76af" category="summary">使用 Trident 操作符，您可以使用 `TridentOrchestrator` 规范中的属性自定义 Astra Trident 的安装方式。</block>
  <block id="83f499a540b1323009c200d6f8cc9396" category="cell">参数</block>
  <block id="7a1920d61156abc05a60135aefe8bc67" category="cell">Default</block>
  <block id="a67cf6b087ff88dbfacec8375928995c" category="cell">`debug`</block>
  <block id="4f72bc786a1a01d5a1a8bc09d33334cc" category="cell">为 Astra Trident 启用调试</block>
  <block id="68934a3e9455fa72420237eb05902327" category="cell">false</block>
  <block id="2bccac20e55391730a985f9819e1cc41" category="cell">`autosupport 映像`</block>
  <block id="84448c234dfdfd2a7367341fd4b56a80" category="cell">AutoSupport 遥测的容器映像</block>
  <block id="f4a6821b04b9ce6b90148068341347b6" category="cell">`autosupport 代理`</block>
  <block id="256acfe307251e7444859851d87d5735" category="cell"><block ref="256acfe307251e7444859851d87d5735" category="inline-link-rx"></block></block>
  <block id="e9f06180af644cfa6e5d20bd67c03bc5" category="cell">`卸载`</block>
  <block id="7610c5cc7910022402c4fbd450d889ce" category="cell">`TridentImage`</block>
  <block id="8088435dc0e1c8b85217d850d3e7a602" category="cell">`imageRegistry`</block>
  <block id="e6b96cbb467923e86672bb25db5ecebb" category="cell">`kubeletDir`</block>
  <block id="2d30d1348c4d2533a165827a22516caa" category="cell">`imagePullSecs`</block>
  <block id="5a2ebfb8baa378cfcfcba58bbb1380c2" category="doc">要求</block>
  <block id="c777be7f669397b0a376fe32ca5cd9c3" category="section-title">支持的前端（编排程序）</block>
  <block id="74aefc05d193afd5c50a0df882997656" category="paragraph">Astra Trident 支持多个容器引擎和流程编排程序，其中包括：</block>
  <block id="201eb37826a33e35adff9119f25946bd" category="paragraph">以下版本支持 Trident 操作符：</block>
  <block id="f787cd4b6963b13f12fa53131f58ef6c" category="section-title">支持的后端（存储）</block>
  <block id="843e2f0c722d25903a6010b62ac4f13b" category="paragraph">要使用 Astra Trident ，您需要以下一个或多个受支持的后端：</block>
  <block id="a3c559e0541e9bb860178ce6fe414224" category="list-text">适用于 GCP 的 Cloud Volumes Service</block>
  <block id="1d3d126b8a5bad69c46ed03734beed47" category="list-text">NetApp 全 SAN 阵列（ ASA ）</block>
  <block id="c7c7a6a5641f33e348244f9c43010e16" category="section-title">功能要求</block>
  <block id="21021ea0e52be8e9c599f4dff41e5be0" category="cell">功能</block>
  <block id="80afba45eb055fc9bdc48c90d1debd06" category="cell">Kubernetes 版本</block>
  <block id="10f295a61d2a793ac8936a69cf458654" category="cell">是否需要功能安全门？</block>
  <block id="e830b7e4d1fb7f84600876af87cb4381" category="cell">卷快照</block>
  <block id="ea8ed249117e76cb53766e218fe2b7c7" category="cell">卷快照中的 PVC</block>
  <block id="28dcded20f550dcad1bd9bb03a5bbe73" category="cell">iSCSI PV 调整大小</block>
  <block id="1673543ed032e46f3572ba65bc070693" category="cell">ONTAP 双向 CHAP</block>
  <block id="176e16df4faab1a1e06e9585c813d5fe" category="cell">动态导出策略</block>
  <block id="1f7219b07d5bce7feec002a9f4dc2201" category="cell">Trident 运算符</block>
  <block id="443432948b68bb63d707ce7ecc4a021a" category="cell">CSI 拓扑</block>
  <block id="11ea58814ce429c3e3254a63f8cde7a4" category="paragraph">`tridentctl` 实用程序也可在 Linux 的任何这些分发版上运行。</block>
  <block id="13d80777c8fd43e555c1f5b1b72d7ef0" category="section-title">主机配置</block>
  <block id="2139fe384d5ae165545994dff01961d9" category="section-title">存储系统配置：</block>
  <block id="923680056b0f0258907f498670b4ead1" category="section-title">容器映像以及相应的 Kubernetes 版本</block>
  <block id="aa92c4c233bc01609d957e469736b699" category="cell">容器映像</block>
  <block id="a60c2f57df655a9ac5fcaa0750886195" category="summary">如果您刚刚开始使用 Kubernetes ，请按照说明安装 Kubernetes 以进行尝试。这些说明提供了一个裸机单节点集群， Trident 可以与此集群集成以供演示。</block>
  <block id="e8dadc588901af436e2c6036acf23973" category="inline-link-macro">NetApp 试用</block>
  <block id="8685ac2061f9dca7ab48f41e0871f7af" category="inline-link-macro">《 kubeadm 安装指南》</block>
  <block id="b928e0aee19c1e2cc91c85e8a0856936" category="summary">使用此处提供的指针排除安装和使用 Astra Trident 时可能遇到的问题。</block>
  <block id="231cf4c70d866b616c21baddaeed0696" category="doc">故障排除</block>
  <block id="8ef0ab9bbedaa7608c9abed7c7213218" category="admonition">要获得有关 Astra Trident 的帮助，请使用 `tridentctl logs -a -n trident` 创建支持包，并将其发送到 `NetApp 支持 &lt; 获取帮助 &gt;` 。</block>
  <block id="40e41fb2db11266b8f751c0d5c67cba0" category="inline-link">NetApp 知识库（需要登录）</block>
  <block id="01005ecf4349194d1ec13d0ba516c9e5" category="admonition">有关故障排除文章的完整列表，请参见<block ref="57f5c759ada931c6a2051314ca6ee99e" category="inline-link-rx"></block>。您还可以找到有关排除与 Astra 相关的问题的信息<block ref="695f48b1d8b7348c0e2828947d24161e" category="inline-link-rx"></block>。</block>
  <block id="163fb9eb00818e2c7109900db1a3cc82" category="section-title">常规故障排除</block>
  <block id="f504c27d1ad305a988958b64f34468cb" category="list-text">如果 Trident Pod 无法正常启动（例如，当 Trident Pod 停留在 `ContainerCreating` 阶段且已准备好的容器少于两个时），则运行 `kubectl -n trident describe deployment trident` and `kubectl -n trident describe pod trident -%%.%.%.* -***` 可以提供更多见解。获取 kubelet 日志（例如，通过 `jlogalctl -xeu kubelet` ）也会很有帮助。</block>
  <block id="87248f7afe198418bdbedd919695631e" category="list-text">您还可以通过在后端定义中包含 `debugTraceFlags` 来获取每个后端的调试日志。例如，包括 `debugTraceFlags ： ｛ "api" ： true ， "method " ： true ， ｝` 以获取 Trident 日志中的 API 调用和方法遍历。现有后端可以已配置 `debugTraceFlags` 并配置 `tridentctl 后端更新` 。</block>
  <block id="6cc37a0664d7f97f87d34eadef23dbad" category="list-text">使用 RedHat CoreOS 时，请确保在工作节点上启用了 `iscsid` 并默认启动。可以使用 OpenShift MachineConfigs 或修改点燃模板来完成此操作。</block>
  <block id="7f0ecdfa510b31b01d331c2760643b83" category="list-text">如果在将 PV 挂载到容器时出现问题，请确保 `rpcbind` 已安装并正在运行。对主机操作系统使用所需的软件包管理器，并检查 `rpcbind` 是否正在运行。您可以通过运行 `systemctl status rpcbind` 或其等效项来检查 `rpcbind` 服务的状态。</block>
  <block id="78aeadc89feb4cf244398a7d35a0d656" category="list-text">如果 Trident 后端报告其处于 `Failed` 状态，尽管之前已正常工作，但这可能是由于更改了与后端关联的 SVM/ 管理员凭据所致。使用 `tridentctl update backend` 更新后端信息或放弃 Trident Pod 将修复此问题描述。</block>
  <block id="b851cfc28cd6e5cb9aaf87bdb59a68aa" category="list-text">如果在容器运行时安装 Trident 时遇到权限问题，请使用 ` -in cluster=false` 标志尝试安装 Trident 。这不会使用安装程序 POD ，并可避免因 `trident 安装程序` 用户而出现权限问题。</block>
  <block id="6f7d49547ff47cfaf1fd93d134b603be" category="list-text">使用 `uninstall 参数 &lt;Uninstalling Trident &gt;` 在运行失败后进行清理。默认情况下，该脚本不会删除 Trident 创建的 CRD ，因此即使在正在运行的部署中，也可以安全地卸载并重新安装。</block>
  <block id="f1112223b41fddc71fd6a626582dfb78" category="inline-link">Trident 版本</block>
  <block id="51748ba3d16ecfd8c45c7ebf2043b738" category="list-text">成功安装后，如果 PVC 停留在 `Pending` 阶段，则运行 `kubectl describe PVC` 可以提供追加信息，说明 Trident 为何无法为此 PVC 配置 PV 。</block>
  <block id="a900bd1dbd5690f78a30ca74d138d0b7" category="section-title">使用操作员对未成功的 Trident 部署进行故障排除</block>
  <block id="0e89989064bf4afdc37fd5a7be4f607d" category="paragraph">如果使用操作员部署 Trident ，则 `TridentOrchestrator` 的状态将从 `Installing` 更改为 `Installed` 。如果您观察到 `failed` 状态，并且操作员无法自行恢复，则应运行以下命令来检查操作员的日志：</block>
  <block id="df9771dbb13da45493e576499910c0b4" category="paragraph">跟踪 trident 操作器容器的日志可能会指向问题所在。例如，其中一个问题描述可能是无法从运行良好的环境中的上游注册表中提取所需的容器映像。</block>
  <block id="0fd4c6187c561958bc76052df7774593" category="paragraph">要了解 Trident 安装失败的原因，您应查看 `TridentOrchestrator` 的状态。</block>
  <block id="1e054f4c292a5388d6318461fe73d749" category="paragraph">此错误表示已存在用于安装 Trident 的 `TridentOrchestrator` 。由于每个 Kubernetes 集群只能有一个 Trident 实例，因此操作员可确保在任意给定时间只存在一个可创建的活动 `TridentOrchestrator` 。</block>
  <block id="568fcf9beb0dbd37c57dff251a3164ed" category="paragraph">此外，观察 Trident Pod 的状态通常可以指示情况是否不正确。</block>
  <block id="f89c17ddb9f8bdaf5c95a466d5f6a500" category="paragraph">您可以清楚地看到，由于未提取一个或多个容器映像， Pod 无法完全初始化。</block>
  <block id="d57d1a6de03b2ddf3ee54f680152e2b6" category="paragraph">要解决此问题，您应编辑 `TridentOrchestrator` CR 。或者，您也可以删除 `TridentOrchestrator` ，并使用修改后的准确定义创建一个新的。</block>
  <block id="021e9ae5361eb14975bf9a30f99770f5" category="paragraph">为了帮助您找出出现问题的原因，您可以使用 `` -d`` 参数再次运行安装程序，该参数将打开调试模式并帮助您了解问题所在：</block>
  <block id="01539f4f1fd20792cbbae6bb0506cc20" category="paragraph">解决此问题后，您可以按如下所示清理安装，然后再次运行 `tridentctl install` 命令：</block>
  <block id="c109878131f34375d85b7eff9721dcde" category="summary">了解如何在 Astra Trident 安装中创建和使用 Element 后端。</block>
  <block id="f2733a323df72dea4b230205225bdc13" category="doc">配置 NetApp HCI 或 SolidFire 后端</block>
  <block id="d1d184cecc23825cff20fabf3cdfb862" category="list-text">运行 Element 软件的受支持存储系统。</block>
  <block id="4055116469942da7f6ed83abcf57d0a4" category="list-text">NetApp HCI/SolidFire 集群管理员或租户用户的凭据，可用于管理卷。</block>
  <block id="d5fa5f22855b065d96647dfb0c06d685" category="inline-link-macro">工作节点准备信息</block>
  <block id="02017e70674a0c740b2b95fbb0cc2aa1" category="paragraph">无文件系统。原始块设备。</block>
  <block id="15b7c7ffe264d7b8c61915ff2a6ef96c" category="section-title">后端配置选项</block>
  <block id="9d370350f8d0178b5dfbec9def10d13a" category="paragraph">有关后端配置选项，请参见下表：</block>
  <block id="7877022c956918624cc0373ff564cad4" category="cell">`ve版本`</block>
  <block id="40e27006e7b709772172391a3d17b331" category="cell">始终为 1</block>
  <block id="868dff7060d78b6417dc8e065eca8374" category="cell">`storageDriverName`</block>
  <block id="5aae2c40b50d296edbd4ba9cfb462b49" category="cell">存储驱动程序的名称</block>
  <block id="2353a0a3a06283f07550efc7bad8a90e" category="cell">始终为 "solidfire-san"</block>
  <block id="f5b55596d3f53b1857a4980dac9db979" category="cell">`backendName`</block>
  <block id="5afd6479855e8d63f324b6ec2fa787b4" category="cell">自定义名称或存储后端</block>
  <block id="f4210b28f3cf7c1f7e6e328bb42c6060" category="cell">SolidFire + 存储（ iSCSI ） IP 地址</block>
  <block id="06981b2729b4b522b21d903c7738a2ca" category="cell">`端点`</block>
  <block id="41eba2d95ecaf35c8bd3a972c263ffe4" category="cell">使用租户凭据的 SolidFire 集群的 MVIP</block>
  <block id="955f5caa2495689258902533d1a6cd44" category="cell">`sVIP`</block>
  <block id="b07ca7de83de58a699966c9bc9003020" category="cell">存储（ iSCSI ） IP 地址和端口</block>
  <block id="eea443d4fcc24d4cd2cab08c2a6c062f" category="cell">`标签`</block>
  <block id="749df53d02481e75dd919dddf42fbbef" category="cell">要应用于卷的一组任意 JSON 格式的标签。</block>
  <block id="1d76382e861d2df96647216b26d38948" category="cell">"</block>
  <block id="4e25fe4a614b527d9b3d89ee6abe5d35" category="cell">`租户名称`</block>
  <block id="251f1fc42c38ca55f30e5e9d11dac168" category="cell">要使用的租户名称（如果未找到，则创建）</block>
  <block id="f016e2c01f2bafa45e6b537d49f0f9da" category="cell">`InitiatorIFace`</block>
  <block id="4381b3c378885de93e2166f240096338" category="cell">将 iSCSI 流量限制为特定主机接口</block>
  <block id="6522432847a0e6902318a976e5533f62" category="cell">default</block>
  <block id="5ff567e0863a47346f44f87ed793f508" category="cell">`UseCHAP`</block>
  <block id="2d1474e8b52ef42851337fb3fef4e1a1" category="cell">"nfsvers=3"</block>
  <block id="32738663b16444872e4e5721c7c37660" category="cell">`访问组`</block>
  <block id="c4ca01925aae0c37398f0b30a4ce1273" category="cell">要使用的访问组 ID 列表</block>
  <block id="e64099a24f6ef8bbbdb23c2a803cd065" category="cell">查找名为 "trident " 的访问组的 ID</block>
  <block id="26194deaf50c44db6eb5983237bdaf25" category="cell">`类型`</block>
  <block id="ee1aea1de97320ad8e98436f68b01b4a" category="cell">QoS 规范</block>
  <block id="91590ee78f1b4751284f4f9ea80cfe86" category="cell">`limitVolumeSize`</block>
  <block id="18320b2a705a7bed37a6bc0af4aee093" category="cell">如果请求的卷大小超过此值，则配置失败</block>
  <block id="7962423206a6704e20fa94085d19b517" category="cell">" （默认情况下不强制实施）</block>
  <block id="f2f2c7c3c767da610bd95934104674f6" category="cell">`debugTraceFlags`</block>
  <block id="ae0784115c8f815d4a2ca170c59f3c99" category="cell">故障排除时要使用的调试标志。示例 ｛ "api" ： false ， "method " ： true ｝</block>
  <block id="37a6259cc0c1dae299a7866489dff0bd" category="cell">空</block>
  <block id="88dce60232453383ab0d1c3c59cc931d" category="admonition">请勿使用 `debugTraceFlags` ，除非您正在进行故障排除并需要详细的日志转储。</block>
  <block id="3185240fb49cba19667fbdf639f3271e" category="paragraph">此示例显示了一个后端文件，该文件使用 CHAP 身份验证并使用特定 QoS 保证对三种卷类型进行建模。然后，您很可能会使用 `IOPS` storage class 参数定义存储类以使用其中的每种类型。</block>
  <block id="4d0d37d727675761e4c0e324eb57ca2f" category="list-text"><block ref="4d0d37d727675761e4c0e324eb57ca2f" category="inline-link-macro-rx"></block></block>
  <block id="da195e41c537042ae77405110c4512ff" category="paragraph">以配置和使用<block ref="5129d3f1116e9c5221bfcf965a1ede35" category="inline-link-rx"></block> 后端，您需要满足以下要求：</block>
  <block id="2c00ff9c7700dc3529c57f0a5281bbe2" category="list-text">Google Cloud 帐户的项目编号</block>
  <block id="43752d169c5729fffa3a6557a0978cb8" category="list-text">具有 `netappcloudvolumes.admin` 角色的 Google Cloud 服务帐户</block>
  <block id="07cc9934740ba3dd46a0d7d2c9502d39" category="cell">"GCP-CVS"</block>
  <block id="f476273c71e20fc5a845a5345a620117" category="cell">驱动程序名称 + "_" + API 密钥的一部分</block>
  <block id="6eb82a822b962404b9694b93f2967679" category="cell">`s存储类`</block>
  <block id="c96383270cbab23de47b4f0961f64929" category="cell">`projectNumber`</block>
  <block id="2086191016950a784040f7d22ab27f60" category="cell">`区域`</block>
  <block id="a34d72a685d5e27eb6bc18f54a7bab1d" category="cell">`apiKey`</block>
  <block id="af18429250667f805769a7755a008c1f" category="cell">`代理 URL`</block>
  <block id="2b45af5c768d7b2495ef631c991ecd78" category="cell">`nfsMountOptions`</block>
  <block id="b9cc8276829a756e7a22476617204267" category="cell">精细控制 NFS 挂载选项。</block>
  <block id="2288620b3dc019c6359bcc7f50b72ab3" category="cell">如果请求的卷大小超过此值，则配置失败</block>
  <block id="567c7f0eca746ed7513764be5ecf6d03" category="cell">"" （默认情况下不强制实施）</block>
  <block id="0322003a3502f221fdb74b059dfff46e" category="cell">`s服务级别`</block>
  <block id="4dd7128ceae058946c44bbbb0985ec6f" category="paragraph">每个后端都会在一个 Google Cloud 区域中配置卷。要在其他区域创建卷，您可以定义其他后端。</block>
  <block id="9c64942fe493cb70c474ff447429d8a4" category="cell">`exportRule`</block>
  <block id="1274e36c193ec0ce8b5c49d5e78ffd7b" category="cell">"0.0.0.0/0</block>
  <block id="ce8f82152151ae2aadaec166eca744a9" category="cell">`snapshotDir`</block>
  <block id="51b2015e6da8653f4041b71312ad43fe" category="cell">访问 ` .snapshot` 目录</block>
  <block id="c07fbc0b2a1a865fe9e3a55c05b4f690" category="cell">false</block>
  <block id="7556d5a1b0c5f68b7cb5aedaa3156008" category="cell">`sSnapshot 预留`</block>
  <block id="31ed61cc3c85d0bb697cd12b77f37fd1" category="cell">为快照预留的卷百分比</block>
  <block id="e76dcf1d6497658a2994b5f1f65b7a83" category="cell">"" （接受 CVS 默认值为 0 ）</block>
  <block id="a48a8458539e489328f4d6d3fc0ee288" category="cell">`s大小`</block>
  <block id="25f4894ddaab3c1182f12732d3bcf889" category="section-title">示例 1 ：最低配置</block>
  <block id="3ad256eea0abb551eaab63c84aa3d1f9" category="paragraph">创建后端配置文件后，运行以下命令：</block>
  <block id="a61ed3c1ecae587dbee1f2c0ace81e3b" category="paragraph">如果后端创建失败，则后端配置出现问题。您可以运行以下命令来查看日志以确定发生原因：</block>
  <block id="8427b84145b88f048d5caa532324cd11" category="paragraph">确定并更正配置文件中的问题后，您可以再次运行 create 命令。</block>
  <block id="8f828c7344e7fe65d66237a25193068b" category="summary">了解如何准备使用 ONTAP SAN 驱动程序配置 ONTAP 后端。</block>
  <block id="5475028f502d04bc17cdfdf613d28cbf" category="paragraph">请记住，您还可以运行多个驱动程序，并创建指向其中一个驱动程序的存储类。例如，您可以配置使用 `ontap-san` 驱动程序的 `san-dev` 类和使用 `ontap-san-economy-one` 的 `san-default` 类。</block>
  <block id="c75f7811d70d17dbcd88e9d03752cbed" category="section-title">身份验证</block>
  <block id="51e35cec1e001fb8abfbe474a18dd282" category="paragraph">Astra Trident 提供了两种对 ONTAP 后端进行身份验证的模式。</block>
  <block id="00cbc0e7ed0014813b07fc8452f60df1" category="list-text">Credential Based ：具有所需权限的 ONTAP 用户的用户名和密码。建议使用 `admin` 或 `vsadmin` 等预定义的安全登录角色，以确保与 ONTAP 版本的最大兼容性。</block>
  <block id="e2cd9c84c3ebf14f3c81be4692848e5b" category="list-text">基于证书： Astra Trident 还可以使用后端安装的证书与 ONTAP 集群进行通信。此处，后端定义必须包含客户端证书，密钥和可信 CA 证书的 Base64 编码值（如果使用）（建议）。</block>
  <block id="a2f8f419bf420960ef8cca73e1999e09" category="section-title">启用基于凭据的身份验证</block>
  <block id="ceae351bc6b26100a9b1685a5d477c0a" category="paragraph">Astra Trident 需要 SVM 范围 / 集群范围的管理员的凭据才能与 ONTAP 后端进行通信。建议使用标准的预定义角色，例如 `admin` 或 `vsadmin` 。这样可以确保与未来的 ONTAP 版本向前兼容，这些版本可能会使功能 API 公开供未来的 Astra Trident 版本使用。可以创建自定义安全登录角色并将其用于 Astra Trident ，但不建议使用。</block>
  <block id="2312b8f77f99c346269b67308afc3649" category="paragraph">后端定义示例如下所示：</block>
  <block id="2a2ef6dcf08a8789a55301af5f71304c" category="paragraph">请注意，后端定义是凭据以纯文本格式存储的唯一位置。创建后端后，用户名 / 密码将使用 Base64 进行编码并存储为 Kubernetes 密钥。创建 / 更新后端是唯一需要了解凭据的步骤。因此，这是一项仅由管理员执行的操作，由 Kubernetes 或存储管理员执行。</block>
  <block id="052f76b486189a7b01340d5134eb7985" category="section-title">启用基于证书的身份验证</block>
  <block id="0778b06c5ea9fded4fd7b586b248dd86" category="paragraph">新的和现有的后端可以使用证书并与 ONTAP 后端进行通信。后端定义需要三个参数。</block>
  <block id="d5b9c9db262b1927d7914504f3587adb" category="list-text">clientCertificate ：客户端证书的 Base64 编码值。</block>
  <block id="8f2b750dd6a57864f0e36828c248ddfc" category="list-text">clientPrivateKey ：关联私钥的 Base64 编码值。</block>
  <block id="200c2d2a44dec6455fa1c947f9c1f534" category="list-text">trustedCACertifate ：受信任 CA 证书的 Base64 编码值。如果使用可信 CA ，则必须提供此参数。如果不使用可信 CA ，则可以忽略此设置。</block>
  <block id="6b634823c19ebc37c9e4fdbf08de1fff" category="paragraph">典型的工作流包括以下步骤。</block>
  <block id="c92e58d7dd251e6e6cdb16291a6dec90" category="list-text">生成客户端证书和密钥。生成时，将公用名（ Common Name ， CN ）设置为要作为身份验证的 ONTAP 用户。</block>
  <block id="69b521cddbc52a2d14539e349e2930f0" category="list-text">将可信 CA 证书添加到 ONTAP 集群。此问题可能已由存储管理员处理。如果未使用可信 CA ，则忽略。</block>
  <block id="2f3945695e5ca88abb46af80d87c6972" category="list-text">在 ONTAP 集群上安装客户端证书和密钥（从步骤 1 开始）。</block>
  <block id="e81810c4035ad015ad3f0d8c4f2c6454" category="list-text">确认 ONTAP 安全登录角色支持 `cert` 身份验证方法。</block>
  <block id="ea3bf76b270384627e7bcfb197ddb17b" category="list-text">使用生成的证书测试身份验证。将 &lt;SVM 管理 LIF&gt; 和 &lt;SVM 名称 &gt; 替换为管理 LIF IP 和 ONTAP 名称。</block>
  <block id="83f2adf143dc8f5fbbb9d924f840c1ce" category="list-text">使用 Base64 对证书，密钥和可信 CA 证书进行编码。</block>
  <block id="8d36e570f1edac5ae19e6733e3fbb4d5" category="list-text">使用从上一步获得的值创建后端。</block>
  <block id="2ab8ad0fce083cd02635b9126cf4353c" category="section-title">更新身份验证方法或轮换凭据</block>
  <block id="5e36c3d66bd47ae551071244dc48df17" category="admonition">轮换密码时，存储管理员必须先在 ONTAP 上更新用户的密码。然后进行后端更新。轮换证书时，可以向用户添加多个证书。之后，后端将更新以使用新证书，然后可以从 ONTAP 集群中删除旧证书。</block>
  <block id="6819218365fe3a3d66752f663feecddb" category="paragraph">更新后端不会中断对已创建卷的访问，也不会影响在之后建立的卷连接。成功的后端更新表明， Astra Trident 可以与 ONTAP 后端进行通信并处理未来的卷操作。</block>
  <block id="42f93278b0d15c8d0f6613813bf586d5" category="section-title">使用双向 CHAP 对连接进行身份验证</block>
  <block id="12dd7bfa072b5a1eecf975f6a5a6eaa7" category="admonition">`useCHAP` 参数是一个布尔选项，只能配置一次。默认情况下，此参数设置为 false 。将其设置为 true 后，无法将其设置为 false 。</block>
  <block id="bc601528678aeeb582101ed205a054bc" category="paragraph">除了 `useCHAP=true` 之外，后端定义还必须包括 `chapInitiatorSecret` ， `chapTargetInitiatorSecret` ， `chapTargetUsername` 和 `chapUsername` 字段。通过运行 `tridentctl update` 创建后端，可以更改这些密钥。</block>
  <block id="9ffdb95250e26c7a6b468126ac7c75b0" category="section-title">工作原理</block>
  <block id="adbaa30840aebfe537058f72e0989326" category="paragraph">通过将 `useCHAP` 设置为 true ，存储管理员指示 Astra Trident 在存储后端配置 CHAP 。其中包括：</block>
  <block id="29b4db879e4cc96a6b71bc763367624b" category="list-text">在 SVM 上设置 CHAP ：</block>
  <block id="13e0c564d5e1fbd33279fb276166653d" category="list-text">配置 CHAP 启动程序以及目标用户名和密码；必须在后端配置中指定这些选项（如上所示）。</block>
  <block id="2c7856e86a0cd46cb4fb48fa0886745e" category="paragraph">创建后端后， Astra Trident 会创建相应的 `tridentbackend` CRD ，并将 CHAP 密码和用户名存储为 Kubernetes 密码。此后端由 Astra Trident 创建的所有 PV 都将通过 CHAP 进行挂载和连接。</block>
  <block id="81f2df0265026a1a04bda5484798a10d" category="section-title">轮换凭据并更新后端</block>
  <block id="a7fe005c9f49619f4438aac8932fb361" category="paragraph">您可以通过更新 `backend.json` 文件中的 CHAP 参数来更新 CHAP 凭据。这需要更新 CHAP 密码并使用 `tridentctl update` 命令反映这些更改。</block>
  <block id="8959ac16a58b09dc5a158e86ab02cb53" category="admonition">更新后端的 CHAP 密码时，必须使用 `tridentctl` 来更新后端。请勿通过 CLI/ONTAP UI 更新存储集群上的凭据，因为 Astra Trident 将无法选取这些更改。</block>
  <block id="1a59d0d7850406f157c314978eb3b821" category="paragraph">现有连接将不受影响；如果凭据由 SVM 上的 Astra Trident 更新，则这些连接将继续保持活动状态。新连接将使用更新后的凭据，现有连接将继续保持活动状态。断开并重新连接旧的 PV 将导致它们使用更新后的凭据。</block>
  <block id="ef81b740be2293b7e3c41047afe98764" category="cell">"100 克 "</block>
  <block id="ff342df7522d6b527768cc6bfe5f9fae" category="summary">通过 Astra Trident ， Kubernetes 用户可以在创建卷后对其进行扩展。查找有关扩展 iSCSI 和 NFS 卷所需配置的信息。</block>
  <block id="15d79b565b148caa23e6f2b53813413d" category="section-title">展开 iSCSI 卷</block>
  <block id="0b981ab19df55a28a02578aa5f326db8" category="paragraph">您可以使用 CSI 配置程序扩展 iSCSI 永久性卷（ PV ）。</block>
  <block id="f8f338469c62eb8604f5304af08466ba" category="admonition">iSCSI 卷扩展受 `ontap-san` ， `ontap-san-economy` ， `solidfire-san` 驱动程序支持，需要 Kubernetes 1.16 及更高版本。</block>
  <block id="7ac758b4597806f6880d9618fa093e52" category="list-text">如果 PV 连接到 Pod ，则 Astra Trident 会扩展存储后端的卷，重新扫描设备并调整文件系统大小。</block>
  <block id="7efffb2478ff651b7e45343b4e9f6fa8" category="list-text">尝试调整未连接 PV 的大小时， Astra Trident 会扩展存储后端的卷。将 PVC 绑定到 Pod 后， Trident 会重新扫描设备并调整文件系统大小。然后， Kubernetes 会在扩展操作成功完成后更新 PVC 大小。</block>
  <block id="fe9ee1935ea7894fe4fd2f600993cd7d" category="section-title">第 1 步：配置 StorageClass 以支持卷扩展</block>
  <block id="c83b8171dcc233263cf7eeaef8da6a4d" category="paragraph">对于已存在的 StorageClass ，请对其进行编辑，使其包含 `allowVolumeExpansion` 参数。</block>
  <block id="59973fd7be015512b53fe121a13d5580" category="section-title">第 2 步：使用您创建的 StorageClass 创建 PVC</block>
  <block id="8592e7b08d26d1aa2ef3c44409c736fa" category="paragraph">Astra Trident 会创建一个永久性卷（ PV ）并将其与此永久性卷声明（ PVC ）关联。</block>
  <block id="8dacc1d7fdb5bfd3f8a4daedf3ccdd88" category="section-title">第 3 步：定义连接 PVC 的 POD</block>
  <block id="85f5dec267aa48cff82ccaf993019e6d" category="paragraph">在此示例中，创建了一个使用 `san-PVC` 的 Pod 。</block>
  <block id="ebae1958b6002fb43077a474d845284c" category="section-title">第 4 步：展开 PV</block>
  <block id="63188b171689bcd93b1ca818b3a2ab9c" category="paragraph">要将已创建的 PV 从 1Gi 调整为 2Gi ，请编辑 PVC 定义并将 `sPec.resources.requests.storage` 更新为 2Gi 。</block>
  <block id="eabf614ed44fe1c3e78cb2300949eb63" category="section-title">第 5 步：验证扩展</block>
  <block id="28abbd693f528f04d0ff068b3013fcd6" category="paragraph">您可以通过检查 PVC ， PV 和 Astra Trident 卷的大小来验证扩展是否正常运行：</block>
  <block id="75b8249751a8ea5869a0b5a8e465efc1" category="section-title">展开 NFS 卷</block>
  <block id="578f10bb7cad2abad1cbbcb9a9a732f9" category="paragraph">要调整 NFS PV 的大小，管理员首先需要将 `allowVolumeExpansion` 字段设置为 `true` 来配置存储类以允许卷扩展：</block>
  <block id="27b4a9ed8609e35526601aa8d8be1ab9" category="paragraph">如果您已创建没有此选项的存储类，则只需使用 `kubectl edit storageclass` 编辑现有存储类即可进行卷扩展。</block>
  <block id="784f78e647973a0dcfa11b7a028c7eae" category="paragraph">Astra Trident 应为此 PVC 创建一个 20 MiB NFS PV ：</block>
  <block id="3b16cea25bd4a9aaf5a9c3dcc13ea7eb" category="section-title">第 3 步：展开 PV</block>
  <block id="e5c2c0bfcfbe01e6174199aaff9616a5" category="paragraph">要将新创建的 20MiB PV 调整为 1GiB ，请编辑 PVC 并将 `sPec.resources.requests.storage` 设置为 1GB ：</block>
  <block id="4a59ce1bc63fd7e6333968fb4bbd9d45" category="section-title">第 4 步：验证扩展</block>
  <block id="c70f05fed7c73e0be4a0b24c8532a87c" category="paragraph">您可以通过检查 PVC ， PV 和 Astra Trident 卷的大小来验证调整大小是否正常工作：</block>
  <block id="cf13ba16f33b5f6772614929649be6c2" category="summary">您可以使用 `tridentctl import` 将现有存储卷作为 Kubernetes PV 导入。</block>
  <block id="5f48c343984786005c9830d96c6fca87" category="doc">导入卷</block>
  <block id="76057e180d7b3edcebaa935c7ccab687" category="paragraph">PVC 和 PV 中会添加一个标注，用于指示卷已导入以及 PVC 和 PV 是否已管理。不应修改或删除此标注。</block>
  <block id="1b539ba5a07e124e582b2e4bfc489200" category="paragraph">使用 `ontap-nas` 驱动程序创建的每个卷都是 ONTAP 集群上的一个 FlexVol 。使用 `ontap-NAS` 驱动程序导入 FlexVol 的工作原理相同。ONTAP 集群上已存在的 FlexVol 可以导入为 `ONONTAP -NAS` PVC 。同样，可以将 FlexGroup vols 导入为 `ontap-nas-flexgroup` PVC 。</block>
  <block id="00b8b321c68facfb94b31690cbd23e00" category="paragraph">对于所有 ONTAP 后端， Astra Trident 需要至少为 SVM 分配一个聚合。</block>
  <block id="07b434b23f63ca6490df33b213599320" category="section-title">管理 NFS 导出策略</block>
  <block id="9d66483f8378ffe30cde84e1b6dbf484" category="paragraph">Astra Trident 使用 NFS 导出策略来控制对其配置的卷的访问。</block>
  <block id="a297d9b7dbc393d5e8a5b3f98bcc9337" category="paragraph">使用导出策略时， Astra Trident 提供了两个选项：</block>
  <block id="0c87d42e666bbc299da2143379484281" category="list-text">Astra Trident 可以动态管理导出策略本身；在此操作模式下，存储管理员会指定一个表示可接受 IP 地址的 CIDR 块列表。Astra Trident 会自动将属于这些范围的节点 IP 添加到导出策略中。或者，如果未指定任何 CIDR ，则在节点上找到的任何全局范围的单播 IP 都将添加到导出策略中。</block>
  <block id="e6add289c2b1cd5da45e00f3098b35de" category="list-text">存储管理员可以手动创建导出策略和添加规则。除非在配置中指定了不同的导出策略名称，否则 Astra Trident 将使用默认导出策略。</block>
  <block id="4603f08ad837f4108ff2fe7665b0b1e3" category="section-title">动态管理导出策略</block>
  <block id="4975fc485ff51ca8f82c6ea96f927287" category="paragraph">以下是使用上述示例对此功能的工作原理进行的说明：</block>
  <block id="acdca8a11423c4bc209db0a1a4909294" category="list-text">`autosExportPolicy` 设置为 `true` 。这表示 Astra Trident 将为 `svm1` SVM 创建导出策略，并使用 `autosExportCIDRS` 地址块处理规则的添加和删除。例如， UUID 为 403b5326-8482-40db-96d0-d83fb3f4daec 且 `autodExportPolicy` 设置为 `true` 的后端会在 SVM 上创建一个名为 `trident -403b5326-8482-40db-96d0-d83fb3f4daec` 的导出策略。</block>
  <block id="1bdcc9b4be16b7ad2f1b54c892491a43" category="list-text">`autosExportCIDR` 包含地址块列表。此字段为可选字段，默认为 "0.0.0.0/0 ， " ：： /0" 。如果未定义，则 Astra Trident 会添加在工作节点上找到的所有全局范围的单播地址。</block>
  <block id="96d8905e0d42a0d3573c71fd4ecce0b8" category="paragraph">在此示例中，提供了 `192.168.0.0/24` 地址空间。这表示此地址范围内的 Kubernetes 节点 IP 将添加到 Astra Trident 创建的导出策略中。当 Astra Trident 注册其运行的节点时，它会检索该节点的 IP 地址，并根据 `autosExportCIDRS` 中提供的地址块对其进行检查。筛选 IP 后， Astra Trident 会为其发现的客户端 IP 创建导出策略规则，并为其标识的每个节点创建一个规则。</block>
  <block id="4646f167a1fb9819f41f28d5ab11c1fa" category="paragraph">创建后，您可以为后端更新 `autosExportPolicy` 和 `autosExportCIDR` 。您可以为自动管理的后端附加新的 CIDR ，也可以删除现有的 CIDR 。删除 CIDR 时请务必小心，以确保现有连接不会断开。您也可以选择对后端禁用 `autosExportPolicy` ，并回退到手动创建的导出策略。这需要在后端配置中设置 `exportPolicy` 参数。</block>
  <block id="18deff64a140a603bdb6070abed4eed4" category="paragraph">在 Astra Trident 创建或更新后端后，您可以使用 `tridentctl` 或相应的 `tridentbackend` CRD 检查后端：</block>
  <block id="83af513d9b9d50c1dc648bfea29797cb" category="paragraph">当节点添加到 Kubernetes 集群并向 Astra Trident 控制器注册后，现有后端的导出策略将会更新（前提是它们位于后端的 `autosExportCIDR` 中指定的地址范围内）。</block>
  <block id="fd85ad7b0ce4e83937cbc1012086b9b3" category="paragraph">删除节点后， Astra Trident 会检查所有联机后端，以删除该节点的访问规则。通过从受管后端的导出策略中删除此节点 IP ， Astra Trident 可防止恶意挂载，除非此 IP 可由集群中的新节点重复使用。</block>
  <block id="de1d1f6b64a5c5b6890c313888b290b7" category="admonition">删除具有自动管理导出策略的后端将删除动态创建的导出策略。如果重新创建后端，则会将其视为新的后端，并会创建新的导出策略。</block>
  <block id="920708f6d71767dcff22f9e43b4ec0c0" category="paragraph">如果更新了活动节点的 IP 地址，则必须在此节点上重新启动 Astra Trident Pod 。然后， Astra Trident 将更新其管理的后端的导出策略，以反映此 IP 更改。</block>
  <block id="5f3124ab7224f89a36fbb64fd2ebda15" category="summary">了解如何在您的 Astra Trident 安装中创建和使用 ONTAP SAN 驱动程序。本节提供了后端配置示例以及有关如何将后端映射到 StorageClasses 的详细信息。</block>
  <block id="19ce3b2e7823907e5153f00fe04f64f7" category="doc">配置选项和示例</block>
  <block id="a85f55a18073767a4945eac810e72cb2" category="cell">"ontap-nas" ， "ontap-nas-economy-" ， "ontap-nas-flexgroup" ， "ontap-san " ， "ontap-san-economy-"</block>
  <block id="237d7a1666794b0937adde704bb4795c" category="cell">驱动程序名称 + "_" + dataLIF</block>
  <block id="07c54fe26be1e43601e99cd9d4fbe262" category="cell">`m年` 月 日</block>
  <block id="c560b8d02093547d93a87c72d8b16eaf" category="cell">"10.0.0.1 " ， "2001 ： 1234 ： abcd ：：： fefe] "</block>
  <block id="bd81db53971fda3e688447b28c747d1a" category="cell">`dataLIF`</block>
  <block id="ab4ce1634362493e6de248d103136787" category="cell">`使用 CHAP`</block>
  <block id="7c6b65d42434282f1555f13b40e9fd25" category="cell">`chapInitiatorSecret`</block>
  <block id="c8a7a6136447a56280ecf99e3ed87d65" category="cell">CHAP 启动程序密钥。如果为 `useCHAP=true` ，则为必需项</block>
  <block id="b5cbbe3dadaab4a036fdb38af67ee936" category="cell">要应用于卷的一组任意 JSON 格式的标签</block>
  <block id="948938ec6491061ccf17c7ae8eafbd26" category="cell">`chapTargetInitiatorSecret`</block>
  <block id="48db71efc42dda989b98744160575f4f" category="cell">CHAP 目标启动程序密钥。如果为 `useCHAP=true` ，则为必需项</block>
  <block id="28687fafefb2992ff7856dcfd2c29e1f" category="cell">`chapUsername`</block>
  <block id="e3f84c141fd3f4682dfb31e0d71c7f5f" category="cell">入站用户名。如果为 `useCHAP=true` ，则为必需项</block>
  <block id="62fbbf4cfd0cc0a82f953199d14a61e3" category="cell">`chapTargetUsername`</block>
  <block id="a379a576b788ab047d5e6405ff4f3511" category="cell">目标用户名。如果为 `useCHAP=true` ，则为必需项</block>
  <block id="cbdaf784161be9806a24fe78a8046c01" category="cell">`客户端证书`</block>
  <block id="a84cbedc106b973917ae925d04533f97" category="cell">客户端证书的 Base64 编码值。用于基于证书的身份验证</block>
  <block id="8545e54eea74cf2579fbe1cb56b11862" category="cell">`clientPrivateKey`</block>
  <block id="4a54228eb2be79492f8f76bb814ddf63" category="cell">客户端专用密钥的 Base64 编码值。用于基于证书的身份验证</block>
  <block id="b071cd8105f8f59b777098388b7a3322" category="cell">`trustedCACertifate`</block>
  <block id="ffe4ce29fe1a6176d496c40332e9cb98" category="cell">受信任 CA 证书的 Base64 编码值。可选。用于基于证书的身份验证</block>
  <block id="6d77646a2fd9ab65f8e3344d7dce661a" category="cell">`用户名`</block>
  <block id="83425e975af1b2d60355aa4162300198" category="cell">用于连接到集群 /SVM 的用户名。用于基于凭据的身份验证</block>
  <block id="6aa91a7fbb8c9edcf4aa5f9411aec19c" category="cell">`密码`</block>
  <block id="63d06d6cc41e485615f99a3aad0002b3" category="cell">连接到集群 /SVM 的密码。用于基于凭据的身份验证</block>
  <block id="afc423de2be5ca5ab3a6ae9548bbfcf3" category="cell">`sVM`</block>
  <block id="972abf48cbbadbcd573754140d35e19a" category="cell">要使用的 Storage Virtual Machine</block>
  <block id="ef65dd3301d78701f7cfcf8a01834f2f" category="cell">如果指定了 SVM `managementLIF` ，则派生</block>
  <block id="3b890f58db76bb3003ada171cd18c4db" category="cell">`igroupName`</block>
  <block id="c08068da3c5d19547544c4bd424a6b76" category="cell">`s存储前缀`</block>
  <block id="e3f688f3aa653574b3253640aa98f47c" category="cell">在 SVM 中配置新卷时使用的前缀。设置后无法更新</block>
  <block id="a996d2f8e072c583d6cc26aa1e4aba87" category="cell">Trident</block>
  <block id="12d2394af47293b12d6b5f411f99a6d1" category="cell">`limitAggregateUsage`</block>
  <block id="9d96dfa28e7454a1119de523123a1e05" category="cell">" （默认情况下不强制实施）</block>
  <block id="c9a303edbc714d051896c3a678e59a8a" category="cell">`lunsPerFlexvol`</block>
  <block id="79892588cbecd0b88729ea1a55b2a3a4" category="cell">每个 FlexVol 的最大 LUN 数，必须在 50 ， 200 范围内</block>
  <block id="2d782f413944b272c911c548418a18a3" category="cell">100</block>
  <block id="f703d18584e163e18762e4dc13ad96a0" category="cell">`useREST`</block>
  <block id="193a49bcfb561fea878daa5efe72cad9" category="section-title">用于配置卷的后端配置选项</block>
  <block id="a0ee23c5b4cbd6a28a4143933891f927" category="cell">`spaceAllocation`</block>
  <block id="26161d08a960162cd8633d0e23058aed" category="cell">LUN 的空间分配</block>
  <block id="3be488c6a2bc52ceb7e8685ca24927d7" category="cell">true</block>
  <block id="a6bddf19eed00dbe2199864dee8454ce" category="cell">`s页面预留`</block>
  <block id="3bce5b103341500856287f5347e19f28" category="cell">空间预留模式； " 无 " （精简）或 " 卷 " （厚）</block>
  <block id="e84c56670c389b09fcad5da7309a165b" category="cell">无</block>
  <block id="0ec3875cf79264e4689a646be2f704b6" category="cell">`sSnapshot 策略`</block>
  <block id="77f69e470b8766d2dc5df4b7f469ed72" category="cell">要使用的 Snapshot 策略</block>
  <block id="84d2c2c768bd1900489bad5fb46b4aac" category="cell">`qosPolicy`</block>
  <block id="54b94bba5d336f4e3d5fd7e88544fad1" category="cell">要为创建的卷分配的 QoS 策略组。选择每个存储池 / 后端的 qosPolicy 或 adaptiveQosPolicy 之一</block>
  <block id="952e3a12d35e717bf86a6000b0c08976" category="cell">`adaptiveQosPolicy`</block>
  <block id="036c0eabd455d8a92d350429f2f5747e" category="cell">要为创建的卷分配的自适应 QoS 策略组。选择每个存储池 / 后端的 qosPolicy 或 adaptiveQosPolicy 之一</block>
  <block id="11f9fcd55c1d81cf352f86fe4cdfd444" category="cell">为快照预留的卷百分比为 "0"</block>
  <block id="af6626456fa359992271ea88de34094f" category="cell">如果 `snapshotPolicy` 为 " 无 " ，则为 " 无 " ，否则为 " "</block>
  <block id="4be01095ce6e500084fc427e5dec61ac" category="cell">`splitOnClone`</block>
  <block id="6f5c0c94b1a17baffd2c33facaa10db6" category="cell">创建克隆时，从其父级拆分该克隆</block>
  <block id="19b4c847405d74614976bd1228f59c9f" category="cell">false</block>
  <block id="b091cbafedf94db98f17823d044434bd" category="cell">`加密`</block>
  <block id="a463baaf6666da7178b6fc6a3c8a3fee" category="cell">`securityStyle`</block>
  <block id="41da49bdd3fd88b2ddc6be7d6df1b335" category="cell">新卷的安全模式</block>
  <block id="31aa018945eb62580d68d360cba8ba54" category="cell">`分层策略`</block>
  <block id="592a5879ac095ef6ca504cc43a9d7939" category="cell">使用 " 无 " 的分层策略</block>
  <block id="ee6508d5290be6edafccc6e0f471f120" category="cell">适用于 ONTAP 9.5 SVM-DR 之前的配置的 " 仅快照 "</block>
  <block id="99c2306b30b8939278f0f817230f3573" category="admonition">在 Astra Trident 中使用 QoS 策略组需要 ONTAP 9.8 或更高版本。建议使用非共享 QoS 策略组，并确保策略组分别应用于每个成分卷。共享 QoS 策略组将对所有工作负载的总吞吐量实施上限。</block>
  <block id="fab51d2bc90465982b0994bc86e69db9" category="admonition">对于使用 `ontap-san` 驱动程序创建的所有卷， Astra Trident 会向 FlexVol 额外添加 10% 的容量，以容纳 LUN 元数据。LUN 将使用用户在 PVC 中请求的确切大小进行配置。Astra Trident 将 FlexVol 增加 10% （在 ONTAP 中显示为可用大小）。用户现在将获得所请求的可用容量。此更改还可防止 LUN 变为只读状态，除非已充分利用可用空间。这不适用于 ontap-san-economy.</block>
  <block id="824d88f50ab9e39778b0ef5bc2516b2f" category="paragraph">对于定义 `snapshotReserve` 的后端， Astra Trident 将按如下方式计算卷的大小：</block>
  <block id="4e762198289d9294de9c1cbb3f0b26b6" category="paragraph">1.1 是 Astra Trident 向 FlexVol 额外添加 10% 以容纳 LUN 元数据。对于 `snapshotReserve` = 5% ， PVC 请求 = 5GiB ，卷总大小为 5.79GiB ，可用大小为 5.5GiB 。`volume show` 命令应显示与以下示例类似的结果：</block>
  <block id="2f1534ee8d0c6ec998511ed37cfe0da9" category="image-alt">显示了 volume show 命令的输出。</block>
  <block id="e6e049b4753c744e95db32b0eeed8d5c" category="paragraph">目前，调整大小是对现有卷使用新计算的唯一方法。</block>
  <block id="2aae2b6accd04335b3eeceb2193b34d6" category="section-title">最低配置示例</block>
  <block id="bca36ce39f61ce2d375cbdb66eab5162" category="paragraph">以下示例显示了将大多数参数保留为默认值的基本配置。这是定义后端的最简单方法。</block>
  <block id="f00b69018be0961b32ee24ec54fb56d1" category="section-title">将后端映射到 StorageClasses</block>
  <block id="ef1161058705470bb877fbce688eea9e" category="summary">了解如何使用 ONTAP SAN 驱动程序配置 ONTAP 后端。</block>
  <block id="31e8c05beab321d1465fc4c3f77e991a" category="doc">使用 ONTAP SAN 驱动程序配置后端</block>
  <block id="ce8828fc10a926c196951c9bdd0d534d" category="section-title">用户权限</block>
  <block id="96c17dbe45e7351fb2a4f71956c25e0c" category="paragraph">Astra Trident 应以 ONTAP 或 SVM 管理员身份运行，通常使用 `admin` cluster 用户或 `vsadmin` SVM 用户，或者使用具有相同角色的其他名称的用户。对于适用于 NetApp ONTAP 的 Amazon FSX 部署， Astra Trident 应使用集群 `fsxadmin` user 或 `vsadmin` SVM 用户或具有相同角色的其他名称的用户作为 ONTAP 或 SVM 管理员运行。`fsxadmin` 用户是集群管理员用户的有限替代用户。</block>
  <block id="4937b52eb2cb058f225b69b2caafaf29" category="admonition">如果使用 `limitAggregateUsage` 参数，则需要集群管理员权限。将适用于 NetApp ONTAP 的 Amazon FSx 与 Astra Trident 结合使用时， `limitAggregateUsage` 参数不适用于 `vsadmin` 和 `fsxadmin` 用户帐户。如果指定此参数，配置操作将失败。</block>
  <block id="821b0ad941ad2559ef18eb8de56a470e" category="summary">Kubernetes 集群中的所有工作节点都需要能够挂载为 Pod 配置的卷。如果您在其中一个后端使用的是 ontap-nas ， ontap-nas-economy. ontap-nas-flexgroup 驱动程序，则您的工作节点需要 NFS 工具。否则，它们需要使用 iSCSI 工具。</block>
  <block id="89d83ec6e8ec0c087fbc4aedc555b362" category="doc">准备工作节点</block>
  <block id="b7a66d04a41292979004906785008ca9" category="section-title">NFS volumes</block>
  <block id="696c660ff8d9323e55146a6dbd4e4088" category="cell">操作系统</block>
  <block id="c441ee50c88f6e5e3a7c69fc69dad8b8" category="cell">命令</block>
  <block id="e0b19bed1baf46134f4079471e193b01" category="paragraph">`sudo yum install -y nfs-utils`</block>
  <block id="1054b270f1635a3dd940e995cbc7ed78" category="paragraph">`sudo apt-get install -y nfs-common`</block>
  <block id="29ba980a9e9adedc9414ea868c74ebd5" category="section-title">iSCSI 卷</block>
  <block id="12fe03bf2457cc4e4e90af10a2f7092f" category="list-text">Kubernetes 集群中的每个节点都必须具有唯一的 IQN 。* 这是必要的前提条件 * 。</block>
  <block id="8cd5b262d8d9950185128d052d55f7c8" category="list-text">安装以下系统软件包：</block>
  <block id="6bbf3284462dc8b9b90cb1adcd1c0ff4" category="paragraph">`sudo yum install -y lsscsi iscsi-initiator-utils sg3_utils device-mapper-multipath`</block>
  <block id="1a5157a00ea5806f553766d5b3b114fd" category="list-text">检查 iscsi-initiator-utils 版本是否为 6.2.0.877-2.el7 或更高版本：</block>
  <block id="55c13faac514053f94cef55eb316c9a4" category="paragraph">`rpm -q iscsi-initiator-utils`</block>
  <block id="19955b3c2d2c1cfc1c82c2fe0347a065" category="list-text">将扫描设置为手动：</block>
  <block id="d2db641a196e6107eecf8c32f7cd7a4e" category="paragraph">`sUdo sed -i 's/^ \ （ node.session.scan\).*/\1 = manual/' /etc/iscsi/iscsid.conf`</block>
  <block id="d0b02d407fd5c75d0e7eac549a852191" category="list-text">启用多路径：</block>
  <block id="8bec0eea71974a9138ccfa96983ddcfc" category="list-text">确保 `iscsid` 和 `multipathd` 正在运行：</block>
  <block id="90a9d2e9b1b4ae58a957ff989f0732ba" category="paragraph">`sudo systemctl enable -now iscsid multipathd`</block>
  <block id="8018f5d6ddc4e67678d1659757828deb" category="list-text">启用并启动 `iSCSI` ：</block>
  <block id="0f905161e16c2cfa712f1fb7640afee4" category="paragraph">`sudo systemctl enable —现在为 iSCSI`</block>
  <block id="28ea88befb3a7f6a8e98e7ea7a4fd35f" category="paragraph">`sUdo apt-get install -y open-iscsi lsscsi sg3-utils multipath-tools scsitool`</block>
  <block id="a53508e75911225e5de8b5febc82cf12" category="list-text">检查 open-iscsi 版本是否为 2.0.877-5ubuntu2.10 或更高版本（对于双子系统）或 2.0.877-7.1ubuntu6.1 或更高版本（对于 Focal ）：</block>
  <block id="f6802be29c6bca93d8f44768b0347ac9" category="paragraph">`dpkg -l open-iscsi`</block>
  <block id="b163c84ad8a4e55a17b51aad8074093e" category="list-text">确保已启用并运行 `open-iscsi` 和 `multipath-tools` ：</block>
  <block id="8741473f7a80f4dd83071161b2c95301" category="paragraph">`sudo systemctl status multipath-tools` `sudo systemctl enable -now open-iscsi.service` `sudo systemctl status open-iscsi`</block>
  <block id="1b757fe9c8a149de349a32b8d21feb54" category="admonition">对于 Ubuntu 18.04 ，您必须先使用 `iscsiadm` 发现目标端口，然后再启动 `open-iscsi` ， iSCSI 守护进程才能启动。您也可以将 `iscsi` 服务修改为自动启动 `iscsid` 。</block>
  <block id="4cc2b9916e7383e5fa29dc6188159e32" category="summary">后端定义了 Astra Trident 与存储系统之间的关系。它告诉 Astra Trident 如何与该存储系统进行通信，以及 Astra Trident 如何从该存储系统配置卷。安装 Astra Trident 后，下一步是创建后端。使用 `TridentBackendConfig` Custom Resource Definition （ CRD ），您可以直接通过 Kubernetes 界面创建和管理 Trident 后端。为此，您可以对 Kubernetes 分发版使用 `kubectl` 或等效的命令行界面工具。</block>
  <block id="d2031a5a319b9363cf98da6b1509598a" category="paragraph">`TridentBackendConfig` （`tbc` ， `tbconfig` ， `tbackendconfig` ）是一个前端命名的 CRD ，可用于使用 `kubectl` 管理 Astra Trident 后端。现在， Kubernetes 和存储管理员可以直接通过 Kubernetes 命令行界面创建和管理后端，而无需专用命令行实用程序（`tridentctl` ）。</block>
  <block id="b44c2fd5cefc815abed7e31c0fa8c8ac" category="paragraph">创建 `TridentBackendConfig` 对象时，将发生以下情况：</block>
  <block id="858fafdff7fa27f202ae0eb981c6dff0" category="list-text">Astra Trident 会根据您提供的配置自动创建后端。此值在内部表示为 `TridentBackend` （`tbe` ， `tridentbackend` ） CR 。</block>
  <block id="40640dd98ca175d098c1c765b1e148d9" category="list-text">`TridentBackendConfig` 唯一绑定到由 Astra Trident 创建的 `TridentBackend` 。</block>
  <block id="1efc3a14ca6dc7c90db79e02f3abe7d5" category="paragraph">每个 `TridentBackendConfig` 都与 `TridentBackend` 保持一对一映射。前者是为用户提供的用于设计和配置后端的接口；后者是 Trident 表示实际后端对象的方式。</block>
  <block id="c9038f47fe0df535b6bf5619c9ff629e" category="admonition">`TridentBackend` CRS 由 Astra Trident 自动创建。您 * 不应 * 修改它们。如果要更新后端，请通过修改 `TridentBackendConfig` 对象来执行此操作。</block>
  <block id="9c3385530cf6e460576e5f6e7cc1b912" category="paragraph">有关 `TridentBackendConfig` CR 的格式，请参见以下示例：</block>
  <block id="c84ef67352bb6783ff2881f9f2821c2a" category="inline-link">Trident 安装程序</block>
  <block id="f13a06ff6eab87969a9f96765f31ed9c" category="paragraph">您还可以查看中的示例<block ref="6511e50af21389f9e77db56e03f6dd72" category="inline-link-rx"></block> 所需存储平台 / 服务的示例配置目录。</block>
  <block id="06df669f3ef6f929e9b58c9f47b65310" category="inline-link-macro">存储驱动程序的后端配置信息</block>
  <block id="182839d8f6b2bdde60e1d972422cf3a2" category="paragraph">`sPec` 采用后端特定的配置参数。在此示例中，后端使用 `ontap-san` 存储驱动程序并使用此处所示的配置参数。有关所需存储驱动程序的配置选项列表，请参见 <block ref="5f2d139eefa7c36061f4d97161be02ea" category="inline-link-macro-rx"></block>。</block>
  <block id="92051c832f01d9070a7ed71d1ce523c5" category="paragraph">`sPec` 部分还包括 `credentials` 和 `deletionPolicy` 字段，这些字段在 `TridentBackendConfig` CR 中新增：</block>
  <block id="5ab961de690e071f0dc1c0dabac7fd89" category="list-text">`credentials` ：此参数为必填字段，包含用于向存储系统 / 服务进行身份验证的凭据。此密码设置为用户创建的 Kubernetes Secret 。凭据不能以纯文本形式传递，因此会导致错误。</block>
  <block id="9f11e03722a7b912083c63fc68f4dd7b" category="list-text">`deeltionPolicy` ：此字段定义删除 `TridentBackendConfig` 时应发生的情况。它可以采用以下两种可能值之一：</block>
  <block id="d09d50d3f84f9c585492818f491a2497" category="list-text">`delete` ：这将同时删除 `TridentBackendConfig` CR 和关联后端。这是默认值。</block>
  <block id="f0c89ce27bf4c43949ad8f26a4f586bb" category="list-text">`retain` ：删除 `TrdentBackendConfig` CR 后，后端定义仍存在，可使用 `tridentctl` 进行管理。将删除策略设置为 `retain` 允许用户降级到早期版本（ 21.04 之前）并保留创建的后端。创建 `TridentBackendConfig` 后，可以更新此字段的值。</block>
  <block id="7f2208582df334d090d35357eb5d6901" category="admonition">后端名称使用 `sPec.backendName` 设置。如果未指定，则后端的名称将设置为 `TridentBackendConfig` 对象的名称（ metadata.name ）。建议使用 `sPec.backendName` 显式设置后端名称。</block>
  <block id="317e77f416ffd109037a657fffa1e7f7" category="admonition">使用 `tridentctl` 创建的后端没有关联的 `TridentBackendConfig` 对象。您可以通过创建 `TridentBackendConfig` CR ，选择使用 `kubectl` 来管理此类后端。必须注意指定相同的配置参数（例如 `sPec.backendName` ， `sPec.storagePrefix` ， `sPec.storageDriverName` 等）。Astra Trident 会自动将新创建的 `TridentBackendConfig` 与已有的后端绑定。</block>
  <block id="625cc9b8ccc34496dc2b3fcffb7e384a" category="section-title">步骤概述</block>
  <block id="a867c4bbc8d632a517f22b7377b9b8ed" category="paragraph">要使用 `kubectl` 创建新后端，应执行以下操作：</block>
  <block id="4db4699aa0126dfb06878d7e07c0abdf" category="inline-link">Kubernetes 机密</block>
  <block id="7e5e1bb39eefe4eec7a88b845126d41d" category="list-text">创建<block ref="fcce7b7bd05b6b012eabe3df8de04808" category="inline-link-rx"></block>。此密钥包含 Astra Trident 与存储集群 / 服务通信所需的凭据。</block>
  <block id="c39d193a9cc4084cc6c7964e1bb5efd8" category="list-text">创建 `TridentBackendConfig` 对象。其中包含有关存储集群 / 服务的详细信息，并引用了上一步中创建的密钥。</block>
  <block id="286b0035cf59742ffe54696b798f2368" category="paragraph">创建后端后，您可以使用 `kubectl get tbc &lt;tbc-name&gt; -n &lt;trident 命名空间 &gt;` 来观察其状态，并收集其他详细信息。</block>
  <block id="494cb787cd1c1f78123323c1006f2081" category="section-title">第 1 步：创建 Kubernetes 机密</block>
  <block id="04402bf69acac56c72a55c0e4ac2165c" category="paragraph">下表汇总了每个存储平台的机密中必须包含的字段：</block>
  <block id="94cec86c6eef229009007e6d00d54ef1" category="cell">存储平台机密字段问题描述</block>
  <block id="1e6947ac7fb3a9529a9726eb692c8cc5" category="cell">机密</block>
  <block id="c11257eff6563de2c05e353770c514ca" category="cell">字段问题描述</block>
  <block id="93c5bebdea9c94a0740fe6fd9bb250f0" category="paragraph">clientId</block>
  <block id="012e85295e2f1f744cfb8757f8dd4830" category="paragraph">应用程序注册中的客户端 ID</block>
  <block id="ee64ef6c307cfcfe5c0f085471cd61fa" category="paragraph">private_key_id</block>
  <block id="1e31c22f827d25c5973eee697baace79" category="paragraph">专用密钥的 ID 。具有 CVS 管理员角色的 GCP 服务帐户的 API 密钥的一部分</block>
  <block id="156a17333e77a3c504018cae5ada8c3b" category="paragraph">private_key</block>
  <block id="8e0708b67ba6ce0f70a948152e7e7895" category="paragraph">专用密钥。具有 CVS 管理员角色的 GCP 服务帐户的 API 密钥的一部分</block>
  <block id="25de05ab7f10e99b499db62e0b89ad33" category="cell">Element （ NetApp HCI/SolidFire ）</block>
  <block id="2a6ba72e93aa7fa676d07973ed2716bb" category="paragraph">端点</block>
  <block id="14c4b06b824ec593239362517f538b29" category="paragraph">username</block>
  <block id="6e1b40351708d93ce8c387f6f8ca7533" category="paragraph">用于连接到集群 /SVM 的用户名。用于基于凭据的身份验证</block>
  <block id="5f4dcc3b5aa765d61d8327deb882cf99" category="paragraph">password</block>
  <block id="4d3fd9a7ab4c84b857fc26b2633237d0" category="paragraph">连接到集群 /SVM 的密码。用于基于凭据的身份验证</block>
  <block id="19dce7ac7f5290fc8fa218ad0c858df5" category="paragraph">客户端权限密钥</block>
  <block id="8c5e8d4f9acf9295e1a96feef0c0b516" category="paragraph">客户端专用密钥的 Base64 编码值。用于基于证书的身份验证</block>
  <block id="039e9d80fa53ba861c06b590ba3f9d34" category="paragraph">用户名</block>
  <block id="a7128cd45d4a277fe5c6ed6f6c4238f7" category="paragraph">入站用户名。如果 useCHAP=true ，则为必需项。适用于 `ontap-san` 和 `ontap-san-economy.`</block>
  <block id="f9d0dc78b203f2c1106dc0c7d58a5397" category="paragraph">chapInitiatorSecret</block>
  <block id="2f573af61fb37b4f1c5e2def2341b7c4" category="paragraph">CHAP 启动程序密钥。如果 useCHAP=true ，则为必需项。适用于 `ontap-san` 和 `ontap-san-economy.`</block>
  <block id="2ebe107bb3bc9551fbb0e5033046931c" category="paragraph">chapTargetUsername</block>
  <block id="e945f079b3e50bd5722f056b72282608" category="paragraph">目标用户名。如果 useCHAP=true ，则为必需项。适用于 `ontap-san` 和 `ontap-san-economy.`</block>
  <block id="4ab84a55744951d967033db9b64f6b27" category="paragraph">chapTargetInitiatorSecret</block>
  <block id="61b50fba255c10a4a2b5f7cf8276849a" category="paragraph">CHAP 目标启动程序密钥。如果 useCHAP=true ，则为必需项。适用于 `ontap-san` 和 `ontap-san-economy.`</block>
  <block id="73d583a1445e1497ec3adaa011e2724c" category="paragraph">在下一步中创建的 `TrdentBackendConfig` 对象的 `sPec.credentials` 字段将引用此步骤中创建的机密。</block>
  <block id="3394622f88ed2c82c85e92e908879095" category="paragraph">现在，您可以创建 `TridentBackendConfig` CR 了。在此示例中，使用 `TriventBackendConfig` 对象创建使用` ontap-san `驱动程序的后端，如下所示：</block>
  <block id="967688089cfc07a6c8e893bce5186445" category="paragraph">现在，您已创建 `TridentBackendConfig` CR ，可以验证状态。请参见以下示例：</block>
  <block id="edc9d2e179d9bd8effd5277699967aff" category="paragraph">已成功创建后端并将其绑定到 `TridentBackendConfig` CR 。</block>
  <block id="ecb5320e6f020f2c2dcad7a6268111ed" category="paragraph">阶段可以采用以下值之一：</block>
  <block id="f2edf590deb30828e48e7290aa78e788" category="list-text">`Unbound` ：使用 ` ""` 表示。`TridentBackendConfig` 对象未绑定到后端。默认情况下，所有新创建的 `TridentBackendConfig` CRS 均处于此阶段。此阶段发生更改后，它将无法再次还原为 "Unbound （已取消绑定） " 。</block>
  <block id="0550ab6955adf5805cf2d00b7c592718" category="list-text">如果后端不存在永久性卷请求（ PVC ），则删除 `TridentBackendConfig` 将导致 Astra Trident 删除后端以及 `TridentBackendConfig` CR 。</block>
  <block id="ffd02eb489e62222a00391567d0bad81" category="list-text">如果后端存在一个或多个 PVC ，则会进入删除状态。`TridentBackendConfig` CR 随后也会进入删除阶段。只有在删除所有 PVC 后，才会删除后端和 `TridentBackendConfig` 。</block>
  <block id="39d978e14d4d8c9f19589af0d4e72661" category="list-text">`Lost` ：与 `TridentBackendConfig` CR 关联的后端被意外或故意删除， `TridentBackendConfig` CR 仍引用已删除的后端。无论 `detionPolicy` 值如何，仍可删除 `TridentBackendConfig` CR 。</block>
  <block id="fdf3d4560a801cb64c255cc2790fe9cc" category="inline-link-macro">后端更新和后端删除</block>
  <block id="57867491a75119ccf33f6ed8a434ff8e" category="paragraph">在此阶段，已成功创建后端！此外，还可以处理多个操作，例如 <block ref="9f5a7b55f1a44b55d5336cefd3bf688e" category="inline-link-macro-rx"></block>。</block>
  <block id="4dca0b80562cc590644c1acfada17219" category="section-title">（可选）第 4 步：获取更多详细信息</block>
  <block id="22f66c61dd35abb0ae1840a7e38ae1b9" category="paragraph">您可以运行以下命令来获取有关后端的详细信息：</block>
  <block id="aab3a73056ee2962dff0130da0538454" category="paragraph">此外，您还可以获取 YAML/JSON 转储 `TridentBackendConfig` 。</block>
  <block id="9fae9b8b2e8f0d5b91654165a5dacc1f" category="paragraph">`backendInfo` 包含为响应 `TridentBackendConfig` CR 而创建的后端的 `backendName` 和 `backendUUID` 。`lastOperationStatus` 字段表示 `TridentBackendConfig` CR 的上次操作状态，该操作可以是用户触发的（例如，用户在 `sPec` 中更改了某个内容），也可以是由 Astra Trident 触发的（例如，在 Astra Trident 重新启动期间）。可以是成功，也可以是失败。`phase` 表示 `TridentBackendConfig` CR 与后端之间关系的状态。在上面的示例中， `phase` 的值为 bound ，这意味着 `TridentBackendConfig` CR 与后端关联。</block>
  <block id="7b7587593fc7d381339d450faa35dfa9" category="paragraph">您可以运行 `kubectl -n trident describe tbc &lt;tbc-cr-name&gt;` 命令来获取事件日志的详细信息。</block>
  <block id="6dc07da7e54d697726bb349fb693fa8b" category="inline-link-macro">请参见此处</block>
  <block id="c732962a4a01ea5f406ec66e50e98903" category="admonition">您不能使用 `tridentctl` 更新或删除包含关联的 `TridentBackendConfig` 对象的后端。要了解在 `tridentctl` 和 `TridentBackendConfig` 之间切换所涉及的步骤， <block ref="8d6bc70a41f48e3f72c3f5ea8752090b" category="inline-link-macro-rx"></block>。</block>
  <block id="337de5d45c69b1e4dcf87a8e7ec9ff76" category="doc">将 Astra Trident 与适用于 NetApp ONTAP 的 Amazon FSX 结合使用</block>
  <block id="7eb620c879218a348ba0e9afaedf6b01" category="paragraph">文件系统是 Amazon FSX 中的主要资源，类似于内部部署的 ONTAP 集群。在每个 SVM 中，您可以创建一个或多个卷，这些卷是将文件和文件夹存储在文件系统中的数据容器。借助适用于 NetApp ONTAP 的 Amazon FSX ， Data ONTAP 将作为云中的托管文件系统提供。新的文件系统类型称为 * NetApp ONTAP * 。</block>
  <block id="ff27e75635c1ff1e88fbc656b16e56ce" category="section-title">了解 Astra Trident</block>
  <block id="483a5da192f46e3cfe8391d3ef234fc4" category="inline-link-macro">常见问题解答</block>
  <block id="486632f7d2196e772b742db4a4a0ad7c" category="inline-link-macro">部署 Astra Trident</block>
  <block id="55449fd175613962d882ab450cfc5f3c" category="inline-link">FabricPool</block>
  <block id="d07e2d99267e4fc3c508f6701be977b4" category="paragraph">适用于 NetApp ONTAP 的 Amazon FSX 使用<block ref="d1584952da6bdedb0a24d5dbd43ce0bf" category="inline-link-rx"></block> 以管理存储层。通过它，您可以根据数据是否经常访问来将数据存储在层中。</block>
  <block id="79a4618bb191cb293c330f8189531a13" category="list-text">`ontap-san` ：配置的每个 PV 都是其自己的 Amazon FSX for NetApp ONTAP 卷中的一个 LUN 。</block>
  <block id="b8f98ceeb9b158e8af3527fce91e9e57" category="list-text">`ontap-san-economi` ：为 NetApp ONTAP 卷配置的每个 PV 都是一个 LUN ，每个 Amazon FSX 具有可配置的 LUN 数量。</block>
  <block id="a5bc2c9e7628ac6c73838f9fea0e6ed6" category="list-text">`ONONTAP NAS` ：配置的每个 PV 都是适用于 NetApp ONTAP 的完整 Amazon FSX 卷。</block>
  <block id="94a834f420b7c21f3a1053e6dc705a31" category="list-text">`ontap-nas-economy.` ：配置的每个 PV 都是一个 qtree ，对于 NetApp ONTAP 卷，每个 Amazon FSx 的 qtree 数量是可配置的。</block>
  <block id="e42b07a9f050ef51ea1211004a50f223" category="list-text">`ontap-nas-flexgroup` ：配置的每个 PV 都是适用于 NetApp ONTAP FlexGroup 卷的完整 Amazon FSX 。</block>
  <block id="ed2536bee60113131cf25b2de3ec8734" category="list-text">基于证书： Astra Trident 将使用 SVM 上安装的证书与 FSX 文件系统上的 SVM 进行通信。</block>
  <block id="80d13d3dbe137e8fb646193f275eceeb" category="list-text">已安装 `kubectl` 的现有 Amazon EKS 集群或自管理 Kubernetes 集群。</block>
  <block id="fe914214000491758957f04647f8da36" category="inline-link">Amazon Machine 映像</block>
  <block id="3e25473814d436a2ebac91120e147b0b" category="admonition">您可以从可以访问文件系统的任何位置使用 SSH 登录到文件系统（例如，安装证书）。使用 `fsxadmin` 用户，创建文件系统时配置的密码以及 `AWS FSx describe 文件系统` 中的管理 DNS 名称。</block>
  <block id="860958fe641e0edbd80fe522c36d0560" category="list-text">使用您的证书和管理 LIF 的 DNS 名称创建后端文件，如以下示例所示：</block>
  <block id="1584837635038d443115ce4eeb3b33e4" category="paragraph">有关创建后端的信息，请参见以下链接：</block>
  <block id="6f95a39ae3c518928ed5e4681a0fd49b" category="inline-link-macro">使用 ONTAP NAS 驱动程序配置后端</block>
  <block id="cc788b7e72b2a734dd0985bd1e0e9fe3" category="inline-link">Amazon FSX for NetApp ONTAP 文档</block>
  <block id="fd570b75466e2daca21a032e6fd5981c" category="list-text"><block ref="fd570b75466e2daca21a032e6fd5981c" category="inline-link-rx"></block></block>
  <block id="0ef79cb4bb284d3ca9c3e95489919301" category="inline-link">有关适用于 NetApp ONTAP 的 Amazon FSX 的博客文章</block>
  <block id="3b94214fe5975bca8da92b72f8926be2" category="list-text"><block ref="3b94214fe5975bca8da92b72f8926be2" category="inline-link-rx"></block></block>
  <block id="8682abd0ce083533bad141869c96ab2a" category="summary">Astra Trident 提供了多种用于管理卷的功能。了解 Astra Trident 为卷提供的功能。</block>
  <block id="b42cbc6e68075c106b9faa27e4931091" category="doc">执行卷操作</block>
  <block id="eb487790322c4b8e9b4953d60be1acee" category="paragraph">了解 Astra Trident 为管理卷提供的功能。</block>
  <block id="3d4635d3cf4f27b0e87f3fe86a84744d" category="inline-link-macro">使用 CSI 拓扑</block>
  <block id="9e325272e7aed7c7bd6c28ff6fa4a90f" category="list-text"><block ref="9e325272e7aed7c7bd6c28ff6fa4a90f" category="inline-link-macro-rx"></block></block>
  <block id="e5879288a130fbd8d0b8682cfc375c4f" category="inline-link-macro">使用快照</block>
  <block id="c499fa59a1c9a0f6da195782a581f2e3" category="list-text"><block ref="c499fa59a1c9a0f6da195782a581f2e3" category="inline-link-macro-rx"></block></block>
  <block id="56661e701892ff873e44b62ffeec85e5" category="list-text"><block ref="56661e701892ff873e44b62ffeec85e5" category="inline-link-macro-rx"></block></block>
  <block id="c0417f5bbd54c5dc1c3704d6b566fcf3" category="list-text"><block ref="c0417f5bbd54c5dc1c3704d6b566fcf3" category="inline-link-macro-rx"></block></block>
  <block id="8b7b728c6a1e7accd6148646ba730e77" category="summary">了解如何在 Astra Trident 中管理后端。</block>
  <block id="4342473e01edd2e1440b8b76076f4c9e" category="doc">在后端管理选项之间移动</block>
  <block id="a7b407f571446f9f4a30f63e8160784a" category="list-text">使用 `tridentctl` 创建的后端是否可以使用 `TridentBackendConfig` 进行管理？</block>
  <block id="3e1fc11d05c13404995af2b9fda64675" category="list-text">使用 `TridentBackendConfig` 创建的后端是否可以使用 `tridentctl` 进行管理？</block>
  <block id="d6da18e16f248df47ee8e5139ef0156a" category="paragraph">本节介绍通过创建 `TridentBackendConfig` 对象直接通过 Kubernetes 界面管理使用 `tridentctl` 创建的后端所需的步骤。</block>
  <block id="bee2ae6068ad50344ddb325737434004" category="paragraph">这适用于以下情形：</block>
  <block id="8eed1f3ae09f008e2dbfb4280a0c137c" category="list-text">使用 `tridentctl` 创建的新后端，而存在其他 `TridentBackendConfig` 对象。</block>
  <block id="0507a4f0ac746171a414097e7f033dca" category="paragraph">在这两种情况下，后端仍会存在，其中 Astra Trident 会计划卷并对其进行操作。管理员可以选择以下两种方式之一：</block>
  <block id="95328f21e7a6deb7bb94acb3866753a6" category="list-text">继续使用 `tridentctl` 管理使用它创建的后端。</block>
  <block id="82c1dd66573aab904c86b63e2d5486ad" category="list-text">使用 `tridentctl` 创建的后端绑定到新的 `TridentBackendConfig` 对象。这样做意味着将使用 `kubectl` 而不是 `tridentctl` 来管理后端。</block>
  <block id="d12d5022b29f44c340ee55411970fe10" category="paragraph">要使用 `kubectl` 管理已有后端，您需要创建一个绑定到现有后端的 `TridentBackendConfig` 。下面简要介绍了它的工作原理：</block>
  <block id="0637b40285532fa1b6c6a4548e63d2f4" category="list-text">创建 Kubernetes 机密。此密钥包含 Astra Trident 与存储集群 / 服务通信所需的凭据。</block>
  <block id="b863de09ccfaf2861ead350dd78a9933" category="list-text">创建 `TridentBackendConfig` 对象。其中包含有关存储集群 / 服务的详细信息，并引用了上一步中创建的密钥。必须注意指定相同的配置参数（例如 `sPec.backendName` ， `sPec.storagePrefix` ， `sPec.storageDriverName` 等）。`sPec.backendName` 必须设置为现有后端的名称。</block>
  <block id="44411eb1f3a70196b442f0ed4bb62820" category="section-title">第 0 步：确定后端</block>
  <block id="2181a22b3daf7866094f9f0d79da87d0" category="paragraph">创建一个包含后端凭据的机密，如以下示例所示：</block>
  <block id="276e25c1cf06c603ba2d133ae2e39dde" category="paragraph">下一步是创建一个 `TridentBackendConfig` CR ，该 CR 将自动绑定到已有的 `ontap-nas-backend` （如本示例所示）。确保满足以下要求：</block>
  <block id="0cbfd18f16db9afdef577eeddd6a8bee" category="list-text">在 `sPec.backendName` 中定义了相同的后端名称。</block>
  <block id="f261e4f2fe82344f35f04f9b3813e425" category="list-text">配置参数与原始后端相同。</block>
  <block id="8f50f98a5b56105263e2f7ab18dc0686" category="list-text">凭据通过 Kubernetes Secret 提供，而不是以纯文本形式提供。</block>
  <block id="05c8cd2e49ae2ecaee101c9bc5619d49" category="paragraph">在这种情况下， `TridentBackendConfig` 将如下所示：</block>
  <block id="63d6f3ce15066b6232a788bb692bf721" category="paragraph">创建 `TridentBackendConfig` 后，其阶段必须为 `bound` 。它还应反映与现有后端相同的后端名称和 UUID 。</block>
  <block id="d1a75f7c76623350486029378ab164c3" category="paragraph">现在，可以使用 `tbc-ontap-nas-backend` `TridentBackendConfig` 对象对后端进行全面管理。</block>
  <block id="fcea92f3e948217919ca8b4051c2c61e" category="paragraph">`tridentctl` 可用于列出使用 `TridentBackendConfig` 创建的后端。此外，管理员还可以选择通过 `tridentctl` 来完全管理此类后端，方法是删除 `TridentBackendConfig` 并确保将 `spec.deletionPolicy` 设置为 `retain` 。</block>
  <block id="ab0c73d8e0377b2df5b783d3a76f2249" category="paragraph">例如，假设使用 `TridentBackendConfig` 创建了以下后端：</block>
  <block id="ea64db0654e81907c68ffc52d023c3c7" category="paragraph">让我们来看看 `deletionPolicy` 的价值。需要将此值设置为 `retain` 。这样可以确保删除 `TridentBackendConfig` CR 时，后端定义仍存在，并可使用 `tridentctl` 进行管理。</block>
  <block id="1ad97e0f65ef91102831baaa31630c76" category="admonition">请勿继续执行下一步，除非将 `deletionPolicy` 设置为 `retain` 。</block>
  <block id="8313f77478cb0df464604ae4435acce2" category="paragraph">最后一步是删除 `TridentBackendConfig` CR 。确认 `deeltionPolicy` 设置为 `retain` 后，您可以继续执行删除：</block>
  <block id="c1493b6d6e05639a816e5772bbb491af" category="paragraph">删除 `TridentBackendConfig` 对象后， Astra Trident 只需删除该对象，而无需实际删除后端本身。</block>
  <block id="72a5926b7fb086fe87e93771f6620556" category="summary">了解如何使用 `tridentctl` 执行后端管理操作。</block>
  <block id="aeeb03235358f0f4bf3be628bed08721" category="section-title">创建后端</block>
  <block id="34746f7a1d24170eeebf5510a045d43d" category="inline-link-macro">后端配置文件</block>
  <block id="99b7232073a67a8c82304f979e3dc83f" category="paragraph">创建后 <block ref="03c0b6ed8698193668e92f56e9be3efa" category="inline-link-macro-rx"></block>下，运行以下命令：</block>
  <block id="1cabe44c722167581b1e219de6c58341" category="paragraph">如果后端创建失败，则后端配置出现问题。您可以运行以下命令来查看日志以确定发生原因：</block>
  <block id="b5f9999463782f0c36ecc89573a90a49" category="paragraph">确定并更正配置文件中的问题后，您只需再次运行 `create` 命令即可。</block>
  <block id="634b471e6af84767e06324552492b533" category="section-title">删除后端</block>
  <block id="412228c370a388e25ee06e8ad7a1da3f" category="paragraph">要从 Astra Trident 中删除后端，请执行以下操作：</block>
  <block id="f6816a6570e6b6097177f9adc1f4805b" category="list-text">检索后端名称：</block>
  <block id="11f4ccb46eb9afc4b1187c376b53123f" category="list-text">删除后端：</block>
  <block id="c87f53b53d179c2b5dcd5fad1efba831" category="admonition">如果 Astra Trident 从此后端配置了仍存在的卷和快照，则删除后端将阻止其配置新卷。后端将继续处于 " 删除 " 状态，而 Trident 将继续管理这些卷和快照，直到将其删除为止。</block>
  <block id="d694c8966214ec6d0068c0ab2951b65c" category="section-title">查看现有后端</block>
  <block id="a6345aca446812b9124c47b385b33f43" category="paragraph">要查看 Trident 了解的后端，请执行以下操作：</block>
  <block id="cb325bc4dded2aa4744b594966262a99" category="list-text">要获取摘要，请运行以下命令：</block>
  <block id="9f073deeee70a1418443c3b8379c5c02" category="list-text">要获取所有详细信息，请运行以下命令：</block>
  <block id="93dbcf0189ff94d39230d2e3726969ab" category="section-title">更新后端</block>
  <block id="27709162cf6b8ffced7bb1da6dd49df3" category="paragraph">创建新的后端配置文件后，运行以下命令：</block>
  <block id="4ca005817e9c882d0ef15d451a97dbf0" category="paragraph">如果后端更新失败，则后端配置出现问题或您尝试的更新无效。您可以运行以下命令来查看日志以确定发生原因：</block>
  <block id="20b5ebaa2558437206eb6d1d47577805" category="paragraph">确定并更正配置文件中的问题后，您只需再次运行 `update` 命令即可。</block>
  <block id="d47f84a3cda326babf841866ad2326ab" category="section-title">确定使用后端的存储类</block>
  <block id="02fe9d429af25b46c16a1172d735124f" category="paragraph">以下是您可以使用问题解答与 JSON 回答的问题的示例，这些问题会 `tridentctl` 后端对象的输出。此操作将使用 `JQ` 实用程序，您需要安装该实用程序。</block>
  <block id="e00013adda7b5901ea3e44ae300fd73d" category="paragraph">这也适用于使用 `TridentBackendConfig` 创建的后端。</block>
  <block id="e8b9c3a9859a62e9a58431c3b61f75d5" category="doc">管理存储类</block>
  <block id="14f4c7abe09c4481722f1fa6563f2604" category="section-title">创建存储类。</block>
  <block id="0fe0aa7b9b7529f66030afb1629507bb" category="section-title">删除存储类</block>
  <block id="4bf50148821c75f616a96daca9255e6f" category="paragraph">要从 Kubernetes 中删除存储类，请运行以下命令：</block>
  <block id="65494a0b3404ce637afd88bcb7c82998" category="paragraph">` &lt; 存储类 &gt;` 应替换为您的存储类。</block>
  <block id="a5f526f5d63d827ce2c0146a20cd2ff7" category="paragraph">通过此存储类创建的任何永久性卷将保持不变， Astra Trident 将继续对其进行管理。</block>
  <block id="e606165355271961ba07945766fbf83a" category="section-title">查看现有存储类</block>
  <block id="7c237bc6c124137d25df2dec1cb3e528" category="list-text">要查看现有 Kubernetes 存储类，请运行以下命令：</block>
  <block id="4aae22fbb9c0d354d0a9c15c6c126d89" category="list-text">要查看 Kubernetes 存储类详细信息，请运行以下命令：</block>
  <block id="bed443a9c5577e1043c277e8ebbb542f" category="list-text">要查看 Astra Trident 的同步存储类，请运行以下命令：</block>
  <block id="db66cf4d314ab7a719a76ed3af1b0173" category="list-text">要查看 Astra Trident 的同步存储类详细信息，请运行以下命令：</block>
  <block id="ce32eb748bd7452bd6ee6d1d7ad6d3a7" category="section-title">设置默认存储类</block>
  <block id="f30a1542c01c3c493f3c01c88dfe5fcd" category="paragraph">Kubernetes 1.6 增加了设置默认存储类的功能。如果用户未在永久性卷声明（ PVC ）中指定永久性卷，则此存储类将用于配置永久性卷。</block>
  <block id="7c435ae4763642458286cb691812ea55" category="list-text">通过在存储类定义中将标注 `storageclass.Kubernetes 。 io/is-default-class` 设置为 true 来定义默认存储类。根据规范，任何其他值或标注不存在均视为 false 。</block>
  <block id="61fd76f55d29aaceb4a6ee09a318dc45" category="list-text">您可以使用以下命令将现有存储类配置为默认存储类：</block>
  <block id="800477137444bec636483de85335cbb5" category="list-text">同样，您也可以使用以下命令删除默认存储类标注：</block>
  <block id="2d2f31c3012657fd7b38b41312d1a0b8" category="paragraph">Trident 安装程序包中也有包含此标注的示例。</block>
  <block id="6c36cb9c072dc4cb9e163c44568f6a91" category="section-title">确定存储类的后端</block>
  <block id="dc0742ede78913414129866d60898f67" category="paragraph">以下是您可以使用问题解答与 JSON 一起为 Astra Trident 后端对象输出的 `tridentctl` 类问题的示例。此操作将使用 `JQ` 实用程序，您可能需要先安装该实用程序。</block>
  <block id="08c4bc4ac4edd9b12963c0596478d746" category="summary">通过使用 CSI 拓扑功能， Astra Trident 可以有选择地创建卷并将其附加到 Kubernetes 集群中的节点。</block>
  <block id="4abea6bac3b0b48d11dd8dcd02a11bf9" category="inline-link">CSI 拓扑功能</block>
  <block id="592af423a2f6a51f57c639ec7f7b245e" category="admonition">了解有关 CSI 拓扑功能的更多信息<block ref="ff042e7f24bd2adcec09d78466034177" category="inline-link-rx"></block>。</block>
  <block id="bbdcaf9b704dc7a7cf73e6000101b65a" category="paragraph">Kubernetes 提供了两种唯一的卷绑定模式：</block>
  <block id="5fca24470d51aa51b0fb2d0f27c25c68" category="list-text">如果将 `VolumeBindingMode` 设置为 `WaitForFirstConsuming` ，则为 PVC 创建和绑定永久性卷的操作将延迟，直到计划并创建使用 PVC 的 Pod 为止。这样，卷就会根据拓扑要求强制实施的计划限制来创建。</block>
  <block id="3bbc2da928dcf77a048cdd745fe7d208" category="admonition">`WaitForFirstConsumer"` 绑定模式不需要拓扑标签。此功能可独立于 CSI 拓扑功能使用。</block>
  <block id="edff21c44983aaa85506a3dfe467c494" category="paragraph">要使用 CSI 拓扑，您需要满足以下条件：</block>
  <block id="f9213d77978aabdafac36d2b0a184e56" category="list-text">集群中的节点应具有可引入拓扑感知的标签（`topology.Kubernetes IO/ 区域` 和 `topology.Kubernetes IO/ 区域` ）。在安装 Astra Trident 之前，集群中的节点上应存在这些标签 * ，以使 Astra Trident 能够识别拓扑。</block>
  <block id="0bd58c9826639ac2db106c3b277a7e0f" category="section-title">第 1 步：创建可感知拓扑的后端</block>
  <block id="c7d3751a47274aaa616d77a14f2e2722" category="paragraph">可以设计 Astra Trident 存储后端，以便根据可用性区域有选择地配置卷。每个后端都可以包含一个可选的 `supportedTopatis` 块，该块表示必须支持的分区和区域的列表。对于使用此后端的 StorageClasses ，只有在受支持区域 / 区域中计划的应用程序请求时，才会创建卷。</block>
  <block id="3e778236fe8f94ccc453f52d827e3719" category="admonition">`supportedTopologies` 用于提供每个后端的区域和分区列表。这些区域和分区表示可在 StorageClass 中提供的允许值列表。对于包含后端提供的部分区域和分区的 StorageClasses ， Astra Trident 将在后端创建卷。</block>
  <block id="217d95247b26701da7fd823884d84723" category="paragraph">您也可以为每个存储池定义 `supportedTopologies` 。请参见以下示例：</block>
  <block id="c6c80256ac468b3d88d7b62d8753f192" category="paragraph">在此示例中， `reGion` 和 `zone` 标签表示存储池的位置。`topology.Kubernees.io/zone` 和 `topology.Kubernees.io/zone` 指定存储池的使用位置。</block>
  <block id="54e204e8e05b6eb24d965741eb977e69" category="section-title">第 2 步：定义可识别拓扑的 StorageClasses</block>
  <block id="090f70d385b4a21aa6c8f2a0ca558616" category="paragraph">根据为集群中的节点提供的拓扑标签，可以将 StorageClasses 定义为包含拓扑信息。这将确定用作 PVC 请求候选对象的存储池，以及可使用 Trident 配置的卷的节点子集。</block>
  <block id="ecb383148a1bc974cba3ac735a79f4c6" category="paragraph">请参见以下示例：</block>
  <block id="ab0c7ec9411ede93aa545fbc095c0e75" category="paragraph">在上述 StorageClass 定义中， `volumeBindingMode` 设置为 `WaitForFirstConsumer"` 。在此存储类中请求的 PVC 在 Pod 中引用之前不会执行操作。此外， `allowedTopologies` 还提供了要使用的分区和区域。`NetApp-san-us-East1` StorageClass 将在上述 `san-backend-us-East1` 后端创建 PVC 。</block>
  <block id="df340fb31051c975afb3518dfd32e07c" category="section-title">第 3 步：创建和使用 PVC</block>
  <block id="f98be29d352e7c38a6502e76bbfaf34c" category="paragraph">创建 StorageClass 并将其映射到后端后，您现在可以创建 PVC 。</block>
  <block id="c4b17c8733f9f36fdc682242d2b64ab2" category="paragraph">请参见以下示例 `sPec` ：</block>
  <block id="427e01a8fca484c85a1e8e3a672b999a" category="paragraph">使用此清单创建 PVC 将导致以下结果：</block>
  <block id="e65f170821e3417d48579a28989a9260" category="paragraph">要使 Trident 创建卷并将其绑定到 PVC ，请在 Pod 中使用 PVC 。请参见以下示例：</block>
  <block id="9b8ff27bceb4601d1f866c4cf39fe449" category="paragraph">此 podSpec 指示 Kubernetes 在 `us-East1` 区域中的节点上计划 Pod ，并从 `us-East1-a` 或 `us-East1-b` 区域中的任何节点中进行选择。</block>
  <block id="c93345596f9f82deea04d17ef8c6ca89" category="paragraph">请参见以下输出：</block>
  <block id="476950aea923438779c9544953093cb9" category="paragraph">可以使用 `tridentctl backend update` 更新原有后端，以包含 `supportedTopologies` 列表。这不会影响已配置的卷，并且仅用于后续的 PVC 。</block>
  <block id="ded10f93b9e4453980b7009035c63418" category="inline-link">管理容器的资源</block>
  <block id="47ea3356a13b3f6644e6c05450e9d5e1" category="list-text"><block ref="47ea3356a13b3f6644e6c05450e9d5e1" category="inline-link-rx"></block></block>
  <block id="6370f866cf64618c026027da41bd248e" category="inline-link">节点选择器</block>
  <block id="2a4ad9fc807789134426a1b2babc5733" category="list-text"><block ref="2a4ad9fc807789134426a1b2babc5733" category="inline-link-rx"></block></block>
  <block id="873bf2b9b61a741ce5b7326a3a053489" category="inline-link">关联性和反关联性</block>
  <block id="ec5df0a2adb621359563958138462e34" category="list-text"><block ref="ec5df0a2adb621359563958138462e34" category="inline-link-rx"></block></block>
  <block id="e1e08e40036f927a0e660c22aa837f88" category="inline-link">损害和公差</block>
  <block id="66b1e0aa9cd6e46c0b85fdf56a15154a" category="list-text"><block ref="66b1e0aa9cd6e46c0b85fdf56a15154a" category="inline-link-rx"></block></block>
  <block id="2941c38dbb7c39c325787067c0540247" category="summary">了解如何使用 `kubectl` 执行后端管理操作。</block>
  <block id="20309eb77b701e6c49ca6b99a8f93f90" category="paragraph">通过删除 `TridentBackendConfig` ，您可以指示 Astra Trident 删除 / 保留后端（基于 `detionPolicy` ）。要删除后端，请确保将 `deletionPolicy` 设置为 delete 。要仅删除 `TridentBackendConfig` ，请确保将 `deletionPolicy` 设置为 Retain 。这样可以确保后端仍然存在，并可使用 `tridentctl` 进行管理。</block>
  <block id="3fa37f688874143cd423aabca8075ffb" category="paragraph">Astra Trident 不会删除 `TridentBackendConfig` 使用的 Kubernetes 机密。Kubernetes 用户负责清理密钥。删除机密时必须小心。只有在后端未使用机密时，才应将其删除。</block>
  <block id="265ab4809f08d248e5045a8638ac7afa" category="paragraph">您也可以运行 `tridentctl get backend -n trident` 或 `tridentctl get backend -o YAML -n trident` 来获取存在的所有后端的列表。此列表还将包括使用 `tridentctl` 创建的后端。</block>
  <block id="93700a3ea9dc6d858638cd66cd2f2bfa" category="paragraph">更新后端可能有多种原因：</block>
  <block id="56cdd71a65518838d73e00276ed6fab1" category="list-text">存储系统的凭据已更改。要更新凭据，必须更新 `TridentBackendConfig` 对象中使用的 Kubernetes Secret 。Astra Trident 将使用提供的最新凭据自动更新后端。运行以下命令以更新 Kubernetes Secret ：</block>
  <block id="d38f034e9aa082af3ec19c23caff4b0f" category="paragraph">如果后端更新失败，则后端仍会保持在其上次已知配置中。您可以通过运行 `kubectl get tbc &lt;tbc-name&gt; -o yaml -n trident` 或 `kubectl describe tbc &lt;tbc-name&gt; -n trident` 来查看日志以确定发生原因。</block>
  <block id="5878b59fb3a8430928026b63b5ca336f" category="paragraph">确定并更正配置文件中的问题后，您可以重新运行 update 命令。</block>
  <block id="bee1e2306bc7054ee443dc651eae90de" category="summary">Astra Trident 提供了一组 Prometheus 指标端点，您可以使用这些端点监控 Astra Trident 的性能。</block>
  <block id="44a004cad6eb7ea8839aaa8754ead178" category="doc">监控 Astra Trident</block>
  <block id="c827f266cf12e05adc1fe95215415abf" category="paragraph">通过 Astra Trident 提供的指标，您可以执行以下操作：</block>
  <block id="6111d709595b0a106ff313a249eb9d92" category="list-text">保留有关 Astra Trident 运行状况和配置的选项卡。您可以检查操作的成功程度以及它是否能够按预期与后端进行通信。</block>
  <block id="64dbac0ca36d9b1f6a8cf1e8a0123261" category="list-text">检查后端使用情况信息，并了解在后端配置的卷数量以及占用的空间量等。</block>
  <block id="7f6516030964b624d9c71fd9ec7f83dd" category="list-text">维护可用后端配置的卷数量的映射关系。</block>
  <block id="e436794bccbe602731bbde7766c1fa49" category="list-text">跟踪性能。您可以了解 Astra Trident 与后端通信并执行操作所需的时间。</block>
  <block id="efe0d75090a22534acabc936f8669994" category="admonition">默认情况下， Trident 的指标会显示在 `/metrics` 端点的目标端口` 8001 ` 上。安装 Trident 时，这些指标默认为 * 已启用 * 。</block>
  <block id="1ed994b9754ad078cfc46aaf3dbf3a5d" category="list-text">安装了 Astra Trident 的 Kubernetes 集群。</block>
  <block id="eb8bfd69bb88378a6f4d987811890ce6" category="inline-link">容器化 Prometheus 部署</block>
  <block id="42ae2e91a939ffa9bbda53c10bf5f89f" category="inline-link">原生应用程序</block>
  <block id="050899631250104f17d24b27cc8a12e5" category="list-text">一个 Prometheus 实例。可以是<block ref="bd5b9e4bd7b88b90afb221fb760a777c" category="inline-link-rx"></block> 或者，您也可以选择将 Prometheus 作为运行<block ref="3f1d5beaea78c0fd8cb397fbeb1c88bd" category="inline-link-rx"></block>。</block>
  <block id="68276ca40dfbfd36de911402152fa452" category="section-title">第 1 步：定义 Prometheus 目标</block>
  <block id="c33638e0de87536b08eeb94264671d0f" category="section-title">第 2 步：创建 Prometheus ServiceMonitor</block>
  <block id="81a21a88b42cd5c83d149a080a627bad" category="paragraph">要使用 Trident 指标，您应创建一个 Prometheus ServiceMonitor ，该监控器可监控 `trident CSI` 服务并侦听 `mtrigics` 端口。示例 ServiceMonitor 如下所示：</block>
  <block id="bfc1ad0fa725ea87ea056b2f2e8b6fe8" category="paragraph">此 ServiceMonitor 定义会检索 `trident CSI` 服务返回的指标，并专门查找服务的 `mtrics` 端点。因此， Prometheus 现在已配置为了解 Astra Trident 的指标。</block>
  <block id="07338294bd70ea1e7710a574d7c8e2ce" category="paragraph">除了直接从 Astra Trident 获得的指标之外， kubelet 还通过自己的指标端点公开了许多 `kubelet_volume_*` 指标。Kubelet 可以提供有关已连接的卷， Pod 及其处理的其他内部操作的信息。请参见<block ref="3f1f0977d0df3e8b343e403140284021" category="inline-link-rx"></block>。</block>
  <block id="1db2022a8a8de5d612eda8e3be0e1065" category="section-title">第 3 步：使用 PromQL 查询 Trident 指标</block>
  <block id="f5142e19a3b1edf809fce9d3b6aefc05" category="paragraph">PromQL 非常适合创建返回时间序列或表格数据的表达式。</block>
  <block id="8c6fb1be2521fd16337c11c626672678" category="paragraph">您可以使用以下 PromQL 查询：</block>
  <block id="b214fd0009b3929347f097bd843f0bfd" category="section-title">获取 Trident 运行状况信息</block>
  <block id="69fc54b5fac064131422d41948eb77ed" category="list-text">来自 Astra Trident 的 HTTP 2XX 响应的百分比</block>
  <block id="f43362a8efc950ece8c14d4e5faddfa4" category="list-text">通过状态代码来自 Astra Trident 的 REST 响应的百分比</block>
  <block id="e69d9a06025140f38adabb6f709f6e5b" category="list-text">* 由 Astra Trident 执行的操作的平均持续时间（毫秒） *</block>
  <block id="0505e17dec1e849391ad96f558fa613a" category="section-title">获取 Astra Trident 使用信息</block>
  <block id="f160a52d617adf6e6c5d379a9b8bca89" category="list-text">卷大小 * 平均值 *</block>
  <block id="eb978bfe01ec0c72ad231f3953e304a2" category="list-text">* 每个后端配置的卷总空间 *</block>
  <block id="5f735ae12eafbe476178928f4645475b" category="section-title">获取单个卷的使用情况</block>
  <block id="ee0898e9f0caa503f3eaa39c919f4c53" category="admonition">只有在同时收集 kubelet 指标时，才会启用此功能。</block>
  <block id="0bc301d2423b2ffaa38a5e275e4ec6f9" category="list-text">* 每个卷的已用空间百分比 *</block>
  <block id="8516d75df966e595bd1b5491acd01515" category="section-title">了解有关 Astra Trident AutoSupport 遥测的信息</block>
  <block id="6f4ddec0f501988d2b0315a77c87eeaa" category="paragraph">默认情况下， Astra Trident 会按每日节奏向 NetApp 发送 Prometheus 指标和基本后端信息。</block>
  <block id="5276683815b670b0addfb8c8a45bbb41" category="list-text">要阻止 Astra Trident 向 NetApp 发送 Prometheus 指标和基本后端信息，请在 Astra Trident 安装期间传递 ` -silning-autosupport` 标志。</block>
  <block id="ca0f9a86ca33f1d6baa9051bd7f4ed21" category="inline-link">隐私政策</block>
  <block id="5b58783cbe6d85941bac008d83d3f5c8" category="list-text">Astra Trident 还可以通过 `tridentctl send AutoSupport` 按需将容器日志发送到 NetApp 支持部门。您需要触发 Astra Trident 以上传其日志。在提交日志之前，您应接受 NetApp 的<block ref="91b6c0438017ba5fa21c286a96d5acb4" category="inline-link-rx"></block>。</block>
  <block id="63b95d84cf55d169b2592f3ac621055f" category="list-text">除非另有说明，否则 Astra Trident 会从过去 24 小时提取日志。</block>
  <block id="5224919a4ae5ccf610fb0ee74e4e7a94" category="inline-link">Trident AutoSupport</block>
  <block id="53084cad3d11df800502598c11e2d10b" category="inline-link">EULA</block>
  <block id="b9a52e8d1e9b14b8825c6ea01c0ce6d6" category="list-text">Trident AutoSupport 不会收集或传输个人身份信息（ PiII ）或个人信息。它附带了<block ref="173a360b412944768c2ab13e6c8fd1c7" category="inline-link-rx"></block> 这不适用于 Trident 容器映像本身。您可以详细了解 NetApp 对数据安全和信任的承诺<block ref="8470ff535916bda3f4ea4723647a7135" category="inline-link-rx"></block>。</block>
  <block id="89f0f2832f60f480805faf638848c5b7" category="paragraph">Astra Trident 发送的有效负载示例如下：</block>
  <block id="d2ec86f126f845e79aff07e70bf89472" category="list-text">AutoSupport 消息将发送到 NetApp 的 AutoSupport 端点。如果使用私有注册表存储容器映像，则可以使用 ` -image-regRegistry` 标志。</block>
  <block id="86c5a11fba83815412aec79f67f2d276" category="list-text">您也可以通过生成安装 YAML 文件来配置代理 URL 。为此，可以使用 `tridentctl install -generate-custom-yaml` 创建 YAML 文件，并在 `trident dedeployment.yaml` 中为 `trident autosupport` 容器添加 ` -proxy-url` 参数。</block>
  <block id="46ab735110312d196d5265e534453cba" category="section-title">禁用 Astra Trident 指标</block>
  <block id="8ec47dab227d183e0d3ad0cd529d289b" category="paragraph">要 ` 报告指标，您应生成自定义 YAML （使用` -generate-custom-yaml ` 标志）并对其进行编辑，以删除为 `trident 主` 容器调用的` -metrics 标志。</block>
  <block id="28b0abcecaf7a63edb46e4e137337018" category="doc">配置 Azure NetApp Files 后端</block>
  <block id="07e7004c50a67a3e4e366b4ca1c28e3d" category="paragraph">配置和使用<block ref="24a785881ff1cdf191a2239811dc9597" category="inline-link-rx"></block> 后端，您需要满足以下要求：</block>
  <block id="66d640a9a050b05e6a914cbcd88a1e2e" category="list-text">`ssubscriptionID` 来自启用了 Azure NetApp Files 的 Azure 订阅。</block>
  <block id="b12fb354025b3dfa01277964eb72c060" category="inline-link">应用程序注册</block>
  <block id="f494e4df0fff53e809d6563f8ec1782f" category="inline-link">委派子网</block>
  <block id="3e566c45584d66d2ab94c2108f7c3488" category="cell">"Azure-netapp-files"</block>
  <block id="9dd18f393b35bf22098cf53e9c1c7fa6" category="cell">驱动程序名称 + "_" + 随机字符</block>
  <block id="665120e71659a6a32f990a3181688d1b" category="cell">`ssubscriptionID` 。</block>
  <block id="b2ad290b003ccdce2a538f49a795f281" category="cell">Azure 订阅中的订阅 ID</block>
  <block id="e07778d10cef90430253876cba7157e4" category="cell">`租户 ID` 。</block>
  <block id="2975d48342e428a3b18123f85ed0ecb5" category="cell">应用程序注册中的租户 ID</block>
  <block id="949ba1045db0d48bd189044e672d8097" category="cell">`客户端 ID` 。</block>
  <block id="56ef18e84ab36c2bdc4546e6a2756673" category="cell">`clientSecret` 。</block>
  <block id="85f484f0892a96287b6224ddd3c5fbb2" category="cell">应用程序注册中的客户端密钥</block>
  <block id="1c65f12b4d30114593cc01384938cb5f" category="cell">`S标准` ， `高级` 或 `超级` 之一</block>
  <block id="b21b08bb55acd409e40e9b45edd3bb34" category="cell">"" （随机）</block>
  <block id="fc7dd5b65d21ee7272a067c9404a8498" category="cell">`位置`</block>
  <block id="8fce436e09a08bd124727374d3e1d1d5" category="cell">要创建新卷的 Azure 位置的名称</block>
  <block id="32ef1af5ccda7c2f6d85e55f5034f105" category="cell">`virtualNetwork`</block>
  <block id="10afd0959cfa4a53bce9c8d395c40c48" category="cell">具有委派子网的虚拟网络的名称</block>
  <block id="ec045173f4df65e5e8951c3ca9579945" category="cell">`ssubnet`</block>
  <block id="0b8deda0ecc5080e8c0ed0b475e983ba" category="cell">委派给 `Microsoft.Netapp/volumes` 的子网的名称</block>
  <block id="e5ac299cc3b14e1fac29518569ca9bb1" category="cell">新卷的默认大小</block>
  <block id="725ae241ec74eed978f0b099030236b8" category="section-title">示例 3 ：高级配置</block>
  <block id="a83f4a534ccef7ac1d209fb0015cd907" category="paragraph">此后端配置进一步将卷放置范围缩小为一个子网，并修改了某些卷配置默认值。</block>
  <block id="a0f3a965c12688befda99da850903dcb" category="cell">`autosExportPolicy`</block>
  <block id="b4ad0dff08149092bc3e4b16572af575" category="cell">`autosExportCIDR`</block>
  <block id="e537a193eb90bd46a645ce750bb5f3fc" category="cell">[ "0.0.0.0/0 " ， " ：： /0 "]`</block>
  <block id="07f6b23cad3d6da54012935ff972affe" category="cell">`qtreesPerFlexvol`</block>
  <block id="a13306f726fdf72d2d992a7ebdc63b1b" category="cell">每个 FlexVol 的最大 qtree 数，必须在 50 ， 300 范围内</block>
  <block id="28326357ec2f8c06e01271c4ee2201f1" category="cell">200</block>
  <block id="3e9a232d025270ed6767c385b8291871" category="cell">新卷的模式</block>
  <block id="2907de5eba980e910513008165ea2c2b" category="cell">控制 ` .snapshot` 目录的可见性</block>
  <block id="c1a0e97f953c948568aed6c134fc9711" category="cell">要使用的导出策略</block>
  <block id="06602e99c8d46d601029e6dd0b37e3f8" category="paragraph">对于 `ontap-nas` 和 `ontap-nas-flexgroups` ， Astra Trident 现在使用新的计算方法来确保 FlexVol 的大小正确，并使用 snapshotReserve 百分比和 PVC 。当用户请求 PVC 时， Astra Trident 会使用新计算创建具有更多空间的原始 FlexVol 。此计算可确保用户在 PVC 中收到所请求的可写空间，而不是小于所请求的空间。在 v21.07 之前，如果用户请求 PVC （例如， 5GiB ），并且 snapshotReserve 为 50% ，则只会获得 2.5 GiB 的可写空间。这是因为用户请求的是整个卷，而 `snapshotReserve` 是其中的一个百分比。在 Trident 21.07 中，用户请求的是可写空间， Astra Trident 将 `snapshotReserve` number 定义为整个卷的百分比。这不适用于 `ontap-nas-economy"` 。请参见以下示例以了解其工作原理：</block>
  <block id="86ec808b80973d24eadfc617926f534e" category="paragraph">计算方法如下：</block>
  <block id="28ad7be76b350116bde3ae04e5f94a60" category="paragraph">对于 snapshotReserve = 50% ， PVC 请求 = 5GiB ，卷总大小为 2/.5 = 10GiB ，可用大小为 5GiB ，这是用户在 PVC 请求中请求的大小。`volume show` 命令应显示与以下示例类似的结果：</block>
  <block id="daabb7db82ac9f3f074671a1185c462e" category="paragraph">在升级 Astra Trident 时，先前安装的现有后端将按照上述说明配置卷。对于在升级之前创建的卷，您应调整其卷的大小，以便观察到所做的更改。例如，一个 2 GiB PVC ，其 `snapshotReserve=50` earlier 会导致一个卷提供 1 GiB 的可写空间。例如，将卷大小调整为 3GiB 可为应用程序在一个 6 GiB 卷上提供 3GiB 的可写空间。</block>
  <block id="f35c0fe4b6581c16866c964cef229bfa" category="admonition">如果在采用 Trident 的 NetApp ONTAP 上使用 Amazon FSx ，建议为 LIF 指定 DNS 名称，而不是 IP 地址。</block>
  <block id="87dc0337d3ded2211d9b01c32e22d90d" category="doc">配置后端</block>
  <block id="2acbb5dd492d792d00383b0c76ade4ad" category="list-text"><block ref="2acbb5dd492d792d00383b0c76ade4ad" category="inline-link-macro-rx"></block></block>
  <block id="252e63ff646a0204671ca04a26b88e06" category="inline-link-macro">配置适用于 Google 云平台的 Cloud Volumes Service 后端</block>
  <block id="c00b6e370d4496e06d2135275a992af5" category="list-text"><block ref="c00b6e370d4496e06d2135275a992af5" category="inline-link-macro-rx"></block></block>
  <block id="b1064b6f7a5906eac23601dc24ba95a8" category="list-text"><block ref="b1064b6f7a5906eac23601dc24ba95a8" category="inline-link-macro-rx"></block></block>
  <block id="d7f015aa2f1d488e17e175dac6de3149" category="list-text"><block ref="d7f015aa2f1d488e17e175dac6de3149" category="inline-link-macro-rx"></block></block>
  <block id="24ca391029d6df294c5d5b8f1fe5b4eb" category="summary">了解如何使用 ONTAP NAS 驱动程序配置 ONTAP 后端。</block>
  <block id="0f5dc79c8003190ab8f758b1748ba0d8" category="summary">NetApp 不断改进和完善其产品和服务。以下是最新版 Astra Trident 中的一些最新功能，增强功能和错误修复。</block>
  <block id="2e6ce374ac42de81aea6a3d682b92e33" category="paragraph">发行说明提供了有关最新版本的 Astra Trident 中的新增功能，增强功能和错误修复的信息。</block>
  <block id="e4c4d344a524d21b898e4d04b6539aa7" category="admonition">安装程序 zip 文件中提供的 `tridentctl` 二进制文件是经过测试且受支持的版本。请注意， zip 文件的 ` 或 Extras` 部分中提供的 `macos` 二进制文件未经过测试或不受支持。</block>
  <block id="41cf959adc98386b54829d71a6ed5d37" category="section-title">修复</block>
  <block id="a6e7aa999ba654c6844672ae59f5137a" category="list-text">修复了问题描述，其中无法将 XFS 卷的克隆挂载到与源卷相同的节点上（ GitHub 问题描述 514 ）。</block>
  <block id="4a921ae3eb8c2695dabd4044ff81141a" category="list-text">修复了问题描述，其中 Astra Trident 在关闭时记录了致命错误（ GitHub 问题描述 597 ）。</block>
  <block id="852acc81ea6fa7363b73c5313002de83" category="list-text">与 Kubernetes 相关的修复程序：</block>
  <block id="f94cc5159119c43751041256941deb2c" category="list-text">使用 `ontap-NAS` 和 `ontap-nas-flexgroup` 驱动程序创建快照时，将卷的已用空间返回为最小还原大小（ GitHub 问题描述 645 ）。</block>
  <block id="742ce2e3c9c8496323bd1176af2838a4" category="list-text">修复了问题描述，其中 `无法扩展文件系统` 在调整卷大小后记录了错误（ GitHub 问题描述 560 ）。</block>
  <block id="9a445ecbad9af70a94bd7558ba95e059" category="list-text">修复了 POD 可能停留在 `正在终止` 状态的问题描述（ GitHub 问题描述 572 ）。</block>
  <block id="4f81c320a621b8c9d81c7334f2cffc71" category="list-text">修复了 `ontap-san-economy-lun` FlexVol 可能已满快照 LUN 的情况（ GitHub 问题描述 533 ）。</block>
  <block id="169c3be63dd22b315ed7884e246338de" category="list-text">使用不同映像修复了自定义 YAML 安装程序问题描述（ GitHub 问题描述 613" ）。</block>
  <block id="1077a1a91a96498c2f56bc630e632eee" category="list-text">固定快照大小计算（ GitHub 问题描述 611 ）。</block>
  <block id="fe705e5b02638736087c9fd97b2c4952" category="list-text">修复了问题描述，其中所有 Astra Trident 安装程序都可以将纯 Kubernetes 标识为 OpenShift （ GitHub 问题描述 639 ）。</block>
  <block id="27b76ffa775f907a1fd51f21a669551b" category="list-text">修复了 Trident 操作员在无法访问 Kubernetes API 服务器时停止协调的问题（ GitHub 问题描述 599 ）。</block>
  <block id="c1748037d10cffabb8e95e4ccf77c613" category="section-title">增强功能</block>
  <block id="1f9e922b6eff6cb06fca1ed9137eed38" category="list-text">为 GCP-CVS 性能卷增加了对 `unixPermissions` 选项的支持。</block>
  <block id="294b850a76a040c20913e76c2fe6589a" category="list-text">增加了对 GCP 中 600 GiB 到 1 TiB 范围内的扩展优化 CVS 卷的支持。</block>
  <block id="0333eb54465646b87754facff75fdb5f" category="list-text">Kubernetes 相关增强功能：</block>
  <block id="c32aa411caa1ffd0e30a271f5be834d9" category="list-text">增加了对 Kubernetes 1.22 的支持。</block>
  <block id="fa1fd8841173fa7ccde5059fb7c2f903" category="list-text">已启用 Trident 操作员和 Helm 图表以使用 Kubernetes 1.22 （ GitHub 问题描述 628 ）。</block>
  <block id="dbaa551f190105e514f7816811f4b397" category="list-text">已将操作员映像添加到 `tridentctl` images 命令（ GitHub 问题描述 570 ）中。</block>
  <block id="be575f1ff204f2800114965a5c0d8575" category="section-title">实验增强功能</block>
  <block id="29ddf941d9825cc9283521ee90468595" category="list-text">在 `ontap-san` 驱动程序中增加了对卷复制的支持。</block>
  <block id="e2f2b85987da5e2397c1e342a6fd9e28" category="list-text">增加了对 `ontap-nas-flexgroup` ， `ontap-san` 和 `ontap-nas-economy` 驱动程序的 * 技术预览 * REST 支持。</block>
  <block id="95dc0391ce7b396d7dd5622284e8fc3e" category="section-title">已知问题</block>
  <block id="64a8f71bee95a6635e88bce00f1a2d3c" category="paragraph">已知问题用于确定可能会阻止您成功使用本产品的问题。</block>
  <block id="572b1d7e33a1c667884a1ffdff7a2d25" category="list-text">对于在其 StorageClass 中未指定 `FSType` 的卷， Astra Trident 现在会强制使用空的 `FSType` （`FSTtype=""` ）。使用 Kubernetes 1.17 或更高版本时， Trident 支持为 NFS 卷提供一个空的 `FSType` 。对于 iSCSI 卷，在使用安全上下文强制执行 `fsGroup` 时，您需要在 StorageClass 上设置 `FSType` 。</block>
  <block id="91186d69835ccf9911e356f74938c539" category="list-text">在多个 Astra Trident 实例之间使用后端时，每个后端配置文件对于 ONTAP 后端应具有不同的 `storagePrefix` 值，或者对于 SolidFire 后端使用不同的 `租户名称` 。Astra Trident 无法检测其他 Astra Trident 实例创建的卷。尝试在 ONTAP 或 SolidFire 后端创建现有卷会成功，因为 Astra Trident 会将卷创建视为一项幂等操作。如果 `storagePrefix` 或 `租户名称` 不存在差异，则在同一后端创建的卷可能会发生名称冲突。</block>
  <block id="9bf4c601179068ff3574d2cf87536564" category="list-text">安装 Astra Trident （使用 `tridentctl` 或 Trident 操作员）并使用 `tridentctl` 管理 Astra Trident 时，应确保设置 `KUBECONFIG` 环境变量。这是 `需要对` tridentctl 进行处理的 Kubernetes 集群进行指示的。在使用多个 Kubernetes 环境时，您应确保准确获取 `KUBECONFIG` 文件。</block>
  <block id="6d791d3b45515fd8619e489b938f39e8" category="inline-link">挂载选项</block>
  <block id="a5c785ee36f0f2d14349653f744c8e3b" category="list-text">要对 iSCSI PV 执行联机空间回收，工作节点上的底层操作系统可能需要将挂载选项传递到卷。这一点适用于需要 `discard` 的 RHEL/RedHat CoreOS 实例<block ref="2ee633fb26bfccf07d490458d29f92a2" category="inline-link-rx"></block>；确保中包含 Discard mountOption<block ref="b44436f062a8f5a535d8cafcffeb70b2" category="inline-link-rx"></block> 支持联机块丢弃。</block>
  <block id="c2ebda3702872aaa7ad44122f2343d7e" category="list-text">如果每个 Kubernetes 集群有多个 Astra Trident 实例，则 Astra Trident 将无法与其他实例通信，也无法发现它们创建的其他卷，如果集群中运行多个实例，则会导致意外的错误行为。每个 Kubernetes 集群只能有一个 Astra Trident 实例。</block>
  <block id="294f8c33b7ccdbcbf422998b64c9c931" category="list-text">如果在 Astra Trident 脱机时从 Kubernetes 中删除了基于 Astra Trident 的 `StorageClass` 对象，则 Astra Trident 不会在恢复联机后从其数据库中删除相应的存储类。您应使用 `tridentctl` 或 REST API 删除这些存储类。</block>
  <block id="ddab3f1d971a7608afb4c30c688a32ac" category="list-text">如果用户在删除相应的 PVC 之前删除了由 Astra Trident 配置的 PV ，则 Astra Trident 不会自动删除后备卷。您应通过 `tridentctl` 或 REST API 删除此卷。</block>
  <block id="0821431aba133adbfa7fa0ca1781eedd" category="list-text">ONTAP 不能同时配置多个 FlexGroup ，除非聚合集对于每个配置请求是唯一的。</block>
  <block id="38699c45ccc629a8b46bd780d7aef2f6" category="list-text">使用基于 IPv6 的 Astra Trident 时，应在后端定义中方括号内指定 `managementLIF` 和 `dataLIF` 。例如， `` FD20 ： 8b1e ： b258 ： 2000 ： f816 ： 3effe ： feec ： 0`` 。</block>
  <block id="e9a7080bd6d1b50ff15cef6f14fa1d64" category="inline-link">Astra Trident GitHub</block>
  <block id="b94e036fb032554ca486dd8fc2e3fafe" category="list-text"><block ref="b94e036fb032554ca486dd8fc2e3fafe" category="inline-link-rx"></block></block>
  <block id="3334dfda9735f9b3ed55a34ef316b599" category="inline-link">Astra Trident 博客</block>
  <block id="d090b5d97388b77aa02e5d1203c037a0" category="list-text"><block ref="d090b5d97388b77aa02e5d1203c037a0" category="inline-link-rx"></block></block>
  <block id="ba09ee47d11962c1ccd13d7e1f10e6c5" category="doc">文档的早期版本</block>
  <block id="0c141ec81d4107f4c63fb0deb2531c0d" category="inline-link">Astra Trident 21.04</block>
  <block id="193bfae1ebda99fb7289c66fa69395a0" category="list-text"><block ref="193bfae1ebda99fb7289c66fa69395a0" category="inline-link-rx"></block></block>
  <block id="cba2c660d905f83e39a0d1771286c9e7" category="inline-link">Astra Trident 21.01</block>
  <block id="97f32ab1a5165dc49105dca53b9f4de7" category="list-text"><block ref="97f32ab1a5165dc49105dca53b9f4de7" category="inline-link-rx"></block></block>
  <block id="d2eb05d1990246a079aeb2f56e3a4237" category="paragraph">Astra Trident 的多个实例可以同时在同一主机上运行。这样可以同时连接到多个存储系统和存储类型，并能够自定义用于 Docker 卷的存储。</block>
  <block id="89bcbd8e4ba49b7310e9fa748e878c4b" category="inline-link-macro">部署的前提条件</block>
  <block id="88f0ab229fa9d759d74fcf6ab7cc17b1" category="section-title">Docker 托管插件方法（ 1.13/17.03 及更高版本）</block>
  <block id="135b308ed83c53f1516b7c754566d1c4" category="admonition-title">开始之前</block>
  <block id="070ecb002d71e4e7618a4b46a5ba690f" category="admonition">如果您在传统守护进程方法中使用了 Astra Trident 之前的 Docker 1.13/ 17.03 ，请确保在使用受管插件方法之前停止 Astra Trident 进程并重新启动 Docker 守护进程。</block>
  <block id="7bf1ee8f4e093050c1cdf1842931af7d" category="list-text">停止所有正在运行的实例：</block>
  <block id="47b9ec5c8c4439980c63f4188bad5324" category="list-text">重新启动 Docker 。</block>
  <block id="5311ac4d72d5c91dcaa39b896d3b8027" category="list-text">确保已安装 Docker 引擎 17.03 （新版本 1.13 ）或更高版本。</block>
  <block id="07d6db5e99a0aa19fe76f15efed30ecf" category="inline-link">安装或更新安装</block>
  <block id="2c3bc9d0632e0cccc05fdd3c42467df9" category="paragraph">如果您的版本已过期，<block ref="ddebe10ca17c0276898872fa2632e8fb" category="inline-link-rx"></block>。</block>
  <block id="48afbcf494fc19ee409f5aff48ae32c3" category="list-text">创建配置文件并按如下所示指定选项：</block>
  <block id="9314e9bcd24c80b255fc3e9e697a2ada" category="list-text">`config` ：默认文件名为 `config.json` ，但您可以使用所选的任何名称，方法是使用文件名指定 `config` 选项。此配置文件必须位于主机系统上的 ` /etc/netappdvp` 目录中。</block>
  <block id="8798dc2a3b5e61873054923c9f170ac7" category="list-text">`log-level` ：指定日志记录级别（ `debug` ， `info` ， `warn` ， `error` ， `fal` ）。默认值为 `info` 。</block>
  <block id="45ed67026a1141006588fcc698646141" category="list-text">`debug` ：指定是否启用调试日志记录。默认值为 false 。如果为 true ，则覆盖日志级别。</block>
  <block id="3bed6f89999b483af7f55024d9e7c02a" category="list-text">为配置文件创建一个位置：</block>
  <block id="28156615c51d4bad2ee47d0a9f43f404" category="list-text">创建配置文件：</block>
  <block id="a4574d19d34a14aa0accde782f35318b" category="list-text">开始使用 Astra Trident 消耗已配置系统中的存储。</block>
  <block id="a9c521f25a3bacb94ad1dd4705b3585f" category="list-text">创建名为 "firstVolume" 的卷：</block>
  <block id="4fbca4f67cbe96bc7d7a16691d2912c2" category="list-text">在容器启动时创建默认卷：</block>
  <block id="b8e88709dbc4f2f80a96f53f83862704" category="list-text">删除卷 "firstVolume" ：</block>
  <block id="0e68ac1d84bfedf203365a9fb37db9ed" category="section-title">传统方法（ 1.12 或更早版本）</block>
  <block id="2c1107bda4c1ae7904ab1835c35973b7" category="list-text">确保您已安装 Docker 版本 1.10 或更高版本。</block>
  <block id="b6fdfa2eab3e357687eba5ddec2bea0c" category="paragraph">如果您的版本已过期，请更新您的安装。</block>
  <block id="45c61654258cfd16ceec15df7df02138" category="inline-link">按照适用于您的分发版本的说明进行操作</block>
  <block id="07dff22faeb910f375341cfcbd4899fd" category="paragraph">或<block ref="9ce989a7f7f995616a47f5dd291ed229" category="inline-link-rx"></block>。</block>
  <block id="588d2fe1c60271cde75dbeba32e0b25b" category="list-text">确保已为您的系统配置 NFS 和 / 或 iSCSI 。</block>
  <block id="03fe5b0d58270efa87041677cac72ad7" category="list-text">安装和配置 NetApp Docker 卷插件：</block>
  <block id="f45f5a64dae951d3e37c9bd382201b06" category="list-text">下载并解压缩应用程序：</block>
  <block id="b255d9e06a4ca8e9f5bc31c9198426ad" category="list-text">移动到托箱路径中的某个位置：</block>
  <block id="9ad37c975c341297c49c69353516a727" category="paragraph">启动守护进程后，您可以使用 Docker 命令行界面创建和管理卷</block>
  <block id="e3dec3f86b9a3b1be209ab63855ce432" category="list-text">创建卷</block>
  <block id="5ff2e3e853922fdb84ef21b85ffdac2e" category="list-text">启动容器时配置 Docker 卷：</block>
  <block id="8f6a91f5f21d0478e3fd89095fc28ab9" category="list-text">删除 Docker 卷：</block>
  <block id="e63e2a2b9c9184e703ff8d93bb92508b" category="section-title">在系统启动时启动 Astra Trident</block>
  <block id="5b51496da86e5a2073e0c618390c3d2a" category="list-text">将文件复制到正确的位置。</block>
  <block id="44103de0a164f687d305ad91e919d8ee" category="paragraph">如果正在运行多个实例，则单元文件应使用唯一名称。</block>
  <block id="3223aadc84a3ccb4a3473ba01c895184" category="list-text">编辑文件，更改问题描述（第 2 行）以匹配驱动程序名称和配置文件路径（第 9 行）以反映您的环境。</block>
  <block id="1edae3931401a32d7dd7dd6e0a2ad563" category="list-text">重新加载 systemd 以载入更改：</block>
  <block id="db38a93e27eba57d507611d002ad612f" category="list-text">启用服务。</block>
  <block id="c7e0a4deeebe264aa7d5f7f3ca3ef77f" category="paragraph">根据您在 ` /usr/lib/systemd/system` 目录中为文件命名的内容，此名称会有所不同。</block>
  <block id="baa04490a79e9e8de7fa4cd44e2c6fbb" category="list-text">启动服务。</block>
  <block id="93c7574cf83c1f01b04891cf2d826cea" category="list-text">查看状态。</block>
  <block id="f4f15418284ae7a01b27fccc1af0463a" category="admonition">每当您修改单元文件时，请运行 `systemctl daemon-reload` 命令，使其了解所做的更改。</block>
  <block id="23c9c608b55b9071002aeddfd6c5563c" category="summary">在部署 Astra Trident 之前，您必须在主机上安装和配置必要的协议前提条件。</block>
  <block id="782bd8949cb40c80fd3f3126eccab35a" category="doc">部署的前提条件</block>
  <block id="b4851e92b19af0c5c82447fc0937709d" category="inline-link-macro">要求</block>
  <block id="d46ecc35447a8c17ef014ff6daf07bba" category="inline-link">安装或更新它</block>
  <block id="1035fa0ac2c3ed19f6ba56cafe7e121f" category="list-text">验证您是否安装了受支持的 Docker 版本。如果您的 Docker 版本已过时，<block ref="0b011811ae105895ca4da9769d7e6f99" category="inline-link-rx"></block>。</block>
  <block id="7760c52227ccba10f5bc395571ca7a60" category="list-text">验证是否已在主机上安装和配置协议前提条件：</block>
  <block id="0e9e734e557a02db30a20e5ac259cfb9" category="summary">每个存储驱动程序都有一组不同的选项，您可以在创建卷时指定这些选项来自定义结果。有关适用于您配置的存储系统的选项，请参见以下内容。</block>
  <block id="11e1b165c1d718d825f4bb9aaf0b884e" category="doc">驱动程序专用的卷选项</block>
  <block id="bca0712c590c8d3c228bf1044aed730b" category="paragraph">在卷创建操作期间使用这些选项非常简单。在命令行界面操作期间，使用 ` -o` 运算符提供选项和值。这些参数将覆盖 JSON 配置文件中的任何等效值。</block>
  <block id="6021d91bdededf94b8ae37c30e820118" category="section-title">ONTAP 卷选项</block>
  <block id="16dc9caa069072a49db7ea7c81a7cf66" category="paragraph">NFS 和 iSCSI 的卷创建选项包括以下内容：</block>
  <block id="054b4f3ea543c990f6b125f41af6ebf7" category="cell">选项</block>
  <block id="d3a07c97b6050b305c7dda0aea1657be" category="paragraph">卷的大小默认为 1 GiB 。</block>
  <block id="69e8c7b4f73d39cea9948875813f7ddd" category="paragraph">精简或厚配置卷，默认为精简。有效值为 `none` （精简配置）和 `volume` （厚配置）。</block>
  <block id="91853d7e2338a1395280185fc93d4650" category="paragraph">此操作会将 Snapshot 策略设置为所需的值。默认值为 `none` ，表示不会自动为卷创建快照。除非存储管理员修改，否则所有 ONTAP 系统上都存在一个名为 "defaultion" 的策略，该策略会创建并保留六个每小时快照，两个每日快照和两个每周快照。通过浏览到卷中任意目录中的 ` .snapshot` 目录，可以恢复快照中保留的数据。</block>
  <block id="b8a0fde33bd7662b7b9cb4158f04ef52" category="paragraph">此操作会将快照预留设置为所需百分比。默认值为 no 值，这意味着如果您选择了 snapshotPolicy ， ONTAP 将选择 snapshotReserve （通常为 5% ）；如果 snapshotPolicy 为 none ，则选择 0% 。您可以在配置文件中为所有 ONTAP 后端设置默认 snapshotReserve 值，并可将其用作除 ontap-nas-economy. 以外的所有 ONTAP 后端的卷创建选项。</block>
  <block id="cdaf246fba737b75127faa65456baa30" category="paragraph">设置要用于卷的分层策略。这将决定数据在变为非活动状态（冷）时是否移至云层。</block>
  <block id="1c46d85ab16f6b373409ad15260b1b0a" category="paragraph">以下附加选项适用于 NFS * 仅 * ：</block>
  <block id="ce46e8f3fc6eaddbe03115e0d62090ac" category="cell">`unixPermissions`</block>
  <block id="b145a4acc7a577d843f538580013776b" category="paragraph">此选项用于控制为卷本身设置的权限。默认情况下，权限将设置为 `` -rwrxr-xr-x` ，或以数字表示法 0755 表示，并且 `root` 将为所有者。文本或数字格式均可使用。</block>
  <block id="e59001176f4360988f5d774a8405b4b9" category="cell">`exportPolicy`</block>
  <block id="700d608597316c75fc869190f51cff49" category="paragraph">设置要用于卷的导出策略。默认值为 `default` 。</block>
  <block id="6b068a846d408b1d9ccd2c7220326b9d" category="paragraph">设置用于访问卷的安全模式。默认值为 `UNIX` 。有效值为 `UNIX` 和 `mi 已加传真` 。</block>
  <block id="842aac52866a44b40a5733ce352cf6df" category="paragraph">以下附加选项适用于 iSCSI * 仅 * ：</block>
  <block id="3184b1a9846944fabb00496c4b6b613a" category="cell">`fileSystemType`</block>
  <block id="56efcdcb9168adcb146b4d86bf55e99d" category="cell">设置用于格式化 iSCSI 卷的文件系统。默认值为 `ext4` 。有效值为 `ext3` ， `ext4` 和 `xfs` 。</block>
  <block id="ff7c0fcd6a31e735a61c001f75426961" category="section-title">示例</block>
  <block id="9e6d454a094b92b0132e48d2369debf5" category="paragraph">请参见以下示例：</block>
  <block id="be1e1c94a5fc3bb66c2ae9425eeefbdb" category="list-text">创建 10 GiB 卷：</block>
  <block id="a6490f19f59ecd8e4ed8634990ea366c" category="list-text">创建具有快照的 100GiB 卷：</block>
  <block id="297d0d2fcc555e5037c8d251daf5a620" category="list-text">创建启用了 setuid 位的卷：</block>
  <block id="6e31a0481f4f7e423abcde0bf31025c8" category="paragraph">最小卷大小为 20MiB 。</block>
  <block id="a65684b0a191599ad968126dd65f2e9d" category="paragraph">如果未指定快照预留且快照策略为 `none` ，则 Trident 将使用 0% 的快照预留。</block>
  <block id="8c05fd71822bf85c290cef86db959f68" category="list-text">创建无快照策略且无快照预留的卷：</block>
  <block id="d15d662af6e4417b0b7c134a84ed577c" category="list-text">创建一个无快照策略且自定义快照预留为 10% 的卷：</block>
  <block id="52a56a468f11c3298931c8e32c938e15" category="list-text">创建具有快照策略和 10% 自定义快照预留的卷：</block>
  <block id="0a77fdb1c16069c98ebe6510137af9d2" category="list-text">使用快照策略创建卷，并接受 ONTAP 的默认快照预留（通常为 5% ）：</block>
  <block id="f6f813eaaff2b296a27b6bf051485d2b" category="section-title">Element 软件卷选项</block>
  <block id="a514753df071ac540af065b659d1c65c" category="paragraph">Element 软件选项会显示与卷关联的大小和服务质量（ QoS ）策略。创建卷时，将使用 ` -o type=service_level` 命名空间指定与其关联的 QoS 策略。</block>
  <block id="f201e088f13d93e3d12b3c0ef78dece3" category="paragraph">使用 Element 驱动程序定义 QoS 服务级别的第一步是至少创建一种类型，并指定与配置文件中的名称关联的最小，最大和突发 IOPS 。</block>
  <block id="5cb7e4a4b6a51af0b5b09cb230b83422" category="paragraph">其他 Element 软件卷创建选项包括：</block>
  <block id="8730c4572b866ffc01a4aefebc896555" category="paragraph">卷的大小，默认为 1GiB 或配置条目 ... " 默认值 " ： ｛ "size" ： "5c" ｝ 。</block>
  <block id="d52146098b8ecd83b888289a86e26d19" category="cell">`块大小`</block>
  <block id="348ef18ccca06aa29547bd9ad87beebe" category="paragraph">使用 512 或 4096 ，默认为 512 或配置条目 DefaultBlockSize 。</block>
  <block id="1daf1c12549d6d3ae75c4d8d5f59d532" category="paragraph">请参见以下包含 QoS 定义的示例配置文件：</block>
  <block id="7afe0c73e341cee7c90b4d4dda4600d9" category="paragraph">在上述配置中，我们有三个策略定义：铜牌，银牌和金牌。这些名称是任意的。</block>
  <block id="cb5b68dacb07bd02a5152bf4ad1de8c6" category="list-text">创建 10 GiB 黄金卷：</block>
  <block id="89014c611c13195dc852587ef9d2bb16" category="list-text">创建 100GiB 铜牌卷：</block>
  <block id="fc96768681dcf6770119445ffe2537cd" category="summary">要创建卷，请根据需要使用标准的 `docker volume` 命令以及指定的 Astra Trident 驱动程序名称。</block>
  <block id="feabbbf9b5afb31194daf0d8e3ff75dc" category="doc">使用卷</block>
  <block id="00e5ed77f92b42f144be7dfb7106bf10" category="paragraph">您可以根据需要使用标准的 `docker volume` 命令以及指定的 Astra Trident 驱动程序名称轻松创建，克隆和删除卷。</block>
  <block id="dc88dce8ec264777b2f90ec0af744f43" category="section-title">创建卷</block>
  <block id="a32b09b1335e0afbb640a9412690680d" category="list-text">使用默认名称创建包含驱动程序的卷：</block>
  <block id="8b5708fe1297b9ca8b3be5b99bf29407" category="list-text">使用特定的 Astra Trident 实例创建卷：</block>
  <block id="93da65a9fd0004d9477aeac024e08e15" category="inline-link-macro">选项</block>
  <block id="593e5c95e1adc19e8d81719c16b57bc1" category="admonition">如果未指定任何 <block ref="3a0a40f90bfa29e0eb23418c553e5ef5" category="inline-link-macro-rx"></block>，将使用驱动程序的默认值。</block>
  <block id="1e1e2461d5dfd51f1ebd0eadcba142f4" category="list-text">覆盖默认卷大小。要使用驱动程序创建 20GiB 卷，请参见以下示例：</block>
  <block id="5149eec9d959a54cf392efaa710541d1" category="admonition">卷大小以字符串表示，该字符串包含一个包含可选单元的整数值（例如： 10 G ， 20 GB ， 3 TiB ）。如果未指定单位，则默认值为 G大小单位可以表示为 2 的幂（ B ， KiB ， MIB ， GiB ， TiB ）或 10 的幂（ B ， KB ， MB ， GB ， TB ）。速率单位使用 2 的电流（ G = GiB ， T = TiB ，…）。</block>
  <block id="9bc129eac7adf7ea5d8ed1c021fab2dc" category="section-title">删除卷</block>
  <block id="281a0f40363a276c6ec125244c784112" category="list-text">像删除任何其他 Docker 卷一样删除此卷：</block>
  <block id="7959e3701f7a7fba7713c7530d496324" category="admonition">使用 `solidfire-san` 驱动程序时，上述示例将删除并清除卷。</block>
  <block id="5a1345d94751fc14bedf8f6f5e77a0ff" category="paragraph">执行以下步骤以升级适用于 Docker 的 Astra Trident 。</block>
  <block id="d50044469c0bf9ab38eff9cf7243fb25" category="section-title">克隆卷</block>
  <block id="9374b766b9dd78063440afd69afabf38" category="list-text">检查卷以枚举快照：</block>
  <block id="2747096689037792fa87de7a0e8440e2" category="list-text">从现有卷创建新卷。这将导致创建新快照：</block>
  <block id="31d9b5ed201aa44dbeae6d17d38c0c6f" category="list-text">从卷上的现有快照创建新卷。此操作不会创建新快照：</block>
  <block id="516b30a46da41c6969cb7249d6567905" category="section-title">访问外部创建的卷</block>
  <block id="d8c20bb137be94fec8295c3fc5175b54" category="paragraph">如果容器没有分区，并且 Astra Trident 支持其文件系统（例如： A `ext4` 格式的 ` /dev/sdc1` 将无法通过 Astra Trident 访问），则可以使用 Trident * only * 通过容器访问外部创建的块设备（或其克隆）。</block>
  <block id="4cfa22b281cbd36e1a275d61ec23a9b4" category="summary">您可以收集日志以帮助进行故障排除。收集日志的方法因运行 Docker 插件的方式而异。</block>
  <block id="fe1786b49549e8e06a89b9c57d7fc514" category="doc">收集日志</block>
  <block id="83f4d02d2dd31f09291e098bf4ae502b" category="list-text">如果您使用建议的受管插件方法（例如，使用 `docker plugin` 命令）运行 Astra Trident ，请按如下所示查看它们：</block>
  <block id="c28722abec5c1daefa02916119bbff91" category="list-text">要启用调试日志记录，请安装启用了调试日志记录的插件：</block>
  <block id="b142025dd533fb27bf7df1a93c55e311" category="paragraph">或者，在已安装插件的情况下启用调试日志记录：</block>
  <block id="2aa0797ce5da04d1c6f027c9b3276483" category="section-title">一般故障排除提示</block>
  <block id="94d799ff06bdb0aedb7b64151dac73d7" category="list-text">新用户遇到的最常见问题是配置不当，导致插件无法初始化。如果发生这种情况，在尝试安装或启用插件时，您可能会看到如下消息：</block>
  <block id="fe6b4529e706ebc0f7e3668d3230d029" category="paragraph">`守护进程的错误响应：拨打 unix /run/docker/plugins/&lt;id&gt;/netapp.sock ： connect ： no such file or directory`</block>
  <block id="3d924bd43304301ed127cbbd303a4fa6" category="paragraph">这意味着插件无法启动。幸运的是，该插件已构建了全面的日志记录功能，可以帮助您诊断可能遇到的大多数问题。</block>
  <block id="79c820c2d64495c47651e58e73f97294" category="list-text">如果在将 PV 挂载到容器时出现问题，请确保 `rpcbind` 已安装并正在运行。对主机操作系统使用所需的软件包管理器，并检查 `rpcbind` 是否正在运行。您可以通过运行 `systemctl status rpcbind` 或其等效项来检查 rpcbind 服务的状态。</block>
  <block id="2358ca3eef46b0e25466e80dbea7ea4b" category="summary">请参见适用于您的 Astra Trident 配置的配置选项。</block>
  <block id="34e1f7eb303c0a150cd440611b3b5e24" category="doc">存储配置选项</block>
  <block id="51f834b47bcd78a0f4f40fd8ca40446f" category="section-title">全局配置选项</block>
  <block id="b22d82aea9557ba6aa7b915d40309d9b" category="paragraph">这些配置选项适用于所有 Astra Trident 配置，而不考虑所使用的存储平台。</block>
  <block id="63b276a6c28274ed5e553d4ce3fe7eb1" category="paragraph">配置文件版本号</block>
  <block id="ac5eb8fcbd1ed9c85a98d91e10e26a38" category="paragraph">存储驱动程序的名称</block>
  <block id="3eed2a7dac1f2329f3a9574a68e5e1c4" category="admonition">请勿对元素后端使用 `storagePrefix` （包括默认值）。默认情况下， `solidfire-san` 驱动程序将忽略此设置，而不使用前缀。我们建议使用特定的租户 ID 进行 Docker 卷映射，或者在可能已使用任何名称的情况下使用 Docker 中填充的 Docker 版本，驱动程序信息和原始名称的属性数据。</block>
  <block id="0863f9e97e159e3ea1ce46bdb49b1254" category="paragraph">您可以使用默认选项来避免在创建的每个卷上指定这些选项。`s` 选项适用于所有控制器类型。有关如何设置默认卷大小的示例，请参见 ONTAP 配置一节。</block>
  <block id="0353522b39b87d54d40d3f09ec668851" category="section-title">ONTAP 配置</block>
  <block id="cd536bce1bed61366e8d17a85fe6678a" category="paragraph">除了上述全局配置值之外，在使用 ONTAP 时，还可以使用以下顶级选项。</block>
  <block id="464779f3491153dd1e79ddbd8a81e3f0" category="paragraph">ONTAP 管理 LIF 的 IP 地址。您可以指定完全限定域名（ FQDN ）。</block>
  <block id="11053eb2b6ac6e8802c67c054cf55ad9" category="paragraph">要使用的 Storage Virtual Machine （如果管理 LIF 为集群 LIF ，则为必填项）</block>
  <block id="723a179bbb9fc3c4f12cf296a8841b27" category="paragraph">用于连接到存储设备的用户名</block>
  <block id="8cf10281cf3b9290d5988c57a7d19693" category="paragraph">用于连接到存储设备的密码</block>
  <block id="7e6d207f2b120c6cc9caa98510aa51c6" category="cell">`聚合`</block>
  <block id="ac53191a99c328660eafa4696375dbfb" category="paragraph">要配置的聚合（可选；如果设置了聚合，则必须将其分配给 SVM ）。对于 `ontap-nas-flexgroup` 驱动程序，此选项将被忽略。分配给 SVM 的所有聚合都用于配置 FlexGroup 卷。</block>
  <block id="925060a0c0a15f99ef1bee43f1660ea4" category="paragraph">可选，如果使用量超过此百分比，则配置失败</block>
  <block id="876885770cf58d20ef5672cc5594e85d" category="inline-link">请参见此处的 NFS 主机配置信息</block>
  <block id="0a19ca3d1db7e5bc24b58f73b91c3f49" category="paragraph">对 NFS 挂载选项进行精细控制；默认为 -o nfsver=3 。* 仅适用于 `ontap-nas` 和 `ontap-nas- 经济` 驱动程序 * 。<block ref="71f7a3f48cfd3876cffba401813b7db0" category="inline-link-rx"></block>。</block>
  <block id="5c5adadf8175fd69d4af9bfdb608c42c" category="paragraph">可请求的最大卷大小和 qtree 父卷大小。* 对于 `ontap-nas-economy` 驱动程序，此选项还会限制其创建的 FlexVol 的大小 * 。</block>
  <block id="981ba910eb0ffc42f42059de056624b4" category="paragraph">每个 FlexVol 的最大 qtree 数必须在 50 ， 300 范围内，默认值为 200 。* 对于 `ontap-nas-economy` 驱动程序，此选项允许自定义每个 qtree* 的最大 FlexVol 数。</block>
  <block id="3890063556e337d458019437f027030b" category="paragraph">您可以使用默认选项来避免在创建的每个卷上指定这些选项：</block>
  <block id="b326b5062b2f0e69046810717534cb09" category="paragraph">true</block>
  <block id="90adf331b7868c7af46ad6e035e93844" category="section-title">扩展选项</block>
  <block id="493a6606c4789fad3c7317b99cb563d0" category="paragraph">`ontap-nas` 和 `ontap-san` 驱动程序会为每个 Docker 卷创建一个 ONTAP FlexVol 。对于每个集群节点， ONTAP 最多支持 1000 个 FlexVol ，而集群最多支持 12 ， 000 个 FlexVol 。如果您的 Docker 卷要求符合此限制，则由于 Flexvol 提供的其他功能（例如 Docker 卷粒度快照和克隆）， `ontap-NAS` 驱动程序是首选的 NAS 解决方案。</block>
  <block id="b8f30e4086b754ccaf7bd5d01d8df137" category="paragraph">如果所需的 Docker 卷数超出 FlexVol 限制所能容纳的范围，请选择 `ontap-nas-economy"` 或 `ontap-san-economy"` 驱动程序。</block>
  <block id="50710f3a4715e3f874848944b6b54e28" category="paragraph">`ontap-nas-economy` 驱动程序可在自动管理的 ONTAP 卷池中创建 Docker 卷作为 qtree 。qtree 的扩展能力远高于此，每个集群节点最多可扩展 100 ， 000 个，每个集群最多可扩展 2 ， 400 ， 000 个，但某些功能会受到影响。`ontap-nas-economy` 驱动程序不支持 Docker 卷粒度快照或克隆。</block>
  <block id="0c8b91c6c2ba9c892f3eea2cd9c86cd1" category="admonition">Docker Swarm 目前不支持 `ontap-nas-economy-经济` 驱动程序，因为 Swarm 不会在多个节点之间协调卷创建。</block>
  <block id="5849dbe631db5b1e1b365f9f2f84ff60" category="paragraph">`ontap-san-economy-driver` 可在一个由自动管理的 FlexVol 构成的共享池中将 Docker 卷创建为 ONTAP LUN 。这样，每个 FlexVol 就不会仅限于一个 LUN ，并且可以为 SAN 工作负载提供更好的可扩展性。根据存储阵列的不同， ONTAP 每个集群最多支持 16384 个 LUN 。由于卷是下面的 LUN ，因此此驱动程序支持 Docker 卷粒度快照和克隆。</block>
  <block id="65e92c8f7fa9750b795cc1046328cf06" category="paragraph">选择 `ontap-nas-flexgroup` 驱动程序可将并行性提高到单个卷，该卷可以扩展到包含数十亿个文件的 PB 范围。FlexGroup 的一些理想用例包括 AI/ML/DL ，大数据和分析，软件构建，流式传输，文件存储库等。配置 FlexGroup 卷时， Trident 会使用分配给 SVM 的所有聚合。Trident 中的 FlexGroup 支持还需要注意以下事项：</block>
  <block id="9d83b6d2e2b099e63bf8e2fc8c870893" category="list-text">需要 ONTAP 9.2 或更高版本。</block>
  <block id="e7c74973b26ad51b9db42a9c347a8cd4" category="list-text">截至本文撰写时， FlexGroup 仅支持 NFS v3 。</block>
  <block id="02a100b04add3b90fddef64499e825a2" category="list-text">建议为 SVM 启用 64 位 NFSv3 标识符。</block>
  <block id="496f8625569b787269edab0f3de973da" category="list-text">建议的最小 FlexGroup 大小为 100 GB 。</block>
  <block id="db78b2a7acf43fa03cd95fb3a77c82f9" category="list-text">FlexGroup 卷不支持克隆。</block>
  <block id="f5ac1e3c252855373c7f660dbd89699d" category="inline-link">《 NetApp FlexGroup 卷最佳实践和实施指南》</block>
  <block id="df1a7e79743809601db1d20d6a33ae52" category="paragraph">有关适用于 FlexGroup 的 FlexGroup 和工作负载的信息，请参见<block ref="b8a99695d7979127a1cab07b42e22743" category="inline-link-rx"></block>。</block>
  <block id="b30b6b60171d85877ea91897bdd6faed" category="paragraph">要在同一环境中获得高级功能并实现大规模扩展，您可以运行多个 Docker 卷插件实例，其中一个使用 `ontap-NAS` ，另一` 个使用 `ontap-nas-economy.</block>
  <block id="0c0f6724044ed44fb85d2ce3193cb7c3" category="section-title">ONTAP 配置文件示例</block>
  <block id="9420b5e8ed08a163eeafb1d5026f74be" category="paragraph">`ontap-nas` driver* 的 * NFS 示例</block>
  <block id="c26e7b2e60e156979940cd72ed83d0b9" category="paragraph">`ontap-nas-flexgroup` driver* 的 * NFS 示例</block>
  <block id="3a57e82fd5f9855754a03019c433aff7" category="paragraph">`ontap-nas-economy` driver* 的 * NFS 示例</block>
  <block id="2bfad97b56e71c619e45f6d4c2e4c2e2" category="paragraph">`ontap-san` driver* 的 * iSCSI 示例</block>
  <block id="98f803effb81ad687bcd941b70439aaa" category="paragraph">`ontap-san-economy-driver` 的 * NFS 示例</block>
  <block id="ffe54c343031d16e77db73e2d950e277" category="section-title">Element 软件配置</block>
  <block id="3afcd136a7bffa20fc39ba6581412cd2" category="paragraph">除了全局配置值之外，在使用 Element 软件（ NetApp HCI/SolidFire ）时，还可以使用这些选项。</block>
  <block id="c61f15977fe4efa0866eea87fb740cda" category="paragraph">iSCSI IP 地址和端口</block>
  <block id="6a6b63874c664c103982f6d422c6384e" category="paragraph">10.0.0.7 ： 3260</block>
  <block id="72deb2676231ab8e068ef60dd89edd4c" category="paragraph">要使用的 SolidFireF 租户（如果未找到，则创建）</block>
  <block id="d2672389886b173aef703433f7e4b89b" category="paragraph">将 iSCSI 流量限制为非默认接口时，请指定接口</block>
  <block id="5935dcd024929bc7086bb230802bf576" category="paragraph">请参见以下示例</block>
  <block id="5e9bf55f849ccc5a31a50d1fa784d28c" category="cell">`LegendPrefix`</block>
  <block id="36f9c7b615268efec7f4c56c387a55bb" category="paragraph">`solidfire-san` 驱动程序不支持 Docker Swarm 。</block>
  <block id="1059bb8540c48e6b455e802384bad65d" category="section-title">Element 软件配置文件示例</block>
  <block id="1a269fb3ec0496720ca75e984d8de40e" category="cell">`hostProjectNumber`</block>
  <block id="1631dca111b8c1a922c7f29d48eb7121" category="cell">`网络`</block>
  <block id="2c07e9234f0df0d4c8887a04f7e641fe" category="paragraph">应用程序注册中的客户端 ID</block>
  <block id="27dce2b92c5c5b89e353888e6cb24dea" category="summary">您可以安全地升级适用于 Docker 的 Astra Trident ，而不会对正在使用的卷产生任何影响。在升级过程中，指向插件的 `docker volume` 命令将在很短的时间内失败，并且应用程序将无法挂载卷，直到插件重新运行为止。在大多数情况下，这只需要几秒钟。</block>
  <block id="0350c5473efd300324aaaadeecc676d2" category="doc">升级或卸载 Astra Trident</block>
  <block id="f683581d3e75f05f9d9215f9b4696cef" category="section-title">升级</block>
  <block id="ed279061e829314cb0dc7a1708ca5e5b" category="list-text">列出现有卷：</block>
  <block id="7c256ad076320e18e087b238e9063f3f" category="list-text">禁用插件：</block>
  <block id="f4ea3e4191f5bda0b91e08059bf9842a" category="list-text">升级插件：</block>
  <block id="b2449107a206e37587b47513f76a7b27" category="admonition">Astra Trident 18.01 版取代了 nDVP 。您应直接从 `NetApp/ndvp-plugin` 映像升级到 `NetApp/trident 插件` 映像。</block>
  <block id="824ba648551a27da6c43705bcd663830" category="list-text">启用插件：</block>
  <block id="e4c48899ce42f4eb019f54a1a8e66560" category="list-text">验证是否已启用此插件：</block>
  <block id="c4d884c606b57bb6cb43864e3499d5a2" category="list-text">验证卷是否可见：</block>
  <block id="103e515a078c6f2419abc4c84554d67c" category="admonition">如果要从旧版本的 Astra Trident （ 20.10 之前的版本）升级到 Astra Trident 20.10 或更高版本，则可能会遇到错误。有关详细信息，请参见 <block ref="6d21ff1c2708107ac3f4ed1a6e27b449" category="inline-link-macro-rx"></block>。如果遇到此错误，应先禁用此插件，然后删除此插件，然后通过传递一个额外的配置参数来安装所需的 Astra Trident 版本： `docker plugin install netapp/trident plugin ： 20.10 —— alias netapp — -grant-all-permissions config.json`</block>
  <block id="a27dfe771799a09fd55fea73286eb6ab" category="section-title">卸载</block>
  <block id="7578be09dc225364649898a30619a336" category="paragraph">执行以下步骤卸载适用于 Docker 的 Astra Trident 。</block>
  <block id="867d93c3d1de0e8e75fa408cfadcbba5" category="list-text">删除插件创建的所有卷。</block>
  <block id="4a28a108f39c07ac09218644ca6e9bb0" category="list-text">删除插件：</block>
  <block id="c412f3b9b270250331aa1ef4102ef8c1" category="summary">如果您希望同时提供多个存储配置，则需要多个 Astra Trident 实例。多个实例的关键在于，在主机上实例化 Trident 时，使用 -alias 选项和容器化插件或 -volume-driver 选项为其提供不同的名称。</block>
  <block id="4f07a71d2e33da91dec1396b7a204a40" category="doc">管理多个 Astra Trident 实例</block>
  <block id="8f327f2ceda84404290184a7454160ed" category="paragraph">如果希望同时提供多个存储配置，则需要多个 Trident 实例。多个实例的关键在于，在主机上实例化 Trident 时，使用容器化插件的 ` -alias` 选项或 ` -volume-driver` 选项为其提供不同的名称。</block>
  <block id="52ef1c6ffefaba3249f208369424635d" category="section-title">Docker 托管插件（ 1.13/17.03 或更高版本）的步骤</block>
  <block id="547c4a5f7c863aad85f5265c03ed72ea" category="list-text">启动指定别名和配置文件的第一个实例。</block>
  <block id="991ac134f22efa2bb955362d95827ae5" category="list-text">启动第二个实例，指定其他别名和配置文件。</block>
  <block id="aa0dc0ac69e69c434317798e1aa9842b" category="list-text">创建将别名指定为驱动程序名称的卷。</block>
  <block id="5ae25a45ab76de161f87fc41a84f746d" category="paragraph">例如，对于黄金卷：</block>
  <block id="6dab7c53f6e3de2eae52e928dfe5b861" category="paragraph">例如，对于银牌卷：</block>
  <block id="67754cb209925946943e297b3a8be344" category="section-title">传统（ 1.12 或更早版本）的步骤</block>
  <block id="cbd128765e82966ed5e454a99b22e688" category="list-text">使用自定义驱动程序 ID 启动具有 NFS 配置的插件：</block>
  <block id="51c923daa4caf6aea6d24201b73871b6" category="list-text">使用自定义驱动程序 ID 启动具有 iSCSI 配置的插件：</block>
  <block id="dd72ade865d731ba8f6a6fc4c8ccd86f" category="list-text">为每个驱动程序实例配置 Docker 卷：</block>
  <block id="8e2044cc9d4e8f515ad4809a68d75465" category="paragraph">例如，对于 NFS ：</block>
  <block id="d39eb6e4299503c5d451d19b9645be42" category="paragraph">例如，对于 iSCSI ：</block>
  <block id="c2bccf4258de19dd1e03e25f66d80f98" category="summary">查找有关将 Astra Trident 与 Docker 结合使用时的已知问题的信息。</block>
  <block id="3a3b7ac2e39541ea05707ccd6eb054d4" category="doc">已知问题和限制</block>
  <block id="ba6bb78ba304725781af9e773f1957e2" category="paragraph">查找有关将 Astra Trident 与 Docker 结合使用时的已知问题和限制的信息。</block>
  <block id="8bb35988eac5a841d2af092365f1aa42" category="section-title">将 Trident Docker 卷插件从旧版本升级到 20.10 及更高版本会导致升级失败，并且不会显示此类文件或目录错误。</block>
  <block id="7aebfa1e2291377e040de92d7f7f335f" category="list-title">临时解决策</block>
  <block id="f49f11bc5398ac13e500d16eac424e77" category="list-text">禁用插件。</block>
  <block id="cc3dae6dd6670606c41c62b10273605e" category="list-text">删除此插件。</block>
  <block id="6010901b5c4bb6ad671e6f07fcc038d8" category="list-text">通过提供额外的 `config` 参数来重新安装插件。</block>
  <block id="e527ab8c1c51767e38a3603d51d2d6e5" category="section-title">卷名称的长度必须至少为 2 个字符。</block>
  <block id="45c9df594d13c8a5e5472503d5f14b01" category="inline-link">请参见错误 25773</block>
  <block id="c167efd138e06a8ee59885983c5ddf69" category="admonition">这是 Docker 客户端的限制。客户端会将单个字符名称解释为 Windows 路径。<block ref="f082f49b923960d888c1d98a1e9f4fcb" category="inline-link-rx"></block>。</block>
  <block id="3c4f022a33d4aace82350c9966fa238b" category="section-title">Docker Swarm 的某些行为会阻止 Astra Trident 在每个存储和驱动程序组合中为其提供支持。</block>
  <block id="a7c3ff464b1ef4364de4df03d66bee5e" category="list-text">Docker Swarm 目前使用卷名称而非卷 ID 作为其唯一卷标识符。</block>
  <block id="61ab6f5cff8de89cba95d9e3bbc4ff71" category="list-text">卷请求会同时发送到 Swarm 集群中的每个节点。</block>
  <block id="521e51548c3f7c96e72d432edf4af42d" category="list-text">卷插件（包括 Astra Trident ）必须在 Swarm 集群中的每个节点上独立运行。由于 ONTAP 的工作方式以及 `ontap-NAS` 和 `ontap-san` 驱动程序的工作方式，它们恰好是唯一能够在这些限制范围内运行的驱动程序。</block>
  <block id="69418caf7b92279073f695612c68de99" category="paragraph">其余驱动程序可能会受到诸如争用情况等问题的影响，这些问题可能会导致为单个请求创建大量卷，而无需明确的 " 赢家 " ；例如， Element 具有一项功能，允许卷具有相同的名称，但 ID 不同。</block>
  <block id="48cbf13b390ff021b130d5f372147af5" category="paragraph">NetApp 已向 Docker 团队提供反馈，但没有任何迹象表明将来可以采用。</block>
  <block id="29cff148f43bc689eb14447b333f6f83" category="section-title">如果要配置 FlexGroup ，则在第二个 FlexGroup 具有一个或多个与要配置的 FlexGroup 相同的聚合时， ONTAP 不会配置第二个 FlexGroup 。</block>
  <block id="d327e8f24b63b83e091dccdc48dd7b1b" category="sidebar">Astra Trident 文档</block>
  <block id="7d0ee6fed10d3d4e5c9ee496729ab519" category="sidebar">发行说明</block>
  <block id="93168a8084b3e838d2932c4734bd234e" category="sidebar">早期版本</block>
  <block id="312b0dc38b01ff32c1b2f5f81ee1ab2d" category="sidebar">使用 Trident 操作员进行部署</block>
  <block id="e0e3d7f1aacdf4a8196132549709430c" category="sidebar">使用 tridentctl 进行部署</block>
  <block id="6a693eb5cd23e4e5743663c7edc37aed" category="sidebar">部署适用于 Docker 的 Astra Trident</block>
  <block id="386307d41b3f4169a1e6e046a727cdd2" category="sidebar">使用 Trident 操作员进行升级</block>
  <block id="2a21586f7990f8cb0f8951cd2ef7bc3b" category="sidebar">使用 tridentctl 进行升级</block>
  <block id="eb1f347fa6176ae2c9175df3bc414954" category="sidebar">使用 Astra Trident</block>
  <block id="a8e174c63ac21920b8405ffddc39214a" category="sidebar">使用 kubectl 创建后端</block>
  <block id="81a123ccab93cd947289b672b0e50348" category="sidebar">演示教程</block>
  <block id="28348a71bed382b86fa6de4d3a307715" category="sidebar">Astra Trident 视频</block>
  <block id="813011e2103649bb71f124adedcc10ea" category="sidebar">博客社区</block>
  <block id="6394eceb2639574114b02e6e817eb19a" category="sidebar">Astra 博客</block>
  <block id="874d8a5301794a9ca2aba132ac2460f3" category="sidebar">Kubernetes Hub</block>
  <block id="d59c00abbeaf33a9a094b3a69c563405" category="sidebar">netapp.io</block>
  <block id="63d5049791d9d79d86e9a108b0a999ca" category="sidebar">参考</block>
  <block id="324fb1352ffffb105d10013810c42896" category="sidebar">Kubernetes 和 Astra Trident 对象</block>
  <block id="a20f982d79c3dd66d244ffe0f7d940ee" category="sidebar">最佳实践和建议</block>
  <block id="c91cf7abea9584bc1edbc8ff4948ada0" category="sidebar">Astra Trident 集成</block>
  <block id="0460583622f03a52d7693094d6fa2452" category="sidebar">概念</block>
  <block id="bbe2bfefd5797bb567e3da92f68ce8d1" category="sidebar">自定义 tridentctl 部署</block>
  <block id="58eaebf972358f1cf03d386a4ade1a0f" category="sidebar">下一步是什么？</block>
  <block id="bffb766af67c15f14cae35f03dd6f4a9" category="sidebar">使用 kubectl 执行后端管理</block>
  <block id="748a22b5f1312291ad55429ba4b809a0" category="sidebar">使用 tridentctl 执行后端管理</block>
  <block id="f14894e4c400a400c02367258a93029a" category="sidebar">适用于 Docker 的 Astra Trident</block>
  <block id="e08bfc79c5202517b3814efd6e82fb2c" category="sidebar">升级或卸载 Trident</block>
  <block id="05d68d1b7214c73141ed12aaed0c2ab5" category="list-text">如果 Trident 日志中的信息不足，您可以根据安装选项将 ` -d` 标志传递到 install 参数，尝试为 Trident 启用调试模式。</block>
  <block id="bc6de9cad530a57dba08ff711f4a6b5f" category="paragraph">然后，使用 ` ./tridentctl logs -n trident` 并在日志中搜索 `level=debug msg` 来确认是否设置了调试。</block>
  <block id="8e95ae46f32b05cf983c93e608530e36" category="list-text">随操作员一起安装</block>
  <block id="6a304a6cf7cd8c90bac892ab0fb9c134" category="paragraph">对于 Astra Trident 20.07 和 20.10 ，请使用 `tprov` 代替 `Torc` 。</block>
  <block id="79b91d0489c081de6794796638793787" category="list-text">随 Helm 一起安装</block>
  <block id="d356d628089d439d75e3f85564372658" category="list-text">使用 tridentctl 安装</block>
  <block id="433f174b6e54b889696b2efd4ef40dc6" category="admonition">可以将 Trident REST 接口配置为仅以 127.0.0.1 （对于 IPv4 ）或（：： 1 ）（对于 IPv6 ）侦听和提供服务。</block>
  <block id="b89df534de66f446ec6482f9d7898bb2" category="cell">`控制器插件节点选择器`</block>
  <block id="8d414af35aeb82413205fa45551a5545" category="cell">无默认值；可选</block>
  <block id="df1f367efe879ec0030f43610e29c5af" category="cell">`控制器插件公差`</block>
  <block id="47a441037628a3c0f0edb0daccb33f99" category="cell">`nodePluginNodeSelector`</block>
  <block id="f297db5a937924105908a365d9d4c4ff" category="cell">`nodePluginTholeations`</block>
  <block id="4352a1b4e004cf57ac04661a18de43aa" category="inline-link-macro">将 Pod 分配给节点</block>
  <block id="b3b67fd79d24b4873c8164c750c21798" category="admonition">有关格式化 POD 参数的详细信息，请参见 <block ref="7b3a69fdac08c769183925679da4c365" category="inline-link-macro-rx"></block>。</block>
  <block id="bb453665f57f6823950856f7a9bad0c3" category="inline-link-macro">Astra 产品系列</block>
  <block id="d13de4a83d7b44c2e65495def8ef1c7b" category="section-title">有关详细信息 ...</block>
  <block id="fa80e31eb77798b8dd995ddd9553be6e" category="inline-link">NetApp Astra 产品系列</block>
  <block id="ef22ff17624b3faeed227ce5c717eb5f" category="inline-link">Astra Control Service 文档</block>
  <block id="0ae0ea6967e9321db008cee4ad5f290c" category="list-text"><block ref="0ae0ea6967e9321db008cee4ad5f290c" category="inline-link-rx"></block></block>
  <block id="3a4b2c66d4bdac6ce0e3340c71a39eda" category="inline-link">Astra 控制中心文档</block>
  <block id="ea643bf7aaf130341a17f697a7009368" category="list-text"><block ref="ea643bf7aaf130341a17f697a7009368" category="inline-link-rx"></block></block>
  <block id="9d6ffa6ef31bd0b92876314219f18ef5" category="inline-link">Astra API 文档</block>
  <block id="9c2cf0e947812ecb3fc0bfccaa8b3c61" category="list-text"><block ref="9c2cf0e947812ecb3fc0bfccaa8b3c61" category="inline-link-rx"></block></block>
  <block id="a93e9e44b7a375a4236260f5ff2b251e" category="inline-link">Astra Trident 21.07</block>
  <block id="3830d427e146a8a64454dc373d9b1502" category="list-text"><block ref="3830d427e146a8a64454dc373d9b1502" category="inline-link-rx"></block></block>
  <block id="af7c8216a3289efe1a298a19c00b8b8c" category="section-title">已测试主机操作系统</block>
  <block id="57b3e1695eb7d16642702fbce3837b86" category="paragraph">默认情况下， Astra Trident 在容器中运行，因此将在任何 Linux 工作程序上运行。但是，根据您使用的后端，这些员工需要能够使用标准 NFS 客户端或 iSCSI 启动程序挂载 Astra Trident 提供的卷。</block>
  <block id="681d715b456f6d29a501b8f132e941a1" category="cell">v1.22.0</block>
  <block id="c0227cef6f07a8cd2ac72f2945b031aa" category="section-title">开放源代码</block>
  <block id="0172b29a9f5d94dc62ee592a98183f3b" category="paragraph">您可以在每个版本的通知文件中查看用于 Astra Trident 的 NetApp 软件中使用的第三方版权和许可证<block ref="4a3c8c5a408c6db1c44c04391a8a0a2f" category="inline-link-rx"></block>。</block>
  <block id="29db8b676d0a02f8179869506102c8ce" category="doc">使用 ONTAP 或 Cloud Volumes ONTAP SAN 驱动程序配置后端</block>
  <block id="133184f8c608809bdc057abf1397d10d" category="paragraph">了解如何使用 ONTAP 和 Cloud Volumes ONTAP SAN 驱动程序配置 ONTAP 后端。</block>
  <block id="75419edaab27be09afdb3415e83d93f6" category="paragraph">`sudo mpathconf -enable -for_multipathd y -find_multipaths n`</block>
  <block id="60c268e00db3206011b54b01705d7211" category="admonition">确保 `detc/multipath.conf` contains `find_multipaths no` under` efaults `.</block>
  <block id="b85c80e2af7e3d7dd06b874ed048d430" category="paragraph">`sUdo tee /etc/multipath.conf &lt;&lt;-'EOF' defaults ｛ user_friendly_names yes find_multipaths no ｝ eOF sudo systemctl enable -now multipath-tools.service sudo service multipath-tools restart`</block>
  <block id="a3610578ce54198653d7e0b2cc53c05d" category="inline-link-macro">使用 ONTAP 或 Cloud Volumes ONTAP NAS 驱动程序配置后端</block>
  <block id="f4f833852bac4217eff92d53c1bd24dc" category="list-text"><block ref="f4f833852bac4217eff92d53c1bd24dc" category="inline-link-macro-rx"></block></block>
  <block id="df7d9b009cdb0a2623872cb3f905e161" category="list-text"><block ref="df7d9b009cdb0a2623872cb3f905e161" category="inline-link-macro-rx"></block></block>
  <block id="4d80e2460d711b841338dfbeea2ca8c1" category="paragraph">了解如何使用 ONTAP 和 Cloud Volumes ONTAP NAS 驱动程序配置 ONTAP 后端。</block>
  <block id="9d4568c009d203ab10e33ea9953a0264" category="cell">""</block>
  <block id="7072ec708b0ea7e3243747d8b79c0d20" category="admonition">如果要从先前的任何 Trident 版本升级并使用 Azure NetApp Files ，则 ``location`` config 参数现在是一个必填字段。</block>
  <block id="851679bec9b3e6c8e6284128fb750b1e" category="list-text">Kubernetes 增强功能：</block>
  <block id="2767b461b2b49786f390c9e0509d2d12" category="list-text">增加了对 Kubernetes 1.23 的支持。</block>
  <block id="7f10502f6f15537f180f07f0c89d2642" category="inline-link-macro">GitHub 问题描述 #651</block>
  <block id="2ff7a365e7c341f8f381cd7c2a4e15f6" category="list-text">通过 Trident 操作员或 Helm 安装 Trident Pod 时，为其添加计划选项。（<block ref="15fbe6dcd60762941b28bc5990803bde" category="inline-link-macro-rx"></block>）</block>
  <block id="90fdd892e78b26eb18a250c9c1bc19ff" category="inline-link-macro">GitHub 问题描述 #633</block>
  <block id="3ff8e54aa1f3735deb64771c4c65c420" category="list-text">在 GCP 驱动程序中允许跨区域卷。（<block ref="efd445659801b6abfdba2997e23e5f4f" category="inline-link-macro-rx"></block>）</block>
  <block id="fef8c75d6cd00955b0f1c84d40af01aa" category="inline-link-macro">GitHub 问题描述 #666</block>
  <block id="a4233200da50a08b295311036bb03ac1" category="section-title">已弃用</block>
  <block id="de6284c149d2e011da3909f1ef2af627" category="paragraph">Trident REST 接口只能在 127.0.0.1 或 [ ：：： 1 ）地址处侦听和提供服务</block>
  <block id="cdb544a92bee555749f43046d53ef34e" category="admonition">v21.10.0 版本具有一个问题描述，在删除节点并将其重新添加回 Kubernetes 集群时， Trident 控制器可以将其置于 CrashLoopBackOff 状态。此问题描述在 v21.10.1 中得到了修复（ GitHub 问题描述 669 ）。</block>
  <block id="cd1bf2431d703fd3c62a278b9c812d56" category="list-text">修复了在 GCP CVS 后端导入卷导致导入失败的潜在争用情况。</block>
  <block id="8e1e1dad95de3dc781f25f58483acdf3" category="list-text">修复了一个问题描述，在删除节点并将其重新添加回 Kubernetes 集群时，可能会将 Trident 控制器置于 CrashLoopBackOff 状态（ GitHub 问题描述 669 ）。</block>
  <block id="d7c32cb5ff2be4aaff3a8eaea9d18e0d" category="list-text">修复了在未指定 SVM 名称的情况下不再发现 SVM 的问题描述（ GitHub 问题描述 612 ）。</block>
  <block id="a55b7ee69c26277a1088efc103e15297" category="paragraph">可用的命令和全局选项包括：</block>
  <block id="94912f7fb206038e8527957b44dfbf25" category="paragraph">此操作将重新启动所有 Trident Pod ，这可能需要几秒钟的时间。您可以通过观察 `kubectl get pod -n trident` 输出中的 "age" 列来检查此问题。</block>
  <block id="73e93ad328287e5ce4c06228cfdba2bf" category="cell">v1.23.0</block>
  <block id="08ee53e1d5cefb7967a295e98036598e" category="cell">控制 .snapshot 目录的可见性</block>
  <block id="016a4b469916e37291cfe2f7fab49aaf" category="cell">`resourceGroups`</block>
  <block id="66d09fbe1165f3d10b368cbe0cc029f4" category="cell">用于筛选已发现资源的资源组列表</block>
  <block id="36cbcb8a57112362b05d06b9fe037a6e" category="cell">"[]" （无筛选器）</block>
  <block id="d4b4343f054233d7d339bb1501425fd4" category="cell">`netappAccounts`</block>
  <block id="61476ef20a8015760b9cb3c1bd0ea435" category="cell">用于筛选已发现资源的 NetApp 帐户列表</block>
  <block id="722c7b4409fa4d1fe6aaa2902ae66473" category="cell">`容量池`</block>
  <block id="225abbb59bc0bbaa2a5852ada333b31b" category="cell">用于筛选已发现资源的容量池列表</block>
  <block id="f2a5b99a63a463017b3e5f5848444d9a" category="cell">"[]" （无筛选器，随机）</block>
  <block id="91b3c29beb3641dce2fcf3d2382fac4f" category="cell">故障排除时要使用的调试标志。示例， ` \ ｛ "api" ： false ， "method ： true ， "discovery" ： true ｝` 。除非您正在进行故障排除并需要详细的日志转储，否则请勿使用此功能。</block>
  <block id="520d0db389f362bf79ef56ca0af3dcab" category="cell">格式。</block>
  <block id="dde92bca1b59f0db813ef42a2688752e" category="cell">Resource group</block>
  <block id="671e72ca3ef632233f4c27dfef1ec109" category="cell">&lt; 资源组 &gt;</block>
  <block id="ac252743de820aac9183d9f76d4bed67" category="cell">NetApp 帐户</block>
  <block id="2bf2783c6d0d867a9fe629138b38bd84" category="cell">&lt; 资源组 &gt;/&lt; NetApp 帐户 &gt;</block>
  <block id="9eea1c08013c37f1499f428378764a08" category="cell">容量池</block>
  <block id="01c656d6b97f45a90022ee307283ae01" category="cell">&lt; 资源组 &gt;/&lt; NetApp 帐户 &gt;/&lt; 容量池 &gt;</block>
  <block id="bf76cafc47141522dca89c4d6e25b822" category="cell">虚拟网络</block>
  <block id="8c9309282517a29ad09b10443d825c7c" category="cell">&lt; 资源组 &gt;/&lt; 虚拟网络 &gt;</block>
  <block id="9770c6469e9d27585d6c0c389ede7bc3" category="cell">Subnet</block>
  <block id="7addf9faaab78a084548d05b695cd2e2" category="cell">&lt; 资源组 &gt;/&lt; 虚拟网络 &gt;/&lt; 子网 &gt;</block>
  <block id="976a6dc52dbcabb541efa0a91e922604" category="cell">"" （预览功能，需要在订阅中列入白名单）</block>
  <block id="a78703e6fcb2511d5a565496df5b2082" category="section-title">示例 2 ：使用容量池筛选器的特定服务级别配置</block>
  <block id="cce172403b73af5c2a4e93081affcc7f" category="inline-link">Astra Trident 21.10</block>
  <block id="606b9e83fb467a43b3065d4fd5037094" category="list-text"><block ref="606b9e83fb467a43b3065d4fd5037094" category="inline-link-rx"></block></block>
  <block id="ee50d481128d1543f9945b4a4f3fbe9d" category="paragraph">对于带气的安装，下面列出了安装 Astra Trident 所需的容器映像。使用 `tridentctl images` 命令验证所需容器映像的列表。</block>
  <block id="ee50ce7340da5b018abe62c8e613cae0" category="summary">Astra Trident 为 Trident 流程编排程序提供了多个命令行选项，并可通过特定端口进行通信。</block>
  <block id="94efe0c9471991c69d2a3b0970a56744" category="paragraph">Astra Trident 为 Trident 流程编排程序提供了多个命令行选项。您可以使用这些选项修改部署。</block>
  <block id="6add71a247c8f4513060920be14857bc" category="cell">允许卷扩展</block>
  <block id="84e2c64f38f78ba3ea5c905ab5a2da27" category="cell">boolean</block>
  <block id="675e3f37a9adfd7ab6433906c490fa06" category="cell">启用或禁用对增加 PVC 大小的支持</block>
  <block id="c791531450eeeb073b30215d9c306a00" category="cell">1.11 及更高版本</block>
  <block id="086b513e7d83c4cf32a8bd3550679276" category="cell">卷绑定模式</block>
  <block id="fd656a4f359aa12808a6d0ceb5792342" category="cell">即时， WaitForFirstConsumer"</block>
  <block id="5e7777e1f9cfa3a93159ee44cf3f1f5a" category="cell">选择何时进行卷绑定和动态配置</block>
  <block id="8264769021597389583b0a7d1fa7e076" category="inline-link-macro">Kubernetes ：为 Pod 或容器配置安全上下文</block>
  <block id="dca8809f382a96564d64ae1525b39048" category="list-text">`FSType` 参数用于控制 SAN LUN 所需的文件系统类型。此外， Kubernetes 还会使用存储类中存在的 `FSType` 来指示文件系统已存在。只有在设置了 `FSType` 的情况下，才能使用 Pod 的 `fsGroup` 安全上下文来控制卷所有权。请参见 <block ref="7940a62969e5aeae7f6e32b04e7a11e3" category="inline-link-macro-rx"></block> 有关使用 `fsGroup` 上下文设置卷所有权的概述。只有在以下情况下， Kubernetes 才会应用 `fsGroup` 值：</block>
  <block id="6dd29ca7439e52dcf2fbc569066b3d67" category="list-text">在存储类中设置 `FSType` 。</block>
  <block id="45d2174daba36b76955e69d2eddf26ca" category="list-text">PVC 访问模式为 RW 。</block>
  <block id="ba5b62efad4f90a8f4bb806cba4a3ea4" category="paragraph">对于 NFS 存储驱动程序， NFS 导出中已存在文件系统。要使用 `fsGroup` ，存储类仍需要指定 `FSType` 。您可以将其设置为 `NFS` 或任何非空值。</block>
  <block id="368b120a3b5f53a49dc3ab96ec9b8dbd" category="paragraph">NetApp 不断改进和完善其产品和服务。以下是 Astra Trident 中的一些最新功能。对于先前版本，请参见<block ref="25da125dffad1d6323c21354bccf0203" category="inline-link-rx"></block>。</block>
  <block id="a98b2ebbcbb381d3abc81e2ecfb2054c" category="inline-link-macro">GitHub 问题描述 第 691 号</block>
  <block id="61465c1d4383dd4afdf168925e15e767" category="list-text">修复了已删除节点上的卷已取消发布的问题描述 。（<block ref="5fee6ab43e8008edba54375694a29266" category="inline-link-macro-rx"></block>）</block>
  <block id="e50f1057ba4b67b255c98fa09c5ba6f8" category="list-text">修复了访问 ONTAP API 响应中聚合空间的 " 无 " 字段时的崩溃问题。</block>
  <block id="3c72f47eeb46270dd13a77b32ec10dd3" category="list-text">* Kubernetes ： * 增加大型集群的节点注册回退重试时间。</block>
  <block id="0ef48234390855900384d0bc8a0a8a24" category="list-text">修复了问题描述 ，其中 azure-netapp-files 驱动程序可能会被同名的多个资源混淆。</block>
  <block id="7eaa7391130c13b3bf9a7e4ae755d908" category="list-text">如果使用括号指定 ONTAP SAN IPv6 数据 LIF ，则此 LIF 现在可以正常工作。</block>
  <block id="404cef2e43cb97ccef52692419ad6f6b" category="inline-link-macro">GitHub 问题描述 489</block>
  <block id="7213ed07f5b718aa66cfac350f023a77" category="list-text">修复的问题描述 ，尝试导入已导入的卷时，返回的 EOF 将使 PVC 处于待定状态。（<block ref="b9a2290d6389b9a605883cda4e717749" category="inline-link-macro-rx"></block>）</block>
  <block id="c28d8c94f865f3ef7e4b01a157510ef6" category="list-text">修复了在 SolidFire 卷上创建超过 32 个快照时 Astra Trident 性能下降的问题描述 。</block>
  <block id="d0aaca968285d0d47ea0c5a0f7b9bab5" category="list-text">在创建 SSL 证书时将 SHA-1 替换为 SHA-256 。</block>
  <block id="997cff957213b9212a22d7cac2b4275d" category="list-text">使用生成的证书测试身份验证。将 &lt;SVM 管理 LIF&gt; 和 &lt;SVM 名称 &gt; 替换为管理 LIF IP 和 ONTAP 名称。您必须确保 LIF 的服务策略设置为 `default-data-management` 。</block>
  <block id="1e6c7220f5d4eb181d67b4d5043336f5" category="paragraph">通过将 Astra Trident 与适用于 NetApp ONTAP 的 Amazon FSx 结合使用，您可以确保在 Amazon Elastic Kubernetes Service （ EKS ）中运行的 Kubernetes 集群可以配置由 ONTAP 备份的块和文件永久性卷。</block>
  <block id="10b862795141355be1c179a2f878f507" category="list-text">请勿使用 "* 快速创建 "* 来创建适用于 ONTAP 的 FSX 文件系统。快速创建工作流可启用自动备份，但不提供选择退出选项。</block>
  <block id="a10ab8f133704d9a58a1dff179ad7f7d" category="list-text">使用 "** 标准创建 " 时，禁用自动备份。禁用自动备份可以使 Trident 成功删除卷，而无需进一步手动干预。</block>
  <block id="4ef50c481a6113a6276514f572c414d2" category="inline-image-macro">AWS 控制台禁用自动备份的屏幕截图。</block>
  <block id="cce5aa9218d4019d57adcf814d7189c1" category="paragraph"><block ref="cce5aa9218d4019d57adcf814d7189c1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="45b09f7cb3dcbe0274eef2b3fce46bea" category="paragraph">可以， Astra Trident 可以脱机安装。请参见 <block ref="4a2b27d6d4bc3dd7ae85bfd131d50753" category="inline-link-macro-rx"></block>。</block>
  <block id="0f43ba8a9cfc14b033c2c652f53bfcb9" category="paragraph">如果需要，您可以在本地生成和修改 Astra Trident 用于安装的确切清单文件。请参见 <block ref="7a68296d6f600eac17d317743bea0050" category="inline-link-macro-rx"></block>。</block>
  <block id="72fec731c958562fd09df08eef5fbb89" category="paragraph">如果要降级，需要评估许多因素。请参见 <block ref="ea621a0de3f004c488ea799d0fd7e41d" category="inline-link-macro-rx"></block>。</block>
  <block id="e9c44bbfd795a5d63d74c6a77afee70d" category="paragraph">法律声明提供对版权声明、商标、专利等的访问。</block>
  <block id="6016a2b341113bf496b719905398ecd2" category="section-title">版权</block>
  <block id="126a02652da6de02962cf1b654fd6376" category="section-title">商标</block>
  <block id="c4ce4761e466527d26b3e3d5ed1006fd" category="paragraph">NetApp 、 NetApp 徽标和 NetApp 商标页面上列出的标记是 NetApp 、 Inc. 的商标。其他公司和产品名称可能是其各自所有者的商标。</block>
  <block id="be89498d2f8a22ce47c02ba9795fe2af" category="section-title">专利</block>
  <block id="d0b19d36be2c5f16e9aef46c8a452d3d" category="paragraph">有关 NetApp 拥有的专利的最新列表，请访问：</block>
  <block id="56c34c6410dd45c5cec44149ad0ce037" category="section-title">隐私政策</block>
  <block id="25c11af81bf0b01ce7b0f24ddc9f7136" category="section-title">其他已知配置选项</block>
  <block id="ffedfe711d36cdc8c41927063ae77027" category="paragraph">在 VMware Tanzu Portfolio 产品上安装 Astra Trident 时：</block>
  <block id="8ded34c5caad3971bb6d0a2b202d7b32" category="list-text">集群必须支持有权限的工作负载。</block>
  <block id="dbe38f4f0d856b41827e6e4531720a5e" category="list-text">` -kubelet-dir` 标志应设置为 kubelet 目录的位置。默认情况下，此值为 ` /var/vcap/data/kubelet` 。</block>
  <block id="4dc3529fbf05312075f0aa52f9c0908e" category="paragraph">已知使用 ` -kubelet-dir` 指定 kubelet 位置适用于 Trident Operator ， Helm 和 `tridentctl` 部署。</block>
  <block id="8fad5c21cf613e120f249eadc62cda2f" category="paragraph">Astra Trident 还可与许多其他完全托管和自我管理的 Kubernetes 产品结合使用，包括 Google Kubernetes Engine （ GKEE ）， Amazon Elastic Kubernetes Services （ EKS ）， Azure Kubernetes Service （ AKS ）， Rancher 和 VMware Tanzu Portfolio 。</block>
  <block id="6798a0701cedf1202e1d70210a3a9a83" category="paragraph">使用 `ontap-nas` ， `ontap-san` ， `solidfire-san` 和 `GCP-CVS 存储驱动程序` 时， Astra Trident 可以克隆卷。使用 `ontap-nas-flexgroup` 或 `ontap-nas-economy-经济` 驱动程序时，不支持克隆。从现有卷创建新卷将创建新快照。</block>
  <block id="ec2577b4770848fd294d6ca069c34a43" category="paragraph">Astra Trident 支持对在 `ontap-nas` ， `ontap-nas-economy` ， `ontap-nas-flexgroup` ， `GCP-CVS` 和 `azure-netapp-files` 后端配置的 NFS PV 进行卷扩展。</block>
  <block id="986d46700a93c1b67573285912b2a857" category="paragraph">Cloud Volumes ONTAP 可为各种使用情形提供数据控制以及企业级存储功能，包括文件共享和为 NAS 和 SAN 协议（ NFS ， SMB/CIFS 和 iSCSI ）提供服务的块级存储。Cloud Volume ONTAP 的兼容驱动程序包括 `ontap-nas` ， `ontap-nas-economy.` `ontap-san` 和 `ontap-san-economy.`它们适用于适用于 Azure 的 Cloud Volume ONTAP ，适用于 GCP 的 Cloud Volume ONTAP 。</block>
  <block id="62e0abd2d56d565a2b31e85b446fa800" category="paragraph">通过卷导入，可以将现有存储卷导入到 Kubernetes 环境中。目前， `ontap-nas` ， `ontap-nas-flexgroup` ， `solidfire-san` ， `azure-netapp-files` 和 `GCP-CVS` 驱动程序均支持此功能。在将现有应用程序移植到 Kubernetes 或在灾难恢复场景中，此功能非常有用。</block>
  <block id="555c97661fe540a8eabda5c4680e2f81" category="paragraph">如果使用了 `azure-netapp-files` 或 `gcp-cvs` 驱动程序，请使用命令 `tridentctl import volume &lt;backend-name&gt; &lt;volume path&gt; -f /path/vc.yaml` 将卷导入到 Kubernetes 中，以供 Astra Trident 管理。这样可以确保卷引用是唯一的。</block>
  <block id="cca7544fa2044ea81b43c1e0896bf58e" category="cell">ontap-nas ， ontap-san ， solidfire-san ， azure-netapp-files ， gcp-cvs ， ontap-san-economy.</block>
  <block id="870594bba77423ccae9ad70861e02951" category="cell">ontap-nas ， ontap-nas-flexgroup ， ontap-san ， GCP-CVS</block>
  <block id="33dece0bdda0f88a645c739f3714c038" category="cell">ontap-nas ， ontap-san ， solidfire-san ， gcp-cvs</block>
  <block id="2e647c10640a301eccdc45d7ad72507d" category="cell">ontap-nas ， ontap-nas-economy. ontap-nas-flexgroup ， ontap-san ， ontap-san-economy. solidfire-san ， gcp-cvs ， azure-netapp-files</block>
  <block id="051fb2c3f62667c87a197ae412a4dbeb" category="cell">ONTAP （ NAS ， SAN ）和 SolidFire — * ：要从中克隆的卷的名称</block>
  <block id="c12963ed77d398c8f97e09be58a20fed" category="paragraph">创建卷时， Trident 会生成 `internalName` 。这包括两个步骤。首先，它会将存储前缀（默认值 `trident` 或后端配置中的前缀）预先添加到卷名称中，从而使名称格式为 ` &lt;prefix&gt;-&lt;volume-name&gt;` 。然后，它将继续清理名称，替换后端不允许使用的字符。对于 ONTAP 后端，它会将连字符替换为下划线（因此，内部名称将变为 ` &lt;prefix&gt;_&lt;volume-name&gt;` ）。对于 Element 后端，它会将下划线替换为连字符。</block>
  <block id="ba600e29b197aa569df1df520cc4e4c9" category="paragraph">是的， Astra Trident 支持 Azure 中的 Azure NetApp Files 服务以及 GCP 中的 Cloud Volumes Service 。</block>
  <block id="804a6c22698fe4782c44f1e8d446964e" category="paragraph">从目前开始，我们为 `ontap-nas` ， `ontap-nas-flexgroup` ， `ontap-san` ， `ontap-san-economics` ， `solidfire-san` ， `GCP-CVS` 和 `azure-netapp-files` 后端驱动程序。</block>
  <block id="4af8991c21dff2f779496b8350d1124b" category="inline-link">Astra Trident 22.01</block>
  <block id="7669b0b69333e81c7c208aea3d1a3c6f" category="list-text"><block ref="7669b0b69333e81c7c208aea3d1a3c6f" category="inline-link-rx"></block></block>
  <block id="723b30bcece2d0d47914a6eaf0c550cc" category="list-text">现在， Trident 会将 HSTS 标头添加到其安全端点的响应中。</block>
  <block id="621b9733ee07089711b96dd6b0b7861a" category="list-text">Trident 现在会尝试自动启用 Azure NetApp Files UNIX 权限功能。</block>
  <block id="3f39a3207529d5f8129199a33e60ef87" category="section-title">删除</block>
  <block id="3d0d8392962843a02a6fa979f76b5a91" category="paragraph">已删除 E 系列驱动程序（自 2007 年 20 月 20 日起禁用）。</block>
  <block id="72387bfdb0acfd8a27877f000a3abeac" category="section-title">22.01.1 中的更改</block>
  <block id="135c438d01a49275c458e22005e39c6e" category="section-title">22.01.0 中的更改</block>
  <block id="58a2e8c17107cc1ca9cb1317cd0c1ee9" category="section-title">21.10.1 中的更改</block>
  <block id="43e92857220d1a7ea1da88250ea5e2e3" category="section-title">21.10.0 中的更改</block>
  <block id="9c87569b835a8f66b7490390d350d9a4" category="paragraph">如果您的Kubernetes分发版不包含快照控制器和CRD、则可以按如下所示进行部署。</block>
  <block id="469f7ca16938508b5dcb777767828b70" category="list-text">创建卷快照CRD。</block>
  <block id="086e6c16e3fe8e13c336612ef636aa02" category="sidebar">Astra Trident</block>
  <block id="5a333b18a215ecfd4457ba0e1732654b" category="section-title">Trident是否可以在配置了负载共享镜像的SVM上配置卷？</block>
  <block id="0e7629426b9d7596800cd5d72f558a7f" category="paragraph">可以为通过NFS提供数据的SVM的根卷创建负载共享镜像。ONTAP 会自动为Trident创建的卷更新负载共享镜像。这可能会导致卷挂载延迟。使用Trident创建多个卷时、配置卷取决于ONTAP 更新负载共享镜像。</block>
  <block id="d5d195efeafde24a6a22effd3dd39339" category="list-text">基于凭据：您可以使用文件系统的 `fsxadmin` 用户或为 SVM 配置的 `vsadmin` 用户。</block>
  <block id="7d3f46589c43a64fd040e4f0e0691a86" category="inline-link-macro">Helm图表</block>
  <block id="c9ffe59301b588bbc33bb004cfd312ee" category="section-title">部署Trident操作员并使用Helm安装Astra Trident</block>
  <block id="1ea1b160621872df5909653ebde1bf7f" category="paragraph">您可以更新现有后端、以便在基于凭据的方法和基于证书的方法之间移动。但是、一次仅支持一种身份验证方法。要切换到其他身份验证方法、必须从后端配置中删除现有方法。</block>
  <block id="7335992f174c029a990442aca68aacbd" category="admonition">如果您尝试同时提供*凭据和证书*、则后端创建将失败、并显示一条错误、指出配置文件中提供了多种身份验证方法。</block>
  <block id="d1914bc190cdc3bc9eee6db0c81021bc" category="section-title">节点服务发现</block>
  <block id="2b6ab5193160f5eaca51526b15f27e3a" category="admonition">节点服务发现可识别已发现的服务、但无法保证服务已正确配置。相反、如果没有发现的服务、则无法保证卷挂载将失败。</block>
  <block id="66896c99fb06e0b6c86498b249f8217a" category="cell">如果请求的卷大小超过此值、则配置失败。</block>
  <block id="412427d9207c4cc4b01539aff3c50e7c" category="cell">`网络功能`</block>
  <block id="6dc4cb19f2792a3eadfa64d4b4b6d177" category="paragraph">所有Kubernetes工作节点都必须安装适当的NFS工具。请参见 <block ref="f1f954e59a21e3ffe189e77dd2ee9f86" category="inline-link-macro-rx"></block> 有关详细信息：</block>
  <block id="6adbf3424e5de1b4e2baad3b4d632c4a" category="paragraph">您可以更新现有后端以使用其他身份验证方法或轮换其凭据。这两种方式都适用：使用用户名 / 密码的后端可以更新为使用证书；使用证书的后端可以更新为基于用户名 / 密码的后端。为此、您必须删除现有身份验证方法并添加新的身份验证方法。然后、使用包含所需参数的更新后端.json文件执行`tridentctl backend update`。</block>
  <block id="880cacf6429ab3c253b14beac8b73951" category="summary">Kubernetes Pod安全标准(PSS)和Pod安全策略(PSP)定义权限级别并限制Pod的行为。OpenShift安全上下文约束(SCC)同样定义了特定于OpenShift Kubernetes引擎的POD限制。为了提供此自定义设置、Astra Trident会在安装期间启用某些权限。</block>
  <block id="bc3c69459955aa51e6720ee4098db2c2" category="doc">POD安全标准(PSS)和安全上下文限制(SCC)</block>
  <block id="9d482ecca4ba8a41fd8e1180c97a4b97" category="paragraph">Kubernetes Pod安全标准(PSS)和Pod安全策略(PSP)定义权限级别并限制Pod的行为。OpenShift安全上下文约束(SCC)同样定义了特定于OpenShift Kubernetes引擎的POD限制。为了提供此自定义设置、Astra Trident会在安装期间启用某些权限。以下各节详细介绍了Astra Trident设置的权限。</block>
  <block id="80af9ab2cf8f28973d329b09a2aa3bf3" category="inline-link-macro">Kubernetes：安全性</block>
  <block id="181049d711e79ba087e97d579f11e3f7" category="admonition">PSS将取代Pod安全策略(PSP)。PSP已在Kubernetes v1.21中弃用、并将在v1.25中删除。有关详细信息，请参见 <block ref="18a97095ea40d42decd22f31a2040afe" category="inline-link-macro-rx"></block>。</block>
  <block id="92699490afddc06ebad285ff002fc80d" category="section-title">所需的Kubernetes安全上下文和相关字段</block>
  <block id="ed5dea09095f671b801bee34ea28a319" category="cell">权限</block>
  <block id="b315e1c68490baab38c1a28e00fe0f5a" category="cell">特权</block>
  <block id="62868c5d24fd89e2fd8046454e18b6c4" category="inline-link-macro">Kubernetes：挂载传播</block>
  <block id="a2d97da130dea6b381b1e770af5d9c74" category="cell">CSI要求挂载点为双向挂载点、这意味着Trident节点POD必须运行特权容器。有关详细信息，请参见 <block ref="36e6e997c8e1e33355ee35fb5cf65f2b" category="inline-link-macro-rx"></block>。</block>
  <block id="92a5c8ffa6bee2a9377f18499950da23" category="cell">主机网络连接</block>
  <block id="154cdce0e5451a5578085caa8a7e7a3e" category="cell">iSCSI守护进程所需的。`iscsiadm`可管理iSCSI挂载、并使用主机网络与iSCSI守护进程进行通信。</block>
  <block id="2ff982b19c53a275ae05f015dafe166d" category="cell">主机IPC</block>
  <block id="eac6730a7bdbb0156f167d1a073b4a7c" category="cell">NFS使用进程间通信(Interprocess Communication、IPC)与NFSD进行通信。</block>
  <block id="b25a60a6190808e0d6e849ca6325b91c" category="cell">主机PID</block>
  <block id="50a75b984e49b81a5c2b366ffe8cfba2" category="cell">需要为NFS启动`rpc-statd`。在挂载NFS卷之前、Astra Trident会查询主机进程以确定`rpc-statd`是否正在运行。</block>
  <block id="82ec2cd6fda87713f588da75c3b1d0ed" category="cell">功能</block>
  <block id="4aeb7a1484240b8d479aee0a012de3a4" category="cell">`SYS_ADMIN`功能是特权容器的默认功能的一部分。例如、Docker会为有权限的容器设置这些功能：`CapPrm：00003fffffffff``CapEff：00003fffffffff`</block>
  <block id="b2dbe899d8bf9b4c25f337efe8b1ce7c" category="cell">Seccomp</block>
  <block id="bc13155252332e44b7dd850ea5842641" category="cell">Seccomp配置文件在特权容器中始终处于"非受限"状态；因此、无法在Astra Trident中启用它。</block>
  <block id="1a3d8802d280d4ec910f54042cd62998" category="cell">SELinux</block>
  <block id="86b4800be380b1baaeaeead5f71076db" category="cell">在OpenShift上、特权容器在`sPC_t`("超级特权容器")域中运行、而无特权容器在`container_t`域中运行。在`containerd`上、如果安装了`container-SELinux`、则所有容器都会在`sPC_t`域中运行、从而有效地禁用SELinux。因此、Astra Trident不会将`seLinuxOptions`添加到容器中。</block>
  <block id="52a8b954485e8bf8ebe32865d17563a6" category="cell">DAC</block>
  <block id="6ddc0f1aebd745677bb51e725f080883" category="cell">有权限的容器必须以root用户身份运行。非特权容器以root用户身份运行、以访问CSI所需的UNIX套接字。</block>
  <block id="479f0a2e760ff0014bb53fcbe4b5dfbf" category="section-title">POD安全标准(PSS)</block>
  <block id="b021df6aac4654c454f46c77646e745f" category="cell">Label</block>
  <block id="ede4d9142f78c8313ce1ea912023214a" category="cell">`po-security.Kubernetes IO/enforce``po-security.Kubernetes IO/enforce版本`</block>
  <block id="0ccd226f7ad098ef19857dcf15eed611" category="cell">允许将Trident控制器和节点收入安装命名空间。请勿更改命名空间标签。</block>
  <block id="0634b3cd8d233df0b38fe73154f03a86" category="cell">`enforce：privileged``enice-version：&lt;当前集群的版本或测试的最高PSS版本。&gt;`</block>
  <block id="830d087702172a8173337c2f014f24b3" category="admonition">更改命名空间标签可能会导致Pod未计划、出现"创建时出错：..."或"警告：Trident CSI -..."。如果发生这种情况、请检查`privileged`的命名空间标签是否已更改。如果是、请重新安装Trident。</block>
  <block id="a2e4b41e2525b6345ec43bbfe91c66fb" category="section-title">POD安全策略(PSP)</block>
  <block id="6f16a5f8ff5d75ab84c018adacdfcbb7" category="cell">字段</block>
  <block id="0c3c80a8b192c50af55549addaec04e9" category="cell">`allowPrivilegeEscalation`</block>
  <block id="13d1281eff2b6a57e6fe877e0379a8f0" category="cell">有权限的容器必须允许权限升级。</block>
  <block id="22cfef4d87bd251ba39dd92d08a6b0bb" category="cell">`true`</block>
  <block id="f3acfbe4d2b93ab163024b31a31b1a6e" category="cell">`允许CSIDrivers`</block>
  <block id="e4938c724a08c7ba91677f8cb5e069f0" category="cell">Trident不使用实时CSI临时卷。</block>
  <block id="ce2c8aed9c2fa0cfbed56cbda4d8bf07" category="cell">空</block>
  <block id="2eb7a988516ab2e49fd1dd1d0f505ba4" category="cell">`allowedCapabilities`</block>
  <block id="7f18f0f8e3ec21ef031ae007e78292f1" category="cell">非特权Trident容器所需的功能不会超过默认设置、而特权容器会获得所有可能的功能。</block>
  <block id="577f713a1a3fd5fe6851754c1e780b62" category="cell">`支持FlexVolumes`</block>
  <block id="5a40ff04e0748fc5c56343bfccb1bf43" category="inline-link-macro">FlexVolume驱动程序</block>
  <block id="117394bda9c12e1ab1e0ddefda7340f6" category="cell">Trident不使用 <block ref="5cf2fb2d9c4de828b06e030ea5b9ff75" category="inline-link-macro-rx"></block>、因此它们不会包含在允许的卷列表中。</block>
  <block id="e26fd3e84b999df4093d0b9f1cf8bbdb" category="cell">`allowedHostPaths`</block>
  <block id="87c065485525cde8c75f60bd233a546b" category="cell">Trident节点POD挂载节点的根文件系统、因此设置此列表没有好处。</block>
  <block id="88e5e12dbdeac08e751e562ed902d6af" category="cell">`allowedProcessMountTypes`</block>
  <block id="b989e7796e7fe01d9a48795f499ee3e8" category="cell">Trident不使用任何`ProcMountTypes`。</block>
  <block id="6784c364453355e4499a625166f9d76e" category="cell">Trident不需要任何不安全的`sysctls`。</block>
  <block id="43dbe35647dc1ec91f9ab70bb9c67eb7" category="cell">`defaultAddCapabilities`</block>
  <block id="21b6f9c280cf0efb8619e386208ee181" category="cell">无需向有权限的容器添加任何功能。</block>
  <block id="782434a33bb3747f8aa86293dc2ae86c" category="cell">`defaultAllowPrivilegeEscalation`</block>
  <block id="4e1db4d4f52542bf76625bb1724050ca" category="cell">允许权限升级在每个Trident POD中进行处理。</block>
  <block id="249091efa412cf5e332461c484b979d0" category="cell">`false`</block>
  <block id="7b18008579516cbef313996f0c7a3f5e" category="cell">`forbiddenSysctls`</block>
  <block id="1507e7ba036aa98fd30589e618a7a4eb" category="cell">不允许使用`sysctls`。</block>
  <block id="042337cb48219589a279b3bf0ba9107a" category="cell">`fsGroup`</block>
  <block id="07556f620d0b827238e3ef0142c49b78" category="cell">Trident容器以root身份运行。</block>
  <block id="ac0f2e366ea63da20af91efebbac6563" category="cell">`RunAsAny`</block>
  <block id="0041ceee5434032966a8b03eae8738ac" category="cell">`hostIPC`</block>
  <block id="41c30833eb5d5997e9b7a31ee0c66616" category="cell">挂载NFS卷需要主机IPC才能与`nfsd`进行通信</block>
  <block id="9bffb5bb38918d1a1d3ae47e97dfc0c4" category="cell">`hostNetwork`</block>
  <block id="42a138ad382896646a09fac2eb0167c6" category="cell">iscsiadm要求主机网络与iSCSI守护进程进行通信。</block>
  <block id="13135fc0519a6dd0521fa0c0e2445184" category="cell">`hostPID`</block>
  <block id="608c4a2fdcf8e14356058df9005ae8ad" category="cell">需要使用主机PID来检查节点上是否正在运行`rpc-statd`。</block>
  <block id="7d820b24ee2bfd41495fba608bfe1fb0" category="cell">`hostPorts`</block>
  <block id="7afcaaf2763ecc0e6dee9f0b63026a58" category="cell">Trident不使用任何主机端口。</block>
  <block id="cb8c6f5ff29df99724d3704d1af54bbd" category="cell">`特权`</block>
  <block id="aadb34687d099e9a40c9ad3bbaca9b52" category="cell">Trident节点Pod必须运行特权容器才能挂载卷。</block>
  <block id="cd8e4b4bb856b53433b1d0369136d7c3" category="cell">`readOnlyRootFilesystem`</block>
  <block id="7621dbe4e923ccb1331f44e5fc326954" category="cell">Trident节点Pod必须写入节点文件系统。</block>
  <block id="7214fd778499c002452dfa1de7a63694" category="cell">`requiredDropCapabilities`</block>
  <block id="0a687403dd751d7bcf9d36eb39b73187" category="cell">Trident节点Pod运行有权限的容器、无法删除功能。</block>
  <block id="56d058c51fcd79545706c62569ba5a19" category="cell">`无`</block>
  <block id="e0cfa7f1a22bfc61e3c23d9b472cb229" category="cell">`runAsGroup`</block>
  <block id="72a9e1b9b252e5cf0980f359420147d4" category="cell">`runAsUser`</block>
  <block id="0be043db3067cfba9e355c71f0d47963" category="cell">`runAsAny`</block>
  <block id="2b13c797fbca116e0445fe9ed04aa753" category="cell">`runtimeClass`</block>
  <block id="90eaf8074aef1d40fdd4ebb096ba3445" category="cell">Trident不使用`RuntimeClasses`。</block>
  <block id="af697e6f277a737b01025e1b3ac8fd44" category="cell">`seLinux`</block>
  <block id="b2fe00f20eadde0a1ed6fcbd7f899a41" category="cell">Trident未设置`seLinuxOptions`、因为容器运行时间和Kubernetes分发程序处理SELinux的方式目前存在差异。</block>
  <block id="07b8b968ede124e1134951b502139223" category="cell">`supplementalGroups`</block>
  <block id="707325d27093188691659cc218115f02" category="cell">`卷`</block>
  <block id="fd284b15eb12231bdce65744e6704677" category="cell">Trident Pod需要这些卷插件。</block>
  <block id="c28fb07c7c2463112f74e84cdea6df77" category="cell">`hostPath、projected、emptyDir`</block>
  <block id="12ed56c889a6b18b5fce1be5bd30b1c8" category="section-title">安全上下文限制(SCC)</block>
  <block id="3ad6cb6100190c8f81e99fd52debf7ef" category="cell">标签</block>
  <block id="244a3eb95cc1438e96d275b17eaa5bca" category="cell">`allowHostDirVolumePlugin`</block>
  <block id="bdf1cf802b14a9ec8b930e1603663b2a" category="cell">Trident节点Pod挂载节点的根文件系统。</block>
  <block id="bb46f3196a53f2e3664f53addee28df1" category="cell">`allowHostIPC`</block>
  <block id="040a3e4977d39efd21138ca276545e91" category="cell">挂载NFS卷需要主机IPC才能与`nfsd`进行通信。</block>
  <block id="75a4305006cbe99edf6e6ec43424a3f9" category="cell">`allowHostNetwork`</block>
  <block id="3dc9b606cf3a7a8fc44c8489687131d1" category="cell">`allowHostPID`</block>
  <block id="31773567f0268170ecfa4c74f91c5b74" category="cell">`allowHostPorts`</block>
  <block id="606a5f1c705c363af0a1f97e60feaddc" category="cell">`allowPrivilegedContainer`</block>
  <block id="2cc90cbcd409b90ed2d4270b587b4611" category="cell">`允许UnsafeSysctls`</block>
  <block id="5be47a456f397efee757d8dd4e0c8726" category="cell">`组`</block>
  <block id="c2ca437ef2abb914a8fc2ebb1b926ef6" category="cell">此SCC专用于Trident并绑定到其用户。</block>
  <block id="fae56626a2743154c04411ee3d701833" category="cell">`seLinuxContext`</block>
  <block id="5987c8a1437c5254a436c29c94220b55" category="cell">`seccompProfile`</block>
  <block id="2c8f9f1b9abdfa728b8f5d50686e4da0" category="cell">有权限的容器始终运行"无限制"。</block>
  <block id="f94a437fb7858e092079378f93ef2c71" category="cell">`用户`</block>
  <block id="402b7d2d5aea5e79576f9a964df89a32" category="cell">提供了一个条目、用于将此SCC绑定到Trident命名空间中的Trident用户。</block>
  <block id="274b68192b056e268f128ff63bfcd4a4" category="cell">不适用</block>
  <block id="50af2a553c2117ddd78da33865c6e35b" category="cell">`hostPath、downwardAPI、projected、emptyDir`</block>
  <block id="b8f52a0e5f45341fb88241356af7f0c7" category="list-text">请参见 <block ref="7c28a1514d14039d3824999236c4890d" category="inline-link-macro-rx"></block> 有关卷扩展的更多详细信息。</block>
  <block id="d63b67088a9f91802e555f6613dfc7e2" category="list-text">使用 `tridentctl uninstall` 命令卸载 Trident 时， Trident Pod 会被删除，但不会清理创建的 CRD 。请参见 <block ref="3e5b286354565ddfee44ed92d763b424" category="inline-link-macro-rx"></block> 了解如何从头开始完全删除和重新配置 Trident 。</block>
  <block id="6386b0f17b85463db72887bca8ae2bb7" category="inline-link-macro">正在配置后端</block>
  <block id="4ec9b12b750288e91222e3a7e15db932" category="paragraph">有关如何构建这些对象的详细信息、请参见 <block ref="2e76dfee6bc1b5ee4173b3c5bbcd99e5" category="inline-link-macro-rx"></block>。</block>
  <block id="1733f6bf382fd79ef07194c1f01825fa" category="paragraph">Trident降级会使用`ssystem-node-critical` Priority Class-the highest priority Class available in Kubernetes—以确保Astra Trident能够在正常节点关闭期间识别和清理卷、并允许Trident demonset Pod在资源压力较高的集群中以较低优先级抢占工作负载。</block>
  <block id="bc1252710ec794375d6c59f55eea9823" category="paragraph">为此、Astra Trident会使用`ResourceQuota`对象来确保满足Trident子集上的"系统节点关键"优先级类。在部署和创建emonset之前、Astra Trident会查找`ResourceQuota`对象、如果未发现、则会应用该对象。</block>
  <block id="253c5669d0ddb02485528df359bfb37d" category="paragraph">如果您需要对默认资源配额和优先级类进行更多控制、可以使用Helm图表生成`custom.yaml`或配置`ResourceQuota`对象。</block>
  <block id="b6ba871f235b09a3d76844b7b5901586" category="paragraph">以下是一个`ResourceQuota`对象的示例、该对象会优先处理Trident子集。</block>
  <block id="4f4b1cca8d1c78f8ba309694d46d80f2" category="inline-link-macro">Kubernetes：资源配额</block>
  <block id="8893dca3c9374b0380c7018fc6f23846" category="paragraph">有关资源配额的详细信息、请参见 <block ref="1fb556021be57083646a3e3c0079c64c" category="inline-link-macro-rx"></block>。</block>
  <block id="222924a66611c61f2a2192a2bab92ecf" category="inline-link-macro">正在卸载</block>
  <block id="dbcf7f603282c175a634104f7dbd55f2" category="paragraph">在极少数情况下、如果在创建`ResourceQuota`对象后安装失败、请先尝试 <block ref="3bd802fb95da78515b3c3d98916ee73c" category="inline-link-macro-rx"></block> 然后重新安装。</block>
  <block id="c4af59b1638f70f51816423f72df4dba" category="paragraph">如果不起作用、请手动删除`ResourceQuota`对象。</block>
  <block id="ba991f2f6d0f733e9b8a2136cedc99b2" category="paragraph">如果您希望控制自己的资源分配、则可以使用以下命令删除Astra Trident `ResourceQuota`对象：</block>
  <block id="702fa57eedc6ee8490a7294016f8b14f" category="list-text">`trident资源库ota.yaml`</block>
  <block id="6b51834314ece904405eb0ce1a6e6bd8" category="list-text">NetApp HCI/ Element软件11或更高版本</block>
  <block id="468bc1e7f7712a8dc9b91d063523cdff" category="cell">v1.24.0</block>
  <block id="05759468b045fc55d22e8e6881dca01f" category="paragraph">*</block>
  <block id="a885c202ff7951e3ed11491edbe869b2" category="inline-link-macro">GitHub问题描述 700</block>
  <block id="b649490c5687c23484f5e4043e17b9c5" category="list-text">修复了使用Helm或Trident运算符配置Trident时用于处理节点选择器的布尔值和数字值的问题描述。（<block ref="4be853b49b0a07556a73959d38037d90" category="inline-link-macro-rx"></block>）</block>
  <block id="0ae28ee1c5edfd4bee3e296a8261ed8b" category="inline-link-macro">GitHub问题描述 #736</block>
  <block id="69ce5488c3078e15fc6e51116d1d17ba" category="list-text">修复了问题描述 处理非CHAP路径错误的问题、以便kubelet在失败时重试。 <block ref="a21b5d75e3a2341288a5ed769d7d4ca2" category="inline-link-macro-rx"></block>）</block>
  <block id="701ba87ab75dde70f4604769defc7d00" category="list-text">从K8s.gcr.io过渡到registry.k8s.io作为CSI映像的默认注册表</block>
  <block id="90e3cd7cff1c9f6f4b8d2a509b127d44" category="list-text">包含一个包含Trident安装的ResourceQuota、以确保在默认情况下限制使用PriorityClass时计划Trident DemonSet。</block>
  <block id="838a6d7e89b7c366cfc25d3b2115b901" category="inline-link-macro">GitHub问题描述 #717</block>
  <block id="cab6f6f91105d87aa3f65650df43c553" category="inline-link-macro">GitHub问题描述 #228</block>
  <block id="00ea108f36897d9ed3523b970b09e6ea" category="list-text">为ONTAP 驱动程序添加了技术预览自动MetroCluster 切换检测功能。（<block ref="0c9c84232975bfb33d3481050e5ef924" category="inline-link-macro-rx"></block>）</block>
  <block id="0b4fe975279063a2d1790cd061a8b8d1" category="list-text">*。*。*。*。</block>
  <block id="108e9d089b04380952a04c1021cdad80" category="list-text">后端配置不再允许在一个配置中使用多种身份验证类型。</block>
  <block id="de278730ee66ed696db3f71d20aa30a5" category="list-text">已删除AWS CVS驱动程序(自22.04起已弃用)。</block>
  <block id="16cbbf51150ac75556b3850ff4a5a013" category="list-text">从节点Pod中删除了不必要的SYS_ADMIN功能。</block>
  <block id="9f0be62f4bbebd42af8782e0151af649" category="list-text">将nodeprep减少为简单的主机信息和主动服务发现、以便尽力确认工作节点上是否提供NFS/iSCSI服务。</block>
  <block id="5b6cf869265c13af8566f192b4ab3d2a" category="section-title">文档。</block>
  <block id="d3889fc650fa47326b5f1d0c56f50970" category="inline-link-macro">POD安全标准</block>
  <block id="4e8effbd512bb14dbe10454c0f045ff2" category="paragraph">新的 <block ref="305368b4f0d008a807e095ab9da58448" category="inline-link-macro-rx"></block> 添加了(PSS)部分、详细介绍了Astra Trident在安装时启用的权限。</block>
  <block id="278dc4a29aa2b881b9dc4b45a82929c5" category="section-title">22.04中的更改</block>
  <block id="cb60f101c87f3def78d0fef168389244" category="inline-link-macro">GitHub问题描述 #681</block>
  <block id="2901fba3b85d37ea6000d90e72366ba6" category="list-text">改进了 iSCSI 启动程序名称的解析。（<block ref="3947f141b94c1867221790f45a6ee173" category="inline-link-macro-rx"></block>）</block>
  <block id="8804e61e26be921d78a1632ad8607a4c" category="inline-link-macro">GitHub问题描述 598</block>
  <block id="d0aad022e470a22fe71fa5616ce002f8" category="list-text">修复了不允许使用 CSI 存储类参数的问题描述 。（<block ref="032ea6b8f2fceffcd025bdcae99652ae" category="inline-link-macro-rx"></block>）</block>
  <block id="34fb36c5e51f4530848bc5114cf29aa7" category="inline-link-macro">GitHub问题描述 #6771</block>
  <block id="951995417edc5c2968955384b925b27e" category="list-text">修复了 Trident CRD 中的重复密钥声明。（<block ref="6e73ffca3c5d1dc68cd639612845812c" category="inline-link-macro-rx"></block>）</block>
  <block id="55cd7443e4a1278a57f612df28b8eee3" category="inline-link-macro">GitHub问题描述 #629</block>
  <block id="ec74c645b7b5f9d3051f68de156927d9" category="list-text">修复了不准确的 CSI Snapshot 日志。（<block ref="9b20149e8d36c115b9349e728abebd54" category="inline-link-macro-rx"></block>)</block>
  <block id="28341d7630f486a1b72b5b97d39ce589" category="list-text">修复了已删除节点上的卷已取消发布的问题描述 。（<block ref="439c8b5253b3b0fa8d2ddb79f44cd784" category="inline-link-macro-rx"></block>）</block>
  <block id="fbb82269f3871bc5751dda6ade9cd9ea" category="inline-link-macro">GitHub问题描述 #656</block>
  <block id="e02171b3da303c0d6b9bd3102650bb07" category="list-text">增加了对块设备上文件系统不一致问题的处理。（<block ref="b6c419ed0f79d6957e3796ca0e0742cb" category="inline-link-macro-rx"></block>）</block>
  <block id="1bae87f1c9d9a094dce218672331de02" category="inline-link-macro">GitHub问题描述 #715</block>
  <block id="4aeb6a7748e689a0ce92c16344bb6285" category="list-text">修复了在安装期间设置 `imageRegistry` 标志时问题描述 提取自动支持映像的问题。（<block ref="5f789d3f3d58c42cfbeb0b6394bac993" category="inline-link-macro-rx"></block>）</block>
  <block id="70703300e76c51632e4ea22ce53c74af" category="inline-link-macro">GitHub问题描述 #698</block>
  <block id="99df1eeec5b67fac5a47fb610c720712" category="list-text">现在，与 Trident 安全端点的入站连接至少需要 TLS 1.3 。（<block ref="5ab4d3faf45db0d93ac1a5f7438f1c62" category="inline-link-macro-rx"></block>）</block>
  <block id="3786cba0bc294f586b13783c69b08371" category="inline-link-macro">GitHub问题描述 #694</block>
  <block id="c0f60be70f5b8a5bc6c7c8071f4481fb" category="list-text">* Kubernetes * ： Trident demonset 现在以 system-node-critical 优先级类运行。（<block ref="b04869f92878b510e393bc41361c825d" category="inline-link-macro-rx"></block>）</block>
  <block id="4169ad079be240db45893881a795d255" category="paragraph">在上创建问题描述<block ref="e71a8230f1c77ee7d957187295b859e4" category="inline-link-rx"></block> 并在问题描述的主题和问题描述中提及 * RFE* 。</block>
  <block id="a7cfd917113a9ee9c1e789887d1d809f" category="inline-link-macro">渠道不和</block>
  <block id="c0ecc0f40acc112b78de6c3fd3c29e83" category="paragraph">如有任何问题、问题或请求、请通过我们的Astra联系我们 <block ref="6130664377fa14615bb1abd5257e9714" category="inline-link-macro-rx"></block> 或GitHub。</block>
  <block id="c217b0ac2dd5504f79ba78b220a9c358" category="summary">NetApp 以多种方式为 Trident 提供支持。全天候提供广泛的免费自助支持选项、例如不和的渠道。</block>
  <block id="8f5cc6430613f1c12f36965050bb7197" category="sidebar">不和</block>
  <block id="094a6e8342b02106129112ad2ff3d374" category="list-text">Mirantis Kubernetes Engine 3.5</block>
  <block id="c53358822905bb04d312060d1cb568af" category="inline-link">Astra Trident 22.04</block>
  <block id="fdd380631ba8063e7b8f842282a01e40" category="list-text"><block ref="fdd380631ba8063e7b8f842282a01e40" category="inline-link-rx"></block></block>
  <block id="ccb5eb98656346cbfa0b207e7d363bef" category="inline-link-macro">部署方法</block>
  <block id="e2bcf5dc117f31569d413bd9b7698bf2" category="list-text">使用其中一种部署Astra Trident <block ref="71cad0f2a077aa26894105299bf47b53" category="inline-link-macro-rx"></block>。</block>
  <block id="26798b67dd2e5b4c8d4f03c4c16170c7" category="list-text"><block ref="26798b67dd2e5b4c8d4f03c4c16170c7" category="inline-link-macro-rx"></block></block>
  <block id="85d7b73826973ab07bfe78af69bd85f4" category="list-text"><block ref="85d7b73826973ab07bfe78af69bd85f4" category="inline-link-macro-rx"></block></block>
  <block id="a1142049a82a11e90102d655bb7e234d" category="inline-link-macro">GitHub上的_assets_部分</block>
  <block id="756909f99bc1a720d318a5f5b94eb094" category="section-title">收集日志以进行故障排除</block>
  <block id="3d945423f8e9496c429a5d8c65b4604f" category="paragraph">Ubuntu</block>
  <block id="134bf17c90c90b5aeed99dde262bf14d" category="admonition">如果已为Trident创建命名空间、则`-create-namespace`参数不会创建额外的命名空间。</block>
  <block id="76ab201466ec43d71ec9051f8a556457" category="paragraph">对于使用 SAN 存储驱动程序的 ONTAP 后端， Astra Trident 可以通过 `tridentctl` 设置双向 CHAP 并管理 CHAP 用户名和密码。请参见 <block ref="2e905590b15db776a189c7b5f90d9174" category="inline-link-macro-rx"></block> 了解 Astra Trident 如何在 ONTAP 后端配置 CHAP 。</block>
  <block id="ea4a2eeab32b5cd82414bd4a2fc3e8e6" category="section-title">Astra Trident如何与NVE和NAE配合使用</block>
  <block id="c638f77e97a62d0d11f775816222d62a" category="inline-link-macro">配置 NetApp 卷加密概述</block>
  <block id="b65b10bf779c45e4940c255ecf83bdc3" category="paragraph">NetApp ONTAP 提供空闲数据加密、可在磁盘被盗、退回或重新利用时保护敏感数据。有关详细信息，请参见 <block ref="e0b51490e5d435c82abc702d0a4ca15c" category="inline-link-macro-rx"></block>。</block>
  <block id="2f96099170687a6fc94d47d5c9e1db78" category="list-text">如果在后端启用了NAE、则在Astra Trident中配置的任何卷都将启用NAE。</block>
  <block id="f2e4034ee02b84093370b28f55809870" category="list-text">如果后端未启用NAE、则在Astra Trident中配置的任何卷都将启用NVE、除非您在后端配置中将NVE加密标志设置为`false`。</block>
  <block id="82d9a35a126449139766a969834999ca" category="paragraph">在启用了NAE的后端的Astra Trident中创建的卷必须经过NVE或NAE加密。</block>
  <block id="1bb1c0791a9e9cff8de216ed44b1de31" category="list-text">您可以在Trident后端配置中将NVE加密标志设置为`true`、以覆盖NAE加密并按卷使用特定的加密密钥。</block>
  <block id="c376f853ae2704beeb8bbb6836ada303" category="list-text">在启用了NAE的后端将NVE加密标志设置为`false`将创建启用了NAE的卷。您不能通过将NVE加密标志设置为`false`来禁用NAE加密。</block>
  <block id="5991606c4d185f50bd7f678053004989" category="list-text">您可以通过将NVE加密标志显式设置为`true`来在Astra Trident中手动创建NVE卷。</block>
  <block id="b6c7fef7b7bcf035a4f4ad02ff8808c2" category="paragraph">有关后端配置选项的详细信息、请参见：</block>
  <block id="06c4db929b729ddf158ceb5cc15b122b" category="inline-link-macro">ONTAP SAN配置选项</block>
  <block id="6d9333eebb991611d29a4f8b7cc21fec" category="cell">在新卷上启用NetApp卷加密(NVE)；默认为`false`。要使用此选项，必须在集群上获得 NVE 的许可并启用 NVE 。如果在后端启用了NAE、则在Astra Trident中配置的任何卷都将启用NAE。有关详细信息、请参见： <block ref="00deada136b55f176f599153703cf50d" category="inline-link-macro-rx"></block>。</block>
  <block id="911675212835161abe9bce3f33c70af0" category="paragraph">在新卷上启用NetApp卷加密(NVE)；默认为`false`。要使用此选项，必须在集群上获得 NVE 的许可并启用 NVE 。</block>
  <block id="1811ba2842625864e8f6233e19051566" category="paragraph">如果在后端启用了NAE、则在Astra Trident中配置的任何卷都将启用NAE。</block>
  <block id="cd6eb5bfdf9299ea3a76e2eb822c8293" category="paragraph">有关详细信息、请参见： <block ref="00deada136b55f176f599153703cf50d" category="inline-link-macro-rx"></block>。</block>
  <block id="2bc97a247278d92f5552529c55ab7f0d" category="paragraph">在新卷上启用NetApp卷加密(NVE)；默认为`false`。要使用此选项，必须在集群上获得 NVE 的许可并启用 NVE 。</block>
  <block id="17d79009c5c2bb6bd570bb6f87552a2d" category="paragraph">Astra Trident 支持调整 NFS 和 iSCSI PV 的大小。这样，用户就可以直接通过 Kubernetes 层调整其卷的大小。所有主要 NetApp 存储平台均可进行卷扩展，包括 ONTAP ， SolidFire/NetApp HCI 和 Cloud Volumes Service 后端。要稍后允许扩展，请在与卷关联的 StorageClass 中将 `allowVolumeExpansion` 设置为 `true` 。每当需要调整永久性卷的大小时，请在永久性卷声明中编辑 `sPec.resources.requests.storage` 标注以指定所需的卷大小。Trident会自动调整存储集群上卷的大小。</block>
  <block id="ee3d8ea22d8bf88f2f7fcd6d6dbf26d2" category="paragraph">指标服务可为管理员提供有关 OpenShift 集群的状态，资源利用率和可用性的宝贵信息。此外、POD自动扩展功能也需要使用此功能、许多组织会将来自指标服务的数据用于其成本分摊和/或成本分摊应用程序。</block>
  <block id="f21f22dde0e0692333a7a28cce456b08" category="sidebar">所有Astra文档</block>
  <block id="06d5b814514e67e2a36b491b2493aed1" category="paragraph">使用此处列出的建议确保Astra Trident安装安全。</block>
  <block id="252ee40ccbd23adc008945e85af83513" category="section-title">将Astra Trident与NVE和NAE结合使用</block>
  <block id="676ad90ce2543d29917d8a5a6fc02e01" category="inline-link-macro">ONTAP NAS配置选项</block>
  <block id="a44b6b00e5eebd7494e1fd00658685e2" category="inline-link-macro">NIST</block>
  <block id="83188252104d97bbc732f23aa3b26ae2" category="inline-link-macro">Gitlab：密码设置</block>
  <block id="15671c66e35f11a8d4024ff7ca5e7fb6" category="list-text">出于性能原因、我们建议员工节点支持高级加密标准新指令(AES-NI)。要验证AES-NI支持、请运行以下命令：</block>
  <block id="0520b57116af979714f913239aa512a5" category="inline-link-macro">Intel：高级加密标准说明(AES-NI)</block>
  <block id="64e4c9865ee7451edfc34d72da12ee7d" category="paragraph">如果未返回任何内容、则您的处理器不支持AES-NI。有关AES-NI的详细信息、请访问： <block ref="e77f47a78a9c4677daf14d5366b503b4" category="inline-link-macro-rx"></block>。</block>
  <block id="227eef96675ec0e7595951c060437608" category="list-text">使用 ...<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block> 使用LUKS加密定义存储池。例如：</block>
  <block id="e646e16bee8b32e6ea29e30d01970a6c" category="section-title">限制</block>
  <block id="21d437ff7c8ceb5481603b5d2c05442a" category="inline-link">Astra Trident 22.07</block>
  <block id="8a7908446b584a99ce1055c602a9c74e" category="list-text"><block ref="8a7908446b584a99ce1055c602a9c74e" category="inline-link-rx"></block></block>
  <block id="027daea9679099cb5b0c6ddd862f1afc" category="paragraph">*在升级到Astra Trident 22.10之前、您必须阅读以下关键信息。*</block>
  <block id="83261c9e7e65d5ffc2d188c07767e5f6" category="admonition-title">&lt;Strong&gt;有关Astra Trident 22.10的关键信息&lt;/Strong&gt;</block>
  <block id="c5d2d3c8dfa65a831c35d09ac4683434" category="list-text">现在、Trident支持Kubernetes 1.25。在升级到Kubernetes 1.25之前、您必须将Astra Trident升级到22.10。</block>
  <block id="27418d8553177383cd6e1bb0e1ce4a57" category="list-text">Astra Trident现在严格强制在SAN环境中使用多路径配置、建议值为<block ref="db729c5c8df447087e5a84b961df14f6" prefix=" " category="inline-code"></block> 在multipath.conf文件中。</block>
  <block id="7b9eed191ce5e7cc8c8d1cb8cfe2d8c8" category="paragraph">使用非多路径配置或<block ref="a3a1d5b95e345a3db24a5a30e349f699" prefix=" " category="inline-code"></block> 或<block ref="e82e6d155396541f07f7347c984444ea" prefix=" " category="inline-code"></block> multipath.conf文件中的值将导致挂载失败。Trident已建议使用<block ref="db729c5c8df447087e5a84b961df14f6" prefix=" " category="inline-code"></block> 自21.07版起。</block>
  <block id="84ec6afbbe3e33afb3eba2b0375718b1" category="inline-link-macro">问题描述 #759</block>
  <block id="e07bc583b0f70b05fdbb1008303e8f85" category="list-text">已修复使用创建的ONTAP 后端专用的问题描述<block ref="d3ed68f7315b7e72b8d886b2278fcac3" prefix=" " category="inline-code"></block> 字段在22.07.0升级期间无法联机(<block ref="294e408500bc8358b70c680986c23bdb" category="inline-link-macro-rx"></block>）。</block>
  <block id="958424a347179b6856de7610a2b99b8d" category="inline-link-macro">问题描述 #548</block>
  <block id="9663034bca37c0603d813726d885503d" category="inline-link-macro">问题描述 760</block>
  <block id="26d08c0516dec92a4420f06d4da4fcf1" category="list-text">"** Docker："*修复了导致Docker卷插件在某些环境中无法启动的问题描述 (<block ref="78b7b57a86c570439562f2c638103de5" category="inline-link-macro-rx"></block> 和 <block ref="968dd574470c019c42c32878b5799fe9" category="inline-link-macro-rx"></block>）。</block>
  <block id="120b67b07f827aba020a1e3932877333" category="list-text">修复了ONTAP SAN后端专用的SLM问题描述 、以确保仅发布属于报告节点的部分数据LIF。</block>
  <block id="8f9d66f5cbbd4fc027dbd00d46032c8e" category="list-text">修复了连接卷时发生不必要的iSCSI LUN扫描的性能问题描述。</block>
  <block id="4a9eb9834d90361e1b70e6ac3c8b9a5c" category="list-text">删除了Astra Trident iSCSI工作流中的粒度重试、以快速失败并缩短外部重试间隔。</block>
  <block id="08e9e62a917aaf944b6ff85929a9f1dd" category="list-text">修复了问题描述 、在刷新iSCSI设备时、如果已刷新相应的多路径设备、则会返回错误。</block>
  <block id="bc5611c731b034c5f323419d0258aa44" category="list-text">Kubernetes：</block>
  <block id="98f7f8fbd26f9272ad6a29f2fb6c930b" category="list-text">为Trident部署和DemonSet添加了单独的ServiceAccount、ClusterRole和ClusterRoleBinding-以增强未来的权限。</block>
  <block id="609df46dff884c3eec4386eb8db4e358" category="inline-link-macro">跨命名空间卷共享</block>
  <block id="09065204259df86d4fe38c35ea23f5af" category="list-text">所有Trident<block ref="aa44e980d222d5134b5e0d8a062e1543" prefix=" " category="inline-code"></block> 现在、存储驱动程序可与ONTAP REST API配合使用。</block>
  <block id="8485ea08789af7b6b7b44e024b526f9b" category="list-text">添加了新的运算符YAML <block ref="5a02ebff4889c2de0379a0fb10bed282" prefix="(" category="inline-code"></block>)、而不使用<block ref="316707d12484dd3afede08839dee49bc" prefix=" " category="inline-code"></block> 以支持Kubernetes 1.25。</block>
  <block id="26e871bef43095263845143b043aee4f" category="inline-link-macro">支持LUKS加密卷</block>
  <block id="30b044636a9c63ab4b202192eec30c1c" category="list-text">增加了对Windows Server 2019节点的支持。</block>
  <block id="38b9dc57f44121e6d970b34eede9ad0d" category="inline-link-macro">支持Windows节点上的SMB卷</block>
  <block id="af8a9d07c7391207db96957ab59cb459" category="list-text">** Kubernetes：*已将支持的最低Kubernetes更新为1.20。</block>
  <block id="d667cfc8e8d6ec0c2352fe97b0f09e40" category="list-text">已删除Astra数据存储(ADS)驱动程序。</block>
  <block id="9b363ea2db99fe0dc5e9b43f47a37f20" category="list-text">删除了对的支持<block ref="a6105c0a611b41b08f1209506350279e" prefix=" " category="inline-code"></block> 和<block ref="8c319f28d81d1527a9428e9a5c2195f5" prefix=" " category="inline-code"></block> 选项<block ref="19b30dc119e514235b739e076be9b3cc" prefix=" " category="inline-code"></block> 为iSCSI配置工作节点多路径时。</block>
  <block id="1407cfeeb5e3916e1435ddea0f1c0a28" category="section-title">22.07中的更改</block>
  <block id="6f4b2a393838b7a42ebca342bdba2246" category="cell">v1.25.0</block>
  <block id="071d9becf308917b53d70c09e7da51b6" category="list-text">访问受支持的NetApp存储系统。</block>
  <block id="19eb712f406fc64109f96d9cf4055cb9" category="list-text">能够从所有Kubernetes工作节点挂载卷。</block>
  <block id="5f35b91e200cda68bf700d65b89c2c73" category="list-text">具有的Linux主机<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block> (或<block ref="fb024832e51eb5f6da9113a745f1eb59" prefix=" " category="inline-code"></block>(如果您使用的是OpenShift)已安装并配置为管理要使用的Kubernetes集群。</block>
  <block id="50f33d14f129e4548c1c270fd6725a78" category="section-title">配置选项</block>
  <block id="05f901da7fdacb9ca59e3d7e2d40f98d" category="cell"><block ref="0f4137ed1502b5045d6083aa258b5c42" prefix="" category="inline-code"></block></block>
  <block id="a3ff66cf5848a34d56915c8e879a5d52" category="section-title">配置示例</block>
  <block id="a6ba054ae6c021e3bc8a173393842c3d" category="paragraph">您可以在定义时使用上述属性<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 自定义安装。</block>
  <block id="3dabf672facbe8c5e2eeff030c2b8520" category="example-title">示例1：基本自定义配置</block>
  <block id="d21e69ca251cfbb211d0ee66fd06d5b3" category="paragraph">这是一个基本自定义配置示例。</block>
  <block id="8438aa96607926cc56a36b843e04244f" category="example-title">示例2：使用节点选择器部署</block>
  <block id="fd2915a467b0d801691fa5242e597f02" category="paragraph">此示例说明了如何使用节点选择器部署Trident：</block>
  <block id="aa5b232f08f4f3a911b242c500c5c9a1" category="example-title">示例3：在Windows工作节点上部署</block>
  <block id="74b19e3113c78692266e87afce12f681" category="paragraph">此示例说明了如何在Windows工作节点上部署。</block>
  <block id="8720cc63ac2a7bd9564830d7e775715e" category="paragraph"><block ref="210ab9e731c9c36c2c38db15c28a8d1c" prefix="" category="inline-code"></block> 标志：*<block ref="490aa9b616d8535386ddf1c7037f79a0" prefix=" " category="inline-code"></block>：卷帮助。*<block ref="e3bbbed29599d3e6e29ae22829ad7f13" prefix=" " category="inline-code"></block>：将查询限制为从源卷。*<block ref="aed2a4a749284f757648f1057abf44cd" prefix=" " category="inline-code"></block>：将查询限制为卷的下属。</block>
  <block id="5f82f4ab2783617b6e62bdd43d4a4e49" category="doc">准备使用ONTAP SAN驱动程序配置后端</block>
  <block id="19eb1a22d8687def5fb4904d3402728a" category="doc">在命名空间之间共享NFS卷</block>
  <block id="9553e9f0cb878601784cbe35c7767060" category="paragraph">使用Astra TridentVolumeReference CR、您可以在一个或多个Kubernetes命名空间之间安全地共享ReadWriteMany (rwx) NFS卷。此Kubernetes本机解决方案 具有以下优势：</block>
  <block id="6b456f0abe4c4d2f0beb62e5985136cf" category="list-text">可通过多个级别的访问控制来确保安全性</block>
  <block id="6e5d93bf8e8aaaa4795a50f012bc8fea" category="list-text">适用于所有Trident NFS卷驱动程序</block>
  <block id="0ece56dd58b5aabac15e0d0a30553bc0" category="list-text">不依赖于tridentctl或任何其他非本机Kubernetes功能</block>
  <block id="b6fcfcfd30bda2a77ebc74f23270f581" category="paragraph">此图显示了两个Kubernetes命名空间之间的NFS卷共享。</block>
  <block id="45208a2cac11f33c3e6af84d444ac7c5" category="image-alt">跨命名空间共享的概念图。</block>
  <block id="06ad314b340900d226b1196e1fe289e9" category="section-title">快速入门</block>
  <block id="f5b36cc36c8381e7577788dd4db2019d" category="paragraph">只需几个步骤即可设置NFS卷共享。</block>
  <block id="88b05b42d60719619c24f6101bcd381a" category="paragraph">源命名空间所有者授予访问源PVC中数据的权限。</block>
  <block id="7037976663710169f00563675ffd3f91" category="paragraph">集群管理员向目标命名空间的所有者授予创建TridentVolumeReference CR的权限。</block>
  <block id="46374486db0641fa4a3fc8e9c73766ed" category="paragraph">目标命名空间的所有者将创建TridentVolumeReference CR以引用源PVC。</block>
  <block id="33fefc8d535df49d886c4bc78a08e3e5" category="paragraph">目标命名空间的所有者创建从属PVC以使用源PVC中的数据源。</block>
  <block id="7238deab481379c03df561ea7c9b0e2e" category="section-title">配置源和目标命名空间</block>
  <block id="b23d212300860aa39d44f8fad02636a1" category="paragraph">为了确保安全性、跨命名空间共享需要源命名空间所有者、集群管理员和目标命名空间所有者的协作和操作。每个步骤都会指定用户角色。</block>
  <block id="aae019fccb9b3ffee1ee77e9e5f2377a" category="list-text">*源命名空间所有者：*创建PVC <block ref="30520f4f96804df83914260b79f55962" prefix="(" category="inline-code"></block>)、以授予与目标命名空间共享的权限 <block ref="6fde1ba4470caca933058264dbfdea2e" prefix="(" category="inline-code"></block>)<block ref="287f26e3328f9ac0f3f4da2cdaddd3e2" prefix=" " category="inline-code"></block> 标注。</block>
  <block id="3c2d838391ba40c10d124535dfb833e2" category="paragraph">Astra Trident会创建PV及其后端NFS存储卷。</block>
  <block id="365b452a5b5d2d01e1f193fc8bd9bf2c" category="list-text">您可以使用逗号分隔列表将PVC共享给多个命名空间。例如：<block ref="6b31015528f67fe4ce10b7c81957f601" prefix=" " category="inline-code"></block>。</block>
  <block id="fefd0d1f7e80bb8a4657265696b66694" category="list-text">您可以使用共享到所有命名空间<block ref="3389dae361af79b04c9c8e7057f60cc6" prefix=" " category="inline-code"></block>。例如：<block ref="e06421e15aa316addc52dd6c697027b7" prefix=" " category="inline-code"></block></block>
  <block id="bac5e1b9773b73b6702dfe25c8a61a05" category="list-text">您可以更新PVC以包括<block ref="287f26e3328f9ac0f3f4da2cdaddd3e2" prefix=" " category="inline-code"></block> 随时添加标注。</block>
  <block id="512fce88fc641bb15b14b72474159acd" category="list-text">*集群管理员：*创建自定义角色并执行kubeconfig、以授予目标命名空间所有者在目标命名空间中创建TridentVolumeReference CR的权限。</block>
  <block id="5f560764a361bf1159f8a6c8cbd15dad" category="list-text">*目标命名空间所有者：*在目标命名空间中创建引用源命名空间的TridentVolumeReference CR<block ref="30520f4f96804df83914260b79f55962" prefix=" " category="inline-code"></block>。</block>
  <block id="d9bb6497cda089fc4a386c685a97cffa" category="list-text">*目标命名空间所有者：*创建PVC <block ref="3f6857fc20ae2372499a71869ac3fe7e" prefix="(" category="inline-code"></block>) <block ref="6fde1ba4470caca933058264dbfdea2e" prefix="(" category="inline-code"></block>)<block ref="57c54cbee1c6ed3d5902aa1d8cd1e55a" prefix=" " category="inline-code"></block> 用于指定源PVC的标注。</block>
  <block id="e22f320aefbf1cdb3ccd68c26b050060" category="admonition">目标PVC的大小必须小于或等于源PVC。</block>
  <block id="c6e8d7b047a148bcf2aeae743c286bbb" category="paragraph">Astra Trident读取<block ref="57c54cbee1c6ed3d5902aa1d8cd1e55a" prefix=" " category="inline-code"></block> 在目标PVC上添加标注、并将目标PV创建为一个从属卷、而其自身没有指向源PV的存储资源、并共享源PV存储资源。目标PVC和PV显示为正常绑定。</block>
  <block id="a5ddf1dcee266e65795efb120a45d2cb" category="section-title">删除共享卷</block>
  <block id="2b71b549a21992aba927484a35ad72f6" category="paragraph">您可以删除跨多个命名空间共享的卷。Astra Trident将删除对源命名空间上卷的访问、并保持对共享该卷的其他命名空间的访问。删除引用卷的所有命名空间后、Astra Trident将删除该卷。</block>
  <block id="9f2f83b0c97d84774c1d61107283bb68" category="paragraph">使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 实用程序中、您可以运行<block ref="b5eda0a74558a342cf659187f06f746f" prefix=" " category="inline-code"></block> 用于获取从属卷的命令。有关详细信息、请参见链接：./trident referation/tridentctl.html<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix="[" category="inline-code"></block> 命令和选项]。</block>
  <block id="b1cc54ad6906d5f41516543bae01e46f" category="list-text"><block ref="490aa9b616d8535386ddf1c7037f79a0" prefix="" category="inline-code"></block>：卷帮助。</block>
  <block id="20668f390d13376c8d13ab4b20a53b5d" category="list-text"><block ref="e3bbbed29599d3e6e29ae22829ad7f13" prefix="" category="inline-code"></block>：将查询限制为从源卷。</block>
  <block id="92c22bb3853554f94f513a2d2f36e8ef" category="list-text"><block ref="aed2a4a749284f757648f1057abf44cd" prefix="" category="inline-code"></block>：将查询限制为卷的下属。</block>
  <block id="3ad6cc2d4a6ad6fbd07574653275a161" category="list-text">Astra Trident无法阻止目标命名空间写入共享卷。您应使用文件锁定或其他进程来防止覆盖共享卷数据。</block>
  <block id="3908892c437778f8b161a2ca006782cd" category="list-text">无法在从属卷上执行快照、克隆和镜像。</block>
  <block id="aec47cf6a0cb83824b504b756eb4b71c" category="doc">准备配置Azure NetApp Files 后端</block>
  <block id="97d64245613ba751b698ce77fd51779a" category="inline-link">Azure：设置Azure NetApp Files 并创建NFS卷</block>
  <block id="caa7dc98c21b44b17c214508b9b0fa3c" category="list-text"><block ref="bc54592d6183695b841c6d1880ec0bf8" prefix="" category="inline-code"></block>，<block ref="93c5bebdea9c94a0740fe6fd9bb250f0" prefix=" " category="inline-code"></block>，和<block ref="2b53761249254ce6b502f521e5cc0683" prefix=" " category="inline-code"></block> 从 <block ref="63405c89f422580946169fa59c41e7ae" category="inline-link-macro-rx"></block> 在 Azure Active Directory 中，具有足够的 Azure NetApp Files 服务权限。应用程序注册应使用以下任一项：</block>
  <block id="ee495045d2c4c5131217a0248a404b4d" category="inline-link-macro">由Azure预定义</block>
  <block id="2fbc632d5939633cc9c3b254d116080f" category="inline-link-macro">自定义贡献者角色</block>
  <block id="b0ee19cc46a4fb3df97c1c676c0a5d57" category="inline-link-macro">使用Azure门户分配角色</block>
  <block id="993c1a80e778c965961521eeb4afd398" category="list-text">答 <block ref="8ad3956583058d3582a7dd1281d1f882" category="inline-link-macro-rx"></block> 订阅级别 <block ref="e023f2926fb9af676f2809a760efeb14" prefix="(" category="inline-code"></block>)、并具有以下权限、这些权限仅限于Astra Trident所需的权限。创建自定义角色后、 <block ref="af58105ed429db29198b767444ed6d0d" category="inline-link-macro-rx"></block>。</block>
  <block id="daba51cb28ea016a4e85ad77defc5a2c" category="list-text">Azure<block ref="d5189de027922f81005951e6efe0efd5" prefix=" " category="inline-code"></block> 至少包含一个 <block ref="e2df5d3690a644a8599397d798c15f56" category="inline-link-macro-rx"></block>。自Trident 22.01日开始<block ref="d5189de027922f81005951e6efe0efd5" prefix=" " category="inline-code"></block> 参数是后端配置文件顶层的必填字段。在虚拟池中指定的位置值将被忽略。</block>
  <block id="77a4a369d552f7d3be163bda86f9113f" category="section-title">SMB卷的其他要求</block>
  <block id="1f43150a13f29c496f07ed4a9750b2ff" category="list-text">一个Kubernetes集群、其中包含一个Linux控制器节点以及至少一个运行Windows Server 2019的Windows工作节点。Astra Trident仅支持将SMB卷挂载到Windows节点上运行的Pod。</block>
  <block id="7595de66780a622cdd37b4823afebc07" category="inline-link-macro">GitHub：CSI代理</block>
  <block id="c680a0c023a6d45186b9752a07e9938c" category="inline-link-macro">GitHub：适用于Windows的CSI代理</block>
  <block id="2d6b406e65ac91f2af09f4228e3efe4f" category="list-text">配置为Windows服务的CSI代理。配置<block ref="0f8126c17871ed45f2a848f15d96a1bb" prefix=" " category="inline-code"></block>、请参见 <block ref="3ca23c6eadaac7aa23a492aef5e5d012" category="inline-link-macro-rx"></block> 或 <block ref="0b56a9ad79a8fef177779e7d3d856994" category="inline-link-macro-rx"></block> 适用于在Windows上运行的Kubernetes节点。</block>
  <block id="3fec7156504f6ca677ea0a137456913e" category="summary">了解如何使用提供的示例配置将适用于Google Cloud的Cloud Volumes Service 配置为Astra Trident安装的后端。</block>
  <block id="eb89f16d07a93fa10a31ec6309045fe9" category="doc">ONTAP SAN配置选项和示例</block>
  <block id="b8ae61dc50cf8e8b79e68bc4a8d36393" category="cell"><block ref="0f179ba2bc32ab5d8f60692f5b800c86" prefix="" category="inline-code"></block></block>
  <block id="a56dcba8eacdac67fb510e1434d560d8" category="inline-link-macro">使用Linux统一密钥设置(LUKS)</block>
  <block id="fd05c90de484dbc1cb963df796886af4" category="doc">准备使用ONTAP NAS驱动程序配置后端</block>
  <block id="17a48ec106d5505e674ccdf56fce1058" category="doc">Azure NetApp Files 后端配置选项和示例</block>
  <block id="5fe26149fa172056aee5f841415c55fa" category="admonition">Astra Trident 不支持手动 QoS 容量池。</block>
  <block id="55eaeeb515ba1b8a42eb736b0e58f41f" category="cell">一个卷的一组vNet功能可能是<block ref="972e73b7a882d0802a4e3a16946a2f94" prefix=" " category="inline-code"></block> 或<block ref="eb6d8ae6f20283755b339c0dc273988b" prefix=" " category="inline-code"></block>。网络功能并非在所有地区都可用、可能需要在订阅中启用。指定 <block ref="b0fdc9c7b96e4249152c61b506703142" prefix=" " category="inline-code"></block> 如果未启用此功能、则会导致卷配置失败。</block>
  <block id="cc3d42de123c784e8d8e3c8404b943be" category="cell">精细控制 NFS 挂载选项。SMB卷已忽略。要使用NFS 4.1挂载卷、请包括 <block ref="c72da907ddca73ee114d92e5e098ce0e" prefix=" " category="inline-code"></block> 在逗号分隔的挂载选项列表中选择NFS v4.1。存储类定义中设置的挂载选项会覆盖后端配置中设置的挂载选项。</block>
  <block id="f0873081464f48da27a1068215270c60" category="cell"><block ref="296026821ada2ab8aebcf13547a63df5" prefix="" category="inline-code"></block></block>
  <block id="c0a4a0396978d1ad8816d2e358a2f05e" category="cell">配置NFS或SMB卷创建。选项包括<block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix=" " category="inline-code"></block>，<block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix=" " category="inline-code"></block> 或为空。默认情况下、将设置为空会将NFS卷设置为空。</block>
  <block id="71e598dd105d32592243532b55392c55" category="cell"><block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix="" category="inline-code"></block></block>
  <block id="8cacf42dcc11f9e7779267100d4fd305" category="inline-link-macro">配置Azure NetApp Files 卷的网络功能</block>
  <block id="4ace77649689419cf09eed38ddf4e74c" category="admonition">有关网络功能的详细信息、请参见 <block ref="d4c16e3034c39d54544a2d5f2b2953d9" category="inline-link-macro-rx"></block>。</block>
  <block id="d37198994935307f0e4a95505678642e" category="section-title">所需权限和资源</block>
  <block id="1860dce26ad531b08f4b17950bbda6a7" category="paragraph">的值<block ref="6a3560738716ddd805d769d4460ca7aa" prefix=" " category="inline-code"></block>，<block ref="87d26f327b9deeb6141721bda7f8ca65" prefix=" " category="inline-code"></block>，<block ref="338b00a62e6d8d3234c056bf48b711d0" prefix=" " category="inline-code"></block>，<block ref="a88edbe6cce8d8f180d87bef83408312" prefix=" " category="inline-code"></block>，和<block ref="4f556606ab1f7cb51dd23811407facbd" prefix=" " category="inline-code"></block> 可以使用短名称或完全限定名称来指定。在大多数情况下、建议使用完全限定名称、因为短名称可以与多个同名资源匹配。</block>
  <block id="8771cfaef1f991e1642d0a1ece8dcfa3" category="paragraph">。<block ref="6a3560738716ddd805d769d4460ca7aa" prefix=" " category="inline-code"></block>，<block ref="87d26f327b9deeb6141721bda7f8ca65" prefix=" " category="inline-code"></block>，和<block ref="338b00a62e6d8d3234c056bf48b711d0" prefix=" " category="inline-code"></block> 值是指筛选器、用于将发现的一组资源限制为此存储后端可用的资源、并且可以以任意组合方式指定。完全限定名称采用以下格式：</block>
  <block id="be1b9ef68f31ecee991e2282c1f24f0f" category="section-title">卷配置</block>
  <block id="6154de53659ccfe0ba0733effdb2da13" category="paragraph">您可以通过在配置文件的特殊部分中指定以下选项来控制默认卷配置。请参见 <block ref="c850cc933797a5d4472ae11f15a5ef5e" category="inline-xref-macro-rx"></block> 了解详细信息。</block>
  <block id="ea221277b2f168f5e17d112765f4a1c0" category="cell">新卷的导出规则。<block ref="c72971f17465d2a32345bc872af62a34" prefix=" " category="inline-code"></block> 必须是以CIDR表示法表示的任意IPv4地址或IPv4子网组合的逗号分隔列表。SMB卷已忽略。</block>
  <block id="21590b83460bd480131384ef53bdccc4" category="cell">新卷的UNIX权限(4个八进制数字)。SMB卷已忽略。</block>
  <block id="10c0eb6973453da95b4ef937f19ddb6c" category="section-title">示例配置</block>
  <block id="c0b04213f295bd61098649d5dec24291" category="section-title">存储类定义</block>
  <block id="cad675ae3fb846705512fe460e615ac3" category="paragraph">以下内容<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block> 定义是指上述存储池。</block>
  <block id="1abbfd87ab307af55b755fd27ce60191" category="paragraph">使用<block ref="4d859186a09b1da3597e5901157d9400" prefix=" " category="inline-code"></block> 您可以为每个指定<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block> 用于托管卷的虚拟池。卷将在选定池中定义各个方面。</block>
  <block id="4b7db799aa8307d15835ff36beb1b97c" category="section-title">SMB卷的示例定义</block>
  <block id="82b60bb483328d8efe9240dc8aa4a600" category="paragraph">使用<block ref="296026821ada2ab8aebcf13547a63df5" prefix=" " category="inline-code"></block>，<block ref="e12fdd044232e643620eed06bf33c7af" prefix=" " category="inline-code"></block>，和 <block ref="1ad68a6a046942b7c1666aed825df70a" prefix=" " category="inline-code"></block>、您可以指定SMB卷并提供所需的Active Directory凭据。</block>
  <block id="6de60e9a6b0ad8adcd762a8c85d540e2" category="example-title">示例1：默认命名空间上的基本配置</block>
  <block id="1d8d21debc328526252944d2264246ca" category="example-title">示例2：每个命名空间使用不同的密钥</block>
  <block id="06bb6ebc4dada525717294b660ba2b3b" category="example-title">示例3：每个卷使用不同的密钥</block>
  <block id="c51cc3b801a879870aea846bdde1c7a3" category="section-title">创建后端</block>
  <block id="7d8058d93ec1d95c673d83bf303326ff" category="doc">ONTAP NAS配置选项和示例</block>
  <block id="ea61e2c2ff507048203824add1eb7c21" category="section-title">注意事项</block>
  <block id="8f395c84ad002394e9f070a25937dcc4" category="list-text">Azure NetApp Files 服务不支持小于100 GB的卷。如果请求的卷较小，则 Astra Trident 会自动创建 100 GB 的卷。</block>
  <block id="1cf44a6bee7fa333861e5d0042926fb5" category="list-text">Astra Trident仅支持将SMB卷挂载到Windows节点上运行的Pod。</block>
  <block id="ef0f938ae67a04ac3370fe516c2a6baf" category="list-text">增加了对Kubernetes 1.25的支持。在升级到Kubernetes 1.25之前、您必须将Astra Trident升级到22.10。</block>
  <block id="d041a310ba7cc2599250e64801594107" category="list-text">增加了对的支持 <block ref="ca184a2eda203b6d98158bdf24e5cf7d" category="inline-link-macro-rx"></block>。</block>
  <block id="adbfe36f6399f2846983b2901604a962" category="list-text">已添加 <block ref="40be42d37bc6014716dcd0a1d368ffb5" category="inline-link-macro-rx"></block> 通过<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block> 存储驱动程序。</block>
  <block id="f18a50f02f48551895d57b81dd288142" category="sidebar">在命名空间之间共享NFS卷</block>
  <block id="fd1117c82327fbe8671f26e897ceb8f4" category="inline-link-macro">使用BlueXP的Astra Trident</block>
  <block id="a76a1e164520105317267dc41b95e8ce" category="paragraph">使用 <block ref="f8c16e8c21124ccc028d2db7fd32a98f" category="inline-link-macro-rx"></block>、您可以升级到最新版本的Astra Trident、添加和管理存储类并将其连接到工作环境、以及使用Cloud Backup Service 备份永久性卷。BlueXP支持使用Trident操作员手动或使用Helm部署Astra Trident。</block>
  <block id="6ce33e8f1e198bf1c3583bc5ef789b75" category="paragraph">您可以使用后端定义文件中的加密参数在 Trident 配置的卷上设置加密。有关详细信息、请参见： <block ref="3260a21902518174ce8d9bfef42be276" category="inline-link-macro-rx"></block></block>
  <block id="66f2c42a4ca561f5472459301bc7d096" category="list-text">ONTAP 驱动程序的自动MetroCluster 切换检测现已全面推出。</block>
  <block id="e87ded5ef8bc8adbc3c135528636f4f2" category="list-text"><block ref="e87ded5ef8bc8adbc3c135528636f4f2" category="inline-link-macro-rx"></block></block>
  <block id="fce586d9f649fb529d0a1846495ba259" category="list-text"><block ref="fce586d9f649fb529d0a1846495ba259" category="inline-link-macro-rx"></block></block>
  <block id="ecd7650a65b79124ad23fb7eed8faa7e" category="paragraph">NetApp产品组合中的每个存储平台都具有独特的功能、无论应用程序是容器化还是非容器化、都能从中受益。</block>
  <block id="e6dc22cf3c59dda6e09524b2b133f336" category="section-title">平台概述</block>
  <block id="050fb8b0306d7532dbf8c15b8cba9745" category="paragraph">Trident 可与 ONTAP 和 Element 结合使用。没有一个平台比另一个平台更适合所有应用程序和场景，但是，在选择平台时，应考虑应用程序和设备管理团队的需求。</block>
  <block id="31b1d21fc5180ec9a5b3d9d7d5ce3295" category="paragraph">https://&lt;login&gt;:&lt;password&gt;@&lt;mvip&gt;/json-rpc/&lt;element-version&gt;</block>
  <block id="8eadd25d5b4b5d0637cc13cd7349ce5d" category="paragraph">https://admin:admin@192.168.160.3/json-rpc/8.0</block>
  <block id="88825f48aa3e053d7df66897e8b63e38" category="section-title">验证要求</block>
  <block id="6bee7851f8606d588c9122b234c202e3" category="list-text">验证您的部署是否满足所有要求 <block ref="6fc1811f5f9a8ae54793544600e2dff7" category="inline-link-macro-rx"></block>。</block>
  <block id="38b6e376f2701385062dee4bb00e03d2" category="summary">您可以使用Astra Trident安装程序自定义部署。</block>
  <block id="0dabff490bbf6c7e308950959cc5a024" category="section-title">了解安装程序</block>
  <block id="1637137b97f70f3de86dbf02ba8c262b" category="paragraph">使用Astra Trident安装程序可以自定义属性。例如、如果已将Trident映像复制到专用存储库、则可以使用指定映像名称<block ref="00e6ff45e8bcc6b9e35e9c68d8d5135c" prefix=" " category="inline-code"></block>。如果已将Trident映像以及所需的CSI sidecar映像复制到专用存储库、则最好使用指定该存储库的位置<block ref="53b228c1c8295f49b0c35325e14fcd6a" prefix=" " category="inline-code"></block> 交换机、其形式为<block ref="c4c34dc2c7d5cb25c084ca11127ba1c6" prefix=" " category="inline-code"></block>。</block>
  <block id="99c850b82f45e568828f2a8c5ab8f94d" category="section-title">了解卷访问组</block>
  <block id="7c14ddfe8f627e4786f4da7cd4cea9ba" category="section-title">存储类关联</block>
  <block id="ab4589eca69db942d79a0dbbd9ec8399" category="section-title">卷创建</block>
  <block id="3b878279a04dc47d60932cb294d96259" category="section-title">概述</block>
  <block id="a6fbed601c3d014f6d8342990aeee0b5" category="section-title">了解如何创建卷快照</block>
  <block id="65e30750e10ee81a457f6e2a2d52b4a4" category="section-title">可用的命令和选项</block>
  <block id="bd75dd911fd79061ecd2d46e65ed7f74" category="paragraph">同时 <block ref="8321852d17a287399cb52ef30f4b21eb" category="inline-link-macro-rx"></block> 是与Astra Trident REST API交互的最简单方式、您可以根据需要直接使用REST端点。</block>
  <block id="7a72a102c2990b674624e8b6ec834e4d" category="section-title">何时使用REST API</block>
  <block id="d08436e363d4793fd6a0de3022ebfd63" category="paragraph">REST API适用于在非Kubernetes部署中使用Astra Trident作为独立二进制文件的高级安装。</block>
  <block id="14dc7970933630896b0232f2a8b52039" category="paragraph">为了提高安全性、我们使用了Astra Trident<block ref="aba3d4b49c454e1974970e7b5514b001" prefix=" " category="inline-code"></block> 默认情况下、在Pod内部运行时、仅限于localhost。要更改此行为、您需要设置Astra Trident<block ref="38df54fe961fa2bf2a7f82a5854fabad" prefix=" " category="inline-code"></block> 参数。</block>
  <block id="eee97547fb40d9c4df018377ac6478bb" category="section-title">使用REST API</block>
  <block id="ee656aff7dc78e280efdea39a682afbb" category="section-title">升级前的注意事项</block>
  <block id="4e9ac50b8f51023570ef0b0a0a827912" category="inline-link-macro">支持的Kubernetes版本</block>
  <block id="c27e444dab3a08bf8ec59794897c1a27" category="inline-link-macro">支持的Kubernetes版本</block>
  <block id="756efcb3a97cdd37e8b34de3913c3d8f" category="paragraph">请参见 <block ref="18d5551396fb2ce2e009cfdb709e4875" category="inline-link-macro-rx"></block>。确保满足前提条件后，即可部署 Astra Trident 。</block>
  <block id="0d41f8565b8b74a59fc029ccf2becd83" category="list-text">使用受管插件系统启动 Astra Trident 。替换<block ref="3d689bd3819ead35ed794427bd12f459" prefix=" " category="inline-code"></block> 您正在使用的插件版本(xxx.xx.x)。</block>
  <block id="4f0e7dc30ffb3e25e75331c9afb2243a" category="cell">卷模式</block>
  <block id="28c142639a9bbdd526b8eb986c13907d" category="paragraph">无文件系统；原始块设备</block>
  <block id="0453a3e06be842b09a9479fe06f0dd13" category="paragraph">rwx在文件系统卷模式下不可用。</block>
  <block id="964ea71824e902693c3ef56b57cf78be" category="summary">使用Astra Trident、您可以在主命名空间中创建卷、并在一个或多个二级命名空间中共享该卷。</block>
  <block id="98f770b0af18ca763421bac22b4b6805" category="section-title">功能</block>
  <block id="8ff961668c6784e84b25c265cbb629d7" category="paragraph">要了解有关跨命名空间卷访问的详细信息、请执行以下操作：</block>
  <block id="f1cfea5f1444de607dfa549b3aa57010" category="inline-link-macro">在命名空间之间共享卷：对跨命名空间卷访问说Hello</block>
  <block id="2780f690b7670efc296ac19ef3029d0c" category="list-text">请访问 <block ref="b0d29f1b2abb2cc552e4cc47177582ef" category="inline-link-macro-rx"></block>。</block>
  <block id="96e1384807331548bf745acde0fe1b73" category="inline-link-macro">NetAppTV</block>
  <block id="414883f8b6ef58c7b3b37e66fbfd482f" category="list-text">观看演示 <block ref="1945a2d4809e81668f29485f6ae1bbc8" category="inline-link-macro-rx"></block>。</block>
  <block id="bd2cc8575fe69c7f775292759380c838" category="inline-link-macro">bundle_pre_1_25.yaml</block>
  <block id="5a02ebff4889c2de0379a0fb10bed282" category="inline-link-macro">bundle_post_1_25.yaml</block>
  <block id="6f8896eb5896943e1606d92193f72fb8" category="section-title">使用对未成功的Trident部署进行故障排除<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block></block>
  <block id="d59db7846bd10b6d60d21543df9faa9e" category="paragraph-title">您需要的内容</block>
  <block id="6c6e605e09d47da14693d106977b6eb0" category="section-title">管理<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 后端使用<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block></block>
  <block id="78fb4311dea625690d7fb6274025625a" category="section-title">第2步：创建<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR</block>
  <block id="d6f4b4bedc693acd49ad08c1cf0cdad5" category="section-title">第3步：验证的状态<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR</block>
  <block id="a035fed1dd97545349b5fffbd9e3e88f" category="section-title">管理<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> 后端使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block></block>
  <block id="0901a332c26ed210204bad23d45c8b6d" category="section-title">第1步：确认<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block> 设置为<block ref="16d79ff80feadcf2f52096f073f2b94a" prefix=" " category="inline-code"></block></block>
  <block id="2f1beb23541bc11eb53ca6b33485d4f8" category="section-title">第2步：删除<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR</block>
  <block id="06c2cea18679d64399783748fa367bdd" category="inline-image-macro">一个</block>
  <block id="32ec9b4824220f8ae03a723da009cd54" category="paragraph-title"><block ref="58f667aaf05f87159670e12bd9bc076b" category="inline-image-macro-rx" type="image"></block> 配置源PVC以共享卷</block>
  <block id="aada29daee1d64ed0fe907043855cb7e" category="inline-image-macro">两个</block>
  <block id="82a9b6c32a91a1f4a714d648f5d3260f" category="paragraph-title"><block ref="54f425ce8d89f4ed6b8a546561af5d60" category="inline-image-macro-rx" type="image"></block> 授予在目标命名空间中创建CR的权限</block>
  <block id="ca8a2087e5557e317599344687a57391" category="inline-image-macro">三个</block>
  <block id="311a877e773f97b1e237db665a868dd9" category="paragraph-title"><block ref="05b2444faffd66d76e88602ea7dd353f" category="inline-image-macro-rx" type="image"></block> 在目标命名空间中创建TridentVolumeReference</block>
  <block id="981b8fcee42e1e726a67a2b9a98ea6e9" category="inline-image-macro">四个</block>
  <block id="fb16fc9d34d26a8e74ba1a7180766513" category="paragraph-title"><block ref="beadfa85a2fdca06b91edc1131c603e6" category="inline-image-macro-rx" type="image"></block> 在目标命名空间中创建从属PVC</block>
  <block id="fd69c5cf902969e6fb71d043085ddee6" category="paragraph-title">结果</block>
  <block id="3f8e335666124e3b7f5db07f03fef0b1" category="section-title">使用 ...<block ref="fed7609223e8cae53e079facb24f3426" prefix=" " category="inline-code"></block> 查询从属卷</block>
  <block id="260817022a7340fc89eae3e7dbed8f6a" category="section-title">使用的示例定义<block ref="4d859186a09b1da3597e5901157d9400" prefix=" " category="inline-code"></block> 字段</block>
  <block id="19ef07597f79648211dbed100709836b" category="section-title">更新后端以包括<block ref="1f2a94e142bf020b1f7c6297ec12413f" prefix=" " category="inline-code"></block></block>
  <block id="891d26d5e7410db6c0a971245c6025c0" category="section-title">示例1：的后端配置<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> 具有三种卷类型的驱动程序</block>
  <block id="454631312fab234fc91bb2f85a751fac" category="section-title"><block ref="913a4b06671d1e04e6582a85afe3abbe" prefix="" category="inline-code"></block></block>
  <block id="e892fda55ead7e15eed753e850d35f12" category="section-title">第2步：创建<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR</block>
  <block id="74257eabdceb63f8522f7c68b103da3a" category="section-title">禁用<block ref="d51321f13693d09d4a9cbb2758b42d12" prefix=" " category="inline-code"></block> 用于应用程序SVM</block>
  <block id="e49cf31f5ed35f0eb694c7714e8c3234" category="section-title"><block ref="76ea0bebb3c22822b4f0dd9c9fd021c5" prefix="" category="inline-code"></block></block>
  <block id="3649b15e31d22a1e2210f014d843b9fa" category="section-title"><block ref="099af53f601532dbd31e0ea99ffdeb64" prefix="" category="inline-code"></block></block>
  <block id="a4027ed0f56ae6ac2cbb7605a519932b" category="section-title"><block ref="b5eda0a74558a342cf659187f06f746f" prefix="" category="inline-code"></block></block>
  <block id="7920cf9e1a990d156e390321c1d5efeb" category="section-title"><block ref="59b514174bffe4ae402b3d63aad79fe0" prefix="" category="inline-code"></block></block>
  <block id="df6d9d5a4c545407095ea4ca424e9457" category="section-title"><block ref="f6c534966bc7687e0c87134d025f8837" prefix="" category="inline-code"></block></block>
  <block id="cc27cfd3259c2299d8dece590d5f6985" category="section-title"><block ref="19ad89bc3e3c9d7ef68b89523eff1987" prefix="" category="inline-code"></block></block>
  <block id="2acfb4ba14a6f33d7e82e8d1dda6542f" category="section-title"><block ref="2165e4fa5bddb65a31f6a0c495c2fa37" prefix="" category="inline-code"></block></block>
  <block id="9ce837bc2492d4ed390bc5d1ea9d1437" category="section-title"><block ref="2541d938b0a58946090d7abdde0d3890" prefix="" category="inline-code"></block></block>
  <block id="30cf71e674825d319eb0406032c1a80b" category="section-title"><block ref="3ac340832f29c11538fbe2d6f75e8bcc" prefix="" category="inline-code"></block></block>
  <block id="c4e2f712f33e39883cdadc27311ff798" category="section-title">Kubernetes<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block> 对象</block>
  <block id="40f23ed795a1a88d4da7ac2ef847ff7f" category="section-title">Kubernetes<block ref="858e55ea2e6429120a862313c50a9f5f" prefix=" " category="inline-code"></block> 对象</block>
  <block id="7df5b64daec466033329296995f05735" category="section-title">Kubernetes<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block> 对象</block>
  <block id="db36743614e87531d560fe8ae0bc6c7d" category="section-title">Kubernetes<block ref="19476662cd814e0aa085eca121de89b8" prefix=" " category="inline-code"></block> 对象</block>
  <block id="63f2f0978770be469911c5f1722d82ca" category="section-title">Kubernetes<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block> 对象</block>
  <block id="1ca312948dba5b1321da24bc362f4148" category="section-title">Kubernetes<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block> 对象</block>
  <block id="4171707fb2a131f0fae96196310c5e3b" category="section-title">Kubernetes<block ref="99bc4b850e05bafd67cf5f5f49344c1e" prefix=" " category="inline-code"></block> 对象</block>
  <block id="65589e383667ac98801982f7e9704f2a" category="section-title">Astra Trident<block ref="0b79951d94d2a7fc1f7ba55091959bda" prefix=" " category="inline-code"></block> 对象</block>
  <block id="4f89992961c018acecad7b373dcce336" category="section-title">清理<block ref="0b79951d94d2a7fc1f7ba55091959bda" prefix=" " category="inline-code"></block> 如果安装失败</block>
  <block id="b9984d1eca39b86eb39cedf7db8f8c62" category="section-title">删除<block ref="0b79951d94d2a7fc1f7ba55091959bda" prefix=" " category="inline-code"></block></block>
  <block id="d3f7afc310875b4ea262305c6d7d6ca2" category="section-title"><block ref="7528035a93ee69cedb1dbddb2f0bfcc8" prefix="" category="inline-code"></block></block>
  <block id="1713a64319d60f7c9dce75d4e48ee14f" category="section-title"><block ref="a02439ec229d8be0e74b0c1602392310" prefix="" category="inline-code"></block></block>
  <block id="e4bcff97a02bbf2d15fc5a1c18b2b3dc" category="section-title"><block ref="32f68a60cef40faedbc6af20298c1a1e" prefix="" category="inline-code"></block></block>
  <block id="cc414e256eb2f4bb405602498ece0af6" category="section-title">了解适用于GCP的CVS的Astra Trident支持</block>
  <block id="a3edb76d25dfeb8d67e4711eafd2b5ca" category="paragraph">为存储系统选择并部署后端驱动程序。</block>
  <block id="a57628924f909d4edd5cb81ee4f10896" category="section-title">ONTAP 后端驱动程序</block>
  <block id="4ea57c8a88545a4fc2039131bc6fd74d" category="paragraph">ONTAP 后端驱动程序可通过所使用的协议以及在存储系统上配置卷的方式来区分。因此、在确定要部署的驱动程序时、请仔细考虑。</block>
  <block id="642b59503457da90c85cbb7a35e02089" category="paragraph">可用的ONTAP 后端驱动程序包括：</block>
  <block id="e44e590e4645ab9ef08fb84f61cede17" category="section-title">Cloud Volumes ONTAP 后端驱动程序</block>
  <block id="fdde450e1a16aa1461e62c6fa5ac621f" category="section-title">适用于ONTAP 的Amazon FSX后端驱动程序</block>
  <block id="d079959bb7c738f4e1704de5ff69b897" category="section-title">NetApp HCI/SolidFire后端驱动程序</block>
  <block id="64648abd6d020446c9c8d556a1584d71" category="section-title">Azure NetApp Files 后端驱动程序</block>
  <block id="0dceb918cb4a4d7dcbe5af26d08e7657" category="section-title">特定后端利用率</block>
  <block id="ebaf90f7386ae95e7960a2fc0084116e" category="section-title">模拟QoS策略</block>
  <block id="125ad0610423d53866d257eb097320e4" category="section-title">根据特定功能使用后端</block>
  <block id="b6e026d8066036cf2628237905a58384" category="section-title">模拟不同的服务级别/QoS</block>
  <block id="628fd4af2a4e2fce014efbf03b84bb71" category="section-title">分配特定的方面</block>
  <block id="a599393b295f7ad56a8c7f1d327290de" category="paragraph">此示例将创建现有PVC的快照。</block>
  <block id="f6bd0d7447ff66cc6b859603a88fbde9" category="section-title">相关链接</block>
  <block id="35aa4a2a819e526c2e930e487df8d423" category="list-text"><block ref="35aa4a2a819e526c2e930e487df8d423" category="inline-link-macro-rx"></block></block>
  <block id="19476662cd814e0aa085eca121de89b8" category="inline-link-macro">VolumeSnapshotClass</block>
  <block id="d63cadc96caf4b05f8fa532b08e889da" category="list-text"><block ref="d63cadc96caf4b05f8fa532b08e889da" category="inline-link-macro-rx"></block></block>
  <block id="3b64653c97a388d828849314b6a1b383" category="cell">池的标签值必须：</block>
  <block id="6da89265a9a8b0b28eb4946bb2ec0c6d" category="cell">匹配</block>
  <block id="ecf92052d55345fee4602d9eb8c22063" category="cell">不匹配</block>
  <block id="c6c1caf73b0f83d807abe5a717014ab7" category="cell">位于一组值中</block>
  <block id="8daf6b016f4033d59900c23f162c0f73" category="cell">不在值集内</block>
  <block id="c6bfba38b789fec8271d1d1496a9ee59" category="cell"><block ref="42538adbdb6240b2b083a000a615d5bd" prefix="" category="inline-code"></block></block>
  <block id="152f5dc0f7ac734f8e8ee17d4a482462" category="cell">protection</block>
  <block id="7b532e697a35209f3df3956577cc3d9c" category="cell">存在任何值</block>
  <block id="eb0254f1d0a82e646c239d4d2e2f83ac" category="cell"><block ref="f65e5ff2a1bb1af969dccabe7dcd5cdd" prefix="" category="inline-code"></block></block>
  <block id="67a3b723b2d9024808eb2c6e686d00a0" category="cell">！保护</block>
  <block id="1fde97909b90bb329db2062f7744bd45" category="cell">不存在</block>
  <block id="5eb07a7cb7d445ef6bbb17270c65cf52" category="list-text">如果使用RHCOS 4.5或更高版本或其他与RHEL兼容的Linux分发版、请与结合使用<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> 驱动程序和Element OS 12：5或更早版本、请确保中的CHAP身份验证算法设置为MD5<block ref="104f48adc29dc1e1d7c9bbe7b5dd3f8d" prefix=" " category="inline-code"></block>。Element 12.7提供了符合FIPS的安全CHAP算法SHA1、SHA-256和SHA3-256。</block>
  <block id="18c20e5d2e368f36f420dd39019d460f" category="list-text">如果使用<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> 驱动程序对于OpenShift 4.5、请确保底层工作节点使用MD5作为CHAP身份验证算法。Element 12.7提供了符合FIPS的安全CHAP算法SHA1、SHA-256和SHA3-256。</block>
  <block id="5896cc977dd7b9854957e18a2a5bf072" category="cell">要为创建的卷分配的自适应 QoS 策略组。选择每个存储池 / 后端的 qosPolicy 或 adaptiveQosPolicy 之一。不受 ontap-nas-economy.</block>
  <block id="19ab49765cdd2c8ab592eb40eeff08cf" category="cell">ontap-san、solidfire-san、ontap-san-economy.</block>
  <block id="054b5072368dea4f8748909c16c7de98" category="cell">Thick：All ONTAP ；Thin：All ONTAP &amp; solidfire-san</block>
  <block id="dbdc06f8742b98dcacdf7fdb1af111ea" category="paragraph">ontap-nas、ontap-nas-economy. ontap-nas-flexgroup、ontap-san、solidfire-san、GCP-CVS、azure-netapp-files、ontap-san-economy.</block>
  <block id="f888aa18c19e41f8c1263fa99ca8b94c" category="cell">solidfire-san、ontap-nas、ontap-nas-economy. ontap-nas-flexgroup、ontap-san、ontap-san-economy.</block>
  <block id="05a2712653dfbf7d695c18242d9848e6" category="paragraph">RHEL 8+</block>
  <block id="bba4e1b8d8614fe9da2d67e2dcef4b52" category="paragraph"><block ref="8321592ce24c8a122ecf26a63cfca407" prefix="" category="inline-code"></block>，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>，<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>，<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>，<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block></block>
  <block id="c95cada2a569592345ebc18e5ef4c7aa" category="paragraph">协议 LIF 的 IP 地址。</block>
  <block id="8d9cb98e50e02ba3850a7ebcaeccc076" category="paragraph">* ONTAP NAS驱动程序*：建议指定<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>。如果未提供此参数、则Astra Trident会从SVM提取数据LIF。您可以指定用于NFS挂载操作的完全限定域名(FQDN)、从而可以创建循环DNS、以便在多个数据LIF之间实现负载平衡。</block>
  <block id="25edde63e4922bb316018c25888e64a6" category="inline-link-macro">ONTAP 选择性LUN映射</block>
  <block id="d26c127ab3dc860f4758d7b6a9b70413" category="paragraph">* ONTAP SAN驱动程序*：不为iSCSI指定。Astra Trident使用 <block ref="2de2f329c45219df280af5a70ed7a17c" category="inline-link-macro-rx"></block> 发现建立多路径会话所需的iSCI LIF。如果出现、则会生成警告<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block> 已明确定义。</block>
  <block id="0350980c728940d67af063bb5d711f0f" category="paragraph">有关基于系统d的系统的示例单元文件、请参见<block ref="50a97f9b0dec64cc53ca48406c60fe4d" prefix=" " category="inline-code"></block> 在Git repo.要对RHEL使用此文件、请执行以下操作：</block>
  <block id="2f6c694f9d016c7193ece4853c402d96" category="doc">自定义Trident操作员安装</block>
  <block id="79445b5dba623a55ad4d974712853c2f" category="cell"><block ref="2b8b5018006a800ae06485c3aacfa08d" prefix="" category="inline-code"></block></block>
  <block id="cbea7dc9eb2c3c926a86130b0be6368f" category="cell">设置Trident运算符的映像提取策略。有效值为：<block ref="68eec46437c384d8dad18d5464ebc35c" prefix=" " category="inline-code"></block> 以始终提取映像。<block ref="7803982c6b845094275e8e83f0fad3a6" prefix=" " category="inline-code"></block> 仅当节点上尚不存在映像时才提取该映像。<block ref="6e7b34fa59e1bd229b207892956dc41c" prefix=" " category="inline-code"></block> 从不提取映像。</block>
  <block id="ac7c98af4f51cc4b20acafb785a53284" category="cell"><block ref="7803982c6b845094275e8e83f0fad3a6" prefix="" category="inline-code"></block></block>
  <block id="00148cd37a97a236d1ff100ec0464493" category="summary">您可以使用Helm部署Trident操作员并安装Astra Trident。此过程将处理适用场景 安装、其中、Astra Trident所需的容器映像不会存储在专用注册表中。</block>
  <block id="2f74d18d1c9959832fc00b898fa2417e" category="doc">使用Helm部署Trident操作员(标准模式)</block>
  <block id="6852076d7b753ee3ea825ae4af1375ac" category="inline-link-macro">脱机部署过程</block>
  <block id="20815399023070f3335b67451f864388" category="paragraph">您可以使用Helm部署Trident操作员并安装Astra Trident。此过程将处理适用场景 安装、其中、Astra Trident所需的容器映像不会存储在专用注册表中。如果您有专用映像注册表、请使用 <block ref="95202a095b590d767c9926fd1850fb68" category="inline-link-macro-rx"></block>。</block>
  <block id="d883ab5f686800bc89cab8e6bd776c10" category="paragraph">*您必须阅读以下有关Astra Trident的重要信息。*</block>
  <block id="92b6d6e1b0bf78702d88ede445c4256f" category="example-title">&lt;strong&gt; 中有关Astra &lt;/strong&gt; 的信息</block>
  <block id="7416271d47db3d82227ab2164e43c75c" category="list-text">Astra Trident会严格强制在SAN环境中使用多路径配置、建议值为<block ref="db729c5c8df447087e5a84b961df14f6" prefix=" " category="inline-code"></block> 在multipath.conf文件中。</block>
  <block id="2f5480efe7a0a4b0cffbf110abec11c2" category="paragraph">使用Trident <block ref="cdacb2b0d49176a3c0d8cc9d693de833" category="inline-link-macro-rx"></block> 您可以一步部署Trident操作员并安装Trident。</block>
  <block id="3342f1a2f74c6062a39d3076c35c5a5b" category="inline-link-macro">安装概述</block>
  <block id="6657de3ab3deaeef939684c50d5310e3" category="paragraph">请查看 <block ref="17128a3e349370ba21c9ca13ca0bc297" category="inline-link-macro-rx"></block> 以确保满足安装前提条件并为您的环境选择正确的安装选项。</block>
  <block id="8f3958d59b8da100a4663b1cace112b7" category="inline-link-macro">部署前提条件</block>
  <block id="64d2af40480a5cebf7e64939f6253bf3" category="paragraph">除了 <block ref="c7282b7e52e27c635b613335e59bf436" category="inline-link-macro-rx"></block> 您需要 <block ref="fc0cdbd8defe0c7175199dd05a0f8e76" category="inline-link-macro-rx"></block>。</block>
  <block id="113fbd468c6aaecfbef57e5d1e9b500d" category="list-text">添加Astra Trident Helm存储库：</block>
  <block id="d75fdc8e85ddcd7e9dc9f367168dec11" category="paragraph">您可以使用<block ref="cd4140d3de30b520500459331d08d2bf" prefix=" " category="inline-code"></block> 查看安装详细信息、例如名称、命名空间、图表、状态、应用程序版本、和修订版号。</block>
  <block id="4c5ab57df808d08e9978671e7e81bb2a" category="section-title">在安装期间传递配置数据</block>
  <block id="c2bae6a1b11b371647052979113c2b7c" category="cell"><block ref="2c1d18b300e96c797f390483b0c6acdb" prefix="" category="inline-code"></block> (或<block ref="5338b151154663bac9980b0f044518f2" prefix=" " category="inline-code"></block>）</block>
  <block id="0bfab21a3b7a34a60173df3f165eda9c" category="paragraph">指定包含覆盖的YAML文件。可以多次指定此值，最右侧的文件将优先。</block>
  <block id="ef136231fb37749162723573d36b19c9" category="cell"><block ref="8b5806248570dbb13e7d3bc5e6c0ee37" prefix="" category="inline-code"></block></block>
  <block id="7595b6387dfaf9307f563edc4d951a0d" category="paragraph">在命令行上指定覆盖。</block>
  <block id="01e12de62fa77fda2815719aed8ff892" category="section-title">下一步行动</block>
  <block id="324e584edb971a95594d9f53d3cd5b56" category="summary">您可以使用Trident操作符(手动或使用Helm)或安装Astra Trident<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。本主题提供了有关为您选择正确安装过程的重要信息。</block>
  <block id="0769d1459ee3d99d6454d7f99246c894" category="doc">了解有关Astra Trident安装的信息</block>
  <block id="32a389c0498b062693ada7b4b9ac88d7" category="paragraph">为了确保Astra Trident能够安装在各种环境和组织中、NetApp提供了多种安装选项。您可以使用Trident操作符(手动或使用Helm)或安装Astra Trident<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。本主题提供了有关为您选择正确安装过程的重要信息。</block>
  <block id="ef911ad0da9f5477ca7ec7af0ba4181a" category="paragraph">无论您的安装路径如何、您都必须：</block>
  <block id="3f2851ece89063ca1615062ac2117a4e" category="list-text">对运行受支持的Kubernetes版本并启用了功能要求的受支持Kubernetes集群的完全权限。查看 <block ref="3675fd04b78685cacd6e23511ab11d10" category="inline-link-macro-rx"></block> 了解详细信息。</block>
  <block id="f6f19569d16b2b36f137e3df3e315626" category="list-text">。<block ref="39e7fa5a13dbc25a4aa8c4b323cd657c" prefix=" " category="inline-code"></block> 环境变量设置为指向您的Kubernetes集群配置。</block>
  <block id="f73c8e5f81fc3213cf0bc8c399979852" category="admonition">如果您尚未熟悉 <block ref="0342248ee22d08eaf42465a29ddd67ec" category="inline-link-macro-rx"></block>，现在是一个实现这一目标的好时机。</block>
  <block id="a24b4ef46f44c1b54b99e62f49bef9af" category="section-title">选择安装方法</block>
  <block id="dcb987a2d08ee1a9198d1183b1a63a96" category="inline-link-macro">在方法之间移动</block>
  <block id="e11c9248bc5d43c6663f67955adbc53b" category="paragraph">选择适合您的安装方法。您还应查看的注意事项 <block ref="e6ce874bf5f421a383109cc222a74763" category="inline-link-macro-rx"></block> 在做出决定之前。</block>
  <block id="bd1cc9ebdb33ed22a54815219f97af08" category="section-title">使用Trident运算符</block>
  <block id="b2ad529645b5bea51c4bcd516a5c5c8f" category="inline-link-macro">自定义Trident操作员部署</block>
  <block id="938620f641cb8e0eead448105ff52780" category="paragraph">无论是手动部署还是使用Helm部署、Trident操作员都是简化安装和动态管理Astra Trident资源的绝佳方式。您可以做到这一点 <block ref="5290e5312b651716bedf8a83ec5a6467" category="inline-link-macro-rx"></block> 使用中的属性<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 自定义资源(CR)。</block>
  <block id="9d2c1d92b0ecb606394b40e3553d07d2" category="paragraph">使用Trident运算符的优势包括：</block>
  <block id="636fc797e6d4f9b558107df8ad867cc7" category="example-title">&lt;strong&gt; A Trident对象&lt;/strong&gt;</block>
  <block id="9bb09894435f05fa667865ab4c45ace7" category="paragraph">Trident操作符会自动为您的Kubernetes版本创建以下对象。</block>
  <block id="839be275cd4b0f32a2c3e0278ce6d568" category="list-text">操作员的ServiceAccount</block>
  <block id="f330ead337ce41659c5526de118cdac3" category="list-text">ClusterRole和ClusterRoleBindingto the ServiceAccount</block>
  <block id="02c7e9dd319d7284e2200c673387dfdc" category="list-text">专用PodSecurityPolicy (适用于Kubernetes 1.25及更早版本)</block>
  <block id="504dabdcc3051fc4c1b7a92eb22fad82" category="example-title">&lt;strong&gt; —修复功能—&lt;/strong&gt;</block>
  <block id="1505039bc5aa0b8285d451e49fba843e" category="paragraph">操作员监控Astra Trident的安装、并主动采取措施来解决问题、例如部署何时被删除或意外修改。答<block ref="6088362e783ede60a64ba91287dc58c1" prefix=" " category="inline-code"></block> 此时将创建与关联的POD<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 安装了Astra Trident的CR。这样可以确保集群中只有一个Astra Trident实例并控制其设置、从而确保安装有效。对安装进行更改（例如删除部署或节点取消设置）时，操作员会识别这些更改并逐个修复它们。</block>
  <block id="0bfe7abd2878a67d5ff26746df309f8c" category="example-title">&lt;strong&gt; 更新了现有安装的&lt;/strong&gt;</block>
  <block id="cbbeebc91e4ea4f1960f7a74b5b14c23" category="paragraph">您可以使用操作员轻松更新现有部署。您只需编辑<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> cr以更新安装。</block>
  <block id="561b04cbccb34a376c360e7325ad76d0" category="paragraph">例如，请考虑需要启用 Astra Trident 以生成调试日志的情形。为此、请修补<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 设置<block ref="8cddd364bfd0d68f21e3a9ba1123b849" prefix=" " category="inline-code"></block> to<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>：</block>
  <block id="f72ba1a3a498489a96fd8774bfa9ea9d" category="example-title">&lt;strong&gt; Kubernetes升级&lt;/strong&gt;</block>
  <block id="c3b2fe84f143129d7a18ad12df229bc6" category="example-title">&lt;strong&gt; 将使用BlueXP (以前称为Cloud Manager)&lt;/strong&gt; 进行集群管理</block>
  <block id="4c24a3b9facf2ea9fc7ed2ca52dab45d" category="inline-link-macro">自定义&lt;block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category='inline-code'/&gt; 软件安装</block>
  <block id="40beff6895ce0eeff65f9568dd5c7247" category="paragraph">您可以 <block ref="d16089dfa270d6679e80d43ec8b5c378" category="inline-link-macro-rx"></block> 生成Trident资源的清单。其中包括 Astra Trident 在安装过程中创建的部署，取消设置，服务帐户和集群角色。</block>
  <block id="cb024a74bf03f9ba7a9433337492808e" category="admonition">从 22.04 版开始，每次安装 Astra Trident 时， AES 密钥将不再重新生成。在此版本中， Astra Trident 将安装一个新的机密对象，该对象会在安装之间持续存在。这意味着、<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 在22.04中、可以卸载先前版本的Trident、但早期版本无法卸载22.04安装。选择适当的安装_method。</block>
  <block id="84721e18f913ae71c91ded91f5eb0ccc" category="section-title">选择安装模式</block>
  <block id="ecafb217c7f4e740b9f654a4f2d90d83" category="paragraph">根据您的组织所需的_installation mode"(标准)、"Offline"(脱机)或"Remote"(远程)来确定部署过程。</block>
  <block id="e0090e5eeb1da23a2924e8a8913a9bf8" category="open-title">标准安装</block>
  <block id="2de7b81fa5e55c649aed923c069d97fa" category="paragraph">这是安装Astra Trident的最简单方法、适用于大多数不会实施网络限制的环境。标准安装模式使用默认注册表来存储所需的Trident <block ref="0b505db73d92bac18356fa3feb3cf7e3" prefix="(" category="inline-code"></block>)和CSI <block ref="95d6355f896a633ab07c528c03b44c8e" prefix="(" category="inline-code"></block>)映像。</block>
  <block id="bed44ad15130067b96b51ba770e3e821" category="paragraph">使用标准模式时、Astra Trident安装程序将：</block>
  <block id="ca02732ace7c24d10b82abb835861fa8" category="list-text">通过Internet提取容器映像</block>
  <block id="2a35874c002d31bf8a669cf5f15508f2" category="list-text">创建部署或节点取消命名集、以便在Kubernetes集群中所有符合条件的节点上启动Astra Trident Pod</block>
  <block id="6c09f957f6dd5f1b3287dacfabe8711a" category="open-title">脱机安装</block>
  <block id="559e73031b36e6693dcd5724b5ec9488" category="paragraph">在带风口或安全位置可能需要脱机安装模式。在这种情况下、您可以创建一个专用的镜像注册表或两个镜像注册表来存储所需的Trident和CSI映像。</block>
  <block id="37f28a5a50507d5cf12665008632572f" category="admonition">无论注册表配置如何、CSI映像都必须驻留在一个注册表中。</block>
  <block id="8e9a94c9655a1b4aac478f836ff8dde6" category="open-title">远程安装</block>
  <block id="3937570b6000a2f24b3066af230f4546" category="paragraph">下面简要概述了远程安装过程：</block>
  <block id="8be61d7ba452354892142828445281d0" category="section-title">根据您的方法和模式选择过程</block>
  <block id="667af34faf4c2e74b377bbe7608ca481" category="paragraph">做出决定后、请选择相应的流程。</block>
  <block id="4c3880bb027f159e801041b1021e88e8" category="cell">方法</block>
  <block id="f8a17e31b9d98082aa01aa0b41f63a01" category="cell">安装模式</block>
  <block id="e633d636fff46ea0b0998da525b2fba2" category="cell">Trident运算符(手动)</block>
  <block id="8f923c676fa6a52b7729476fc0d5f245" category="paragraph"><block ref="8f923c676fa6a52b7729476fc0d5f245" category="inline-link-macro-rx"></block></block>
  <block id="d295bad40364c9511c0d7b6a18e9557b" category="paragraph"><block ref="d295bad40364c9511c0d7b6a18e9557b" category="inline-link-macro-rx"></block></block>
  <block id="b9267203f04d91a5fcda0041ad2b3b64" category="cell">Trident运算符(Helm)</block>
  <block id="c197c2a4864a9d7a8190b1988d1e5885" category="paragraph"><block ref="c197c2a4864a9d7a8190b1988d1e5885" category="inline-link-macro-rx"></block></block>
  <block id="8dc52e4e0ca84a69e954b9b7a21c2bfc" category="paragraph"><block ref="8dc52e4e0ca84a69e954b9b7a21c2bfc" category="inline-link-macro-rx"></block></block>
  <block id="0b9d702360fb60f9b8b477339ca03a7b" category="cell"><block ref="c67fd1b99934afa248dfeb285a9a4191" prefix="" category="inline-code"></block></block>
  <block id="be686de0390e44f3981b994e059dfcb7" category="inline-link-macro">标准或脱机安装</block>
  <block id="9e244fc5020d1137289c0c34c2944ac4" category="paragraph"><block ref="9e244fc5020d1137289c0c34c2944ac4" category="inline-link-macro-rx"></block></block>
  <block id="dd341f866eaefb939dc86608773c909d" category="section-title">在安装方法之间移动</block>
  <block id="84dfae02381a00cf11d01c571e3e3e0f" category="paragraph">您可以决定更改安装方法。在执行此操作之前、请考虑以下事项：</block>
  <block id="a2f9fc61dcbb8d315328956b20ee41f8" category="list-text">安装和卸载Astra Trident时、请始终使用相同的方法。如果您已使用部署<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>、您应使用的相应版本<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 用于卸载Astra Trident的二进制文件。同样、如果要使用操作员进行部署、则应编辑<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> CR和设置<block ref="f41a95848a012f4f1a6550ce79c588aa" prefix=" " category="inline-code"></block> 卸载Astra Trident。</block>
  <block id="aa7d43663995cc5a82e0608e61443ac2" category="list-text">如果您的部署基于操作员、则要删除此部署并改用此部署<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 要部署Astra Trident、您应先编辑<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 并设置<block ref="f41a95848a012f4f1a6550ce79c588aa" prefix=" " category="inline-code"></block> 卸载Astra Trident。然后删除<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 和操作员部署。然后、您可以使用安装<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="e77325ac6e155cf5d14c756f1d64333f" category="list-text">如果您使用的是基于操作员的手动部署、并且要使用基于Helm的Trident操作员部署、则应先手动卸载此操作员、然后再执行Helm安装。这样， Helm 就可以使用所需的标签和标注来部署 Trident 操作员。如果不执行此操作，则基于 Helm 的 Trident 操作员部署将失败，并显示标签验证错误和标注验证错误。如果您有<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>基于部署、您可以使用基于Helm的部署、而不会遇到问题。</block>
  <block id="901977c62370814085e1228ede1e5919" category="summary">在安装Astra Trident之前、您应查看这些常规系统要求。特定后端可能有其他要求。</block>
  <block id="0ffed9ae8c0b8e64c5dc8cba81c4fe34" category="list-text">FAS/AFF/Select 9.5或更高版本</block>
  <block id="6286d1b386e84c92fae11f2bcb9ceecd" category="paragraph">下表总结了此版本的 Astra Trident 及其支持的 Kubernetes 版本提供的功能。</block>
  <block id="6726c1f070eb0e4315bf3ec874a13f78" category="paragraph">虽然Astra Trident不正式支持特定的操作系统、但已知以下功能有效：</block>
  <block id="f8b1c66e563136ad12055c2d31964acc" category="paragraph">Kubernetes集群中的所有工作节点都必须能够挂载为Pod配置的卷。要准备工作节点、必须根据您选择的驱动程序安装NFS或iSCSI工具。</block>
  <block id="f36d25716a4b2c466ddcb8065bef3ae6" category="paragraph"><block ref="f36d25716a4b2c466ddcb8065bef3ae6" category="inline-link-macro-rx"></block></block>
  <block id="0d25ed458cdfc3817973631b0b776a34" category="paragraph">Astra Trident可能需要先更改存储系统、然后后端配置才能使用它。</block>
  <block id="50823ee9226376c44bfb71c334ee2f3f" category="paragraph"><block ref="50823ee9226376c44bfb71c334ee2f3f" category="inline-link-macro-rx"></block></block>
  <block id="29dcef620f05a3eaaf13d29d1f14e860" category="paragraph">Astra Trident需要访问特定端口才能进行通信。</block>
  <block id="b2dabe4b341f1e163a7ba3f3553d6b1b" category="paragraph"><block ref="b2dabe4b341f1e163a7ba3f3553d6b1b" category="inline-link-macro-rx"></block></block>
  <block id="725cbb3a0d4bcdf2e5483f06a14ffc8a" category="cell">v1.26.0</block>
  <block id="4bdf9319fbd791503ac6c31b80a89220" category="summary">您可以手动部署Trident操作员以安装Astra Trident。此过程将处理适用场景 安装、其中、Astra Trident所需的容器映像存储在专用注册表中。</block>
  <block id="44e21d73aa8bd7200fceac6671723524" category="doc">手动部署Trident操作员(脱机模式)</block>
  <block id="11ad6eeb0e6095efdbf4599d71303b0e" category="inline-link-macro">标准部署流程</block>
  <block id="3410d56c3ae45b01726f4f271693484f" category="paragraph">您可以手动部署Trident操作员以安装Astra Trident。此过程将处理适用场景 安装、其中、Astra Trident所需的容器映像存储在专用注册表中。如果您没有专用映像注册表、请使用 <block ref="0d70fdec6fbaf15c3c460970c31207c9" category="inline-link-macro-rx"></block>。</block>
  <block id="8ff1bc8a7ac69f081f871e9e2a8c0d0f" category="section-title">手动部署Trident操作员并安装Trident</block>
  <block id="bcc71769dd00af93bb067088094d9b0b" category="paragraph">登录到Linux主机并验证它是否正在管理正常工作的和 <block ref="ac355729d1ddc95a290738ca862fed08" category="inline-link-macro-rx"></block> 并且您拥有必要的特权。</block>
  <block id="92e83bca2bb40324de35154f8c95083d" category="list-text">验证Kubernetes版本：</block>
  <block id="b17eef151a74252395aad7db4b148b57" category="list-text">验证集群管理员权限：</block>
  <block id="987c560d773c81bc59f0fa11370626f5" category="list-text">验证您是否可以从Docker Hub启动使用映像的POD并通过POD网络访问存储系统：</block>
  <block id="d868f4f0026c532dcfdb417dde3174c2" category="section-title">第1步：下载Trident安装程序包</block>
  <block id="e0a7ed284b169328627ba69adfc9350d" category="paragraph">Astra Trident安装程序包包含部署Trident操作员和安装Astra Trident所需的所有内容。从下载并提取最新版本的Trident安装程序 <block ref="6a7c34d1e7545bd3ab5abc336e61eb7f" category="inline-link-macro-rx"></block>。</block>
  <block id="e0755e6cf0a80c2d8535ac3b7eae0b4b" category="section-title">第2步：创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> CRD</block>
  <block id="04bed90b9e7d65b6d7dd48211e0a9f6c" category="paragraph">创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 自定义资源定义(CRD)。您将创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 稍后自定义资源。使用中相应的CRD YAML版本<block ref="91ff3926f7c7983bb4a56689f631e6c9" prefix=" " category="inline-code"></block> 以创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> CRD：</block>
  <block id="ad9aaefb573cd08d43c2b039449b1f0e" category="section-title">第3步：更新操作符中的注册表位置</block>
  <block id="7e1c8354fb2b2ecb65abfa6a63e08970" category="section-title">第3步：部署Trident操作员</block>
  <block id="05cb480f9344b60f5eeaed25c5e230d1" category="list-text">创建资源并部署操作员：</block>
  <block id="4488449936bc789dc4dfb6a7887b3533" category="paragraph">Astra Trident安装程序提供了一个包文件、可用于安装操作员和创建关联对象。使用此捆绑包文件可以轻松地部署操作员并使用默认配置安装Astra Trident。</block>
  <block id="69301f05825d437597b636d8b7e9d918" category="paragraph">您必须附加<block ref="4134d52569bb4a6545ebff1e4c83f2bc" prefix=" " category="inline-code"></block> 到<block ref="990dc1a09e10c7b5378e6bc8a1956cb8" prefix=" " category="inline-code"></block> 使用不同的注册表位置。</block>
  <block id="78f538d1739cfd8c70698ec72269da17" category="inline-link-macro">自定义Trident安装</block>
  <block id="60b02b15eaf058a3b9da12633792321f" category="paragraph">现在、您可以创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 并安装Astra Trident。您也可以选择继续操作 <block ref="af79c767b326b6188dbe7366c85a8007" category="inline-link-macro-rx"></block> 使用中的属性<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 规格以下示例显示了Trident和CSI映像位于不同注册表中的安装。</block>
  <block id="9c0f95d6de9186b24cce94c1c19ad0bb" category="section-title">验证安装。</block>
  <block id="f33407040f00668c9fe98aa95119654b" category="paragraph">可以通过多种方法验证您的安装。</block>
  <block id="1ee1b78e8a634a10be54657432d990c0" category="section-title">使用<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> status</block>
  <block id="59331c774767b9695025c001ca75a1f6" category="inline-link-macro">检查日志</block>
  <block id="4b3e10870e70ff689f8c7d5c4470bb56" category="paragraph">的状态<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 指示安装是否成功、并显示已安装的Trident版本。在安装期间、的状态<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 更改自<block ref="2763f33c904a183bd0ef06f9c4fb4403" prefix=" " category="inline-code"></block> to<block ref="98dd43dfae05b11befe1f140e0ec787a" prefix=" " category="inline-code"></block>。如果您观察到<block ref="d7c8c85bf79bbe1b7188497c32c3b0ca" prefix=" " category="inline-code"></block> 状态、并且操作员无法自行恢复、 <block ref="b02c5b645df4a829ba2f9c98296d4b15" category="inline-link-macro-rx"></block>。</block>
  <block id="474d9cf1b4e7f826154b0e1f35c59f5a" category="section-title">正在使用POD创建状态</block>
  <block id="726f87e7b7987ccf71570849c59ae750" category="paragraph">您可以通过查看已创建Pod的状态来确认Astra Trident安装是否已完成：</block>
  <block id="8492a795a07bc459d58808ef0ab73c36" category="section-title">使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block></block>
  <block id="af78a296b63187cfcb391c6b5b7ab9ae" category="paragraph">您可以使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 检查安装的Astra Trident版本。</block>
  <block id="3c70f31b6cfd2fccfef3e715c4c4cabb" category="doc">自定义tridentctl安装</block>
  <block id="1925260c2cac73df14e8b004bfbabd67" category="paragraph">您可以使用Astra Trident安装程序自定义安装。</block>
  <block id="9023b4b442239b429817bc22fb401e02" category="summary">您可以使用Helm部署Trident操作员并安装Astra Trident。此过程将处理适用场景 安装、其中、Astra Trident所需的容器映像存储在专用注册表中。</block>
  <block id="3e8935de45b1559e2ec2b01c1bbb06c2" category="doc">使用Helm部署Trident操作员(脱机模式)</block>
  <block id="dc0316b52aa2ab6526bdaee13c162530" category="paragraph">您可以使用Helm部署Trident操作员并安装Astra Trident。此过程将处理适用场景 安装、其中、Astra Trident所需的容器映像存储在专用注册表中。如果您没有专用映像注册表、请使用 <block ref="2230544d14bc4ba0c61a5a1b2030a1d4" category="inline-link-macro-rx"></block>。</block>
  <block id="3d289dfc040026f9fd5fd0d307821b6c" category="doc">使用tridentctl进行安装</block>
  <block id="61697702c419c08b19643e7defded065" category="section-title">使用安装Astra Trident<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block></block>
  <block id="953aeeea088f5f969f2eba121ae81f15" category="paragraph">开始安装之前、请登录到Linux主机并验证它是否正在管理一个正常运行的、 <block ref="ac355729d1ddc95a290738ca862fed08" category="inline-link-macro-rx"></block> 并且您拥有必要的特权。</block>
  <block id="8e00e0acac84eb708bf35882acdffca9" category="paragraph">Astra Trident安装程序包可创建Trident Pod、配置用于保持其状态的CRD对象、并初始化CSI sidecars以执行配置卷以及将卷附加到集群主机等操作。从下载并提取最新版本的Trident安装程序 <block ref="6a7c34d1e7545bd3ab5abc336e61eb7f" category="inline-link-macro-rx"></block>。在示例中、使用选定的&lt;trident-installer-XX.XX.X.tar.gz&gt; Trident版本更新_Astra Trident。</block>
  <block id="4fba6bba4e54639c0f1d19c0a5679833" category="section-title">第2步：安装Astra Trident</block>
  <block id="c0e89c01626a7378d795a618051fccbf" category="paragraph">通过执行在所需命名空间中安装Astra Trident<block ref="430bf77bee6c59d385d4194f84c21b16" prefix=" " category="inline-code"></block> 命令：您可以添加其他参数来指定映像注册表位置。</block>
  <block id="53c512e9599c71e1a585d636a5229820" category="open-title">标准模式</block>
  <block id="ca5380881d4e3b38f359d5d05acd6163" category="paragraph">您的安装状态应如下所示。</block>
  <block id="c5e8fc3926c956e64487a70aa036ec8c" category="paragraph">您可以使用POD创建状态或验证安装<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="5ba19178fb1b2111306714e923b35945" category="inline-link-macro">打开调试模式</block>
  <block id="43e7d51a6323aabe7af3d192e157f5ed" category="admonition">如果安装程序未成功完成或<block ref="ce3abad3e11d6a43c5178e20a0c7d64b" prefix=" " category="inline-code"></block> <block ref="2903817a25b5de1e17a06122d71c5cf9" prefix="(" category="inline-code"></block> 在23.01之前的版本中)不具有*正在运行*状态、表示未安装此平台。使用 ...<block ref="9b017020b9d48d433ec90c548e6b5c70" prefix=" " category="inline-code"></block> to <block ref="82f062b46969132d4baf9d002395a676" category="inline-link-macro-rx"></block> 并对问题描述 进行故障排除。</block>
  <block id="f032a385b0ce5fcf6464cead04cd3018" category="summary">您可以手动部署Trident操作员以安装Astra Trident。此过程将处理适用场景 安装、其中、Astra Trident所需的容器映像不会存储在专用注册表中。</block>
  <block id="5d8f25140dde9344f1318b1319929306" category="doc">手动部署Trident操作员(标准模式)</block>
  <block id="b6d3bf16e1407232f27db7edf1b1aeb2" category="paragraph">您可以手动部署Trident操作员以安装Astra Trident。此过程将处理适用场景 安装、其中、Astra Trident所需的容器映像不会存储在专用注册表中。如果您有专用映像注册表、请使用 <block ref="3fd9bb28718715a2d036f0ab9d9239b8" category="inline-link-macro-rx"></block>。</block>
  <block id="baa9ad279e74fa4534c3259cbc91b518" category="paragraph">创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 自定义资源定义(CRD)。您将创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 稍后自定义资源。使用中相应的CRD YAML版本<block ref="91ff3926f7c7983bb4a56689f631e6c9" prefix=" " category="inline-code"></block> 以创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> CRD。</block>
  <block id="c35c65e4cd4cef23559781ed63709eb0" category="section-title">第4步：创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 并安装Trident</block>
  <block id="70e42312f50f2ab1f64d8045ef7bee39" category="paragraph">现在、您可以创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 并安装Astra Trident。您也可以选择 <block ref="af79c767b326b6188dbe7366c85a8007" category="inline-link-macro-rx"></block> 使用中的属性<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 规格</block>
  <block id="7911fdf4657d2e334f854a18bd855d10" category="paragraph">管理LIF为必填项。数据LIF因情况而异：</block>
  <block id="0f118344f15151d321a269948a521caf" category="list-text">ONTAP SAN：不为iSCSI指定。Astra Trident使用 <block ref="2de2f329c45219df280af5a70ed7a17c" category="inline-link-macro-rx"></block> 发现建立多路径会话所需的iSCI LIF。如果出现、则会生成警告<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block> 已明确定义。请参见 <block ref="823b6e1f172888081aece7b5cdeb0e03" category="inline-link-macro-rx"></block> 了解详细信息。</block>
  <block id="f09a3c9e4e8e8413b0a9e74e8e29bcdd" category="list-text">ONTAP NAS：建议指定<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>。如果未提供此参数、则Astra Trident会从SVM提取数据LIF。您可以指定用于NFS挂载操作的完全限定域名(FQDN)、从而可以创建循环DNS、以便在多个数据LIF之间实现负载平衡。请参见 <block ref="879dc93198c7c5e8ce7148b6d1205d73" category="inline-link-macro-rx"></block> 了解详细信息</block>
  <block id="cb16cfa78684ba0c7fc9cff3e67df72b" category="paragraph">Astra Trident支持为以下项定义IPv6地址：</block>
  <block id="a24e915be64ce870d285c6e28a6df3f5" category="list-text"><block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix="" category="inline-code"></block> 和<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block> 适用于ONTAP NAS后端。</block>
  <block id="fb250da700173f245f4c10d2970cfba8" category="list-text"><block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix="" category="inline-code"></block> 适用于ONTAP SAN后端。您无法指定<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block> 在ONTAP SAN后端。</block>
  <block id="26c2fac45b391513484ac592dfbd2e11" category="paragraph">必须使用安装Astra Trident<block ref="0612dd31fddbea26c732fa571ce36adc" prefix=" " category="inline-code"></block> 用于通过IPv6正常运行的标志。</block>
  <block id="f53ad7a29c3832e7ce3b551fa5add12d" category="paragraph">您可以更新上的数据LIF<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 和<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> 仅限。</block>
  <block id="18e52eb5a60f4ee8d6f1fb37ab3e3781" category="paragraph">标志：*<block ref="60072fc2fad0d30fc656850e04c7433f" prefix=" " category="inline-code"></block>：卸载帮助。*<block ref="61bce13717a9d6da0266dbc3e2b1e642" prefix=" " category="inline-code"></block>：卸载期间禁用大多数输出。</block>
  <block id="741970ef3d523752ab543427956bb1b8" category="cell">1.19 - 1.26</block>
  <block id="66163e38dd4a6a2a3e01f422ce501b1b" category="paragraph">详细了解Astra Trident用于通信的端口。</block>
  <block id="2a531c1a1d290bb0e5f5a511bb48ad45" category="admonition">在安装期间、可以使用更改活跃度/就绪性探测端口<block ref="d2090696319f15a4c659a414db8cd2cd" prefix=" " category="inline-code"></block> 标志。请务必确保此端口未被工作节点上的其他进程使用。</block>
  <block id="1a87abd79c966e67f73bbe738ffa4e59" category="inline-link-macro">问题783、794</block>
  <block id="3e45ffbc961fc6c429b6e91f16331ee5" category="list-text">Kubernetes：添加了一些选项、用于排除通过Helm (<block ref="f91cf268a0811064670bc9d51a6e2016" category="inline-link-macro-rx"></block>）。</block>
  <block id="a47f012619aa18f9e2c0fbb53d5878d9" category="list-text">增加了对Kubernetes 1.26的支持。</block>
  <block id="d87b63603588c1795f58658ee14e505f" category="inline-link-macro">问题描述 #757</block>
  <block id="8e3bb4ae68afca021f39502f7954a450" category="list-text">提高了Trident RBAC资源的整体利用率(<block ref="92a5fe29b2be509e7db5f2091f236ee0" category="inline-link-macro-rx"></block>）。</block>
  <block id="2508a7d2b2da760ab909b40a284aff9f" category="list-text">增加了自动化功能、可检测和修复主机节点上中断或陈旧的iSCSI会话。</block>
  <block id="80a9d5ab26eec41d6d6967415e991c91" category="list-text">增加了对扩展LUKS加密卷的支持。</block>
  <block id="1e209dc1ac5964d0a9b1f9c2e9f2fc83" category="list-text">Kubernetes：增加了对LUKS加密卷的凭据轮换支持。</block>
  <block id="c8f16bbec47a1722c0f16f173cf64d21" category="list-text">在ONONTAP -NAS存储驱动程序中增加了对使用Amazon FSX for ONTAP 的SMB卷的支持。</block>
  <block id="8ce5e316405255bac435287fc5b61f0e" category="list-text">增加了对使用SMB卷时的NTFS权限的支持。</block>
  <block id="e67f9f12d1f7c510d94da478c87b7d19" category="list-text">增加了对具有CVS服务级别的GCP卷的存储池的支持。</block>
  <block id="493569102442ea9186ac1061bb527388" category="list-text">增加了在使用ontap-nas-flexgroup存储驱动程序创建FlexGroup时可选使用FlexgroupAggregateList的支持。</block>
  <block id="af2331cf2d8ade7bb48e4d540510db26" category="list-text">在管理多个FlexVol时提高了ONTAP NAS经济型存储驱动程序的性能。</block>
  <block id="c26c6c796afe3b5c10e0c830715daf3a" category="list-text">已为所有ONTAP NAS存储驱动程序启用数据LIF更新。</block>
  <block id="56f71deb4744b8ffc7a92bde36d3f4d4" category="list-text">更新了Trident部署和DemonSet命名约定、以反映主机节点操作系统。</block>
  <block id="6ea33f83a7d973b1fa7de807364662d4" category="list-text">Kubernetes：已将支持的最低Kubernetes更新为1.21。</block>
  <block id="25854d9b7e460f2667b773a052ff6830" category="list-text">配置时、不应再指定数据LIF<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 或<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 驱动程序。</block>
  <block id="562840ed450b90bfe87c70479237a8da" category="section-title">22.10中的更改</block>
  <block id="816cf1fb2aa5f808ab09b4740f8ec199" category="list-text">已添加 <block ref="d387032e9d71b36f3d6219f60f33a659" category="inline-link-macro-rx"></block> 适用于<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 存储驱动程序。</block>
  <block id="001bb59b1bc94ca13afb90cc0e7a4ed5" category="admonition">您无法指定<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block> 在ONTAP SAN后端。Astra Trident会发现所有可用的iSCSI LIF并使用它们建立多路径会话。</block>
  <block id="ecab08714a2cb76336fb5fe50c888c56" category="paragraph">Astra Trident版本采用基于日期的版本<block ref="fb6921a005d395f9482cdac0306d4935" prefix=" " category="inline-code"></block> 命名约定、其中"YY"是一年中的最后两位数字、"MM"是月份。DOT版本会遵循A<block ref="d93ec759c4a0e8c1cf9c7653b2939656" prefix=" " category="inline-code"></block> 约定、其中"X"是修补程序级别。您将根据要从中升级的版本选择要升级到的版本。</block>
  <block id="74652b96889938fdef1037f82abf39b0" category="inline-link-macro">在安装方法之间切换</block>
  <block id="441b9a0ce7113f17c0021f9922b1c865" category="inline-link-macro">使用Trident操作符进行升级</block>
  <block id="589143858f045594979d5d3cf5289bf6" category="paragraph">您可以使用轻松升级现有的Astra Trident安装<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="bdae3121e140e5325fd05919c86dd97f" category="list-text">如果您使用自定义了初始安装<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 属性、您可以编辑<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 用于修改安装参数的对象。其中可能包括为脱机模式指定镜像Trident和CSI映像注册表、启用调试日志或指定映像提取密钥所做的更改。</block>
  <block id="b0f8c567e856516aabf80f916e995d4f" category="paragraph">如果在初始安装期间设置了任何非默认选项(例如为Trident和CSI映像指定专用的镜像注册表)、请使用<block ref="8b5806248570dbb13e7d3bc5e6c0ee37" prefix=" " category="inline-code"></block> 为了确保这些选项包含在upgrade命令中、否则这些值将重置为默认值。</block>
  <block id="3d0107bfa0874592e9dc04f9869b604b" category="list-text">运行<block ref="cd4140d3de30b520500459331d08d2bf" prefix=" " category="inline-code"></block> 验证图表和应用程序版本均已升级。运行<block ref="3e725291d4b17065fdcd321172fcfae3" prefix=" " category="inline-code"></block> 查看任何调试消息。</block>
  <block id="3fe5d266a33f137293c314a2e334b611" category="inline-link">Astra Trident 22.10</block>
  <block id="9fefe9ff51badc61edd8a36c8240aa29" category="list-text"><block ref="9fefe9ff51badc61edd8a36c8240aa29" category="inline-link-rx"></block></block>
  <block id="55559f520040667d3f8931728b37ef07" category="paragraph">21.07之前的版本、重定向到旧版文档站点。</block>
  <block id="79126799d841fcc6275e2d0dd60f9d39" category="paragraph">要集成Astra Trident、需要集成以下设计和架构要素：驱动程序选择和部署、存储类设计、虚拟池设计、永久性卷声明(PVC)对存储配置的影响、卷操作以及使用Astra Trident部署OpenShift服务。</block>
  <block id="d7f3ab8ebe0633127c883b84d0b2bc4a" category="section-title">Google Cloud上的Cloud Volumes Service 后端驱动程序</block>
  <block id="dbdb93270c6038ae53d21c36a0ec3a06" category="paragraph">Astra Trident使用<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block> 用于链接到Google Cloud上的Cloud Volumes Service 的驱动程序。</block>
  <block id="6615bc816ef19ce9b090bf84cb2577e8" category="paragraph">。<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block> 驱动程序使用虚拟池抽象化后端、并允许Astra Trident确定卷的放置位置。管理员在中定义虚拟池<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block> 文件。存储类使用选择器按标签标识虚拟池。</block>
  <block id="88e5e1ee5a287a3e1e8bcd0bd36d4405" category="list-text">如果在后端定义了虚拟池、则Astra Trident将尝试在这些虚拟池所受限制的Google Cloud存储池中创建卷。</block>
  <block id="350ba3703a7557f9470ce37c01800b89" category="list-text">如果未在后端定义虚拟池、则Astra Trident将从该区域的可用存储池中选择Google Cloud存储池。</block>
  <block id="1c6765c31de34eaa48e2dc86edefdb85" category="paragraph">要在Astra Trident上配置Google Cloud后端、必须指定<block ref="80ef6899136dfcff295c16caa93c2138" prefix=" " category="inline-code"></block>，<block ref="1e9c0fd1beef5ff8ed3bef2ae3b7e560" prefix=" " category="inline-code"></block>，和<block ref="c9ff119073ea2567730fb42e3a4fe805" prefix=" " category="inline-code"></block> 在后端文件中。您可以在Google Cloud控制台中找到项目编号。API密钥来自您在Google Cloud上为Cloud Volumes Service 设置API访问时创建的服务帐户专用密钥文件。</block>
  <block id="2d081c5748fc9d24a176594dfdff1ed6" category="paragraph">有关Google Cloud上的Cloud Volumes Service 服务类型和服务级别的详细信息、请参见 <block ref="5b5fd03722abab2c395288a6ee42ad11" category="inline-link-macro-rx"></block>。</block>
  <block id="b8777f333c4d18731d4e5746513dc8eb" category="cell">适用于Google Cloud的Cloud Volumes Service 驱动程序</block>
  <block id="e8257e01d592104a99a17c192f84e86a" category="cell">仅适用于CVS-Performance服务类型。</block>
  <block id="e6f7c10d8c16eee55f72ce71c4b10a2f" category="list-title">复制注释</block>
  <block id="6b0213ecbd17731dba9697d0053bee09" category="list-text">复制不受Astra Trident管理。</block>
  <block id="706c8ebf7645c5a984d080882f157905" category="list-text">克隆将在与源卷相同的存储池中创建。</block>
  <block id="aa3a2f2908114304b0a2fa7847f52c52" category="section-title">虚拟池</block>
  <block id="f68e83b9ec275643f0ddf455710de4a0" category="paragraph">所有Astra Trident后端均可使用虚拟池。您可以使用Astra Trident提供的任何驱动程序为任何后端定义虚拟池。</block>
  <block id="fcda845207c8bb4d447496c11173c0af" category="paragraph">通过虚拟池、管理员可以在后端创建一个抽象级别、并可通过存储类进行引用、从而提高卷在后端的灵活性和效率。可以使用相同的服务类定义不同的后端。此外、可以在同一后端创建多个存储池、但其特征不同。如果为存储类配置了具有特定标签的选择器，则 Astra Trident 会选择与所有选择器标签匹配的后端来放置卷。如果存储类选择器标签与多个存储池匹配、则Astra Trident将选择其中一个存储池来配置卷。</block>
  <block id="46eefe0a9f18e4edef4d602d3868ad26" category="section-title">虚拟池设计</block>
  <block id="b8c8132a188c589a80147f1e0b22bf92" category="paragraph">创建后端时，通常可以指定一组参数。管理员无法使用相同的存储凭据和一组不同的参数创建另一个后端。随着虚拟池的推出、此问题描述 得以缓解。虚拟池是在后端和Kubernetes存储类之间引入的级别抽象、因此管理员可以定义参数以及标签、这些参数和标签可以通过Kubernetes存储类作为选择器进行引用、并且与后端无关。可以使用Astra Trident为所有受支持的NetApp后端定义虚拟池。该列表包括 SolidFire/NetApp HCI ， ONTAP ， GCP 上的 Cloud Volumes Service 以及 Azure NetApp Files 。</block>
  <block id="e531eef4bc68547759b647c917ac2567" category="admonition">定义虚拟池时、建议不要尝试在后端定义中重新排列现有虚拟池的顺序。此外，建议不要编辑 / 修改现有虚拟池的属性，而是定义新的虚拟池。</block>
  <block id="f274bdd304a8c3825a2766a1f8ff8fa7" category="paragraph">可以从一个存储后端设计具有一组特定方面的多个虚拟池。为此，请为后端配置多个标签，并在每个标签下设置所需的方面。现在、使用创建不同的Kubernetes存储类<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block> 要映射到不同虚拟池的字段。在后端配置的卷将在选定虚拟池中定义相关方面。</block>
  <block id="77392d80c7d8caad401b2619f5dd4581" category="paragraph">在创建PVC时、请求的存储类以外的某些参数可能会影响Astra Trident配置决策过程。</block>
  <block id="5425c134e042a4473f453cbfaaf776df" category="summary">您可以启用Linux统一密钥设置(LUKS)来对Astra Trident上的ONTAP SAN和ONTAP SAN经济卷进行加密。Astra Trident支持对已加密的LUKS卷进行卷大小调整和密钥(密码短语)轮换。</block>
  <block id="b6969fa89b54a37ee3628194aebbbea3" category="doc">Linux统一密钥设置(LUKS)</block>
  <block id="a5a1aad62aa2cbb5ff9f9547c24671f4" category="paragraph">您可以启用Linux统一密钥设置(LUKS)来对Astra Trident上的ONTAP SAN和ONTAP SAN经济卷进行加密。Astra Trident支持对LUKS加密卷执行密码短语轮换和卷扩展。</block>
  <block id="b1597f08149b233ec5901eb1dc041042" category="paragraph">在Astra Trident中、LUKS加密的卷会按照建议使用AES-XTS-plain64 Cypher和模式 <block ref="79a538d5fda32e1565131ca044d589f6" category="inline-link-macro-rx"></block>。</block>
  <block id="525588be7f6bc2cf7b3b257ced2b19c7" category="list-text">工作节点必须安装加密设置2.1或更高版本(但低于3.0)。有关详细信息，请访问 <block ref="39c06d5570d5dfd5c63abe15a0d8d2fb" category="inline-link-macro-rx"></block>。</block>
  <block id="83f59a8c99f92feae93c90d4f7bd0d68" category="section-title">启用LUKS加密</block>
  <block id="b9a97083b1f9ee5d9d6fd1ec4025a836" category="paragraph">您可以对ONTAP SAN和ONTAP SAN经济卷使用Linux统一密钥设置(Unified Key Setup、LUKS)启用每个卷的主机端加密。</block>
  <block id="d197aff07a41df5dbefcace33058435c" category="list-text">在后端配置中定义LUKS加密属性。有关ONTAP SAN的后端配置选项的详细信息、请参见 <block ref="e87ded5ef8bc8adbc3c135528636f4f2" category="inline-link-macro-rx"></block>。</block>
  <block id="a99f022d7515cf14d9d2e49a72198c5c" category="list-text">创建一个包含LUKS密码短语的密钥。例如：</block>
  <block id="6d8e596656bc0dc6684415f94bee7e6a" category="paragraph">LUKS加密的卷无法利用ONTAP 重复数据删除和数据压缩功能。</block>
  <block id="f9d3cd939395358ac0f0bd3a1043656c" category="section-title">轮换LUKS密码短语</block>
  <block id="5173c14a913aecabc2aa4a398abfd3a1" category="paragraph">您可以轮换LUKS密码短语并确认轮换。</block>
  <block id="870809044094847738d2e3b2d3490240" category="admonition">请勿忘记密码短语、除非您确认任何卷、快照或密钥不再引用它。如果引用的密码短语丢失、您可能无法挂载此卷、并且数据将保持加密状态且无法访问。</block>
  <block id="bbe48fb854ea022537208eeeff822f91" category="paragraph-title">关于此任务</block>
  <block id="0887b239ebf59802cdd0acb89f746b66" category="paragraph">如果在指定新的LUKS密码短语后创建了挂载卷的POD、则会发生LUKS密码短语轮换。创建新的Pod时、Astra Trident会将卷上的LUKS密码短语与密钥中的活动密码短语进行比较。</block>
  <block id="a09edd6ec72e24ea93fe0643001ce09b" category="list-text">如果卷上的密码短语与密钥中的活动密码短语不匹配、则会发生轮换。</block>
  <block id="85341a765feac19c14ddb5733a16bb0f" category="list-text">如果卷上的密码短语与密钥中的活动密码短语匹配、则会显示<block ref="4146f2b31b5baccc1599d6209e20b87f" prefix=" " category="inline-code"></block> 参数将被忽略。</block>
  <block id="e11fe3d05d72f7812c946ac80ae339ed" category="list-text">添加<block ref="c774c2255b7e3b1f75cd200c366d4148" prefix=" " category="inline-code"></block> 和<block ref="59ab79bfd6177f0b40d74d58d4a94d89" prefix=" " category="inline-code"></block> StorageClass参数。例如：</block>
  <block id="7fe288bcd08368971a3839f1de636c7c" category="list-text">确定卷或快照上的现有密码短语。</block>
  <block id="bd7a9717d29c5ddcab1bc175eda1e298" category="listing-title">Volume</block>
  <block id="d4e2713d1b1725a1592f9268589f990d" category="listing-title">Snapshot</block>
  <block id="c0526adc9b28d758d8fab9d4a5b998ef" category="list-text">更新卷的LUKS密钥以指定新密码短语和上一密码短语。确保 <block ref="119d124de86f53dbdf015ff1809c10e1" prefix=" " category="inline-code"></block> 和<block ref="4146f2b31b5baccc1599d6209e20b87f" prefix=" " category="inline-code"></block> 匹配上一个密码短语。</block>
  <block id="4f8a79fea6c3cc09f49769b8473808f7" category="list-text">创建一个新的装载卷的POD。这是启动轮换所必需的。</block>
  <block id="bcf837455c951c49bd9138ead166c489" category="list-text">验证密码短语是否已轮换。</block>
  <block id="0c7eac961f50eef2d0c82d382fdd18b3" category="paragraph">仅在卷和快照上返回新密码短语时、才会轮换密码短语。</block>
  <block id="6ff457ceee4568584dc3fd66c1ae658a" category="admonition">如果返回两个密码短语、例如<block ref="b5b0f81d5dbb45d3dd031f1b02af8bf3" prefix=" " category="inline-code"></block>、转出不完整。您可以触发新POD以尝试完成轮换。</block>
  <block id="b3f9d5f1e12f2ba5ecd2ece1e9084f3f" category="section-title">启用卷扩展</block>
  <block id="e5307495a3aec6528b42d3f3e835a761" category="paragraph">您可以在LUKS加密的卷上启用卷扩展。</block>
  <block id="aeec1a5a7dc7624995570096ce8156ef" category="inline-link-macro">Kubernetes 1.25：使用机密进行节点驱动型CSI卷扩展</block>
  <block id="1282398415278cc77bc47970640d4188" category="list-text">启用<block ref="b0e105de2a2f0820528649fee8d2e331" prefix=" " category="inline-code"></block> 功能门(测试版1.25以上)。请参见 <block ref="35e3bd84b2522e04fd4ead86130c9227" category="inline-link-macro-rx"></block> 了解详细信息。</block>
  <block id="e4de718025be845e2dec22064bb4eece" category="list-text">添加<block ref="91985ce21cd787a6ab2a13cc97f58968" prefix=" " category="inline-code"></block> 和<block ref="641c8d6753dd78e60ebb61a20e6a2742" prefix=" " category="inline-code"></block> StorageClass参数。例如：</block>
  <block id="e718558948d1441cf3873df6fb7b10c3" category="paragraph">启动联机存储扩展时、kubelet会将相应的凭据传递给驱动程序。</block>
  <block id="8a6112da5167fe6f44136715f1d86c36" category="paragraph">对于具有专用基础架构节点(例如OpenShift)或其他无法计划用户应用程序的节点的部署、应使用单独的导出策略进一步限制对存储资源的访问。其中包括为部署到这些基础架构节点的服务（例如 OpenShift 指标和日志记录服务）以及部署到非基础架构节点的标准应用程序创建导出策略。</block>
  <block id="a330e835c41b0ff1dfc7e483e7e7f70e" category="summary">虚拟池在Astra Trident的存储后端和Kubernetes的StorageClasses之间提供了一个抽象层。管理员可以通过这些协议以一种通用的，与后端无关的方式定义各个方面，例如每个后端的位置，性能和保护，而不会使 StorageClass 指定要用于满足所需条件的物理后端，后端池或后端类型。</block>
  <block id="9f77ac8822dd45ff19910e0170669eb7" category="paragraph">虚拟池在Astra Trident存储后端和Kubernetes之间提供了一个抽象层<block ref="f652904c3bfb48fb25a0a75f485f0ff6" prefix=" " category="inline-code"></block>。管理员可以通过这些协议以一种通用的、与后端无关的方式定义各个方面、例如每个后端的位置、性能和保护、而无需创建<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block> 指定要用于满足所需条件的物理后端、后端池或后端类型。</block>
  <block id="c395d1a6e14d73fb73663b1198b0b134" category="section-title">了解虚拟池</block>
  <block id="f66146f5a5a305009d0129474f6fc10e" category="paragraph">存储管理员可以在JSON或YAML定义文件中的任一Astra Trident后端定义虚拟池。</block>
  <block id="6293784c303cb134632b85dc06f372df" category="image-alt">显示了虚拟池的概念图。</block>
  <block id="e26346b2afab61526141ea7275a77ba3" category="list-text">定义虚拟池时、请勿尝试在后端定义中重新排列现有虚拟池的顺序。</block>
  <block id="92aa2031bb642a0c5c916142f725400d" category="list-text">建议不要修改现有虚拟池的属性。您应定义一个新的虚拟池以进行更改。</block>
  <block id="43d41b472d09879b85f78a3b8e487fd1" category="paragraph">大多数方面都以后端特定术语来指定。重要的是、宽高值不会公开在后端驱动程序之外、也不能在中进行匹配<block ref="f652904c3bfb48fb25a0a75f485f0ff6" prefix=" " category="inline-code"></block>。而是管理员为每个虚拟池定义一个或多个标签。每个标签都是一个键：值对，标签可能在唯一的后端通用。与其他方面一样，可以为每个池指定标签，也可以为后端指定全局标签。与具有预定义名称和值的方面不同，管理员可以根据需要全权定义标签键和值。为了方便起见、存储管理员可以按标签为每个虚拟池和组卷定义标签。</block>
  <block id="e084f7ea866c7ad616e67a911925c850" category="paragraph">答<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block> 通过引用选择器参数中的标签来标识要使用的虚拟池。虚拟池选择器支持以下运算符：</block>
  <block id="0b62778604e11f72525f5a82bbd26c6a" category="paragraph"><block ref="6a2736fcbb5755dd03d114a5153506eb" category="inline-link-rx"></block> 是一种完全托管的AWS服务、可使客户启动和运行由NetApp ONTAP 存储操作系统提供支持的文件系统。借助适用于ONTAP 的FSx、您可以利用您熟悉的NetApp功能、性能和管理功能、同时利用在AWS上存储数据的简便性、灵活性、安全性和可扩展性。FSX for ONTAP 支持ONTAP 文件系统功能和管理API。</block>
  <block id="9b85b10750f4b0e98b7853ee468d8bd5" category="list-text">SMB卷：</block>
  <block id="cf201a9e802aa6e35997590206919b1a" category="list-text">SMB卷支持使用<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 仅限驱动程序。</block>
  <block id="b184cfad0a2d14c9220db3d72006958c" category="list-text">Trident无法删除在启用了自动备份的Amazon FSX文件系统上创建的卷。要删除 PVC ，您需要手动删除 PV 和 ONTAP 的 FSX 卷。要防止此问题描述 ，请执行以下操作：</block>
  <block id="867730e819742e7e493081f160c42c61" category="paragraph">您可以使用以下驱动程序将Astra Trident与适用于NetApp ONTAP 的Amazon FSx集成：</block>
  <block id="676f29c1b0b3626bc959bdc6ebc8953b" category="paragraph">Astra Trident提供两种身份验证模式。</block>
  <block id="2dc4717be6b9cdf676df17aa86465f02" category="admonition">Astra Trident应作为运行<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block> SVM用户或具有相同角色的其他名称的用户。适用于NetApp ONTAP 的Amazon FSX具有<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block> 有限更换ONTAP 的用户<block ref="21232f297a57a5a743894a0e4a801fc3" prefix=" " category="inline-code"></block> 集群用户。我们强烈建议使用<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block> 使用Astra Trident。</block>
  <block id="43c502a16d6b21dc6eb26a2067154e11" category="paragraph">您可以更新后端以在基于凭据的方法和基于证书的方法之间移动。但是、如果您尝试提供*凭据和证书*、则后端创建将失败。要切换到其他身份验证方法、必须从后端配置中删除现有方法。</block>
  <block id="994eaa47aad78cae857818e1655e2800" category="paragraph">有关启用身份验证的详细信息、请参阅适用于您的驱动程序类型的身份验证：</block>
  <block id="57e00ef3eabad47fc79d0ef1319f989c" category="inline-link-macro">ONTAP NAS身份验证</block>
  <block id="840db27e4fe9967e908b8b101ca72198" category="list-text"><block ref="840db27e4fe9967e908b8b101ca72198" category="inline-link-macro-rx"></block></block>
  <block id="562276ffa617658595d5e6df35ef971c" category="inline-link-macro">ONTAP SAN身份验证</block>
  <block id="4a5e4254b1862ddbff7f81ed84e87125" category="list-text"><block ref="4a5e4254b1862ddbff7f81ed84e87125" category="inline-link-macro-rx"></block></block>
  <block id="d2aae26c4b1e25027872b1df4cee2081" category="paragraph">在配置Azure NetApp Files 后端之前、您需要确保满足以下要求。</block>
  <block id="53ba532dfa04fe29152221a3efb3e98f" category="doc">为Google Cloud后端配置Cloud Volumes Service</block>
  <block id="c891939fd67dfe2cdc8d8bd5a1404644" category="paragraph">了解如何使用提供的示例配置将适用于Google Cloud的NetApp Cloud Volumes Service 配置为Astra Trident安装的后端。</block>
  <block id="ac7ba403929463ebd2aabb621c443399" category="section-title">了解适用于Google Cloud的Cloud Volumes Service 的Astra Trident支持</block>
  <block id="f391d05be666574cba6a6b88827e5766" category="paragraph">Astra Trident可以在两个卷中创建Cloud Volumes Service 卷之一 <block ref="a3cd55e5a9ff014b76f6953040234c24" category="inline-link-macro-rx"></block>：</block>
  <block id="3671a5060127094ad405aad9295e6609" category="inline-link-macro">三个服务级别</block>
  <block id="9b44bc41471d2c2cc25eb7a9e5e01b49" category="list-text">*CVS-Performance*：默认的Astra Trident服务类型。这种性能优化的服务类型最适合重视性能的生产工作负载。CVS-Performance服务类型是一种硬件选项、支持的卷大小至少为100 GiB。您可以选择一个 <block ref="87d12cea36129673eb9128fd986958c5" category="inline-link-macro-rx"></block>：</block>
  <block id="1b3b34a1280074ca8311ff50bbacac6c" category="list-text"><block ref="c00f0c4675b91fb8b918e4079a0b1bac" prefix="" category="inline-code"></block></block>
  <block id="3f27980baf5bae9c9c40df09c54f6f23" category="list-text"><block ref="a288195832f8717bca4671416014a464" prefix="" category="inline-code"></block></block>
  <block id="091d891c1f040cef1072e2593b7f1f3b" category="list-text"><block ref="287e9593819b2fcdf9945e7ccacd637d" prefix="" category="inline-code"></block></block>
  <block id="1048ee58172376b84dda9c7505d858ea" category="inline-link-macro">两个服务级别</block>
  <block id="6c62a8c68facf167a61fbd54e9cceb5f" category="list-text">* CVS*：CVS服务类型提供高区域可用性、性能级别限制为中等。CVS服务类型是一个软件选项、可使用存储池支持小至1 GiB的卷。存储池最多可包含50个卷、其中所有卷都共享池的容量和性能。您可以选择一个 <block ref="21d52e1e64b94d45bea308be30f5a76a" category="inline-link-macro-rx"></block>：</block>
  <block id="277d5dd64fbcc2dbcd79252b41d6113e" category="list-text"><block ref="317ec56a799e879712bbd2d0fcbd3b93" prefix="" category="inline-code"></block></block>
  <block id="4bfd77bf3278584b71bc8c9deef39ca9" category="list-text"><block ref="75b65576cc4a19f0836b73610ad5957a" prefix="" category="inline-code"></block></block>
  <block id="66d7ad821e261a4b5099f37ced19ebb1" category="list-text">配置了NetApp Cloud Volumes Service 的Google Cloud帐户</block>
  <block id="f56a3add505b7e123b55b814f7acc26b" category="list-text">Cloud Volumes Service 帐户的API密钥文件</block>
  <block id="82409a3ea24b043087a2159a3e1f9f74" category="cell">用于指定CVS服务类型的可选参数。使用 ...<block ref="f9fa10ba956cacf91d7878861139efb9" prefix=" " category="inline-code"></block> 选择CVS服务类型。否则、Astra Trident将采用CVS-Performance服务类型 <block ref="3ca14c518d1bf901acc339e7c9cd6d7f" prefix="(" category="inline-code"></block>）。</block>
  <block id="5782f9a9357b5678058d6d3ceed21988" category="cell"><block ref="c614017642b6cfd9e6a25c7df122d917" prefix="" category="inline-code"></block></block>
  <block id="4efa10ec47c98c5ed67e1a72f7515240" category="cell">仅限CVS服务类型。用于指定用于创建卷的存储池的可选参数。</block>
  <block id="4149383e1cf45a36b373c5bded2ff6ba" category="cell">Google Cloud 帐户项目编号。此值可在Google Cloud门户主页上找到。</block>
  <block id="f0559497c76611a262c1a6fa93592cd7" category="cell">如果使用共享VPC网络、则为必需项。在此情景中、<block ref="80ef6899136dfcff295c16caa93c2138" prefix=" " category="inline-code"></block> 是服务项目、和<block ref="b5caf2c58446baec75b83bf637a98d1b" prefix=" " category="inline-code"></block> 是主机项目。</block>
  <block id="dbac640079c94d4a257a3513191a1ad6" category="cell">Astra Trident创建Cloud Volumes Service 卷的Google云区域。创建跨区域Kubernetes集群时、在中创建的卷<block ref="1e9c0fd1beef5ff8ed3bef2ae3b7e560" prefix=" " category="inline-code"></block> 可用于在多个Google Cloud地区的节点上计划的工作负载。跨区域流量会产生额外成本。</block>
  <block id="665f1a07bc016a07fdc13ef823fcdb03" category="cell">Google Cloud服务帐户的API密钥<block ref="4a5395c87dd91b3242056f83b7cedb9b" prefix=" " category="inline-code"></block> 角色。它包括 Google Cloud 服务帐户专用密钥文件的 JSON 格式的内容（逐字复制到后端配置文件）。</block>
  <block id="3430995d97c2d987bf88dfb93ddb34f7" category="cell">代理服务器需要连接到CVS帐户时的代理URL。代理服务器可以是 HTTP 代理，也可以是 HTTPS 代理。对于 HTTPS 代理，将跳过证书验证，以允许在代理服务器中使用自签名证书。不支持启用了身份验证的代理服务器。</block>
  <block id="4d9239a7fce916964ba8529021ab535f" category="cell">如果请求的卷大小超过此值、则配置失败。</block>
  <block id="c4105759a421b56f4e5aa47752aa6812" category="cell">新卷的CVS-Performance或CVS服务级别。CVS-Performance值为<block ref="c00f0c4675b91fb8b918e4079a0b1bac" prefix=" " category="inline-code"></block>，<block ref="a288195832f8717bca4671416014a464" prefix=" " category="inline-code"></block>或<block ref="287e9593819b2fcdf9945e7ccacd637d" prefix=" " category="inline-code"></block>。CVS值为<block ref="317ec56a799e879712bbd2d0fcbd3b93" prefix=" " category="inline-code"></block> 或<block ref="75b65576cc4a19f0836b73610ad5957a" prefix=" " category="inline-code"></block>。</block>
  <block id="5c3d9364df4807427e3297a90edf2831" category="cell">CVS-Performance默认值为"standard"。CVS默认值为"standardsw"。</block>
  <block id="5715e76155b75e9062107ef13c0576ed" category="cell">用于Cloud Volumes Service 卷的Google云网络。</block>
  <block id="ad438db80cb3bcd5f6fccdb1010b02f1" category="cell">故障排除时要使用的调试标志。示例、<block ref="9b8710f6da218ae915e4ba2ae63f23d0" prefix=" " category="inline-code"></block>。除非您正在进行故障排除并需要详细的日志转储，否则请勿使用此功能。</block>
  <block id="a5f4597012dd7af2b717fd4cc2f687fe" category="cell"><block ref="df6ccab784b5892507a7d11443254dc8" prefix="" category="inline-code"></block></block>
  <block id="d2e98deb07632de971600ae032776fe8" category="cell">要启用跨区域访问、请定义StorageClass<block ref="df6ccab784b5892507a7d11443254dc8" prefix=" " category="inline-code"></block> 必须包括所有地区。例如：<block ref="3e7c75911911d149520dd40104fd92d7" prefix=" " category="inline-code"></block></block>
  <block id="eb60cd2c0cff094ad0ecbe9d6fededcf" category="section-title">卷配置选项</block>
  <block id="afe8445a326424c54dfec7cc20994e8f" category="paragraph">您可以在中控制默认卷配置<block ref="a4a918a45181164207929d52aec36aec" prefix=" " category="inline-code"></block> 部分。</block>
  <block id="fdcd5d79603b7f7c0f9b4525dd19b6ab" category="cell">新卷的导出规则。必须是以 CIDR 表示法表示的任意 IPv4 地址或 IPv4 子网组合的逗号分隔列表。</block>
  <block id="d5c8102144978e060556ba194e006d1e" category="cell">新卷的大小。CVS性能最小值为100 GiB。CVS最小值为1 GiB。</block>
  <block id="400f2f53e7d26564783ac50a601d32cb" category="cell">CVS-Performance服务类型默认为"100GiB"。CVS服务类型未设置默认值、但至少需要1 GiB。</block>
  <block id="94e5c486f56b72f4237fe801615b4406" category="section-title">CVS-Performance服务类型示例</block>
  <block id="dea6ff4202a54251e04f7b84647690b6" category="paragraph">以下示例提供了CVS-Performance服务类型的示例配置。</block>
  <block id="ae174742813090d1ddbc3ed75d27f7f2" category="paragraph">这是使用默认CVS-Performance服务类型以及默认"标准"服务级别的最小后端配置。</block>
  <block id="8228a8de88271b4a6a07d5021ae4ff7c" category="example-title">示例2：服务级别配置</block>
  <block id="38a24bdf59c77f7705c407c60f3ea81e" category="paragraph">此示例说明了后端配置选项、包括服务级别和卷默认值。</block>
  <block id="4565a2282ee3312eddd091b3a3f6a263" category="example-title">示例3：虚拟池配置</block>
  <block id="ed7c2c2093c7c8deca88a6580c82633a" category="paragraph">此示例使用<block ref="ddecebdea58b5f264d27f1f7909bab74" prefix=" " category="inline-code"></block> 配置虚拟池和<block ref="f652904c3bfb48fb25a0a75f485f0ff6" prefix=" " category="inline-code"></block> 这是指它们。请参见 <block ref="f986c11e10e5f3c768f256080a1f3f99" category="inline-xref-macro-rx"></block> 以查看存储类的定义方式。</block>
  <block id="935927e4b464388790a08251e1c2254d" category="paragraph">此处为设置的所有虚拟池设置了特定的默认值<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block> 5%和<block ref="c72971f17465d2a32345bc872af62a34" prefix=" " category="inline-code"></block> 到0.0.0.0/0。虚拟池在中进行定义<block ref="ddecebdea58b5f264d27f1f7909bab74" prefix=" " category="inline-code"></block> 部分。每个虚拟池都定义了自己的虚拟池<block ref="f1d0ae63f2e948a9e43dcc60303d595d" prefix=" " category="inline-code"></block>、并且某些池会覆盖默认值。虚拟池标签用于根据区分池<block ref="c05f6c233521207f6fe311afef550c3c" prefix=" " category="inline-code"></block> 和<block ref="152f5dc0f7ac734f8e8ee17d4a482462" prefix=" " category="inline-code"></block>。</block>
  <block id="857fa84eb2e850753da87c8599addab3" category="section-title">存储类定义</block>
  <block id="5b797cdb3913e416eaea99109620eb0d" category="paragraph">以下StorageClass定义适用于虚拟池配置示例。使用<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block>、您可以为每个StorageClass指定用于托管卷的虚拟池。卷将在选定池中定义各个方面。</block>
  <block id="ea7cdbae94b0329e6731e1f3ae9fc4fc" category="example-title">存储类示例</block>
  <block id="48bbf2b27d410d92674b0f8f5d3447a0" category="list-text">第一个StorageClass <block ref="d3b08f69c5bb5aadd45b7ba9391c7447" prefix="(" category="inline-code"></block>)映射到第一个虚拟池。这是唯一一个可提供极高性能且 Snapshot 预留为 10% 的池。</block>
  <block id="c218d6520025e93f73bb7b0b289f3ebe" category="list-text">最后一个StorageClass <block ref="92c87bc6be7db462499a5a2258aa7ba9" prefix="(" category="inline-code"></block>)调用提供10%快照预留的任何存储池。Astra Trident决定选择哪个虚拟池、并确保满足快照预留要求。</block>
  <block id="d371b8466ee11b2a14782e343e3ed344" category="section-title">CVS服务类型示例</block>
  <block id="f7a4e685ebf6839fc43b3bbaeff96c33" category="paragraph">以下示例提供了CVS服务类型的示例配置。</block>
  <block id="96899a80429985fe87db6dedf997357e" category="example-title">示例1：最低配置</block>
  <block id="2bab01748045e624b36f643d0a50b1c2" category="paragraph">这是使用的最低后端配置<block ref="78ec9b60245b46a4f05158076962ace9" prefix=" " category="inline-code"></block> 指定CVS服务类型和默认值<block ref="317ec56a799e879712bbd2d0fcbd3b93" prefix=" " category="inline-code"></block> 服务级别。</block>
  <block id="d1f5fcc31a1c5bb592600c9f986af71c" category="example-title">示例2：存储池配置</block>
  <block id="879b7d1da5135e7d94358584a7245e33" category="paragraph">此示例后端配置使用<block ref="c614017642b6cfd9e6a25c7df122d917" prefix=" " category="inline-code"></block> 配置存储池。</block>
  <block id="4a9c2b6feb83a77f2806513226f33d05" category="summary">您可以将适用于NetApp ONTAP 的Amazon FSX文件系统与Astra Trident集成、以确保在Amazon Elastic Kubernetes Service (EKS)中运行的Kubernetes集群可以配置由ONTAP 提供支持的块和文件永久性卷。</block>
  <block id="8373fe009c8ffdbdda12cfedf744172c" category="doc">集成适用于NetApp ONTAP 的Amazon FSX</block>
  <block id="0629fb104936d0fb60cc736b6cb01caa" category="inline-link-macro">Astra Trident 要求</block>
  <block id="241f2511660937482446bd41efeac638" category="paragraph">此外 <block ref="1615f1c495dc4acc1bb5bea393c7532b" category="inline-link-macro-rx"></block>要将适用于ONTAP 的FSx与Astra Trident集成、您需要：</block>
  <block id="288b1cbb87d08c32abf3084c28636e5c" category="inline-link-macro">NFS或iSCSI</block>
  <block id="d7481875afa061fb651628b2597d52ec" category="list-text">为准备工作的工作节点 <block ref="966ed3bab2d39ae1014ad2eb34527e0f" category="inline-link-macro-rx"></block>。</block>
  <block id="d0341760d873a30f82a310a6eab0ba9c" category="admonition">确保按照Amazon Linux和Ubuntu所需的节点准备步骤进行操作<block ref="70013ee128d5437b3d9579d66ece4066" category="inline-link-rx"></block> （ AMIS ），具体取决于您的 EKS AMI 类型。</block>
  <block id="8df63c807f3c78b6087ad0d6ee434fb2" category="list-text">至少一个包含Active Directory凭据的Astra Trident密钥。以生成密钥<block ref="e47a193687dde960f6b6f80d394142a3" prefix=" " category="inline-code"></block>：</block>
  <block id="9303b8f40cf82f5e37702c7a6387e725" category="section-title">ONTAP SAN和NAS驱动程序集成</block>
  <block id="83d1f963158732d2aedc5119f242bcff" category="admonition">如果要为SMB卷配置、则必须读取 <block ref="688177e6b45c5d27a545463079c58d82" category="inline-xref-macro-rx"></block> 创建后端之前。</block>
  <block id="c8aecc44e726368f30c6757e9ab5b64b" category="list-text">收集SVM管理LIF DNS名称。例如、使用AWS命令行界面查找<block ref="a3c3b30ab91f2501f21058ee87f27a4f" prefix=" " category="inline-code"></block> 下的条目<block ref="b8724da75fb917e992576b17378e66b3" prefix=" " category="inline-code"></block> -&gt;<block ref="fe4dbcab9b910577e5035e97ac068dae" prefix=" " category="inline-code"></block> 运行以下命令后：</block>
  <block id="ed625a73c7dbbe8b3d51e643adb7ddfd" category="inline-link-macro">NAS后端身份验证</block>
  <block id="cac491bba67bb09dddb8fa935c0ed9d6" category="inline-link-macro">SAN后端身份验证</block>
  <block id="2c4646cfa545b727f14a7ee6560b41b8" category="list-text">创建和安装证书 <block ref="e0dfdc1f3574886f1078f7699f0f57f0" category="inline-link-macro-rx"></block> 或 <block ref="2ba00bd5ff04f92ed7b3b69e76174936" category="inline-link-macro-rx"></block>。</block>
  <block id="fc4e16be02eac62a40d8ba5714cbeda1" category="section-title">准备配置SMB卷</block>
  <block id="fbf3304d2358758ea71475804b2cbeae" category="paragraph">您可以使用配置SMB卷<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 驱动程序。完成前 <block ref="24f26185e00986318dc562523d4edbf6" category="inline-xref-macro-rx"></block> 完成以下步骤。</block>
  <block id="d98f239eeb5789a80cb4b247e5be144d" category="inline-link-macro">Microsoft管理控制台</block>
  <block id="8e6249724e4eef8026e47829f03f9e67" category="list-text">创建SMB共享。您可以使用以下两种方式之一创建SMB管理共享 <block ref="364bc251e9c8cfbf6ce258767d17d682" category="inline-link-macro-rx"></block> 共享文件夹管理单元或使用ONTAP 命令行界面。要使用ONTAP 命令行界面创建SMB共享、请执行以下操作：</block>
  <block id="c9e9c2bb32e43693c4687ec082488811" category="list-text">如有必要，为共享创建目录路径结构。</block>
  <block id="8a19300a396203718795b4620552b59c" category="paragraph">。<block ref="293a1aaca0a542f4f1b1dc1a3ad95728" prefix=" " category="inline-code"></block> 命令会在创建共享期间检查-path选项中指定的路径。如果指定路径不存在，则命令将失败。</block>
  <block id="a968d0620b250ca44da661cadac02e42" category="list-text">创建与指定SVM关联的SMB共享：</block>
  <block id="e172e0c83051eb537305571585af294a" category="list-text">验证是否已创建共享：</block>
  <block id="a6e62ff657f01a7df2d91d1ea0d3e76c" category="inline-link-macro">创建 SMB 共享</block>
  <block id="39026ea2687a8de2a318f8245aceb992" category="admonition">请参见 <block ref="2b8c6fb4597e9bb000d4d88db3769c9a" category="inline-link-macro-rx"></block> 了解完整详细信息。</block>
  <block id="e4f84f59067aa8e22119bf499379385a" category="inline-link-macro">适用于ONTAP 的FSX配置选项和示例</block>
  <block id="ca088cbb36bbab4b23e57d63d95a628c" category="list-text">创建后端时、必须配置以下内容以指定SMB卷。有关适用于ONTAP 后端的所有FSX配置选项、请参见 <block ref="dd05fa371cf4b2c8377b8b4b261a8edd" category="inline-link-macro-rx"></block>。</block>
  <block id="7bb910e3cf11d0b34ca215aa399d3f23" category="cell"><block ref="5910159ef86741f119f7574a9064b5b0" prefix="" category="inline-code"></block></block>
  <block id="3b84c7b88317953423192c633a83db9f" category="cell">*必须设置为<block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix=" " category="inline-code"></block>如果为空、则默认为<block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix=" " category="inline-code"></block>。</block>
  <block id="1928bae58ae496b53ef1a163c3dbeeb4" category="cell">新卷的模式。对于SMB卷、*必须留空。*</block>
  <block id="ded47128219e64b5f24343dab357151b" category="admonition">Astra Trident强制使用空<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block> 创建的卷。对于iSCSI后端、建议强制实施<block ref="01cd995fd9a843d3ca767e057de28873" prefix=" " category="inline-code"></block> 在StorageClass中。您应删除现有StorageClasses并使用重新创建它们<block ref="01cd995fd9a843d3ca767e057de28873" prefix=" " category="inline-code"></block> 已指定。</block>
  <block id="3418e818bbbe397a49b7096a5ed87929" category="cell">由SVM派生</block>
  <block id="1545a9d9aae1b8b83497bbe9185d348b" category="cell">使用CHAP对iSCSI的ONTAP SAN驱动程序进行身份验证[布尔值]。设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block> 让Astra Trident为后端给定的SVM配置并使用双向CHAP作为默认身份验证。请参见 <block ref="866e591dc2a03ecc454dad25a664ca86" category="inline-link-macro-rx"></block> 了解详细信息。</block>
  <block id="2da9f60cc5b99a5987580c38e6db0842" category="cell">受信任 CA 证书的 Base64 编码值。可选。用于基于证书的身份验证。</block>
  <block id="394d848f17683e31e21f6cde5fd9e3e4" category="cell">与ONTAP 集群通信所需的用户名。用于基于凭据的身份验证。</block>
  <block id="6f0acf4836d44b03512e1caa0d774777" category="cell">与ONTAP 集群通信所需的密码。用于基于凭据的身份验证。</block>
  <block id="a0de2cc0c77c388210e1f48423eea29c" category="cell">在 SVM 中配置新卷时使用的前缀。无法稍后修改。要更新此参数、您需要创建一个新的后端。</block>
  <block id="e54cbd8ca5da26dc7e4be3bbfd23467e" category="cell">如果使用量超过此百分比，则配置失败。如果您使用适用于NetApp ONTAP 后端的Amazon FSX、请勿指定 <block ref="d57551b1efacf8a7be84b4d10c5a6e99" prefix=" " category="inline-code"></block>。提供的<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block> 和<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block> 请勿包含检索聚合使用情况所需的权限、并使用Astra Trident对其进行限制。</block>
  <block id="f804cd6668c0728e26448509210268d3" category="cell">如果请求的卷大小超过此值、则配置失败。此外、还会限制它为qtree和LUN管理的卷的最大大小。</block>
  <block id="b3a74fee006256ec5d63fe251b553f1d" category="cell">故障排除时要使用的调试标志。例如、除非您正在进行故障排除并需要详细的日志转储、否则｛"api"：false、"method "：true｝请勿使用。</block>
  <block id="cc30671ec52693851659adb7020e02b1" category="cell">用于使用 ONTAP REST API 的布尔参数。* 技术预览 *<block ref="14d839191d1ecf387a15b5b0c802a8ae" prefix=" " category="inline-code"></block> 作为一个*技术预览版提供、建议用于测试环境、而不是生产工作负载。设置为时<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>、Astra Trident将使用ONTAP REST API与后端进行通信。此功能需要使用ONTAP 9.11.1及更高版本。此外、使用的ONTAP 登录角色必须有权访问<block ref="a9ba4dc88fa11d44cc7c0c918d174778" prefix=" " category="inline-code"></block> 应用程序。这一点可通过预定义来满足<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block> 和<block ref="fdb6ba311fad29ec53069808f10ebef4" prefix=" " category="inline-code"></block> 角色。<block ref="14d839191d1ecf387a15b5b0c802a8ae" prefix=" " category="inline-code"></block> MetroCluster 不支持。</block>
  <block id="c59183b2f668b355e81e7bb1256f92b3" category="paragraph">您可以在中使用这些选项控制默认配置<block ref="a4a918a45181164207929d52aec36aec" prefix=" " category="inline-code"></block> 配置部分。有关示例，请参见以下配置示例。</block>
  <block id="d4fbfa2dd496728ba6294eb840ce25eb" category="cell">要为创建的卷分配的 QoS 策略组。选择每个存储池 / 后端的 qosPolicy 或 adaptiveQosPolicy 之一。在 Astra Trident 中使用 QoS 策略组需要 ONTAP 9.8 或更高版本。建议使用非共享QoS策略组、并确保策略组分别应用于每个成分卷。共享 QoS 策略组将对所有工作负载的总吞吐量实施上限。</block>
  <block id="b71ccf1062cee8c376a7eb37e3c42603" category="cell">启用LUKS加密。请参见 <block ref="569f9f91cdcc19909b8acbf6f423daf7" category="inline-link-macro-rx"></block>。</block>
  <block id="e62f5d0a5a95571e25197caafe78cd98" category="section-title">卷配置示例</block>
  <block id="1b9ef354b22d8a8b125247fd538da4b2" category="section-title">虚拟池后端示例</block>
  <block id="dbd1f003df542a684d9c10246dc8a88f" category="paragraph">Astra Trident会在"Comments"字段中设置配置标签。注释在FlexVol 上设置。在配置时、Astra Trident会将虚拟池上的所有标签复制到存储卷。为了方便起见、存储管理员可以按标签为每个虚拟池和组卷定义标签。</block>
  <block id="615c9f89b360c50cfba2b2de02584387" category="paragraph">以下StorageClass定义引用了上述虚拟池。使用<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block> 字段中、每个StorageClass都会调用可用于托管卷的虚拟池。卷将在选定虚拟池中定义各个方面。</block>
  <block id="065b7cc24b33be7af1e15f59024402d2" category="paragraph">Astra Trident将决定选择哪个虚拟池、并确保满足存储要求。</block>
  <block id="c632eed28bf53466df8b8a33aedab3af" category="list-text">虚拟池(如果存在)必须与原始后端的顺序相同。</block>
  <block id="87a522ecb9df14bf978f6f1da8a654a8" category="list-text">您不能通过删除来撤消对源PVC的访问<block ref="287f26e3328f9ac0f3f4da2cdaddd3e2" prefix=" " category="inline-code"></block> 或<block ref="11650d25d20af47978d85fd6e19c89aa" prefix=" " category="inline-code"></block> 标注或删除<block ref="d6995f631b22fb3f8e94aad1b40d1280" prefix=" " category="inline-code"></block> CR.要撤消访问、必须删除从属PVC。</block>
  <block id="ae8df8316f5c485b7db4e7141e899701" category="cell">指定的地址或派生自SVM (如果未指定)(不建议)</block>
  <block id="ad898a5f5863162f9c13e958485877d5" category="cell">启用自动创建和更新导出策略[布尔值]。使用<block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix=" " category="inline-code"></block> 和<block ref="b9c40fbe9daa81e40e06509d5bbd5a6c" prefix=" " category="inline-code"></block> 选项、Astra Trident可以自动管理导出策略。</block>
  <block id="82530dd92610570d634788e7fac29c1b" category="cell">如果使用量超过此百分比，则配置失败。* 不适用于适用于 ONTAP 的 Amazon FSx *</block>
  <block id="9f0e1cc91ea4107261588e8f1bd02d07" category="cell">如果请求的卷大小超过此值、则配置失败。此外、还会限制它为qtree和LUN以及管理的卷的最大大小<block ref="8b08152c170e621ffcc8bfac7c4d6785" prefix=" " category="inline-code"></block> 选项用于自定义每个FlexVol 的最大qtree数。</block>
  <block id="5c8b39f8ec19acb1fddb0b5c021f090d" category="cell">故障排除时要使用的调试标志。例如、｛"api"：false、"method "：true｝不使用<block ref="effa2d809c72dcb6cce15a1e0b040e63" prefix=" " category="inline-code"></block> 除非您正在进行故障排除并需要详细的日志转储。</block>
  <block id="b660669829d401dc613c20939ed01e6e" category="cell">NFS挂载选项的逗号分隔列表。Kubernetes持久卷的挂载选项通常在存储类中指定、但如果在存储类中未指定挂载选项、则Astra Trident将回退到使用存储后端配置文件中指定的挂载选项。如果在存储类或配置文件中未指定挂载选项、则Astra Trident不会在关联的永久性卷上设置任何挂载选项。</block>
  <block id="a2b63939d1ced2a10bc8dec4d3ef2604" category="cell">对于NFS卷为"777"；对于SMB卷为空(不适用)</block>
  <block id="0275de02c3bba722f4540469d23cc535" category="paragraph">此示例显示了<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block> 使用IPv6地址。</block>
  <block id="bc0c77920482bbcdc79d8f24445101e0" category="paragraph">Astra Trident会在"Comments"字段中设置配置标签。注释在FlexVol 上为设置<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 或FlexGroup<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>。在配置时、Astra Trident会将虚拟池上的所有标签复制到存储卷。为了方便起见、存储管理员可以按标签为每个虚拟池和组卷定义标签。</block>
  <block id="0bd54df5242a2a2e9eca045fc695b41f" category="section-title">更新<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block> 初始配置后</block>
  <block id="d0b121ba3c5e39bba858ccfcf5a75957" category="paragraph">您可以在初始配置后更改数据LIF、方法是运行以下命令、为新的后端JSON文件提供更新的数据LIF。</block>
  <block id="3fa13ec46a3746ee36c97d65fa53f096" category="admonition">如果PVC连接到一个或多个Pod、则必须关闭所有对应Pod、然后将其恢复到、新数据LIF才能生效。</block>
  <block id="a84a64b02579dc14f89cbfdf30b6e938" category="list-text">您可以使用指定日志保留时间范围<block ref="86339c2ed773d5bd944b82d3086d3477" prefix=" " category="inline-code"></block> 标志。例如：<block ref="e238339d491d4840f7d8e509bdbb7b63" prefix=" " category="inline-code"></block>。此信息通过收集和发送<block ref="9d80ca17f097c8e365550f4036ccf0e3" prefix=" " category="inline-code"></block> 与Astra Trident一起安装的容器。您可以从获取容器映像<block ref="1b00454f0ab35dcec2ee1a0061efc6e5" category="inline-link-rx"></block>。</block>
  <block id="76b4586b7207f884c66397194b773e14" category="summary">了解适用于ONTAP 的Amazon FSX的后端配置选项。本节提供了后端配置示例。</block>
  <block id="bf432628a3769cd379c6784688db312f" category="cell">协议 LIF 的 IP 地址。* ONTAP NAS驱动程序*：建议指定dataLIF。如果未提供此参数、则Astra Trident会从SVM提取数据LIF。您可以指定用于NFS挂载操作的完全限定域名(FQDN)、从而可以创建循环DNS、以便在多个数据LIF之间实现负载平衡。可以在初始设置后更改。请参见 <block ref="b2c939cb81e81d99a25f4be74f517f2f" category="inline-xref-macro-rx"></block>。* ONTAP SAN驱动程序*：不为iSCSI指定。Astra Trident使用ONTAP 选择性LUN映射来发现建立多路径会话所需的iSCI LIF。如果明确定义了dataLIF、则会生成警告。如果使用安装了Astra Trident、则可以将设置为使用IPv6地址<block ref="4a4ef9f92e69acc000120379678aadcf" prefix=" " category="inline-code"></block> 标志。IPv6地址必须用方括号定义、例如：[28e8：d9fb：a825：b7bf：69a8：d02f：9e7b：3555]。</block>
  <block id="508e91a481a0d10be716ae1a501447d0" category="cell">"["0.0.0.0/0 "、"：：/0 "]"</block>
  <block id="b8c7e19ba614c29878588409008e29c6" category="cell">用于连接到集群或SVM的用户名。用于基于凭据的身份验证。例如、vsadmin。</block>
  <block id="9a2486a943ad2a4c99f2797d6984f3d0" category="cell">用于连接到集群或SVM的密码。用于基于凭据的身份验证。</block>
  <block id="6018b4c39d938c6589decae81b54c6f0" category="cell">如果指定SVM管理LIF则派生。</block>
  <block id="4cba35e041b22828be7c835295ee9102" category="cell">在 SVM 中配置新卷时使用的前缀。创建后无法修改。要更新此参数、您需要创建一个新的后端。</block>
  <block id="2b3e2c0490ded1bc79028dd367358b9d" category="cell">*请勿为适用于NetApp ONTAP 的Amazon FSX指定。*提供的<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block> 和<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block> 请勿包含检索聚合使用情况所需的权限、并使用Astra Trident对其进行限制。</block>
  <block id="86f4c9647fe8f4c500055c772753cc6f" category="cell">请勿使用。</block>
  <block id="bd4c4a75acd87c86694e9aca1e4050e2" category="cell">每个FlexVol 的最大LUN数必须在50、200范围内。仅限SAN。</block>
  <block id="e939be085c2babe4ff0f08e09d0cdfd2" category="cell">配置NFS或SMB卷创建。选项包括<block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix=" " category="inline-code"></block>，<block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix=" " category="inline-code"></block>或为空。*必须设置为<block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix=" " category="inline-code"></block> 对于SMB卷。*如果设置为空、则默认为NFS卷。</block>
  <block id="2ab2b81dde76a2ec7ed3798f1538f823" category="cell">用于使用 ONTAP REST API 的布尔参数。* 技术预览 *<block ref="14d839191d1ecf387a15b5b0c802a8ae" prefix=" " category="inline-code"></block> 作为一个*技术预览版提供、建议用于测试环境、而不是生产工作负载。设置为时<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>、Astra Trident将使用ONTAP REST API与后端进行通信。此功能需要使用ONTAP 9.11.1及更高版本。此外、使用的ONTAP 登录角色必须有权访问<block ref="a9ba4dc88fa11d44cc7c0c918d174778" prefix=" " category="inline-code"></block> 应用程序。这一点可通过预定义来满足<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block> 和<block ref="fdb6ba311fad29ec53069808f10ebef4" prefix=" " category="inline-code"></block> 角色。</block>
  <block id="f9d8bcec134b3ae3cb7aaac7048373ee" category="cell">要为创建的卷分配的 QoS 策略组。选择每个存储池或后端的qosPolicy或adaptiveQosPolicy之一。在 Astra Trident 中使用 QoS 策略组需要 ONTAP 9.8 或更高版本。建议使用非共享QoS策略组、并确保策略组分别应用于每个成分卷。共享 QoS 策略组将对所有工作负载的总吞吐量实施上限。</block>
  <block id="a8fe789c9febc6b76736fb83c90df2b7" category="cell">要为创建的卷分配的自适应 QoS 策略组。选择每个存储池或后端的qosPolicy或adaptiveQosPolicy之一。不受 ontap-nas-economy.</block>
  <block id="8336fb38c3b943161d5d6e73af8f4a12" category="cell">启用LUKS加密。请参见 <block ref="3646c7a69a11bdd94c010bf856bda313" category="inline-link-macro-rx"></block>。仅限SAN。</block>
  <block id="8ba802b52dc84f4e82bfbbf2e2d4a807" category="cell">新卷的模式。*对于SMB卷保留为空。*</block>
  <block id="ce627e1ba8a6bccff2793f66b44012fa" category="cell">""</block>
  <block id="88b0b88c998957f004af42563d5e5b40" category="paragraph">使用<block ref="296026821ada2ab8aebcf13547a63df5" prefix=" " category="inline-code"></block>，<block ref="e12fdd044232e643620eed06bf33c7af" prefix=" " category="inline-code"></block>，和<block ref="1ad68a6a046942b7c1666aed825df70a" prefix=" " category="inline-code"></block>、您可以指定SMB卷并提供所需的Active Directory凭据。SMB卷支持使用<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 仅限驱动程序。</block>
  <block id="98e45a92edd75cce26a32a68de45f178" category="summary">后端定义了 Astra Trident 与存储系统之间的关系。它告诉 Astra Trident 如何与该存储系统进行通信，以及 Astra Trident 如何从该存储系统配置卷。</block>
  <block id="a576cff5a76e67426a0051b7e1b93331" category="paragraph">Astra Trident会自动从后端提供符合存储类定义的要求的存储池。了解如何为存储系统配置后端。</block>
  <block id="262309361fe5b6dcda3a2eae08a48c2d" category="section-title">选择合适的工具</block>
  <block id="82ee439808998e63e6868ec2c2945ec9" category="paragraph">如果要组合使用驱动程序、则应安装NFS和iSCSI工具。</block>
  <block id="2cb4ed05fbad97efb755e294c572862d" category="paragraph-title">NFS工具</block>
  <block id="a9e67ed867ad461570158dca74719f75" category="paragraph">如果您使用的是以下命令、请安装NFS工具：<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>，<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>，<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>，<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block>，<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block></block>
  <block id="0172151d0fbf6ae973feaaaf8a2c1b3a" category="paragraph-title">iSCSI工具</block>
  <block id="b7ebd185ede5c83487cb4ac908bab891" category="paragraph">如果您使用的是以下命令、请安装iSCSI工具：<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>，<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>，<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block></block>
  <block id="d3d338d650fae8dd20bbce45831b41a9" category="admonition">默认情况下、最新版本的RedHat CoreOS会安装NFS和iSCSI。</block>
  <block id="b5a99bc586551f60f1fa102fcf3a90de" category="paragraph">Astra Trident会尝试自动检测节点是否可以运行iSCSI或NFS服务。</block>
  <block id="6a9c3f120f628091afbdc5343cbbe0e1" category="paragraph-title">查看事件</block>
  <block id="331ef15228e3a5548d228c3aea284e38" category="paragraph">Astra Trident会为节点创建事件以标识发现的服务。要查看这些事件、请运行：</block>
  <block id="70db3e5b82bc8c7ce4389fe8a025df28" category="paragraph-title">查看发现的服务</block>
  <block id="ce31bc8e7fc118dd3b337bcf4c41e399" category="paragraph">Astra Trident标识为Trident节点CR上的每个节点启用的服务。要查看发现的服务、请运行：</block>
  <block id="eeacf148d8ecc80cfae337218dd81f43" category="paragraph">使用适用于您的操作系统的命令安装NFS工具。确保NFS服务已在启动期间启动。</block>
  <block id="7b05c6f5db7b1690970d79c209e667fc" category="admonition">安装NFS工具后重新启动工作节点、以防止在将卷连接到容器时失败。</block>
  <block id="66ccc45f9958fe5f1a0ef0427d36d4c3" category="paragraph">Astra Trident可以自动建立iSCSI会话、扫描LUN、发现多路径设备、对其进行格式化并将其挂载到Pod。</block>
  <block id="e81b5ef34c686914f0cc58204241cace" category="section-title">iSCSI自我修复功能</block>
  <block id="f0621bdb4caa030dcd0bb9924891842e" category="paragraph">对于ONTAP 系统、Astra Trident每五分钟运行一次iSCSI自我修复、以便：</block>
  <block id="432fa9215202553559f7b2d4d10ef5ee" category="list-text">*确定*所需的iSCSI会话状态和当前的iSCSI会话状态。</block>
  <block id="fdb53d548f3fa1b93129b49ad4bc7990" category="list-text">*将所需状态与当前状态进行比较*、以确定所需的修复。Astra Trident可确定修复优先级以及提前修复的时间。</block>
  <block id="587fcf25ecbc5ff7cf19f7b1a159b5e9" category="list-text">需要执行*修复*才能将当前iSCSI会话状态恢复为所需的iSCSI会话状态。</block>
  <block id="aa66c6c24f8a8540d1582c79e4534c94" category="admonition">自我修复活动日志位于中<block ref="7883e3d8f80ff24d70c49bd975fb3f75" prefix=" " category="inline-code"></block> 相应的Demonset Pod上的容器。要查看日志、必须已设置<block ref="ad42f6697b035b7580e4fef93be20b4d" prefix=" " category="inline-code"></block> 在Astra Trident安装期间设置为"true"。</block>
  <block id="0be81019f18cde342a2e6728cbcb66cc" category="paragraph">Astra Trident iSCSI自我修复功能有助于防止：</block>
  <block id="4b42deda281d95aafb0896a44484007a" category="list-text">在网络连接问题描述 之后可能发生的陈旧或运行不正常的iSCSI会话。如果会话已过时、则Astra Trident会等待七分钟、然后再注销以重新建立与门户的连接。</block>
  <block id="39460cb84da78b4a87c2014972b2f901" category="admonition">例如、如果在存储控制器上轮换了CHAP密钥、而网络断开了连接、则旧的(_stal_) CHAP密钥可能会持续存在。自修复功能可以识别此问题、并自动重新建立会话以应用更新后的CHAP密码。</block>
  <block id="9e9d382760025434fdf113f91e894cf4" category="list-text">缺少iSCSI会话</block>
  <block id="3f7bf0ef305a15c68efdc95a50750bd0" category="list-text">缺少LUN</block>
  <block id="15ffa30c3d1ab6322e5ff52935a86a50" category="section-title">安装iSCSI工具</block>
  <block id="10ff9e1b33974d06317ff739498154ce" category="paragraph">使用适用于您的操作系统的命令安装iSCSI工具。</block>
  <block id="0dfbc86ddb50cb439c7039bbf012a2b6" category="admonition">安装iSCSI工具后重新启动工作节点、以防止在将卷连接到容器时失败。</block>
  <block id="3aa4918283a3160586bdbe1e76a338f3" category="example-title">示例4：虚拟池配置</block>
  <block id="baca3a42ff523348689308c7bd411b38" category="paragraph">此后端配置可在一个文件中定义多个存储池。如果您有多个容量池支持不同的服务级别，并且您希望在 Kubernetes 中创建表示这些服务级别的存储类，则此功能非常有用。虚拟池标签用于根据区分池<block ref="c05f6c233521207f6fe311afef550c3c" prefix=" " category="inline-code"></block>。</block>
  <block id="6d0abb9b77cb1a57bf68282003ad11b9" category="list-text">所有 Kubernetes 工作节点都应安装适当的 iSCSI 工具。请参见 <block ref="073953144b84efd85603bb3d49521e06" category="inline-link-macro-rx"></block>。</block>
  <block id="bfd7bf04b3d28a42267e8d1b30a05f01" category="section-title">示例2：的后端和存储类配置<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> 具有虚拟池的驱动程序</block>
  <block id="418ff75ccabac38370cc8570721746a3" category="paragraph">此示例显示了使用虚拟池配置的后端定义文件以及引用这些池的StorageClasses。</block>
  <block id="d0f8c7d1b12ede190acf9656da99c079" category="paragraph">在配置时、Astra Trident会将存储池上的标签复制到后端存储LUN。为了方便起见、存储管理员可以按标签为每个虚拟池和组卷定义标签。</block>
  <block id="d17a2942ee77aa1532660a5f0cf0d6e5" category="paragraph">第一个StorageClass <block ref="166028d9a95f5465a6ae917e6e089ce6" prefix="(" category="inline-code"></block>)将映射到第一个虚拟池。这是唯一一个可通过提供金牌性能的池<block ref="89bf6c97f9a3eaea76c86df0086361bc" prefix=" " category="inline-code"></block> 金牌。最后一个StorageClass <block ref="b4457b3eeca98cadb51648f8fcef36cb" prefix="(" category="inline-code"></block>)调用提供银牌性能的任何存储池。Astra Trident将决定选择哪个虚拟池、并确保满足存储要求。</block>
  <block id="7ac6994e44af62a9075fd956e72ee6fb" category="paragraph">请注意，后端定义是凭据以纯文本格式存储的唯一位置。创建后端后，用户名 / 密码将使用 Base64 进行编码并存储为 Kubernetes 密钥。创建或更新后端是唯一需要了解凭据的步骤。因此，这是一项仅由管理员执行的操作，由 Kubernetes 或存储管理员执行。</block>
  <block id="f1fe71442cd08e74d342114df7ee1551" category="sidebar">安装 Astra Trident</block>
  <block id="46921a75e8534ad7d1c379a9e3aec033" category="sidebar">安装概述</block>
  <block id="3183dc3907c0b67930b221a316c94cb2" category="sidebar">使用Trident操作员安装</block>
  <block id="ca19905e19a036badc8a33897130382d" category="sidebar">手动部署Trident操作员(标准)</block>
  <block id="ef39c7f15f2671234f3264999cce5679" category="sidebar">手动部署Trident操作员(脱机)</block>
  <block id="0f441bb0252fa34f85fc82a08f2db0c7" category="sidebar">使用Trident Helm图表(标准)</block>
  <block id="70eb578fbddf25c465d8f4886be750b7" category="sidebar">使用Trident Helm图表(脱机)</block>
  <block id="71f5771dab663d80ba4dad1627e3386a" category="sidebar">升级概述</block>
  <block id="301ebdf8067a213d5a55c65fbb488290" category="sidebar">安全建议</block>
  <block id="58834b137fd6fa7a9ca23468a5c91fd6" category="sidebar">准备配置</block>
  <block id="6fc0b7515ecca271c88eae4a685da613" category="sidebar">NetApp HCI 或SolidFire</block>
  <block id="60be48bb4b3314965bf50e88e7ae728c" category="sidebar">集成适用于ONTAP 的Amazon FSX</block>
  <block id="ea3d51fb2b16acb7cb260f25bc8965b1" category="sidebar">Astra Trident 是由 NetApp 维护的开源存储配置程序和流程编排程序。通过它，您可以为 Docker 和 Kubernetes 管理的容器化应用程序创建存储卷。</block>
  <block id="e267c2490c7d73d0ffa909b77267cfaf" category="inline-link-macro">Astra Control复制前提条件</block>
  <block id="9814801b0db6e324ebd72f671418de64" category="paragraph">Astra Control可为使用创建的卷提供无缝保护、灾难恢复和移动性(在Kubernetes集群之间移动卷)<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>，<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>，和<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 驱动程序。请参见 <block ref="dfc981ac97be73172a3119f3b831eaf8" category="inline-link-macro-rx"></block> 了解详细信息。</block>
  <block id="783c2760a502e1f1537de458c9dceb7a" category="list-text">您必须使用<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 适用于需要数据保护、灾难恢复和移动性的生产工作负载。</block>
  <block id="a743248a7032cdf1d468935cf180bdee" category="list-text">使用 ...<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 预期的卷使用量应远远高于ONTAP 支持的容量。</block>
  <block id="0655cc918eb576b740cfd35bbff9c8ac" category="list-text">使用 ...<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> 仅当预期的卷使用量应远高于ONTAP 支持的容量时、以及<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 无法使用驱动程序。</block>
  <block id="df7dec428425115b59101028bbebe58c" category="list-text">请勿使用<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> 预测数据保护、灾难恢复或移动性的需求。</block>
  <block id="f5d176b3de4662ca3603a69ab08bc166" category="paragraph">用于访问已配置NFS卷的NAS选项。</block>
  <block id="053b422d907cb55ac105c173adde1080" category="paragraph">NFS支持<block ref="1d770934d44de09b0d24f04fd01708ba" prefix=" " category="inline-code"></block> 和<block ref="4913a9178621eadcdf191db17915fbcb" prefix=" " category="inline-code"></block> 安全模式。默认值为<block ref="4913a9178621eadcdf191db17915fbcb" prefix=" " category="inline-code"></block>。</block>
  <block id="69f25314e2d927ebcaa0f19c9f2a57da" category="paragraph"><block ref="4913a9178621eadcdf191db17915fbcb" prefix="" category="inline-code"></block></block>
  <block id="2bd69c3354973375e1abed3c9beb1eff" category="cell"><block ref="f777ab485270937cd9b9efc63021484f" prefix="" category="inline-code"></block></block>
  <block id="767b06b78582b463da02281e05c82e45" category="cell"><block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix="" category="inline-code"></block></block>
  <block id="11d7f0efe30199fc66cbc43c427e147d" category="cell">新卷的安全模式。*必须设置为<block ref="68e98b83f5bd746f1468dff89f529d1b" prefix=" " category="inline-code"></block> 或<block ref="1d770934d44de09b0d24f04fd01708ba" prefix=" " category="inline-code"></block> 用于SMB卷。*</block>
  <block id="e76ea7f2be658dc914f9c95fe8d14fcf" category="cell"><block ref="68e98b83f5bd746f1468dff89f529d1b" prefix="" category="inline-code"></block> 或<block ref="1d770934d44de09b0d24f04fd01708ba" prefix=" " category="inline-code"></block> 对于SMB卷</block>
  <block id="375aa0b790f300787cdecf0f896b97f5" category="cell">新卷的安全模式。NFS支持<block ref="1d770934d44de09b0d24f04fd01708ba" prefix=" " category="inline-code"></block> 和<block ref="4913a9178621eadcdf191db17915fbcb" prefix=" " category="inline-code"></block> 安全模式。SMB支持<block ref="1d770934d44de09b0d24f04fd01708ba" prefix=" " category="inline-code"></block> 和<block ref="68e98b83f5bd746f1468dff89f529d1b" prefix=" " category="inline-code"></block> 安全模式。</block>
  <block id="4a359bdcdb3ce547581bdea3ce6c5bd7" category="cell">NFS默认值为<block ref="4913a9178621eadcdf191db17915fbcb" prefix=" " category="inline-code"></block>。SMB默认值为<block ref="68e98b83f5bd746f1468dff89f529d1b" prefix=" " category="inline-code"></block>。</block>
  <block id="15bee4120a83692e1e575f756f0259e2" category="admonition"><block ref="ed48900d86ac476d7fed80ae1701877f" prefix="" category="inline-code"></block> 支持SMB卷的池的筛选器。<block ref="7b2498fa5e66ef102dc531d0bf5c27a4" prefix=" " category="inline-code"></block> 或<block ref="45e1f49760c85197cd1d0fb6ee50f180" prefix=" " category="inline-code"></block> NFS池的筛选器。</block>
  <block id="e69dee79b2104ff7c08b095e6212f492" category="list-text">将安装了Astra Trident的Kubernetes集群从1.24升级到1.25或更高版本时、必须将values.yaml更新为set<block ref="94ef2a130a825358ab3002442d6e5145" prefix=" " category="inline-code"></block> to<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block> 或添加<block ref="96d5d0b9a6e3e01b2ae2ed889f75d22e" prefix=" " category="inline-code"></block> 到<block ref="cd01e1bae83933b9c59c914bc71332ac" prefix=" " category="inline-code"></block> 命令。</block>
  <block id="b3735f022036728c24121c449da97183" category="inline-link-macro">Trident和CSI映像</block>
  <block id="c4ffea098f78924a9b9331b8f5e9c8b4" category="open-title">一个注册表中的映像</block>
  <block id="4847c552b2ff9251806e41c8fa907e19" category="open-title">不同注册表中的映像</block>
  <block id="7a958030f69f08aa24ff2b440556c305" category="summary">您可以使用安装Astra Trident<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。此过程将处理适用场景 安装、其中、Astra Trident所需的容器映像是否存储在专用注册表中。</block>
  <block id="9b809d56a3bb0caddcd0793e74d8e636" category="paragraph">您可以使用安装Astra Trident<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。此过程将处理适用场景 安装、其中、Astra Trident所需的容器映像是否存储在专用注册表中。以自定义<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 部署、请参见 <block ref="8e7a26c9800a78fa0b68fb2423ba3fb4" category="inline-link-macro-rx"></block>。</block>
  <block id="7a79f435dcaa0ca2322cde1d80c13868" category="section-title">第4步：部署Trident操作员</block>
  <block id="579b44412770c0d6b65bc3fd9bf7c61c" category="section-title">第5步：更新中的映像注册表位置<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block></block>
  <block id="d0ebde94f92d8c1bae0c6660a5847bba" category="paragraph">Your <block ref="57de9a35aeedde82408b1e047030d221" category="inline-link-macro-rx"></block> 可以位于一个注册表或不同的注册表中、但所有CSI映像都必须位于同一注册表中。更新<block ref="7b4b81fb05ca7f2a09fe73526ac95482" prefix=" " category="inline-code"></block> 根据注册表配置添加其他位置规格。</block>
  <block id="5295ac8fb520b71deb8a1b57857b2562" category="section-title">第6步：创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 并安装Trident</block>
  <block id="43e6c0a141c1737a96917c56c7e22a73" category="inline-link-macro">安装&lt;block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category='inline-code'/&gt;</block>
  <block id="1a2de31d648d8c09e5c2a9257a5ad67b" category="paragraph">如果您的现有部署必须升级、或者您希望对部署进行高度自定义、则应考虑 <block ref="e214bf159dbaf6573cfe15f1373b92db" category="inline-link-macro-rx"></block>。这是部署 Astra Trident 的传统方法。</block>
  <block id="19466ff921af5aa01da62b42cdaaf617" category="list-text">修复了在规范中指定的情况下使用IPv6 localhost进行安装的Trident操作员。</block>
  <block id="5b313836498a7a26e99e4f084ee1baec" category="inline-link-macro">问题描述 #799</block>
  <block id="b2fc842cefdc715af09b8d184e09db56" category="list-text">修复了Trident操作员集群角色权限与捆绑包权限同步的问题 <block ref="25d51e363866fb30c759c73e05114b0d" category="inline-link-macro-rx"></block>。</block>
  <block id="97848233b9fe6ae43be1728a4e603020" category="list-text">添加了一个修复程序、允许外部进程运行到完成状态。</block>
  <block id="3a35c66b59df0fa02e2490983b964261" category="list-text">采用rwx模式在多个节点上附加原始块卷的固定问题描述。</block>
  <block id="21b2b5bca26be7b23af4468b85c68b34" category="list-text">修复了SMB卷的FlexGroup 克隆支持和卷导入。</block>
  <block id="190a9f9a8311c8a23bff1fd7a5693342" category="section-title">2001年23月的变更</block>
  <block id="1cb76b1c7887cad1e077a4cbdc765b9b" category="list-text">验证Astra Trident版本：</block>
  <block id="705dbdc50888270bf4b0230d75c7ae1d" category="paragraph">使用Trident操作员可以使用中的属性自定义Astra Trident安装<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 规格如果您要对安装进行自定义、使其超出预期范围<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 参数允许、请考虑使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 生成自定义YAML清单以根据需要进行修改。</block>
  <block id="a5199cf0d9f113491f9efa18f3bee2e1" category="section-title">了解控制器Pod和节点Pod</block>
  <block id="f412c056318f78edc1cce01ed98e751b" category="paragraph">Astra Trident作为一个控制器POD运行、并在集群中的每个工作节点上运行一个节点POD。节点POD必须在任何可能要挂载Astra Trident卷的主机上运行。</block>
  <block id="30735a308956ec6de6caa328d0d5b43b" category="inline-link-macro">节点选择器</block>
  <block id="1db653cf6745dd1e6aa8d6e843ea5e96" category="inline-link-macro">容忍和损害</block>
  <block id="0897b2b75e3d0217c2f6994605a2cae7" category="paragraph">Kubernetes <block ref="219288b06ade6fd51c16efe605941441" category="inline-link-macro-rx"></block> 和 <block ref="9466cd429d8630101055a8fd14904bd9" category="inline-link-macro-rx"></block> 用于限制Pod在特定节点或首选节点上运行。使用`ControllerPlugin`和<block ref="96687552cc4dff10038a1b07a8bf3bd3" prefix=" " category="inline-code"></block>、您可以指定约束和覆盖。</block>
  <block id="e3826c3aea0bf8502f2ba8ff27eeef19" category="list-text">控制器插件负责卷配置和管理、例如快照和调整大小。</block>
  <block id="361d997e700d422835e56b644784bb7e" category="list-text">节点插件负责将存储连接到节点。</block>
  <block id="1736b3823517cc62395e05494b09ddb9" category="admonition"><block ref="b2c66bca748ffde67c7b6817cb8dd795" prefix="" category="inline-code"></block> 在中指定<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 表示安装了Astra Trident的命名空间。此参数 * 安装 Astra Trident 后无法更新 * 。如果尝试执行此操作、则会导致<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 要更改为的状态<block ref="d7c8c85bf79bbe1b7188497c32c3b0ca" prefix=" " category="inline-code"></block>。Astra Trident不能跨命名空间迁移。</block>
  <block id="a739aa7f082abebdf65f4b114dd3ad7d" category="paragraph">此表详细介绍了相关信息<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 属性。</block>
  <block id="b520e4144a27e0f45e8e22d5ccd8328d" category="cell">Pod的其他节点选择器。格式与 pod.spec.nodeSelector 相同。</block>
  <block id="e138e2a410035dad85499a3dabe692d5" category="cell">覆盖Kubernetes对Pod的容错。格式与 po.spec.Tolerations 相同。</block>
  <block id="d4cc4428c9a6422247c8ff288ea4b5eb" category="cell">Pod的其他节点选择器。格式与 pod.spec.nodeSelector 相同。</block>
  <block id="c350769115c3c8e4132e9c428b166b12" category="doc">Astra Trident架构</block>
  <block id="d90582d42d65d5af05c3d40ad0eb4987" category="admonition">如果您是首次使用Azure NetApp Files 或在新位置使用、则需要进行一些初始配置来设置Azure NetApp Files 并创建NFS卷。请参见<block ref="b6e93c3bfc36cf835c63e42e55586d97" category="inline-link-rx"></block>。</block>
  <block id="84444089b52eed627a838de74ae8d652" category="section-title">NFS和SMB卷的前提条件</block>
  <block id="99c7065ab76131a7b7763287bb5b6735" category="inline-link-macro">Microsoft：为Azure NetApp Files 创建容量池</block>
  <block id="ee59ecaa79882c8dc8f7f897c113094a" category="list-text">一个容量池。请参见 <block ref="96caced282b604468ab13f86483cd9f6" category="inline-link-macro-rx"></block>。</block>
  <block id="7ed0731ff411d37210b51a78b95c1fc3" category="inline-link-macro">Microsoft：将子网委派给Azure NetApp Files</block>
  <block id="c896cfae248dc2b000cc04c39d8a8de6" category="list-text">委派给Azure NetApp Files 的子网。请参见 <block ref="795b5e8f62d2267a0996a3b260968048" category="inline-link-macro-rx"></block>。</block>
  <block id="856955b6cbc3fe2168b2dcd43fb0a5dd" category="list-text">所有者或贡献者角色 <block ref="76b3209c91e1786a477c35a6e91cf55f" category="inline-link-macro-rx"></block>。</block>
  <block id="227e516e7258b6dcab3e7bcb4148f7f1" category="paragraph">要创建SMB卷、您必须具有：</block>
  <block id="d8c74c31c4550aed073521ba0fb8984a" category="inline-link-macro">Microsoft：创建和管理Azure NetApp Files 的Active Directory连接</block>
  <block id="6bb7e9dc5268dcbdde1a91b151d9a94b" category="list-text">已配置Active Directory并连接到Azure NetApp Files。请参见 <block ref="2f3bcda54aaf4e8e45316bb04708293f" category="inline-link-macro-rx"></block>。</block>
  <block id="3742b45a8312c4721cad63322a4932ac" category="list-text">至少一个包含Active Directory凭据的Astra Trident密钥、以便Azure NetApp Files 可以向Active Directory进行身份验证。以生成密钥<block ref="e47a193687dde960f6b6f80d394142a3" prefix=" " category="inline-code"></block>：</block>
  <block id="d924b4945b9cee37e07a2c601d1081be" category="paragraph">此表和<block ref="ba05023d0f1b5d4b64b6cad4cf9a7ecd" prefix=" " category="inline-code"></block> 文件(属于Helm图表的一部分)提供了键列表及其默认值。</block>
  <block id="e0e228e32d97e1461cf4492bd5366550" category="cell"><block ref="6370f866cf64618c026027da41bd248e" prefix="" category="inline-code"></block></block>
  <block id="f54139bbd014c510ee9fa277241d4666" category="cell">用于POD分配的节点标签</block>
  <block id="b7f663c63859fec6f7d2f1ecd891de73" category="cell"><block ref="6e0bd2b3fba01f3f74634cfc6fcc31d6" prefix="" category="inline-code"></block></block>
  <block id="6b164b6efa957c912428e089b86ecd45" category="cell">POD标注</block>
  <block id="4e3c35024b2d124aa9ab33a254e2545c" category="cell"><block ref="7c73e8c8cba054b3164d0b641ef36a41" prefix="" category="inline-code"></block></block>
  <block id="1a6308fa062d92acbff3b1304615d1db" category="cell">部署标注</block>
  <block id="716c09bbd59aa99d3932f73b7f517b2c" category="cell"><block ref="d6c26478ca41a23cc9741a4e92576269" prefix="" category="inline-code"></block></block>
  <block id="1147c70db6b1e5ac87df9b1ef26ea59a" category="cell">POD分配的差值</block>
  <block id="ed550d998ef1de0c69744fb5f7f7173c" category="cell"><block ref="1474047fb00b2d8d95646f7436837ed0" prefix="" category="inline-code"></block></block>
  <block id="064fd06fa9edd7a1e29b4da6fd9a1688" category="cell">用于Pod分配的相关性</block>
  <block id="b81e781314c37667d0eae6eeba5f0468" category="cell"><block ref="d525dcbea000b0429493d47a891b5ad9" prefix="" category="inline-code"></block></block>
  <block id="85e06bb6e03e71b7708d9d4b6f4967ea" category="cell">Pod的其他节点选择器。请参见 <block ref="662636849823c896b8f86e3f7d6afa9b" category="inline-xref-macro-rx"></block> 了解详细信息。</block>
  <block id="0ccd4d74122ec81d149bc2bb132524d6" category="cell"><block ref="e8c1183eadfdb38078a7bd66bfa038ac" prefix="" category="inline-code"></block></block>
  <block id="74f3be1a07b1f65cef69ac77defaff4b" category="cell">覆盖Kubernetes对Pod的容错。请参见 <block ref="662636849823c896b8f86e3f7d6afa9b" category="inline-xref-macro-rx"></block> 了解详细信息。</block>
  <block id="c5387f0fc94f27d79519bb1299916e0f" category="cell"><block ref="bc0951b6e57a04c942fe6054649bb323" prefix="" category="inline-code"></block></block>
  <block id="7923027736f9cc9bbc6f6914e020e8a2" category="cell"><block ref="85dec10eb608a93a9febb24b39f5dae5" prefix="" category="inline-code"></block></block>
  <block id="a5dbdd22874a005ac9265ab4869f4b42" category="cell">标识的注册表<block ref="c39d2745402b5d2987cfdd8df3bda0e1" prefix=" " category="inline-code"></block>，<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block>和其他图像。留空以接受默认值。</block>
  <block id="7211a1f37ce0f92a2727e11de77a5256" category="cell">设置的映像提取策略<block ref="c39d2745402b5d2987cfdd8df3bda0e1" prefix=" " category="inline-code"></block>。</block>
  <block id="f19aec010e48d5133114e8de96e071cd" category="cell">设置的映像提取密钥<block ref="c39d2745402b5d2987cfdd8df3bda0e1" prefix=" " category="inline-code"></block>，<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block>和其他图像。</block>
  <block id="b8ef31ad215c14ea7ac3aa4744f3b42f" category="cell">允许覆盖kubelet内部状态的主机位置。</block>
  <block id="9f61c56640ad918301f4486f261872db" category="cell">"/var/lib/kubelet"`</block>
  <block id="5e2907912eaee9094910d428b8f01073" category="cell"><block ref="2d9583aa0b2422324be870c86f92540f" prefix="" category="inline-code"></block></block>
  <block id="a580f5edb0407fe7fc07e03adb88d2be" category="cell">允许将Trident操作符的日志级别设置为：<block ref="04a75036e9d520bb983c5ed03b8d0182" prefix=" " category="inline-code"></block>，<block ref="ad42f6697b035b7580e4fef93be20b4d" prefix=" " category="inline-code"></block>，<block ref="caf9b6b99962bf5c2264824231d7a40c" prefix=" " category="inline-code"></block>，<block ref="1ea4c3ab05ee0c6d4de30740443769cb" prefix=" " category="inline-code"></block>，<block ref="cb5e100e5a9a3e7f6d1fd97512215282" prefix=" " category="inline-code"></block>或<block ref="df6402fd9ecc60f5a2159fdf45711cd4" prefix=" " category="inline-code"></block>。</block>
  <block id="17b455f4f77262089207347508d91156" category="cell"><block ref="94b4515f09a2cc099780cd762366bc78" prefix="" category="inline-code"></block></block>
  <block id="0b401c459e3ff134b1e0ef7924967db5" category="cell"><block ref="844aa3cc935c46477e308955f84504e9" prefix="" category="inline-code"></block></block>
  <block id="0d1fd401e197635acbe814b44cbbe0f0" category="cell">允许将Trident操作符的日志级别设置为DEBUG。</block>
  <block id="e6e859881d25cceaf35be98ff2b495e5" category="cell"><block ref="225eb420f27fc1614025e3e94f1dbcd4" prefix="" category="inline-code"></block></block>
  <block id="3e23960e7162cfc391ab62ee009d09b5" category="cell">允许完全覆盖的映像<block ref="c39d2745402b5d2987cfdd8df3bda0e1" prefix=" " category="inline-code"></block>。</block>
  <block id="586d412183efcbc76c2b206c73911009" category="cell"><block ref="5a50bd404d515b199254e69f83732c55" prefix="" category="inline-code"></block></block>
  <block id="87a9d5d1548b0e39b7cfe5115c686d2d" category="cell">允许覆盖的标记<block ref="c39d2745402b5d2987cfdd8df3bda0e1" prefix=" " category="inline-code"></block> 图像。</block>
  <block id="ba6229139ac12ca183160040964cdaae" category="cell"><block ref="c185b55e62d1fe703eb97b2a31b6c2a3" prefix="" category="inline-code"></block></block>
  <block id="fbb572d608f0afb5d8449144a2f9e8f3" category="cell">允许在IPv6集群中使用Astra Trident。</block>
  <block id="aacf685d031cae06a5c158144296d071" category="cell"><block ref="b958a6de9ca123713491252f2ab02f59" prefix="" category="inline-code"></block></block>
  <block id="f8d2c273db74b394820e68a59b18bfff" category="cell">覆盖大多数Kubernetes API操作的默认30秒超时(如果不为零、则以秒为单位)。</block>
  <block id="2911e600bbad981e24b3e2a2b3a03f82" category="cell"><block ref="cfcd208495d565ef66e7dff9f98764da" prefix="" category="inline-code"></block></block>
  <block id="fbf0a4141bdac5821d271a6c1de1f483" category="cell"><block ref="70b0324e2a65a29bea1b014606caba39" prefix="" category="inline-code"></block></block>
  <block id="d74c6fe1792f46d6c929a448fd8b99cd" category="cell">使用覆盖HTTP请求的默认90秒超时<block ref="bb61fa2850d04f4e5e34449de13febe4" prefix=" " category="inline-code"></block> 为超时的无限持续时间。不允许使用负值。</block>
  <block id="ab7c61393023df91a4271d09e26bda15" category="cell"><block ref="558c8a41e3e5c9a0f109be6e60efce8d" prefix="" category="inline-code"></block></block>
  <block id="b2ffdfaa5c81870c0fb113956a7244aa" category="cell"><block ref="141d9fad9dd7e4fec852d6e55f414373" prefix="" category="inline-code"></block></block>
  <block id="595576072ae91fd3ed07cffb0f6bf8dc" category="cell">允许禁用Astra Trident定期AutoSupport 报告。</block>
  <block id="22ca6470a16bcd1b3a0fd7b7dc456b4c" category="cell"><block ref="9626ee86c83efe1de7c3f5e2669b4a04" prefix="" category="inline-code"></block></block>
  <block id="afed3cb70fa67ef62195179f6c724664" category="cell">允许覆盖Astra Trident AutoSupport 容器的映像标记。</block>
  <block id="dfdc01cf8fa557986d9b3e8702b6ff1b" category="cell"><block ref="3d689bd3819ead35ed794427bd12f459" prefix="" category="inline-code"></block></block>
  <block id="8639f9efa7d4198eba06690d4a1f0d16" category="cell"><block ref="c370bb44f26914bb0c965f35a89a42f7" prefix="" category="inline-code"></block></block>
  <block id="b830fe1139fea1840be49f78927d6364" category="cell">允许Astra Trident AutoSupport 容器通过HTTP代理进行回拨。</block>
  <block id="b081a6c6ed5931a2b55e31e706aae502" category="cell"><block ref="5836094432fed0c547c18869122bbf9a" prefix="" category="inline-code"></block></block>
  <block id="6ea2564bcf36b1d8878738d14312d34e" category="cell">设置Astra Trident日志记录格式 <block ref="1cb251ec0d568de6a929b520c4aed8d1" prefix="(" category="inline-code"></block> 或<block ref="466deec76ecdf5fca6d38571f6324d54" prefix=" " category="inline-code"></block>）。</block>
  <block id="db8e1facb8efde48ce50388e2dc9cfcc" category="cell"><block ref="20cd815523e5806aec29a57282b0d49f" prefix="" category="inline-code"></block></block>
  <block id="4d165b964c1ea4708882da42c3ef5194" category="cell"><block ref="0be533d5261bfa202a27dd6f4a2ff4da" prefix="" category="inline-code"></block></block>
  <block id="67471026c71afd28bcd767ef1006c39a" category="cell">禁用Astra Trident审核日志程序。</block>
  <block id="c7bc9c0edf4b3f771388feb15b8ad592" category="cell"><block ref="cd4906de65bd0389fcc62105f05b77d6" prefix="" category="inline-code"></block></block>
  <block id="5f65c3e97612dfc2a1875871e1d5298d" category="cell">允许将Astra Trident的日志级别设置为：<block ref="04a75036e9d520bb983c5ed03b8d0182" prefix=" " category="inline-code"></block>，<block ref="ad42f6697b035b7580e4fef93be20b4d" prefix=" " category="inline-code"></block>，<block ref="caf9b6b99962bf5c2264824231d7a40c" prefix=" " category="inline-code"></block>，<block ref="1ea4c3ab05ee0c6d4de30740443769cb" prefix=" " category="inline-code"></block>，<block ref="cb5e100e5a9a3e7f6d1fd97512215282" prefix=" " category="inline-code"></block>或<block ref="df6402fd9ecc60f5a2159fdf45711cd4" prefix=" " category="inline-code"></block>。</block>
  <block id="c97f5436c3ba56768a7996ac0a152830" category="cell"><block ref="efc1e9e3a120c20b12e892ce2f230ff8" prefix="" category="inline-code"></block></block>
  <block id="40caa5c31158e12517414bf1429ad350" category="cell">允许将Astra Trident的日志级别设置为<block ref="ad42f6697b035b7580e4fef93be20b4d" prefix=" " category="inline-code"></block>。</block>
  <block id="3e52a0855ea502bd31c48eb02424ee67" category="cell"><block ref="aaeab2a659f3d6ac5063b6d8a4e7c24a" prefix="" category="inline-code"></block></block>
  <block id="5934b7dd9f1b8b0cd103a9f658e321a2" category="cell">允许为跟踪日志记录或日志禁止启用特定的Astra Trident工作流。</block>
  <block id="66468bda18a84578afccd8255efa1845" category="cell"><block ref="d5c1386f335f8df3cd920142f8ee23b7" prefix="" category="inline-code"></block></block>
  <block id="b09ba1c3bffb182e31b3e02e89809aff" category="cell">允许为跟踪日志记录或日志禁止启用特定的Astra Trident层。</block>
  <block id="1aaea3b64b47a673c851da63225fddfb" category="cell">允许完全覆盖Astra Trident的映像。</block>
  <block id="a74941f6c96a1995cbfb438419467c32" category="cell"><block ref="fdd0820bbfc488d6a2ccba8ba0f74e73" prefix="" category="inline-code"></block></block>
  <block id="63742b48f6bddb4de8ebee8c4337f07e" category="cell">允许覆盖Astra Trident的映像标记。</block>
  <block id="50c1c44df91bb9f35aaa04b0157d6136" category="cell"><block ref="60c65b849dbb837618645b7860aa608e" prefix="" category="inline-code"></block></block>
  <block id="74b30241e61b88d42e066d77a638a568" category="cell">允许覆盖用于Kubernetes活动/就绪性探测的默认端口。</block>
  <block id="e07d4a2a2e6f176011493e3326962c52" category="cell">允许在Windows工作节点上安装Astra Trident。</block>
  <block id="b4f36de9fda080c1fd1d9edb1e60e36b" category="cell"><block ref="badc795d88a7db6cc65d56bc758b3ea4" prefix="" category="inline-code"></block></block>
  <block id="0a08ed3de9d17e8644d3e57dc374c3ea" category="cell">允许启用强制分离功能。</block>
  <block id="632a46acdaa26f30f25b11d5c83eaa58" category="cell"><block ref="94ef2a130a825358ab3002442d6e5145" prefix="" category="inline-code"></block></block>
  <block id="ad77b466842808c8dce5116073a3e52b" category="cell">从创建过程中排除操作员POD安全策略。</block>
  <block id="31aae55e68bb5034f8f948ec526b9ff3" category="paragraph">您可以更新现有后端以使用其他身份验证方法或轮换其凭据。这两种方式都适用：使用用户名 / 密码的后端可以更新为使用证书；使用证书的后端可以更新为基于用户名 / 密码的后端。为此、您必须删除现有身份验证方法并添加新的身份验证方法。然后、使用更新后的backend.json文件、该文件包含要执行的所需参数<block ref="defd1e55f93269ac9278afc086951ba8" prefix=" " category="inline-code"></block>。</block>
  <block id="488e366967d09f9808e7b3de7df261ac" category="paragraph">有关此驱动程序及其配置方法的详细信息，请参见 <block ref="7f5bc9035106c3c834aeb8867a5fce2c" category="inline-link-macro-rx"></block>。</block>
  <block id="bd4b2f0d545a83fd434f5ba1f17dd087" category="paragraph">下面是一个后端定义示例：</block>
  <block id="9463f87bbed1fcdacfb8d40e185ca2bc" category="open-title">YAML</block>
  <block id="0ecd11c1d7a287401d148a23bbd7a2f8" category="open-title">JSON</block>
  <block id="4bf283d1d1c781fbb7e90b237dc80ac4" category="paragraph">以创建<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> 如果绑定到现有后端、则需要获取后端配置。在此示例中，假设已使用以下 JSON 定义创建了后端：</block>
  <block id="2043559d67ba802541907de326b5ecdd" category="paragraph">下面是一个定义了默认值的示例：</block>
  <block id="2fc042d3545f5ad7df1999c9e5486176" category="paragraph"><block ref="c4ca4238a0b923820dcc509a6f75849b" prefix="" category="inline-code"></block></block>
  <block id="7ff5348ddee6132fe7c166b8b7917cc0" category="paragraph">卷名称的可选前缀。默认值：<block ref="689ee6510c7f9ef9df1c263a08823d96" prefix=" " category="inline-code"></block>。</block>
  <block id="81998bdb6c3f52ba69dbecf0ec513180" category="paragraph"><block ref="46fa46eed970046d03e2dedc95cdc83b" prefix="" category="inline-code"></block></block>
  <block id="5d8040f7ca409e3993359a877f675e59" category="paragraph"><block ref="75da9d6de91e782eca4fa00341367135" prefix="" category="inline-code"></block></block>
  <block id="9548d4d33e26f6bbe564b4eb47a52e4b" category="paragraph">新卷的可选默认大小。默认值：<block ref="7d0f45b4b1cf6603762c74ca39c833dd" prefix=" " category="inline-code"></block></block>
  <block id="dfda6aac7ee732ec79153da76a0e963a" category="paragraph"><block ref="08aa1584c9a5791fb64b0f7f1453f9eb" prefix="" category="inline-code"></block></block>
  <block id="b6d628512c1127da9adb6c459c9f7c95" category="paragraph"><block ref="190dafab69706a67221c1226360de7dc" prefix="" category="inline-code"></block></block>
  <block id="251296d0166ace97771b155156985b38" category="paragraph"><block ref="98a2cd7efa1ba950d42e42af495c4248" prefix="" category="inline-code"></block></block>
  <block id="9fcbfb18564773bb1604cf400912944c" category="paragraph"><block ref="b26399fddd6473c150b4e7528fb04fdc" prefix="" category="inline-code"></block></block>
  <block id="8131d179a4284fbb0ed410bbbbcf1eb6" category="paragraph"><block ref="6173aa5206484b5224450952747c7148" prefix="" category="inline-code"></block></block>
  <block id="c4dc9cb5606cc8c0597a5c8f1f77b005" category="paragraph"><block ref="5ebe2294ecd0e0f08eab7690d2a6ee69" prefix="" category="inline-code"></block></block>
  <block id="fc3424ba1777889d0d49ea7f5a675c9e" category="paragraph"><block ref="70d2c7701d2837552c0a38c02a326592" prefix="" category="inline-code"></block></block>
  <block id="e84b7103384d0a3393c0847330716669" category="paragraph"><block ref="f819de81247be4a5428dc0e169de28b8" prefix="" category="inline-code"></block></block>
  <block id="7dd39afeb1c0b05aac5f4bf6fbd94990" category="paragraph"><block ref="301c869c551e12d862ab0291837102a0" prefix="" category="inline-code"></block></block>
  <block id="98ce75f2128e52057c9dbf00a9eb2736" category="paragraph"><block ref="f07e606cfe25ac6fb07d9c4af941d9a2" prefix="" category="inline-code"></block></block>
  <block id="1ae6e291c93a6d5962af8004aecd9c4c" category="paragraph"><block ref="94f6d7e04a4d452035300f18b984988c" prefix="" category="inline-code"></block></block>
  <block id="af2bffb136dd0c22342ad9cb06187197" category="paragraph">空间预留模式；<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block> (精简配置)或<block ref="210ab9e731c9c36c2c38db15c28a8d1c" prefix=" " category="inline-code"></block> (厚)</block>
  <block id="7f0d015762fc8e2b44f0ad1cd5429af5" category="paragraph">要使用的Snapshot策略、默认为<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block></block>
  <block id="0b89124cc899d4e75924c83a9eaf86ce" category="paragraph">Snapshot预留百分比、默认值为""以接受ONTAP 默认值</block>
  <block id="11663b17d5bcea48dbfb36b13965663b" category="paragraph"><block ref="d3d9446802a44259755d38e6d163e820" prefix="" category="inline-code"></block></block>
  <block id="871c12a80dbc519da4b71b3ea166cdc4" category="paragraph">创建克隆时将其从父级拆分、默认为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block></block>
  <block id="290cc6c07ae2ba0a638720a38f1356ed" category="paragraph">对于已配置的NFS卷、NAS选项默认为<block ref="f1c1592588411002af340cbaedd6fc33" prefix=" " category="inline-code"></block></block>
  <block id="8dfb6d491cffb51a17396f993c195d8b" category="paragraph"><block ref="f1c1592588411002af340cbaedd6fc33" prefix="" category="inline-code"></block></block>
  <block id="b7655e29a015ee3721339f8462d5d2b6" category="paragraph">用于访问的NAS选项<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block> 目录、默认为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block></block>
  <block id="1667ea9b715250d5f295353e97cde10e" category="paragraph">要使用的NFS导出策略的NAS选项、默认为<block ref="c21f969b5f03d33d43e04f8f136e7682" prefix=" " category="inline-code"></block></block>
  <block id="980ef1c1aa7d1456ee087df02119341e" category="paragraph"><block ref="c21f969b5f03d33d43e04f8f136e7682" prefix="" category="inline-code"></block></block>
  <block id="19d28ffef37322622a55f9d7f1f9fa59" category="paragraph">SAN选项要选择文件系统类型、默认为<block ref="40d1d2ce03569076bd0dc1e0ff90aa4c" prefix=" " category="inline-code"></block></block>
  <block id="c90caaafbe0da0287b6a84f0894fa40b" category="paragraph"><block ref="310201b6353c5f38bc039e0e51b079d3" prefix="" category="inline-code"></block></block>
  <block id="6cd4bb7e4d59531066c198c531ea267a" category="paragraph">要使用的分层策略、默认为<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block>；<block ref="8805d416ce540c5f2df34af5b18d742b" prefix=" " category="inline-code"></block> 适用于ONTAP 9.5 SVM-DR之前的配置</block>
  <block id="c1fd85851a162222ab0690383666bd47" category="paragraph"><block ref="05b6053c41a2130afd6fc3b158bda4e6" prefix="" category="inline-code"></block></block>
  <block id="bf0a8b77dbb95465376fb2cfec90b422" category="paragraph"><block ref="76bb7251da6a3c88e629c03a402b9d15" prefix="" category="inline-code"></block></block>
  <block id="8e6b1878428055edaef42698026bd1b5" category="paragraph">默认情况下， Astra Trident 不会使用 Kubernetes 将挂载选项设置为任何值。要在 Kubernetes 存储类中指定挂载选项，请按照给定示例进行操作 <block ref="29e04d8356a523f6fc836193630ad63e" category="inline-link-macro-rx"></block>。</block>
  <block id="419c95e5a9e44d427f99debdcf0550c7" category="list-text">使用 Trident 时可能会遇到的一个常见问题<block ref="4568986ef6397d7c901269fc0e190ede" category="inline-link-rx"></block> 租户和客户端密码来自权限不足的应用程序注册。有关 Trident 要求的完整列表，请参见 <block ref="cd38c25b6345abc8733d2ef72739cd97" category="inline-link-macro-rx"></block> Configuration</block>
  <block id="1dedbfd605df8b562acc8f759a8e9acc" category="list-text">运行的Kubernetes集群 <block ref="229e1052bb9ecd8cf2680d6f44691174" category="inline-link-macro-rx"></block></block>
  <block id="17c5eeb01739643b5aef94fe18b6c849" category="paragraph">您可以使用版本选择器在最新版本和以前的四个版本之间导航、也可以使用以下链接。</block>
  <block id="4693b2393d80830cd4f198db20bf2b72" category="inline-link">Astra三排版23.01</block>
  <block id="cd494508ccf1cdc45163d6d9d0f401ff" category="list-text"><block ref="cd494508ccf1cdc45163d6d9d0f401ff" category="inline-link-rx"></block></block>
  <block id="2122a8acb599837078e6b76436e892c4" category="list-text">现在、在Trident中支持Kubnetes 1.27。在升级Kubernetes之前升级Trident。</block>
  <block id="40991bba76926bfbcf7fb0b9c207187f" category="list-text">Anthos On－Prem (VMware)和Anthos on Bare metal 1.12</block>
  <block id="362997bacf08e019288e372d8ae1f070" category="list-text">OpenShift容器平台(AMD64和ARM64)支持的RedHat CorEOS (RHCOS)版本</block>
  <block id="a3460163c4a2854c79a419dda57ac917" category="list-text">RHEL 8+(AMD64和ARM64)</block>
  <block id="f51a58a0cffb9f9953edce6411578b53" category="list-text">Ubuntu 22.04或更高版本(AMD64和ARM64)</block>
  <block id="1285a056fd837828136d15f7e76d09cc" category="list-text">Windows Server 2019 (AMD64)</block>
  <block id="b38420e98813aed20daa115db2ac94a9" category="cell">v1.27.0</block>
  <block id="1ff1fd258a61bd04eee000a1fb6131fa" category="example-title">示例1：启用A作用 于Windows节点的Asta三端到子</block>
  <block id="f53514cf8829a41463c245b088ae732e" category="paragraph">要在Windows节点上运行A作用 是：</block>
  <block id="a921baa9e8c81f13d59fed4fce57ec88" category="example-title">示例2：启用force detach</block>
  <block id="c5b5b00ff1b3a892c8694ab932cbf9ca" category="paragraph">有关强制断开的详细信息、请参见 <block ref="63cac71755fb6ef1f1fea34cf4037121" category="inline-link-macro-rx"></block>。</block>
  <block id="85be37285c336ae757f07d58eb0d7ea2" category="cell">用于发送 AutoSupport 遥测的代理的地址 / 端口</block>
  <block id="33fb79e5ddc4ef005332c52292e20c59" category="cell">运行 Trident 控制器 CSI 插件的 Pod 的其他节点选择器。遵循与相同的格式<block ref="6ae8be3433bfc36ced79a1271e6ebf11" prefix=" " category="inline-code"></block>。</block>
  <block id="4a1522be236156dbc873375541a627e1" category="cell">覆盖运行 Trident 控制器 CSI 插件的 Pod 的容错。遵循与相同的格式<block ref="f1fa64fcf5077601cb803e995a51fa4f" prefix=" " category="inline-code"></block>。</block>
  <block id="30042512b273723cf2eec336b6576d84" category="cell"><block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix="" category="inline-code"></block> 和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 仅限。可与Kubnetes非正常节点关闭(NGN)结合使用、使集群管理员能够在节点运行状况不正常时将已挂载卷的工作负载安全地迁移到新节点。*这是23.04中的一项实验功能。*请参阅 <block ref="620ff2552a2d798650bb027eb1271b17" category="inline-xref-macro-rx"></block> 了解重要详细信息。</block>
  <block id="38a0b9f59e6fe23e1617dc0e78498afe" category="section-title">有关强制断开的详细信息</block>
  <block id="20c0c9efee2da2645ec0eefaf3c75d8c" category="inline-link-macro">Kubnetes：节点非正常关闭</block>
  <block id="c2b73a5f3aeb6a0120f6d516eaedfceb" category="paragraph">可对使用强制断开<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 仅限。在启用强制断开之前、必须在Kubbernetes集群上启用非正常节点关闭(NGN)。有关详细信息，请参见 <block ref="1da18b4f36c698c06b8a402542c42858" category="inline-link-macro-rx"></block>。</block>
  <block id="388f611a7cb1d3b4a55895211f24e657" category="admonition">由于Astra三端存储依赖于Kubbernetes NGN、因此请勿删除<block ref="2ea3337d8d7fc43880e82df308aa0f16" prefix=" " category="inline-code"></block> 运行状况不正常的节点会导致出现问题、直到重新计划所有不可支持的工作负载为止。不负责任地应用或删除该问题可能会危及后端数据保护。</block>
  <block id="0490d92bd49cf4ca0e3d1454b8166318" category="paragraph">当Kubnetes集群管理员应用了时<block ref="7b58fe53e2e4b586e9605f1371e1ebf3" prefix=" " category="inline-code"></block> 此节点和存在污染<block ref="badc795d88a7db6cc65d56bc758b3ea4" prefix=" " category="inline-code"></block> 设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>，Asta Trident将确定节点状态，并：</block>
  <block id="5a46bcb638ad3abfd754aecfb450a781" category="list-text">停止挂载到该节点的卷的后端I/O访问。</block>
  <block id="9e359eb51c11b0162faa185a9f2e6132" category="list-text">将Astra三端节点对象标记为<block ref="32478ef751ab0a81974a3aa8569607b9" prefix=" " category="inline-code"></block> (对于新出版物不安全)。</block>
  <block id="dea3db0d9b1c1d5a2c070829016eb1d9" category="admonition">在节点重新通过资格认定(标记为后)之前、三端技术(Trident)控制器将拒绝新的发布卷请求<block ref="32478ef751ab0a81974a3aa8569607b9" prefix=" " category="inline-code"></block>)。只有在Asta三端存储能够验证使用已挂载PVC的任何工作负载(即使在集群节点运行状况良好且已准备就绪后)、此工作负载才会被接受<block ref="123402c04dcfb6625f688f771a5fc05d" prefix=" " category="inline-code"></block> (可安全发布新出版物)。</block>
  <block id="2f2c77c0463a5147779a2fe92fffee6d" category="paragraph">在恢复节点运行状况并删除此污染后、Asta Trident将：</block>
  <block id="8f57f52b7233aecf56728bcd48d3a51c" category="list-text">确定并清除节点上陈旧的已发布路径。</block>
  <block id="a36983f9842a4a5cf4db7f9d23253de0" category="list-text">如果节点位于中<block ref="4304fb35c4cdfa886970499304f2aaba" prefix=" " category="inline-code"></block> 状态(已删除服务中断的部分、并且节点处于状态<block ref="e7d31fc0602fb2ede144d18cdffd816b" prefix=" " category="inline-code"></block> 状态)、并且所有过时的已发布路径都是干净的、Asta三端技术将将节点重新提交为<block ref="123402c04dcfb6625f688f771a5fc05d" prefix=" " category="inline-code"></block> 并允许向节点发布新的已发布卷。</block>
  <block id="beee3e754bb36e7321f32ad13d4ac60a" category="paragraph">所有Kubernetes工作节点都必须安装适当的iSCSI工具。请参见 <block ref="9e8cf70fcb465bf1907b585f74e9e1a6" category="inline-link-macro-rx"></block> 了解详细信息。</block>
  <block id="37225474f75e9da42c0f924ba87b113a" category="cell"><block ref="8321592ce24c8a122ecf26a63cfca407" prefix="" category="inline-code"></block>，<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>，<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>，<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block></block>
  <block id="56d1e7863190cbf5e7689e2821d0959e" category="cell"><block ref="47cb44be55a0dffa15dfc900a4c687be" prefix="" category="inline-code"></block></block>
  <block id="3bc2d9079510db6d0570883494bc5984" category="cell"><block ref="f899139df5e1059396431415e770c6dd" prefix="" category="inline-code"></block></block>
  <block id="06daeb0fdb584c4694891d290310e1ed" category="cell"><block ref="3644a684f98ea8fe223c713b77189a77" prefix="" category="inline-code"></block></block>
  <block id="996a57df5a7c8752e8bc23b6af020be4" category="cell">条件<block ref="0a236e7685e50a59df980d0a30929d6c" prefix=" " category="inline-code"></block> 为<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block>，<block ref="2954e92a9b4d0e998fe4893f8141649a" prefix=" " category="inline-code"></block> "</block>
  <block id="58c09f2c9581bc7c58c32116266b6d8f" category="cell">要使用的层策略<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block></block>
  <block id="49ed5b3ecd0e966bec6b74083f06599e" category="cell"><block ref="8805d416ce540c5f2df34af5b18d742b" prefix="" category="inline-code"></block> 适用于ONTAP 9.5 SVM-DR之前的配置</block>
  <block id="6792aad2d8c086a9d25f5ad8ec090f35" category="paragraph">在创建Element后端之前、您需要满足以下要求。</block>
  <block id="690b3c7311638da5eef87f5e07aa1258" category="section-title">管理卷</block>
  <block id="24da0fbaaa9930515c555e7019db09d2" category="paragraph">请参见以下内容、了解如何使用Asta Trident管理卷。</block>
  <block id="00a9bbaf4185978435bd4d6cb7aba6c4" category="summary">通过将Asta三端存储与Amazon FSx for NetApp ONTAP 结合使用、您可以确保在Amazon Elastic Kubelnetes Service (EKS)中运行的Kubelnetes集群可以配置ONTAP 支持的块和文件永久性卷。</block>
  <block id="5178ad00e596ece0be9aceff179b4303" category="paragraph">Asta Trident提供了一组Prometheus指标端点、可用于监控Asta Trident的性能。</block>
  <block id="51e6d748c5af856ade589011dc2c7e85" category="cell"><block ref="37a6259cc0c1dae299a7866489dff0bd" prefix="" category="inline-code"></block></block>
  <block id="ddbd2735bfb88c5da807f77f6fe5f6c8" category="doc">ONTAP NAS驱动程序概述</block>
  <block id="1faffcbb00c529812b5526b1b22b2b56" category="paragraph">要创建、您必须在SVM上同时配置NFS和SMB/CCIFS协议<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> 适用于内部ONTAP 的SMB卷。如果未能配置其中任一协议、则发生原因 SMB卷创建将失败。</block>
  <block id="5cc1e28c0d7b6c40ca94aacb554b31ca" category="doc">ONTAP SAN驱动程序概述</block>
  <block id="904628b57a33f3a2f6d71a6d991e15c6" category="paragraph">Astra Trident 可以通过使用有选择地创建卷并将其附加到 Kubernetes 集群中的节点<block ref="80b9a4f4a1bc9851317207ee3477041a" category="inline-link-rx"></block>。</block>
  <block id="3eba7c2a6bd35cbac350dcbfb90408f6" category="paragraph">使用 CSI 拓扑功能，可以根据区域和可用性区域将对卷的访问限制为一小部分节点。如今，借助云提供商， Kubernetes 管理员可以生成基于分区的节点。节点可以位于一个区域内的不同可用性区域中，也可以位于不同区域之间。为了便于在多区域架构中为工作负载配置卷， Astra Trident 使用了 CSI 拓扑。</block>
  <block id="4ba6a75e6aacbc3737630ba55916cd27" category="section-title">用于管理后端的选项</block>
  <block id="798f4548a52b3c91b25609a82ff6a12e" category="paragraph">随附<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>现在、管理员可以通过两种独特的方式管理后端。这会提出以下问题：</block>
  <block id="8e523fab738ccb6504fc60551cbaefdf" category="paragraph">Asta三元数据可按节点创建和管理<block ref="58f3779afe9da9ffdc085dc3064306f7" prefix=" " category="inline-code"></block> 作为<block ref="e77a1bd34ff5793aca292b38d23bc2c9" prefix=" " category="inline-code"></block>。</block>
  <block id="0ee19d4be17e297cfb39c398cb268b5e" category="paragraph">此值不能更改或省略。</block>
  <block id="07d41595da50d0c332f22902db2f76d8" category="paragraph">*仅适用于<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 驱动程序*。</block>
  <block id="684a16b15a51568bcdd546607176bd57" category="paragraph"><block ref="e77a1bd34ff5793aca292b38d23bc2c9" prefix="" category="inline-code"></block></block>
  <block id="ab946346d7b6ebd4a84d96bb78dcd833" category="section-title">用于导入LUKS卷的后端配置</block>
  <block id="6159e851594f646ce383a87fc615fbd1" category="paragraph">要导入LUKS卷、必须设置<block ref="0f179ba2bc32ab5d8f60692f5b800c86" prefix=" " category="inline-code"></block> to<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block> 在后端。。<block ref="0f179ba2bc32ab5d8f60692f5b800c86" prefix=" " category="inline-code"></block> Option可告知A作用 中的三端磁盘是否符合LUKS <block ref="b326b5062b2f0e69046810717534cb09" prefix="(" category="inline-code"></block>)或不符合LUKS <block ref="68934a3e9455fa72420237eb05902327" prefix="(" category="inline-code"></block>)、如以下示例所示。</block>
  <block id="490414e0366b091220802d406e52c076" category="doc">新增功能</block>
  <block id="3317f97754f7308b6a0e2a12c0241d39" category="admonition">只有启用了非正常节点关闭功能门的Kubernetes版本才支持对ONP-SANON-*卷强制执行卷断开。必须在安装时使用启用强制断开<block ref="d75e90115a6343745df96039920422fc" prefix=" " category="inline-code"></block> 三元安装程序标志。</block>
  <block id="8743cc1328bba53ea356fd3e593a3f9c" category="list-text">修复了要与捆绑包权限(<block ref="25d51e363866fb30c759c73e05114b0d" category="inline-link-macro-rx"></block>）。</block>
  <block id="c16e7ed05955f3a772cc5e37988626a6" category="inline-link-macro">问题描述 #811</block>
  <block id="c8b742414af3be73bd16e0c1ed978ae5" category="list-text">修复了在问题描述 中、三端存储控制器无法立即关闭的问题(<block ref="6916c682464f601a812aa726b7255568" category="inline-link-macro-rx"></block>）。</block>
  <block id="e82b00f6dda8d75f6267522d6e8e21b3" category="list-text">添加了一个修复程序，用于列出与使用ONTAP SAN-*驱动程序配置的指定LUN关联的所有igrop名称。</block>
  <block id="3f32e3199847516d3773942171a3320e" category="inline-link-macro">问题描述 #537</block>
  <block id="8ac5248178b612abfaaec81ca7b06c94" category="list-text">修复了s390架构的编译错误(<block ref="a2e3737cce03fa6e94f8357a427b1da2" category="inline-link-macro-rx"></block>）。</block>
  <block id="70d039054d2873e8b0f28587cb19086a" category="inline-link-macro">问题描述 #781.</block>
  <block id="48b91d8b8b87d6d8c95cbc34bbae12e7" category="list-text">修复了卷挂载操作期间日志记录级别不正确的问题(<block ref="8bb65f034421623db4038f879681c20b" category="inline-link-macro-rx"></block>）。</block>
  <block id="6c85ef6d99d7dc6999989d8228ad56d9" category="inline-link-macro">问题描述 #802.</block>
  <block id="6edadfcf2d991f369cdf934677bb161a" category="list-text">修复了潜在类型断言错误(<block ref="e6bc1d779eb6c87e7246c3841e50b482" category="inline-link-macro-rx"></block>）。</block>
  <block id="afcf8fa41398f15ad38c5874372e9b4c" category="list-text">增加了对Kubnetes 1.27的支持。</block>
  <block id="67db0e94c8905c93eda71f86cb532e07" category="list-text">增加了对导入LUKS卷的支持。</block>
  <block id="6de845032edacfacdf7599428fce6ce3" category="list-text">增加了对ReadWriteOncePod PVC访问模式的支持。</block>
  <block id="9297bb6ec4e523b7875643c53cc9f528" category="list-text">增加了对在非正常节点关闭情况下对ONTAP－SAN－*卷强制断开的支持。</block>
  <block id="bf75c88234d165d6aa37891adda4465a" category="inline-link-macro">问题描述 #758</block>
  <block id="8ba74f6fd31160a630f1dc4eeb7d2e20" category="list-text">现在、所有ONTAP SAN-*卷都将使用每个节点的igroup。只有在将LUN主动发布到这些节点时、这些LUN才会映射到igroup、以改善我们的安全防护。当Trigent确定可以安全地切换到新的igrop方案而不会影响活动工作负载时、现有卷将适时切换到新的igrop方案(<block ref="9c63b965233843690f19867523ba780c" category="inline-link-macro-rx"></block>）。</block>
  <block id="79e79d7d8fe825308bd0e601daaa1131" category="list-text">通过从ONTAP SAN-*后端清除未使用的通过三叉点管理的igroup、提高了三叉点的安全性。</block>
  <block id="18596399dedf47a387f514e9c9862876" category="list-text">通过Amazon FSx向ONGP-NAS经济型和ONGP-NAS Flexgroup存储驱动程序增加了对SMB卷的支持。</block>
  <block id="42bbebea36c49138518f54240583f571" category="list-text">通过ONTAP -NAS、ONTAP -NAS经济模式和ONTAP -NAS Flexgroup存储驱动程序增加了对SMB共享的支持。</block>
  <block id="4332590e7a6bcbdc2a06dc0e18c0731b" category="inline-link-macro">问题描述 #732</block>
  <block id="5a8fc8277a0f6ed003c225aa1e7c48b6" category="list-text">增加了对ARM64节点的支持(<block ref="c2778c70230759cdeecc0357ca334a05" category="inline-link-macro-rx"></block>）。</block>
  <block id="69ef45b431e1a60332ee3ce7e1a67645" category="list-text">通过先停用API服务器改进了通过使用操作步骤 的三项功能(<block ref="6916c682464f601a812aa726b7255568" category="inline-link-macro-rx"></block>）。</block>
  <block id="be70537c794b0fc1d909e1bf6ffbbc59" category="list-text">为Makefile添加了对Windows和ARM64主机的跨平台构建支持；请参见Build .md。</block>
  <block id="6f03549bdf867b6dbabec83da444ffcf" category="paragraph">** Kubenetes:**配置ONTAP－SAN和ONTAP－SAN－Economy驱动程序时，将不再创建后端范围的igrou(<block ref="9c63b965233843690f19867523ba780c" category="inline-link-macro-rx"></block>）。</block>
  <block id="7558c614baceb6010756b848dd26325e" category="section-title">23.01.1中的变更</block>
  <block id="d7393ea674321a4e126b601e3097f2ec" category="admonition">现在、在Trident中支持Kubnetes 1.27。请先升级Astra Trident、然后再升级Kubernetes。</block>
  <block id="99836a64b28c522e35a15aa0a4b39257" category="list-text">现在、ONTAP SAN卷将使用每个节点的igroup、并且仅将LUN映射到igroup、而将其主动发布到这些节点、以改善我们的安全状况。当Asta Trigent确定在不影响活动工作负载的情况下可以安全地切换到新的igrop方案时、现有卷将适时切换到此方案。</block>
  <block id="33871b6190a8d5adbe8b15282054766c" category="sidebar">新增功能</block>
  <block id="ffd4000c9e43a23d97e231d47f99dcd4" category="list-text">您可以运行多个驱动程序，并创建指向其中一个驱动程序的存储类。例如、您可以配置一个使用的黄金类<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 驱动程序和使用的铜牌类<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> 一个。</block>
  <block id="a571dbb3887a364b4b4dcb82a5fa6ec9" category="list-text">创建快照控制器。</block>
  <block id="ae3ba2e438847d5fb2abc16b3c73ccab" category="admonition">如有必要、打开<block ref="31a2c725707ce238c3eb4dd82c7e3af9" prefix=" " category="inline-code"></block> 并更新<block ref="89801e9e98979062e84647433a8ed3e9" prefix=" " category="inline-code"></block> 命名空间。</block>
  <block id="c48edc45b9266a1f0d1869ac35615605" category="section-title">使用快照恢复卷数据</block>
  <block id="4714f3cf4c41291cc2dae88a7150cbe5" category="paragraph">默认情况下、快照目录处于隐藏状态、以便最大程度地提高使用配置的卷的兼容性<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 和<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> 驱动程序。启用<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block> 目录以直接从快照恢复数据。</block>
  <block id="8f580d002ee0bbc67930846839d50dbe" category="paragraph">使用volume Snapshot restore ONTAP命令行界面将卷还原到先前快照中记录的状态。</block>
  <block id="f84dc17e0595ca9097097e70b9b927e1" category="admonition">还原Snapshot副本时、现有卷配置将被覆盖。创建Snapshot副本后对卷数据所做的更改将丢失。</block>
  <block id="389fca3b29dd7808b825fbd953242ed9" category="summary">了解Asta三元数据以及使用Asta三元数据创建的卷的保护和恢复选项。对于具有持久性要求的每个应用程序，您都应制定一个数据保护和恢复策略。</block>
  <block id="03c39d763ca15978d9ef16c2ba5fe98a" category="doc">数据保护和灾难恢复</block>
  <block id="e3d45c3e9eb2d2949067a0aa7b61e476" category="section-title">Astra三元数据复制和恢复</block>
  <block id="44f293896af5541a26ccc287fc71266b" category="paragraph">您可以创建备份、以便在发生灾难时还原Asta三端存储。</block>
  <block id="9b35fe66a1b68aa00dbffd236d3fe856" category="section-title">Astra三项技术复制</block>
  <block id="65808079dd14440eb9053549bdf96b26" category="paragraph">Astra Tandent使用Kubnetes CRD存储和管理自己的状态、并使用Kubnetes集群etcd存储其元数据。</block>
  <block id="082510018437a15b6d42065dfe5a5384" category="inline-link-macro">Kubenetes：备份etcd集群</block>
  <block id="ec3558916e2679d1a4b592e0ade35471" category="list-text">使用备份Kubenetes集群etcd  <block ref="901b02918d705c0966dae4033c132965" category="inline-link-macro-rx"></block>。</block>
  <block id="47eab96eced19efdca77f2407d8e44aa" category="list-text">将备份项目放在FlexVol上。</block>
  <block id="798d6cc5f40dde831172bf108a793297" category="admonition">建议您保护FlexVol所在的SVM、并将其与另一个SVM建立SnapMirror关系。</block>
  <block id="49319f2bf766b5cf558ec82dd35f5a46" category="section-title">Asta三元组恢复</block>
  <block id="6275e3378f7bc1d5792a600e82c7aa6c" category="paragraph">您可以使用Kubenetes CRD和Kubenetes集群etcd快照来恢复Astra Trident。</block>
  <block id="b30057689f3e745e5feeb142585ff30b" category="list-text">从目标SVM中、将包含Kubnetes etcd数据文件和证书的卷挂载到将设置为主节点的主机上。</block>
  <block id="5fefcae3a4602913a273a904829295ce" category="list-text">在下复制与Kubirnetes集群相关的所有必需证书<block ref="890b0e4d98741eac800c616b757217cb" prefix=" " category="inline-code"></block> 和下的etcd成员文件<block ref="3fa01691da932f6c45bf424027ffabb8" prefix=" " category="inline-code"></block>。</block>
  <block id="51fa31507539ecf10c55d8cc513269d0" category="inline-link-macro">Kubornetes：还原etcd集群</block>
  <block id="3167e8459c0d46545dc7978a60ef4978" category="list-text">使用从etcd备份还原Kubenetes集群 <block ref="c87a91d2cf6358248ae560cfa802edf4" category="inline-link-macro-rx"></block>。</block>
  <block id="54d0429fea223af0d32d9f061ed733c9" category="list-text">运行<block ref="1ec8e1992e296a9bdb691f1931d391fe" prefix=" " category="inline-code"></block> 验证所有的三端测试自定义资源是否已启动、并检索三端测试对象以验证所有数据是否可用。</block>
  <block id="c87c1a25aa5e2ef1af216bc50d1fd391" category="section-title">SVM复制和恢复</block>
  <block id="0d3b37ff5855bf299f3c4a154373c1e2" category="inline-link">ONTAP SnapMirror</block>
  <block id="968aa074079a26dbcd09cc3312c6e0d8" category="paragraph">Asta三端存储无法配置复制关系、但存储管理员可以使用<block ref="eae3571c3bcc896c3c2934b9eeb2171a" category="inline-link-rx"></block> 复制SVM。</block>
  <block id="9299ebdcbaefed4a9ea27b355bb0f75e" category="paragraph">发生灾难时，您可以激活 SnapMirror 目标 SVM 以开始提供数据。系统还原后、您可以切换回主系统。</block>
  <block id="1de93d4bf941bc79aec631023559b9e7" category="paragraph">使用SnapMirror SVM复制功能时、请考虑以下事项：</block>
  <block id="1868906f3a3fbcf756260737545805d6" category="list-text">您应为启用了SVM-DR的每个SVM创建一个不同的后端。</block>
  <block id="f9f808f1692cabf1bf803e07da9adbe7" category="list-text">将存储类配置为仅在需要时选择复制的后端、以避免将不需要复制的卷配置到支持SVM-DR的后端。</block>
  <block id="6fa2f5991a9e2ee7d4668899f94e78e4" category="list-text">应用程序管理员应了解与复制相关的额外成本和复杂性、并在开始此过程之前仔细考虑其恢复计划。</block>
  <block id="2b5ffe73affd6d09b3b5e160e117e5c9" category="section-title">SVM复制</block>
  <block id="9f4b9999b69320b559438c600d724ff9" category="inline-link-macro">ONTAP：SnapMirror SVM复制</block>
  <block id="d628a099db3505c9d0435e12076d8a61" category="paragraph">您可以使用 <block ref="89150b9d328c8330200fceb39b37760e" category="inline-link-macro-rx"></block> 以创建SVM复制关系。</block>
  <block id="b9f28001ddc636f8628bd929334b258e" category="paragraph">使用SnapMirror、您可以设置选项来控制要复制的内容。您需要知道在预成形时选择了哪些选项 <block ref="885698069be8fdb81e43cb59c9632744" category="inline-xref-macro-rx"></block>。</block>
  <block id="524218dc9ff1ef52c9a0404971525b21" category="inline-link-macro">-Identity保留true</block>
  <block id="8dc4e22513bbb97acc41295bfe46d5fe" category="list-text"><block ref="c758ffe020dc40d00c9a9c46ecbdd824" category="inline-link-macro-rx"></block> 复制整个SVM配置。</block>
  <block id="d18f05a5c35a5a7d999263600f0356bf" category="inline-link-macro">-discard-configs network</block>
  <block id="97c20c3eb8c7569982dc9f84e7f31ba3" category="list-text"><block ref="afa9da8af32f091c8328b13559d456b1" category="inline-link-macro-rx"></block> 不包括LIP和相关网络设置。</block>
  <block id="224ea277d21a44b59b0fa43747b4f6a6" category="inline-link-macro">-Identity保留false</block>
  <block id="471621652d0597dca59f266effb8f90f" category="list-text"><block ref="1faf7e0b3f51b53ae01a4f860a9ed344" category="inline-link-macro-rx"></block> 仅复制卷和安全配置。</block>
  <block id="e3dcf348731966425abf967f0c0c575d" category="section-title">使用Asta Trdent恢复SVM</block>
  <block id="58c8a712ac4d3255cd28c6024ad43f71" category="paragraph">Astra Trident 不会自动检测 SVM 故障。如果发生灾难、管理员可以手动启动通过三项功能故障转移到新SVM的操作。</block>
  <block id="da29de46c3a7d3e66fc701b2781fcbce" category="list-text">取消计划的和正在进行的SnapMirror传输、中断复制关系、停止源SVM、然后激活SnapMirror目标SVM。</block>
  <block id="98bdea55e26fba2494cc5f163b6f8076" category="list-text">如果指定了<block ref="224ea277d21a44b59b0fa43747b4f6a6" prefix=" " category="inline-code"></block> 或<block ref="e932330dd004e680ebd1a75db84b73ce" prefix=" " category="inline-code"></block> 配置SVM复制时、请更新<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block> 和<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block> 在三端定义文件中。</block>
  <block id="6141984e8f91176bd3a76175b02c1a09" category="list-text">确认<block ref="ed66bef2b107983b6e4066fddf8c45c3" prefix=" " category="inline-code"></block> 位于三端定义文件中。无法更改此参数。正在放弃<block ref="ed66bef2b107983b6e4066fddf8c45c3" prefix=" " category="inline-code"></block> 发生原因后端更新是否会失败。</block>
  <block id="51589b18e320f20306c944a08241dac1" category="list-text">使用以下命令更新所有必需的后端、以反映新的目标SVM名称：</block>
  <block id="d980e1fdfa951088567e6d057ba7dc9c" category="list-text">如果指定了<block ref="224ea277d21a44b59b0fa43747b4f6a6" prefix=" " category="inline-code"></block> 或<block ref="89680afd09991bc3d4db985c40c861c1" prefix=" " category="inline-code"></block>，则必须退回所有应用程序Pod。</block>
  <block id="debd7fcd99a55e4ad2700a29cadc6aa3" category="admonition">如果指定了<block ref="524218dc9ff1ef52c9a0404971525b21" prefix=" " category="inline-code"></block>、则A作用 是在激活目标SVM后、A作用 是通过Asta Trident配置的所有卷都会开始提供数据。</block>
  <block id="cceb49886fed38f241928d51abab95a2" category="section-title">卷复制和恢复</block>
  <block id="815f28e53ebfb423dfe835a845095bf6" category="inline-link-macro">ONTAP SnapMirror复制和恢复</block>
  <block id="a5217e87e9aef874c28773b5774ecf37" category="paragraph">Asta三端存储无法配置SnapMirror复制关系、但存储管理员可以使用 <block ref="c3487d6df2463efc752acd6f5cc45a1f" category="inline-link-macro-rx"></block> 以复制Asta Trdent创建的卷。</block>
  <block id="c3c343b5a84229bd5095fd09f2afc5f5" category="inline-link-macro">tridentctrd卷导入</block>
  <block id="5b570015a3a6711227cf6a2802ccd0d7" category="paragraph">然后、您可以使用将恢复的卷导入到Astra Trident中 <block ref="d8ad77887a2224df2faf4f1df578e333" category="inline-link-macro-rx"></block>。</block>
  <block id="d8d9dfeae772da34290b750d0f848a26" category="admonition">不支持导入<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>， <block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>或<block ref="70d5dbddc55e3700ddbc8d21f0de22a3" prefix=" " category="inline-code"></block> 驱动程序。</block>
  <block id="b489b293d6cbe8b86835d3cac8c315fb" category="section-title">Snapshot数据保护</block>
  <block id="f332d72a4b78e34e31131f3a98c98053" category="paragraph">您可以使用以下方式保护和还原数据：</block>
  <block id="97fb495fd3b6672c40bb0092ca102eca" category="list-text">外部快照控制器和CRD、用于为永久性卷(PVs)创建Kubbernetes卷快照。</block>
  <block id="cb55f92ada2ab9103f2202b5e32b90c2" category="paragraph"><block ref="cb55f92ada2ab9103f2202b5e32b90c2" category="inline-link-macro-rx"></block></block>
  <block id="83cd672b9742ba621e93a8b69c4ab2d4" category="list-text">ONTAP快照、用于还原卷的全部内容或恢复单个文件或LUN。</block>
  <block id="ad336d1fccea3e918d07055edac855a3" category="inline-link-macro">ONTAP快照</block>
  <block id="0cb949d1baa06577db93328185a8f24d" category="paragraph"><block ref="0cb949d1baa06577db93328185a8f24d" category="inline-link-macro-rx"></block></block>
  <block id="044d1500d5e33461ef3341121d2aebda" category="section-title">Astra Control Center应用程序复制</block>
  <block id="3ee9187f7387265ff6f477d26adad0f2" category="paragraph">使用Astra Control、您可以使用SnapMirror的异步复制功能将数据和应用程序更改从一个集群复制到另一个集群。</block>
  <block id="4910c9e59da080576c2dedc885e19ed7" category="inline-link-macro">Astra Control：使用SnapMirror技术将应用程序复制到远程系统</block>
  <block id="0868eb323c2e097c6c408f7c59642c94" category="paragraph"><block ref="0868eb323c2e097c6c408f7c59642c94" category="inline-link-macro-rx"></block></block>
  <block id="2e77d5277311f3a9232a73cdbbcd754b" category="section-title">概述和注意事项</block>
  <block id="df6f3bebb689d436041be7a75ee22542" category="paragraph">您可以将卷导入到Astra三端到以下位置：</block>
  <block id="88541191ec5fe50ba0d21b4300401b85" category="list-text">将应用程序容器化并重复使用其现有数据集</block>
  <block id="77d782125cafbbf0fe1c5c95755d143f" category="list-text">对一个应用程序使用数据集的克隆</block>
  <block id="d265b515faaf05e2c32727d8b9742a78" category="list-text">重建发生故障的Kubrenetes集群</block>
  <block id="6766ef9d5b11abf03ee72b55c5745f4b" category="list-text">在灾难恢复期间迁移应用程序数据</block>
  <block id="4c321a56c9c030449cd3315863de525b" category="paragraph">导入卷之前、请查看以下注意事项。</block>
  <block id="3c65d97abe967081cd896f071baa434f" category="list-text">Asta三端磁盘只能导入RW (读写)类型的ONTAP卷。DP (数据保护)类型的卷是SnapMirror目标卷。在将卷导入Astra三端存储之前、您应先中断镜像关系。</block>
  <block id="e47be4dcc849b534107f57afd92f801f" category="list-text">我们建议导入没有活动连接的卷。要导入当前使用的卷、请克隆此卷、然后执行导入。</block>
  <block id="e4618ea9b1ae23e5ed30f6f19e6a77e8" category="admonition">这对于块卷尤其重要、因为Kubnetes不会意识到先前的连接、并且可以轻松地将活动卷连接到Pod。这可能会导致数据损坏。</block>
  <block id="8cbc7a45d1e8d9d63beba7825c76f6ff" category="list-text">不过<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block> 必须在PVC上指定、A作用 是在导入期间不使用此参数。创建卷期间会使用存储类根据存储特征从可用池中进行选择。由于卷已存在、因此导入期间不需要选择池。因此、即使卷位于与PVC中指定的存储类不匹配的后端或池中、导入也不会失败。</block>
  <block id="a31db9efd829f01dd21fdc97db2d29e4" category="list-text">现有卷大小在PVC中确定和设置。存储驱动程序导入卷后，系统将创建 PV ，并为其创建一个 Claims Ref 。</block>
  <block id="604eea1f3df98285b6887ff059258827" category="list-text">回收策略最初设置为<block ref="16d79ff80feadcf2f52096f073f2b94a" prefix=" " category="inline-code"></block> 在PV中。Kubernetes 成功绑定 PVC 和 PV 后，将更新回收策略以匹配存储类的回收策略。</block>
  <block id="5d24684cf5054f53b1e945be75b37f69" category="list-text">存储类的回收策略为时<block ref="099af53f601532dbd31e0ea99ffdeb64" prefix=" " category="inline-code"></block>、删除PV时、存储卷将被删除。</block>
  <block id="746af08b5a2da065387679e35fb75f55" category="list-text">默认情况下、Asta三端存储管理PVC、并在后端重命名FlexVol和LUN。您可以通过<block ref="e2b9359adf7cdd62fc784b5090c3c452" prefix=" " category="inline-code"></block> 用于导入非受管卷的标志。如果您使用<block ref="e2b9359adf7cdd62fc784b5090c3c452" prefix=" " category="inline-code"></block>中，A作用 是在对象的生命周期内不对PVC或PV执行任何其他操作。删除PV后、不会删除存储卷、并且卷克隆和卷大小调整等其他操作也会被忽略。</block>
  <block id="be303acf01bc566d5d211f228131bee4" category="admonition">如果要对容器化工作负载使用 Kubernetes ，但希望在 Kubernetes 外部管理存储卷的生命周期，则此选项非常有用。</block>
  <block id="db31dcd83fd57b294fb0340ea975015f" category="section-title">导入卷</block>
  <block id="61a1adebea5e6a017b4bd4b405ae4f52" category="paragraph">您可以使用<block ref="a768f5449e3a83ac56f2fb8ab4562339" prefix=" " category="inline-code"></block> 以导入卷。</block>
  <block id="8feb5f647cb423db7fa8a957ae4ef075" category="list-text">创建永久性卷请求(PVC)文件(例如、<block ref="88bf8ee4d993e535425148da6a64c1c2" prefix=" " category="inline-code"></block>)。PVC文件应包括<block ref="b068931cc450442b63f5b3d276ea4297" prefix=" " category="inline-code"></block>，<block ref="89801e9e98979062e84647433a8ed3e9" prefix=" " category="inline-code"></block>，<block ref="1963d17f24888bdf1f22d7ea7f72f607" prefix=" " category="inline-code"></block>，和<block ref="ee822781a3bd0ae0f8f6331dc4865d9c" prefix=" " category="inline-code"></block>。您也可以指定<block ref="c005e78d4bd808038335c32dd84cf7da" prefix=" " category="inline-code"></block> 在PVC定义中。</block>
  <block id="7f745c89a2e8fd59353bab523e12eb77" category="paragraph">以下是最低规格示例：</block>
  <block id="a9e31569460a0b133fdd97c5f482c04e" category="admonition">请勿包含PV名称或卷大小等其他参数。这可能发生原因会使导入命令失败。</block>
  <block id="62baed444b3b0cdadb9d1c1ed6d56876" category="list-text">使用<block ref="a768f5449e3a83ac56f2fb8ab4562339" prefix=" " category="inline-code"></block> 命令以指定包含卷的Asta三元数据后端的名称以及在存储上唯一标识卷的名称(例如：ONTAP FlexVol、Element卷、Cloud Volumes Service路径)。。<block ref="5338b151154663bac9980b0f044518f2" prefix=" " category="inline-code"></block> 指定PVC文件的路径需要参数。</block>
  <block id="37c0e0081d2fa3ebdf688df7e37ecd7a" category="paragraph">查看以下卷导入示例、了解受支持的驱动程序。</block>
  <block id="b8cd11aae04b2508e6cf401f43cdb4f9" category="section-title">ONTAP NAS和ONTAP NAS FlexGroup</block>
  <block id="7a4c35874a7b87427d89cd3aecdcb443" category="paragraph">Astra三项功能支持使用导入卷<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 和<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> 驱动程序。</block>
  <block id="6551d29114ca8e4ced094b1f68242124" category="list-text">。<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> 驱动程序无法导入和管理qtree。</block>
  <block id="15f21f5d1f84f4b986a4db037c57333d" category="list-text">。<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 和<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> 驱动程序不允许使用重复的卷名称。</block>
  <block id="3fa3bc64b029b88f42b842bb7dc4e52d" category="paragraph-title">ONTAP NAS示例</block>
  <block id="77fe25c67ee05760d58e91a98e3ff055" category="paragraph">以下是受管卷和非受管卷导入的示例。</block>
  <block id="865c1a701e3847de9fbff4a375ac7177" category="open-title">受管卷</block>
  <block id="9baac1fff2f93c6aa6f2205921fe6b32" category="paragraph">以下示例将导入名为的卷<block ref="b61fdc0d7fc5d08e674f3891a91d3116" prefix=" " category="inline-code"></block> 位于名为的后端<block ref="b0253ee501e433d48faea12f8e40ef28" prefix=" " category="inline-code"></block>：</block>
  <block id="ed12f17a6dc2e65dfdf289eb64d258ae" category="open-title">非受管卷</block>
  <block id="412d430c2de2722ad4f878fba9145e3f" category="paragraph">使用时<block ref="e2b9359adf7cdd62fc784b5090c3c452" prefix=" " category="inline-code"></block> 参数、A作用 是不对卷进行重命名。</block>
  <block id="30690ec57cb4844d007f7d2e2c9393a2" category="paragraph">以下示例导入<block ref="60d9e6d88af815fe67aed90572f53184" prefix=" " category="inline-code"></block> 在上<block ref="b0253ee501e433d48faea12f8e40ef28" prefix=" " category="inline-code"></block> 后端：</block>
  <block id="548fedaf4074fe2826e3c53dfd92a19e" category="section-title">ONTAP SAN</block>
  <block id="30bb262b9fe2f6c714c560a0608899dc" category="paragraph">Astra三端存储可以导入包含单个LUN的ONTAP SAN FlexVol。这与一致<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 驱动程序、用于为FlexVol 中的每个PVC和LUN创建FlexVol。Asta三进位导入FlexVol并将其与PVC定义关联起来。</block>
  <block id="854d516b7e1eddbead5cbea0b17dac88" category="paragraph-title">ONTAP SAN示例</block>
  <block id="eb87428bc7ec6d211f503b31240aec94" category="paragraph">对于受管卷、Asta三端存储将FlexVol重命名为<block ref="b1a57c8f543d163276a264ab84f98485" prefix=" " category="inline-code"></block> 将FlexVol 中的LUN格式化为<block ref="1793051c27c3288cfb3a1c86e4e41b41" prefix=" " category="inline-code"></block>。</block>
  <block id="c59e9e1ae2ff6860f6aa6f2d3dc9f872" category="paragraph">以下示例将导入<block ref="9c263b72b293041bdc16e8711bb55a99" prefix=" " category="inline-code"></block> 上存在的FlexVol<block ref="5461c7e570fd7b4318a37f0dceb291c1" prefix=" " category="inline-code"></block> 后端：</block>
  <block id="d172829ee06c1c52828b60f0544b2f06" category="paragraph">以下示例导入<block ref="a5c0fa75ec8cf92d22eadab558660dda" prefix=" " category="inline-code"></block> 在上<block ref="2dec4fe0d108047546d031f48f4073f7" prefix=" " category="inline-code"></block> 后端：</block>
  <block id="58f7692a8b6ce5b3fa31b6daec3259fe" category="paragraph">如果您将LUN映射到与Kubornetes节点IQN共享IQN的igroux、如以下示例所示、您将收到错误：<block ref="4524d417d10c9cf90c4a674da76c4964" prefix=" " category="inline-code"></block>。您需要删除启动程序或取消映射LUN才能导入卷。</block>
  <block id="5ccef908ed30c9dac1afd0a7f3dc5e7f" category="inline-image-macro">映射到iqn和集群iqn的LUN的图像。</block>
  <block id="81238a539b4fc11fb20c6d27db1e5d33" category="paragraph"><block ref="81238a539b4fc11fb20c6d27db1e5d33" category="inline-image-macro-rx" type="image"></block></block>
  <block id="67cb0d15ee759f80dd6bde1ab60c32e1" category="paragraph">Astra三端存储支持使用NetApp Element软件和NetApp HCI卷导入<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> 驱动程序。</block>
  <block id="00b0b4c3f91cc8ead8c7a1fac316cd43" category="admonition">Element 驱动程序支持重复的卷名称。但是、如果存在重复的卷名称、Asta Dent将返回错误。作为临时解决策、克隆卷、提供唯一的卷名称并导入克隆的卷。</block>
  <block id="d12ef9e4a047861afd11513bde147f35" category="paragraph-title">元素示例</block>
  <block id="e91134286ebcca5f894ca859ce6e6527" category="paragraph">以下示例将导入<block ref="ce9d6be888db333d9f15ad3ca22aab5c" prefix=" " category="inline-code"></block> 后端上的卷<block ref="54034d50b7e92e0dd9d45b9be754d7bd" prefix=" " category="inline-code"></block>。</block>
  <block id="5c9ef0d871938dccceb29ee63fad8ddb" category="section-title">Google 云平台</block>
  <block id="cf31c490360937ec8a3ce1c25928d464" category="paragraph">Astra三项功能支持使用导入卷<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block> 驱动程序。</block>
  <block id="b83141d187ef372685e66e6dfe4cabd9" category="admonition">要在Google云平台中导入NetApp Cloud Volumes Service支持的卷、请按卷路径确定该卷。卷路径是卷的导出路径的一部分、位于之后<block ref="fb256b96ee496724e4579987e5a6e4da" prefix=" " category="inline-code"></block>。例如、如果导出路径为<block ref="3bbe8dafc880d124219c1e4f73d41cf9" prefix=" " category="inline-code"></block>、卷路径为<block ref="8886a1ac9f5b94f2fb54d752c304777f" prefix=" " category="inline-code"></block>。</block>
  <block id="9dfa04a9ad04eba811811f2fbd0f5f0e" category="paragraph-title">Google Cloud Platform示例</block>
  <block id="dd8d0b5581c0eb32a23d802032124024" category="paragraph">以下示例将导入<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block> 后端上的卷<block ref="b242744397b7d8bc9391b3e836628c5e" prefix=" " category="inline-code"></block> 卷路径<block ref="8886a1ac9f5b94f2fb54d752c304777f" prefix=" " category="inline-code"></block>。</block>
  <block id="831e4b284f7105b1bbd4f891a4e7144a" category="paragraph">Astra三项功能支持使用导入卷<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block> 和<block ref="43f09bc16eaf24131ea82903259878ac" prefix=" " category="inline-code"></block> 驱动程序。</block>
  <block id="7501988e9549daa8c2fcd13e55b9fc78" category="admonition">要导入Azure NetApp Files卷、请按卷路径确定该卷。卷路径是卷的导出路径的一部分、位于之后<block ref="fb256b96ee496724e4579987e5a6e4da" prefix=" " category="inline-code"></block>。例如、如果挂载路径为<block ref="a88065dde27cea3a008a18172c5a9c9e" prefix=" " category="inline-code"></block>、卷路径为<block ref="062b749476713f7b5bbc675159e90bad" prefix=" " category="inline-code"></block>。</block>
  <block id="1cfd9b4e20d41cdca62f758d3b0cb58b" category="paragraph-title">Azure NetApp Files示例</block>
  <block id="bd46b0a8c2c4c89a60ee85052ad2dd0e" category="paragraph">以下示例将导入<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block> 后端上的卷<block ref="d8dd89ab9d39f5487714722f9becb468" prefix=" " category="inline-code"></block> 卷路径<block ref="062b749476713f7b5bbc675159e90bad" prefix=" " category="inline-code"></block>。</block>
  <block id="0b8ca2be5f4fe564fb8e843cbc53703d" category="admonition">如果在GKE环境中创建按需卷快照、请勿创建快照控制器。GKE-使用内置的隐藏快照控制器。</block>
  <block id="1f0c7a14cb87fb29a7346e9b4c770751" category="summary">Astra Trident 提供了五个唯一的 ONTAP 存储驱动程序，用于与 ONTAP 集群进行通信。</block>
  <block id="9e5914532c650440b8c559c303ae8e04" category="section-title">适用于ONTAP的Astra三端存储驱动程序</block>
  <block id="bff3ebc4ae5702fb7f811ba9acabc13a" category="paragraph">Asta三端存储提供了以下存储驱动程序、用于与ONTAP集群进行通信。支持的访问模式包括：_ReadWriteOnce_(RWO)、_ReadOnlyMany_(ROX)、_ReadWriteMany_(rwx)、_ReadWriteOncePod_(RWOP)。</block>
  <block id="ad90b7d29d0d8a9c746868fe1f38ca90" category="paragraph">Rwo、ROX、rwx、RWOP</block>
  <block id="96b38cb92e67a8f09c2d13169b8bb555" category="paragraph">Rwo、ROX、RWOP</block>
  <block id="f28228f84cb57be6c4037bf94a6afbd2" category="paragraph">删除具有关联快照的永久性卷时，相应的 Trident 卷将更新为 " 正在删除 " 状态。删除卷快照以删除Asta Trdent卷。</block>
  <block id="f736607140d617c85245dd139003582e" category="list-text">在给定Kubbernetes集群中的所有名空间中只应安装一个A作用 力三端实例。</block>
  <block id="69bdd71a77ecd87974ee464a579ebc8f" category="list-text">升级时、请务必提供<block ref="f6e7f85d8aee15940665bf722f7afac2" prefix=" " category="inline-code"></block> 在中<block ref="f652904c3bfb48fb25a0a75f485f0ff6" prefix=" " category="inline-code"></block> 由Astra Trident使用。您可以删除并重新创建<block ref="f652904c3bfb48fb25a0a75f485f0ff6" prefix=" " category="inline-code"></block> 而不会中断已有卷。</block>
  <block id="33966eba1ed0cde6afda5a97ffaffb09" category="inline-link">安全上下文</block>
  <block id="326aae224b3bbcf4b9eb8fc0a262fc24" category="list-text">这是执行的一项 * 要求 *<block ref="cafe4c6014d8c45aaac70e49318f1a2a" category="inline-link-rx"></block> SAN 卷。</block>
  <block id="87459c33b1692755deb4b22c7eaa864c" category="section-title">第1步：选择版本</block>
  <block id="04ac7e8dacc8e0cf0377df2ca192d643" category="admonition">在OpenShift容器平台上使用TRIDent操作程序进行升级时、应升级到TRIDent 21.01.1或更高版本。21.01.0 版发布的 Trident 运算符包含一个已知的问题描述，该 已在 21.01.1 中修复。有关详细信息，请参见<block ref="bcebcdd21adcbb3d7c640d63a711c6fb" category="inline-link-rx"></block>。</block>
  <block id="6d2d3a9fb621ba23b0f8ec56dc8b0a24" category="section-title">第2步：确定原始安装方法</block>
  <block id="ce42d65061b497ce09f8f7253a47d3ec" category="paragraph">若要确定最初安装Astra Trdent时使用的版本、请执行以下操作：</block>
  <block id="57e2fc21500db064f15f9f0dd71fac43" category="list-text">如果没有操作员POD、则使用安装了Asta三端盘<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="32f6915fd282657ead56cf3557648c00" category="list-text">如果有操作员模块、则使用三端操作员手动或使用Helm安装了A作用 曲三端。</block>
  <block id="4b9dbf746fd46d6f3df5db09d61acc78" category="list-text">如果有操作员控制盒、请使用<block ref="2bbaa285a4b0035313ee3178abf33313" prefix=" " category="inline-code"></block> 确定是否使用Helm安装了Astra Trdent。</block>
  <block id="2653c4eb88f71c9c09dd63163c3279a3" category="list-text">如果有Helm标签、则表示Asta Trdent是使用Helm安装的。</block>
  <block id="62813503b38101db99e720ca48a2e384" category="list-text">如果没有Helm标签、则使用Trident操作人员手动安装A作用 于Trident。</block>
  <block id="dccfb2ce978b2c73d6a7308a124d0043" category="section-title">第3步：选择升级方法</block>
  <block id="d6b7a42c6c41b071d2c80b3e4c2a7edf" category="inline-link-macro">选择升级方法</block>
  <block id="ab639a35db468f671d4a76735e801015" category="paragraph">请查看 <block ref="5cffa5fbe758cc3901f0e33c78b29d1b" category="inline-link-macro-rx"></block> 升级之前<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="a38e5a20ac16df242bdde92e028a100e" category="list-text">在中运行卸载命令<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 删除与Asta Trandent关联的所有资源(CRD和相关对象除外)。</block>
  <block id="e7447899210826e544345ba93e133255" category="inline-link-macro">使用 tridentctl 安装 Astra Trident</block>
  <block id="0c147de2192f3060367ba5761742d227" category="list-text">重新安装Asta Trdent。请参见 <block ref="d55139d84e0ac19d8211d27772e17544" category="inline-link-macro-rx"></block>。</block>
  <block id="1d2d1200e759d67b259f843be2270f71" category="admonition">请勿中断升级过程。确保安装程序运行完毕。</block>
  <block id="053bfc722ec4b4805e32c307458f8ea5" category="paragraph">确保您使用的是正在运行的Kubbernetes集群 <block ref="d502dc64864e79085bee32826e6fe213" category="inline-link-macro-rx"></block>。</block>
  <block id="71530aef1814290453dc7add3bdae349" category="list-text">将集群范围的运算符部署在同一命名空间中。</block>
  <block id="8d23be098d49e797284393a4c1479c53" category="list-text">确认已将三项功能升级到预期版本。</block>
  <block id="210f1e5eca9c602b1282553f342448ae" category="list-text">对于运行Kubornetes 1.24或更早版本的集群、请使用<block ref="bd2cc8575fe69c7f775292759380c838" prefix=" " category="inline-code"></block>。</block>
  <block id="e4941fda44f66f353885d1a37ca63e2b" category="list-text">对于运行Kubernetes 1.25或更高版本的集群、请使用<block ref="5a02ebff4889c2de0379a0fb10bed282" prefix=" " category="inline-code"></block>。</block>
  <block id="dacbfb309aa16cb942510c02c224fdbc" category="example-title">基于证书的身份验证示例</block>
  <block id="60eac39d4383fedcc1df436a2d0e856d" category="paragraph">在本基本配置示例中<block ref="79fffaff4013c1e8c508e76646eca77b" prefix=" " category="inline-code"></block>，<block ref="19dce7ac7f5290fc8fa218ad0c858df5" prefix=" " category="inline-code"></block>，和<block ref="8468461bca00a47ab5ddba2afc45f52c" prefix=" " category="inline-code"></block> (如果使用可信CA、则可选)将填充<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block> 和分别采用客户端证书、专用密钥和可信CA证书的base64编码值。</block>
  <block id="71b79981e733eabd769324fa40c8fa6d" category="paragraph">在下面显示的示例后端定义文件中、为所有存储池设置了特定默认值、例如<block ref="cae77b049bf504af7afc43b99b6c5213" prefix=" " category="inline-code"></block> 无、<block ref="45922ba6ba8428764f22ed06f814c762" prefix=" " category="inline-code"></block> 为false、和<block ref="5bdf74912a51c34815f11e9a3d20b609" prefix=" " category="inline-code"></block> 为false。虚拟池在存储部分中进行定义。</block>
  <block id="71fcdf20b31ca43f6ef64c06530f313d" category="paragraph">在这些示例中、某些存储池会自行设置<block ref="cae77b049bf504af7afc43b99b6c5213" prefix=" " category="inline-code"></block>，<block ref="45922ba6ba8428764f22ed06f814c762" prefix=" " category="inline-code"></block>，和<block ref="5bdf74912a51c34815f11e9a3d20b609" prefix=" " category="inline-code"></block> 值、而某些池会覆盖默认值。</block>
  <block id="574e53d92fdeaac37ba2d879a9b88f12" category="example-title">ONTAP NAS示例</block>
  <block id="bdb252122df8a6e68a54782628d1944f" category="example-title">ONTAP NAS FlexGroup示例</block>
  <block id="9561077d9ef091b88a253b8593eb8bfb" category="example-title">ONTAP NAS经济性示例</block>
  <block id="eb2e955f1a984e2be0e3fa8cdbe6667c" category="paragraph">以下StorageClass定义请参见 <block ref="d690aebda44a37b8ae9c2c6f1918cb30" category="inline-xref-macro-rx"></block>。使用<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block> 字段中、每个StorageClass都会指出可用于托管卷的虚拟池。卷将在选定虚拟池中定义各个方面。</block>
  <block id="01eacb47d802acac83a7e60311768055" category="list-text">。<block ref="63f9100803e1f67a5e33cbd5da9dbb33" prefix=" " category="inline-code"></block> StorageClass将映射到中的第一个和第二个虚拟池<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> 后端。这些池是唯一提供金牌保护的池。</block>
  <block id="6b35cdd98b7f7e55e698a6d0628e18e0" category="list-text">。<block ref="afbfe298fa275e5fff1aca9b2f213d9a" prefix=" " category="inline-code"></block> StorageClass将映射到中的第三个和第四个虚拟池<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> 后端。这些池是唯一提供黄金级以外保护级别的池。</block>
  <block id="535efa214445261dfda5d5edc613e56b" category="list-text">。<block ref="65846755494383158592c748f74421ec" prefix=" " category="inline-code"></block> StorageClass将映射到中的第四个虚拟池<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 后端。这是为mysqldb类型的应用程序提供存储池配置的唯一池。</block>
  <block id="d0c5a28c77fc4e37f7271d37f7372724" category="list-text">。<block ref="2e63b2ff91d4aeb88b54db5c90b71443" prefix=" " category="inline-code"></block> StorageClass将映射到中的第三个虚拟池<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> 后端。这是唯一提供银牌保护和20000个信用点的池。</block>
  <block id="0191eea3640b05213a7522d6581a2fd5" category="list-text">。<block ref="a96bee9dd30f3ea0af93b4c64ca1e4a4" prefix=" " category="inline-code"></block> StorageClass将映射到中的第三个虚拟池<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 中的后端和第二个虚拟池<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> 后端。这是唯一一款信用点数为5000的池产品。</block>
  <block id="c9410b4405958bba6c2f782b5da4c684" category="admonition">如果您将Amazon FSx on NetApp ONTAP与Asta Dent结合使用、则建议您为指定DNS名称、而不是IP地址。</block>
  <block id="cd5dd52b9f0bba70b1336e13afe05818" category="paragraph">这是使用的基本配置<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 驱动程序。</block>
  <block id="31089bb4131b18ca65c3d384cdd49644" category="example-title">双向CHAP示例</block>
  <block id="17baa03e9287aee400bc2e606d247156" category="paragraph">这些示例使用创建后端<block ref="099cb468880f266cba40b49391fa46bc" prefix=" " category="inline-code"></block> 设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>。</block>
  <block id="7a4c6868ec70d1fbee3cb3a7483e21d0" category="listing-title">ONTAP SAN CHAP示例</block>
  <block id="a0c1c7f21916f2a4fb0f0d56732adc90" category="listing-title">ONTAP SAN经济性CHAP示例</block>
  <block id="6b743d9085f7f94d7a334c4386fbe239" category="paragraph">在这些示例后端定义文件中、为所有存储池设置了特定默认值、例如<block ref="cae77b049bf504af7afc43b99b6c5213" prefix=" " category="inline-code"></block> 无、<block ref="45922ba6ba8428764f22ed06f814c762" prefix=" " category="inline-code"></block> 为false、和<block ref="5bdf74912a51c34815f11e9a3d20b609" prefix=" " category="inline-code"></block> 为false。虚拟池在存储部分中进行定义。</block>
  <block id="4930386ddaad825d64732ee9ec5e65b8" category="example-title">ONTAP SAN示例</block>
  <block id="8a10ba8eb41944c10648f18ba7e16239" category="example-title">ONTAP SAN经济性示例</block>
  <block id="50543d5d423c4c1a0b4fdd41383189e5" category="paragraph">以下StorageClass定义涉及 <block ref="d690aebda44a37b8ae9c2c6f1918cb30" category="inline-xref-macro-rx"></block>。使用<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block> 字段中、每个StorageClass都会指出可用于托管卷的虚拟池。卷将在选定虚拟池中定义各个方面。</block>
  <block id="514e71168790374132badc1258ee5136" category="list-text">。<block ref="63f9100803e1f67a5e33cbd5da9dbb33" prefix=" " category="inline-code"></block> StorageClass将映射到中的第一个虚拟池<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 后端。这是唯一提供金牌保护的池。</block>
  <block id="a9c41ef671a6da4ed0f439f86683b714" category="list-text">。<block ref="afbfe298fa275e5fff1aca9b2f213d9a" prefix=" " category="inline-code"></block> StorageClass将映射到中的第二个和第三个虚拟池<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 后端。只有这些池提供的保护级别不是gold。</block>
  <block id="910ed65246d7ee240ec166f94b1fd5c9" category="list-text">。<block ref="65846755494383158592c748f74421ec" prefix=" " category="inline-code"></block> StorageClass将映射到中的第三个虚拟池<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 后端。这是为mysqldb类型的应用程序提供存储池配置的唯一池。</block>
  <block id="fa03c7de8b1b7b7061bb536c211f3aaf" category="list-text">。<block ref="2e63b2ff91d4aeb88b54db5c90b71443" prefix=" " category="inline-code"></block> StorageClass将映射到中的第二个虚拟池<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 后端。这是唯一提供银牌保护和20000个信用点的池。</block>
  <block id="ac996ac8e4442d8a2791ba8b1e301a02" category="list-text">。<block ref="a96bee9dd30f3ea0af93b4c64ca1e4a4" prefix=" " category="inline-code"></block> StorageClass将映射到中的第三个虚拟池<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 中的后端和第四个虚拟池<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 后端。这是唯一一款信用点数为5000的池产品。</block>
  <block id="b003731e1d339366ed065ffe5a0f50ca" category="paragraph">在下面所示的示例后端定义文件中、为所有存储池设置了特定的默认值、这些存储池设置了<block ref="599dcce2998a6b40b1e38e8c6006cb0a" prefix=" " category="inline-code"></block> 在Silver。虚拟池在中进行定义<block ref="ddecebdea58b5f264d27f1f7909bab74" prefix=" " category="inline-code"></block> 部分。在此示例中、某些存储池会设置自己的类型、而某些存储池会覆盖上面设置的默认值。</block>
  <block id="622bbef04f6f2121d92777cd7c59cc83" category="list-text">默认情况下、通过使用三端安装程序、可以在中部署操作员<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block> 命名空间。如果<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block> 命名空间不存在、请使用以下命令创建命名空间：</block>
  <block id="5bb66df6f3cd1e022e0cb84d5ef9e8e6" category="list-text">在非命名空间中部署操作员<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block> 命名空间、更新<block ref="8610cac3beb01fb0b43bc94c587a807d" prefix=" " category="inline-code"></block>，<block ref="a3df76a4fb69b2a5e9ec42d242e90ea3" prefix=" " category="inline-code"></block> 和<block ref="9fa80de5781893b057ff1d535201893b" prefix=" " category="inline-code"></block> 并使用生成捆绑包文件<block ref="67b2cc1cd5b1570014463995fb2ada61" prefix=" " category="inline-code"></block>。</block>
  <block id="c6c7f5dc0544ce8f73992592be4fa6f0" category="list-text">创建<block ref="67b2cc1cd5b1570014463995fb2ada61" prefix=" " category="inline-code"></block> 使用以下命令、其中_&lt;bundle&gt;_为<block ref="b30cd2dae2689e160b36283c2657caa5" prefix=" " category="inline-code"></block> 或<block ref="e4384751f7a5be47c7eaafbdfc116ab5" prefix=" " category="inline-code"></block> 根据您的Kubbernetes版本。</block>
  <block id="34e1bffd3ed9e5b9d2d9cec17fd7eadf" category="list-text">使用以下命令编译分发包、其中_Data &lt;bundle&gt;是<block ref="b30cd2dae2689e160b36283c2657caa5" prefix=" " category="inline-code"></block> 或<block ref="e4384751f7a5be47c7eaafbdfc116ab5" prefix=" " category="inline-code"></block> 根据您的Kubbernetes版本。</block>
  <block id="806742cccf8380250ffb871d582a0a03" category="list-text">验证是否已创建操作员、部署和副本集。</block>
  <block id="9b800ce65251b771d0eb86610e11f6b0" category="list-text">可从集群的工作节点访问的现有Amazon FSx for NetApp ONTAP文件系统和Storage Virtual Machine (SVM)。</block>
  <block id="888a040cbb1dfe496b305a27374a73a5" category="list-text">Astra Trident仅支持将SMB卷挂载到Windows节点上运行的Pod。请参见 <block ref="688177e6b45c5d27a545463079c58d82" category="inline-xref-macro-rx"></block> 了解详细信息。</block>
  <block id="f55c34459cf261d1102750bcbde548d8" category="paragraph">才能使用配置SMB卷<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 驱动程序、则必须满足以下条件。</block>
  <block id="0533fb8f0faef28ecb6da05caf5fd644" category="cell">您可以指定以下选项之一：使用Microsoft管理控制台或ONTAP命令行界面创建的SMB共享的名称、或者允许Asta三端到功能创建SMB共享的名称。

对于Amazon FSx for ONTAP后端、此参数是必需的。</block>
  <block id="433d29840a179b402df37de14e4679f3" category="summary">了解如何在安装Astra Trident时创建和使用ONTAP NAS驱动程序。本节提供了后端配置示例以及有关如何将后端映射到 StorageClasses 的详细信息。</block>
  <block id="9b59e3a675bc9ca359f3369591ee7df3" category="cell">您可以指定以下选项之一：使用Microsoft管理控制台或ONTAP命令行界面创建的SMB共享的名称；允许Asta三端到功能创建SMB共享的名称；或者、您可以将参数留空以防止对卷进行通用共享访问。

对于内部ONTAP、此参数是可选的。

此参数对于Amazon FSx for ONTAP后端为必填项、不能为空。</block>
  <block id="78e5b29e139db71ceb7ca6bc99b5e228" category="paragraph">这是一个最低后端配置示例。<block ref="79fffaff4013c1e8c508e76646eca77b" prefix=" " category="inline-code"></block>，<block ref="19dce7ac7f5290fc8fa218ad0c858df5" prefix=" " category="inline-code"></block>，和<block ref="8468461bca00a47ab5ddba2afc45f52c" prefix=" " category="inline-code"></block> (如果使用可信CA、则可选)将填充<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block> 和分别采用客户端证书、专用密钥和可信CA证书的base64编码值。</block>
  <block id="8c35a9f7d631f51e05811b36617db641" category="paragraph">此示例显示了如何指示 Astra Trident 使用动态导出策略自动创建和管理导出策略。此操作对于也是如此<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> 和<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> 驱动程序。</block>
  <block id="33ef55e82416e2c1c4beb9cba9560b02" category="paragraph">。<block ref="5910159ef86741f119f7574a9064b5b0" prefix=" " category="inline-code"></block> 使用SMB卷的FSx for ONTAP需要参数。</block>
  <block id="ef0e40b987d8b9ad523bdde2bba5157a" category="summary">了解使用ONTAP NAS驱动程序配置ONTAP后端的要求、身份验证选项和导出策略。</block>
  <block id="c63609aba869239be30364b58d99b1a3" category="section-title">对ONTAP后端进行身份验证</block>
  <block id="e5fdb627c170dc14e3873b3da32f3aa5" category="paragraph">只需稍作准备、您就可以使用配置SMB卷<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> 驱动程序。</block>
  <block id="8de0a7910b914d44521684fe2a3a28c6" category="paragraph">在配置SMB卷之前、您必须满足以下条件。</block>
  <block id="ff8c6e3b6971ed699a5dc2e00455aa82" category="list-text">对于内部ONTAP、您可以选择创建SMB共享、也可以选择Astra三端存储为您创建一个共享。</block>
  <block id="6a402202521e2168a911181e81c72faf" category="admonition">Amazon FSx for ONTAP需要SMB共享。</block>
  <block id="7f7041fc0ca0e00f3d3e39e4ce4a5149" category="paragraph">您可以使用以下两种方式之一创建SMB管理共享 <block ref="364bc251e9c8cfbf6ce258767d17d682" category="inline-link-macro-rx"></block> 共享文件夹管理单元或使用ONTAP 命令行界面。要使用ONTAP 命令行界面创建SMB共享、请执行以下操作：</block>
  <block id="00aa30f1783ef69183794c0da05e43b5" category="cell"><block ref="5910159ef86741f119f7574a9064b5b0" prefix="" category="inline-code"></block>
您可以指定以下选项之一：使用Microsoft管理控制台或ONTAP命令行界面创建的SMB共享的名称；允许Asta三端到功能创建SMB共享的名称；或者、您可以将参数留空以防止对卷进行通用共享访问。

对于内部ONTAP、此参数是可选的。

此参数对于Amazon FSx for ONTAP后端为必填项、不能为空。</block>
  <block id="a513707a481ff6afe9846fefc6411bca" category="paragraph">Astra Trident应以ONTAP 或SVM管理员身份运行、通常使用<block ref="21232f297a57a5a743894a0e4a801fc3" prefix=" " category="inline-code"></block> 集群用户或<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block> SVM用户或具有相同角色的其他名称的用户。</block>
  <block id="624061180b7b402618e3add29c08bd51" category="paragraph">对于适用于NetApp ONTAP 的Amazon FSX部署、Astra Trident应使用集群以ONTAP 或SVM管理员身份运行<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block> 用户或<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block> SVM用户或具有相同角色的其他名称的用户。。<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block> 用户是集群管理员用户的有限替代用户。</block>
  <block id="7d159230ccaa721872f31bf9be31afeb" category="paragraph">虽然可以在ONTAP中创建一个可以由三端驱动程序使用的限制性更强的角色、但我们不建议这样做。大多数新版本的 Trident 都会调用需要考虑的其他 API ，从而使升级变得困难且容易出错。</block>
  <block id="37a679c38162162811d93d22ba8f5b4a" category="paragraph">了解使用ONTAP SAN驱动程序配置ONTAP后端的要求和身份验证选项。</block>
  <block id="7fbe6e40125b7d1b2f5c5c05044e7526" category="section-title">启用基于证书的身份验证</block>
  <block id="3262251091b863054cfabf046c0e3493" category="paragraph">NFS
SMB</block>
  <block id="7f4a1ee6a22ce0658ba6215c997ba8d8" category="paragraph">""、NFS、SMB</block>
  <block id="e8a058c8c47f6e4976a9fc5b5c00ec92" category="summary">创建一个使用已配置的Kubernetes StorageClass来请求对PV的访问的永久性卷(PV)和永久性卷克莱姆(PVC)。然后、您可以将PV挂载到POD。</block>
  <block id="a3b7bd8edd528214a68ac3ceb5c9935c" category="doc">配置卷</block>
  <block id="5ba2aa62f23a406454c266617a909b2c" category="inline-link-macro">_PersigentVolume_</block>
  <block id="2d63b64b84c821bc810927f7ca7fa993" category="inline-link">_PersigentVolumeClaim_</block>
  <block id="327ef40b7c425ffcbf26478a9722fffd" category="paragraph">答 <block ref="a78bebec6640822542673392ee125821" category="inline-link-macro-rx"></block> (PV)是由集群管理员在Kubbernetes集群上配置的物理存储资源。。<block ref="b1b93f46fc69df9fe663c091f4d6c2b4" category="inline-link-rx"></block> (PVC)是对集群上的永久卷的访问请求。</block>
  <block id="d948cda211eadd3a86a406b43ee0d5fa" category="paragraph">可以将PVC配置为请求特定大小的存储或访问模式。通过使用关联的StorageClass，集群管理员可以控制不限于持续卷大小和访问模式(例如性能或服务级别)。</block>
  <block id="62372f4a99505a189eb1b891ea0c1dc9" category="paragraph">创建PV和PVC后、您可以将卷挂载到Pod中。</block>
  <block id="35e98ba80f6254a33de7a37ab113316e" category="section-title">示例清单</block>
  <block id="3c5f9191f489dbdd8d950bafc3dea6e0" category="example-title">PerfsentVolume示例清单</block>
  <block id="a992ed82e7964281386cdd46c0c21da6" category="paragraph">此示例清单显示了与StorageClass关联的10gi的基本PV<block ref="1c62ceba602064183a6346b85fe26c96" prefix=" " category="inline-code"></block>。</block>
  <block id="79ddefb35e8989bd46983da549591a62" category="example-title">PersentVolumeClaim示例清单</block>
  <block id="cdeec5159e0548de993d76d7d1dcc992" category="paragraph">此示例显示了一个具有读取权限的基本PVC、该PVC与名为的StorageClass关联<block ref="1c62ceba602064183a6346b85fe26c96" prefix=" " category="inline-code"></block>。</block>
  <block id="214059413fbd58acf0b1945104224cf2" category="example-title">POD清单示例</block>
  <block id="bb970cb0639998faceb4ab3a67e3f1e3" category="section-title">创建PV和PVC</block>
  <block id="0305eb03fd924b3f68ccbf10aeced8a6" category="list-text">创建PV。</block>
  <block id="b4acd617ac02334a1b983b6ff960a909" category="list-text">验证PV状态。</block>
  <block id="e1f83bd8f580cc9a48311142d551b3cf" category="list-text">创建 PVC 。</block>
  <block id="150f6f248f009f461b84862124e2b499" category="list-text">验证PVC状态。</block>
  <block id="6a308a8072d1cf8c73629852d7f0b1af" category="list-text">将卷挂载到Pod中。</block>
  <block id="b5450caedb9c7aa352b9fb0427aee784" category="admonition">您可以使用监控进度<block ref="6abdceb61753f298491e021c4da24ddd" prefix=" " category="inline-code"></block>。</block>
  <block id="8118780a1733b73d43c1042889af94bd" category="list-text">验证卷是否已挂载到上<block ref="9f5298598b1aa26f257834220853cb05" prefix=" " category="inline-code"></block>。</block>
  <block id="6604c85c599768bb970b37e590ef79fe" category="list-text">现在、您可以删除Pod。Pod应用程序将不再存在、但卷将保留。</block>
  <block id="03acae9774d9987ad049d0765b795840" category="paragraph">请参见 <block ref="879ce943b486ecaae1c4cb96b01133e9" category="inline-link-macro-rx"></block> 有关存储类如何与交互的详细信息<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block> 和用于控制Asta Trident配置卷的方式的参数。</block>
  <block id="6bd9323e6feca4fbf8b30b626be7920f" category="summary">您可以设计一个Kubnetes StorageClass文件并创建StorageClass、以指示Astra Trident如何配置卷。</block>
  <block id="adb998c877c843080cb8c94f182f8b6a" category="paragraph">配置Kubnetes StorageClass对象并创建存储类、以指示Astra Trident如何配置卷。</block>
  <block id="95d4f411b57eb8201e27fa4636c30816" category="section-title">配置Kubnetes StorageClass对象</block>
  <block id="b8d89cc8455fbb137550c0819b7813c8" category="inline-link">Kubnetes StorageClass对象</block>
  <block id="b92c56f76eb1fd7e747c63e99a829e57" category="paragraph">。<block ref="da3f7f170e13df7f56e057fc4226aa85" category="inline-link-rx"></block> 将Asta Trident标识为该类所使用的配置程序、用于指示Asta Trident如何配置卷。例如：</block>
  <block id="d955a256e02907c43d2afd5bfdb671ea" category="paragraph">创建StorageClass对象后、您可以创建存储类。 <block ref="1310ad9d78b8b659f76828400b5d8126" category="inline-xref-macro-rx"></block> 提供了一些可供您使用或修改的基本示例。</block>
  <block id="a221a060125881c2027807248f8302a2" category="list-text">这是一个Kubbernetes对象、因此请使用<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block> 以在Kubernetes中创建。</block>
  <block id="f31a577daf927c7edc5555c9ceabc983" category="section-title">存储类示例</block>
  <block id="64c314ed1bd24115a72a8a4284115a5c" category="inline-link">适用于特定后端的简单存储类定义</block>
  <block id="cd05956789bea1b8ca185126ede9bfe6" category="paragraph">Asta三项功能<block ref="fdffa1e2d88d340a5703a5f7123df6a4" category="inline-link-rx"></block>。</block>
  <block id="d9ab9b10b2101546e16eeab0b981d10c" category="paragraph">或者、您也可以进行编辑<block ref="9a35c6080acd99f860d0c669b1a980f9" prefix=" " category="inline-code"></block> 安装程序随附的文件、然后进行替换<block ref="9c9a0798e59f3f4d7b08e45faef1e131" prefix=" " category="inline-code"></block> 和存储驱动程序名称。</block>
  <block id="ff87ac5778183437377f5f963a3dccac" category="paragraph">编辑StorageClass定义以设置<block ref="6add71a247c8f4513060920be14857bc" prefix=" " category="inline-code"></block> 字段设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>。</block>
  <block id="efe0663b3e4eed08a4a1b30c3f3a2aac" category="paragraph">编辑PVC定义并更新<block ref="02b011e6fe36e26e5f7365ba08bf5a48" prefix=" " category="inline-code"></block> 以反映新需要的大小、该大小必须大于原始大小。</block>
  <block id="9d384cd22f1c9bc6a23136fe35d2a51c" category="paragraph">将PV连接到POD以调整大小。调整 iSCSI PV 大小时，有两种情况：</block>
  <block id="a22a8450047f7b7aea2c76b348f6ba43" category="summary">您可以查看现有存储类、设置默认存储类、确定存储类后端以及删除存储类。</block>
  <block id="e372af4ebeb99af557aa13609f47f47c" category="admonition">集群中一次只能有一个默认存储类。Kubernetes 在技术上不会阻止您拥有多个存储类，但其行为就像根本没有默认存储类一样。</block>
  <block id="29b91846b4d21394034dc9b0f7414f8e" category="summary">持久卷(PVs)的Kubbernetes卷快照支持卷的时间点副本。您可以为使用Asta Trident创建的卷创建快照、导入在Asta Trident外部创建的快照、从现有快照创建新卷以及从快照恢复卷数据。</block>
  <block id="ab12af74f48620acb3eaeb14535b6d02" category="paragraph">支持卷快照<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>，<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>，<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>，<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>，<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block>，和<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block> 驱动程序。</block>
  <block id="c1ec7161e63fe862aeb30466f8f3f3b8" category="paragraph">要使用快照、您必须具有外部快照控制器和自定义资源定义(CRD)。这是Kubernetes流程编排程序(例如：Kubeadm、GKE、OpenShift)的职责。</block>
  <block id="d0838c5cbd45cca11f4f53eb773d017d" category="paragraph">如果您的Kubernetes分发版不包含快照控制器和CRD、请参见 <block ref="048c22f74eff12037af96b48becdf135" category="inline-xref-macro-rx"></block>。</block>
  <block id="c4f5303a406f47eb87bf815d986165ee" category="section-title">创建卷快照</block>
  <block id="86690b5147c7d6867042b834d17ef28b" category="list-text">创建<block ref="19476662cd814e0aa085eca121de89b8" prefix=" " category="inline-code"></block>。有关详细信息，请参见 <block ref="0ad6a602adca2b32136ef84f7518b131" category="inline-link-macro-rx"></block>。</block>
  <block id="d5677a436c4d202c4475253ae64255b0" category="list-text">。<block ref="e2d45d57c7e2941b65c6ccd64af4223e" prefix=" " category="inline-code"></block> 指向A作用 力三端CSI驱动程序。</block>
  <block id="eea37fbd5872936b77e1e2e8a4af0cea" category="list-text"><block ref="98e7d6463271d7848db255ae6467817a" prefix="" category="inline-code"></block> 可以是<block ref="f2a6c498fb90ee345d997f888fce3b18" prefix=" " category="inline-code"></block> 或<block ref="afece4245269582cb2f1009d4fb52047" prefix=" " category="inline-code"></block>。设置为时<block ref="afece4245269582cb2f1009d4fb52047" prefix=" " category="inline-code"></block>、存储集群上的底层物理快照会保留、即使在使用时也是如此<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block> 对象已删除。</block>
  <block id="0c9cf2ac15a6b5c5324b08e91b840fa4" category="list-text">创建现有PVC的快照。</block>
  <block id="8f72fd9aa081cd83550f8e13086b8967" category="list-text">此示例将为名为的PVC创建卷快照对象<block ref="30520f4f96804df83914260b79f55962" prefix=" " category="inline-code"></block> 快照的名称设置为<block ref="2599ab7993e15386327b6345bc1cc4e1" prefix=" " category="inline-code"></block>。VolumeSnapshot类似于PVC、并与关联<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block> 表示实际快照的对象。</block>
  <block id="4a2834678b378c24001efcc2f1ca5238" category="list-text">您可以确定<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block> 的对象<block ref="2599ab7993e15386327b6345bc1cc4e1" prefix=" " category="inline-code"></block> VolumeSnapshot的说明。。<block ref="25fb031d6a134e0fb5a240d6d4c12b01" prefix=" " category="inline-code"></block> 标识提供此快照的VolumeSnapshotContent对象。。<block ref="a701d928aada0f89c8ad0abc16ccdfcc" prefix=" " category="inline-code"></block> 参数表示快照可用于创建新PVC。</block>
  <block id="a7fab4013a8993c3310ee07c7e101fc1" category="section-title">从卷快照创建PVC</block>
  <block id="698ebb07855a850e7bcbd189f9322e21" category="paragraph">您可以使用<block ref="d9d448f70687a1aa1f12b2f5ddaa4977" prefix=" " category="inline-code"></block> 使用名为的卷快照创建PVC<block ref="38741d2dca753415660b08a54f8ad3a9" prefix=" " category="inline-code"></block> 作为数据源。创建 PVC 后，可以将其附加到 Pod 上，并像使用任何其他 PVC 一样使用。</block>
  <block id="8d9f716dc04d23bb9af0a64fef3bbbd9" category="paragraph">以下示例将使用创建PVC<block ref="2599ab7993e15386327b6345bc1cc4e1" prefix=" " category="inline-code"></block> 作为数据源。</block>
  <block id="c2d480d58505386b1609d69c842aaf44" category="section-title">导入卷快照</block>
  <block id="868f2cc6f424bbd531c3ac4f053a8125" category="inline-link-macro">Kubbernetes预配置快照过程</block>
  <block id="4310796b4ecbee0387355c47d26e79f6" category="paragraph">Asta三项功能支持 <block ref="a3174ff04e144786ca73f65ec9b76f58" category="inline-link-macro-rx"></block> 以使集群管理员能够创建<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block> 并提供在Asta Trident外部创建的快照。</block>
  <block id="1e0e621824f4773df03d972d64c7892c" category="paragraph">要导入卷快照、Asta Trident会使用PV名称和VolumeSnapshotContent标注来查找内部快照、并将其创建的TridentSnapshot CR命名为。</block>
  <block id="861e4c53fb0c4a84065e8b437db9f614" category="admonition">快照必须具有父卷。</block>
  <block id="72aec08b3316c218c1f87677e0a51ed0" category="list-text">*集群管理员：*创建<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block> 引用后端快照。</block>
  <block id="c202fb047149bdb0116d555ea38063d1" category="list-text">。<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block> 标注必须为<block ref="a9a33d21059c79525ad20995b3255379" prefix=" " category="inline-code"></block>。</block>
  <block id="a2d471e4f64ec00dc1822cec2fd5995b" category="list-text">。<block ref="39133e4ee9648ecb1a2dae934a22788a" prefix=" " category="inline-code"></block> 必须为<block ref="6ae97f23de0ab758768fc09b1f363e79" prefix=" " category="inline-code"></block>。这是外部快照程序在中向Asta Trident提供的唯一信息<block ref="b4dfa9524f461a609ad4726f69b847e9" prefix=" " category="inline-code"></block> 致电。</block>
  <block id="bddec5d361b469ba15d203f21980b727" category="paragraph">以下示例将创建<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block> 用于名为的后端快照<block ref="82645407d5a235bd775551b0a8455cd1" prefix=" " category="inline-code"></block> 和<block ref="2348ca4190691eced72fb5d6eeba6ae6" prefix=" " category="inline-code"></block> 已命名<block ref="8da549176ef577547f8791c32a1da91a" prefix=" " category="inline-code"></block>。</block>
  <block id="f2048b2fb4bf379591abc388d9eade66" category="admonition">。<block ref="2348ca4190691eced72fb5d6eeba6ae6" prefix=" " category="inline-code"></block> 由于CR命名限制、名称不能始终与后端快照名称匹配。</block>
  <block id="e3631e30d03158f2ee7f5abe3814ae2c" category="list-text">*集群管理员：*绑定<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block> 到<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block> 其中：<block ref="ac2950be4b8a710dd81ec4c2cff071da" prefix=" " category="inline-code"></block> 是您在中指定的名称<block ref="2348ca4190691eced72fb5d6eeba6ae6" prefix=" " category="inline-code"></block>。</block>
  <block id="60648a03d093f2a24b63474813c14f83" category="paragraph">以下示例将绑定卷快照<block ref="8da549176ef577547f8791c32a1da91a" prefix=" " category="inline-code"></block> 到<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block> 已命名<block ref="5509d2df2b7e97b55de9ac8c06cfc6e1" prefix=" " category="inline-code"></block>。</block>
  <block id="481efebb9fccb590cd87e8ac2f5dec96" category="list-text">*内部处理(不需要执行任何操作)：*外部快照程序会看到新创建的卷快照内容并运行<block ref="b4dfa9524f461a609ad4726f69b847e9" prefix=" " category="inline-code"></block> 致电。Asta三项功能可创建<block ref="9a303ae09fee10afe60e5fd9e00e5e45" prefix=" " category="inline-code"></block>。</block>
  <block id="373ac13882294b603bb64da84dc4fae5" category="list-text">外部快照程序用于设置<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block> to<block ref="bdc3aa73b1bbfc0b0212a8f6a8bb2077" prefix=" " category="inline-code"></block> 和卷快照<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>。</block>
  <block id="f6e6b6f8bbabf2b4d61efaa16f96f7c7" category="list-text">TRIdent返回<block ref="0253f5e864e2646df8eab03ca4f066ee" prefix=" " category="inline-code"></block>。</block>
  <block id="2fae3f8997b56adf73a63fcf9e10a75d" category="list-text">*任何用户:*创建一个<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block> 以引用新的<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block>、其中<block ref="be455c19a1930c91806853db05c277d9" prefix=" " category="inline-code"></block> (或<block ref="43cbd4bd62b601d2f5e0b618220b0f44" prefix=" " category="inline-code"></block>)名称为<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block> 名称。</block>
  <block id="dbb9cfb0687e7c3a92a94550713c8e6d" category="paragraph">以下示例将创建一个引用的PVC<block ref="8da549176ef577547f8791c32a1da91a" prefix=" " category="inline-code"></block> 卷快照。</block>
  <block id="35d57da577b5f55299f7644e8b2de091" category="section-title">删除具有关联快照的PV</block>
  <block id="b1bc7c11251b98a19ba1fc0ad08275ed" category="section-title">部署卷快照控制器</block>
  <block id="785a74cfc0b587326abdc91a50fc4a95" category="paragraph">Asta三叉式存储提供了动态管理ONTAP后端导出策略的功能。这样，存储管理员就可以为工作节点 IP 指定允许的地址空间，而不是手动定义显式规则。它大大简化了导出策略管理；修改导出策略不再需要手动干预存储集群。此外、这有助于将对存储集群的访问限制为仅允许IP位于指定范围内的工作节点访问、从而支持精细的自动化管理。</block>
  <block id="66cbadc48d2dbe3accb93937a8d42d1e" category="paragraph">必须使用两个配置选项。下面是一个后端定义示例：</block>
  <block id="e98bc47811eddcaad07f10623b28d028" category="admonition">使用此功能时、您必须确保SVM中的根接合具有先前创建的导出策略、并具有允许节点CIDR块的导出规则(例如默认导出策略)。始终遵循NetApp建议的最佳实践、为Astra三端存储专用SVM。</block>
  <block id="1042787fd4ac6b51cfd71a9564293ec1" category="cell">使用CHAP对iSCSI进行身份验证。Asta三端到子使用CHAP。</block>
  <block id="16c5a19000fdf77116a42ef5615c4685" category="list-text"><block ref="a52f2fa2f1fec0074848a3750307fb69" prefix="" category="inline-code"></block>：AutoSupport遥测的容器映像(默认为"NetApp/TRIMT autostsupport：&lt;current-version&gt;")。</block>
  <block id="1d1a0da3e4ed6ccf7826b60a0633c618" category="list-text"><block ref="4531ec288530509b32f6f51400c1fddc" prefix="" category="inline-code"></block>：覆盖三端控制器的REST API的HTTP请求超时(默认值为1 m30)。</block>
  <block id="a03c5f2c1a3d118d44bc3e92d52663bb" category="paragraph">Trident还提供<block ref="77167d63af133b47bca3bbacd580fa44" prefix=" " category="inline-code"></block> 和<block ref="58c1c86186ef8de4f6e12d8f3aed8b64" prefix=" " category="inline-code"></block> 用于创建克隆的标注。您可以使用这些标注克隆PVC、而无需使用CSI实施。</block>
  <block id="5f117d85f5b23527c781bb26a4b15109" category="paragraph">。<block ref="75e4a0ceb294a9d74374c938e4e8ddc8" prefix=" " category="inline-code"></block> 目录包含用于Trident的PVC定义示例。请参见 <block ref="62155edb2842dfbdb69802620baa3865" category="inline-xref-macro-rx"></block> 有关与三项技术的卷关联的参数和设置的完整问题描述。</block>
  <block id="6229286496513c532bbb85d111e6228f" category="paragraph">Astra Trident使用<block ref="99bc4b850e05bafd67cf5f5f49344c1e" prefix=" " category="inline-code"></block> 用于保留Trident对象身份的对象、例如Trident后端、Trident存储类和Trident卷。这些对象由 Trident 管理。此外， CSI 卷快照框架还引入了一些定义卷快照所需的 CRD 。</block>
  <block id="5ecf0e8b098b4ea6bc01c794d40a3fbe" category="section-title">Astra Trident<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block> 对象</block>
  <block id="4b9c0a0ad9ce7e75e59f955a526e9367" category="section-title">Asta三端对象</block>
  <block id="1e82ec36f9663b7e8b91dc727ebaa70b" category="section-title">Astra Trident<block ref="5e5d444b688db40e013a7d0b8b3c0898" prefix=" " category="inline-code"></block> 对象</block>
  <block id="5e32849b22982f8931eb5a8a2b334104" category="section-title">Astra Trident<block ref="bd7a9717d29c5ddcab1bc175eda1e298" prefix=" " category="inline-code"></block> 对象</block>
  <block id="4d030713789beb2071b47e51b99ea17f" category="section-title">Astra Trident<block ref="d4e2713d1b1725a1592f9268589f990d" prefix=" " category="inline-code"></block> 对象</block>
  <block id="822293db528ee892466bd05ecce74b14" category="section-title">有关Asta Trdent的重要信息</block>
  <block id="88faa8ac89cdba5b170eddcb5d3c227f" category="list-text">Kubbernetes 1.22 - 1.27.</block>
  <block id="aa919adfeb24335f206c7d14733b5a18" category="list-text">OpenShift 4.10 - 4.10.</block>
  <block id="a5fd2691a6a5df653970895b1c5045ed" category="inline-link-macro">升级Helm安装</block>
  <block id="e94d606eb30ec23b1c90bde5c842bbd7" category="admonition">在将已安装Astra Trident的Kubernetes集群从1.24升级到1.25或更高版本之前、请参见 <block ref="1b428bb9b9fe27db6cd8932526864634" category="inline-link-macro-rx"></block>。</block>
  <block id="bdecef051e32495c339265b13937fdd2" category="list-text">docer.io/NetApp/trdent-autostsupport：23.07</block>
  <block id="9b99c0d216202fb5b3542f33737fc7cd" category="list-text">注册表.k8s.io/sig-storage/CsI-置 配置程序：v3.5.0</block>
  <block id="51c642e645718f28d506b2bf03ecad77" category="list-text">注册表.k8s.io/sig-storage/CsI-Attacher：v4.3.0</block>
  <block id="2b137b6d62621064ff952b61fea42b29" category="list-text">注册表.k8s.io/sig-storage/CsI-s不同：v1.0.0</block>
  <block id="18a8e4619e4059aeaf215a48da7867f9" category="list-text">注册表.k8s.io/sig-storage/CsI-snapshotter：v6.2.2</block>
  <block id="20388ac1d79215adf3bb812d9291e0be" category="list-text">注册表.k8s.io/sig-storage/CsI-N节点 驱动程序注册器：v2.0.0</block>
  <block id="a97fcb333111f781986275ea628fc4da" category="summary">Asta三端存储作为一个控制器Pod和一个节点Pod运行在集群中的每个工作节点上。节点POD必须在任何可能要挂载Astra Trident卷的主机上运行。</block>
  <block id="26ad893be275d6f4dd0e2992250c147f" category="inline-link-macro">Kubernetes CSI Sidecar Containers</block>
  <block id="db4723304a1add25b171bb663d394c84" category="paragraph">Asta三端到功能可作为一个整体部署 <block ref="7f05a5daccc48435b05c14a7b739fa36" category="inline-xref-macro-rx"></block> 以及一个或多个 <block ref="8642ddce0d2b15cad48dfefb369d4c89" category="inline-xref-macro-rx"></block> 在Kubernetes集群上、并使用标准Kubernetes _CSI Sidecar Containers_来简化CSI插件的部署。 <block ref="c1b69fa7e0376b667b144d553d4653a8" category="inline-link-macro-rx"></block> 由Kubbernetes存储社区维护。</block>
  <block id="4d519246037122ee497d936027625f3f" category="paragraph">Kubernetes <block ref="219288b06ade6fd51c16efe605941441" category="inline-link-macro-rx"></block> 和 <block ref="9466cd429d8630101055a8fd14904bd9" category="inline-link-macro-rx"></block> 用于限制Pod在特定节点或首选节点上运行。您可以在Asta三端安装期间为控制器和节点Pod配置节点选择器和容差。</block>
  <block id="fe074a7b5062cf480cd4090c9aa43d35" category="image-title">Asta三端存储部署在Kubbernetes集群上</block>
  <block id="401bff2b74ab332d611440cb096ebd63" category="image-alt">Kubbernetes集群上的Asta三端架构示意图。</block>
  <block id="7457022455b6a26d17766b38200639d9" category="section-title">三项控制器Pod</block>
  <block id="8268d8b8723783972c959e76371dd7df" category="paragraph">三端控制器Pod是一个运行CSI控制器插件的Pod。</block>
  <block id="4d52310e56906c6b51b5691f5aca1a86" category="list-text">负责配置和管理NetApp存储中的卷</block>
  <block id="64ebc3b44b9bf9706d440310d6edc2a9" category="list-text">由Kubbernetes部署管理</block>
  <block id="77dde6100b9c974d6b8f13a2c5a5d91f" category="list-text">可以在控制面板或工作节点上运行、具体取决于安装参数。</block>
  <block id="c8d85d76462b8224e3b823eec9636faa" category="image-title">TRIdent控制器Pod示意图</block>
  <block id="bea45d305fedae15441ab438c3abf9a6" category="image-alt">运行CSI控制器插件并具有适用CSI二进化标准的三进位控制器Pod示意图。</block>
  <block id="7ac36fe121832c95b5cc692aac2d42e9" category="section-title">三级节点块</block>
  <block id="cb5b3335d8639110c33aa74ae67f7ec2" category="paragraph">三端节点块是运行CSI节点插件的有权限的节点。</block>
  <block id="23b09b316e4e6d2ab77e24ae85097f4f" category="list-text">负责挂载和卸载主机上运行的Pos的存储</block>
  <block id="5d6469c46b1f411571e059e13a5fe826" category="list-text">由Kubbernetes DemonSet管理</block>
  <block id="723997cd24cc1452bfa6efd9349f4262" category="list-text">必须在要挂载NetApp存储的任何节点上运行</block>
  <block id="ffc3cbdd80c8b7dee840511d7c7b2cce" category="image-title">TRIdent节点Pod图</block>
  <block id="8f29ef239c0926132689374fc142a732" category="image-alt">运行CSI节点插件并具有适用CSI二进化标准的三进位节点Pod示意图。</block>
  <block id="f7061d58754c5b931160c3682d0a1990" category="summary">Astra Trident 是一个受全面支持的开源项目，由 NetApp 作为 Astra 产品系列的一部分进行维护。它旨在帮助您使用容器存储接口(CSI)等行业标准接口满足容器化应用程序的持久性需求。</block>
  <block id="7a19c007a4b226b38d5083e75e0b81c5" category="paragraph">Asta三端存储是一个完全受支持的开放源代码项目、由NetApp作为的一部分维护 <block ref="a1650a2308dbba03b9ca704756a5a37d" category="inline-link-macro-rx"></block>。它旨在帮助您使用容器存储接口(CSI)等行业标准接口满足容器化应用程序的持久性需求。</block>
  <block id="d53515658d4ee6f86fc8c7bc0c6158a7" category="paragraph">借助 Astra ，企业可以更轻松地在公有云内部和内部环境中管理，保护和移动 Kubernetes 上运行的数据丰富的容器化工作负载。</block>
  <block id="82cf01b889b2b07b25693168b674d1fa" category="paragraph">Asta配置并提供基于Asta Trandent构建的永久性容器存储。此外、它还提供高级应用程序感知型数据管理功能、例如快照、备份和还原、活动日志和主动克隆、用于数据保护、灾难/数据恢复、数据审核以及Kubbernetes工作负载的迁移用例。</block>
  <block id="c2537fa0108c78965a232ce91e201649" category="inline-link-macro">Astra或注册获取免费试用版</block>
  <block id="50034647010e013c2ef85849d6596455" category="paragraph">了解更多信息 <block ref="e3ab0bc094b5f5922b36a8f82419e175" category="inline-link-macro-rx"></block>。</block>
  <block id="67d2496668f52509ed9b31321ed0ad92" category="section-title">什么是Astra Trdent？</block>
  <block id="2ef4899233dc95a6c5d56a5803e8707f" category="paragraph">Asta Trident支持在公有云或内部环境中的所有常见NetApp存储平台上使用和管理存储资源、包括ONTAP (AFF、FAS、Select、云、 Amazon FSx for NetApp ONTAP)、Element软件(NetApp HCI、SolidFire)、Azure NetApp Files服务以及Google Cloud上的Cloud Volumes Service。</block>
  <block id="c91b2e44f4ff3aa5f18de409969c58ba" category="paragraph">Asta Dent是一款与本机集成的符合容器存储接口(CSI)的动态存储编排程序 <block ref="c4f47b2d4c7b6c009c3ed9bc1f952dce" category="inline-link-macro-rx"></block>。Asta三端存储作为一个控制器Pod和一个节点Pod运行在集群中的每个工作节点上。请参见 <block ref="d9cc95c35405d0ba55bb1c80379b860b" category="inline-link-macro-rx"></block> 了解详细信息。</block>
  <block id="f4cab711a5db26c5dec21e0173f62fd7" category="paragraph">Asta Trident还可以直接与适用于NetApp存储平台的Docker生态系统集成。NetApp Docker卷插件(nDVP)支持从存储平台到Docker主机配置和管理存储资源。请参见 <block ref="bd99603bf838e5d30758870d40588f8e" category="inline-link-macro-rx"></block> 了解详细信息。</block>
  <block id="58095fffdb6c13585af5e47e876f7afe" category="inline-link-macro">Kubbernetes概念和工具</block>
  <block id="1bc6462cd59612636c72620a6a67410b" category="admonition">如果这是您首次使用Kubarnetes、您应熟悉 <block ref="41eecc10f74d492dbf2a2c207d5acb1b" category="inline-link-macro-rx"></block>。</block>
  <block id="b513091c9ef80c504ca4004f0f33cee7" category="section-title">试用Asta Trident</block>
  <block id="67d2e4eb35b7300690ac2b14677e2fad" category="paragraph">要进行试用、请请求访问"为容器化工作负载轻松部署和克隆永久性存储" <block ref="eb9c34df0ed196dd801ef85207c8bf2c" category="inline-link-macro-rx"></block> 使用随时可用的实验室映像。此试用版提供了一个沙盒环境、其中安装并配置了三节点Kubbernetes集群和Asta Trident。这是熟悉Astra Trandent并了解其功能的绝佳方式。</block>
  <block id="3ff64d30b8ccd0f89740b2ba54cf8bf3" category="paragraph">另一个选项是 <block ref="c7dbb75618a5e106a360075f923cb87f" category="inline-link-macro-rx"></block> 由 Kubernetes 提供。</block>
  <block id="80f4cfbe493e12651c3514c9481ce1ee" category="admonition">请勿在生产环境中使用按照以下说明构建的Kubennet集群。请使用您的分销商提供的生产部署指南来了解生产就绪集群。</block>
  <block id="46e28df17b257e6671b042b98bd37787" category="list-text"><block ref="46e28df17b257e6671b042b98bd37787" category="inline-link-rx"></block></block>
  <block id="fac0082fb8411565f3d5cb3788a17b17" category="doc">Astra三端快速入门</block>
  <block id="4b7a06bf8d901036491a46c6f14175e3" category="paragraph">您可以通过几个步骤安装Asta Trandent并开始管理存储资源。开始之前、请查看 <block ref="a7c0f3baef818cf2a5323d10b9f5ac94" category="inline-link-macro-rx"></block>。</block>
  <block id="9a052cea99f186c7d930a0041b20a79b" category="admonition">对于Docker、请参见 <block ref="934c01af2efea144da6665bf428d8f6d" category="inline-link-macro-rx"></block>。</block>
  <block id="b0434693308513b990bcffe2314d6fb5" category="paragraph-title"><block ref="58f667aaf05f87159670e12bd9bc076b" category="inline-image-macro-rx" type="image"></block> 安装 Astra Trident</block>
  <block id="c8fce1b550592f1b2285ab7a61547927" category="paragraph">Asta三端设计提供了多种针对各种环境和组织进行了优化的安装方法和模式。</block>
  <block id="f15ffbfcd0e5a0ad91ac171f83121ff4" category="paragraph"><block ref="f15ffbfcd0e5a0ad91ac171f83121ff4" category="inline-link-macro-rx"></block></block>
  <block id="2d15dd50ddfe5e28746975645a5652ca" category="paragraph-title"><block ref="54f425ce8d89f4ed6b8a546561af5d60" category="inline-image-macro-rx" type="image"></block> 准备工作节点</block>
  <block id="aba4bc9d3bde7d18b07c23d5c7d0f495" category="paragraph">Kubernetes集群中的所有工作节点都必须能够挂载为Pod配置的卷。</block>
  <block id="f3b066024fd8e2699d194d41d5e46a5d" category="paragraph-title"><block ref="05b2444faffd66d76e88602ea7dd353f" category="inline-image-macro-rx" type="image"></block> 创建后端</block>
  <block id="2865195658f1488af43d46690ad5826e" category="inline-link-macro">配置后端</block>
  <block id="079428cf070b5e0039780f2cb4a5a962" category="paragraph"><block ref="8be76aeedec602130bcedf5acbf56030" category="inline-link-macro-rx"></block> 存储系统</block>
  <block id="eda4708b025e26e5f9759856f4f88876" category="paragraph-title"><block ref="beadfa85a2fdca06b91edc1131c603e6" category="inline-image-macro-rx" type="image"></block> 创建Kubbernetes存储类</block>
  <block id="24740ec53fb04d2caca5671a9e9f554f" category="paragraph">Kubbernetes StorageClass对象指定Astra tandent作为配置程序、并允许您创建存储类以配置具有可自定义属性的卷。Asta Trdent会为指定Asta Trdent配置程序的Kubbernetes对象创建匹配的存储类。</block>
  <block id="abf99adee0d47955ab8c148a0937ce6e" category="paragraph"><block ref="abf99adee0d47955ab8c148a0937ce6e" category="inline-link-macro-rx"></block></block>
  <block id="e5d9de39f7ca1ba2637e5640af3ae8aa" category="inline-image-macro">五个</block>
  <block id="b625988ee18e5f1370f9b328cfa197b7" category="paragraph-title"><block ref="99e8b2f00e172bfcff96afdce69907bc" category="inline-image-macro-rx" type="image"></block> 配置卷</block>
  <block id="185cde3c1e3ef64c59eaee8662d4048a" category="paragraph">永久性卷(PV)是由集群管理员在Kubernetes集群上配置的物理存储资源。_PersentVolumeClaim_(PVC)是对集群上的PersentVolume的访问请求。</block>
  <block id="7646000ea978570e919e657f5ec9aa57" category="paragraph"><block ref="7646000ea978570e919e657f5ec9aa57" category="inline-link-macro-rx"></block></block>
  <block id="abefc87b0c4c459aa6fdb12d98caf984" category="paragraph">现在、您可以添加其他后端、管理存储类、管理后端以及执行卷操作。</block>
  <block id="fcf85cd17f22ed47dfe9169453e44dc1" category="paragraph">虽然Asta三端存储会将新卷与配置的访问组关联起来、但它不会自行创建或管理访问组。在将存储后端添加到Asta Trident之前、访问组必须存在、并且它们需要包含Kubenetes集群中可能会挂载该后端配置的卷的每个节点的iSCSI IQN。在大多数安装中，包括集群中的每个工作节点。</block>
  <block id="ca3c25915a30bef4ec583f6082477acf" category="paragraph">如果要从使用默认值的配置修改配置<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block> 访问组到也使用其他的访问组、并包括的ID<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block> 列表中的访问组。</block>
  <block id="88e4f10ca85b56deb88df953f1b028c9" category="admonition">如果您使用Astra Control进行保护、恢复和移动、请阅读 <block ref="655b383e69b0d2ae89ad0b4bf7e37964" category="inline-xref-macro-rx"></block>。</block>
  <block id="5e5ae25254f91097d911b58f235c0657" category="admonition">可以使用安全角色的登录凭据(用户名/密码)或专用密钥以及ONTAP集群上安装的证书对ONTAP后端进行身份验证。您可以使用更新现有后端以从一种身份验证模式移至另一种身份验证模式<block ref="defd1e55f93269ac9278afc086951ba8" prefix=" " category="inline-code"></block>。</block>
  <block id="c6891a9678e67fff611982bdd3dc5a4d" category="section-title">Astra Control驱动程序兼容性</block>
  <block id="b2edeceecc054572188ee3b08cd58c64" category="list-text">放置二进制文件并创建配置文件后、使用所需的配置文件启动三叉进制守护进程。</block>
  <block id="ed79382c003eb221606454bd2116c86f" category="summary">Astra Trident 是由 NetApp 维护的开源存储配置程序和流程编排程序。通过它，您可以为 Docker 和 Kubernetes 管理的容器化应用程序创建存储卷。**阅读发行说明，了解有关升级到Asta Trdent 23.07的重要信息。**</block>
  <block id="19b14d01c950971a7d832e9a179ba005" category="doc">Astra Trdent 23.07文档</block>
  <block id="b4f83b03956523a39e8bbbd0895f0f29" category="inline-link-macro">Cloud Insights</block>
  <block id="46792977f68671d8fa16e6cf46018cf1" category="paragraph">是的。Prometheus端点、可用于收集有关Asta Trident操作的信息、例如托管的后端数、配置的卷数、已用字节数等。您也可以使用 <block ref="7a2477b8055ecdaa4bd473b0556bcb2a" category="inline-link-macro-rx"></block> 用于监控和分析。</block>
  <block id="8bcc65cd81ef7ffed875ca40674efa09" category="paragraph">是的。Astra三叉型支持ONTAP后端的双向CHAP。这需要设置<block ref="68978ccf4ed83900c8dd27558ca5ec18" prefix=" " category="inline-code"></block> 在后端配置中。</block>
  <block id="10318a43fca1fe376b7af5445f41fec8" category="paragraph">Astra Trident 可以从 20.04 版开始动态创建和管理导出策略。这样，存储管理员便可在其后端配置中提供一个或多个 CIDR 块，并使 Trident 将属于这些范围的节点 IP 添加到其创建的导出策略中。通过这种方式， Astra Trident 会自动管理为给定 CIDR 中具有 IP 的节点添加和删除规则的操作。</block>
  <block id="63bfc0691d397470e5b0b05f2a9bcbe4" category="inline-link-macro">问题描述740</block>
  <block id="c8af8b49eb3be9ce411280db66de8a12" category="list-text">修复了通过升级三项功能忽略处于终止状态的旧Pod的问题(<block ref="6f993c83118cc4a1dd5351c8501e26c9" category="inline-link-macro-rx"></block>）。</block>
  <block id="cf182305f6f941fa317842399de1ca4a" category="inline-link-macro">问题描述#C了</block>
  <block id="4f2f189f428da83c5c5d7e21123fb37a" category="list-text">为"瞬 时-三端版本-POD "定义添加了容差(<block ref="cc0c8d3c31e9e289114ade0ef394e90b" category="inline-link-macro-rx"></block>）。</block>
  <block id="0fc3850c9a9a5c53529bc5bfadf0cd58" category="list-text">修复了ONTAP ZAPI请求、以确保在节点暂存操作期间获取LUN属性以识别和修复虚影iSCSI设备时查询LUN序列号。</block>
  <block id="d5d58a85f5f4a2ac889804742dd7cbb0" category="inline-link-macro">问题描述#816</block>
  <block id="057a4c7c1e2ca8cd3deafe12ee9f2083" category="list-text">修复了存储驱动程序代码(<block ref="9862a2577d865ba18fdd2c972f46545b" category="inline-link-macro-rx"></block>）。</block>
  <block id="97327b29ec21422eaecf8ba479782331" category="list-text">固定了使用ONTAP驱动程序和use-rest=true时的配额大小调整。</block>
  <block id="4e6566ec95776d26fcd04a8b88c3e2bc" category="list-text">修复了在ONTAP SAN经济模式下创建LUN克隆的问题。</block>
  <block id="dcfc8521cd4d3b29941e756366e00988" category="list-text">从还原发布信息字段<block ref="380d41b2be72ecdeb109d9d8bf377a97" prefix=" " category="inline-code"></block> to<block ref="cad41ea6c72f7b62b784d199bdd6ec73" prefix=" " category="inline-code"></block>；添加了用于填充和恢复的逻辑(在某些情况下)<block ref="cad41ea6c72f7b62b784d199bdd6ec73" prefix=" " category="inline-code"></block> 字段。</block>
  <block id="4f2d668b01cf06eca683c287dd7e5082" category="list-text">增加了对导入预配置快照的支持。</block>
  <block id="c47a181e80e553128675166326adecf7" category="inline-link-macro">问题描述#十十一号</block>
  <block id="5f595b574bc00c971991f9f665431b60" category="list-text">最小化部署和守护进程Linux权限(<block ref="aef28cf398bf45d3657483afbc3d3240" category="inline-link-macro-rx"></block>）。</block>
  <block id="62dcabbe3f6dc07f213482f5acada256" category="list-text">不再报告"联机"卷和快照的状态字段。</block>
  <block id="4ff2bb4ecc0b6d51be0477f9d63d5273" category="inline-link-macro">问题801</block>
  <block id="9fde208cd399f14480a57fc99b20d291" category="inline-link-macro">#543.</block>
  <block id="0696447eb82cdf62dcb8b6c916f35746" category="list-text">如果ONTAP后端处于脱机状态(<block ref="961e04dd6eabff35abb325a6607994ca" category="inline-link-macro-rx"></block>， <block ref="fc57c79b0b6691b508ed06011d9f5581" category="inline-link-macro-rx"></block>）。</block>
  <block id="277ca88d500a9627118781ff85088e70" category="list-text">LUN序列号始终在ControllerVolumePubl出版 工作流期间进行检索和发布。</block>
  <block id="810ba7b767989fc4c733ae7e9e3460cd" category="list-text">添加了其他逻辑来验证iSCSI多路径设备序列号和大小。</block>
  <block id="76ba5d25ded4cc29f1dbfeb16ad652f4" category="list-text">对iSCSI卷进行额外验证、以确保取消暂存正确的多路径设备。</block>
  <block id="3f46c22d346dcb4ef51b664a9e105030" category="section-title">试验性增强</block>
  <block id="866a2a7036f4701ef7fe25f161516e81" category="paragraph">为ONTAP SAN驱动程序添加了基于TCP的NVMe技术预览支持。</block>
  <block id="8e2ae59abc43c08fd49c55abd4da0925" category="paragraph">在组织和格式方面进行了许多改进。</block>
  <block id="fbfae4e9fcac672dd7f5304651cd7713" category="list-text">不再支持v1beta1快照。</block>
  <block id="662d0c4b0dab9a3aa7e86162000ad383" category="list-text">不再支持CSI之前的卷和存储类。</block>
  <block id="8c20e8f4703bb12917ce6ae87f5c65a1" category="list-text">已将支持的最小Kubbernetes更新为1.22。</block>
  <block id="30e50aa1d9f8718f34cb0ecbef4ec9ea" category="section-title">23.04年度的变动</block>
  <block id="bd669abfdc05714a67725374ec8795ed" category="paragraph">NetApp 建议部署双向 CHAP ，以确保主机与 NetApp HCI 和 SolidFire 后端之间的身份验证。Astra Trident 使用一个机密对象，每个租户包含两个 CHAP 密码。安装Astra三端存储时、它会管理CHAP密码并将其存储在中<block ref="3ddc70b4b408f6dd5bbd5fe7d6008993" prefix=" " category="inline-code"></block> 相应PV的CR对象。创建PV时、Asta三端技术人员会使用CHAP密码启动iSCSI会话、并通过CHAP与NetApp HCI和SolidFire系统进行通信。</block>
  <block id="da644f9e3f33b9b8b1a75f2b066fc084" category="admonition">Asta三端存储创建的卷不与任何卷访问组关联。</block>
  <block id="2ae7281d275fb0db889e8ad073e94629" category="paragraph">您可以在后端定义中指定 CHAP 启动程序以及目标用户名和密码，并在 SVM 上启用 Trident CHAP 。使用<block ref="099cb468880f266cba40b49391fa46bc" prefix=" " category="inline-code"></block> 参数在后端配置中、Trident使用CHAP对ONTAP 后端的iSCSI连接进行身份验证。</block>
  <block id="8f971d8f40dd91f1f3041a0d7faf5f85" category="paragraph">您应确保每个后端都有一个导出策略，该策略仅允许访问 Kubernetes 集群中的节点。｛\f270可以自动创建和管理导出策略｝｛\f151。｝通过这种方式， Trident 会限制对其配置给 Kubernetes 集群中节点的卷的访问，并简化节点的添加 / 删除。</block>
  <block id="6266c7eef6928dbebcb2fa1abb611959" category="verse-content-simple">上述表格的脚注：
是脚注：1[]：不由Astra Trident管理
是脚注：2[]：由Astra Trident管理，但不是PV粒度
是脚注：3[]：不由Astra Trident管理，也不是PV粒度
是脚注：4[]：支持原始块卷
是脚注：5[]：由Astra三端提供支持</block>
  <block id="1c62ad76355c68d0de5faf475ab1861e" category="inline-link-macro">Astra三端支持生命周期</block>
  <block id="039b1be5cbe744fb8a84aa3fb3f1e4e0" category="paragraph">如果您未运行Asta Trident 23.07、则可通过获取先前版本的文档 <block ref="6e1ac221c7aa10f6bb30cbfd51cb3204" category="inline-link-macro-rx"></block>。</block>
  <block id="35e136dc2ee53639294dbf7dbadf4436" category="inline-link">Astra三排版23.04</block>
  <block id="b409a213a2362e60968efbd1c87c6713" category="list-text"><block ref="b409a213a2362e60968efbd1c87c6713" category="inline-link-rx"></block></block>
  <block id="727d2d1e15a5c7260e90c50b1c250a4c" category="inline-link">Asta三端到端20.10</block>
  <block id="568faefb90021c668cb5de911e54d468" category="list-text"><block ref="568faefb90021c668cb5de911e54d468" category="inline-link-rx"></block></block>
  <block id="52009bb7ee17227f566cd26a02caee56" category="inline-link-macro"><block ref="52009bb7ee17227f566cd26a02caee56" category="inline-link-rx"></block></block>
  <block id="a1a9afcf552a769c282769271829889a" category="paragraph"><block ref="a1a9afcf552a769c282769271829889a" category="inline-link-macro-rx"></block></block>
  <block id="f99aa604031e5049799e73b5c3748a98" category="inline-link-macro"><block ref="f99aa604031e5049799e73b5c3748a98" category="inline-link-rx"></block></block>
  <block id="5d545fe5152641e2ebe654e336e520e5" category="paragraph"><block ref="5d545fe5152641e2ebe654e336e520e5" category="inline-link-macro-rx"></block></block>
  <block id="88e5eabd3917048b6927c42496b98f86" category="inline-link-macro"><block ref="88e5eabd3917048b6927c42496b98f86" category="inline-link-rx"></block></block>
  <block id="dd38f906b37d412de7d1c1dcf4cbf31c" category="paragraph"><block ref="dd38f906b37d412de7d1c1dcf4cbf31c" category="inline-link-macro-rx"></block></block>
  <block id="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-macro"><block ref="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-rx"></block></block>
  <block id="2352c4e1f4d0024ade0869e00e6243f4" category="paragraph"><block ref="2352c4e1f4d0024ade0869e00e6243f4" category="inline-link-macro-rx"></block></block>
  <block id="1b42faf3fa3bff2aa6908b45f8fa32d3" category="section-title">有关Asta Trdent 23.07的重要信息</block>
  <block id="7b0d9f7412b27b7678fe3c1e9ecd655d" category="example-title">&lt;strong&gt;帐户&lt;/strong&gt;</block>
  <block id="1e208b01b50ff4accf1a23f62c0926e1" category="paragraph">集群范围的三端修复操作符可在集群级别管理与Astra三端修复安装关联的资源。这可减少使用命名空间范围的操作符维护集群范围的资源时可能导致的错误。这对于自我修复和修补至关重要。</block>
  <block id="33ab2c3f94452baf7f17dab03982edfb" category="paragraph">之后<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 更新后、操作员将处理更新并修补现有安装。这可能会触发创建新Pod以相应地修改安装。</block>
  <block id="ac0482b416d6b2d907db760f79e018a7" category="example-title">&lt;strong&gt; Clean重新安装&lt;/strong&gt;</block>
  <block id="ae2cbb250a37c9e09570ff02857e4cbe" category="paragraph">通过集群范围的三端技术参数操作符、可以完全删除集群范围的资源。用户可以完全卸载Astra tandent并轻松重新安装。</block>
  <block id="8e2504f56599a577cd2bbee322a41d4e" category="paragraph">Astra Trident 遵循季度发布节奏，每个日历年提供四个主要版本。每个新版本都是在先前版本的基础上构建的、并提供了新功能、性能增强功能、错误修复和改进。我们建议您每年至少升级一次、以利用Astra Trident中的新功能。</block>
  <block id="4aa39142850a8999e9a4e9350f8bfbe9" category="list-text">Asta Trident 23.07及更高版本需要v1卷快照、不再支持Alpha或Beta快照。</block>
  <block id="34c1edfb4ac8581528c3791be680aeb3" category="inline-link-macro">CVS 服务类型</block>
  <block id="5797c3891863b81173e1bb10d6488a72" category="inline-link-macro">CVS服务类型示例</block>
  <block id="7993b54bc115df4675f3a823c4f0a34b" category="list-text">如果您在中创建了适用于Google Cloud的Cloud Volumes Service <block ref="f85eaeb5fc440d0981667ac30b117af7" category="inline-link-macro-rx"></block>，则必须更新后端配置才能使用<block ref="317ec56a799e879712bbd2d0fcbd3b93" prefix=" " category="inline-code"></block> 或<block ref="75b65576cc4a19f0836b73610ad5957a" prefix=" " category="inline-code"></block> 从Asta Trdent 23.01升级时的服务级别。无法更新<block ref="f1d0ae63f2e948a9e43dcc60303d595d" prefix=" " category="inline-code"></block> 在后端、发生原因卷可能会出现故障。请参见 <block ref="83a0df2fb9a604879fdb2fab6c5f77c1" category="inline-link-macro-rx"></block> 了解详细信息。</block>
  <block id="6429305365094c29848a93a6d17a7f53" category="list-text">https://github.com/NetApp/trident/tree/master/trident-installer/sample-input[sample输入^]目录包含https://github.com/NetApp/trident/blob/master/trident-installer/sample-input/storage-class-samples/storage-class-basic.yaml.templ等示例<block ref="9abb8c7777ddb413820ee07d5d93aa4a" prefix="[" category="inline-code"></block>^)和链接：https://github.com/NetApp/trident/blob/master/trident-installer/sample-input/storage-class-samples/storage-class-bronze-default.yaml<block ref="69ae2d9a6d831af7488e53fec053b77e" prefix="[" category="inline-code"></block>^。</block>
  <block id="bd13b44dd39ca58b0cf89a17d8a43f0e" category="list-text">有关详细信息，请参见 <block ref="04cf7258a315ca08f4b436c194fef69d" category="inline-link-macro-rx"></block>。</block>
  <block id="48ac462ded5eb0988ed401f7da378102" category="list-text">您可以直接升级到已安装版本的四个版本窗口中的任何目标版本。例如、您可以直接从22.07 (或任何22.07 DOT版本)升级到23.07。</block>
  <block id="2251733916a92fc0c61d943165128928" category="inline-link-macro">早期版本</block>
  <block id="d72c4dbe3a7bcd15dfb605aa584d9e06" category="list-text">如果要从四个版本窗口之外的版本进行升级、请执行多步骤升级。按照的升级说明进行操作 <block ref="a799aa6eaf3a5192b34ea19f24bb716f" category="inline-link-macro-rx"></block> 您正在从升级到适合四个版本窗口的最新版本。例如、如果您运行的是21.07、并希望升级到23.07：</block>
  <block id="8d5724ba65902bcd4a2074b550d98e02" category="list-text">首次从21.07升级到22.07。</block>
  <block id="f2576433ea639d3237f635a8f173e34c" category="list-text">然后从22.07升级到23.07。</block>
  <block id="7bd3bf704987c7c25848acd94f0e499d" category="list-text">使用 ...<block ref="8dd3e3fab389d3d56b4dbea697d52e91" prefix=" " category="inline-code"></block> 检查Pod。</block>
  <block id="ae0da380d74bf3d71ac89124c088358a" category="paragraph">通常、您应使用与初始安装相同的方法进行升级、但您可以这样做 <block ref="e34c010032791417159012a5e31d7540" category="inline-link-macro-rx"></block>。升级Astra Trident有两种选择。</block>
  <block id="672218727121432fb7209f42c6a00514" category="list-text"><block ref="672218727121432fb7209f42c6a00514" category="inline-link-macro-rx"></block></block>
  <block id="a81c3a8630da0b8548245caae368a3c2" category="inline-link-macro">了解操作员升级工作流</block>
  <block id="14d76a1fc05dcace5308e48b3d9bad49" category="admonition">我们建议您查看 <block ref="4185c20447fb5f0bb4f33698bfd20d27" category="inline-link-macro-rx"></block> 在使用操作员进行升级之前。</block>
  <block id="a18aa1b83c1605570c9c2911c5180a7b" category="inline-link-macro">升级&lt;block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category='inline-code'/&gt;</block>
  <block id="3b2fa532fe7cebc94d245316f8af8ab4" category="list-text"><block ref="fd3f4a100d968c915adb11c8797ef5d2" category="inline-link-macro-rx"></block></block>
  <block id="3d40f2a5a694e68fd88105fc4f5ee0d4" category="section-title">TRIdent操作员升级处理</block>
  <block id="74e51c48d68796e06830c062f5c955c1" category="inline-link-macro">使用啮合式操作员的优势</block>
  <block id="1a1508da73374db3dd227799f48fdf63" category="list-text">删除并重新创建三级控制器部署和节点DemonSet。</block>
  <block id="88b9e59609789e4bf00d72c8be9dd376" category="list-text">使用新版本更换TRIDent控制器Pod和TRIDent节点Pod。</block>
  <block id="6d3156de6583a452ead75c70c186fcb8" category="list-text">如果节点未更新、则不会阻止更新其余节点。</block>
  <block id="e232b75d1eb891caededece68ccba4bd" category="list-text">只有运行了三项节点Pod的节点才能挂载卷。</block>
  <block id="74a95a8eea4566dad9e480f5e1defb1e" category="admonition">有关Kubbernetes集群上Asta三端架构的详细信息、请参阅 <block ref="3663c9ca295bfa48935631bb67d2ba2e" category="inline-link-macro-rx"></block>。</block>
  <block id="672bc0defc3e808ff4066a5bb35984ff" category="section-title">操作员升级工作流</block>
  <block id="09fca30aacc5af8d0afe600848776412" category="paragraph">使用三端修复操作符启动升级时：</block>
  <block id="de1c3bc7b6551ded8e26b3c59f25fd6a" category="list-text">三端运算符*：</block>
  <block id="58f8d33affdc8b1877db3f889be3b246" category="list-text">检测当前安装的Asta Trendent版本(版本_n_)。</block>
  <block id="95c09f4a69ddcda8ea23efaa0892e31f" category="list-text">更新所有Kubnetes对象、包括CRD、RBAC和三项服务。</block>
  <block id="fa5496466c33ad47156dabe9b4b7a83d" category="list-text">删除版本为_n_的TRIdent控制器部署。</block>
  <block id="de4c5e6acc990d98e3ed3412db367a33" category="list-text">创建版本为_n+1_的三项控制器部署。</block>
  <block id="55a86ba64e45e0262aa7012299b6e1a5" category="list-text">*Kubernetes*为_n+1_创建了三项控制器Pod。</block>
  <block id="9fcab903d35527e73aa8c9b8d55e4f02" category="list-text">删除_n_的三项目标节点演示集。操作员不会等待节点Pod终止。</block>
  <block id="a532235f4c82e61844620f45083fb82c" category="list-text">为_n+1_创建三项目标节点演示。</block>
  <block id="5075af00f3f40cf13822f5863cc71c39" category="list-text">*Kubernetes*会在未运行三端节点Pod _n_的节点上创建三端节点Pod。这样可以确保一个节点上的任何版本的三端存储节点Pod不会超过一个。</block>
  <block id="8a384610e551264beec3d337869d4c07" category="summary">您应使用与安装Asta三端安装相同的方法卸载Asta三端安装。如果您需要修复在升级、依赖关系问题或升级失败或不完整后发现的错误、则应卸载Astra三端存储、然后按照该版本的特定说明重新安装早期版本。</block>
  <block id="801bbd95fd335db15888ddc405e164f2" category="paragraph">您应使用与安装Asta三端安装相同的方法卸载Asta三端安装。</block>
  <block id="d4cb2483966fc1e61b1cddfccb87aada" category="admonition">如果您需要修复在升级、依赖关系问题或升级失败或不完整后发现的错误、则应卸载Asta Trendent、然后按照相应的特定说明重新安装早期版本 <block ref="e168bf6cc8da3b05fae6b22bcd12ba37" category="inline-link-macro-rx"></block>。这是将_降 级_降级到早期版本的唯一建议方法。</block>
  <block id="9558f7d0f1d8a03299b4e8190dc99a73" category="paragraph">如果要停用Kubnetes集群、则必须在卸载之前删除使用ASRA三端存储创建的卷的所有应用程序。这样可以确保在删除之前、在Kubbernetes节点上未取消对这些PVC的审核。</block>
  <block id="298619534d23da6e9389fd113bb13495" category="section-title">确定原始安装方法</block>
  <block id="d2848b9aec61d145beb9e29296f14e43" category="paragraph">您应使用与安装Asta Trdent相同的方法来卸载它。卸载之前、请验证最初安装Asta Trdent时使用的版本。</block>
  <block id="426346b94737adca6c2d979d911464ef" category="section-title">卸载TRIdent操作员安装</block>
  <block id="253ead25988bfe2dee06d2227693e39d" category="paragraph">您可以手动卸载或使用Helm卸载TRYDent操作员安装。</block>
  <block id="2985edaba812b8b31d08cc8513fee0a3" category="section-title">卸载手动安装</block>
  <block id="932d8e226d5e26c888990ae2e734feb8" category="list-text">*编辑<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 要设置卸载标志：*您可以编辑<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 并设置<block ref="f41a95848a012f4f1a6550ce79c588aa" prefix=" " category="inline-code"></block>。</block>
  <block id="d7348a31cc49a1353d8a060756d323e4" category="list-text">编辑<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> CR并设置<block ref="fe98497efedbe156ecc4b953aea77e07" prefix=" " category="inline-code"></block> 标记如下所示：</block>
  <block id="55f6e2744208ccefe34f3e05ced2c988" category="section-title">卸载Helm安装</block>
  <block id="99dec4df69ba043a5eb3118e1e0b364e" category="section-title">卸载<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 安装</block>
  <block id="7a15e63f1d0efc213151254bbc1b2d0d" category="doc">升级TRIdent操作员安装</block>
  <block id="0f443eb922735ce52f2b490ffca00e49" category="paragraph">您可以使用三端操作员手动或使用Helm升级A作用 于三端的Astra。您可以从一个TRIdent操作员安装升级到另一个TRIdent操作员安装或从升级<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 安装到一个TRIdent操作员版本。请查看 <block ref="5cffa5fbe758cc3901f0e33c78b29d1b" category="inline-link-macro-rx"></block> 升级三端修复程序安装之前。</block>
  <block id="3ef75911ec16a9d0ba70cfd4e68dcb71" category="section-title">升级手动安装</block>
  <block id="5ed69ef07355e375ad2d6619b584ffe9" category="paragraph">您可以将从集群范围的三端操作员安装升级到另一个集群范围的三端操作员安装。所有Astra Trident 21.01及更高版本均使用集群范围的运算符。</block>
  <block id="b0e74afe1fdeb605b5c47b501c43b71b" category="inline-link-macro">您安装的版本</block>
  <block id="4642420c93e6091ce8421e89a16fd80d" category="admonition">要从使用命名空间范围的运算符(版本20.07到20.10)安装的Asta三端技术升级、请按照的升级说明进行操作 <block ref="567dd1ff029f25a404a69ff1e3c8d83b" category="inline-link-macro-rx"></block> 的Astra三端。</block>
  <block id="eb7a4fa3d9aff7ec5b23abb8b82d516b" category="paragraph">｛\f270通过｝｛\f270｛\f151、｝｛\f270｝｛\f270｝｛\f151、｝｛\f270｝｛\f270｝｛\f151、｝｛\f270通过｝｛\f151、｝｛\f270｝｛\f270｝｛\f151、｝｛\f270｝</block>
  <block id="0832423fdef6d1073376febeafb11832" category="list-text">对于运行Kubornetes 1.24或更早版本的集群、请使用 <block ref="8b8083e47d4f32cbe1da275ad704ec28" category="inline-link-macro-rx"></block>。</block>
  <block id="4ac6364736606467ebc3be7abadfb0ef" category="list-text">对于运行Kubernetes 1.25或更高版本的集群、请使用 <block ref="44d1f465bf50a20fa85c56cfe0e1804f" category="inline-link-macro-rx"></block>。</block>
  <block id="0af6b3e2ec6d581f66df3a49e97c5c55" category="list-text">删除用于安装当前 Astra Trident 实例的 Trident 运算符。例如、如果要从23.04升级、请运行以下命令：</block>
  <block id="300b059e0bac5cb2864932371a494a8a" category="list-text">使用适用于您的环境和Astra Trident版本的正确捆绑包YAML文件安装Astra Trident。例如、如果要为Kubenetes 1.27安装Asta Trident 23.07、请运行以下命令：</block>
  <block id="3ae662c67d403e6230b019a96e787b63" category="paragraph">您可以升级Asta三端Helm安装。</block>
  <block id="613909529798c8a2543da8e954e5d742" category="section-title">从升级<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 安装到TRIdent操作员</block>
  <block id="9142b40107d9c5a0b86ef0ce8c25a88b" category="paragraph">您可以从升级到最新版本的Trident操作员<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 安装。现有后端和PVC将自动可用。</block>
  <block id="89b46b05bfce8415b6a6373a93a0b04e" category="admonition">在切换安装方法之前、请查看 <block ref="d7d87809bc6e1001ccd94c7433d28fd5" category="inline-link-macro-rx"></block></block>
  <block id="a14a78392cb7980f1ecc5ee325c25d37" category="paragraph">NetApp以多种方式支持Asta三端。全天候提供广泛的免费自助支持选项、例如知识库(KB)文章和不和渠道。</block>
  <block id="8327052a054aaa112ecf4f19369899c9" category="inline-link-macro">NetApp软件版本支持定义</block>
  <block id="3042651f925f3e8415fae909364e667c" category="paragraph">Asta三项功能根据您的版本提供三种支持级别。请参见 <block ref="1b35655e5fe9e8bdc0fd2a18d7e5a06c" category="inline-link-macro-rx"></block>。</block>
  <block id="34678ee868eeabce720fc4a0fd60c17a" category="list-text">完全支持</block>
  <block id="e3ecfbc1273c567e1d485c5a67ea7b2a" category="list-text">Asta三项技术提供自发布之日起12个月的全面支持。</block>
  <block id="d397c85f7e5c9820b73839b4255bab4e" category="list-text">支持有限</block>
  <block id="09be36d73ff7ca920196ef5ddc6b1cc3" category="list-text">Asta三件式升级版自发布之日起13到24个月内提供有限支持。</block>
  <block id="57b81b24dfc6e0b0f8ce342d0f7250d3" category="list-text">自助支持</block>
  <block id="a880ae57450a3d9e2d8dd4c89d54126f" category="list-text">Astra Drident文档自发布之日起的25至36个月内可用。</block>
  <block id="34b6cd75171affba6957e308dcbd92be" category="cell">version</block>
  <block id="217af7d1776d22530d98be04d104fd49" category="inline-link-macro">23.07</block>
  <block id="45c5d0a80197b87cde19915df9356724" category="paragraph"><block ref="45c5d0a80197b87cde19915df9356724" category="inline-link-macro-rx"></block></block>
  <block id="f66bc2df80ac37f354b591907be92e18" category="cell">2024年7月</block>
  <block id="928f12ce7e1197fe962e09f979b98d0d" category="cell">2025年7月</block>
  <block id="a257f7f4b2f6e07845ce567df142ad00" category="cell">2026年7月</block>
  <block id="1a3a2b5e6c52142797bb5c00594e2a3c" category="inline-link-macro">23.04.</block>
  <block id="4f00a05b361ef580687832a6a48984db" category="paragraph"><block ref="4f00a05b361ef580687832a6a48984db" category="inline-link-macro-rx"></block></block>
  <block id="3b3d7bce734c0832c20ba464b1f2d199" category="cell">2024年4月</block>
  <block id="42ce83dc3f5ef22d986311b267a5ac20" category="cell">2025年4月</block>
  <block id="fc7d05f9009e90b92a15aad926bca249" category="cell">2026年4月</block>
  <block id="8dfda84fc7f59655e20a770603bf9231" category="inline-link-macro">23.01.</block>
  <block id="e0ed61e44672f0b6193055dd0719d240" category="paragraph"><block ref="e0ed61e44672f0b6193055dd0719d240" category="inline-link-macro-rx"></block></block>
  <block id="efe846805e5476fec607bbf54e45dc44" category="cell">2024年1月</block>
  <block id="9dd6e3f1271bf8cdcd9a0becace5f06f" category="cell">2025年1月</block>
  <block id="7022ed6df71cc12fbd0576cef4df23fd" category="cell">2026年1月</block>
  <block id="775d4bb28d257a6aa23992563a82c458" category="inline-link-macro">22.10.</block>
  <block id="1d064e71d708bc66779c604db1339850" category="paragraph"><block ref="1d064e71d708bc66779c604db1339850" category="inline-link-macro-rx"></block></block>
  <block id="b0ec3d3ab3b33bd69418a7bd9e4d8f9e" category="cell">2023年10月</block>
  <block id="09ea156cd1da2f7e3fda8aefab96074a" category="cell">2024年10月</block>
  <block id="99dfa28920a40a7be0858c50f989a3e5" category="cell">2025年10月</block>
  <block id="b321f6c1ada34a3fa850996d673e01ca" category="inline-link-macro">22.07.</block>
  <block id="295e1f077ca9f1e68f56c558741bad74" category="paragraph"><block ref="295e1f077ca9f1e68f56c558741bad74" category="inline-link-macro-rx"></block></block>
  <block id="cfab1ba8c67c7c838db98d666f02a132" category="cell">--</block>
  <block id="e764fe6b8f8825a307a87cedbef45678" category="inline-link-macro">22.04.</block>
  <block id="865d5fc74524e198b7d4edc0b0f93cd6" category="paragraph"><block ref="865d5fc74524e198b7d4edc0b0f93cd6" category="inline-link-macro-rx"></block></block>
  <block id="955ddf0f7e289ee80cdea4b5324b620d" category="inline-link-macro">22.01.</block>
  <block id="1d6d13ec4b4db5f5d3487f7624ba2730" category="paragraph"><block ref="1d6d13ec4b4db5f5d3487f7624ba2730" category="inline-link-macro-rx"></block></block>
  <block id="ecdd0ca053bad0e4dd13561a556a27a2" category="inline-link-macro">21.10.</block>
  <block id="26868cf4e34a30cd32082fe3a81f7a5b" category="paragraph"><block ref="26868cf4e34a30cd32082fe3a81f7a5b" category="inline-link-macro-rx"></block></block>
  <block id="b327964aef72f8262abc54b607c5acf2" category="inline-link-macro">21.07.</block>
  <block id="989e34685c65cba24936de4972bf6714" category="paragraph"><block ref="989e34685c65cba24936de4972bf6714" category="inline-link-macro-rx"></block></block>
  <block id="af08b45fa44807ac1852671e6fc59d44" category="inline-link-macro">21.04.</block>
  <block id="b5f347c5a644b0177640eb424de5985e" category="paragraph"><block ref="b5f347c5a644b0177640eb424de5985e" category="inline-link-macro-rx"></block></block>
  <block id="d029b605d0129cdb050642645b32b1db" category="inline-link-macro">21.01.</block>
  <block id="1e3346636960647557d3c482eddcce3b" category="paragraph"><block ref="1e3346636960647557d3c482eddcce3b" category="inline-link-macro-rx"></block></block>
  <block id="a84024ce06ef98519b3b51300b2c8fbf" category="inline-link-macro">20.10.</block>
  <block id="f5cb139594df07b13c6c08d1e87ca5ab" category="paragraph"><block ref="f5cb139594df07b13c6c08d1e87ca5ab" category="inline-link-macro-rx"></block></block>
  <block id="1cf7168782187634fbc408c66b895dbc" category="section-title">社区支持</block>
  <block id="314c5cdde6da009a7b0571d60c8422ae" category="paragraph">Astra上有一个由容器用户(包括Astra三端开发人员)组成的活跃公共社区 <block ref="6130664377fa14615bb1abd5257e9714" category="inline-link-macro-rx"></block>。这是一个很好的地方，可以提出有关项目的一般问题，并与志同道合的同行讨论相关主题。</block>
  <block id="965b11d07d6acceebc9efec23e5e74a9" category="section-title">NetApp技术支持</block>
  <block id="44c86da066b2aa1cdbeb7ae4dcc42baf" category="list-text"><block ref="44c86da066b2aa1cdbeb7ae4dcc42baf" category="inline-link-macro-rx"></block></block>
  <block id="a7266bb27e7415b120f5e25460dc32fe" category="list-text"><block ref="a7266bb27e7415b120f5e25460dc32fe" category="inline-link-macro-rx"></block></block>
  <block id="8f4c1b75985ff2903107b7115115ea58" category="list-text"><block ref="8f4c1b75985ff2903107b7115115ea58" category="inline-link-macro-rx"></block></block>
  <block id="b86b16f39688f208b4a554adb7958c46" category="list-text"><block ref="b86b16f39688f208b4a554adb7958c46" category="inline-link-macro-rx"></block></block>
  <block id="0adc03eac86772ad2c75c8f140be417e" category="sidebar">知识和支持</block>
  <block id="fabfc25ef8996fd90836e58a4c0b26b6" category="sidebar">获取帮助</block>
  <block id="5248a0897439d95866d14416e307c927" category="sidebar">配置和管理后端</block>
  <block id="af5d3eba040f5bcf3d3f037b574766c8" category="sidebar">管理后端</block>
  <block id="bcca457a84376733a80b2dfad749e939" category="sidebar">使用kubec联系 管理后端</block>
  <block id="e9e5f94eb04c1889f891ad75fd929b4b" category="sidebar">使用trdentctrd管理后端</block>
  <block id="95408f23568d6e604d1f49a1bf3ff238" category="sidebar">创建和管理存储类</block>
  <block id="76114b40ddbaf2bf18e9aee694563b40" category="sidebar">配置和管理卷</block>
  <block id="62486fa65fc31c383ace8989549632ad" category="sidebar">使用快照</block>
  <block id="143c9ea21ac76ba425aa94411fbba07b" category="sidebar">Astra Trident概述</block>
  <block id="ab09b43d2faaea1b49257d5a973eae0e" category="sidebar">管理和监控Asta Trandent</block>
  <block id="ee4c63201b5c5c6c9da139c0a39bcb7b" category="summary">适用于Docker的A作用 是直接与适用于NetApp存储平台的Docker生态系统集成。它支持从存储平台到 Docker 主机的存储资源配置和管理，并提供一个框架，用于在未来添加其他平台。</block>
  <block id="5d22e3d2d8e7ef4a3b8d79728779c6d8" category="paragraph">1.22 - 1.27.</block>
  <block id="3e0f4d44c9c86926852e66ee127c5d3d" category="paragraph">Astra三项功能支持使用导入卷<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 驱动程序。不支持使用导入卷<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 驱动程序。</block>
  <block id="475fb21c20bb54ea8ac6cb1756aba565" category="inline-link-macro">知识库文章：无法在备用后端创建从三端PVC Snapshot创建PVC</block>
  <block id="18051638f30f342b517379b11f0442f9" category="admonition">PVC将与源卷在同一后端创建。请参见 <block ref="0d4d7e7a69b413699039bc9b916a37d5" category="inline-link-macro-rx"></block>。</block>
  <block id="70d565ceadd7e1d5d1d6a3f98c198443" category="cell">用于筛选Kubbernetes节点IP的CIDR列表<block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix=" " category="inline-code"></block> 已启用。

使用<block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix=" " category="inline-code"></block> 和<block ref="b9c40fbe9daa81e40e06509d5bbd5a6c" prefix=" " category="inline-code"></block> 选项、Astra Trident可以自动管理导出策略。</block>
  <block id="fb1aab16c373fd5690bac00425c48d1c" category="list-text">使用<block ref="7d1aaf47144f9eb2fc66e328ddd3bad7" prefix=" " category="inline-code"></block> 设置为<block ref="43f6615bbb2c40a5306ff804094420b1" prefix=" " category="inline-code"></block>、Astra Trident将创建卷、而不会感知任何拓扑。创建 PVC 时会处理卷绑定和动态配置。这是默认值<block ref="7d1aaf47144f9eb2fc66e328ddd3bad7" prefix=" " category="inline-code"></block> 和适用于不强制实施拓扑限制的集群。创建永久性卷时、不会依赖于发出请求的POD的计划要求。</block>
  <block id="cd9179614936afe6f50612f0cf8c5615" category="inline-link">Red Hat 文档</block>
  <block id="288360859a486281aca1cda278bc5bb5" category="list-text">使用运行RHEL/RedHat CoreOS和iSCSI PV的工作节点时、请指定<block ref="70f68bb2f748b85de6526bfe236ea1e9" prefix=" " category="inline-code"></block> StorageClass中的mountOption、用于执行实时空间回收。请参见<block ref="cef8948c7b8e90d5be591e67d93555a7" category="inline-link-rx"></block>。</block>
  <block id="f0c578e8a253ac755fdd55b5aa06eba6" category="paragraph">您应定义一个 Prometheus 目标以收集指标并获取有关后端 Astra Trident 管理的信息，它创建的卷等。这<block ref="dc7964965bf1b3af43b28caf6231e550" category="inline-link-rx"></block> 介绍如何将 Prometheus 和 Grafana 与 Astra Trident 结合使用来检索指标。本博客介绍了如何以操作员身份在Kubelnetes集群中运行Prometheus、以及如何创建ServiceMonitor来获取Astra Tandent指标。</block>
  <block id="624ca91b001f11479001750d7a084dd0" category="paragraph">如果在创建PVC时收到"No Capacity Pools"(未找到容量池)错误、则您的应用程序注册可能没有关联的所需权限和资源(子网、虚拟网络、容量池)。如果启用了调试、则Astra Trident将记录创建后端时发现的Azure资源。验证是否正在使用适当的角色。</block>
  <block id="7ba8d326bd3ffe1308f04d8ab5bf3d1a" category="paragraph">创建一个机密，其中包含后端的访问凭据。这是每个存储服务 / 平台所特有的。以下是一个示例：</block>
  <block id="afad9414d1bc420e58e3a72442b8f495" category="list-text"><block ref="685d1f2146dd079015e81918414e8971" prefix="" category="inline-code"></block>：<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR与后端关联、后端包含<block ref="217026e5af08bfde5815657113dbfc82" prefix=" " category="inline-code"></block> 设置为<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR的uid。</block>
  <block id="5008913e7135c645ebbfbd67112d3184" category="list-text"><block ref="ffbb410a55bb31f801dea6387e2745ac" prefix="" category="inline-code"></block>：<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block> 已设置为delete。当<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR将被删除、它将过渡到Deleting状态。</block>
  <block id="9f104f262a04570e0cca4e57cdff0f85" category="list-text"><block ref="88183b946cc5f0e8c96b2e66e1c74a7e" prefix="" category="inline-code"></block>：Astra Trident无法确定与关联的后端的状态或是否存在<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR.例如、如果API服务器未响应或<block ref="5f829d3562952527064a5c553cd09189" prefix=" " category="inline-code"></block> 缺少CRD。这可能需要干预。</block>
  <block id="a12734327c1f79f44d176f7c6f6f7841" category="paragraph">对于以前存在的后端、请使用更新后端<block ref="defd1e55f93269ac9278afc086951ba8" prefix=" " category="inline-code"></block> 将确保Astra Trident自动管理导出策略。这将创建一个以后端UUID命名的新导出策略、后端上的卷在重新挂载时将使用新创建的导出策略。</block>
  <block id="88512325ffcc13fbee60f3ca0669f67e" category="list-text">已有后端、但没有<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> 因为它们是使用创建的<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="4cfeb5a9099082a66a720c90a50036af" category="paragraph">从输出中可以看出这一点<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> 已成功创建并绑定到后端[观察后端的UUID]。</block>
  <block id="83167df2bbc65626ea3925b7abea9e48" category="paragraph">Astra Trident可以使用双向CHAP对iSCSI会话进行身份验证<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 驱动程序。这需要启用<block ref="099cb468880f266cba40b49391fa46bc" prefix=" " category="inline-code"></block> 选项。设置为时<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>中，A作用 是将SVM的默认启动程序安全性配置为双向CHAP，并设置后端文件中的用户名和密钥。NetApp 建议使用双向 CHAP 对连接进行身份验证。请参见以下配置示例：</block>
  <block id="7b4fb3a852b49d46b743b188c7bc25a1" category="list-text">如果SVM的默认启动程序安全类型为none (默认设置)*和*卷中已没有已有的LUN、Asta TIDent会将默认安全类型设置为<block ref="9ef2bbb12ff72558472202561a25058d" prefix=" " category="inline-code"></block> 然后继续配置CHAP启动程序以及目标用户名和密码。</block>
  <block id="8f5fd7cb8eae048fe5b83025fe95feff" category="list-text">如果 SVM 包含 LUN ，则 Astra Trident 不会在 SVM 上启用 CHAP 。这样可确保对SVM上已存在的LUN的访问不受限制。</block>
  <block id="cb462a22682d8f02b65abeb6ce8bda89" category="paragraph"><block ref="35a6b548833df39b8bbc748563b1938b" category="inline-link-rx"></block> 使企业能够更轻松地管理，保护和移动在公有云内部和内部环境中以及之间的 Kubernetes 上运行的数据丰富的容器化工作负载。Asta使用来自公共云和内部环境中经验证的广泛NetApp存储产品组合中的三项技术配置和提供持久容器存储。此外，它还提供了一组丰富的高级应用程序感知型数据管理功能，例如快照，备份和还原，活动日志和主动克隆，用于数据保护，灾难 / 数据恢复，数据审核以及 Kubernetes 工作负载的迁移用例。</block>
  <block id="54ad97548183fc7d802b6db88573701f" category="paragraph">ONTAP是NetApp多协议统一存储操作系统、可为任何应用程序提供高级数据管理功能。ONTAP 系统采用全闪存，混合或全 HDD 配置，并提供多种不同的部署模式，包括专门设计的硬件（ FAS 和 AFF ），白盒（ ONTAP Select ）和纯云（ Cloud Volumes ONTAP ）。</block>
  <block id="f8869dc9dbb397ea76e820ae99f70217" category="paragraph"><block ref="6a2736fcbb5755dd03d114a5153506eb" category="inline-link-rx"></block> 是一项完全托管的AWS服务、可用于启动和运行由NetApp ONTAP存储操作系统提供支持的文件系统。FSx for ONTAP支持您利用熟悉的NetApp功能、性能和管理功能、同时利用在AWS上存储数据的精简性、灵活性、安全性和可扩展性。FSx for ONTAP支持许多ONTAP文件系统功能和管理API。</block>
  <block id="7458188f037f23dc14a7396825f28eca" category="summary">在 Astra Trident 中配置有两个主要阶段。第一阶段会将存储类与一组合适的后端存储池相关联，并在配置之前进行必要的准备。第二阶段包括卷创建本身、需要从与待定卷的存储类关联的存储池中选择一个存储池。</block>
  <block id="fdd92355bcecae670f43576c4c4951c5" category="list-text">。<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>，<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block>，和<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block> 驱动程序、每个永久性卷(PV)都会映射到一个FlexVol。因此，卷快照会创建为 NetApp 快照。与竞争对手的快照技术相比、NetApp快照技术可提供更高的稳定性、可扩展性、可恢复性和性能。无论是在创建 Snapshot 副本所需的时间还是在存储空间中，这些 Snapshot 副本都极为高效。</block>
  <block id="5d4b9bc562ebe88c39d0e521b90fc54b" category="list-text">。<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> 驱动程序、每个永久性卷(PV)都会映射到一个FlexGroup。因此，卷快照会创建为 NetApp FlexGroup 快照。与竞争对手的快照技术相比、NetApp快照技术可提供更高的稳定性、可扩展性、可恢复性和性能。无论是在创建 Snapshot 副本所需的时间还是在存储空间中，这些 Snapshot 副本都极为高效。</block>
  <block id="f85752654c0e718ddc1911dc26c4bf0a" category="list-text">。<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 驱动程序、PV映射到在共享FlexVol上创建的LUN。可以通过对关联 LUN 执行 FlexClones 来实现 PV 的卷快照。借助ONTAP FlexClone技术、即使是最大的数据集、也可以近乎瞬时地创建副本。副本与其父级共享数据块，除了元数据所需的存储之外，不会占用任何存储。</block>
  <block id="4d6bd66a7857ea48a856f389fbea7d9d" category="paragraph">借助 Astra Trident ，您可以使用 VolumeSnapshots 创建新的 PV 。通过对支持的 ONTAP 和 CVS 后端使用 FlexClone 技术，可以从这些快照创建 PV 。从快照创建PV时、备份卷是快照父卷的FlexClone。。<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> 驱动程序使用Element软件卷克隆从快照创建PV。此时，它将从 Element 快照创建一个克隆。</block>
  <block id="14b63ea5b97502ca2d75e85bee96b8b4" category="paragraph">克隆卷时，此操作将使发生原因 ONTAP 立即从其父卷拆分克隆。默认值为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>。在克隆卷的某些使用情形中，最好在创建后立即将克隆从其父卷中拆分，因为不太可能有任何提高存储效率的机会。例如、克隆空数据库可以节省大量时间、但只能节省很少的存储空间、因此最好立即拆分克隆。</block>
  <block id="6d70e81198809f9c160f10b05a430ab1" category="paragraph">将其设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block> 将创建<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block> 访问卷的客户端可以看到的目录。默认值为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>、表示的可见性<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block> 默认情况下、目录处于禁用状态。某些映像(例如官方MySQL映像)在出现时无法按预期运行<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block> 目录可见。</block>
  <block id="284899fef89b0b2e358229a40cbaa53e" category="cell">将其设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block> 将关闭LUN的空间分配功能。默认值为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>、表示当卷空间用尽且卷中的LUN无法接受写入时、ONTAP 会向主机发出通知。此选项还允许 ONTAP 在主机删除数据时自动回收空间。</block>
  <block id="40c7465c2468fd6e890691f6cb612731" category="paragraph">升级后的 Trident 安装的前缀。如果您使用的是1.3.2之前的版本的Trident并对现有卷执行升级、则需要设置此值才能访问通过volume-name方法映射的旧卷。</block>
  <block id="7f86daacf34c67c042470fa9d926ba49" category="paragraph">标准日志记录级别应允许您诊断大多数问题。如果您发现这还不够、则可以启用调试日志记录。</block>
  <block id="6bdfdbfc466bb6d93222dbf7b3a374fe" category="list-text">如果您在主机上运行二进制文件本身、则主机的中会显示日志<block ref="849fc2421f236e9c9b49a9d3fed2c404" prefix=" " category="inline-code"></block> 目录。要启用调试日志记录、请指定<block ref="9b945915b0cddbee22047fd529d642f6" prefix=" " category="inline-code"></block> 运行插件时。</block>
  <block id="856df87d418b99d5e88b1e337987cad3" category="paragraph">通过使用三端技术支持安装程序、可以创建一个Kubernetes ClusterRole、此类ClusterRole可以对Kubernetes集群中的集群的PersentVolume、PersentVolumeClaim、StorageClass和机密资源具有特定访问权限。请参见 <block ref="7a68296d6f600eac17d317743bea0050" category="inline-link-macro-rx"></block>。</block>
  <block id="1a4c36220ae60b6a6a4c2285be05a43a" category="section-title">我的存储系统密码已更改、Astra Trident不再工作、如何恢复？</block>
  <block id="a988578d4c176cf950a2211099db7d92" category="paragraph">使用更新后端的密码<block ref="00a81aa9b1d406861879017de885e0fb" prefix=" " category="inline-code"></block>。替换<block ref="3d9fd17a5232cc24eeeaec2b07af5417" prefix=" " category="inline-code"></block> 在示例中、使用后端名称、和<block ref="27ab7e8dbd45daf638f3144d4891ef3b" prefix=" " category="inline-code"></block> 路径正确<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block> 文件</block>
  <block id="8cb93d7a514e5569b46cba45dedc7daf" category="paragraph">如果 Trident POD 被销毁，数据不会丢失。三元数据存储在CRD对象中。已由 Trident 配置的所有 PV 都将正常运行。</block>
  <block id="7844c41fb05be5427418dbab3d0bdc49" category="paragraph">借助Amazon FSx for NetApp ONTAP、您可以利用您熟悉的NetApp功能、性能和管理功能、同时还可以利用在AWS上存储数据的精简性、灵活性、安全性和可扩展性。FSx for ONTAP支持许多ONTAP文件系统功能和管理API。Cloud Volume ONTAP 的兼容驱动程序包括<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>，<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>，<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>。</block>
  <block id="7439c9a99660382e94c16c5272b9bfb0" category="paragraph">除了两个例外，永久性卷是 Kubernetes 中不可变的对象。创建后，可以修改回收策略和大小。但是、这并不会阻止在Kubnetes之外修改卷的某些方面。为了针对特定应用程序自定义卷，确保容量不会意外占用，或者出于任何原因将卷移动到其他存储控制器，这一点可能是理想的。</block>
  <block id="fe253a0cf40d6b5d49846202cdeaff7b" category="paragraph">执行上述命令后， Astra Trident 将在后端找到卷并读取其大小。它会自动添加(并在必要时覆盖)已配置的PVC卷大小。然后， Astra Trident 会创建新的 PV ， Kubernetes 会将 PVC 绑定到 PV 。</block>
  <block id="3e01fdf7f18117c92347492814d988ee" category="admonition">自 Red Hat OpenShift 3.9 版开始，官方文档出于对数据损坏的担忧，建议不要对日志记录服务使用 NFS 。这是基于 Red Hat 对其产品的测试得出的。ONTAP NFS服务器不存在这些问题、可以轻松地备份日志记录部署。最终，您可以选择日志记录服务的协议，只需了解这两种协议在使用 NetApp 平台时都能很好地发挥作用，如果您愿意，也没有理由避免使用 NFS 。</block>
  <block id="643f15e2581a728cb2a6d66953a357d7" category="paragraph">要确保底层服务使用正确的存储、请务必根据部署方法配置Ansensant变量。让我们来看看每种部署方法的选项。</block>
  <block id="00b454d2ba2e8d34f65f8a714304a598" category="admonition">下表仅包含与日志记录服务相关的存储配置相关的变量。您可以在中找到其他选项 <block ref="e81826ec3b15492352776daada114990" category="inline-link-macro-rx"></block> 应根据您的部署情况查看，配置和使用。</block>
  <block id="b8e4ea2ed30f2f3a9f05ef8e1cc243db" category="paragraph">与日志记录服务和 OpenShift 作为一个整体一样， Ansible 用于部署指标服务。此外、与日志记录服务一样、指标服务也可以在集群初始设置期间或集群运行后使用组件安装方法进行部署。下表包含在为指标服务配置永久性存储时非常重要的变量。</block>
  <block id="db7ae7f1cfb23bf788607032d443c26c" category="paragraph">使用在主机 / 清单文件中定义的适当 Ansible 变量，使用 Ansible 部署服务。如果您在 OpenShift 安装时进行部署，则系统将自动创建和使用 PV 。如果您要使用组件操作手册进行部署、则在安装OpenShift后、Ansable将创建所需的任何PVC、并在Asta Trivent为其配置存储后部署该服务。</block>
  <block id="8198f2a0f41303e214bcb5ab7d9e9ef4" category="section-title">ONTAP NAS驱动程序详细信息</block>
  <block id="147be9e86dbd052c1f2b490f1e9b9897" category="paragraph">Asta三端存储提供了以下NAS存储驱动程序、用于与ONTAP集群进行通信。支持的访问模式包括：_ReadWriteOnce_(RWO)、_ReadOnlyMany_(ROX)、_ReadWriteMany_(rwx)、_ReadWriteOncePod_(RWOP)。</block>
  <block id="2b5fc47d5a68b6070472f3a239fc77f3" category="paragraph">""、<block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix=" " category="inline-code"></block>，<block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix=" " category="inline-code"></block></block>
  <block id="f353c2f2ba62c120d68a9fde333ef59f" category="summary">了解适用于Azure NetApp Files的NFS和SMB后端配置选项并查看配置示例。</block>
  <block id="19b571f96ec7d28e6329f9c52fab7424" category="paragraph">Asta三端存储使用您的后端配置(子网、虚拟网络、服务级别和位置)在请求位置可用的容量池上创建Azure NetApp Files卷、并与请求的服务级别和子网匹配。</block>
  <block id="b9acebca540d60eef74f6ffc3e4aa2e7" category="paragraph">Azure NetApp Files后端提供了这些配置选项。</block>
  <block id="5cda3f51d6458740b40a6f4c0aab02f0" category="paragraph">这是绝对的最低后端配置。使用此配置、Asta三端存储可以发现已配置位置委派给Azure NetApp Files的所有NetApp帐户、容量池和子网、并随机将新卷放置在其中一个池和子网上。因为<block ref="296026821ada2ab8aebcf13547a63df5" prefix=" " category="inline-code"></block> 省略<block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix=" " category="inline-code"></block> 默认情况下适用、后端将为NFS卷配置。</block>
  <block id="639aa44ce5a6709a5719b427993c9657" category="paragraph">当您刚刚开始使用Azure NetApp Files并尝试某些操作时、此配置是理想的选择、但实际上、您需要为所配置的卷提供额外的范围界定。</block>
  <block id="62679c3777af7cf9f6af4e6aa0e7cfc4" category="paragraph">此后端配置会将卷放置在Azure中<block ref="6356111305f5daab178fa6051b7a8ae7" prefix=" " category="inline-code"></block> 位置<block ref="7057376a419b3334cc7b8b7a9f064abb" prefix=" " category="inline-code"></block> 容量池。Asta三端存储自动发现该位置委派给Azure NetApp Files的所有子网、并随机在其中一个子网上放置一个新卷。</block>
  <block id="a493eb50acc1b5a276034b914c4ce10d" category="section-title">ONTAP SAN驱动程序详细信息</block>
  <block id="7fd570aee3c81c5db028704e5fdf5b52" category="paragraph">Asta三端存储提供了以下SAN存储驱动程序、用于与ONTAP集群进行通信。支持的访问模式包括：_ReadWriteOnce_(RWO)、_ReadOnlyMany_(ROX)、_ReadWriteMany_(rwx)、_ReadWriteOncePod_(RWOP)。</block>
  <block id="fcd147679464b9eda6367f4e90e16ff8" category="paragraph">Rwo、RWO1.</block>
  <block id="94188b3f68e7baf5ef4a1f721857e77c" category="paragraph">Rox和rwx在文件系统卷模式下不可用。</block>
  <block id="2acadf30bbdf69b0408eadef287eb346" category="summary">您可以将Azure NetApp Files配置为Astra三端。您可以使用Azure NetApp Files后端连接NAS和SMB卷。</block>
  <block id="8094785ba6188e7e62aca54731d06963" category="paragraph">您可以将Azure NetApp Files配置为Astra三端。您可以使用Azure NetApp Files后端连接NFS和SMB卷。</block>
  <block id="2f73efb41160e66d2e4f5b500c984de8" category="section-title">Azure NetApp Files驱动程序详细信息</block>
  <block id="4ba3000579192de0298587f58861a12e" category="paragraph">Asta三端磁盘提供了以下Azure NetApp Files存储驱动程序、用于与集群进行通信。支持的访问模式包括：_ReadWriteOnce_(RWO)、_ReadOnlyMany_(ROX)、_ReadWriteMany_(rwx)、_ReadWriteOncePod_(RWOP)。</block>
  <block id="7e7d2470a40e817070cd42bd81713c7b" category="paragraph"><block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix="" category="inline-code"></block>，<block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix=" " category="inline-code"></block></block>
  <block id="a26f7ba5e57155f8df4df121d4527158" category="cell"><block ref="43f09bc16eaf24131ea82903259878ac" prefix="" category="inline-code"></block></block>
  <block id="52dcf826fbc73c7b9f555d6b50423f98" category="paragraph"><block ref="310201b6353c5f38bc039e0e51b079d3" prefix="" category="inline-code"></block><block ref="66f137c5dc684da2a6a65917c86edd67" prefix="," category="inline-code"></block>，<block ref="40d1d2ce03569076bd0dc1e0ff90aa4c" prefix=" " category="inline-code"></block></block>
  <block id="62233a6f2ba54c1dcede120348a6f595" category="paragraph">了解如何在Asta Trident安装中创建和使用Element后端。</block>
  <block id="4e7d6286f837d54a4e4154d4b21b0659" category="section-title">Element驱动程序详细信息</block>
  <block id="9fc6992cc8e273b3f7d317fc2a54e18c" category="paragraph">Asta三项功能提供<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> 用于与集群通信的存储驱动程序。支持的访问模式包括：_ReadWriteOnce_(RWO)、_ReadOnlyMany_(ROX)、_ReadWriteMany_(rwx)、_ReadWriteOncePod_(RWOP)。</block>
  <block id="2d5e7b30bb6eb1bd6091005422150b91" category="paragraph">。<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> 存储驱动程序支持_file_和_block_卷模式。。<block ref="ac52cf637478f3656a1fdee5c02324fd" prefix=" " category="inline-code"></block> volumemode、Astra Trident会创建卷并创建文件系统。文件系统类型由 StorageClass 指定。</block>
  <block id="f5aa1832e32f2b8d7a7f22d8e36a4617" category="inline-link-macro">NAS驱动程序</block>
  <block id="de9e7e8f2c463ef15bebdbf8d2d1aa6d" category="inline-link-macro">SAN驱动程序</block>
  <block id="8126e96f64b1a5de24d4cf6e4b09b986" category="section-title">Google Cloud驱动程序详细信息</block>
  <block id="9393948ed1be0af0cfb3d99e3248301a" category="paragraph">Asta三项功能提供<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block> 与集群通信的驱动程序。支持的访问模式包括：_ReadWriteOnce_(RWO)、_ReadOnlyMany_(ROX)、_ReadWriteMany_(rwx)、_ReadWriteOncePod_(RWOP)。</block>
  <block id="9aa82da0cffe247b84587c1cc8e32746" category="cell">default</block>
  <block id="dfb6135042da6e8fbf367d9cf13431ef" category="paragraph">卷大小的可选限制。默认值：""(未强制实施)</block>
  <block id="4846d107d8ddb5051591d14dcbddba8c" category="admonition">除非指定、否则卷驱动程序的默认名称为NetApp。</block>
  <block id="5ab207578468b7bbc201024492654253" category="list-text">在Azure NetApp Files驱动程序中增加了对网络功能的支持。（<block ref="e0e89f8bd936a5eb3adce74cac88eab0" category="inline-link-macro-rx"></block>）</block>
  <block id="302e5f91d375f03821f8fd6340563539" category="list-text">修复了Azure NetApp Files驱动程序无法克隆具有多个导出规则的卷的问题描述问题。</block>
  <block id="1d61f4e1411b6940bc918fb56346f64d" category="list-text">修复了Azure NetApp Files驱动程序、允许重复的资源名称并将操作限制在一个位置。</block>
  <block id="409ee85d2342bf416b29a45a7b9c4e59" category="list-text">增加了对Azure NetApp Files卷"unixPermissions (unixPermissions)"选项的支持。（<block ref="b2ee1a79cce917ad1d60b3bec442914a" category="inline-link-macro-rx"></block>）</block>
  <block id="9f65455ce006fe56e7588e4e14f1edb8" category="paragraph">可以为模拟服务类设计虚拟池。使用适用于 Azure NetApp Files 的云卷服务的虚拟池实施，让我们来了解一下如何设置不同的服务类。使用多个标签配置Azure NetApp Files后端、以表示不同的性能级别。设置<block ref="28277e44c5db61612accdf326d137e96" prefix=" " category="inline-code"></block> 添加适当的性能级别、并在每个标签下添加其他所需的方面。现在、创建可映射到不同虚拟池的不同Kubernetes存储类。使用<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block> 字段中、每个StorageClass都会调用可用于托管卷的虚拟池。</block>
  <block id="42f3b65b98b18c792b7b5534e40d2646" category="section-title">FSx for ONTAP驱动程序详细信息</block>
  <block id="9b82ca4e89dcaf4cecf50467b6126909" category="paragraph">有关驱动程序详细信息、请参见 <block ref="4093b6d0ce8cf414637a02002d2b0376" category="inline-link-macro-rx"></block> 和 <block ref="276422a40a581e9842304216329765d5" category="inline-link-macro-rx"></block>。</block>
  <block id="02882f6e58d1a3adffd9c9e4d0b2cc15" category="cell">集群或 SVM 管理 LIF 的 IP 地址

可以指定完全限定域名(FQDN)。

如果使用安装了Astra Trident、则可以将设置为使用IPv6地址<block ref="4a4ef9f92e69acc000120379678aadcf" prefix=" " category="inline-code"></block> 标志。IPv6地址必须用方括号定义、例如：[28e8：d9fb：a825：b7bf：69a8：d02f：9e7b：3555]。</block>
  <block id="629ac35dda697ad18f8fef7094213871" category="list-text">如果要降级到早期版本的三端到功能、请先运行<block ref="ac8650577d1b744589a6a11b60ac38c7" prefix=" " category="inline-code"></block> 用于删除Trident的命令。下载所需的<block ref="f3d78353f8dac3e49bbefeb5f6a2383b" category="inline-link-rx"></block> 并使用安装<block ref="430bf77bee6c59d385d4194f84c21b16" prefix=" " category="inline-code"></block> 命令：</block>
  <block id="2a1db8dc71dec3264e9155d610575785" category="section-title">完全删除Asta Trandent和CRD</block>
  <block id="de752588132c292a8a12ad2441fbf43c" category="paragraph">您可以完全删除Asta Dent以及所有创建的CRD和关联的自定义资源。</block>
  <block id="90dc0d986558510d55c898cb62f4f2d5" category="admonition">此操作无法撤消。除非您需要全新安装Asta三端安装、否则请勿执行此操作。要在不删除CRD的情况下卸载Astra Dent、请参见 <block ref="6b2eb9a0745ceac90657a4978cb010ca" category="inline-link-macro-rx"></block>。</block>
  <block id="4f5dbc74e3448e08fe0e7bfd62876fc8" category="open-title">Trident 运算符</block>
  <block id="f4508049a2ac2bdb5cb9fde92120497a" category="paragraph">要卸载Asta Dandent并使用Dandent操作符完全删除CRD：</block>
  <block id="152090ff5e9a05ea7e1cf0c248449638" category="open-title">掌舵</block>
  <block id="96ce7a69bf578e9c3915fb876cad6dd9" category="paragraph">要使用Helm卸载Asta Dent并完全删除CRD、请执行以下操作：</block>
  <block id="fed6290ac938ca603cf5f4f680802954" category="open-title">&lt;code&gt;tridentctl&lt;/code&gt;</block>
  <block id="cc40bbe559f5f0b7306a8ae2941647b5" category="paragraph">在使用卸载Asta Dent后完全删除CRD<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block></block>
  <block id="660807cada2c8061fb92638cfe0568d0" category="list-text">为了便于升级和重新安装、卸载Asta Dent不会删除CRD或Asta Dent创建的相关对象。如果您需要完全删除Asta Trandent及其所有数据、请参见 <block ref="9d95a644de0932ac2f909a32a488bd14" category="inline-link-macro-rx"></block>。</block>
  <block id="3277c9131339b6e3e8b8401d060b2ace" category="list-text">*删除<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>：通过删除<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> cr用于部署Astra Trident、此时您需要指示操作员卸载Trident。操作员将处理的删除操作<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> 然后继续删除Astra Trident部署和取消定义、并删除在安装过程中创建的Trident Pod。</block>
  <block id="d92f992bb942ae97af56a9921f1fb6d0" category="paragraph">使用<block ref="fe98497efedbe156ecc4b953aea77e07" prefix=" " category="inline-code"></block> 命令输入<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 删除与Asta Trandent关联的所有资源(CRD和相关对象除外)。</block>
  <block id="88251b113e3f1da4ba88b0d4283d23ed" category="paragraph">了解如何在Astra三端安装中创建和使用ONTAP SAN驱动程序。本节提供了将后端映射到StorageClasses的后端配置示例和详细信息。</block>
  <block id="00100eed0a9df5b2142497897b426d44" category="cell">集群或SVM管理LIF的IP地址。

可以指定完全限定域名(FQDN)。

如果使用安装了Astra Trident、则可以将设置为使用IPv6地址<block ref="4a4ef9f92e69acc000120379678aadcf" prefix=" " category="inline-code"></block> 标志。IPv6地址必须使用方括号进行定义、例如<block ref="33e9328e92e3ef05629093b4693b3925" prefix=" " category="inline-code"></block>。

有关无缝MetroCluster切换、请参见 <block ref="41195e18a4a81a05f5c5a6be365a5602" category="inline-xref-macro-rx"></block>。</block>
  <block id="53f89913149599078aa2763e20f64db1" category="cell">协议 LIF 的 IP 地址。

*请勿为iSCSI指定。* Astra Trident使用 <block ref="2de2f329c45219df280af5a70ed7a17c" category="inline-link-macro-rx"></block> 发现建立多路径会话所需的iSCI LIF。如果出现、则会生成警告<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block> 已明确定义。

*对于MetroCluster省略。*请参见 <block ref="41195e18a4a81a05f5c5a6be365a5602" category="inline-xref-macro-rx"></block>。</block>
  <block id="19611c32e434019e356af9e0da999936" category="cell">要使用的 Storage Virtual Machine

*对于MetroCluster省略。*请参见 <block ref="41195e18a4a81a05f5c5a6be365a5602" category="inline-xref-macro-rx"></block>。</block>
  <block id="16d35233bf6aa04a2ff7b9ec19d64661" category="example-title">MetroCluster示例</block>
  <block id="fd9313829353096dad83775c55ce66f8" category="paragraph">您可以对后端进行配置、以避免在切换和切回后手动更新后端定义 <block ref="6ffda35fd03109cc0d7cf7a1f79d2c30" category="inline-link-macro-rx"></block>。</block>
  <block id="abc765e949697f25e96670a5cab132f3" category="paragraph">要进行无缝切换和切回、请使用指定SVM<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block> 并省略<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block> 和<block ref="924ff83ff1e671bacfb07ff12b845703" prefix=" " category="inline-code"></block> parameters例如：</block>
  <block id="d1cc287cede970a7472833938f39b940" category="list-text">需要更新参数（例如所使用的 ONTAP SVM 的名称）。</block>
  <block id="bb5c9e20ecc2d96bd9d91107161bf89b" category="list-text">您可以更新<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> 使用以下命令直接通过KubeNet访问对象：</block>
  <block id="ccec41e7609b17a7fe58691b5cbf68ea" category="list-text">或者、您也可以对现有进行更改<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> 使用以下命令执行CR：</block>
  <block id="9c12c9edc9fbb4ee2f0331555cd8de1b" category="paragraph">了解如何创建ONTAP NAS驱动程序并将其用于Astra三端安装。本节提供了将后端映射到StorageClasses的后端配置示例和详细信息。</block>
  <block id="630864bd1af028bd4049fce933eeed43" category="cell">集群或 SVM 管理 LIF 的 IP 地址

可以指定完全限定域名(FQDN)。

如果使用安装了Astra Trident、则可以将设置为使用IPv6地址<block ref="4a4ef9f92e69acc000120379678aadcf" prefix=" " category="inline-code"></block> 标志。IPv6地址必须使用方括号进行定义、例如<block ref="33e9328e92e3ef05629093b4693b3925" prefix=" " category="inline-code"></block>。

有关无缝MetroCluster切换、请参见 <block ref="41195e18a4a81a05f5c5a6be365a5602" category="inline-xref-macro-rx"></block>。</block>
  <block id="55ef3b8d4908e1b161b74799585d5b2b" category="cell">协议 LIF 的 IP 地址。

建议指定<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>。如果未提供此参数、则Astra Trident会从SVM提取数据LIF。您可以指定用于NFS挂载操作的完全限定域名(FQDN)、从而可以创建循环DNS、以便在多个数据LIF之间实现负载平衡。

可以在初始设置后更改。请参见 <block ref="b2c939cb81e81d99a25f4be74f517f2f" category="inline-xref-macro-rx"></block>。

如果使用安装了Astra Trident、则可以将设置为使用IPv6地址<block ref="4a4ef9f92e69acc000120379678aadcf" prefix=" " category="inline-code"></block> 标志。IPv6地址必须使用方括号进行定义、例如<block ref="33e9328e92e3ef05629093b4693b3925" prefix=" " category="inline-code"></block>。

*对于MetroCluster省略。*请参见 <block ref="41195e18a4a81a05f5c5a6be365a5602" category="inline-xref-macro-rx"></block>。</block>
  <block id="d24ddd1da817847ede47979e6e68c60e" category="example-title">ONTAP NAS FlexGroup示例</block>
  <block id="8788fe54575b03d9b62dbb1a38a7a277" category="example-title">SMB卷示例</block>
  <block id="1ce00ab507a065e4febc57b244e25d18" category="example-title">自动导出策略示例</block>
  <block id="5ef13a507a243e20eb0469a9d7670527" category="example-title">IPv6地址示例</block>
  <block id="ee8af8063e9ea3725931d232730b8a8e" category="example-title">Amazon FSx for ONTAP使用SMB卷示例</block>
  <block id="4c7a5aa32bd20cc1e93c16706345fc24" category="list-text">dDocker。io/NetApp/trdent：23.07.1</block>
  <block id="8f4c6bec9339a74c71de885862e0c35a" category="list-text">dDocker .io/NetApp/trdent操作程序：23.07.1 (可选)</block>
  <block id="af35b81563dca040d2036ccc5fdf5cbf" category="summary">在使用三端修复操作符升级Asta三端修复程序之前、您应了解升级期间发生的后台进程。其中包括对支持滚动更新的三项技术控制器、控制器Pod和节点Pod以及节点DemonSet进行的更改。</block>
  <block id="99c73e527698ab76b32674b7e9dd4708" category="inline-link-macro">_滚动更新_</block>
  <block id="bec1352836ad67ce44ee000c83d4dae1" category="paragraph">众多选择之一 <block ref="1294f86abdf2591159d9dd04918b1092" category="inline-link-macro-rx"></block> 安装和升级Asta Trident是指在不中断现有已挂载卷的情况下自动处理Asta Trident和Kubbernetes对象。通过这种方式、Astra三端技术可以支持零停机升级、或 <block ref="c0fb6b6f12bb8ae805a97690328ec023" category="inline-link-macro-rx"></block>。尤其是、通过与Kubenetes集群进行通信、可以：</block>
  <block id="cf2f4ee3dd2f4847e4871244b9ac51df" category="list-text">使用<block ref="cd01e1bae83933b9c59c914bc71332ac" prefix=" " category="inline-code"></block> 命令位置<block ref="d6a197586cce49153cfbfb94bb2e9941" prefix=" " category="inline-code"></block> 反映了要升级到的版本。</block>
  <block id="c8f1fdceb105d8331cbfc9721c6bc44f" category="list-text">使用 ...<block ref="0562418e6d9a76d0dd22b2f186a2203d" prefix=" " category="inline-code"></block> 并为部署和映像注册表位置指定一个名称。Your <block ref="57de9a35aeedde82408b1e047030d221" category="inline-link-macro-rx"></block> 可以位于一个注册表或不同的注册表中、但所有CSI映像都必须位于同一注册表中。在示例中、<block ref="87b2b8072e7d5f7e6e968a7c49bdc4a2" prefix=" " category="inline-code"></block> 是您要安装的Astra Trident版本。</block>
  <block id="d466de3460bd819fa8eb16bf42b1db7e" category="paragraph">例如、要更改的默认值<block ref="ad42f6697b035b7580e4fef93be20b4d" prefix=" " category="inline-code"></block>、运行以下命令<block ref="8b5806248570dbb13e7d3bc5e6c0ee37" prefix=" " category="inline-code"></block> 命令位置<block ref="87b2b8072e7d5f7e6e968a7c49bdc4a2" prefix=" " category="inline-code"></block> 是您要安装的Astra Trident版本：</block>
  <block id="780123b705b81f6d4b816faff5e82117" category="section-title">有关Astra Trdent 23.07.1的重要信息</block>
  <block id="b2527de2557e527d4be043e1c86bc69c" category="list-text">使用 ...<block ref="0562418e6d9a76d0dd22b2f186a2203d" prefix=" " category="inline-code"></block> 并为您的部署指定一个名称、如以下示例中所示<block ref="87b2b8072e7d5f7e6e968a7c49bdc4a2" prefix=" " category="inline-code"></block> 是您要安装的Astra Trident版本。</block>
  <block id="6e0b20191589c60f116864ba4a9f6450" category="paragraph">在中<block ref="02f3115b006f7541a477d52ea8c0f861" prefix=" " category="inline-code"></block>、更新<block ref="948b8261d6bd10eba9190981601c0915" prefix=" " category="inline-code"></block> 以反映映像注册表的位置。Your <block ref="57de9a35aeedde82408b1e047030d221" category="inline-link-macro-rx"></block> 可以位于一个注册表或不同的注册表中、但所有CSI映像都必须位于同一注册表中。例如：</block>
  <block id="d265ac83a999c5664002082de4a65e05" category="list-text"><block ref="40ecbfec412666aee449608e50f67b87" prefix="" category="inline-code"></block> 如果您的映像全部位于一个注册表中。</block>
  <block id="183ccfb0be6f36dfc545d9bf582a1180" category="list-text"><block ref="d3a400126b30a5fb9f887818fc7e1f04" prefix="" category="inline-code"></block> 如果Trident映像与CSI映像位于不同的注册表中。</block>
  <block id="d06187756592965157c9f1bc4fc51a9c" category="cell">"NetApp/trdent AutoSupport：23.07"</block>
  <block id="b686eadf7765eed3e9de8f9cbded0fe8" category="section-title">23.07.1中的新增功能</block>
  <block id="06918a8f55f386d79e64a70ca217b501" category="paragraph">*Kubernetes:*修复了删除守护程序集的问题，以支持零停机升级(<block ref="6f993c83118cc4a1dd5351c8501e26c9" category="inline-link-macro-rx"></block>）。</block>
  <block id="ca6a658f1db1af30f178530c90cbe8fc" category="section-title">23.07中的变更</block>
  <block id="57154d2dcf591aaa3d4dcbfbba196075" category="inline-link-macro">支持的ONTAP卷限制</block>
  <block id="7fe76f1189ac93d41118f7ba3e36e3ab" category="list-text">使用 ...<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 只有当永久性卷使用量计数预期高于时、才会显示此值 <block ref="e5997a58d747f862af8a862cd1b54e31" category="inline-link-macro-rx"></block>。</block>
  <block id="dd19a3f7646938a74ee3f35605e9c306" category="list-text">使用 ...<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> 只有当永久性卷使用量计数预期高于时、才会显示此值 <block ref="e5997a58d747f862af8a862cd1b54e31" category="inline-link-macro-rx"></block> 和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 无法使用驱动程序。</block>
</blocks>